function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){_defineProperty2(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _get3(e,t,n){return(_get3="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=_superPropBase(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function _superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_getPrototypeOf(e)););return e}function asyncGeneratorStep(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(l){return void n(l)}s.done?t(c):Promise.resolve(c).then(r,i)}function _asyncToGenerator(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){asyncGeneratorStep(o,r,i,a,s,"next",e)}function s(e){asyncGeneratorStep(o,r,i,a,s,"throw",e)}a(void 0)}))}}function _defineProperty2(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArrayLimit(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(c){s=!0,i=c}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _createForOfIteratorHelper(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var n,r=_getPrototypeOf(e);if(t){var i=_getPrototypeOf(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _possibleConstructorReturn(this,n)}}function _possibleConstructorReturn(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _wrapNativeSuper(e){var t="function"==typeof Map?new Map:void 0;return(_wrapNativeSuper=function(e){if(null===e||!_isNativeFunction(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return _construct(e,arguments,_getPrototypeOf(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),_setPrototypeOf(n,e)})(e)}function _construct(e,t,n){return(_construct=_isNativeReflectConstruct()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&_setPrototypeOf(i,n.prototype),i}).apply(null,arguments)}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function _isNativeFunction(e){return-1!==Function.toString.call(e).indexOf("[native code]")}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}/*! For license information please see main-es2015.46a5913056e51ec7be0f.js.LICENSE.txt */(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{0:function(e,t,n){e.exports=n("zUnb")},"3/ER":function(e,t,n){"use strict";(function(e){var r=n("Ju5/"),i="object"==typeof exports&&exports&&!exports.nodeType&&exports,o=i&&"object"==typeof e&&e&&!e.nodeType&&e,a=o&&o.exports===i?r.a.Buffer:void 0,s=a?a.allocUnsafe:void 0;t.a=function(e,t){if(t)return e.slice();var n=e.length,r=s?s(n):new e.constructor(n);return e.copy(r),r}}).call(this,n("3UD+")(e))},"3UD+":function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},EgFD:function EgFD(module,exports,__webpack_require__){var e;!function(e){var t=e.en=e.en||{};t.dictionary=Object.assign(t.dictionary||{},{"*Change to:* %0":"*Change to:* %0","*Check item*":"*Check item*","*Format:* %0":"*Format:* %0","*Indent:* %0":"*Indent:* %0","*Insert:* %0":"*Insert:* %0","*Merge cells*":"*Merge cells*","*Merge:* %0":"*Merge:* %0","*Outdent:* %0":"*Outdent:* %0","*Remove all formatting*":"*Remove all formatting*","*Remove format:* %0":"*Remove format:* %0","*Remove image text alternative*":"*Remove image text alternative*","*Remove link*":"*Remove link*","*Remove:* %0":"*Remove:* %0","*Replace table cells*":"*Replace table cells*","*Reset font background color*":"*Reset font background color*","*Reset font color*":"*Reset font color*","*Reset font family*":"*Reset font family*","*Reset font size*":"*Reset font size*","*Reset image width*":"*Reset image width*","*Set font background color:* %0":"*Set font background color:* %0","*Set font color:* %0":"*Set font color:* %0","*Set font family:* %0":"*Set font family:* %0","*Set font size:* %0":"*Set font size:* %0","*Set image text alternative:* %0":"*Set image text alternative:* %0","*Set image width:* %0":"*Set image width:* %0","*Set link:* %0":"*Set link:* %0","*Split cell:* horizontally":"*Split cell:* horizontally","*Split cell:* vertically":"*Split cell:* vertically","*Split:* %0":"*Split:* %0","*Uncheck item*":"*Uncheck item*","%0 of %1":"%0 of %1","Accept all selected suggestions":"Accept all selected suggestions","Accept all suggestions":"Accept all suggestions","Accept suggestion":"Accept suggestion","Align center":"Align center","Align left":"Align left","Align right":"Align right",Anonymous:"Anonymous",Aquamarine:"Aquamarine","Are you sure?":"Are you sure?",Big:"Big",Black:"Black","Block quote":"Block quote",Blue:"Blue","Blue marker":"Blue marker",Bold:"Bold","Bulleted List":"Bulleted List",Cancel:"Cancel","Cannot upload file:":"Cannot upload file:","Centered image":"Centered image","Change image text alternative":"Change image text alternative","Choose heading":"Choose heading",Column:"Column",Comment:"Comment","Comment editor":"Comment editor",CONNECTED_USERS:["1 connected user (me)","%0 connected users"],"Could not insert image at the current position.":"Could not insert image at the current position.","Could not obtain resized image URL.":"Could not obtain resized image URL.",Default:"Default","Delete column":"Delete column","Delete comment thread?":"Delete comment thread?","Delete comment?":"Delete comment?","Delete row":"Delete row","Dim grey":"Dim grey","Discard all selected suggestions":"Discard all selected suggestions","Discard all suggestions":"Discard all suggestions","Discard suggestion":"Discard suggestion",Downloadable:"Downloadable","Dropdown toolbar":"Dropdown toolbar",Edit:"Edit","Edit block":"Edit block","Edit link":"Edit link","Editor toolbar":"Editor toolbar",ELEMENT_BLOCK_QUOTE:"block quote",ELEMENT_BULLETED_LIST:"bulleted list",ELEMENT_CODE_BLOCK:["code block","%0 code blocks"],ELEMENT_HEADING:["heading (level %1)","%0 headings (level %1)"],ELEMENT_HEADING_CUSTOM:["heading (%1)","%0 headings (%1)"],ELEMENT_HORIZONTAL_LINE:["horizontal line","%0 horizontal lines"],ELEMENT_IMAGE:["image","%0 images"],ELEMENT_LINE_BREAK:["line break","%0 line breaks"],ELEMENT_LIST_ITEM:["list item","%0 list items"],ELEMENT_MEDIA:["media item","%0 media items"],ELEMENT_NUMBERED_LIST:"numbered list",ELEMENT_PAGE_BREAK:["page break","%0 page breaks"],ELEMENT_PARAGRAPH:["paragraph","%0 paragraphs"],ELEMENT_SPACE:["space","%0 spaces"],ELEMENT_TABLE:["table","%0 tables"],ELEMENT_TABLE_COLUMN:["table column","%0 table columns"],ELEMENT_TABLE_COLUMN_WITH_TEXT:["table column *with text* %1","%0 table columns *with text* %1"],ELEMENT_TABLE_ROW:["table row","%0 table rows"],ELEMENT_TABLE_ROW_WITH_TEXT:["table row *with text* %1","%0 table rows *with text* %1"],ELEMENT_TABLE_WITH_TEXT:"table *with text* %0",ELEMENT_TITLE:"title",ELEMENT_TODO_LIST:"to-do list","Enter image caption":"Enter image caption","Font Family":"Font Family","Font Size":"Font Size",FORMAT_ALIGN_TO_CENTER:"align to center",FORMAT_ALIGN_TO_LEFT:"align to left",FORMAT_ALIGN_TO_RIGHT:"align to right",FORMAT_BOLD:"bold",FORMAT_CODE:"code",FORMAT_CUSTOM_HIGHLIGHT:"%0 highlight",FORMAT_FULL_WIDTH_IMAGE:"full width image",FORMAT_HEADER_COLUMN:"header column",FORMAT_HEADER_ROW:"header row",FORMAT_HIGHLIGHT:"highlight",FORMAT_ITALIC:"italic",FORMAT_JUSTIFY_TEXT:"justify",FORMAT_REGULAR_COLUMN:"regular column",FORMAT_REGULAR_ROW:"regular row",FORMAT_RESTRICTED_DISABLED:"*Disable in restricted editing mode*",FORMAT_RESTRICTED_ENABLED:"*Enable in restricted editing mode*",FORMAT_SIDE_IMAGE:"side image",FORMAT_STRIKETHROUGH:"strikethrough",FORMAT_SUBSCRIPT:"subscript",FORMAT_SUPERSCRIPT:"superscript",FORMAT_UNDERLINE:"underline","Full size image":"Full size image",Green:"Green","Green marker":"Green marker","Green pen":"Green pen",Grey:"Grey","Header column":"Header column","Header row":"Header row",Heading:"Heading","Heading 1":"Heading 1","Heading 2":"Heading 2","Heading 3":"Heading 3","Heading 4":"Heading 4","Heading 5":"Heading 5","Heading 6":"Heading 6",Highlight:"Highlight",Huge:"Huge","Image resize list":"Image resize list","Image toolbar":"Image toolbar","image widget":"image widget","Insert column left":"Insert column left","Insert column right":"Insert column right","Insert image":"Insert image","Insert image or file":"Insert image or file","Insert media":"Insert media","Insert paragraph after block":"Insert paragraph after block","Insert paragraph before block":"Insert paragraph before block","Insert row above":"Insert row above","Insert row below":"Insert row below","Insert table":"Insert table","Inserting image failed":"Inserting image failed",Italic:"Italic",Justify:"Justify","Left aligned image":"Left aligned image","Light blue":"Light blue","Light green":"Light green","Light grey":"Light grey",Link:"Link","Link URL":"Link URL","Media URL":"Media URL","media widget":"media widget","Merge cell down":"Merge cell down","Merge cell left":"Merge cell left","Merge cell right":"Merge cell right","Merge cell up":"Merge cell up","Merge cells":"Merge cells",Next:"Next",No:"No",NUMBER_OF_COMMENTS:["%0 Comment","%0 Comments"],"Numbered List":"Numbered List","Open in a new tab":"Open in a new tab","Open link in new tab":"Open link in new tab",Orange:"Orange",Original:"Original",Paragraph:"Paragraph","Paste the media URL in the input.":"Paste the media URL in the input.",PENDING_ACTION_COMMENT_THREAD:"Unsaved change in comment thread.",PENDING_ACTION_SENDING_DATA:"Sending data to the server.",PENDING_ACTION_SUGGESTION:"Unsaved change in suggestion.","Pink marker":"Pink marker",Previous:"Previous",Purple:"Purple",Red:"Red","Red pen":"Red pen",Redo:"Redo",Remove:"Remove","Remove Format":"Remove Format","Remove highlight":"Remove highlight",REPLACE_TEXT:"*Replace:* %0 *with* %1","Reply...":"Reply...","Resize image":"Resize image","Resize image to %0":"Resize image to %0","Resize image to the original size":"Resize image to the original size","Rich Text Editor":"Rich Text Editor","Rich Text Editor, %0":"Rich Text Editor, %0","Right aligned image":"Right aligned image",Row:"Row",Save:"Save","Select all":"Select all","Select column":"Select column","Select row":"Select row","Selecting resized image failed":"Selecting resized image failed","Show more items":"Show more items","Side image":"Side image",Small:"Small","Split cell horizontally":"Split cell horizontally","Split cell vertically":"Split cell vertically",Strikethrough:"Strikethrough",Submit:"Submit","Table toolbar":"Table toolbar","Text alignment":"Text alignment","Text alignment toolbar":"Text alignment toolbar","Text alternative":"Text alternative","Text highlight toolbar":"Text highlight toolbar","The URL must not be empty.":"The URL must not be empty.","This link has no URL":"This link has no URL","This media URL is not supported.":"This media URL is not supported.",Tiny:"Tiny","Tip: Paste the URL into the content to embed faster.":"Tip: Paste the URL into the content to embed faster.",TOO_LONG_COMMENT_ALERT:"Comment content is too long. Your comment has %0 characters but the limit is %1 characters.","Track changes":"Track changes",Turquoise:"Turquoise",Underline:"Underline",Undo:"Undo",Unlink:"Unlink","Upload failed":"Upload failed","Upload in progress":"Upload in progress",White:"White","Widget toolbar":"Widget toolbar","Write a comment...":"Write a comment...",Yellow:"Yellow","Yellow marker":"Yellow marker",Yes:"Yes"})}(window.CKEDITOR_TRANSLATIONS||(window.CKEDITOR_TRANSLATIONS={})),window,e=function e(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,(function(t){return e[t]}).bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=419)}([function(e,t,n){"use strict";n.r(t),n.d(t,"DOCUMENTATION_URL",(function(){return r})),n.d(t,"default",(function(){return i})),n.d(t,"logWarning",(function(){return o})),n.d(t,"logError",(function(){return a}));var r="https://ckeditor.com/docs/ckeditor5/latest/framework/guides/support/error-codes.html",i=function(e){_inherits(n,_wrapNativeSuper(Error));var t=_createSuper(n);function n(e,r,i){var o;return _classCallCheck(this,n),(o=t.call(this,"".concat(e).concat(i?" "+JSON.stringify(i):"").concat(s(e)))).name="CKEditorError",o.context=r,o.data=i,o}return _createClass(n,[{key:"is",value:function(e){return"CKEditorError"===e}}],[{key:"rethrowUnexpectedError",value:function(e,t){if(e.is&&e.is("CKEditorError"))throw e;var r=new n(e.message,t);throw r.stack=e.stack,r}}]),n}();function o(e,t){var n;(n=console).warn.apply(n,_toConsumableArray(c(e,t)))}function a(e,t){var n;(n=console).error.apply(n,_toConsumableArray(c(e,t)))}function s(e){return"\nRead more: ".concat(r,"#error-").concat(e)}function c(e,t){var n=s(e);return t?[e,t,n]:[e,n]}},function(e,t,n){"use strict";function r(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];n.forEach((function(t){Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t)).forEach((function(n){if(!(n in e.prototype)){var r=Object.getOwnPropertyDescriptor(t,n);r.enumerable=!1,Object.defineProperty(e.prototype,n,r)}}))}))}n.r(t),n.d(t,"default",(function(){return r}))},function(e,t,n){"use strict";var r=function(){var e;return function(){return void 0===e&&(e=Boolean(window&&document&&document.all&&!window.atob)),e}}(),i=function(){var e={};return function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}e[t]=n}return e[t]}}(),o=[];function a(e){for(var t=-1,n=0;n<o.length;n++)if(o[n].identifier===e){t=n;break}return t}function s(e,t){for(var n={},r=[],i=0;i<e.length;i++){var s=e[i],c=t.base?s[0]+t.base:s[0],l=n[c]||0,u="".concat(c," ").concat(l);n[c]=l+1;var d=a(u),f={css:s[1],media:s[2],sourceMap:s[3]};-1!==d?(o[d].references++,o[d].updater(f)):o.push({identifier:u,updater:h(f,t),references:1}),r.push(u)}return r}function c(e){var t=document.createElement("style"),r=e.attributes||{};if(void 0===r.nonce){var o=n.nc;o&&(r.nonce=o)}if(Object.keys(r).forEach((function(e){t.setAttribute(e,r[e])})),"function"==typeof e.insert)e.insert(t);else{var a=i(e.insert||"head");if(!a)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");a.appendChild(t)}return t}var l=function(){var e=[];return function(t,n){return e[t]=n,e.filter(Boolean).join("\n")}}();function u(e,t,n,r){var i=n?"":r.media?"@media ".concat(r.media," {").concat(r.css,"}"):r.css;if(e.styleSheet)e.styleSheet.cssText=l(t,i);else{var o=document.createTextNode(i),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(o,a[t]):e.appendChild(o)}}var d=null,f=0;function h(e,t){var n,r,i;if(t.singleton){var o=f++;n=d||(d=c(t)),r=u.bind(null,n,o,!1),i=u.bind(null,n,o,!0)}else n=c(t),r=(function(e,t,n){var r=n.css,i=n.media,o=n.sourceMap;if(i?e.setAttribute("media",i):e.removeAttribute("media"),o&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),e.styleSheet)e.styleSheet.cssText=r;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}).bind(null,n,t),i=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)};return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else i()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=r());var n=s(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var r=0;r<n.length;r++){var i=a(n[r]);o[i].references--}for(var c=s(e,t),l=0;l<n.length;l++){var u=a(n[l]);0===o[u].references&&(o[u].updater(),o.splice(u,1))}n=c}}}},function(e,t,n){"use strict";n.r(t),n.d(t,"_getEmitterListenedTo",(function(){return u})),n.d(t,"_setEmitterId",(function(){return d})),n.d(t,"_getEmitterId",(function(){return f}));var r=n(19),i=n(11),o=n(27),a=(n(34),n(0)),s=Symbol("listeningTo"),c=Symbol("emitterId"),l={on:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.listenTo(this,e,t,n)},once:function(e,t,n){var r=!1;this.listenTo(this,e,(function(e){for(var n=arguments.length,i=new Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];r||(r=!0,e.off(),t.call.apply(t,[this,e].concat(i)))}),n)},off:function(e,t){this.stopListening(this,e,t)},listenTo:function(e,t,n){var r,i,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};this[s]||(this[s]={});var a=this[s];f(e)||d(e);var c=f(e);(r=a[c])||(r=a[c]={emitter:e,callbacks:{}}),(i=r.callbacks[t])||(i=r.callbacks[t]=[]),i.push(n),function(e,t,n,r,i){t._addEventListener?t._addEventListener(n,r,i):e._addEventListener.call(t,n,r,i)}(this,e,t,n,o)},stopListening:function(e,t,n){var r=this[s],i=e&&f(e),o=r&&i&&r[i],a=o&&t&&o.callbacks[t];if(!(!r||e&&!o||t&&!a))if(n)g(this,e,t,n),-1!==a.indexOf(n)&&(1===a.length?delete o.callbacks[t]:g(this,e,t,n));else if(a){for(;n=a.pop();)g(this,e,t,n);delete o.callbacks[t]}else if(o){for(t in o.callbacks)this.stopListening(e,t);delete r[i]}else{for(i in r)this.stopListening(r[i].emitter);delete this[s]}},fire:function(e){try{for(var t=e instanceof r.a?e:new r.a(this,e),n=t.name,i=function e(t,n){var r;return t._events&&(r=t._events[n])&&r.callbacks.length?r.callbacks:n.indexOf(":")>-1?e(t,n.substr(0,n.lastIndexOf(":"))):null}(this,n),o=arguments.length,s=new Array(o>1?o-1:0),c=1;c<o;c++)s[c-1]=arguments[c];if(t.path.push(this),i){var l=[t].concat(s);i=Array.from(i);for(var u=0;u<i.length&&(i[u].callback.apply(this,l),t.off.called&&(delete t.off.called,this._removeEventListener(n,i[u].callback)),!t.stop.called);u++);}if(this._delegations){var d=this._delegations.get(n),f=this._delegations.get("*");d&&v(d,t,s),f&&v(f,t,s)}return t.return}catch(e){a.default.rethrowUnexpectedError(e,this)}},delegate:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return{to:function(t,r){e._delegations||(e._delegations=new Map),n.forEach((function(n){var i=e._delegations.get(n);i?i.set(t,r):e._delegations.set(n,new Map([[t,r]]))}))}}},stopDelegating:function(e,t){if(this._delegations)if(e)if(t){var n=this._delegations.get(e);n&&n.delete(t)}else this._delegations.delete(e);else this._delegations.clear()},_addEventListener:function(e,t,n){!function(e,t){var n=h(e);if(!n[t]){for(var r=t,i=null,o=[];""!==r&&!n[r];)n[r]={callbacks:[],childEvents:[]},o.push(n[r]),i&&n[r].childEvents.push(i),i=r,r=r.substr(0,r.lastIndexOf(":"));if(""!==r){var a,s=_createForOfIteratorHelper(o);try{for(s.s();!(a=s.n()).done;){a.value.callbacks=n[r].callbacks.slice()}}catch(c){s.e(c)}finally{s.f()}n[r].childEvents.push(i)}}}(this,e);var r,i=p(this,e),a=o.default.get(n.priority),s={callback:t,priority:a},c=_createForOfIteratorHelper(i);try{for(c.s();!(r=c.n()).done;){for(var l=r.value,u=!1,d=0;d<l.length;d++)if(l[d].priority<a){l.splice(d,0,s),u=!0;break}u||l.push(s)}}catch(f){c.e(f)}finally{c.f()}},_removeEventListener:function(e,t){var n,r=_createForOfIteratorHelper(p(this,e));try{for(r.s();!(n=r.n()).done;)for(var i=n.value,o=0;o<i.length;o++)i[o].callback==t&&(i.splice(o,1),o--)}catch(a){r.e(a)}finally{r.f()}}};function u(e,t){return e[s]&&e[s][t]?e[s][t].emitter:null}function d(e,t){e[c]||(e[c]=t||Object(i.a)())}function f(e){return e[c]}function h(e){return e._events||Object.defineProperty(e,"_events",{value:{}}),e._events}function p(e,t){var n=h(e)[t];if(!n)return[];for(var r=[n.callbacks],i=0;i<n.childEvents.length;i++){var o=p(e,n.childEvents[i]);r=r.concat(o)}return r}function v(e,t,n){var i,o=_createForOfIteratorHelper(e);try{for(o.s();!(i=o.n()).done;){var a=_slicedToArray(i.value,2),s=a[0],c=a[1];c?"function"==typeof c&&(c=c(t.name)):c=t.name;var l=new r.a(t.source,c);l.path=_toConsumableArray(t.path),s.fire.apply(s,[l].concat(_toConsumableArray(n)))}}catch(u){o.e(u)}finally{o.f()}}function g(e,t,n,r){t._removeEventListener?t._removeEventListener(n,r):e._removeEventListener.call(t,n,r)}t.default=l},function(e,t,n){"use strict";n.r(t);var r=n(3),i=n(0),o=n(7),a=n(420),s=Symbol("observableProperties"),c=Symbol("boundObservables"),l=Symbol("boundProperties"),u=Symbol("decoratedMethods"),d=Symbol("decoratedOriginal"),f={set:function(e,t){var n=this;if(Object(o.a)(e))Object.keys(e).forEach((function(t){n.set(t,e[t])}),this);else{h(this);var r=this[s];if(e in this&&!r.has(e))throw new i.default("observable-set-cannot-override",this);Object.defineProperty(this,e,{enumerable:!0,configurable:!0,get:function(){return r.get(e)},set:function(t){var n=r.get(e),i=this.fire("set:"+e,e,t,n);void 0===i&&(i=t),n===i&&r.has(e)||(r.set(e,i),this.fire("change:"+e,e,i,n))}}),this[e]=t}},bind:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(!n.length||!g(n))throw new i.default("observable-bind-wrong-properties",this);if(new Set(n).size!==n.length)throw new i.default("observable-bind-duplicate-properties",this);h(this);var o=this[l];n.forEach((function(t){if(o.has(t))throw new i.default("observable-bind-rebind",e)}));var a=new Map;return n.forEach((function(e){var t={property:e,to:[]};o.set(e,t),a.set(e,t)})),{to:p,toMany:v,_observable:this,_bindProperties:n,_to:[],_bindings:a}},unbind:function(){var e=this;if(this[s]){for(var t=this[l],n=this[c],r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];if(o.length){if(!g(o))throw new i.default("observable-unbind-wrong-properties",this);o.forEach((function(r){var i,o,a,s,c=t.get(r);c&&(c.to.forEach((function(t){i=t[0],o=t[1],a=n.get(i),(s=a[o]).delete(c),s.size||delete a[o],Object.keys(a).length||(n.delete(i),e.stopListening(i,"change"))})),t.delete(r))}))}else n.forEach((function(t,n){e.stopListening(n,"change")})),n.clear(),t.clear()}},decorate:function(e){var t=this,n=this[e];if(!n)throw new i.default("observablemixin-cannot-decorate-undefined",this,{object:this,methodName:e});this.on(e,(function(e,r){e.return=n.apply(t,r)})),this[e]=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return this.fire(e,n)},this[e][d]=n,this[u]||(this[u]=[]),this[u].push(e)}};function h(e){e[s]||(Object.defineProperty(e,s,{value:new Map}),Object.defineProperty(e,c,{value:new Map}),Object.defineProperty(e,l,{value:new Map}))}function p(){var e=this,t=(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(!t.length)throw new i.default("observable-bind-to-parse-error",null);var r,o={to:[]};return"function"==typeof t[t.length-1]&&(o.callback=t.pop()),t.forEach((function(e){if("string"==typeof e)r.properties.push(e);else{if("object"!=typeof e)throw new i.default("observable-bind-to-parse-error",null);r={observable:e,properties:[]},o.to.push(r)}})),o}).apply(void 0,arguments),n=Array.from(this._bindings.keys()),r=n.length;if(!t.callback&&t.to.length>1)throw new i.default("observable-bind-to-no-callback",this);if(r>1&&t.callback)throw new i.default("observable-bind-to-extra-callback",this);t.to.forEach((function(t){if(t.properties.length&&t.properties.length!==r)throw new i.default("observable-bind-to-properties-length",e);t.properties.length||(t.properties=e._bindProperties)})),this._to=t.to,t.callback&&(this._bindings.get(n[0]).callback=t.callback),function(e,t){t.forEach((function(t){var n,r=e[c];r.get(t.observable)||e.listenTo(t.observable,"change",(function(i,o){(n=r.get(t.observable)[o])&&n.forEach((function(t){m(e,t.property)}))}))}))}(this._observable,this._to),function(e){var t;e._bindings.forEach((function(n,r){e._to.forEach((function(i){t=i.properties[n.callback?0:e._bindProperties.indexOf(r)],n.to.push([i.observable,t]),function(e,t,n,r){var i=e[c],o=i.get(n),a=o||{};a[r]||(a[r]=new Set),a[r].add(t),o||i.set(n,a)}(e._observable,n,i.observable,t)}))}))}(this),this._bindProperties.forEach((function(t){m(e._observable,t)}))}function v(e,t,n){if(this._bindings.size>1)throw new i.default("observable-bind-to-many-not-one-binding",this);this.to.apply(this,_toConsumableArray(function(e,t){var n=e.map((function(e){return[e,t]}));return Array.prototype.concat.apply([],n)}(e,t)).concat([n]))}function g(e){return e.every((function(e){return"string"==typeof e}))}function m(e,t){var n,r=e[l].get(t);n=r.callback?r.callback.apply(e,r.to.map((function(e){return e[0][e[1]]}))):(n=r.to[0])[0][n[1]],Object.prototype.hasOwnProperty.call(e,t)?e[t]=n:e.set(t,n)}Object(a.a)(f,r.default),f.stopListening=function(e,t,n){if(!e&&this[u]){var i,o=_createForOfIteratorHelper(this[u]);try{for(o.s();!(i=o.n()).done;){var a=i.value;this[a]=this[a][d]}}catch(s){o.e(s)}finally{o.f()}delete this[u]}r.default.stopListening.call(this,e,t,n)},t.default=f},,function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.call(this)}return _createClass(n,null,[{key:"fromJSON",value:function(e){throw new TypeError("Must be implemented in a child class!")}}]),n}(r(n(31)).default);t.default=i,i.TYPE="1000"},function(e,t,n){"use strict";t.a=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},function(e,t,n){"use strict";t.a=function(e){return null!=e&&"object"==typeof e}},function(e,t,n){"use strict";function r(e){return!(!e||!e[Symbol.iterator])}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";var r=n(59),i="object"==typeof self&&self&&self.Object===Object&&self,o=r.a||i||Function("return this")();t.a=o},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=new Array(256).fill().map((function(e,t){return("0"+t.toString(16)).slice(-2)}));function i(){var e=4294967296*Math.random()>>>0,t=4294967296*Math.random()>>>0,n=4294967296*Math.random()>>>0,i=4294967296*Math.random()>>>0;return"e"+r[e>>0&255]+r[e>>8&255]+r[e>>16&255]+r[e>>24&255]+r[t>>0&255]+r[t>>8&255]+r[t>>16&255]+r[t>>24&255]+r[n>>0&255]+r[n>>8&255]+r[n>>16&255]+r[n>>24&255]+r[i>>0&255]+r[i>>8&255]+r[i>>16&255]+r[i>>24&255]}},function(e,t,n){"use strict";t.a=Array.isArray},function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return c}));var r=n(3),i=n(0),o=n(11),a=n(9),s=n(1),c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_classCallCheck(this,e);var r=Object(a.a)(t);if(r||(n=t),this._items=[],this._itemMap=new Map,this._idProperty=n.idProperty||"id",this._bindToExternalToInternalMap=new WeakMap,this._bindToInternalToExternalMap=new WeakMap,this._skippedIndexesFromExternal=[],r){var i,o=_createForOfIteratorHelper(t);try{for(o.s();!(i=o.n()).done;){var s=i.value;this._items.push(s),this._itemMap.set(this._getItemIdBeforeAdding(s),s)}}catch(c){o.e(c)}finally{o.f()}}}return _createClass(e,[{key:"length",get:function(){return this._items.length}},{key:"first",get:function(){return this._items[0]||null}},{key:"last",get:function(){return this._items[this.length-1]||null}},{key:"add",value:function(e,t){return this.addMany([e],t)}},{key:"addMany",value:function(e,t){if(void 0===t)t=this._items.length;else if(t>this._items.length||t<0)throw new i.default("collection-add-item-invalid-index",this);for(var n=0;n<e.length;n++){var r=e[n],o=this._getItemIdBeforeAdding(r),a=t+n;this._items.splice(a,0,r),this._itemMap.set(o,r),this.fire("add",r,a)}return this.fire("change",{added:e,removed:[],index:t}),this}},{key:"get",value:function(e){var t;if("string"==typeof e)t=this._itemMap.get(e);else{if("number"!=typeof e)throw new i.default("collection-get-invalid-arg",this);t=this._items[e]}return t||null}},{key:"has",value:function(e){return this._itemMap.has("string"==typeof e?e:e[this._idProperty])}},{key:"getIndex",value:function(e){var t;return t="string"==typeof e?this._itemMap.get(e):e,this._items.indexOf(t)}},{key:"remove",value:function(e){var t=_slicedToArray(this._remove(e),2),n=t[0],r=t[1];return this.fire("change",{added:[],removed:[n],index:r}),n}},{key:"map",value:function(e,t){return this._items.map(e,t)}},{key:"find",value:function(e,t){return this._items.find(e,t)}},{key:"filter",value:function(e,t){return this._items.filter(e,t)}},{key:"clear",value:function(){this._bindToCollection&&(this.stopListening(this._bindToCollection),this._bindToCollection=null);for(var e=Array.from(this._items);this.length;)this._remove(0);this.fire("change",{added:[],removed:e,index:0})}},{key:"bindTo",value:function(e){var t=this;if(this._bindToCollection)throw new i.default("collection-bind-to-rebind",this);return this._bindToCollection=e,{as:function(e){t._setUpBindToBinding((function(t){return new e(t)}))},using:function(e){t._setUpBindToBinding("function"==typeof e?function(t){return e(t)}:function(t){return t[e]})}}}},{key:"_setUpBindToBinding",value:function(e){var t,n=this,r=this._bindToCollection,i=function(t,i,o){var a=r._bindToCollection==n,s=r._bindToInternalToExternalMap.get(i);if(a&&s)n._bindToExternalToInternalMap.set(i,s),n._bindToInternalToExternalMap.set(s,i);else{var c=e(i);if(!c)return void n._skippedIndexesFromExternal.push(o);var l,u=o,d=_createForOfIteratorHelper(n._skippedIndexesFromExternal);try{for(d.s();!(l=d.n()).done;){o>l.value&&u--}}catch(v){d.e(v)}finally{d.f()}var f,h=_createForOfIteratorHelper(r._skippedIndexesFromExternal);try{for(h.s();!(f=h.n()).done;){u>=f.value&&u++}}catch(v){h.e(v)}finally{h.f()}n._bindToExternalToInternalMap.set(i,c),n._bindToInternalToExternalMap.set(c,i),n.add(c,u);for(var p=0;p<r._skippedIndexesFromExternal.length;p++)u<=r._skippedIndexesFromExternal[p]&&r._skippedIndexesFromExternal[p]++}},o=_createForOfIteratorHelper(r);try{for(o.s();!(t=o.n()).done;){var a=t.value;i(0,a,r.getIndex(a))}}catch(s){o.e(s)}finally{o.f()}this.listenTo(r,"add",i),this.listenTo(r,"remove",(function(e,t,r){var i=n._bindToExternalToInternalMap.get(t);i&&n.remove(i),n._skippedIndexesFromExternal=n._skippedIndexesFromExternal.reduce((function(e,t){return r<t&&e.push(t-1),r>t&&e.push(t),e}),[])}))}},{key:"_getItemIdBeforeAdding",value:function(e){var t,n=this._idProperty;if(n in e){if("string"!=typeof(t=e[n]))throw new i.default("collection-add-invalid-id",this);if(this.get(t))throw new i.default("collection-add-item-already-exists",this)}else e[n]=t=Object(o.a)();return t}},{key:"_remove",value:function(e){var t,n,r,o=!1,a=this._idProperty;if("string"==typeof e?(n=e,o=!(r=this._itemMap.get(n)),r&&(t=this._items.indexOf(r))):"number"==typeof e?(t=e,o=!(r=this._items[t]),r&&(n=r[a])):(n=(r=e)[a],o=-1==(t=this._items.indexOf(r))||!this._itemMap.get(n)),o)throw new i.default("collection-remove-404",this);this._items.splice(t,1),this._itemMap.delete(n);var s=this._bindToInternalToExternalMap.get(r);return this._bindToInternalToExternalMap.delete(r),this._bindToExternalToInternalMap.delete(s),this.fire("remove",r,t),[r,t]}},{key:Symbol.iterator,value:function(){return this._items[Symbol.iterator]()}}]),e}();Object(s.default)(c,r.default)},function(e,t,n){"use strict";var r,i,o=e.exports=n(25),a=n(99);o.codegen=n(317),o.fetch=n(318),o.path=n(319),o.fs=o.inquire("fs"),o.toArray=function(e){if(e){for(var t=Object.keys(e),n=new Array(t.length),r=0;r<t.length;)n[r]=e[t[r++]];return n}return[]},o.toObject=function(e){for(var t={},n=0;n<e.length;){var r=e[n++],i=e[n++];void 0!==i&&(t[r]=i)}return t};var s=/\\/g,c=/"/g;o.isReserved=function(e){return/^(?:do|if|in|for|let|new|try|var|case|else|enum|eval|false|null|this|true|void|with|break|catch|class|const|super|throw|while|yield|delete|export|import|public|return|static|switch|typeof|default|extends|finally|package|private|continue|debugger|function|arguments|interface|protected|implements|instanceof)$/.test(e)},o.safeProp=function(e){return!/^[$\w_]+$/.test(e)||o.isReserved(e)?'["'+e.replace(s,"\\\\").replace(c,'\\"')+'"]':"."+e},o.ucFirst=function(e){return e.charAt(0).toUpperCase()+e.substring(1)};var l=/_([a-z])/g;o.camelCase=function(e){return e.substring(0,1)+e.substring(1).replace(l,(function(e,t){return t.toUpperCase()}))},o.compareFieldsById=function(e,t){return e.id-t.id},o.decorateType=function(e,t){if(e.$type)return t&&e.$type.name!==t&&(o.decorateRoot.remove(e.$type),e.$type.name=t,o.decorateRoot.add(e.$type)),e.$type;r||(r=n(101));var i=new r(t||e.name);return o.decorateRoot.add(i),i.ctor=e,Object.defineProperty(e,"$type",{value:i,enumerable:!1}),Object.defineProperty(e.prototype,"$type",{value:i,enumerable:!1}),i};var u=0;o.decorateEnum=function(e){if(e.$type)return e.$type;i||(i=n(26));var t=new i("Enum"+u++,e);return o.decorateRoot.add(t),Object.defineProperty(e,"$type",{value:t,enumerable:!1}),t},o.setProperty=function(e,t,n){if("object"!=typeof e)throw TypeError("dst must be an object");if(!t)throw TypeError("path must be specified");return function e(t,n,r){var i=n.shift();if(n.length>0)t[i]=e(t[i]||{},n,r);else{var o=t[i];o&&(r=[].concat(o).concat(r)),t[i]=r}return t}(e,t=t.split("."),n)},Object.defineProperty(o,"decorateRoot",{get:function(){return a.decorated||(a.decorated=new(n(109)))}})},function(e,t,n){"use strict";var r=n(16),i=Object.prototype,o=i.hasOwnProperty,a=i.toString,s=r.a?r.a.toStringTag:void 0,c=Object.prototype.toString,l=r.a?r.a.toStringTag:void 0;t.a=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":l&&l in Object(e)?function(e){var t=o.call(e,s),n=e[s];try{e[s]=void 0;var r=!0}catch(e){}var i=a.call(e);return r&&(t?e[s]=n:delete e[s]),i}(e):function(e){return c.call(e)}(e)}},function(e,t,n){"use strict";var r=n(10).a.Symbol;t.a=r},function(e,t,n){"use strict";var r=n(41),i=n(10).a["__core-js_shared__"],o=function(){var e=/[^.]+$/.exec(i&&i.keys&&i.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),a=n(7),s=n(30),c=/^\[object .+?Constructor\]$/,l=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.a=function(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return function(e){return!(!Object(a.a)(e)||function(e){return!!o&&o in e}(e))&&(Object(r.a)(e)?l:c).test(Object(s.a)(e))}(n)?n:void 0}},function(e,t,n){"use strict";(function(e,n){Object.defineProperty(t,"__esModule",{value:!0});var r,i=!(void 0===e||!e.versions||!e.versions.node);!function(e){e[e.BUFFER=1]="BUFFER",e[e.STRING=2]="STRING",e[e.NUMBER=3]="NUMBER",e[e.OBJECT=4]="OBJECT"}(r=t.MessageDataTypes||(t.MessageDataTypes={}));var o=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"getPacketType",value:function(){for(var e=0,t=0;t<arguments.length;t++)e+=(t<0||arguments.length<=t?void 0:arguments[t])*Math.pow(10,arguments.length-t-1);return e}},{key:"getType",value:function(t){if(e.isBuffer(t))return r.BUFFER;var n=typeof t;return"string"===n?r.STRING:"number"===n?r.NUMBER:r.OBJECT}},{key:"isBuffer",value:function(e){return i&&n.isBuffer(e)||e instanceof ArrayBuffer||e instanceof Uint8Array||this._isBufferView(e)}},{key:"_isBufferView",value:function(e){return"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer}}]),e}();t.default=o}).call(this,n(66),n(51).Buffer)},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function e(t,n){_classCallCheck(this,e),this.source=t,this.name=n,this.path=[],this.stop=function e(){e.called=!0},this.off=function e(){e.called=!0}}},function(e,t,n){"use strict";var r=n(44),i=n(43);t.a=function(e,t,n,o){var a=!n;n||(n={});for(var s=-1,c=t.length;++s<c;){var l=t[s],u=o?o(n[l],e[l],l,n,e):void 0;void 0===u&&(u=e[l]),a?Object(i.a)(n,l,u):Object(r.a)(n,l,u)}return n}},function(e,t,n){"use strict";var r=n(64),i=n(7),o=n(46),a=Object.prototype.hasOwnProperty,s=n(33);t.a=function(e){return Object(s.a)(e)?Object(r.a)(e,!0):function(e){if(!Object(i.a)(e))return function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}(e);var t=Object(o.a)(e),n=[];for(var r in e)("constructor"!=r||!t&&a.call(e,r))&&n.push(r);return n}(e)}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,null,[{key:"create",value:function(e,t){throw new TypeError("Must be implemented in a child class!")}}]),n}(r(n(6)).default);t.default=i,e.exports=i},function(e,t,n){"use strict";t.a=function(e,t){return e===t||e!=e&&t!=t}},function(e,t,n){(function(r){function i(){var e;try{e=t.storage.debug}catch(e){}return!e&&void 0!==r&&"env"in r&&(e=r.env.DEBUG),e}(t=e.exports=n(280)).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.formatArgs=function(e){var n=this.useColors;if(e[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+e[0]+(n?"%c ":" ")+"+"+t.humanize(this.diff),n){var r="color: "+this.color;e.splice(1,0,r,"color: inherit");var i=0,o=0;e[0].replace(/%[a-zA-Z%]/g,(function(e){"%%"!==e&&"%c"===e&&(o=++i)})),e.splice(o,0,r)}},t.save=function(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(e){}},t.load=i,t.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},t.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},t.enable(i())}).call(this,n(66))},function(e,t,n){"use strict";(function(e){var r=t;function i(e,t,n){for(var r=Object.keys(t),i=0;i<r.length;++i)void 0!==e[r[i]]&&n||(e[r[i]]=t[r[i]]);return e}function o(e){function t(e,n){if(!(this instanceof t))return new t(e,n);Object.defineProperty(this,"message",{get:function(){return e}}),Error.captureStackTrace?Error.captureStackTrace(this,t):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),n&&i(this,n)}return(t.prototype=Object.create(Error.prototype)).constructor=t,Object.defineProperty(t.prototype,"name",{get:function(){return e}}),t.prototype.toString=function(){return this.name+": "+this.message},t}r.asPromise=n(96),r.base64=n(308),r.EventEmitter=n(309),r.float=n(310),r.inquire=n(97),r.utf8=n(311),r.pool=n(312),r.LongBits=n(313),r.isNode=Boolean(void 0!==e&&e&&e.process&&e.process.versions&&e.process.versions.node),r.global=r.isNode&&e||"undefined"!=typeof window&&window||"undefined"!=typeof self&&self||this,r.emptyArray=Object.freeze?Object.freeze([]):[],r.emptyObject=Object.freeze?Object.freeze({}):{},r.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},r.isString=function(e){return"string"==typeof e||e instanceof String},r.isObject=function(e){return e&&"object"==typeof e},r.isset=r.isSet=function(e,t){var n=e[t];return!(null==n||!e.hasOwnProperty(t))&&("object"!=typeof n||(Array.isArray(n)?n.length:Object.keys(n).length)>0)},r.Buffer=function(){try{var e=r.inquire("buffer").Buffer;return e.prototype.utf8Write?e:null}catch(e){return null}}(),r._Buffer_from=null,r._Buffer_allocUnsafe=null,r.newBuffer=function(e){return"number"==typeof e?r.Buffer?r._Buffer_allocUnsafe(e):new r.Array(e):r.Buffer?r._Buffer_from(e):"undefined"==typeof Uint8Array?e:new Uint8Array(e)},r.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,r.Long=r.global.dcodeIO&&r.global.dcodeIO.Long||r.global.Long||r.inquire("long"),r.key2Re=/^true|false|0|1$/,r.key32Re=/^-?(?:0|[1-9][0-9]*)$/,r.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,r.longToHash=function(e){return e?r.LongBits.from(e).toHash():r.LongBits.zeroHash},r.longFromHash=function(e,t){var n=r.LongBits.fromHash(e);return r.Long?r.Long.fromBits(n.lo,n.hi,t):n.toNumber(Boolean(t))},r.merge=i,r.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)},r.newError=o,r.ProtocolError=o("ProtocolError"),r.oneOfGetter=function(e){for(var t={},n=0;n<e.length;++n)t[e[n]]=1;return function(){for(var e=Object.keys(this),n=e.length-1;n>-1;--n)if(1===t[e[n]]&&null!=this[e[n]])return e[n]}},r.oneOfSetter=function(e){return function(t){for(var n=0;n<e.length;++n)e[n]!==t&&delete this[e[n]]}},r.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},r._configure=function(){var e=r.Buffer;e?(r._Buffer_from=e.from!==Uint8Array.from&&e.from||function(t,n){return new e(t,n)},r._Buffer_allocUnsafe=e.allocUnsafe||function(t){return new e(t)}):r._Buffer_from=r._Buffer_allocUnsafe=null}}).call(this,n(49))},function(e,t,n){"use strict";e.exports=a;var r=n(37);((a.prototype=Object.create(r.prototype)).constructor=a).className="Enum";var i=n(52),o=n(14);function a(e,t,n,i,o){if(r.call(this,e,n),t&&"object"!=typeof t)throw TypeError("values must be an object");if(this.valuesById={},this.values=Object.create(this.valuesById),this.comment=i,this.comments=o||{},this.reserved=void 0,t)for(var a=Object.keys(t),s=0;s<a.length;++s)"number"==typeof t[a[s]]&&(this.valuesById[this.values[a[s]]=t[a[s]]]=a[s])}a.fromJSON=function(e,t){var n=new a(e,t.values,t.options,t.comment,t.comments);return n.reserved=t.reserved,n},a.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return o.toObject(["options",this.options,"values",this.values,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"comment",t?this.comment:void 0,"comments",t?this.comments:void 0])},a.prototype.add=function(e,t,n){if(!o.isString(e))throw TypeError("name must be a string");if(!o.isInteger(t))throw TypeError("id must be an integer");if(void 0!==this.values[e])throw Error("duplicate name '"+e+"' in "+this);if(this.isReservedId(t))throw Error("id "+t+" is reserved in "+this);if(this.isReservedName(e))throw Error("name '"+e+"' is reserved in "+this);if(void 0!==this.valuesById[t]){if(!this.options||!this.options.allow_alias)throw Error("duplicate id "+t+" in "+this);this.values[e]=t}else this.valuesById[this.values[e]=t]=e;return this.comments[e]=n||null,this},a.prototype.remove=function(e){if(!o.isString(e))throw TypeError("name must be a string");var t=this.values[e];if(null==t)throw Error("name '"+e+"' does not exist in "+this);return delete this.valuesById[t],delete this.values[e],delete this.comments[e],this},a.prototype.isReservedId=function(e){return i.isReservedId(this.reserved,e)},a.prototype.isReservedName=function(e){return i.isReservedName(this.reserved,e)}},function(e,t,n){"use strict";n.r(t),t.default={get:function(e){return"number"!=typeof e?this[e]||this.normal:e},highest:1e5,high:1e3,normal:0,low:-1e3,lowest:-1e5}},function(e,t,n){"use strict";(function(e){var r=n(10),i=n(115),o=exports&&!exports.nodeType&&exports,a=o&&"object"==typeof e&&e&&!e.nodeType&&e,s=a&&a.exports===o?r.a.Buffer:void 0;t.a=(s?s.isBuffer:void 0)||i.a}).call(this,n(65)(e))},function(e,t,n){"use strict";(function(e){var r=n(59),i=exports&&!exports.nodeType&&exports,o=i&&"object"==typeof e&&e&&!e.nodeType&&e,a=o&&o.exports===i&&r.a.process,s=function(){try{return o&&o.require&&o.require("util").types||a&&a.binding&&a.binding("util")}catch(e){}}();t.a=s}).call(this,n(65)(e))},function(e,t,n){"use strict";var r=Function.prototype.toString;t.a=function(e){if(null!=e){try{return r.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return function e(){_classCallCheck(this,e)}}()},function(e,t,n){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(n(81)),a=i(n(320)),s=i(n(321)),c=i(n(322)),l=i(n(323)),u=i(n(75)),d=i(n(76)),f=i(n(77)),h=o.Root.fromJSON({nested:[c.default,a.default,s.default,l.default,u.default,d.default,f.default].reduce((function(e,t){return e[t.DESCRIPTOR_NAME]=t.DESCRIPTOR,e}),{})});function p(e){return function(e){h.lookup(e.DESCRIPTOR_NAME)||h.addJSON(_defineProperty2({},e.DESCRIPTOR_NAME,e.DESCRIPTOR))}(e),h.lookupType(e.DESCRIPTOR_NAME)}t.default=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"decode",value:function(e,t){var n=p(t).decode("undefined"==typeof window?e:new Uint8Array(e));return t.fromJSON(Object.assign({},n))}},{key:"encode",value:function(e){var t=p(e.constructor),n=e.toJSON(),r=t.verify(n);if(r)throw Error(r);return t.encode(t.create(n)).finish()}}]),e}()},function(e,t,n){"use strict";var r=n(41),i=n(60);t.a=function(e){return null!=e&&Object(i.a)(e.length)&&!Object(r.a)(e)}},function(e,t,n){"use strict";(function(e){var r=n(0);t.a="27.1.0";var i="object"==typeof window?window:e;if(i.CKEDITOR_VERSION)throw new r.default("ckeditor-duplicated-modules",null);i.CKEDITOR_VERSION="27.1.0"}).call(this,n(49))},function(e,t,n){function r(e){if(e)return function(e){for(var t in r.prototype)e[t]=r.prototype[t];return e}(e)}e.exports=r,r.prototype.on=r.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},r.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,r=this._callbacks["$"+e];if(!r)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var i=0;i<r.length;i++)if((n=r[i])===t||n.fn===t){r.splice(i,1);break}return 0===r.length&&delete this._callbacks["$"+e],this},r.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),n=this._callbacks["$"+e],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(n){r=0;for(var i=(n=n.slice(0)).length;r<i;++r)n[r].apply(this,t)}return this},r.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},r.prototype.hasListeners=function(e){return!!this.listeners(e).length}},function(e,t,n){var r,i=n(290),o=n(90),a=n(291),s=n(292),c=n(293);"undefined"!=typeof ArrayBuffer&&(r=n(294));var l="undefined"!=typeof navigator&&/Android/i.test(navigator.userAgent),u="undefined"!=typeof navigator&&/PhantomJS/i.test(navigator.userAgent),d=l||u;t.protocol=3;var f=t.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},h=i(f),p={type:"error",data:"parser error"},v=n(295);function g(e,t,n){for(var r=new Array(e.length),i=s(e.length,n),o=function(e,n,i){t(n,(function(t,n){r[e]=n,i(t,r)}))},a=0;a<e.length;a++)o(a,e[a],i)}t.encodePacket=function(e,n,r,i){"function"==typeof n&&(i=n,n=!1),"function"==typeof r&&(i=r,r=null);var o=void 0===e.data?void 0:e.data.buffer||e.data;if("undefined"!=typeof ArrayBuffer&&o instanceof ArrayBuffer)return function(e,n,r){if(!n)return t.encodeBase64Packet(e,r);var i=e.data,o=new Uint8Array(i),a=new Uint8Array(1+i.byteLength);a[0]=f[e.type];for(var s=0;s<o.length;s++)a[s+1]=o[s];return r(a.buffer)}(e,n,i);if(void 0!==v&&o instanceof v)return function(e,n,r){if(!n)return t.encodeBase64Packet(e,r);if(d)return function(e,n,r){if(!n)return t.encodeBase64Packet(e,r);var i=new FileReader;return i.onload=function(){t.encodePacket({type:e.type,data:i.result},n,!0,r)},i.readAsArrayBuffer(e.data)}(e,n,r);var i=new Uint8Array(1);return i[0]=f[e.type],r(new v([i.buffer,e.data]))}(e,n,i);if(o&&o.base64)return function(e,n){return n("b"+t.packets[e.type]+e.data.data)}(e,i);var a=f[e.type];return void 0!==e.data&&(a+=r?c.encode(String(e.data),{strict:!1}):String(e.data)),i(""+a)},t.encodeBase64Packet=function(e,n){var r,i="b"+t.packets[e.type];if(void 0!==v&&e.data instanceof v){var o=new FileReader;return o.onload=function(){var e=o.result.split(",")[1];n(i+e)},o.readAsDataURL(e.data)}try{r=String.fromCharCode.apply(null,new Uint8Array(e.data))}catch(t){for(var a=new Uint8Array(e.data),s=new Array(a.length),c=0;c<a.length;c++)s[c]=a[c];r=String.fromCharCode.apply(null,s)}return i+=btoa(r),n(i)},t.decodePacket=function(e,n,r){if(void 0===e)return p;if("string"==typeof e){if("b"===e.charAt(0))return t.decodeBase64Packet(e.substr(1),n);if(r&&!1===(e=function(e){try{e=c.decode(e,{strict:!1})}catch(e){return!1}return e}(e)))return p;var i=e.charAt(0);return Number(i)==i&&h[i]?e.length>1?{type:h[i],data:e.substring(1)}:{type:h[i]}:p}i=new Uint8Array(e)[0];var o=a(e,1);return v&&"blob"===n&&(o=new v([o])),{type:h[i],data:o}},t.decodeBase64Packet=function(e,t){var n=h[e.charAt(0)];if(!r)return{type:n,data:{base64:!0,data:e.substr(1)}};var i=r.decode(e.substr(1));return"blob"===t&&v&&(i=new v([i])),{type:n,data:i}},t.encodePayload=function(e,n,r){"function"==typeof n&&(r=n,n=null);var i=o(e);return n&&i?v&&!d?t.encodePayloadAsBlob(e,r):t.encodePayloadAsArrayBuffer(e,r):e.length?void g(e,(function(e,r){t.encodePacket(e,!!i&&n,!1,(function(e){r(null,function(e){return e.length+":"+e}(e))}))}),(function(e,t){return r(t.join(""))})):r("0:")},t.decodePayload=function(e,n,r){if("string"!=typeof e)return t.decodePayloadAsBinary(e,n,r);var i;if("function"==typeof n&&(r=n,n=null),""===e)return r(p,0,1);for(var o,a,s="",c=0,l=e.length;c<l;c++){var u=e.charAt(c);if(":"===u){if(""===s||s!=(o=Number(s)))return r(p,0,1);if(s!=(a=e.substr(c+1,o)).length)return r(p,0,1);if(a.length){if(i=t.decodePacket(a,n,!1),p.type===i.type&&p.data===i.data)return r(p,0,1);if(!1===r(i,c+o,l))return}c+=o,s=""}else s+=u}return""!==s?r(p,0,1):void 0},t.encodePayloadAsArrayBuffer=function(e,n){if(!e.length)return n(new ArrayBuffer(0));g(e,(function(e,n){t.encodePacket(e,!0,!0,(function(e){return n(null,e)}))}),(function(e,t){var r=t.reduce((function(e,t){var n;return e+(n="string"==typeof t?t.length:t.byteLength).toString().length+n+2}),0),i=new Uint8Array(r),o=0;return t.forEach((function(e){var t="string"==typeof e,n=e;if(t){for(var r=new Uint8Array(e.length),a=0;a<e.length;a++)r[a]=e.charCodeAt(a);n=r.buffer}i[o++]=t?0:1;var s=n.byteLength.toString();for(a=0;a<s.length;a++)i[o++]=parseInt(s[a]);for(i[o++]=255,r=new Uint8Array(n),a=0;a<r.length;a++)i[o++]=r[a]})),n(i.buffer)}))},t.encodePayloadAsBlob=function(e,n){g(e,(function(e,n){t.encodePacket(e,!0,!0,(function(e){var t=new Uint8Array(1);if(t[0]=1,"string"==typeof e){for(var r=new Uint8Array(e.length),i=0;i<e.length;i++)r[i]=e.charCodeAt(i);e=r.buffer,t[0]=0}var o=(e instanceof ArrayBuffer?e.byteLength:e.size).toString(),a=new Uint8Array(o.length+1);for(i=0;i<o.length;i++)a[i]=parseInt(o[i]);if(a[o.length]=255,v){var s=new v([t.buffer,a.buffer,e]);n(null,s)}}))}),(function(e,t){return n(new v(t))}))},t.decodePayloadAsBinary=function(e,n,r){"function"==typeof n&&(r=n,n=null);for(var i=e,o=[];i.byteLength>0;){for(var s=new Uint8Array(i),c=0===s[0],l="",u=1;255!==s[u];u++){if(l.length>310)return r(p,0,1);l+=s[u]}i=a(i,2+l.length),l=parseInt(l);var d=a(i,0,l);if(c)try{d=String.fromCharCode.apply(null,new Uint8Array(d))}catch(e){var f=new Uint8Array(d);for(d="",u=0;u<f.length;u++)d+=String.fromCharCode(f[u])}o.push(d),i=a(i,l)}var h=o.length;o.forEach((function(e,i){r(t.decodePacket(e,n,!0),i,h)}))}},function(e,t,n){"use strict";e.exports=o,o.className="ReflectionObject";var r,i=n(14);function o(e,t){if(!i.isString(e))throw TypeError("name must be a string");if(t&&!i.isObject(t))throw TypeError("options must be an object");this.options=t,this.parsedOptions=null,this.name=e,this.parent=null,this.resolved=!1,this.comment=null,this.filename=null}Object.defineProperties(o.prototype,{root:{get:function(){for(var e=this;null!==e.parent;)e=e.parent;return e}},fullName:{get:function(){for(var e=[this.name],t=this.parent;t;)e.unshift(t.name),t=t.parent;return e.join(".")}}}),o.prototype.toJSON=function(){throw Error()},o.prototype.onAdd=function(e){this.parent&&this.parent!==e&&this.parent.remove(this),this.parent=e,this.resolved=!1;var t=e.root;t instanceof r&&t._handleAdd(this)},o.prototype.onRemove=function(e){var t=e.root;t instanceof r&&t._handleRemove(this),this.parent=null,this.resolved=!1},o.prototype.resolve=function(){return this.resolved||this.root instanceof r&&(this.resolved=!0),this},o.prototype.getOption=function(e){if(this.options)return this.options[e]},o.prototype.setOption=function(e,t,n){return n&&this.options&&void 0!==this.options[e]||((this.options||(this.options={}))[e]=t),this},o.prototype.setParsedOption=function(e,t,n){this.parsedOptions||(this.parsedOptions=[]);var r=this.parsedOptions;if(n){var o=r.find((function(t){return Object.prototype.hasOwnProperty.call(t,e)}));o?i.setProperty(o[e],n,t):((o={})[e]=i.setProperty({},n,t),r.push(o))}else{var a={};a[e]=t,r.push(a)}return this},o.prototype.setOptions=function(e,t){if(e)for(var n=Object.keys(e),r=0;r<n.length;++r)this.setOption(n[r],e[n[r]],t);return this},o.prototype.toString=function(){var e=this.constructor.className,t=this.fullName;return t.length?e+" "+t:e},o._configure=function(e){r=e}},function(e,t,n){"use strict";e.exports=l;var r=n(37);((l.prototype=Object.create(r.prototype)).constructor=l).className="Field";var i,o=n(26),a=n(53),s=n(14),c=/^required|optional|repeated$/;function l(e,t,n,i,o,l,u){if(s.isObject(i)?(u=o,l=i,i=o=void 0):s.isObject(o)&&(u=l,l=o,o=void 0),r.call(this,e,l),!s.isInteger(t)||t<0)throw TypeError("id must be a non-negative integer");if(!s.isString(n))throw TypeError("type must be a string");if(void 0!==i&&!c.test(i=i.toString().toLowerCase()))throw TypeError("rule must be a string rule");if(void 0!==o&&!s.isString(o))throw TypeError("extend must be a string");this.rule=i&&"optional"!==i?i:void 0,this.type=n,this.id=t,this.extend=o||void 0,this.required="required"===i,this.optional=!this.required,this.repeated="repeated"===i,this.map=!1,this.message=null,this.partOf=null,this.typeDefault=null,this.defaultValue=null,this.long=!!s.Long&&void 0!==a.long[n],this.bytes="bytes"===n,this.resolvedType=null,this.extensionField=null,this.declaringField=null,this._packed=null,this.comment=u}l.fromJSON=function(e,t){return new l(e,t.id,t.type,t.rule,t.extend,t.options,t.comment)},Object.defineProperty(l.prototype,"packed",{get:function(){return null===this._packed&&(this._packed=!1!==this.getOption("packed")),this._packed}}),l.prototype.setOption=function(e,t,n){return"packed"===e&&(this._packed=null),r.prototype.setOption.call(this,e,t,n)},l.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return s.toObject(["rule","optional"!==this.rule&&this.rule||void 0,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",t?this.comment:void 0])},l.prototype.resolve=function(){if(this.resolved)return this;if(void 0===(this.typeDefault=a.defaults[this.type])&&(this.resolvedType=(this.declaringField?this.declaringField.parent:this.parent).lookupTypeOrEnum(this.type),this.typeDefault=this.resolvedType instanceof i?null:this.resolvedType.values[Object.keys(this.resolvedType.values)[0]]),this.options&&null!=this.options.default&&(this.typeDefault=this.options.default,this.resolvedType instanceof o&&"string"==typeof this.typeDefault&&(this.typeDefault=this.resolvedType.values[this.typeDefault])),this.options&&(!0!==this.options.packed&&(void 0===this.options.packed||!this.resolvedType||this.resolvedType instanceof o)||delete this.options.packed,Object.keys(this.options).length||(this.options=void 0)),this.long)this.typeDefault=s.Long.fromNumber(this.typeDefault,"u"===this.type.charAt(0)),Object.freeze&&Object.freeze(this.typeDefault);else if(this.bytes&&"string"==typeof this.typeDefault){var e;s.base64.test(this.typeDefault)?s.base64.decode(this.typeDefault,e=s.newBuffer(s.base64.length(this.typeDefault)),0):s.utf8.write(this.typeDefault,e=s.newBuffer(s.utf8.length(this.typeDefault)),0),this.typeDefault=e}return this.defaultValue=this.map?s.emptyObject:this.repeated?s.emptyArray:this.typeDefault,this.parent instanceof i&&(this.parent.ctor.prototype[this.name]=this.defaultValue),r.prototype.resolve.call(this)},l.d=function(e,t,n,r){return"function"==typeof t?t=s.decorateType(t).name:t&&"object"==typeof t&&(t=s.decorateEnum(t).name),function(i,o){s.decorateType(i.constructor).add(new l(o,e,t,n,{default:r}))}},l._configure=function(e){i=e}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i,o=r(n(278)),a=r(n(301)),s=r(n(1)),c=r(n(27)),l=r(n(4)),u=r(n(304)),d=r(n(40)),f=r(n(328)),h=r(n(54)),p=n(329);!function(e){e.DISCONNECTED="disconnected",e.CONNECTING="connecting",e.CONNECTED="connected"}(i=t.WEB_SOCKET_GATEWAY_STATES||(t.WEB_SOCKET_GATEWAY_STATES={}));var v=function(){function e(t,n){var r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:o.default,c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:d.default.get;if(_classCallCheck(this,e),this._token=n,this._options=i,this._connectionProvider=s,this._userFactory=c,this._channels=new Map,this._connectionAttempt=0,!t)throw new TypeError("Api address must be provided.");if(!this._token)throw new TypeError("Token must be provided.");this._url=a.default(t.replace(/^(?!(?:\w+:)?\/\/)/,"https://")),this.set("state","disconnected"),this.set("sessionId",void 0),this.set("me",void 0),this.on("change:state",function(){var t=_asyncToGenerator(regeneratorRuntime.mark((function t(n,i,o){var a,s;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o!==e.STATE_CONNECTED){t.next=9;break}return t.prev=1,t.next=4,r._userFactory.call(d.default,r,null===(s=null===(a=r._socket)||void 0===a?void 0:a.auth)||void 0===s?void 0:s.userId);case 4:r.me=t.sent,t.next=9;break;case 7:t.prev=7,t.t0=t.catch(1);case 9:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(e,n,r){return t.apply(this,arguments)}}(),{priority:e._CHANGE_STATE_EVENT_PRIORITY}),this.on("error",(function(e,t){r._options.onError?r._options.onError(t):console.log(t)}))}var t,n,r,s;return _createClass(e,[{key:"disconnect",value:function(){var e;this.state!==i.DISCONNECTED&&(null===(e=this._socket)||void 0===e||e.disconnect(),this._socket=void 0,this.state=i.DISCONNECTED)}},{key:"reconnect",value:function(){return this._token.refreshToken(),this.state===i.DISCONNECTED?this._connect():Promise.resolve()}},{key:"_sendRequest",value:function(t,n,r){if(!t)throw new h.default("`serviceName` must be provided.",this);if(this.state!==e.STATE_CONNECTED)throw new h.default("Not connected.",this);if(!this._socket||!this._socket.isAuthenticated)throw new h.default("Not authenticated.",this);var i=new ArrayBuffer(r.length+2),o=new Uint8Array(i);return o[0]=t,o[1]=parseInt(n),o.set(r,2),this._emit(1,o)}},{key:"_getChannel",value:function(e,t){var n=""+e+t;return!this._channels.has(n)&&this._socket&&this._channels.set(n,new u.default(n,this,this._socket)),this._channels.get(n)}},{key:"_connect",value:function(){var e=this;return new Promise((function(t,n){var r=e._setupSocket();!e.sessionId&&r.on("reconnect_error",(function(){e._reconnectionAttemptError(n)})),r.once("connect",_asyncToGenerator(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,e._onConnect();case 3:t(),r.next=9;break;case 6:r.prev=6,r.t0=r.catch(0),n(r.t0);case 9:case"end":return r.stop()}}),r,null,[[0,6]])})))),r.connect()}))}},{key:"_setupSocket",value:function(){var e,t=this;if(this._socket)return this._socket;var n=this._connectionProvider((this._url.protocol||"https:")+"//"+this._url.hostname+":"+(this._url.port||("http:"===this._url.protocol?80:443)),{parser:{Encoder:p.Encoder,Decoder:p.Decoder},path:"/ws-v2/ws",transports:["websocket"],timeout:5e3,reconnection:void 0===this._options.autoReconnect||this._options.autoReconnect,reconnectionDelay:1e3,reconnectionDelayMax:5e3,rejectUnauthorized:void 0===this._options.rejectUnauthorized||this._options.rejectUnauthorized,query:{version:f.default},agent:null!==(e=this._options.agent)&&void 0!==e&&e});return this.state=i.CONNECTING,n.on("connect",(function(){t.sessionId=n.id})),n.on("reconnecting",(function(e){t._connectionAttempt=e})),n.on("reconnect",this._onConnect.bind(this)),n.on("disconnect",this._onDisconnect.bind(this)),n.on("error",this._onError.bind(this)),n.on("unauthorized",this._onUnauthorized.bind(this)),this._socket=n,n}},{key:"_emit",value:function(e,t){var n=this,r=this._socket;return new Promise((function(i,o){r.binary(!1).emit(e,t,(function(e,t){e&&o(h.default.fromPublicError(e,n)),i(t)}))}))}},{key:"_addAuthData",value:function(e,t){this._socket.auth={environmentId:e,userId:t},this._socket.isAuthenticated=!0}},{key:"_removeAuthData",value:function(){this._socket.isAuthenticated=!1,delete this._socket.auth}},{key:"_onConnect",value:(s=_asyncToGenerator(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._authenticate(this._token.value);case 2:this.state=i.CONNECTED,this._token.on("change:value",this._onTokenChange.bind(this)),this._socket.off("reconnect_error"),this.on("disconnect",(function(){t._token.off("change:value",t._onTokenChange.bind(t))}));case 6:case"end":return e.stop()}}),e,this)}))),function(){return s.apply(this,arguments)})},{key:"_onTokenChange",value:(r=_asyncToGenerator(regeneratorRuntime.mark((function e(t,n,r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this._authenticate(r);case 3:e.next=7;break;case 5:e.prev=5,e.t0=e.catch(0);case 7:case"end":return e.stop()}}),e,this,[[0,5]])}))),function(e,t,n){return r.apply(this,arguments)})},{key:"_onDisconnect",value:function(){this.state=i.DISCONNECTED,this._connectionAttempt=0,this.fire("disconnect");var e,t=_createForOfIteratorHelper(this._channels.values());try{for(t.s();!(e=t.n()).done;){e.value.remove()}}catch(n){t.e(n)}finally{t.f()}this._channels.clear()}},{key:"_onError",value:function(e){this.fire("error",new h.default(e.message,this,e.code))}},{key:"_reconnectionAttemptError",value:function(e){this._connectionAttempt>=2&&(this.disconnect(),e(new h.default("The number of initial connection attempts exceeded.")))}},{key:"_onUnauthorized",value:function(e){var t=e.error;this._removeAuthData(),this.fire("error",h.default.fromPublicError(t,this))}},{key:"_authenticate",value:(n=_asyncToGenerator(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this._emit(2,{token:t});case 3:n=e.sent,this._addAuthData(n.environmentId,n.userId),e.next=10;break;case 7:throw e.prev=7,e.t0=e.catch(0),this._removeAuthData(),e.t0;case 10:case"end":return e.stop()}}),e,this,[[0,7]])}))),function(e){return n.apply(this,arguments)})}],[{key:"connect",value:(t=_asyncToGenerator(regeneratorRuntime.mark((function t(n){var r,i,a,s,c,l=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=l.length>1&&void 0!==l[1]?l[1]:"local.cs.dev:443/ws-v2",i=l.length>2&&void 0!==l[2]?l[2]:{},a=l.length>3&&void 0!==l[3]?l[3]:o.default,s=l.length>4&&void 0!==l[4]?l[4]:d.default.get,c=new e(r,n,i,a,s),t.next=7,c._connect();case 7:return t.abrupt("return",c);case 8:case"end":return t.stop()}}),t)}))),function(e){return t.apply(this,arguments)})}]),e}();v.STATE_DISCONNECTED=i.DISCONNECTED,v.STATE_CONNECTING=i.CONNECTING,v.STATE_CONNECTED=i.CONNECTED,v._CHANGE_STATE_EVENT_PRIORITY=c.default.get("highest")+999999,s.default(v,l.default),t.default=v},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(324)),o=r(n(325)),a=r(n(32)),s=r(n(326)),c=r(n(327)),l=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,e),this._attributes=new Map;for(var r=function(){var e=o[i];"id"!==e?(t._attributes.set(e,n[e]),Object.defineProperty(t,e,{enumerable:!0,configurable:!1,get:function(){return t._attributes.get(e)}})):t.id=n.id},i=0,o=Object.keys(n);i<o.length;i++)r()}var t,n;return _createClass(e,null,[{key:"fromData",value:function(t){return new e(t)}},{key:"get",value:(n=_asyncToGenerator(regeneratorRuntime.mark((function t(n,r){var s,c,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=new i.default(r),t.prev=1,t.next=4,n._sendRequest(e._SERVICE,i.default.TYPE,a.default.encode(s));case 4:return c=t.sent,l=a.default.decode(c,o.default),t.abrupt("return",new e(l.attributes));case 9:return t.prev=9,t.t0=t.catch(1),t.abrupt("return",new e({id:r}));case 12:case"end":return t.stop()}}),t,null,[[1,9]])}))),function(e,t){return n.apply(this,arguments)})},{key:"getMany",value:(t=_asyncToGenerator(regeneratorRuntime.mark((function t(n,r){var i,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=new s.default(r),t.prev=1,t.next=4,n._sendRequest(e._SERVICE,s.default.TYPE,a.default.encode(i));case 4:return o=t.sent,t.abrupt("return",a.default.decode(o,c.default).users.map((function(t){return new e(t)})));case 8:return t.prev=8,t.t0=t.catch(1),t.abrupt("return",r.map((function(t){return new e({id:t})})));case 11:case"end":return t.stop()}}),t,null,[[1,8]])}))),function(e,n){return t.apply(this,arguments)})}]),e}();l._SERVICE=2,t.default=l},function(e,t,n){"use strict";var r=n(15),i=n(7);t.a=function(e){if(!Object(i.a)(e))return!1;var t=Object(r.a)(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},function(e,t,n){"use strict";var r=/^(?:0|[1-9]\d*)$/;t.a=function(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&r.test(e))&&e>-1&&e%1==0&&e<t}},function(e,t,n){"use strict";var r=n(48);t.a=function(e,t,n){"__proto__"==t&&r.a?Object(r.a)(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}},function(e,t,n){"use strict";var r=n(43),i=n(23),o=Object.prototype.hasOwnProperty;t.a=function(e,t,n){var a=e[t];o.call(e,t)&&Object(i.a)(a,n)&&(void 0!==n||t in e)||Object(r.a)(e,t,n)}},function(e,t,n){"use strict";t.a=function(e){return function(t){return e(t)}}},function(e,t,n){"use strict";var r=Object.prototype;t.a=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||r)}},function(e,t,n){"use strict";var r=n(15),i=n(60),o=n(8),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1;var s=n(45),c=n(29),l=c.a&&c.a.isTypedArray,u=l?Object(s.a)(l):function(e){return Object(o.a)(e)&&Object(i.a)(e.length)&&!!a[Object(r.a)(e)]};t.a=u},function(e,t,n){"use strict";var r=n(17),i=function(){try{var e=Object(r.a)(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();t.a=i},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t,n){"use strict";(function(e){var r=n(283),i=n(284),o=n(285);function a(){return c.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(e,t){if(a()<t)throw new RangeError("Invalid typed array length");return c.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=c.prototype:(null===e&&(e=new c(t)),e.length=t),e}function c(e,t,n){if(!(c.TYPED_ARRAY_SUPPORT||this instanceof c))return new c(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return d(this,e)}return l(this,e,t,n)}function l(e,t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,n,r){if(n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r),c.TYPED_ARRAY_SUPPORT?(e=t).__proto__=c.prototype:e=f(e,t),e}(e,t,n,r):"string"==typeof t?function(e,t,n){if("string"==typeof n&&""!==n||(n="utf8"),!c.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|p(t,n),i=(e=s(e,r)).write(t,n);return i!==r&&(e=e.slice(0,i)),e}(e,t,n):function(e,t){if(c.isBuffer(t)){var n=0|h(t.length);return 0===(e=s(e,n)).length||t.copy(e,0,0,n),e}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||function(e){return e!=e}(t.length)?s(e,0):f(e,t);if("Buffer"===t.type&&o(t.data))return f(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function u(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function d(e,t){if(u(t),e=s(e,t<0?0:0|h(t)),!c.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function f(e,t){var n=t.length<0?0:0|h(t.length);e=s(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function h(e){if(e>=a())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a().toString(16)+" bytes");return 0|e}function p(e,t){if(c.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return B(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return z(e).length;default:if(r)return B(e).length;t=(""+t).toLowerCase(),r=!0}}function v(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function g(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=c.from(t,r)),c.isBuffer(t))return 0===t.length?-1:m(e,t,n,r,i);if("number"==typeof t)return t&=255,c.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):m(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function m(e,t,n,r,i){var o,a=1,s=e.length,c=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;a=2,s/=2,c/=2,n/=2}function l(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(i){var u=-1;for(o=n;o<s;o++)if(l(e,o)===l(t,-1===u?0:o-u)){if(-1===u&&(u=o),o-u+1===c)return u*a}else-1!==u&&(o-=o-u),u=-1}else for(n+c>s&&(n=s-c),o=n;o>=0;o--){for(var d=!0,f=0;f<c;f++)if(l(e,o+f)!==l(t,f)){d=!1;break}if(d)return o}return-1}function y(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=t.length;if(o%2!=0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var a=0;a<r;++a){var s=parseInt(t.substr(2*a,2),16);if(isNaN(s))return a;e[n+a]=s}return a}function k(e,t,n,r){return H(B(t,e.length-n),e,n,r)}function _(e,t,n,r){return H(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function b(e,t,n,r){return _(e,t,n,r)}function w(e,t,n,r){return H(z(t),e,n,r)}function x(e,t,n,r){return H(function(e,t){for(var n,r,i=[],o=0;o<e.length&&!((t-=2)<0);++o)r=(n=e.charCodeAt(o))>>8,i.push(n%256),i.push(r);return i}(t,e.length-n),e,n,r)}function C(e,t,n){return r.fromByteArray(0===t&&n===e.length?e:e.slice(t,n))}function T(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var o,a,s,c,l=e[i],u=null,d=l>239?4:l>223?3:l>191?2:1;if(i+d<=n)switch(d){case 1:l<128&&(u=l);break;case 2:128==(192&(o=e[i+1]))&&(c=(31&l)<<6|63&o)>127&&(u=c);break;case 3:a=e[i+2],128==(192&(o=e[i+1]))&&128==(192&a)&&(c=(15&l)<<12|(63&o)<<6|63&a)>2047&&(c<55296||c>57343)&&(u=c);break;case 4:a=e[i+2],s=e[i+3],128==(192&(o=e[i+1]))&&128==(192&a)&&128==(192&s)&&(c=(15&l)<<18|(63&o)<<12|(63&a)<<6|63&s)>65535&&c<1114112&&(u=c)}null===u?(u=65533,d=1):u>65535&&(r.push((u-=65536)>>>10&1023|55296),u=56320|1023&u),r.push(u),i+=d}return function(e){var t=e.length;if(t<=A)return String.fromCharCode.apply(String,e);for(var n="",r=0;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=A));return n}(r)}t.Buffer=c,t.SlowBuffer=function(e){return+e!=e&&(e=0),c.alloc(+e)},t.INSPECT_MAX_BYTES=50,c.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=a(),c.poolSize=8192,c._augment=function(e){return e.__proto__=c.prototype,e},c.from=function(e,t,n){return l(null,e,t,n)},c.TYPED_ARRAY_SUPPORT&&(c.prototype.__proto__=Uint8Array.prototype,c.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&c[Symbol.species]===c&&Object.defineProperty(c,Symbol.species,{value:null,configurable:!0})),c.alloc=function(e,t,n){return function(e,t,n,r){return u(t),t<=0?s(e,t):void 0!==n?"string"==typeof r?s(e,t).fill(n,r):s(e,t).fill(n):s(e,t)}(null,e,t,n)},c.allocUnsafe=function(e){return d(null,e)},c.allocUnsafeSlow=function(e){return d(null,e)},c.isBuffer=function(e){return!(null==e||!e._isBuffer)},c.compare=function(e,t){if(!c.isBuffer(e)||!c.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,i=0,o=Math.min(n,r);i<o;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},c.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(e,t){if(!o(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return c.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=c.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var a=e[n];if(!c.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(r,i),i+=a.length}return r},c.byteLength=p,c.prototype._isBuffer=!0,c.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)v(this,t,t+1);return this},c.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)v(this,t,t+3),v(this,t+1,t+2);return this},c.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)v(this,t,t+7),v(this,t+1,t+6),v(this,t+2,t+5),v(this,t+3,t+4);return this},c.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?T(this,0,e):(function(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return I(this,t,n);case"utf8":case"utf-8":return T(this,t,n);case"ascii":return S(this,t,n);case"latin1":case"binary":return E(this,t,n);case"base64":return C(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}).apply(this,arguments)},c.prototype.equals=function(e){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===c.compare(this,e)},c.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},c.prototype.compare=function(e,t,n,r,i){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(this===e)return 0;for(var o=(i>>>=0)-(r>>>=0),a=(n>>>=0)-(t>>>=0),s=Math.min(o,a),l=this.slice(r,i),u=e.slice(t,n),d=0;d<s;++d)if(l[d]!==u[d]){o=l[d],a=u[d];break}return o<a?-1:a<o?1:0},c.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},c.prototype.indexOf=function(e,t,n){return g(this,e,t,n,!0)},c.prototype.lastIndexOf=function(e,t,n){return g(this,e,t,n,!1)},c.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return y(this,e,t,n);case"utf8":case"utf-8":return k(this,e,t,n);case"ascii":return _(this,e,t,n);case"latin1":case"binary":return b(this,e,t,n);case"base64":return w(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return x(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var A=4096;function S(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function E(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function I(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=t;o<n;++o)i+=V(e[o]);return i}function O(e,t,n){for(var r=e.slice(t,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function R(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function P(e,t,n,r,i,o){if(!c.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function M(e,t,n,r){t<0&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-n,2);i<o;++i)e[n+i]=(t&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function N(e,t,n,r){t<0&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-n,4);i<o;++i)e[n+i]=t>>>8*(r?i:3-i)&255}function D(e,t,n,r,i,o){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function F(e,t,n,r,o){return o||D(e,0,n,4),i.write(e,t,n,r,23,4),n+4}function j(e,t,n,r,o){return o||D(e,0,n,8),i.write(e,t,n,r,52,8),n+8}c.prototype.slice=function(e,t){var n,r=this.length;if((e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e),c.TYPED_ARRAY_SUPPORT)(n=this.subarray(e,t)).__proto__=c.prototype;else{var i=t-e;n=new c(i,void 0);for(var o=0;o<i;++o)n[o]=this[o+e]}return n},c.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||R(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r},c.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||R(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},c.prototype.readUInt8=function(e,t){return t||R(e,1,this.length),this[e]},c.prototype.readUInt16LE=function(e,t){return t||R(e,2,this.length),this[e]|this[e+1]<<8},c.prototype.readUInt16BE=function(e,t){return t||R(e,2,this.length),this[e]<<8|this[e+1]},c.prototype.readUInt32LE=function(e,t){return t||R(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},c.prototype.readUInt32BE=function(e,t){return t||R(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},c.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||R(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*t)),r},c.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||R(e,t,this.length);for(var r=t,i=1,o=this[e+--r];r>0&&(i*=256);)o+=this[e+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*t)),o},c.prototype.readInt8=function(e,t){return t||R(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},c.prototype.readInt16LE=function(e,t){t||R(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt16BE=function(e,t){t||R(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt32LE=function(e,t){return t||R(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},c.prototype.readInt32BE=function(e,t){return t||R(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},c.prototype.readFloatLE=function(e,t){return t||R(e,4,this.length),i.read(this,e,!0,23,4)},c.prototype.readFloatBE=function(e,t){return t||R(e,4,this.length),i.read(this,e,!1,23,4)},c.prototype.readDoubleLE=function(e,t){return t||R(e,8,this.length),i.read(this,e,!0,52,8)},c.prototype.readDoubleBE=function(e,t){return t||R(e,8,this.length),i.read(this,e,!1,52,8)},c.prototype.writeUIntLE=function(e,t,n,r){e=+e,t|=0,n|=0,r||P(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=e/i&255;return t+n},c.prototype.writeUIntBE=function(e,t,n,r){e=+e,t|=0,n|=0,r||P(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+n},c.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||P(this,e,t,1,255,0),c.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},c.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||P(this,e,t,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):M(this,e,t,!0),t+2},c.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||P(this,e,t,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):M(this,e,t,!1),t+2},c.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||P(this,e,t,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):N(this,e,t,!0),t+4},c.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||P(this,e,t,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):N(this,e,t,!1),t+4},c.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);P(this,e,t,n,i-1,-i)}var o=0,a=1,s=0;for(this[t]=255&e;++o<n&&(a*=256);)e<0&&0===s&&0!==this[t+o-1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},c.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);P(this,e,t,n,i-1,-i)}var o=n-1,a=1,s=0;for(this[t+o]=255&e;--o>=0&&(a*=256);)e<0&&0===s&&0!==this[t+o+1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},c.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||P(this,e,t,1,127,-128),c.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},c.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||P(this,e,t,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):M(this,e,t,!0),t+2},c.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||P(this,e,t,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):M(this,e,t,!1),t+2},c.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||P(this,e,t,4,2147483647,-2147483648),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):N(this,e,t,!0),t+4},c.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||P(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):N(this,e,t,!1),t+4},c.prototype.writeFloatLE=function(e,t,n){return F(this,e,t,!0,n)},c.prototype.writeFloatBE=function(e,t,n){return F(this,e,t,!1,n)},c.prototype.writeDoubleLE=function(e,t,n){return j(this,e,t,!0,n)},c.prototype.writeDoubleBE=function(e,t,n){return j(this,e,t,!1,n)},c.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i,o=r-n;if(this===e&&n<t&&t<r)for(i=o-1;i>=0;--i)e[i+t]=this[i+n];else if(o<1e3||!c.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)e[i+t]=this[i+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+o),t);return o},c.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!c.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var o;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(o=t;o<n;++o)this[o]=e;else{var a=c.isBuffer(e)?e:B(new c(e,r).toString()),s=a.length;for(o=0;o<n-t;++o)this[o+t]=a[o%s]}return this};var L=/[^+\/0-9A-Za-z-_]/g;function V(e){return e<16?"0"+e.toString(16):e.toString(16)}function B(e,t){var n;t=t||1/0;for(var r=e.length,i=null,o=[],a=0;a<r;++a){if((n=e.charCodeAt(a))>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(a+1===r){(t-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function z(e){return r.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(L,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function H(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}}).call(this,n(49))},function(e,t,n){"use strict";e.exports=u;var r=n(37);((u.prototype=Object.create(r.prototype)).constructor=u).className="Namespace";var i,o,a,s=n(38),c=n(14);function l(e,t){if(e&&e.length){for(var n={},r=0;r<e.length;++r)n[e[r].name]=e[r].toJSON(t);return n}}function u(e,t){r.call(this,e,t),this.nested=void 0,this._nestedArray=null}function d(e){return e._nestedArray=null,e}u.fromJSON=function(e,t){return new u(e,t.options).addJSON(t.nested)},u.arrayToJSON=l,u.isReservedId=function(e,t){if(e)for(var n=0;n<e.length;++n)if("string"!=typeof e[n]&&e[n][0]<=t&&e[n][1]>t)return!0;return!1},u.isReservedName=function(e,t){if(e)for(var n=0;n<e.length;++n)if(e[n]===t)return!0;return!1},Object.defineProperty(u.prototype,"nestedArray",{get:function(){return this._nestedArray||(this._nestedArray=c.toArray(this.nested))}}),u.prototype.toJSON=function(e){return c.toObject(["options",this.options,"nested",l(this.nestedArray,e)])},u.prototype.addJSON=function(e){if(e)for(var t,n=Object.keys(e),r=0;r<n.length;++r)this.add((void 0!==(t=e[n[r]]).fields?i.fromJSON:void 0!==t.values?a.fromJSON:void 0!==t.methods?o.fromJSON:void 0!==t.id?s.fromJSON:u.fromJSON)(n[r],t));return this},u.prototype.get=function(e){return this.nested&&this.nested[e]||null},u.prototype.getEnum=function(e){if(this.nested&&this.nested[e]instanceof a)return this.nested[e].values;throw Error("no such enum: "+e)},u.prototype.add=function(e){if(!(e instanceof s&&void 0!==e.extend||e instanceof i||e instanceof a||e instanceof o||e instanceof u))throw TypeError("object must be a valid nested object");if(this.nested){var t=this.get(e.name);if(t){if(!(t instanceof u&&e instanceof u)||t instanceof i||t instanceof o)throw Error("duplicate name '"+e.name+"' in "+this);for(var n=t.nestedArray,r=0;r<n.length;++r)e.add(n[r]);this.remove(t),this.nested||(this.nested={}),e.setOptions(t.options,!0)}}else this.nested={};return this.nested[e.name]=e,e.onAdd(this),d(this)},u.prototype.remove=function(e){if(!(e instanceof r))throw TypeError("object must be a ReflectionObject");if(e.parent!==this)throw Error(e+" is not a member of "+this);return delete this.nested[e.name],Object.keys(this.nested).length||(this.nested=void 0),e.onRemove(this),d(this)},u.prototype.define=function(e,t){if(c.isString(e))e=e.split(".");else if(!Array.isArray(e))throw TypeError("illegal path");if(e&&e.length&&""===e[0])throw Error("path must be relative");for(var n=this;e.length>0;){var r=e.shift();if(n.nested&&n.nested[r]){if(!((n=n.nested[r])instanceof u))throw Error("path conflicts with non-namespace objects")}else n.add(n=new u(r))}return t&&n.addJSON(t),n},u.prototype.resolveAll=function(){for(var e=this.nestedArray,t=0;t<e.length;)e[t]instanceof u?e[t++].resolveAll():e[t++].resolve();return this.resolve()},u.prototype.lookup=function(e,t,n){if("boolean"==typeof t?(n=t,t=void 0):t&&!Array.isArray(t)&&(t=[t]),c.isString(e)&&e.length){if("."===e)return this.root;e=e.split(".")}else if(!e.length)return this;if(""===e[0])return this.root.lookup(e.slice(1),t);var r=this.get(e[0]);if(r){if(1===e.length){if(!t||t.indexOf(r.constructor)>-1)return r}else if(r instanceof u&&(r=r.lookup(e.slice(1),t,!0)))return r}else for(var i=0;i<this.nestedArray.length;++i)if(this._nestedArray[i]instanceof u&&(r=this._nestedArray[i].lookup(e,t,!0)))return r;return null===this.parent||n?null:this.parent.lookup(e,t)},u.prototype.lookupType=function(e){var t=this.lookup(e,[i]);if(!t)throw Error("no such type: "+e);return t},u.prototype.lookupEnum=function(e){var t=this.lookup(e,[a]);if(!t)throw Error("no such Enum '"+e+"' in "+this);return t},u.prototype.lookupTypeOrEnum=function(e){var t=this.lookup(e,[i,a]);if(!t)throw Error("no such Type or Enum '"+e+"' in "+this);return t},u.prototype.lookupService=function(e){var t=this.lookup(e,[o]);if(!t)throw Error("no such Service '"+e+"' in "+this);return t},u._configure=function(e,t,n){i=e,o=t,a=n}},function(e,t,n){"use strict";var r=t,i=n(14),o=["double","float","int32","uint32","sint32","fixed32","sfixed32","int64","uint64","sint64","fixed64","sfixed64","bool","string","bytes"];function a(e,t){var n=0,r={};for(t|=0;n<e.length;)r[o[n+t]]=e[n++];return r}r.basic=a([1,5,0,0,0,5,5,0,0,0,1,1,0,2,2]),r.defaults=a([0,0,0,0,0,0,0,0,0,0,0,0,!1,"",i.emptyArray,null]),r.long=a([0,0,0,1,1],7),r.mapKey=a([0,0,0,5,5,0,0,0,1,1,0,2],2),r.packed=a([1,5,0,0,0,5,5,0,0,0,1,1,0])},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return _classCallCheck(this,n),(i=t.call(this,"cloud-services-internal-error: "+e,r,a)).code=o,i}return _createClass(n,null,[{key:"fromPublicError",value:function(e,t){var r=e.message,i=e.traceId,o=void 0===i?"":i,a=e.data,s=void 0===a?{}:a,c=e.code;return new n(r+" "+(o?"Error Trace id: "+o+".":""),t,void 0===c?null:c,s)}}]),n}(r(n(0)).default);t.default=i},function(e,t,n){"use strict";var r=n(15),i=n(8),o=function(e){return Object(i.a)(e)&&"[object Arguments]"==Object(r.a)(e)},a=Object.prototype,s=a.hasOwnProperty,c=a.propertyIsEnumerable,l=o(function(){return arguments}())?o:function(e){return Object(i.a)(e)&&s.call(e,"callee")&&!c.call(e,"callee")};t.a=l},function(e,t,n){var r=n(2),i=n(237);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]),r(i,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=i.locals||{}},function(e,t){t.encode=function(e){var t="";for(var n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t},t.decode=function(e){for(var t={},n=e.split("&"),r=0,i=n.length;r<i;r++){var o=n[r].split("=");t[decodeURIComponent(o[0])]=decodeURIComponent(o[1])}return t}},function(e,t){e.exports=function(e,t){var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},function(e,t,n){"use strict";(function(e){t.a="object"==typeof e&&e&&e.Object===Object&&e}).call(this,n(49))},function(e,t,n){"use strict";t.a=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},function(e,t,n){"use strict";(function(e){var r=n(10),i=exports&&!exports.nodeType&&exports,o=i&&"object"==typeof e&&e&&!e.nodeType&&e,a=o&&o.exports===i?r.a.Buffer:void 0,s=a?a.allocUnsafe:void 0;t.a=function(e,t){if(t)return e.slice();var n=e.length,r=s?s(n):new e.constructor(n);return e.copy(r),r}}).call(this,n(65)(e))},function(e,t){e.exports='<svg viewBox="0 0 10 10" xmlns="http://www.w3.org/2000/svg"><path d="M.941 4.523a.75.75 0 1 1 1.06-1.06l3.006 3.005 3.005-3.005a.75.75 0 1 1 1.06 1.06l-3.549 3.55a.75.75 0 0 1-1.168-.136L.941 4.523z"/></svg>'},function(e,t,n){"use strict";var r=function(e){return e},i=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)},o=Math.max,a=function(e){return function(){return e}},s=n(48),c=Date.now,l=function(e){var t=0,n=0;return function(){var r=c(),i=16-(r-n);if(n=r,i>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(s.a?function(e,t){return Object(s.a)(e,"toString",{configurable:!0,enumerable:!1,value:a(t),writable:!0})}:r),u=n(23),d=n(33),f=n(42),h=n(7);t.a=function(e){return function(e,t){return l(function(e,t,n){return t=o(void 0===t?e.length-1:t,0),function(){for(var r=arguments,a=-1,s=o(r.length-t,0),c=Array(s);++a<s;)c[a]=r[t+a];a=-1;for(var l=Array(t+1);++a<t;)l[a]=r[a];return l[t]=n(c),i(e,this,l)}}(e,void 0,r),e+"")}((function(t,n){var r=-1,i=n.length,o=i>1?n[i-1]:void 0,a=i>2?n[2]:void 0;for(o=e.length>3&&"function"==typeof o?(i--,o):void 0,a&&function(e,t,n){if(!Object(h.a)(n))return!1;var r=typeof t;return!!("number"==r?Object(d.a)(n)&&Object(f.a)(t,n.length):"string"==r&&t in n)&&Object(u.a)(n[t],e)}(n[0],n[1],a)&&(o=i<3?void 0:o,i=1),t=Object(t);++r<i;){var s=n[r];s&&e(t,s,r,o)}return t}))}},function(e,t,n){"use strict";var r=n(55),i=n(12),o=n(28),a=n(42),s=n(47),c=Object.prototype.hasOwnProperty;t.a=function(e,t){var n=Object(i.a)(e),l=!n&&Object(r.a)(e),u=!n&&!l&&Object(o.a)(e),d=!n&&!l&&!u&&Object(s.a)(e),f=n||l||u||d,h=f?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],p=h.length;for(var v in e)!t&&!c.call(e,v)||f&&("length"==v||u&&("offset"==v||"parent"==v)||d&&("buffer"==v||"byteLength"==v||"byteOffset"==v)||Object(a.a)(v,p))||h.push(v);return h}},function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},function(e,t){var n,r,i=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(e){n=o}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(e){r=a}}();var c,l=[],u=!1,d=-1;function f(){u&&c&&(u=!1,c.length?l=c.concat(l):d=-1,l.length&&h())}function h(){if(!u){var e=s(f);u=!0;for(var t=l.length;t;){for(c=l,l=[];++d<t;)c&&c[d].run();d=-1,t=l.length}c=null,u=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function v(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];l.push(new p(e,t)),1!==l.length||u||s(h)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=v,i.addListener=v,i.once=v,i.off=v,i.removeListener=v,i.removeAllListeners=v,i.emit=v,i.prependListener=v,i.prependOnceListener=v,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t,n){var r=n(24)("socket.io-parser"),i=n(35),o=n(282),a=n(50),s=n(86);function c(){}t.protocol=4,t.types=["CONNECT","DISCONNECT","EVENT","ACK","ERROR","BINARY_EVENT","BINARY_ACK"],t.CONNECT=0,t.DISCONNECT=1,t.EVENT=2,t.ACK=3,t.ERROR=4,t.BINARY_EVENT=5,t.BINARY_ACK=6,t.Encoder=c,t.Decoder=d;var l=t.ERROR+'"encode error"';function u(e){var n=""+e.type;if(t.BINARY_EVENT!==e.type&&t.BINARY_ACK!==e.type||(n+=e.attachments+"-"),e.nsp&&"/"!==e.nsp&&(n+=e.nsp+","),null!=e.id&&(n+=e.id),null!=e.data){var i=function(e){try{return JSON.stringify(e)}catch(e){return!1}}(e.data);if(!1===i)return l;n+=i}return r("encoded %j as %s",e,n),n}function d(){this.reconstructor=null}function f(e){this.reconPack=e,this.buffers=[]}function h(e){return{type:t.ERROR,data:"parser error: "+e}}c.prototype.encode=function(e,n){r("encoding packet %j",e),t.BINARY_EVENT===e.type||t.BINARY_ACK===e.type?function(e,t){o.removeBlobs(e,(function(e){var n=o.deconstructPacket(e),r=u(n.packet),i=n.buffers;i.unshift(r),t(i)}))}(e,n):n([u(e)])},i(d.prototype),d.prototype.add=function(e){var n;if("string"==typeof e)n=function(e){var n=0,i={type:Number(e.charAt(0))};if(null==t.types[i.type])return h("unknown packet type "+i.type);if(t.BINARY_EVENT===i.type||t.BINARY_ACK===i.type){for(var o=n+1;"-"!==e.charAt(++n)&&n!=e.length;);var s=e.substring(o,n);if(s!=Number(s)||"-"!==e.charAt(n))throw new Error("Illegal attachments");i.attachments=Number(s)}if("/"===e.charAt(n+1)){for(o=n+1;++n&&","!==(l=e.charAt(n))&&n!==e.length;);i.nsp=e.substring(o,n)}else i.nsp="/";var c=e.charAt(n+1);if(""!==c&&Number(c)==c){for(o=n+1;++n;){var l;if(null==(l=e.charAt(n))||Number(l)!=l){--n;break}if(n===e.length)break}i.id=Number(e.substring(o,n+1))}if(e.charAt(++n)){var u=function(e){try{return JSON.parse(e)}catch(e){return!1}}(e.substr(n));if(!1===u||i.type!==t.ERROR&&!a(u))return h("invalid payload");i.data=u}return r("decoded %s as %j",e,i),i}(e),t.BINARY_EVENT===n.type||t.BINARY_ACK===n.type?(this.reconstructor=new f(n),0===this.reconstructor.reconPack.attachments&&this.emit("decoded",n)):this.emit("decoded",n);else{if(!s(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");(n=this.reconstructor.takeBinaryData(e))&&(this.reconstructor=null,this.emit("decoded",n))}},d.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},f.prototype.takeBinaryData=function(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){var t=o.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null},f.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]}},function(e,t,n){var r=n(288),i=n(69);e.exports=function(e){var t=e.xdomain,n=e.xscheme,o=e.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!t||r))return new XMLHttpRequest}catch(e){}try{if("undefined"!=typeof XDomainRequest&&!n&&o)return new XDomainRequest}catch(e){}if(!t)try{return new(i[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(e){}}},function(e,t){e.exports="undefined"!=typeof self?self:"undefined"!=typeof window?window:Function("return this")()},function(e,t,n){var r=n(36),i=n(35);function o(e){this.path=e.path,this.hostname=e.hostname,this.port=e.port,this.secure=e.secure,this.query=e.query,this.timestampParam=e.timestampParam,this.timestampRequests=e.timestampRequests,this.readyState="",this.agent=e.agent||!1,this.socket=e.socket,this.enablesXDR=e.enablesXDR,this.withCredentials=e.withCredentials,this.pfx=e.pfx,this.key=e.key,this.passphrase=e.passphrase,this.cert=e.cert,this.ca=e.ca,this.ciphers=e.ciphers,this.rejectUnauthorized=e.rejectUnauthorized,this.forceNode=e.forceNode,this.isReactNative=e.isReactNative,this.extraHeaders=e.extraHeaders,this.localAddress=e.localAddress}e.exports=o,i(o.prototype),o.prototype.onError=function(e,t){var n=new Error(e);return n.type="TransportError",n.description=t,this.emit("error",n),this},o.prototype.open=function(){return"closed"!==this.readyState&&""!==this.readyState||(this.readyState="opening",this.doOpen()),this},o.prototype.close=function(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this},o.prototype.send=function(e){if("open"!==this.readyState)throw new Error("Transport not open");this.write(e)},o.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},o.prototype.onData=function(e){var t=r.decodePacket(e,this.socket.binaryType);this.onPacket(t)},o.prototype.onPacket=function(e){this.emit("packet",e)},o.prototype.onClose=function(){this.readyState="closed",this.emit("close")}},function(e,t,n){"use strict";e.exports=u;var r,i=n(25),o=i.LongBits,a=i.base64,s=i.utf8;function c(e,t,n){this.fn=e,this.len=t,this.next=void 0,this.val=n}function l(){}function u(){this.len=0,this.head=new c(l,0,0),this.tail=this.head,this.states=null}var d=function(){return i.Buffer?function(){return(u.create=function(){return new r})()}:function(){return new u}};function f(e,t,n){t[n]=255&e}function h(e,t){this.len=e,this.next=void 0,this.val=t}function p(e,t,n){for(;e.hi;)t[n++]=127&e.lo|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;e.lo>127;)t[n++]=127&e.lo|128,e.lo=e.lo>>>7;t[n++]=e.lo}function v(e,t,n){t[n]=255&e,t[n+1]=e>>>8&255,t[n+2]=e>>>16&255,t[n+3]=e>>>24}u.create=d(),u.alloc=function(e){return new i.Array(e)},i.Array!==Array&&(u.alloc=i.pool(u.alloc,i.Array.prototype.subarray)),u.prototype._push=function(e,t,n){return this.tail=this.tail.next=new c(e,t,n),this.len+=t,this},(h.prototype=Object.create(c.prototype)).fn=function(e,t,n){for(;e>127;)t[n++]=127&e|128,e>>>=7;t[n]=e},u.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new h((e>>>=0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this},u.prototype.int32=function(e){return e<0?this._push(p,10,o.fromNumber(e)):this.uint32(e)},u.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)},u.prototype.int64=u.prototype.uint64=function(e){var t=o.from(e);return this._push(p,t.length(),t)},u.prototype.sint64=function(e){var t=o.from(e).zzEncode();return this._push(p,t.length(),t)},u.prototype.bool=function(e){return this._push(f,1,e?1:0)},u.prototype.sfixed32=u.prototype.fixed32=function(e){return this._push(v,4,e>>>0)},u.prototype.sfixed64=u.prototype.fixed64=function(e){var t=o.from(e);return this._push(v,4,t.lo)._push(v,4,t.hi)},u.prototype.float=function(e){return this._push(i.float.writeFloatLE,4,e)},u.prototype.double=function(e){return this._push(i.float.writeDoubleLE,8,e)};var g=i.Array.prototype.set?function(e,t,n){t.set(e,n)}:function(e,t,n){for(var r=0;r<e.length;++r)t[n+r]=e[r]};u.prototype.bytes=function(e){var t=e.length>>>0;if(!t)return this._push(f,1,0);if(i.isString(e)){var n=u.alloc(t=a.length(e));a.decode(e,n,0),e=n}return this.uint32(t)._push(g,t,e)},u.prototype.string=function(e){var t=s.length(e);return t?this.uint32(t)._push(s.write,t,e):this._push(f,1,0)},u.prototype.fork=function(){return this.states=new function(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}(this),this.head=this.tail=new c(l,0,0),this.len=0,this},u.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new c(l,0,0),this.len=0),this},u.prototype.ldelim=function(){var e=this.head,t=this.tail,n=this.len;return this.reset().uint32(n),n&&(this.tail.next=e.next,this.tail=t,this.len+=n),this},u.prototype.finish=function(){for(var e=this.head.next,t=this.constructor.alloc(this.len),n=0;e;)e.fn(e.val,t,n),n+=e.len,e=e.next;return t},u._configure=function(e){r=e,u.create=d(),r._configure()}},function(e,t,n){"use strict";e.exports=c;var r,i=n(25),o=i.LongBits,a=i.utf8;function s(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len)}function c(e){this.buf=e,this.pos=0,this.len=e.length}var l="undefined"!=typeof Uint8Array?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new c(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new c(e);throw Error("illegal buffer")},u=function(){return i.Buffer?function(e){return(c.create=function(e){return i.Buffer.isBuffer(e)?new r(e):l(e)})(e)}:l};function d(){var e=new o(0,0),t=0;if(!(this.len-this.pos>4)){for(;t<3;++t){if(this.pos>=this.len)throw s(this);if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(127&this.buf[this.pos++])<<7*t)>>>0,e}for(;t<4;++t)if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(127&this.buf[this.pos])<<28)>>>0,e.hi=(e.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return e;if(t=0,this.len-this.pos>4){for(;t<5;++t)if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}else for(;t<5;++t){if(this.pos>=this.len)throw s(this);if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}function f(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}function h(){if(this.pos+8>this.len)throw s(this,8);return new o(f(this.buf,this.pos+=4),f(this.buf,this.pos+=4))}c.create=u(),c.prototype._slice=i.Array.prototype.subarray||i.Array.prototype.slice,c.prototype.uint32=function(){var e=4294967295;return function(){if(e=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return e;if(e=(e|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return e;if(e=(e|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return e;if(e=(e|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return e;if(e=(e|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return e;if((this.pos+=5)>this.len)throw this.pos=this.len,s(this,10);return e}}(),c.prototype.int32=function(){return 0|this.uint32()},c.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(1&e)|0},c.prototype.bool=function(){return 0!==this.uint32()},c.prototype.fixed32=function(){if(this.pos+4>this.len)throw s(this,4);return f(this.buf,this.pos+=4)},c.prototype.sfixed32=function(){if(this.pos+4>this.len)throw s(this,4);return 0|f(this.buf,this.pos+=4)},c.prototype.float=function(){if(this.pos+4>this.len)throw s(this,4);var e=i.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e},c.prototype.double=function(){if(this.pos+8>this.len)throw s(this,4);var e=i.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e},c.prototype.bytes=function(){var e=this.uint32(),t=this.pos,n=this.pos+e;if(n>this.len)throw s(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(t,n):t===n?new this.buf.constructor(0):this._slice.call(this.buf,t,n)},c.prototype.string=function(){var e=this.bytes();return a.read(e,0,e.length)},c.prototype.skip=function(e){if("number"==typeof e){if(this.pos+e>this.len)throw s(this,e);this.pos+=e}else do{if(this.pos>=this.len)throw s(this)}while(128&this.buf[this.pos++]);return this},c.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(e=7&this.uint32());)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this},c._configure=function(e){r=e,c.create=u(),r._configure();var t=i.Long?"toLong":"toNumber";i.merge(c.prototype,{int64:function(){return d.call(this)[t](!1)},uint64:function(){return d.call(this)[t](!0)},sint64:function(){return d.call(this).zzDecode()[t](!1)},fixed64:function(){return h.call(this)[t](!0)},sfixed64:function(){return h.call(this)[t](!1)}})}},function(e,t,n){"use strict";e.exports=a;var r=n(37);((a.prototype=Object.create(r.prototype)).constructor=a).className="OneOf";var i=n(38),o=n(14);function a(e,t,n,i){if(Array.isArray(t)||(n=t,t=void 0),r.call(this,e,n),void 0!==t&&!Array.isArray(t))throw TypeError("fieldNames must be an Array");this.oneof=t||[],this.fieldsArray=[],this.comment=i}function s(e){if(e.parent)for(var t=0;t<e.fieldsArray.length;++t)e.fieldsArray[t].parent||e.parent.add(e.fieldsArray[t])}a.fromJSON=function(e,t){return new a(e,t.oneof,t.options,t.comment)},a.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return o.toObject(["options",this.options,"oneof",this.oneof,"comment",t?this.comment:void 0])},a.prototype.add=function(e){if(!(e instanceof i))throw TypeError("field must be a Field");return e.parent&&e.parent!==this.parent&&e.parent.remove(e),this.oneof.push(e.name),this.fieldsArray.push(e),e.partOf=this,s(this),this},a.prototype.remove=function(e){if(!(e instanceof i))throw TypeError("field must be a Field");var t=this.fieldsArray.indexOf(e);if(t<0)throw Error(e+" is not a member of "+this);return this.fieldsArray.splice(t,1),(t=this.oneof.indexOf(e.name))>-1&&this.oneof.splice(t,1),e.partOf=null,this},a.prototype.onAdd=function(e){r.prototype.onAdd.call(this,e);for(var t=0;t<this.oneof.length;++t){var n=e.get(this.oneof[t]);n&&!n.partOf&&(n.partOf=this,this.fieldsArray.push(n))}s(this)},a.prototype.onRemove=function(e){for(var t,n=0;n<this.fieldsArray.length;++n)(t=this.fieldsArray[n]).parent&&t.parent.remove(t);r.prototype.onRemove.call(this,e)},a.d=function(){for(var e=new Array(arguments.length),t=0;t<arguments.length;)e[t]=arguments[t++];return function(t,n){o.decorateType(t.constructor).add(new a(n,e)),Object.defineProperty(t,n,{get:o.oneOfGetter(e),set:o.oneOfSetter(e)})}}},function(e,t,n){"use strict";e.exports=i;var r=n(25);function i(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)this[t[n]]=e[t[n]]}i.create=function(e){return this.$type.create(e)},i.encode=function(e,t){return this.$type.encode(e,t)},i.encodeDelimited=function(e,t){return this.$type.encodeDelimited(e,t)},i.decode=function(e){return this.$type.decode(e)},i.decodeDelimited=function(e){return this.$type.decodeDelimited(e)},i.verify=function(e){return this.$type.verify(e)},i.fromObject=function(e){return this.$type.fromObject(e)},i.toObject=function(e,t){return this.$type.toObject(e,t)},i.prototype.toJSON=function(){return this.$type.toObject(this,r.toJSONOptions)}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,null,[{key:"toJSON",value:function(e){var t;return Object.assign(Object.assign({},e),{createdAt:null===(t=e.createdAt)||void 0===t?void 0:t.toISOString(),attributes:e.attributes?JSON.stringify(e.attributes):null})}},{key:"fromJSON",value:function(e){return Object.assign(Object.assign({},e),{createdAt:new Date(e.createdAt),attributes:e.attributes?JSON.parse(e.attributes):null})}}]),n}(r(n(31)).default);t.default=i,i.DESCRIPTOR_NAME="CommentDescriptor",i.DESCRIPTOR={fields:{commentId:{id:1,type:"string"},commentThreadId:{id:2,type:"string"},userId:{id:3,type:"string"},content:{id:4,type:"string"},documentId:{id:5,type:"string"},createdAt:{id:6,type:"string"},attributes:{id:7,type:"string"}}}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(31)),o=r(n(75)),a=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,null,[{key:"toJSON",value:function(e){var t;return Object.assign(Object.assign({},e),{comments:null===(t=e.comments)||void 0===t?void 0:t.map(o.default.toJSON)})}},{key:"fromJSON",value:function(e){var t;return Object.assign(Object.assign({},e),{comments:null===(t=e.comments)||void 0===t?void 0:t.map(o.default.fromJSON)})}}]),n}(i.default);t.default=a,a.DESCRIPTOR_NAME="CommentsThreadDescriptor",a.DESCRIPTOR={fields:{commentThreadId:{type:"string",id:1},comments:{type:"CommentDescriptor",rule:"repeated",id:2}}}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,null,[{key:"toJSON",value:function(e){var t;return Object.assign(Object.assign({},e),{data:e.data?JSON.stringify(e.data):e.data,attributes:e.attributes?JSON.stringify(e.attributes):e.attributes,createdAt:null===(t=e.createdAt)||void 0===t?void 0:t.toISOString()})}},{key:"fromJSON",value:function(e){return Object.assign(Object.assign({},e),{data:e.data?JSON.parse(e.data):e.data,attributes:e.attributes?JSON.parse(e.attributes):e.attributes,createdAt:e.createdAt?new Date(e.createdAt):void 0})}}]),n}(r(n(31)).default);t.default=i,i.DESCRIPTOR_NAME="SuggestionDescriptor",i.DESCRIPTOR={fields:{id:{id:1,type:"string"},authorId:{id:2,type:"string"},type:{id:3,type:"string"},createdAt:{id:4,type:"string"},data:{id:5,type:"string"},hasComments:{id:6,type:"bool"},state:{id:7,type:"string"},attributes:{id:8,type:"string"}}}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(357));t._SERVICE=3,t.default=function(){function e(){_classCallCheck(this,e)}var t;return _createClass(e,null,[{key:"getConnectedSessions",value:(t=_asyncToGenerator(regeneratorRuntime.mark((function e(t,n,r){var o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=new i.default(n,r),e.next=3,o.connect(t);case 3:return e.abrupt("return",o);case 4:case"end":return e.stop()}}),e)}))),function(e,n,r){return t.apply(this,arguments)})}]),e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"prepareMetadataForOperations",value:function(e,t){if(!(e&&e.length&&t&&t.length))return[];var n,r=[],i=0,o=_createForOfIteratorHelper(e);try{for(o.s();!(n=o.n()).done;){if(0!==n.value){if(!t[i])throw new Error("Missing metadata for a operation");r.push(t[i]),i++}else r.push(r[r.length-1])}}catch(a){o.e(a)}finally{o.f()}return r}},{key:"removeUnnecessaryMetadata",value:function(e,t){if(!(e&&e.length&&t&&t.length))return[];for(var n=[],r=0;r<e.length;r++)if(0!==e[r]){if(!t[r])throw new Error("Missing metadata for a operation");n.push(t[r])}return n}}]),e}()},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(54));t.default=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){return _classCallCheck(this,n),t.call(this,e+" Service is not connected.",r)}return n}(i.default)},function(e,t,n){"use strict";e.exports=n(306)},function(e,t){e.exports='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m5.042 9.367 2.189 1.837a.75.75 0 0 1-.965 1.149l-3.788-3.18a.747.747 0 0 1-.21-.284.75.75 0 0 1 .17-.945L6.23 4.762a.75.75 0 1 1 .964 1.15L4.863 7.866h8.917A.75.75 0 0 1 14 7.9a4 4 0 1 1-1.477 7.718l.344-1.489a2.5 2.5 0 1 0 1.094-4.73l.008-.032H5.042z"/></svg>'},function(e,t){e.exports='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m14.958 9.367-2.189 1.837a.75.75 0 0 0 .965 1.149l3.788-3.18a.747.747 0 0 0 .21-.284.75.75 0 0 0-.17-.945L13.77 4.762a.75.75 0 1 0-.964 1.15l2.331 1.955H6.22A.75.75 0 0 0 6 7.9a4 4 0 1 0 1.477 7.718l-.344-1.489A2.5 2.5 0 1 1 6.039 9.4l-.008-.032h8.927z"/></svg>'},function(e,t,n){var r=n(2),i=n(232);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]),r(i,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=i.locals||{}},function(e,t){var n=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,r=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];e.exports=function(e){var t=e,i=e.indexOf("["),o=e.indexOf("]");-1!=i&&-1!=o&&(e=e.substring(0,i)+e.substring(i,o).replace(/:/g,";")+e.substring(o,e.length));for(var a=n.exec(e||""),s={},c=14;c--;)s[r[c]]=a[c]||"";return-1!=i&&-1!=o&&(s.source=t,s.host=s.host.substring(1,s.host.length-1).replace(/;/g,":"),s.authority=s.authority.replace("[","").replace("]","").replace(/;/g,":"),s.ipv6uri=!0),s.pathNames=function(e,t){var n=t.replace(/\/{2,9}/g,"/").split("/");return"/"!=t.substr(0,1)&&0!==t.length||n.splice(0,1),"/"==t.substr(t.length-1,1)&&n.splice(n.length-1,1),n}(0,s.path),s.queryKey=function(e,t){var n={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,(function(e,t,r){t&&(n[t]=r)})),n}(0,s.query),s}},function(e,t,n){(function(t){e.exports=function(e){return n&&t.isBuffer(e)||r&&(e instanceof ArrayBuffer||i(e))};var n="function"==typeof t&&"function"==typeof t.isBuffer,r="function"==typeof ArrayBuffer,i=function(e){return"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer}}).call(this,n(51).Buffer)},function(e,t,n){var r=n(286),i=n(93),o=n(35),a=n(67),s=n(94),c=n(95),l=n(24)("socket.io-client:manager"),u=n(92),d=n(300),f=Object.prototype.hasOwnProperty;function h(e,t){if(!(this instanceof h))return new h(e,t);e&&"object"==typeof e&&(t=e,e=void 0),(t=t||{}).path=t.path||"/socket.io",this.nsps={},this.subs=[],this.opts=t,this.reconnection(!1!==t.reconnection),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor(t.randomizationFactor||.5),this.backoff=new d({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==t.timeout?2e4:t.timeout),this.readyState="closed",this.uri=e,this.connecting=[],this.lastPing=null,this.encoding=!1,this.packetBuffer=[];var n=t.parser||a;this.encoder=new n.Encoder,this.decoder=new n.Decoder,this.autoConnect=!1!==t.autoConnect,this.autoConnect&&this.open()}e.exports=h,h.prototype.emitAll=function(){for(var e in this.emit.apply(this,arguments),this.nsps)f.call(this.nsps,e)&&this.nsps[e].emit.apply(this.nsps[e],arguments)},h.prototype.updateSocketIds=function(){for(var e in this.nsps)f.call(this.nsps,e)&&(this.nsps[e].id=this.generateId(e))},h.prototype.generateId=function(e){return("/"===e?"":e+"#")+this.engine.id},o(h.prototype),h.prototype.reconnection=function(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection},h.prototype.reconnectionAttempts=function(e){return arguments.length?(this._reconnectionAttempts=e,this):this._reconnectionAttempts},h.prototype.reconnectionDelay=function(e){return arguments.length?(this._reconnectionDelay=e,this.backoff&&this.backoff.setMin(e),this):this._reconnectionDelay},h.prototype.randomizationFactor=function(e){return arguments.length?(this._randomizationFactor=e,this.backoff&&this.backoff.setJitter(e),this):this._randomizationFactor},h.prototype.reconnectionDelayMax=function(e){return arguments.length?(this._reconnectionDelayMax=e,this.backoff&&this.backoff.setMax(e),this):this._reconnectionDelayMax},h.prototype.timeout=function(e){return arguments.length?(this._timeout=e,this):this._timeout},h.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()},h.prototype.open=h.prototype.connect=function(e,t){if(l("readyState %s",this.readyState),~this.readyState.indexOf("open"))return this;l("opening %s",this.uri),this.engine=r(this.uri,this.opts);var n=this.engine,i=this;this.readyState="opening",this.skipReconnect=!1;var o=s(n,"open",(function(){i.onopen(),e&&e()})),a=s(n,"error",(function(t){if(l("connect_error"),i.cleanup(),i.readyState="closed",i.emitAll("connect_error",t),e){var n=new Error("Connection error");n.data=t,e(n)}else i.maybeReconnectOnOpen()}));if(!1!==this._timeout){var c=this._timeout;l("connect attempt will timeout after %d",c),0===c&&o.destroy();var u=setTimeout((function(){l("connect attempt timed out after %d",c),o.destroy(),n.close(),n.emit("error","timeout"),i.emitAll("connect_timeout",c)}),c);this.subs.push({destroy:function(){clearTimeout(u)}})}return this.subs.push(o),this.subs.push(a),this},h.prototype.onopen=function(){l("open"),this.cleanup(),this.readyState="open",this.emit("open");var e=this.engine;this.subs.push(s(e,"data",c(this,"ondata"))),this.subs.push(s(e,"ping",c(this,"onping"))),this.subs.push(s(e,"pong",c(this,"onpong"))),this.subs.push(s(e,"error",c(this,"onerror"))),this.subs.push(s(e,"close",c(this,"onclose"))),this.subs.push(s(this.decoder,"decoded",c(this,"ondecoded")))},h.prototype.onping=function(){this.lastPing=new Date,this.emitAll("ping")},h.prototype.onpong=function(){this.emitAll("pong",new Date-this.lastPing)},h.prototype.ondata=function(e){this.decoder.add(e)},h.prototype.ondecoded=function(e){this.emit("packet",e)},h.prototype.onerror=function(e){l("error",e),this.emitAll("error",e)},h.prototype.socket=function(e,t){var n=this.nsps[e];if(!n){n=new i(this,e,t),this.nsps[e]=n;var r=this;n.on("connecting",o),n.on("connect",(function(){n.id=r.generateId(e)})),this.autoConnect&&o()}function o(){~u(r.connecting,n)||r.connecting.push(n)}return n},h.prototype.destroy=function(e){var t=u(this.connecting,e);~t&&this.connecting.splice(t,1),this.connecting.length||this.close()},h.prototype.packet=function(e){l("writing packet %j",e);var t=this;e.query&&0===e.type&&(e.nsp+="?"+e.query),t.encoding?t.packetBuffer.push(e):(t.encoding=!0,this.encoder.encode(e,(function(n){for(var r=0;r<n.length;r++)t.engine.write(n[r],e.options);t.encoding=!1,t.processPacketQueue()})))},h.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var e=this.packetBuffer.shift();this.packet(e)}},h.prototype.cleanup=function(){l("cleanup");for(var e=this.subs.length,t=0;t<e;t++)this.subs.shift().destroy();this.packetBuffer=[],this.encoding=!1,this.lastPing=null,this.decoder.destroy()},h.prototype.close=h.prototype.disconnect=function(){l("disconnect"),this.skipReconnect=!0,this.reconnecting=!1,"opening"===this.readyState&&this.cleanup(),this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()},h.prototype.onclose=function(e){l("onclose"),this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",e),this._reconnection&&!this.skipReconnect&&this.reconnect()},h.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var e=this;if(this.backoff.attempts>=this._reconnectionAttempts)l("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var t=this.backoff.duration();l("will wait %dms before reconnect attempt",t),this.reconnecting=!0;var n=setTimeout((function(){e.skipReconnect||(l("attempting reconnect"),e.emitAll("reconnect_attempt",e.backoff.attempts),e.emitAll("reconnecting",e.backoff.attempts),e.skipReconnect||e.open((function(t){t?(l("reconnect attempt error"),e.reconnecting=!1,e.reconnect(),e.emitAll("reconnect_error",t.data)):(l("reconnect success"),e.onreconnect())})))}),t);this.subs.push({destroy:function(){clearTimeout(n)}})}},h.prototype.onreconnect=function(){var e=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",e)}},function(e,t,n){var r=n(68),i=n(289),o=n(296),a=n(297);t.polling=function(e){var t=!1,n=!1,a=!1!==e.jsonp;if("undefined"!=typeof location){var s="https:"===location.protocol,c=location.port;c||(c=s?443:80),t=e.hostname!==location.hostname||c!==e.port,n=e.secure!==s}if(e.xdomain=t,e.xscheme=n,"open"in new r(e)&&!e.forceJSONP)return new i(e);if(!a)throw new Error("JSONP disabled");return new o(e)},t.websocket=a},function(e,t,n){var r=n(70),i=n(57),o=n(36),a=n(58),s=n(91),c=n(24)("engine.io-client:polling");e.exports=u;var l=null!=new(n(68))({xdomain:!1}).responseType;function u(e){l&&!(e&&e.forceBase64)||(this.supportsBinary=!1),r.call(this,e)}a(u,r),u.prototype.name="polling",u.prototype.doOpen=function(){this.poll()},u.prototype.pause=function(e){var t=this;function n(){c("paused"),t.readyState="paused",e()}if(this.readyState="pausing",this.polling||!this.writable){var r=0;this.polling&&(c("we are currently polling - waiting to pause"),r++,this.once("pollComplete",(function(){c("pre-pause polling complete"),--r||n()}))),this.writable||(c("we are currently writing - waiting to pause"),r++,this.once("drain",(function(){c("pre-pause writing complete"),--r||n()})))}else n()},u.prototype.poll=function(){c("polling"),this.polling=!0,this.doPoll(),this.emit("poll")},u.prototype.onData=function(e){var t=this;c("polling got data %s",e),o.decodePayload(e,this.socket.binaryType,(function(e,n,r){if("opening"===t.readyState&&"open"===e.type&&t.onOpen(),"close"===e.type)return t.onClose(),!1;t.onPacket(e)})),"closed"!==this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"===this.readyState?this.poll():c('ignoring poll - transport state "%s"',this.readyState))},u.prototype.doClose=function(){var e=this;function t(){c("writing close packet"),e.write([{type:"close"}])}"open"===this.readyState?(c("transport open - closing"),t()):(c("transport not open - deferring close"),this.once("open",t))},u.prototype.write=function(e){var t=this;this.writable=!1;var n=function(){t.writable=!0,t.emit("drain")};o.encodePayload(e,this.supportsBinary,(function(e){t.doWrite(e,n)}))},u.prototype.uri=function(){var e=this.query||{},t=this.secure?"https":"http",n="";return!1!==this.timestampRequests&&(e[this.timestampParam]=s()),this.supportsBinary||e.sid||(e.b64=1),e=i.encode(e),this.port&&("https"===t&&443!==Number(this.port)||"http"===t&&80!==Number(this.port))&&(n=":"+this.port),e.length&&(e="?"+e),t+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+n+this.path+e}},function(e,t,n){(function(t){var r=n(50),i=Object.prototype.toString,o="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===i.call(Blob),a="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===i.call(File);e.exports=function e(n){if(!n||"object"!=typeof n)return!1;if(r(n)){for(var i=0,s=n.length;i<s;i++)if(e(n[i]))return!0;return!1}if("function"==typeof t&&t.isBuffer&&t.isBuffer(n)||"function"==typeof ArrayBuffer&&n instanceof ArrayBuffer||o&&n instanceof Blob||a&&n instanceof File)return!0;if(n.toJSON&&"function"==typeof n.toJSON&&1===arguments.length)return e(n.toJSON(),!0);for(var c in n)if(Object.prototype.hasOwnProperty.call(n,c)&&e(n[c]))return!0;return!1}}).call(this,n(51).Buffer)},function(e,t,n){"use strict";var r,i="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),o={},a=0,s=0;function c(e){var t="";do{t=i[e%64]+t,e=Math.floor(e/64)}while(e>0);return t}function l(){var e=c(+new Date);return e!==r?(a=0,r=e):e+"."+c(a++)}for(;s<64;s++)o[i[s]]=s;l.encode=c,l.decode=function(e){var t=0;for(s=0;s<e.length;s++)t=64*t+o[e.charAt(s)];return t},e.exports=l},function(e,t){var n=[].indexOf;e.exports=function(e,t){if(n)return e.indexOf(t);for(var r=0;r<e.length;++r)if(e[r]===t)return r;return-1}},function(e,t,n){var r=n(67),i=n(35),o=n(299),a=n(94),s=n(95),c=n(24)("socket.io-client:socket"),l=n(57),u=n(90);e.exports=h;var d={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1},f=i.prototype.emit;function h(e,t,n){this.io=e,this.nsp=t,this.json=this,this.ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,this.flags={},n&&n.query&&(this.query=n.query),this.io.autoConnect&&this.open()}i(h.prototype),h.prototype.subEvents=function(){if(!this.subs){var e=this.io;this.subs=[a(e,"open",s(this,"onopen")),a(e,"packet",s(this,"onpacket")),a(e,"close",s(this,"onclose"))]}},h.prototype.open=h.prototype.connect=function(){return this.connected||(this.subEvents(),this.io.reconnecting||this.io.open(),"open"===this.io.readyState&&this.onopen(),this.emit("connecting")),this},h.prototype.send=function(){var e=o(arguments);return e.unshift("message"),this.emit.apply(this,e),this},h.prototype.emit=function(e){if(d.hasOwnProperty(e))return f.apply(this,arguments),this;var t=o(arguments),n={type:(void 0!==this.flags.binary?this.flags.binary:u(t))?r.BINARY_EVENT:r.EVENT,data:t,options:{}};return n.options.compress=!this.flags||!1!==this.flags.compress,"function"==typeof t[t.length-1]&&(c("emitting packet with ack id %d",this.ids),this.acks[this.ids]=t.pop(),n.id=this.ids++),this.connected?this.packet(n):this.sendBuffer.push(n),this.flags={},this},h.prototype.packet=function(e){e.nsp=this.nsp,this.io.packet(e)},h.prototype.onopen=function(){if(c("transport is open - connecting"),"/"!==this.nsp)if(this.query){var e="object"==typeof this.query?l.encode(this.query):this.query;c("sending connect packet with query %s",e),this.packet({type:r.CONNECT,query:e})}else this.packet({type:r.CONNECT})},h.prototype.onclose=function(e){c("close (%s)",e),this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",e)},h.prototype.onpacket=function(e){if(e.nsp===this.nsp||e.type===r.ERROR&&"/"===e.nsp)switch(e.type){case r.CONNECT:this.onconnect();break;case r.EVENT:case r.BINARY_EVENT:this.onevent(e);break;case r.ACK:case r.BINARY_ACK:this.onack(e);break;case r.DISCONNECT:this.ondisconnect();break;case r.ERROR:this.emit("error",e.data)}},h.prototype.onevent=function(e){var t=e.data||[];c("emitting event %j",t),null!=e.id&&(c("attaching ack callback to event"),t.push(this.ack(e.id))),this.connected?f.apply(this,t):this.receiveBuffer.push(t)},h.prototype.ack=function(e){var t=this,n=!1;return function(){if(!n){n=!0;var i=o(arguments);c("sending ack %j",i),t.packet({type:u(i)?r.BINARY_ACK:r.ACK,id:e,data:i})}}},h.prototype.onack=function(e){var t=this.acks[e.id];"function"==typeof t?(c("calling ack %s with %j",e.id,e.data),t.apply(this,e.data),delete this.acks[e.id]):c("bad ack %s",e.id)},h.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},h.prototype.emitBuffered=function(){var e;for(e=0;e<this.receiveBuffer.length;e++)f.apply(this,this.receiveBuffer[e]);for(this.receiveBuffer=[],e=0;e<this.sendBuffer.length;e++)this.packet(this.sendBuffer[e]);this.sendBuffer=[]},h.prototype.ondisconnect=function(){c("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},h.prototype.destroy=function(){if(this.subs){for(var e=0;e<this.subs.length;e++)this.subs[e].destroy();this.subs=null}this.io.destroy(this)},h.prototype.close=h.prototype.disconnect=function(){return this.connected&&(c("performing disconnect (%s)",this.nsp),this.packet({type:r.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this},h.prototype.compress=function(e){return this.flags.compress=e,this},h.prototype.binary=function(e){return this.flags.binary=e,this}},function(e,t){e.exports=function(e,t,n){return e.on(t,n),{destroy:function(){e.removeListener(t,n)}}}},function(e,t){var n=[].slice;e.exports=function(e,t){if("string"==typeof t&&(t=e[t]),"function"!=typeof t)throw new Error("bind() requires a function");var r=n.call(arguments,2);return function(){return t.apply(e,r.concat(n.call(arguments)))}}},function(e,t,n){"use strict";e.exports=function(e,t){for(var n=new Array(arguments.length-1),r=0,i=2,o=!0;i<arguments.length;)n[r++]=arguments[i++];return new Promise((function(i,a){n[r]=function(e){if(o)if(o=!1,e)a(e);else{for(var t=new Array(arguments.length-1),n=0;n<t.length;)t[n++]=arguments[n];i.apply(null,t)}};try{e.apply(t||null,n)}catch(e){o&&(o=!1,a(e))}}))}},function(module,exports,__webpack_require__){"use strict";function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(t){}return null}module.exports=inquire},function(e,t,n){"use strict";t.Service=n(316)},function(e,t,n){"use strict";e.exports={}},function(e,t,n){"use strict";e.exports=function(e){for(var t,n=o.codegen(["m","w"],e.name+"$encode")("if(!w)")("w=Writer.create()"),s=e.fieldsArray.slice().sort(o.compareFieldsById),c=0;c<s.length;++c){var l=s[c].resolve(),u=e._fieldsArray.indexOf(l),d=l.resolvedType instanceof r?"int32":l.type,f=i.basic[d];t="m"+o.safeProp(l.name),l.map?(n("if(%s!=null&&Object.hasOwnProperty.call(m,%j)){",t,l.name)("for(var ks=Object.keys(%s),i=0;i<ks.length;++i){",t)("w.uint32(%i).fork().uint32(%i).%s(ks[i])",(l.id<<3|2)>>>0,8|i.mapKey[l.keyType],l.keyType),void 0===f?n("types[%i].encode(%s[ks[i]],w.uint32(18).fork()).ldelim().ldelim()",u,t):n(".uint32(%i).%s(%s[ks[i]]).ldelim()",16|f,d,t),n("}")("}")):l.repeated?(n("if(%s!=null&&%s.length){",t,t),l.packed&&void 0!==i.packed[d]?n("w.uint32(%i).fork()",(l.id<<3|2)>>>0)("for(var i=0;i<%s.length;++i)",t)("w.%s(%s[i])",d,t)("w.ldelim()"):(n("for(var i=0;i<%s.length;++i)",t),void 0===f?a(n,l,u,t+"[i]"):n("w.uint32(%i).%s(%s[i])",(l.id<<3|f)>>>0,d,t)),n("}")):(l.optional&&n("if(%s!=null&&Object.hasOwnProperty.call(m,%j))",t,l.name),void 0===f?a(n,l,u,t):n("w.uint32(%i).%s(%s)",(l.id<<3|f)>>>0,d,t))}return n("return w")};var r=n(26),i=n(53),o=n(14);function a(e,t,n,r){return t.resolvedType.group?e("types[%i].encode(%s,w.uint32(%i)).uint32(%i)",n,r,(t.id<<3|3)>>>0,(t.id<<3|4)>>>0):e("types[%i].encode(%s,w.uint32(%i).fork()).ldelim()",n,r,(t.id<<3|2)>>>0)}},function(e,t,n){"use strict";e.exports=y;var r=n(52);((y.prototype=Object.create(r.prototype)).constructor=y).className="Type";var i=n(26),o=n(73),a=n(38),s=n(102),c=n(103),l=n(74),u=n(72),d=n(71),f=n(14),h=n(100),p=n(105),v=n(106),g=n(107),m=n(108);function y(e,t){r.call(this,e,t),this.fields={},this.oneofs=void 0,this.extensions=void 0,this.reserved=void 0,this.group=void 0,this._fieldsById=null,this._fieldsArray=null,this._oneofsArray=null,this._ctor=null}function k(e){return e._fieldsById=e._fieldsArray=e._oneofsArray=null,delete e.encode,delete e.decode,delete e.verify,e}Object.defineProperties(y.prototype,{fieldsById:{get:function(){if(this._fieldsById)return this._fieldsById;this._fieldsById={};for(var e=Object.keys(this.fields),t=0;t<e.length;++t){var n=this.fields[e[t]],r=n.id;if(this._fieldsById[r])throw Error("duplicate id "+r+" in "+this);this._fieldsById[r]=n}return this._fieldsById}},fieldsArray:{get:function(){return this._fieldsArray||(this._fieldsArray=f.toArray(this.fields))}},oneofsArray:{get:function(){return this._oneofsArray||(this._oneofsArray=f.toArray(this.oneofs))}},ctor:{get:function(){return this._ctor||(this.ctor=y.generateConstructor(this)())},set:function(e){var t=e.prototype;t instanceof l||((e.prototype=new l).constructor=e,f.merge(e.prototype,t)),e.$type=e.prototype.$type=this,f.merge(e,l,!0),this._ctor=e;for(var n=0;n<this.fieldsArray.length;++n)this._fieldsArray[n].resolve();var r={};for(n=0;n<this.oneofsArray.length;++n)r[this._oneofsArray[n].resolve().name]={get:f.oneOfGetter(this._oneofsArray[n].oneof),set:f.oneOfSetter(this._oneofsArray[n].oneof)};n&&Object.defineProperties(e.prototype,r)}}}),y.generateConstructor=function(e){for(var t,n=f.codegen(["p"],e.name),r=0;r<e.fieldsArray.length;++r)(t=e._fieldsArray[r]).map?n("this%s={}",f.safeProp(t.name)):t.repeated&&n("this%s=[]",f.safeProp(t.name));return n("if(p)for(var ks=Object.keys(p),i=0;i<ks.length;++i)if(p[ks[i]]!=null)")("this[ks[i]]=p[ks[i]]")},y.fromJSON=function(e,t){var n=new y(e,t.options);n.extensions=t.extensions,n.reserved=t.reserved;for(var l=Object.keys(t.fields),u=0;u<l.length;++u)n.add((void 0!==t.fields[l[u]].keyType?s.fromJSON:a.fromJSON)(l[u],t.fields[l[u]]));if(t.oneofs)for(l=Object.keys(t.oneofs),u=0;u<l.length;++u)n.add(o.fromJSON(l[u],t.oneofs[l[u]]));if(t.nested)for(l=Object.keys(t.nested),u=0;u<l.length;++u){var d=t.nested[l[u]];n.add((void 0!==d.id?a.fromJSON:void 0!==d.fields?y.fromJSON:void 0!==d.values?i.fromJSON:void 0!==d.methods?c.fromJSON:r.fromJSON)(l[u],d))}return t.extensions&&t.extensions.length&&(n.extensions=t.extensions),t.reserved&&t.reserved.length&&(n.reserved=t.reserved),t.group&&(n.group=!0),t.comment&&(n.comment=t.comment),n},y.prototype.toJSON=function(e){var t=r.prototype.toJSON.call(this,e),n=!!e&&Boolean(e.keepComments);return f.toObject(["options",t&&t.options||void 0,"oneofs",r.arrayToJSON(this.oneofsArray,e),"fields",r.arrayToJSON(this.fieldsArray.filter((function(e){return!e.declaringField})),e)||{},"extensions",this.extensions&&this.extensions.length?this.extensions:void 0,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"group",this.group||void 0,"nested",t&&t.nested||void 0,"comment",n?this.comment:void 0])},y.prototype.resolveAll=function(){for(var e=this.fieldsArray,t=0;t<e.length;)e[t++].resolve();var n=this.oneofsArray;for(t=0;t<n.length;)n[t++].resolve();return r.prototype.resolveAll.call(this)},y.prototype.get=function(e){return this.fields[e]||this.oneofs&&this.oneofs[e]||this.nested&&this.nested[e]||null},y.prototype.add=function(e){if(this.get(e.name))throw Error("duplicate name '"+e.name+"' in "+this);if(e instanceof a&&void 0===e.extend){if(this._fieldsById?this._fieldsById[e.id]:this.fieldsById[e.id])throw Error("duplicate id "+e.id+" in "+this);if(this.isReservedId(e.id))throw Error("id "+e.id+" is reserved in "+this);if(this.isReservedName(e.name))throw Error("name '"+e.name+"' is reserved in "+this);return e.parent&&e.parent.remove(e),this.fields[e.name]=e,e.message=this,e.onAdd(this),k(this)}return e instanceof o?(this.oneofs||(this.oneofs={}),this.oneofs[e.name]=e,e.onAdd(this),k(this)):r.prototype.add.call(this,e)},y.prototype.remove=function(e){if(e instanceof a&&void 0===e.extend){if(!this.fields||this.fields[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.fields[e.name],e.parent=null,e.onRemove(this),k(this)}if(e instanceof o){if(!this.oneofs||this.oneofs[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.oneofs[e.name],e.parent=null,e.onRemove(this),k(this)}return r.prototype.remove.call(this,e)},y.prototype.isReservedId=function(e){return r.isReservedId(this.reserved,e)},y.prototype.isReservedName=function(e){return r.isReservedName(this.reserved,e)},y.prototype.create=function(e){return new this.ctor(e)},y.prototype.setup=function(){for(var e=this.fullName,t=[],n=0;n<this.fieldsArray.length;++n)t.push(this._fieldsArray[n].resolve().resolvedType);this.encode=h(this)({Writer:d,types:t,util:f}),this.decode=p(this)({Reader:u,types:t,util:f}),this.verify=v(this)({types:t,util:f}),this.fromObject=g.fromObject(this)({types:t,util:f}),this.toObject=g.toObject(this)({types:t,util:f});var r=m[e];if(r){var i=Object.create(this);i.fromObject=this.fromObject,this.fromObject=r.fromObject.bind(i),i.toObject=this.toObject,this.toObject=r.toObject.bind(i)}return this},y.prototype.encode=function(e,t){return this.setup().encode(e,t)},y.prototype.encodeDelimited=function(e,t){return this.encode(e,t&&t.len?t.fork():t).ldelim()},y.prototype.decode=function(e,t){return this.setup().decode(e,t)},y.prototype.decodeDelimited=function(e){return e instanceof u||(e=u.create(e)),this.decode(e,e.uint32())},y.prototype.verify=function(e){return this.setup().verify(e)},y.prototype.fromObject=function(e){return this.setup().fromObject(e)},y.prototype.toObject=function(e,t){return this.setup().toObject(e,t)},y.d=function(e){return function(t){f.decorateType(t,e)}}},function(e,t,n){"use strict";e.exports=a;var r=n(38);((a.prototype=Object.create(r.prototype)).constructor=a).className="MapField";var i=n(53),o=n(14);function a(e,t,n,i,a,s){if(r.call(this,e,t,i,void 0,void 0,a,s),!o.isString(n))throw TypeError("keyType must be a string");this.keyType=n,this.resolvedKeyType=null,this.map=!0}a.fromJSON=function(e,t){return new a(e,t.id,t.keyType,t.type,t.options,t.comment)},a.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return o.toObject(["keyType",this.keyType,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",t?this.comment:void 0])},a.prototype.resolve=function(){if(this.resolved)return this;if(void 0===i.mapKey[this.keyType])throw Error("invalid key type: "+this.keyType);return r.prototype.resolve.call(this)},a.d=function(e,t,n){return"function"==typeof n?n=o.decorateType(n).name:n&&"object"==typeof n&&(n=o.decorateEnum(n).name),function(r,i){o.decorateType(r.constructor).add(new a(i,e,t,n))}}},function(e,t,n){"use strict";e.exports=s;var r=n(52);((s.prototype=Object.create(r.prototype)).constructor=s).className="Service";var i=n(104),o=n(14),a=n(98);function s(e,t){r.call(this,e,t),this.methods={},this._methodsArray=null}function c(e){return e._methodsArray=null,e}s.fromJSON=function(e,t){var n=new s(e,t.options);if(t.methods)for(var r=Object.keys(t.methods),o=0;o<r.length;++o)n.add(i.fromJSON(r[o],t.methods[r[o]]));return t.nested&&n.addJSON(t.nested),n.comment=t.comment,n},s.prototype.toJSON=function(e){var t=r.prototype.toJSON.call(this,e),n=!!e&&Boolean(e.keepComments);return o.toObject(["options",t&&t.options||void 0,"methods",r.arrayToJSON(this.methodsArray,e)||{},"nested",t&&t.nested||void 0,"comment",n?this.comment:void 0])},Object.defineProperty(s.prototype,"methodsArray",{get:function(){return this._methodsArray||(this._methodsArray=o.toArray(this.methods))}}),s.prototype.get=function(e){return this.methods[e]||r.prototype.get.call(this,e)},s.prototype.resolveAll=function(){for(var e=this.methodsArray,t=0;t<e.length;++t)e[t].resolve();return r.prototype.resolve.call(this)},s.prototype.add=function(e){if(this.get(e.name))throw Error("duplicate name '"+e.name+"' in "+this);return e instanceof i?(this.methods[e.name]=e,e.parent=this,c(this)):r.prototype.add.call(this,e)},s.prototype.remove=function(e){if(e instanceof i){if(this.methods[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.methods[e.name],e.parent=null,c(this)}return r.prototype.remove.call(this,e)},s.prototype.create=function(e,t,n){for(var r,i=new a.Service(e,t,n),s=0;s<this.methodsArray.length;++s){var c=o.lcFirst((r=this._methodsArray[s]).resolve().name).replace(/[^$\w_]/g,"");i[c]=o.codegen(["r","c"],o.isReserved(c)?c+"_":c)("return this.rpcCall(m,q,s,r,c)")({m:r,q:r.resolvedRequestType.ctor,s:r.resolvedResponseType.ctor})}return i}},function(e,t,n){"use strict";e.exports=o;var r=n(37);((o.prototype=Object.create(r.prototype)).constructor=o).className="Method";var i=n(14);function o(e,t,n,o,a,s,c,l,u){if(i.isObject(a)?(c=a,a=s=void 0):i.isObject(s)&&(c=s,s=void 0),void 0!==t&&!i.isString(t))throw TypeError("type must be a string");if(!i.isString(n))throw TypeError("requestType must be a string");if(!i.isString(o))throw TypeError("responseType must be a string");r.call(this,e,c),this.type=t||"rpc",this.requestType=n,this.requestStream=!!a||void 0,this.responseType=o,this.responseStream=!!s||void 0,this.resolvedRequestType=null,this.resolvedResponseType=null,this.comment=l,this.parsedOptions=u}o.fromJSON=function(e,t){return new o(e,t.type,t.requestType,t.responseType,t.requestStream,t.responseStream,t.options,t.comment,t.parsedOptions)},o.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return i.toObject(["type","rpc"!==this.type&&this.type||void 0,"requestType",this.requestType,"requestStream",this.requestStream,"responseType",this.responseType,"responseStream",this.responseStream,"options",this.options,"comment",t?this.comment:void 0,"parsedOptions",this.parsedOptions])},o.prototype.resolve=function(){return this.resolved?this:(this.resolvedRequestType=this.parent.lookupType(this.requestType),this.resolvedResponseType=this.parent.lookupType(this.responseType),r.prototype.resolve.call(this))}},function(e,t,n){"use strict";e.exports=function(e){var t=o.codegen(["r","l"],e.name+"$decode")("if(!(r instanceof Reader))")("r=Reader.create(r)")("var c=l===undefined?r.len:r.pos+l,m=new this.ctor"+(e.fieldsArray.filter((function(e){return e.map})).length?",k,value":""))("while(r.pos<c){")("var t=r.uint32()");e.group&&t("if((t&7)===4)")("break"),t("switch(t>>>3){");for(var n=0;n<e.fieldsArray.length;++n){var s=e._fieldsArray[n].resolve(),c=s.resolvedType instanceof r?"int32":s.type,l="m"+o.safeProp(s.name);t("case %i:",s.id),s.map?(t("if(%s===util.emptyObject)",l)("%s={}",l)("var c2 = r.uint32()+r.pos"),void 0!==i.defaults[s.keyType]?t("k=%j",i.defaults[s.keyType]):t("k=null"),void 0!==i.defaults[c]?t("value=%j",i.defaults[c]):t("value=null"),t("while(r.pos<c2){")("var tag2=r.uint32()")("switch(tag2>>>3){")("case 1: k=r.%s(); break",s.keyType)("case 2:"),void 0===i.basic[c]?t("value=types[%i].decode(r,r.uint32())",n):t("value=r.%s()",c),t("break")("default:")("r.skipType(tag2&7)")("break")("}")("}"),t(void 0!==i.long[s.keyType]?'%s[typeof k==="object"?util.longToHash(k):k]=value':"%s[k]=value",l)):s.repeated?(t("if(!(%s&&%s.length))",l,l)("%s=[]",l),void 0!==i.packed[c]&&t("if((t&7)===2){")("var c2=r.uint32()+r.pos")("while(r.pos<c2)")("%s.push(r.%s())",l,c)("}else"),void 0===i.basic[c]?t(s.resolvedType.group?"%s.push(types[%i].decode(r))":"%s.push(types[%i].decode(r,r.uint32()))",l,n):t("%s.push(r.%s())",l,c)):void 0===i.basic[c]?t(s.resolvedType.group?"%s=types[%i].decode(r)":"%s=types[%i].decode(r,r.uint32())",l,n):t("%s=r.%s()",l,c),t("break")}for(t("default:")("r.skipType(t&7)")("break")("}")("}"),n=0;n<e._fieldsArray.length;++n){var u=e._fieldsArray[n];u.required&&t("if(!m.hasOwnProperty(%j))",u.name)("throw util.ProtocolError(%j,{instance:m})",a(u))}return t("return m")};var r=n(26),i=n(53),o=n(14);function a(e){return"missing required '"+e.name+"'"}},function(e,t,n){"use strict";e.exports=function(e){var t=i.codegen(["m"],e.name+"$verify")('if(typeof m!=="object"||m===null)')("return%j","object expected"),n={};e.oneofsArray.length&&t("var p={}");for(var r=0;r<e.fieldsArray.length;++r){var c=e._fieldsArray[r].resolve(),l="m"+i.safeProp(c.name);if(c.optional&&t("if(%s!=null&&m.hasOwnProperty(%j)){",l,c.name),c.map)t("if(!util.isObject(%s))",l)("return%j",o(c,"object"))("var k=Object.keys(%s)",l)("for(var i=0;i<k.length;++i){"),s(t,c,"k[i]"),a(t,c,r,l+"[k[i]]")("}");else if(c.repeated)t("if(!Array.isArray(%s))",l)("return%j",o(c,"array"))("for(var i=0;i<%s.length;++i){",l),a(t,c,r,l+"[i]")("}");else{if(c.partOf){var u=i.safeProp(c.partOf.name);1===n[c.partOf.name]&&t("if(p%s===1)",u)("return%j",c.partOf.name+": multiple values"),n[c.partOf.name]=1,t("p%s=1",u)}a(t,c,r,l)}c.optional&&t("}")}return t("return null")};var r=n(26),i=n(14);function o(e,t){return e.name+": "+t+(e.repeated&&"array"!==t?"[]":e.map&&"object"!==t?"{k:"+e.keyType+"}":"")+" expected"}function a(e,t,n,i){if(t.resolvedType)if(t.resolvedType instanceof r){e("switch(%s){",i)("default:")("return%j",o(t,"enum value"));for(var a=Object.keys(t.resolvedType.values),s=0;s<a.length;++s)e("case %i:",t.resolvedType.values[a[s]]);e("break")("}")}else e("{")("var e=types[%i].verify(%s);",n,i)("if(e)")("return%j+e",t.name+".")("}");else switch(t.type){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":e("if(!util.isInteger(%s))",i)("return%j",o(t,"integer"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":e("if(!util.isInteger(%s)&&!(%s&&util.isInteger(%s.low)&&util.isInteger(%s.high)))",i,i,i,i)("return%j",o(t,"integer|Long"));break;case"float":case"double":e('if(typeof %s!=="number")',i)("return%j",o(t,"number"));break;case"bool":e('if(typeof %s!=="boolean")',i)("return%j",o(t,"boolean"));break;case"string":e("if(!util.isString(%s))",i)("return%j",o(t,"string"));break;case"bytes":e('if(!(%s&&typeof %s.length==="number"||util.isString(%s)))',i,i,i)("return%j",o(t,"buffer"))}return e}function s(e,t,n){switch(t.keyType){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":e("if(!util.key32Re.test(%s))",n)("return%j",o(t,"integer key"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":e("if(!util.key64Re.test(%s))",n)("return%j",o(t,"integer|Long key"));break;case"bool":e("if(!util.key2Re.test(%s))",n)("return%j",o(t,"boolean key"))}return e}},function(e,t,n){"use strict";var r=t,i=n(26),o=n(14);function a(e,t,n,r){if(t.resolvedType)if(t.resolvedType instanceof i){e("switch(d%s){",r);for(var o=t.resolvedType.values,a=Object.keys(o),s=0;s<a.length;++s)t.repeated&&o[a[s]]===t.typeDefault&&e("default:"),e("case%j:",a[s])("case %i:",o[a[s]])("m%s=%j",r,o[a[s]])("break");e("}")}else e('if(typeof d%s!=="object")',r)("throw TypeError(%j)",t.fullName+": object expected")("m%s=types[%i].fromObject(d%s)",r,n,r);else{var c=!1;switch(t.type){case"double":case"float":e("m%s=Number(d%s)",r,r);break;case"uint32":case"fixed32":e("m%s=d%s>>>0",r,r);break;case"int32":case"sint32":case"sfixed32":e("m%s=d%s|0",r,r);break;case"uint64":c=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":e("if(util.Long)")("(m%s=util.Long.fromValue(d%s)).unsigned=%j",r,r,c)('else if(typeof d%s==="string")',r)("m%s=parseInt(d%s,10)",r,r)('else if(typeof d%s==="number")',r)("m%s=d%s",r,r)('else if(typeof d%s==="object")',r)("m%s=new util.LongBits(d%s.low>>>0,d%s.high>>>0).toNumber(%s)",r,r,r,c?"true":"");break;case"bytes":e('if(typeof d%s==="string")',r)("util.base64.decode(d%s,m%s=util.newBuffer(util.base64.length(d%s)),0)",r,r,r)("else if(d%s.length)",r)("m%s=d%s",r,r);break;case"string":e("m%s=String(d%s)",r,r);break;case"bool":e("m%s=Boolean(d%s)",r,r)}}return e}function s(e,t,n,r){if(t.resolvedType)t.resolvedType instanceof i?e("d%s=o.enums===String?types[%i].values[m%s]:m%s",r,n,r,r):e("d%s=types[%i].toObject(m%s,o)",r,n,r);else{var o=!1;switch(t.type){case"double":case"float":e("d%s=o.json&&!isFinite(m%s)?String(m%s):m%s",r,r,r,r);break;case"uint64":o=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":e('if(typeof m%s==="number")',r)("d%s=o.longs===String?String(m%s):m%s",r,r,r)("else")("d%s=o.longs===String?util.Long.prototype.toString.call(m%s):o.longs===Number?new util.LongBits(m%s.low>>>0,m%s.high>>>0).toNumber(%s):m%s",r,r,r,r,o?"true":"",r);break;case"bytes":e("d%s=o.bytes===String?util.base64.encode(m%s,0,m%s.length):o.bytes===Array?Array.prototype.slice.call(m%s):m%s",r,r,r,r,r);break;default:e("d%s=m%s",r,r)}}return e}r.fromObject=function(e){var t=e.fieldsArray,n=o.codegen(["d"],e.name+"$fromObject")("if(d instanceof this.ctor)")("return d");if(!t.length)return n("return new this.ctor");n("var m=new this.ctor");for(var r=0;r<t.length;++r){var s=t[r].resolve(),c=o.safeProp(s.name);s.map?(n("if(d%s){",c)('if(typeof d%s!=="object")',c)("throw TypeError(%j)",s.fullName+": object expected")("m%s={}",c)("for(var ks=Object.keys(d%s),i=0;i<ks.length;++i){",c),a(n,s,r,c+"[ks[i]]")("}")("}")):s.repeated?(n("if(d%s){",c)("if(!Array.isArray(d%s))",c)("throw TypeError(%j)",s.fullName+": array expected")("m%s=[]",c)("for(var i=0;i<d%s.length;++i){",c),a(n,s,r,c+"[i]")("}")("}")):(s.resolvedType instanceof i||n("if(d%s!=null){",c),a(n,s,r,c),s.resolvedType instanceof i||n("}"))}return n("return m")},r.toObject=function(e){var t=e.fieldsArray.slice().sort(o.compareFieldsById);if(!t.length)return o.codegen()("return {}");for(var n=o.codegen(["m","o"],e.name+"$toObject")("if(!o)")("o={}")("var d={}"),r=[],a=[],c=[],l=0;l<t.length;++l)t[l].partOf||(t[l].resolve().repeated?r:t[l].map?a:c).push(t[l]);if(r.length){for(n("if(o.arrays||o.defaults){"),l=0;l<r.length;++l)n("d%s=[]",o.safeProp(r[l].name));n("}")}if(a.length){for(n("if(o.objects||o.defaults){"),l=0;l<a.length;++l)n("d%s={}",o.safeProp(a[l].name));n("}")}if(c.length){for(n("if(o.defaults){"),l=0;l<c.length;++l){var u=c[l],d=o.safeProp(u.name);if(u.resolvedType instanceof i)n("d%s=o.enums===String?%j:%j",d,u.resolvedType.valuesById[u.typeDefault],u.typeDefault);else if(u.long)n("if(util.Long){")("var n=new util.Long(%i,%i,%j)",u.typeDefault.low,u.typeDefault.high,u.typeDefault.unsigned)("d%s=o.longs===String?n.toString():o.longs===Number?n.toNumber():n",d)("}else")("d%s=o.longs===String?%j:%i",d,u.typeDefault.toString(),u.typeDefault.toNumber());else if(u.bytes){var f="["+Array.prototype.slice.call(u.typeDefault).join(",")+"]";n("if(o.bytes===String)d%s=%j",d,String.fromCharCode.apply(String,u.typeDefault))("else{")("d%s=%s",d,f)("if(o.bytes!==Array)d%s=util.newBuffer(d%s)",d,d)("}")}else n("d%s=%j",d,u.typeDefault)}n("}")}var h=!1;for(l=0;l<t.length;++l){var p=e._fieldsArray.indexOf(u=t[l]);d=o.safeProp(u.name),u.map?(h||(h=!0,n("var ks2")),n("if(m%s&&(ks2=Object.keys(m%s)).length){",d,d)("d%s={}",d)("for(var j=0;j<ks2.length;++j){"),s(n,u,p,d+"[ks2[j]]")("}")):u.repeated?(n("if(m%s&&m%s.length){",d,d)("d%s=[]",d)("for(var j=0;j<m%s.length;++j){",d),s(n,u,p,d+"[j]")("}")):(n("if(m%s!=null&&m.hasOwnProperty(%j)){",d,u.name),s(n,u,p,d),u.partOf&&n("if(o.oneofs)")("d%s=%j",o.safeProp(u.partOf.name),u.name)),n("}")}return n("return d")}},function(e,t,n){"use strict";var r=t,i=n(74);r[".google.protobuf.Any"]={fromObject:function(e){if(e&&e["@type"]){var t=e["@type"].substring(e["@type"].lastIndexOf("/")+1),n=this.lookup(t);if(n){var r="."===e["@type"].charAt(0)?e["@type"].substr(1):e["@type"];return-1===r.indexOf("/")&&(r="/"+r),this.create({type_url:r,value:n.encode(n.fromObject(e)).finish()})}}return this.fromObject(e)},toObject:function(e,t){var n="",r="";if(t&&t.json&&e.type_url&&e.value){r=e.type_url.substring(e.type_url.lastIndexOf("/")+1),n=e.type_url.substring(0,e.type_url.lastIndexOf("/")+1);var o=this.lookup(r);o&&(e=o.decode(e.value))}if(!(e instanceof this.ctor)&&e instanceof i){var a=e.$type.toObject(e,t),s="."===e.$type.fullName[0]?e.$type.fullName.substr(1):e.$type.fullName;return""===n&&(n="type.googleapis.com/"),a["@type"]=r=n+s,a}return this.toObject(e,t)}}},function(e,t,n){"use strict";e.exports=d;var r=n(52);((d.prototype=Object.create(r.prototype)).constructor=d).className="Root";var i,o,a,s=n(38),c=n(26),l=n(73),u=n(14);function d(e){r.call(this,"",e),this.deferred=[],this.files=[]}function f(){}d.fromJSON=function(e,t){return t||(t=new d),e.options&&t.setOptions(e.options),t.addJSON(e.nested)},d.prototype.resolvePath=u.path.resolve,d.prototype.fetch=u.fetch,d.prototype.load=function e(t,n,r){"function"==typeof n&&(r=n,n=void 0);var i=this;if(!r)return u.asPromise(e,i,t,n);var s=r===f;function c(e,t){if(r){var n=r;if(r=null,s)throw e;n(e,t)}}function l(e){var t=e.lastIndexOf("google/protobuf/");if(t>-1){var n=e.substring(t);if(n in a)return n}return null}function d(e,t){try{if(u.isString(t)&&"{"===t.charAt(0)&&(t=JSON.parse(t)),u.isString(t)){o.filename=e;var r,a=o(t,i,n),d=0;if(a.imports)for(;d<a.imports.length;++d)(r=l(a.imports[d])||i.resolvePath(e,a.imports[d]))&&h(r);if(a.weakImports)for(d=0;d<a.weakImports.length;++d)(r=l(a.weakImports[d])||i.resolvePath(e,a.weakImports[d]))&&h(r,!0)}else i.setOptions(t.options).addJSON(t.nested)}catch(e){c(e)}s||p||c(null,i)}function h(e,t){if(!(i.files.indexOf(e)>-1))if(i.files.push(e),e in a)s?d(e,a[e]):(++p,setTimeout((function(){--p,d(e,a[e])})));else if(s){var n;try{n=u.fs.readFileSync(e).toString("utf8")}catch(e){return void(t||c(e))}d(e,n)}else++p,i.fetch(e,(function(n,o){--p,r&&(n?t?p||c(null,i):c(n):d(e,o))}))}var p=0;u.isString(t)&&(t=[t]);for(var v,g=0;g<t.length;++g)(v=i.resolvePath("",t[g]))&&h(v);if(s)return i;p||c(null,i)},d.prototype.loadSync=function(e,t){if(!u.isNode)throw Error("not supported");return this.load(e,t,f)},d.prototype.resolveAll=function(){if(this.deferred.length)throw Error("unresolvable extensions: "+this.deferred.map((function(e){return"'extend "+e.extend+"' in "+e.parent.fullName})).join(", "));return r.prototype.resolveAll.call(this)};var h=/^[A-Z]/;function p(e,t){var n=t.parent.lookup(t.extend);if(n){var r=new s(t.fullName,t.id,t.type,t.rule,void 0,t.options);return r.declaringField=t,t.extensionField=r,n.add(r),!0}return!1}d.prototype._handleAdd=function(e){if(e instanceof s)void 0===e.extend||e.extensionField||p(0,e)||this.deferred.push(e);else if(e instanceof c)h.test(e.name)&&(e.parent[e.name]=e.values);else if(!(e instanceof l)){if(e instanceof i)for(var t=0;t<this.deferred.length;)p(0,this.deferred[t])?this.deferred.splice(t,1):++t;for(var n=0;n<e.nestedArray.length;++n)this._handleAdd(e._nestedArray[n]);h.test(e.name)&&(e.parent[e.name]=e)}},d.prototype._handleRemove=function(e){if(e instanceof s){if(void 0!==e.extend)if(e.extensionField)e.extensionField.parent.remove(e.extensionField),e.extensionField=null;else{var t=this.deferred.indexOf(e);t>-1&&this.deferred.splice(t,1)}}else if(e instanceof c)h.test(e.name)&&delete e.parent[e.name];else if(e instanceof r){for(var n=0;n<e.nestedArray.length;++n)this._handleRemove(e._nestedArray[n]);h.test(e.name)&&delete e.parent[e.name]}},d._configure=function(e,t,n){i=e,o=t,a=n}},function(e,t,n){(function(t){e.exports=function(e){return n&&t.isBuffer(e)||r&&(e instanceof ArrayBuffer||i(e))};var n="function"==typeof t&&"function"==typeof t.isBuffer,r="function"==typeof ArrayBuffer,i=function(e){return"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer}}).call(this,n(51).Buffer)},function(e,t){var n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(n){var r=new Uint8Array(16);e.exports=function(){return n(r),r}}else{var i=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),i[t]=e>>>((3&t)<<3)&255;return i}}},function(e,t){for(var n=[],r=0;r<256;++r)n[r]=(r+256).toString(16).substr(1);e.exports=function(e,t){var r=t||0;return[n[e[r++]],n[e[r++]],n[e[r++]],n[e[r++]],"-",n[e[r++]],n[e[r++]],"-",n[e[r++]],n[e[r++]],"-",n[e[r++]],n[e[r++]],"-",n[e[r++]],n[e[r++]],n[e[r++]],n[e[r++]],n[e[r++]],n[e[r++]]].join("")}},function(e,t,n){var r=n(2),i=n(405);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]),r(i,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=i.locals||{}},function(e,t,n){var r=n(2),i=n(406);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]),r(i,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=i.locals||{}},function(e,t,n){"use strict";t.a=function(){return!1}},function(e,t){e.exports='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m11.591 10.177 4.243 4.242a1 1 0 0 1-1.415 1.415l-4.242-4.243-4.243 4.243a1 1 0 0 1-1.414-1.415l4.243-4.242L4.52 5.934A1 1 0 0 1 5.934 4.52l4.243 4.243 4.242-4.243a1 1 0 1 1 1.415 1.414l-4.243 4.243z"/></svg>'},function(e,t){e.exports='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 16h9a1 1 0 0 1 0 2H2a1 1 0 0 1 0-2z"/><path d="M17 1a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h14zm0 1.5H3a.5.5 0 0 0-.492.41L2.5 3v9a.5.5 0 0 0 .41.492L3 12.5h14a.5.5 0 0 0 .492-.41L17.5 12V3a.5.5 0 0 0-.41-.492L17 2.5z" fill-opacity=".6"/></svg>'},function(e,t){e.exports='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M6.972 16.615a.997.997 0 0 1-.744-.292l-4.596-4.596a1 1 0 1 1 1.414-1.414l3.926 3.926 9.937-9.937a1 1 0 0 1 1.414 1.415L7.717 16.323a.997.997 0 0 1-.745.292z"/></svg>'},function(e,t){e.exports='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m8.636 9.531-2.758 3.94a.5.5 0 0 0 .122.696l3.224 2.284h1.314l2.636-3.736L8.636 9.53zm.288 8.451L5.14 15.396a2 2 0 0 1-.491-2.786l6.673-9.53a2 2 0 0 1 2.785-.49l3.742 2.62a2 2 0 0 1 .491 2.785l-7.269 10.053-2.147-.066z"/><path d="M4 18h5.523v-1H4zm-2 0h1v-1H2z"/></svg>'},function(e,t){e.exports='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M5.085 6.22 2.943 4.078a.75.75 0 1 1 1.06-1.06l2.592 2.59A11.094 11.094 0 0 1 10 5.068c4.738 0 8.578 3.101 8.578 5.083 0 1.197-1.401 2.803-3.555 3.887l1.714 1.713a.75.75 0 0 1-.09 1.138.488.488 0 0 1-.15.084.75.75 0 0 1-.821-.16L6.17 7.304c-.258.11-.51.233-.757.365l6.239 6.24-.006.005.78.78c-.388.094-.78.166-1.174.215l-1.11-1.11h.011L4.55 8.197a7.2 7.2 0 0 0-.665.514l-.112.098 4.897 4.897-.005.006 1.276 1.276a10.164 10.164 0 0 1-1.477-.117l-.479-.479-.009.009-4.863-4.863-.022.031a2.563 2.563 0 0 0-.124.2c-.043.077-.08.158-.108.241a.534.534 0 0 0-.028.133.29.29 0 0 0 .008.072.927.927 0 0 0 .082.226c.067.133.145.26.234.379l3.242 3.365.025.01.59.623c-3.265-.918-5.59-3.155-5.59-4.668 0-1.194 1.448-2.838 3.663-3.93zm7.07.531a4.632 4.632 0 0 1 1.108 5.992l.345.344.046-.018a9.313 9.313 0 0 0 2-1.112c.256-.187.5-.392.727-.613.137-.134.27-.277.392-.431.072-.091.141-.185.203-.286.057-.093.107-.19.148-.292a.72.72 0 0 0 .036-.12.29.29 0 0 0 .008-.072.492.492 0 0 0-.028-.133.999.999 0 0 0-.036-.096 2.165 2.165 0 0 0-.071-.145 2.917 2.917 0 0 0-.125-.2 3.592 3.592 0 0 0-.263-.335 5.444 5.444 0 0 0-.53-.523 7.955 7.955 0 0 0-1.054-.768 9.766 9.766 0 0 0-1.879-.891c-.337-.118-.68-.219-1.027-.301zm-2.85.21-.069.002a.508.508 0 0 0-.254.097.496.496 0 0 0-.104.679.498.498 0 0 0 .326.199l.045.005c.091.003.181.003.272.012a2.45 2.45 0 0 1 2.017 1.513c.024.061.043.125.069.185a.494.494 0 0 0 .45.287h.008a.496.496 0 0 0 .35-.158.482.482 0 0 0 .13-.335.638.638 0 0 0-.048-.219 3.379 3.379 0 0 0-.36-.723 3.438 3.438 0 0 0-2.791-1.543l-.028-.001h-.013z"/></svg>'},function(e,t){e.exports='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M6.91 10.54c.26-.23.64-.21.88.03l3.36 3.14 2.23-2.06a.64.64 0 0 1 .87 0l2.52 2.97V4.5H3.2v10.12l3.71-4.08zm10.27-7.51c.6 0 1.09.47 1.09 1.05v11.84c0 .59-.49 1.06-1.09 1.06H2.79c-.6 0-1.09-.47-1.09-1.06V4.08c0-.58.49-1.05 1.1-1.05h14.38zm-5.22 5.56a1.96 1.96 0 1 1 3.4-1.96 1.96 1.96 0 0 1-3.4 1.96z"/></svg>'},function(e,t){e.exports='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m9.239 13.938-2.88-1.663a.75.75 0 0 1 .75-1.3L9 12.067V4.75a.75.75 0 1 1 1.5 0v7.318l1.89-1.093a.75.75 0 0 1 .75 1.3l-2.879 1.663a.752.752 0 0 1-.511.187.752.752 0 0 1-.511-.187zM4.25 17a.75.75 0 1 1 0-1.5h10.5a.75.75 0 0 1 0 1.5H4.25z"/></svg>'},function(e,t){e.exports='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M9.75 11.875a.752.752 0 0 1 .508.184l2.883 1.666a.75.75 0 0 1-.659 1.344l-.091-.044-1.892-1.093.001 4.318a.75.75 0 1 1-1.5 0v-4.317l-1.89 1.092a.75.75 0 0 1-.75-1.3l2.879-1.663a.752.752 0 0 1 .51-.187zM15.25 9a.75.75 0 1 1 0 1.5H4.75a.75.75 0 1 1 0-1.5h10.5zM9.75.375a.75.75 0 0 1 .75.75v4.318l1.89-1.093.092-.045a.75.75 0 0 1 .659 1.344l-2.883 1.667a.752.752 0 0 1-.508.184.752.752 0 0 1-.511-.187L6.359 5.65a.75.75 0 0 1 .75-1.299L9 5.442V1.125a.75.75 0 0 1 .75-.75z"/></svg>'},function(e,t){e.exports='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m10.261 7.062 2.88 1.663a.75.75 0 0 1-.75 1.3L10.5 8.933v7.317a.75.75 0 1 1-1.5 0V8.932l-1.89 1.093a.75.75 0 0 1-.75-1.3l2.879-1.663a.752.752 0 0 1 .511-.187.752.752 0 0 1 .511.187zM15.25 4a.75.75 0 1 1 0 1.5H4.75a.75.75 0 0 1 0-1.5h10.5z"/></svg>'},function(e,t){e.exports='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 4c0 .414.336.75.75.75h9.929a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0-8c0 .414.336.75.75.75h9.929a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75z"/></svg>'},function(e,t){e.exports='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm2.286 4c0 .414.336.75.75.75h9.928a.75.75 0 1 0 0-1.5H5.036a.75.75 0 0 0-.75.75zm0-8c0 .414.336.75.75.75h9.928a.75.75 0 1 0 0-1.5H5.036a.75.75 0 0 0-.75.75z"/></svg>'},function(e,t){e.exports='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M18 3.75a.75.75 0 0 1-.75.75H2.75a.75.75 0 1 1 0-1.5h14.5a.75.75 0 0 1 .75.75zm0 8a.75.75 0 0 1-.75.75H2.75a.75.75 0 1 1 0-1.5h14.5a.75.75 0 0 1 .75.75zm0 4a.75.75 0 0 1-.75.75H7.321a.75.75 0 1 1 0-1.5h9.929a.75.75 0 0 1 .75.75zm0-8a.75.75 0 0 1-.75.75H7.321a.75.75 0 1 1 0-1.5h9.929a.75.75 0 0 1 .75.75z"/></svg>'},function(e,t){e.exports='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 4c0 .414.336.75.75.75h9.929a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0-8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75z"/></svg>'},function(e,t){e.exports='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" clip-rule="evenodd" stroke-linejoin="round" stroke-miterlimit="1.414"><path d="M18 4.5V3H2v1.5h16zm0 3V6h-5.674v1.5H18zm0 3V9h-5.674v1.5H18zm0 3V12h-5.674v1.5H18zm-8.5-6V12h-6V7.5h6zm.818-1.5H2.682C2.305 6 2 6.407 2 6.91v5.68c0 .503.305.91.682.91h7.636c.377 0 .682-.407.682-.91V6.91c0-.503-.305-.91-.682-.91zM18 16.5V15H2v1.5h16z"/></svg>'},function(e,t){e.exports='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 4.5V3h16v1.5zm4.5 3V12h7V7.5h-7zM5.758 6h8.484c.419 0 .758.407.758.91v5.681c0 .502-.34.909-.758.909H5.758c-.419 0-.758-.407-.758-.91V6.91c0-.503.34-.91.758-.91zM2 16.5V15h16v1.5z"/></svg>'},function(e,t){e.exports='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 4.5V3h16v1.5zm0 3V6h5.674v1.5zm0 3V9h5.674v1.5zm0 3V12h5.674v1.5zm8.5-6V12h6V7.5h-6zM9.682 6h7.636c.377 0 .682.407.682.91v5.68c0 .503-.305.91-.682.91H9.682c-.377 0-.682-.407-.682-.91V6.91c0-.503.305-.91.682-.91zM2 16.5V15h16v1.5z"/></svg>'},function(e,t){e.exports='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 4.5V3h16v1.5zm2.5 3V12h11V7.5h-11zM4.061 6H15.94c.586 0 1.061.407 1.061.91v5.68c0 .503-.475.91-1.061.91H4.06c-.585 0-1.06-.407-1.06-.91V6.91C3 6.406 3.475 6 4.061 6zM2 16.5V15h16v1.5z"/></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2.5 17v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zM1 15.5v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm0-2v1h-1v-1h1zm-19 0v1H0v-1h1zM14.5 2v1h-1V2h1zm2 0v1h-1V2h1zm2 0v1h-1V2h1zm-8 0v1h-1V2h1zm-2 0v1h-1V2h1zm-2 0v1h-1V2h1zm-2 0v1h-1V2h1zm8 0v1h-1V2h1zm-10 0v1h-1V2h1z"/><path d="M18.095 2H1.905C.853 2 0 2.895 0 4v12c0 1.105.853 2 1.905 2h16.19C19.147 18 20 17.105 20 16V4c0-1.105-.853-2-1.905-2zm0 1.5c.263 0 .476.224.476.5v12c0 .276-.213.5-.476.5H1.905a.489.489 0 0 1-.476-.5V4c0-.276.213-.5.476-.5h16.19z"/></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2.5 17v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zM1 15.5v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm0-2v1h-1v-1h1zm-19 0v1H0v-1h1zM14.5 2v1h-1V2h1zm2 0v1h-1V2h1zm2 0v1h-1V2h1zm-8 0v1h-1V2h1zm-2 0v1h-1V2h1zm-2 0v1h-1V2h1zm-2 0v1h-1V2h1zm8 0v1h-1V2h1zm-10 0v1h-1V2h1z"/><path d="M13 6H2a2 2 0 0 0-2 2v8a2 2 0 0 0 2 2h11a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2zm0 1.5a.5.5 0 0 1 .5.5v8a.5.5 0 0 1-.5.5H2a.5.5 0 0 1-.5-.5V8a.5.5 0 0 1 .5-.5h11z"/></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2.5 17v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zM1 15.5v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm0-2v1h-1v-1h1zm-19 0v1H0v-1h1zM14.5 2v1h-1V2h1zm2 0v1h-1V2h1zm2 0v1h-1V2h1zm-8 0v1h-1V2h1zm-2 0v1h-1V2h1zm-2 0v1h-1V2h1zm-2 0v1h-1V2h1zm8 0v1h-1V2h1zm-10 0v1h-1V2h1z"/><path d="M7 10H2a2 2 0 0 0-2 2v4a2 2 0 0 0 2 2h5a2 2 0 0 0 2-2v-4a2 2 0 0 0-2-2zm0 1.5a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5H2a.5.5 0 0 1-.5-.5v-4a.5.5 0 0 1 .5-.5h5z"/></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2.5 17v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zM1 15.5v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm0-2v1h-1v-1h1zm-19 0v1H0v-1h1zM14.5 2v1h-1V2h1zm2 0v1h-1V2h1zm2 0v1h-1V2h1zm-8 0v1h-1V2h1zm-2 0v1h-1V2h1zm-2 0v1h-1V2h1zm-2 0v1h-1V2h1zm8 0v1h-1V2h1zm-10 0v1h-1V2h1z"/><path d="M10 8H2a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2v-6a2 2 0 0 0-2-2zm0 1.5a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-.5.5H2a.5.5 0 0 1-.5-.5v-6a.5.5 0 0 1 .5-.5h8z"/></svg>'},function(e,t){e.exports='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m7.3 17.37-.061.088a1.518 1.518 0 0 1-.934.535l-4.178.663-.806-4.153a1.495 1.495 0 0 1 .187-1.058l.056-.086L8.77 2.639c.958-1.351 2.803-1.076 4.296-.03 1.497 1.047 2.387 2.693 1.433 4.055L7.3 17.37zM9.14 4.728l-5.545 8.346 3.277 2.294 5.544-8.346L9.14 4.728zM6.07 16.512l-3.276-2.295.53 2.73 2.746-.435zM9.994 3.506 13.271 5.8c.316-.452-.16-1.333-1.065-1.966-.905-.634-1.895-.78-2.212-.328zM8 18.5 9.375 17H19v1.5H8z"/></svg>'},function(e,t){e.exports='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M6.999 2H15a1 1 0 0 1 0 2h-1.004v13a1 1 0 1 1-2 0V4H8.999v13a1 1 0 1 1-2 0v-7A4 4 0 0 1 3 6a4 4 0 0 1 3.999-4z"/></svg>'},function(e,t){e.exports='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3 10.423a6.5 6.5 0 0 1 6.056-6.408l.038.67C6.448 5.423 5.354 7.663 5.22 10H9c.552 0 .5.432.5.986v4.511c0 .554-.448.503-1 .503h-5c-.552 0-.5-.449-.5-1.003v-4.574zm8 0a6.5 6.5 0 0 1 6.056-6.408l.038.67c-2.646.739-3.74 2.979-3.873 5.315H17c.552 0 .5.432.5.986v4.511c0 .554-.448.503-1 .503h-5c-.552 0-.5-.449-.5-1.003v-4.574z"/></svg>'},function(e,t){e.exports='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><circle cx="9.5" cy="4.5" r="1.5"/><circle cx="9.5" cy="10.5" r="1.5"/><circle cx="9.5" cy="16.5" r="1.5"/></svg>'},function(e,t){e.exports='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path class="ck-icon__fill" d="M16.935 5.328a2 2 0 0 1 0 2.829l-7.778 7.778a2 2 0 0 1-2.829 0L3.5 13.107a1.999 1.999 0 1 1 2.828-2.829l.707.707a1 1 0 0 0 1.414 0l5.658-5.657a2 2 0 0 1 2.828 0z"/><path d="M14.814 6.035 8.448 12.4a1 1 0 0 1-1.414 0l-1.413-1.415A1 1 0 1 0 4.207 12.4l2.829 2.829a1 1 0 0 0 1.414 0l7.778-7.778a1 1 0 1 0-1.414-1.415z"/></svg>'},function(e,t){e.exports='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M11.463 5.187a.888.888 0 1 1 1.254 1.255L9.16 10l3.557 3.557a.888.888 0 1 1-1.254 1.255L7.26 10.61a.888.888 0 0 1 .16-1.382l4.043-4.042z"/></svg>'},function(e,t){e.exports='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M8.537 14.813a.888.888 0 1 1-1.254-1.255L10.84 10 7.283 6.442a.888.888 0 1 1 1.254-1.255L12.74 9.39a.888.888 0 0 1-.16 1.382l-4.043 4.042z"/></svg>'},function(e,t){e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M4 0v1H1v3H0V.5A.5.5 0 0 1 .5 0H4zm8 0h3.5a.5.5 0 0 1 .5.5V4h-1V1h-3V0zM4 16H.5a.5.5 0 0 1-.5-.5V12h1v3h3v1zm8 0v-1h3v-3h1v3.5a.5.5 0 0 1-.5.5H12z"/><path fill-opacity=".256" d="M1 1h14v14H1z"/><g class="ck-icon__selected-indicator"><path d="M7 0h2v1H7V0zM0 7h1v2H0V7zm15 0h1v2h-1V7zm-8 8h2v1H7v-1z"/><path fill-opacity=".254" d="M1 1h14v14H1z"/></g></svg>'},function(e,t){e.exports='<svg viewBox="0 0 10 8" xmlns="http://www.w3.org/2000/svg"><path d="M9.055.263v3.972h-6.77M1 4.216l2-2.038m-2 2 2 2.038"/></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M.75 15.5a.75.75 0 0 1 .75.75V18l.008.09A.5.5 0 0 0 2 18.5h1.75a.75.75 0 1 1 0 1.5H1.5l-.144-.007a1.5 1.5 0 0 1-1.35-1.349L0 18.5v-2.25a.75.75 0 0 1 .75-.75zm18.5 0a.75.75 0 0 1 .75.75v2.25l-.007.144a1.5 1.5 0 0 1-1.349 1.35L18.5 20h-2.25a.75.75 0 1 1 0-1.5H18a.5.5 0 0 0 .492-.41L18.5 18v-1.75a.75.75 0 0 1 .75-.75zm-10.45 3c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2H7.2a.2.2 0 0 1-.2-.2v-1.1c0-.11.09-.2.2-.2h1.6zm4 0c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2h-1.6a.2.2 0 0 1-.2-.2v-1.1c0-.11.09-.2.2-.2h1.6zm.45-5.5a.75.75 0 1 1 0 1.5h-8.5a.75.75 0 1 1 0-1.5h8.5zM1.3 11c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2H.2a.2.2 0 0 1-.2-.2v-1.6c0-.11.09-.2.2-.2h1.1zm18.5 0c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2h-1.1a.2.2 0 0 1-.2-.2v-1.6c0-.11.09-.2.2-.2h1.1zm-4.55-2a.75.75 0 1 1 0 1.5H4.75a.75.75 0 1 1 0-1.5h10.5zM1.3 7c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2H.2a.2.2 0 0 1-.2-.2V7.2c0-.11.09-.2.2-.2h1.1zm18.5 0c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2h-1.1a.2.2 0 0 1-.2-.2V7.2c0-.11.09-.2.2-.2h1.1zm-4.55-2a.75.75 0 1 1 0 1.5h-2.5a.75.75 0 1 1 0-1.5h2.5zm-5 0a.75.75 0 1 1 0 1.5h-5.5a.75.75 0 0 1 0-1.5h5.5zm-6.5-5a.75.75 0 0 1 0 1.5H2a.5.5 0 0 0-.492.41L1.5 2v1.75a.75.75 0 0 1-1.5 0V1.5l.007-.144A1.5 1.5 0 0 1 1.356.006L1.5 0h2.25zM18.5 0l.144.007a1.5 1.5 0 0 1 1.35 1.349L20 1.5v2.25a.75.75 0 1 1-1.5 0V2l-.008-.09A.5.5 0 0 0 18 1.5h-1.75a.75.75 0 1 1 0-1.5h2.25zM8.8 0c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2H7.2a.2.2 0 0 1-.2-.2V.2c0-.11.09-.2.2-.2h1.6zm4 0c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2h-1.6a.2.2 0 0 1-.2-.2V.2c0-.11.09-.2.2-.2h1.6z"/></svg>'},function(e,t){e.exports='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10.187 17H5.773c-.637 0-1.092-.138-1.364-.415-.273-.277-.409-.718-.409-1.323V4.738c0-.617.14-1.062.419-1.332.279-.27.73-.406 1.354-.406h4.68c.69 0 1.288.041 1.793.124.506.083.96.242 1.36.478.341.197.644.447.906.75a3.262 3.262 0 0 1 .808 2.162c0 1.401-.722 2.426-2.167 3.075C15.05 10.175 16 11.315 16 13.01a3.756 3.756 0 0 1-2.296 3.504 6.1 6.1 0 0 1-1.517.377c-.571.073-1.238.11-2 .11zm-.217-6.217H7v4.087h3.069c1.977 0 2.965-.69 2.965-2.072 0-.707-.256-1.22-.768-1.537-.512-.319-1.277-.478-2.296-.478zM7 5.13v3.619h2.606c.729 0 1.292-.067 1.69-.2a1.6 1.6 0 0 0 .91-.765c.165-.267.247-.566.247-.897 0-.707-.26-1.176-.778-1.409-.519-.232-1.31-.348-2.375-.348H7z"/></svg>'},function(e,t){e.exports='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m9.586 14.633.021.004c-.036.335.095.655.393.962.082.083.173.15.274.201h1.474a.6.6 0 1 1 0 1.2H5.304a.6.6 0 0 1 0-1.2h1.15c.474-.07.809-.182 1.005-.334.157-.122.291-.32.404-.597l2.416-9.55a1.053 1.053 0 0 0-.281-.823 1.12 1.12 0 0 0-.442-.296H8.15a.6.6 0 0 1 0-1.2h6.443a.6.6 0 1 1 0 1.2h-1.195c-.376.056-.65.155-.823.296-.215.175-.423.439-.623.79l-2.366 9.347z"/></svg>'},function(e,t){e.exports='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M11.627 16.5zm5.873-.196zm0-7.001V8h-13v8.5h4.341c.191.54.457 1.044.785 1.5H2a1.5 1.5 0 0 1-1.5-1.5v-13A1.5 1.5 0 0 1 2 2h4.5a1.5 1.5 0 0 1 1.06.44L9.122 4H16a1.5 1.5 0 0 1 1.5 1.5v1A1.5 1.5 0 0 1 19 8v2.531a6.027 6.027 0 0 0-1.5-1.228zM16 6.5v-1H8.5l-2-2H2v13h1V8a1.5 1.5 0 0 1 1.5-1.5H16z"/><path d="M14.5 19.5a5 5 0 1 1 0-10 5 5 0 0 1 0 10zM15 14v-2h-1v2h-2v1h2v2h1v-2h2v-1h-2z"/></svg>'},function(e,t){e.exports='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10.5 5.5H7v5h3.5a2.5 2.5 0 1 0 0-5zM5 3h6.5v.025a5 5 0 0 1 0 9.95V13H7v4a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1z"/></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 700 250"><rect rx="4"/></svg>'},function(e,t){e.exports='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m11.077 15 .991-1.416a.75.75 0 1 1 1.229.86l-1.148 1.64a.748.748 0 0 1-.217.206 5.251 5.251 0 0 1-8.503-5.955.741.741 0 0 1 .12-.274l1.147-1.639a.75.75 0 1 1 1.228.86L4.933 10.7l.006.003a3.75 3.75 0 0 0 6.132 4.294l.006.004zm5.494-5.335a.748.748 0 0 1-.12.274l-1.147 1.639a.75.75 0 1 1-1.228-.86l.86-1.23a3.75 3.75 0 0 0-6.144-4.301l-.86 1.229a.75.75 0 0 1-1.229-.86l1.148-1.64a.748.748 0 0 1 .217-.206 5.251 5.251 0 0 1 8.503 5.955zm-4.563-2.532a.75.75 0 0 1 .184 1.045l-3.155 4.505a.75.75 0 1 1-1.229-.86l3.155-4.506a.75.75 0 0 1 1.045-.184zm4.919 10.562-1.414 1.414a.75.75 0 1 1-1.06-1.06l1.414-1.415-1.415-1.414a.75.75 0 0 1 1.061-1.06l1.414 1.414 1.414-1.415a.75.75 0 0 1 1.061 1.061l-1.414 1.414 1.414 1.415a.75.75 0 0 1-1.06 1.06l-1.415-1.414z"/></svg>'},function(e,t){e.exports='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m11.077 15 .991-1.416a.75.75 0 1 1 1.229.86l-1.148 1.64a.748.748 0 0 1-.217.206 5.251 5.251 0 0 1-8.503-5.955.741.741 0 0 1 .12-.274l1.147-1.639a.75.75 0 1 1 1.228.86L4.933 10.7l.006.003a3.75 3.75 0 0 0 6.132 4.294l.006.004zm5.494-5.335a.748.748 0 0 1-.12.274l-1.147 1.639a.75.75 0 1 1-1.228-.86l.86-1.23a3.75 3.75 0 0 0-6.144-4.301l-.86 1.229a.75.75 0 0 1-1.229-.86l1.148-1.64a.748.748 0 0 1 .217-.206 5.251 5.251 0 0 1 8.503 5.955zm-4.563-2.532a.75.75 0 0 1 .184 1.045l-3.155 4.505a.75.75 0 1 1-1.229-.86l3.155-4.506a.75.75 0 0 1 1.045-.184z"/></svg>'},function(e,t){e.exports='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M7 5.75c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zM3.5 3v5H2V3.7H1v-1h2.5V3zM.343 17.857l2.59-3.257H2.92a.6.6 0 1 0-1.04 0H.302a2 2 0 1 1 3.995 0h-.001c-.048.405-.16.734-.333.988-.175.254-.59.692-1.244 1.312H4.3v1h-4l.043-.043zM7 14.75a.75.75 0 0 1 .75-.75h9.5a.75.75 0 1 1 0 1.5h-9.5a.75.75 0 0 1-.75-.75z"/></svg>'},function(e,t){e.exports='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M7 5.75c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zm-6 0C1 4.784 1.777 4 2.75 4c.966 0 1.75.777 1.75 1.75 0 .966-.777 1.75-1.75 1.75C1.784 7.5 1 6.723 1 5.75zm6 9c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zm-6 0c0-.966.777-1.75 1.75-1.75.966 0 1.75.777 1.75 1.75 0 .966-.777 1.75-1.75 1.75-.966 0-1.75-.777-1.75-1.75z"/></svg>'},function(e,t){e.exports='<svg viewBox="0 0 64 42" xmlns="http://www.w3.org/2000/svg"><path d="M47.426 17V3.713L63.102 0v19.389h-.001l.001.272c0 1.595-2.032 3.43-4.538 4.098-2.506.668-4.538-.083-4.538-1.678 0-1.594 2.032-3.43 4.538-4.098.914-.244 2.032-.565 2.888-.603V4.516L49.076 7.447v9.556A1.014 1.014 0 0 0 49 17h-1.574zM29.5 17h-8.343a7.073 7.073 0 1 0-4.657 4.06v3.781H3.3a2.803 2.803 0 0 1-2.8-2.804V8.63a2.803 2.803 0 0 1 2.8-2.805h4.082L8.58 2.768A1.994 1.994 0 0 1 10.435 1.5h8.985c.773 0 1.477.448 1.805 1.149l1.488 3.177H26.7c1.546 0 2.8 1.256 2.8 2.805V17zm-11.637 0H17.5a1 1 0 0 0-1 1v.05A4.244 4.244 0 1 1 17.863 17zm29.684 2c.97 0 .953-.048.953.889v20.743c0 .953.016.905-.953.905H19.453c-.97 0-.953.048-.953-.905V19.89c0-.937-.016-.889.97-.889h28.077zm-4.701 19.338V22.183H24.154v16.155h18.692zM20.6 21.375v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616V37.53H20.6zm24.233-16.155v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615V37.53h-1.615zM29.485 25.283a.4.4 0 0 1 .593-.35l9.05 4.977a.4.4 0 0 1 0 .701l-9.05 4.978a.4.4 0 0 1-.593-.35v-9.956z"/></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M18.68 3.03c.6 0 .59-.03.59.55v12.84c0 .59.01.56-.59.56H1.29c-.6 0-.59.03-.59-.56V3.58c0-.58-.01-.55.6-.55h17.38zM15.77 15V5H4.2v10h11.57zM2 4v1h1V4H2zm0 2v1h1V6H2zm0 2v1h1V8H2zm0 2v1h1v-1H2zm0 2v1h1v-1H2zm0 2v1h1v-1H2zM17 4v1h1V4h-1zm0 2v1h1V6h-1zm0 2v1h1V8h-1zm0 2v1h1v-1h-1zm0 2v1h1v-1h-1zm0 2v1h1v-1h-1zM7.5 7.177a.4.4 0 0 1 .593-.351l5.133 2.824a.4.4 0 0 1 0 .7l-5.133 2.824a.4.4 0 0 1-.593-.35V7.176v.001z"/></svg>'},function(e,t){e.exports='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3 6v3h4V6H3zm0 4v3h4v-3H3zm0 4v3h4v-3H3zm5 3h4v-3H8v3zm5 0h4v-3h-4v3zm4-4v-3h-4v3h4zm0-4V6h-4v3h4zm1.5 8a1.5 1.5 0 0 1-1.5 1.5H3A1.5 1.5 0 0 1 1.5 17V4c.222-.863 1.068-1.5 2-1.5h13c.932 0 1.778.637 2 1.5v13zM12 13v-3H8v3h4zm0-4V6H8v3h4z"/></svg>'},function(e,t){e.exports='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 1h15A1.5 1.5 0 0 1 19 2.5v15a1.5 1.5 0 0 1-1.5 1.5h-15A1.5 1.5 0 0 1 1 17.5v-15A1.5 1.5 0 0 1 2.5 1zM2 2v16h16V2H2z" opacity=".6"/><path d="M18 7v1H2V7h16zm0 5v1H2v-1h16z" opacity=".6"/><path d="M14 1v18a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V1a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1zm-2 1H8v4h4V2zm0 6H8v4h4V8zm0 6H8v4h4v-4z"/></svg>'},function(e,t){e.exports='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 1h15A1.5 1.5 0 0 1 19 2.5v15a1.5 1.5 0 0 1-1.5 1.5h-15A1.5 1.5 0 0 1 1 17.5v-15A1.5 1.5 0 0 1 2.5 1zM2 2v16h16V2H2z" opacity=".6"/><path d="M7 2h1v16H7V2zm5 0h1v16h-1V2z" opacity=".6"/><path d="M1 6h18a1 1 0 0 1 1 1v6a1 1 0 0 1-1 1H1a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1zm1 2v4h4V8H2zm6 0v4h4V8H8zm6 0v4h4V8h-4z"/></svg>'},function(e,t){e.exports='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 1h15A1.5 1.5 0 0 1 19 2.5v15a1.5 1.5 0 0 1-1.5 1.5h-15A1.5 1.5 0 0 1 1 17.5v-15A1.5 1.5 0 0 1 2.5 1zM2 2v16h16V2H2z" opacity=".6"/><path d="M7 2h1v16H7V2zm5 0h1v7h-1V2zm6 5v1H2V7h16zM8 12v1H2v-1h6z" opacity=".6"/><path d="M7 7h12a1 1 0 0 1 1 1v11a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V8a1 1 0 0 1 1-1zm1 2v9h10V9H8z"/></svg>'},function(e,t){e.exports='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M9.816 11.5 7.038 4.785 4.261 11.5h5.555zm.62 1.5H3.641l-1.666 4.028H.312l5.789-14h1.875l5.789 14h-1.663L10.436 13zm7.55 2.279.779-.779.707.707-2.265 2.265-2.193-2.265.707-.707.765.765V4.825c0-.042 0-.083.002-.123l-.77.77-.707-.707L17.207 2.5l2.265 2.265-.707.707-.782-.782c.002.043.003.089.003.135v10.454z"/></svg>'},function(e,t){e.exports='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M11.03 3h6.149a.75.75 0 1 1 0 1.5h-5.514L11.03 3zm1.27 3h4.879a.75.75 0 1 1 0 1.5h-4.244L12.3 6zm1.27 3h3.609a.75.75 0 1 1 0 1.5h-2.973L13.57 9zm-2.754 2.5L8.038 4.785 5.261 11.5h5.555zm.62 1.5H4.641l-1.666 4.028H1.312l5.789-14h1.875l5.789 14h-1.663L11.436 13z"/></svg>'},function(e,t){e.exports='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path class="ck-icon__fill" d="M10.798 1.59 3.002 12.875l1.895 1.852 2.521 1.402 6.997-12.194z"/><path d="m2.556 16.727.234-.348c-.297-.151-.462-.293-.498-.426-.036-.137.002-.416.115-.837.094-.25.15-.449.169-.595a4.495 4.495 0 0 0 0-.725c-.209-.621-.303-1.041-.284-1.26.02-.218.178-.506.475-.862l6.77-9.414c.539-.91 1.605-.85 3.199.18 1.594 1.032 2.188 1.928 1.784 2.686l-5.877 10.36c-.158.412-.333.673-.526.782-.193.108-.604.179-1.232.21-.362.131-.608.237-.738.318-.13.081-.305.238-.526.47-.293.265-.504.397-.632.397-.096 0-.27-.075-.524-.226l-.31.41-1.6-1.12zm-.279.415 1.575 1.103-.392.515H1.19l1.087-1.618zm8.1-13.656-4.953 6.9L8.75 12.57l4.247-7.574c.175-.25-.188-.647-1.092-1.192-.903-.546-1.412-.652-1.528-.32zM8.244 18.5 9.59 17h9.406v1.5H8.245z"/></svg>'},function(e,t){e.exports='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path class="ck-icon__fill" d="M10.126 2.268 2.002 13.874l1.895 1.852 2.521 1.402L14.47 5.481l-1.543-2.568-2.801-.645z"/><path d="m4.5 18.088-2.645-1.852-.04-2.95-.006-.005.006-.008v-.025l.011.008L8.73 2.97c.165-.233.356-.417.567-.557l-1.212.308L4.604 7.9l-.83-.558 3.694-5.495 2.708-.69 1.65 1.145.046.018.85-1.216 2.16 1.512-.856 1.222c.828.967 1.144 2.141.432 3.158L7.55 17.286l.006.005-3.055.797H4.5zm-.634.166-1.976.516-.026-1.918 2.002 1.402zM9.968 3.817l-.006-.004-6.123 9.184 3.277 2.294 6.108-9.162.005.003c.317-.452-.16-1.332-1.064-1.966-.891-.624-1.865-.776-2.197-.349zM8.245 18.5 9.59 17h9.406v1.5H8.245z"/></svg>'},function(e,t){e.exports='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M8.69 14.915c.053.052.173.083.36.093a.366.366 0 0 1 .345.485l-.003.01a.738.738 0 0 1-.697.497h-2.67a.374.374 0 0 1-.353-.496l.013-.038a.681.681 0 0 1 .644-.458c.197-.012.325-.043.386-.093a.28.28 0 0 0 .072-.11L9.592 4.5H6.269c-.359-.017-.609.013-.75.09-.142.078-.289.265-.442.563-.192.29-.516.464-.864.464H4.17a.43.43 0 0 1-.407-.569L4.46 3h13.08l-.62 2.043a.81.81 0 0 1-.775.574h-.114a.486.486 0 0 1-.486-.486c.001-.284-.054-.464-.167-.54-.112-.076-.367-.106-.766-.091h-3.28l-2.68 10.257c-.006.074.007.127.038.158zM3 17h8a.5.5 0 1 1 0 1H3a.5.5 0 1 1 0-1zm11.299 1.17a.75.75 0 1 1-1.06-1.06l1.414-1.415-1.415-1.414a.75.75 0 0 1 1.06-1.06l1.415 1.414 1.414-1.415a.75.75 0 1 1 1.06 1.06l-1.413 1.415 1.414 1.415a.75.75 0 0 1-1.06 1.06l-1.415-1.414-1.414 1.414z"/></svg>'},function(e,t){e.exports='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M7 16.4c-.8-.4-1.5-.9-2.2-1.5a.6.6 0 0 1-.2-.5l.3-.6h1c1 1.2 2.1 1.7 3.7 1.7 1 0 1.8-.3 2.3-.6.6-.4.6-1.2.6-1.3.2-1.2-.9-2.1-.9-2.1h2.1c.3.7.4 1.2.4 1.7v.8l-.6 1.2c-.6.8-1.1 1-1.6 1.2a6 6 0 0 1-2.4.6c-1 0-1.8-.3-2.5-.6zM6.8 9 6 8.3c-.4-.5-.5-.8-.5-1.6 0-.7.1-1.3.5-1.8.4-.6 1-1 1.6-1.3a6.3 6.3 0 0 1 4.7 0 4 4 0 0 1 1.7 1l.3.7c0 .1.2.4-.2.7-.4.2-.9.1-1 0a3 3 0 0 0-1.2-1c-.4-.2-1-.3-2-.4-.7 0-1.4.2-2 .6-.8.6-1 .8-1 1.5 0 .8.5 1 1.2 1.5.6.4 1.1.7 1.9 1H6.8z"/><path d="M3 10.5V9h14v1.5z"/></svg>'},function(e,t){e.exports='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3 18v-1.5h14V18zm2.2-8V3.6c0-.4.4-.6.8-.6.3 0 .7.2.7.6v6.2c0 2 1.3 2.8 3.2 2.8 1.9 0 3.4-.9 3.4-2.9V3.6c0-.3.4-.5.8-.5.3 0 .7.2.7.5V10c0 2.7-2.2 4-4.9 4-2.6 0-4.7-1.2-4.7-4z"/></svg>'},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(354)),o=r(n(1)),a=r(n(3)),s=r(n(32)),c=r(n(78)),l=r(n(362)),u=r(n(363)),d=r(n(364)),f=r(n(365)),h=r(n(366)),p=r(n(39)),v=r(n(54)),g=r(n(80));t._SERVICE=1;var m=function(){function e(t,n){if(_classCallCheck(this,e),!t)throw new TypeError('Param "bundleVersion" must be provided.');this._id=null!=n?n:i.default.v4(),this._isConnected=!1,this._bundleVersion=t}var n,r,o;return _createClass(e,[{key:"getId",value:function(){return this._id}},{key:"isConnected",value:function(){return this._isConnected}},{key:"connect",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{buffers:[],types:[]},n=new l.default(this.getId(),t.buffers,t.types,this._bundleVersion);return this._connect(e,n)}},{key:"reconnect",value:function(e,t){if(this.isConnected())throw new v.default("Cannot reconnect to already connected service.",e);return this._connect(e,new d.default(this.getId(),t,this._bundleVersion))}},{key:"disconnect",value:function(){this._isConnected&&(this._isConnected=!1,this._wsGateway&&(this.stopListening(this._wsGateway),this._wsGateway=void 0),this._channel&&(this.stopListening(this._channel),this._channel=void 0),this._connectedSessions&&(this._connectedSessions.disconnect(),this._connectedSessions=void 0),this.fire("disconnected"),this.stopListening())}},{key:"sendOperations",value:(o=_asyncToGenerator(regeneratorRuntime.mark((function e(n,r){var i,o,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n&&n.types&&n.types.length){e.next=2;break}throw new v.default("Cannot send empty update.",this._wsGateway);case 2:if(i="number"==typeof r?r:parseInt(r),Number.isInteger(i)&&!(i<0)){e.next=5;break}throw new v.default("Base version not provided.",this._wsGateway);case 5:if(o=new u.default(this.getId(),n.buffers,n.types,i),this._wsGateway&&this._isConnected){e.next=8;break}throw new g.default("Collaborative Editing",this);case 8:return e.next=10,this._wsGateway._sendRequest(t._SERVICE,u.default.TYPE,s.default.encode(o));case 10:return a=e.sent,e.abrupt("return",s.default.decode(a,f.default));case 12:case"end":return e.stop()}}),e,this)}))),function(e,t){return o.apply(this,arguments)})},{key:"getConnectedSessions",value:(r=_asyncToGenerator(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._isConnected){e.next=2;break}throw new g.default("Collaborative Editing",this);case 2:if(e.t0=this._connectedSessions,e.t0){e.next=7;break}return e.next=6,c.default.getConnectedSessions(this._wsGateway,this._id,t._SERVICE);case 6:this._connectedSessions=e.sent;case 7:return e.abrupt("return",this._connectedSessions);case 8:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"_connect",value:(n=_asyncToGenerator(regeneratorRuntime.mark((function e(n,r){var i,o,a=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isConnected()){e.next=2;break}return e.abrupt("return");case 2:if(n.state===p.default.STATE_CONNECTED){e.next=4;break}throw new v.default("WebSocket Gateway is not connected.",n);case 4:return this._wsGateway=n,this.stopListening(n,"change:state"),e.next=7,n._sendRequest(t._SERVICE,r.constructor.TYPE,s.default.encode(r));case 7:return i=e.sent,o=s.default.decode(i,h.default),e.abrupt("return",(this.listenTo(n,"change:state",(function(e,t,n){return a._onWsGatewayStateChange(n)}),{priority:p.default._CHANGE_STATE_EVENT_PRIORITY}),this._connectToChannel(n,o.channel),this._isConnected=!0,this.fire("connected"),o));case 10:case"end":return e.stop()}}),e,this)}))),function(e,t){return n.apply(this,arguments)})},{key:"_connectToChannel",value:function(e,n){var r=this;this._channel=e._getChannel(t._SERVICE,n),this.listenTo(this._channel,this._channel.getEventName(u.default.TYPE),(function(e,t){var n=s.default.decode(t,u.default);r.fire("operationsReceived",n.baseVersion,n.data,n.metadata)}))}},{key:"_onWsGatewayStateChange",value:function(e){e===p.default.STATE_DISCONNECTED&&this.disconnect()}}],[{key:"getConnectedSessions",value:function(e,n){return c.default.getConnectedSessions(e,n,t._SERVICE)}}]),e}();m._SERVICE=t._SERVICE,o.default(m,a.default),t.default=m},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var o=r(n(1)),a=r(n(3)),s=r(n(32)),c=r(n(367)),l=r(n(368)),u=r(n(369)),d=r(n(370)),f=r(n(371)),h=r(n(372)),p=r(n(373)),v=r(n(374)),g=r(n(375)),m=r(n(376)),y=r(n(377)),k=i(n(39)),_=r(n(54)),b=r(n(78)),w=r(n(80));t._SERVICE=9;var x=function(){function e(t){_classCallCheck(this,e),this._documentId=t,this._isConnected=!1}var n,r,i,o,a,x,C,T;return _createClass(e,[{key:"isConnected",get:function(){return this._isConnected}},{key:"connect",value:(T=_asyncToGenerator(regeneratorRuntime.mark((function e(n){var r,i,o,a,c,l=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isConnected){e.next=2;break}return e.abrupt("return");case 2:if(n.state===k.WEB_SOCKET_GATEWAY_STATES.CONNECTED){e.next=4;break}throw new _.default("WebSocket Gateway is not connected.",n);case 4:return r=new u.default(this._documentId),this._wsGateway=n,this.stopListening(n,"change:state"),e.next=8,n._sendRequest(t._SERVICE,u.default.TYPE,s.default.encode(r));case 8:return i=e.sent,o=s.default.decode(i,d.default),a=o.channel,c=o.threads,e.abrupt("return",(this.listenTo(n,"change:state",(function(e,t,n){return l._onWsGatewayStateChange(n)}),{priority:k.default._CHANGE_STATE_EVENT_PRIORITY}),this._connectToChannel(n,a),this._isConnected=!0,this.fire("connected"),c));case 13:case"end":return e.stop()}}),e,this)}))),function(e){return T.apply(this,arguments)})},{key:"disconnect",value:function(){this._isConnected&&(this._isConnected=!1,this._wsGateway&&(this.stopListening(this._wsGateway),this._wsGateway=void 0),this._channel&&(this.stopListening(this._channel),this._channel=void 0),this._connectedSessions&&(this._connectedSessions.disconnect(),this._connectedSessions=void 0),this.fire("disconnected"),this.stopListening())}},{key:"addComment",value:(C=_asyncToGenerator(regeneratorRuntime.mark((function e(t,n,r,i){var o,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=new c.default(this._documentId,t,r,n,void 0,void 0,i),e.next=3,this._sendRequest(c.default.TYPE,o);case 3:return a=e.sent,e.abrupt("return",s.default.decode(a,l.default));case 5:case"end":return e.stop()}}),e,this)}))),function(e,t,n,r){return C.apply(this,arguments)})},{key:"updateComment",value:(x=_asyncToGenerator(regeneratorRuntime.mark((function e(t,n,r,i){var o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=new p.default(this._documentId,t,n,r,i,void 0!==i),e.next=3,this._sendRequest(p.default.TYPE,o);case 3:case"end":return e.stop()}}),e,this)}))),function(e,t,n,r){return x.apply(this,arguments)})},{key:"removeComment",value:(a=_asyncToGenerator(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new f.default(this._documentId,t,n),e.next=3,this._sendRequest(f.default.TYPE,r);case 3:case"end":return e.stop()}}),e,this)}))),function(e,t){return a.apply(this,arguments)})},{key:"removeCommentThread",value:(o=_asyncToGenerator(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new h.default(this._documentId,t),e.next=3,this._sendRequest(h.default.TYPE,n);case 3:case"end":return e.stop()}}),e,this)}))),function(e){return o.apply(this,arguments)})},{key:"getCommentThread",value:(i=_asyncToGenerator(regeneratorRuntime.mark((function e(t){var n,r,i,o,a,c,l,u=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=u.length>1&&void 0!==u[1]?u[1]:1,r=new v.default(t,this._documentId),e.prev=2,e.next=5,this._sendRequest(v.default.TYPE,r);case 5:return i=e.sent,o=s.default.decode(i,g.default),a=o.comments,c=o.commentThreadId,e.abrupt("return",{comments:a,commentThreadId:c});case 12:if(e.prev=12,e.t0=e.catch(2),!(e.t0 instanceof _.default&&"404"===e.t0.code&&n<5)){e.next=18;break}return e.next=17,l=100*n,new Promise((function(e){setTimeout(e,l)}));case 17:return e.abrupt("return",this.getCommentThread(t,n+1));case 18:if(!(e.t0 instanceof _.default)){e.next=20;break}throw e.t0;case 20:throw new _.default(e.t0.message,this._wsGateway);case 21:case"end":return e.stop()}}),e,this,[[2,12]])}))),function(e){return i.apply(this,arguments)})},{key:"getDocumentThreads",value:(r=_asyncToGenerator(regeneratorRuntime.mark((function e(){var t,n,r,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new m.default(this._documentId),e.next=3,this._sendRequest(m.default.TYPE,t);case 3:return n=e.sent,r=s.default.decode(n,y.default),i=r.threads,e.abrupt("return",{threads:i});case 7:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"getConnectedSessions",value:(n=_asyncToGenerator(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._isConnected){e.next=2;break}throw new w.default("Comments",this);case 2:if(e.t0=this._connectedSessions,e.t0){e.next=7;break}return e.next=6,b.default.getConnectedSessions(this._wsGateway,this._documentId,t._SERVICE);case 6:this._connectedSessions=e.sent;case 7:return e.abrupt("return",this._connectedSessions);case 8:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"_connectToChannel",value:function(t,n){var r=this;this._channel=t._getChannel(e._SERVICE,n),this._channel&&(this.listenTo(this._channel,this._channel.getEventName(c.default.TYPE),(function(e,t){var n=s.default.decode(t,c.default);r.fire("commentAdded",n)})),this.listenTo(this._channel,this._channel.getEventName(f.default.TYPE),(function(e,t){var n=s.default.decode(t,f.default);r.fire("commentRemoved",n)})),this.listenTo(this._channel,this._channel.getEventName(p.default.TYPE),(function(e,t){var n=s.default.decode(t,p.default);r.fire("commentUpdated",n)})),this.listenTo(this._channel,this._channel.getEventName(h.default.TYPE),(function(e,t){var n=s.default.decode(t,h.default);r.fire("commentThreadRemoved",n)})))}},{key:"_onWsGatewayStateChange",value:function(e){e===k.WEB_SOCKET_GATEWAY_STATES.DISCONNECTED&&this.disconnect()}},{key:"_sendRequest",value:function(e,n){if(!this._wsGateway||!this._isConnected)throw new w.default("Comments",this);return this._wsGateway._sendRequest(t._SERVICE,e,s.default.encode(n))}}]),e}();x._SERVICE=t._SERVICE,o.default(x,a.default),t.default=x},function(e,t){e.exports='\x3c!--\n\n What you\'re currently looking at is the source code of a legally protected, proprietary software.\n CKEditor 5 Collaboration is licensed under a commercial license and protected by copyright law. Where not otherwise indicated,\n all CKEditor 5 Collaboration content is authored by CKSource engineers and consists of CKSource-owned intellectual property.\n\n Copyright (c) 2003-2021, CKSource Frederico Knabben. All rights reserved.\n\n!--\x3e\n\n<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M5.2 7h9.2c.6 0 1 .4 1 1v9.9c0 .5-.4 1-1 1H5.2a1 1 0 0 1-1-1V8c0-.6.4-1 1-1zm1 1.5c-.3 0-.5.2-.5.5v8c0 .3.2.5.5.5h.5c.2 0 .5-.2.5-.5V9c0-.3-.3-.5-.5-.5h-.5zm3.2 0c-.2 0-.5.2-.5.5v8c0 .3.3.5.5.5h.5c.3 0 .5-.2.5-.5V9c0-.3-.2-.5-.5-.5h-.4zm3.5 0c-.2 0-.5.2-.5.5v8c0 .3.3.5.5.5h.5c.3 0 .5-.2.5-.5V9c0-.3-.2-.5-.5-.5h-.5zm-1.4-7.1H8.3L6.5 3.6H3.8c-.5 0-.7.3-.7.8s.2.7.7.7h12c.6 0 .9-.2.9-.7 0-.5-.3-.8-1-.8h-2.4l-1.8-2.2z"/></svg>\n'},function(e,t){e.exports='\x3c!--\n\n What you\'re currently looking at is the source code of a legally protected, proprietary software.\n CKEditor 5 Collaboration is licensed under a commercial license and protected by copyright law. Where not otherwise indicated,\n all CKEditor 5 Collaboration content is authored by CKSource engineers and consists of CKSource-owned intellectual property.\n\n Copyright (c) 2003-2021, CKSource Frederico Knabben. All rights reserved.\n\n!--\x3e\n\n<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 9.41c0 3.54 3.24 6.42 7.23 6.42 1.03 0 2.02-.19 2.95-.56 1.65.93 1.79.98 3.62 1.63.3.11.57.13.61.05.04-.08.02-.43-.08-.75-.48-1.63-.87-1.77-1.01-3.32a5.87 5.87 0 0 0 1.15-3.47C16.97 5.88 13.72 3 9.73 3S2.5 5.88 2.5 9.41zm9.64 0c0-.52.44-.95.97-.95s.96.43.96.95c0 .53-.43.95-.96.95a.96.96 0 0 1-.97-.95zm-3.37 0c0-.52.43-.95.96-.95.54 0 .97.43.97.95 0 .53-.43.95-.97.95a.96.96 0 0 1-.96-.95zm-3.38 0c0-.52.44-.95.97-.95s.96.43.96.95c0 .53-.43.95-.96.95a.96.96 0 0 1-.97-.95z"/></svg>\n'},function(e,t){e.exports='\x3c!--\n\n What you\'re currently looking at is the source code of a legally protected, proprietary software.\n CKEditor 5 Collaboration is licensed under a commercial license and protected by copyright law. Where not otherwise indicated,\n all CKEditor 5 Collaboration content is authored by CKSource engineers and consists of CKSource-owned intellectual property.\n\n Copyright (c) 2003-2021, CKSource Frederico Knabben. All rights reserved.\n\n!--\x3e\n\n<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M12 9.4a1 1 0 0 1 2 0c0 .5-.5 1-1 1a1 1 0 0 1-1-1zM8.7 9.4c0-.5.4-1 1-1 .5 0 .9.5.9 1s-.4 1-1 1a1 1 0 0 1-1-1zM6.3 8.5c.5 0 1 .4 1 1 0 .4-.5.9-1 .9a1 1 0 0 1-1-1c0-.5.4-1 1-1z"/><path d="M16 17.4c.6.2 1 .2 1.3-.2V16l-.5-1.1-.3-.7-.3-1.3c.8-1 1.2-2.3 1.2-3.6 0-3.8-3.5-6.9-7.8-6.9-4.2 0-7.7 3-7.7 7 0 3.7 3.5 6.8 7.7 6.8 1 0 2-.1 3-.5 1.4.8 1.6 1 3.4 1.6zm-3.2-2.6h-.4c-.9.4-1.8.5-2.8.5C6 15.3 3 12.7 3 9.4c0-3.2 3-5.9 6.7-5.9 3.8 0 6.8 2.7 6.8 6 0 1-.4 2.2-1 3l-.2.2v.2c0 .7.2 1.2.4 1.8l.3.7a10.4 10.4 0 0 1 .4 1c-1.8-.6-2-.7-3.5-1.6z"/></svg>\n'},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var o=r(n(1)),a=r(n(3)),s=r(n(32)),c=r(n(396)),l=r(n(397)),u=r(n(398)),d=r(n(399)),f=r(n(400)),h=r(n(401)),p=r(n(402)),v=r(n(403)),g=r(n(404)),m=r(n(54)),y=i(n(39)),k=r(n(80));t._SERVICE=10;var _=function(){function e(t){_classCallCheck(this,e),this._documentId=t,this._isConnected=!1}var n,r,i,o,a;return _createClass(e,[{key:"isConnected",get:function(){return this._isConnected}},{key:"connect",value:(a=_asyncToGenerator(regeneratorRuntime.mark((function e(n){var r,i,o,a=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isConnected){e.next=2;break}return e.abrupt("return");case 2:if(n.state===y.WEB_SOCKET_GATEWAY_STATES.CONNECTED){e.next=4;break}throw new m.default("WebSocket Gateway is not connected.",n);case 4:return r=new v.default(this._documentId),this._wsGateway=n,this.stopListening(n,"change:state"),e.next=8,n._sendRequest(t._SERVICE,v.default.TYPE,s.default.encode(r));case 8:return i=e.sent,o=s.default.decode(i,g.default),e.abrupt("return",(this.listenTo(n,"change:state",(function(e,t,n){return a._onWsGatewayStateChange(n)}),{priority:y.default._CHANGE_STATE_EVENT_PRIORITY}),this._connectToChannel(n,o.channel),this._isConnected=!0,this.fire("connected"),o.suggestions));case 11:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"disconnect",value:function(){this._isConnected&&(this._isConnected=!1,this._wsGateway&&(this.stopListening(this._wsGateway),this._wsGateway=void 0),this._channel&&(this.stopListening(this._channel),this._channel=void 0),this.fire("disconnected"),this.stopListening())}},{key:"add",value:(o=_asyncToGenerator(regeneratorRuntime.mark((function e(t,n,r){var i,o,a,u,d=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=d.length>3&&void 0!==d[3]?d[3]:null,o=d.length>4?d[4]:void 0,a=new c.default(t,this._documentId,n,r,i,o),e.next=5,this._sendRequest(c.default.TYPE,a);case 5:return u=e.sent,e.abrupt("return",s.default.decode(u,l.default));case 7:case"end":return e.stop()}}),e,this)}))),function(e,t,n){return o.apply(this,arguments)})},{key:"get",value:(i=_asyncToGenerator(regeneratorRuntime.mark((function e(t){var n,r,i,o,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:1,r=new u.default(t,this._documentId),e.prev=2,e.next=5,this._sendRequest(u.default.TYPE,r);case 5:return i=e.sent,e.abrupt("return",s.default.decode(i,d.default));case 9:if(e.prev=9,e.t0=e.catch(2),!(e.t0 instanceof m.default&&"404"===e.t0.code&&n<5)){e.next=15;break}return e.next=14,o=100*n,new Promise((function(e){setTimeout(e,o)}));case 14:return e.abrupt("return",this.get(t,n+1));case 15:if(!(e.t0 instanceof m.default)){e.next=17;break}throw e.t0;case 17:throw new m.default(e.t0.message,this._wsGateway);case 18:case"end":return e.stop()}}),e,this,[[2,9]])}))),function(e){return i.apply(this,arguments)})},{key:"getAll",value:(r=_asyncToGenerator(regeneratorRuntime.mark((function e(){var t,n,r,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new f.default(this._documentId),e.next=3,this._sendRequest(f.default.TYPE,t);case 3:return n=e.sent,r=s.default.decode(n,h.default),i=r.suggestions,e.abrupt("return",i);case 7:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"update",value:(n=_asyncToGenerator(regeneratorRuntime.mark((function e(t){var n,r,i,o,a,s=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]?s[1]:{},r=n.hasComments,i=n.state,o=n.attributes,a=new p.default(t,this._documentId,r,void 0!==r,i,o),e.next=4,this._sendRequest(p.default.TYPE,a);case 4:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"_connectToChannel",value:function(t,n){var r=this;this._channel=t._getChannel(e._SERVICE,n),this._channel&&this.listenTo(this._channel,this._channel.getEventName(p.default.TYPE),(function(e,t){var n=s.default.decode(t,p.default);r.fire("suggestionUpdated",n)}))}},{key:"_onWsGatewayStateChange",value:function(e){e===y.WEB_SOCKET_GATEWAY_STATES.DISCONNECTED&&this.disconnect()}},{key:"_sendRequest",value:function(e,n){if(!this._wsGateway||!this._isConnected)throw new k.default("Track Changes",this);return this._wsGateway._sendRequest(t._SERVICE,e,s.default.encode(n))}}]),e}();_._SERVICE=t._SERVICE,o.default(_,a.default),t.default=_},function(e,t){e.exports='\x3c!--\n\n What you\'re currently looking at is the source code of a legally protected, proprietary software.\n CKEditor 5 Collaboration is licensed under a commercial license and protected by copyright law. Where not otherwise indicated,\n all CKEditor 5 Collaboration content is authored by CKSource engineers and consists of CKSource-owned intellectual property.\n\n Copyright (c) 2003-2021, CKSource Frederico Knabben. All rights reserved.\n\n!--\x3e\n\n<svg viewBox="0 0 20 20" width="20" height="20" xmlns="http://www.w3.org/2000/svg"><g fill="#000" fill-rule="nonzero"><path d="M1 3.28C1 2.574 1.574 2 2.272 2h10.23c.703 0 1.272.573 1.272 1.28v12.768c0 .708-.574 1.281-1.271 1.281H2.272A1.276 1.276 0 0 1 1 16.049V3.28zm11.503 12.954c-.008 0-.006-12.77-.006-12.77 0-.003-10.225-.004-10.225-.004.007 0 .005 12.77.005 12.77 0 .003 10.226.004 10.226.004zm-8.31-9.58c0-.353.292-.64.636-.64h5.116c.351 0 .636.284.636.64a.641.641 0 0 1-.636.638H4.829a.636.636 0 0 1-.635-.639zm0 2.554c0-.352.292-.638.636-.638h5.116c.351 0 .636.283.636.638a.641.641 0 0 1-.636.639H4.829a.636.636 0 0 1-.635-.639zm0 2.555c0-.353.289-.639.633-.639h2.567c.35 0 .633.284.633.64a.639.639 0 0 1-.633.638H4.826a.634.634 0 0 1-.632-.639z"/><path d="M10.515 17.958l.154-.23c-.195-.099-.304-.193-.328-.28-.024-.09.001-.275.076-.552.062-.165.099-.296.111-.393.013-.159.013-.319 0-.478-.138-.41-.2-.686-.187-.83.013-.145.117-.335.313-.57l4.465-6.208c.356-.6 1.059-.56 2.11.119 1.051.68 1.443 1.271 1.177 1.771L14.53 17.14c-.105.271-.22.444-.347.516-.128.07-.399.118-.813.138a2.954 2.954 0 0 0-.487.21 2.044 2.044 0 0 0-.347.31c-.193.174-.332.262-.416.262-.064 0-.178-.05-.346-.15l-.204.27-1.056-.738h.001zm-.184.274l1.039.727-.259.34H9.614l.717-1.067z"/></g></svg>\n'},function(e,t,n){var r=n(2),i=n(177);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]),r(i,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=i.locals||{}},function(e,t){e.exports=".ck-hidden{display:none!important}.ck.ck-reset,.ck.ck-reset_all,.ck.ck-reset_all *{box-sizing:border-box;width:auto;height:auto;position:static}:root{--ck-z-default:1;--ck-z-modal:calc(var(--ck-z-default) + 999)}.ck-transitions-disabled,.ck-transitions-disabled *{transition:none!important}:root{--ck-color-base-foreground:#fafafa;--ck-color-base-background:#fff;--ck-color-base-border:#c4c4c4;--ck-color-base-action:#61b045;--ck-color-base-focus:#6cb5f9;--ck-color-base-text:#333;--ck-color-base-active:#198cf0;--ck-color-base-active-focus:#0e7fe1;--ck-color-base-error:#db3700;--ck-color-focus-border-coordinates:208,79%,51%;--ck-color-focus-border:hsl(var(--ck-color-focus-border-coordinates));--ck-color-focus-outer-shadow:#bcdefb;--ck-color-focus-disabled-shadow:rgba(119,186,248,0.3);--ck-color-focus-error-shadow:rgba(255,64,31,0.3);--ck-color-text:var(--ck-color-base-text);--ck-color-shadow-drop:rgba(0,0,0,0.15);--ck-color-shadow-drop-active:rgba(0,0,0,0.2);--ck-color-shadow-inner:rgba(0,0,0,0.1);--ck-color-button-default-background:transparent;--ck-color-button-default-hover-background:#e6e6e6;--ck-color-button-default-active-background:#d9d9d9;--ck-color-button-default-active-shadow:#bfbfbf;--ck-color-button-default-disabled-background:transparent;--ck-color-button-on-background:#dedede;--ck-color-button-on-hover-background:#c4c4c4;--ck-color-button-on-active-background:#bababa;--ck-color-button-on-active-shadow:#a1a1a1;--ck-color-button-on-disabled-background:#dedede;--ck-color-button-action-background:var(--ck-color-base-action);--ck-color-button-action-hover-background:#579e3d;--ck-color-button-action-active-background:#53973b;--ck-color-button-action-active-shadow:#498433;--ck-color-button-action-disabled-background:#7ec365;--ck-color-button-action-text:var(--ck-color-base-background);--ck-color-button-save:#008a00;--ck-color-button-cancel:#db3700;--ck-color-switch-button-off-background:#b0b0b0;--ck-color-switch-button-off-hover-background:#a3a3a3;--ck-color-switch-button-on-background:var(--ck-color-button-action-background);--ck-color-switch-button-on-hover-background:#579e3d;--ck-color-switch-button-inner-background:var(--ck-color-base-background);--ck-color-switch-button-inner-shadow:rgba(0,0,0,0.1);--ck-color-dropdown-panel-background:var(--ck-color-base-background);--ck-color-dropdown-panel-border:var(--ck-color-base-border);--ck-color-input-background:var(--ck-color-base-background);--ck-color-input-border:#c7c7c7;--ck-color-input-error-border:var(--ck-color-base-error);--ck-color-input-text:var(--ck-color-base-text);--ck-color-input-disabled-background:#f2f2f2;--ck-color-input-disabled-border:#c7c7c7;--ck-color-input-disabled-text:#757575;--ck-color-list-background:var(--ck-color-base-background);--ck-color-list-button-hover-background:var(--ck-color-button-default-hover-background);--ck-color-list-button-on-background:var(--ck-color-base-active);--ck-color-list-button-on-background-focus:var(--ck-color-base-active-focus);--ck-color-list-button-on-text:var(--ck-color-base-background);--ck-color-panel-background:var(--ck-color-base-background);--ck-color-panel-border:var(--ck-color-base-border);--ck-color-toolbar-background:var(--ck-color-base-foreground);--ck-color-toolbar-border:var(--ck-color-base-border);--ck-color-tooltip-background:var(--ck-color-base-text);--ck-color-tooltip-text:var(--ck-color-base-background);--ck-color-engine-placeholder-text:#707070;--ck-color-upload-bar-background:#6cb5f9;--ck-color-link-default:#0000f0;--ck-color-link-selected-background:rgba(31,177,255,0.1);--ck-color-link-fake-selection:rgba(31,177,255,0.3);--ck-disabled-opacity:.5;--ck-focus-outer-shadow-geometry:0 0 0 3px;--ck-focus-outer-shadow:var(--ck-focus-outer-shadow-geometry) var(--ck-color-focus-outer-shadow);--ck-focus-disabled-outer-shadow:var(--ck-focus-outer-shadow-geometry) var(--ck-color-focus-disabled-shadow);--ck-focus-error-outer-shadow:var(--ck-focus-outer-shadow-geometry) var(--ck-color-focus-error-shadow);--ck-focus-ring:1px solid var(--ck-color-focus-border);--ck-font-size-base:13px;--ck-line-height-base:1.84615;--ck-font-face:Helvetica,Arial,Tahoma,Verdana,Sans-Serif;--ck-font-size-tiny:0.7em;--ck-font-size-small:0.75em;--ck-font-size-normal:1em;--ck-font-size-big:1.4em;--ck-font-size-large:1.8em;--ck-ui-component-min-height:2.3em}.ck.ck-reset,.ck.ck-reset_all,.ck.ck-reset_all *{margin:0;padding:0;border:0;background:transparent;text-decoration:none;vertical-align:middle;transition:none;word-wrap:break-word}.ck.ck-reset_all,.ck.ck-reset_all *{border-collapse:collapse;font:normal normal normal var(--ck-font-size-base)/var(--ck-line-height-base) var(--ck-font-face);color:var(--ck-color-text);text-align:left;white-space:nowrap;cursor:auto;float:none}.ck.ck-reset_all .ck-rtl *{text-align:right}.ck.ck-reset_all iframe{vertical-align:inherit}.ck.ck-reset_all textarea{white-space:pre-wrap}.ck.ck-reset_all input[type=password],.ck.ck-reset_all input[type=text],.ck.ck-reset_all textarea{cursor:text}.ck.ck-reset_all input[type=password][disabled],.ck.ck-reset_all input[type=text][disabled],.ck.ck-reset_all textarea[disabled]{cursor:default}.ck.ck-reset_all fieldset{padding:10px;border:2px groove #dfdee3}.ck.ck-reset_all button::-moz-focus-inner{padding:0;border:0}.ck[dir=rtl],.ck[dir=rtl] .ck{text-align:right}:root{--ck-border-radius:2px;--ck-inner-shadow:2px 2px 3px var(--ck-color-shadow-inner) inset;--ck-drop-shadow:0 1px 2px 1px var(--ck-color-shadow-drop);--ck-drop-shadow-active:0 3px 6px 1px var(--ck-color-shadow-drop-active);--ck-spacing-unit:0.6em;--ck-spacing-large:calc(var(--ck-spacing-unit)*1.5);--ck-spacing-standard:var(--ck-spacing-unit);--ck-spacing-medium:calc(var(--ck-spacing-unit)*0.8);--ck-spacing-small:calc(var(--ck-spacing-unit)*0.5);--ck-spacing-tiny:calc(var(--ck-spacing-unit)*0.3);--ck-spacing-extra-tiny:calc(var(--ck-spacing-unit)*0.16)}"},function(e,t,n){var r=n(2),i=n(179);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]),r(i,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=i.locals||{}},function(e,t){e.exports=".ck.ck-icon{vertical-align:middle}:root{--ck-icon-size:calc(var(--ck-line-height-base)*var(--ck-font-size-normal))}.ck.ck-icon{width:var(--ck-icon-size);height:var(--ck-icon-size);font-size:.8333350694em;will-change:transform}.ck.ck-icon,.ck.ck-icon *{color:inherit;cursor:inherit}.ck.ck-icon :not([fill]){fill:currentColor}"},function(e,t,n){var r=n(2),i=n(181);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]),r(i,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=i.locals||{}},function(e,t){e.exports='.ck.ck-tooltip,.ck.ck-tooltip .ck-tooltip__text:after{position:absolute;pointer-events:none;-webkit-backface-visibility:hidden}.ck.ck-tooltip{visibility:hidden;opacity:0;display:none;z-index:var(--ck-z-modal)}.ck.ck-tooltip .ck-tooltip__text{display:inline-block}.ck.ck-tooltip .ck-tooltip__text:after{content:"";width:0;height:0}:root{--ck-tooltip-arrow-size:5px}.ck.ck-tooltip{left:50%;top:0;transition:opacity .2s ease-in-out .2s}.ck.ck-tooltip .ck-tooltip__text{border-radius:0}.ck-rounded-corners .ck.ck-tooltip .ck-tooltip__text,.ck.ck-tooltip .ck-tooltip__text.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-tooltip .ck-tooltip__text{font-size:.9em;line-height:1.5;color:var(--ck-color-tooltip-text);padding:var(--ck-spacing-small) var(--ck-spacing-medium);background:var(--ck-color-tooltip-background);position:relative;left:-50%}.ck.ck-tooltip .ck-tooltip__text:after{transition:opacity .2s ease-in-out .2s;border-style:solid;left:50%}.ck.ck-tooltip.ck-tooltip_s,.ck.ck-tooltip.ck-tooltip_se,.ck.ck-tooltip.ck-tooltip_sw{bottom:calc(var(--ck-tooltip-arrow-size)*-1);transform:translateY(100%)}.ck.ck-tooltip.ck-tooltip_s .ck-tooltip__text:after,.ck.ck-tooltip.ck-tooltip_se .ck-tooltip__text:after,.ck.ck-tooltip.ck-tooltip_sw .ck-tooltip__text:after{top:calc(var(--ck-tooltip-arrow-size)*-1 + 1px);transform:translateX(-50%);border-left-color:transparent;border-bottom-color:var(--ck-color-tooltip-background);border-right-color:transparent;border-top-color:transparent;border-left-width:var(--ck-tooltip-arrow-size);border-bottom-width:var(--ck-tooltip-arrow-size);border-right-width:var(--ck-tooltip-arrow-size);border-top-width:0}.ck.ck-tooltip.ck-tooltip_sw{right:50%;left:auto}.ck.ck-tooltip.ck-tooltip_sw .ck-tooltip__text{left:auto;right:calc(var(--ck-tooltip-arrow-size)*-2)}.ck.ck-tooltip.ck-tooltip_sw .ck-tooltip__text:after{left:auto;right:0}.ck.ck-tooltip.ck-tooltip_se{left:50%;right:auto}.ck.ck-tooltip.ck-tooltip_se .ck-tooltip__text{right:auto;left:calc(var(--ck-tooltip-arrow-size)*-2)}.ck.ck-tooltip.ck-tooltip_se .ck-tooltip__text:after{right:auto;left:0;transform:translateX(50%)}.ck.ck-tooltip.ck-tooltip_n{top:calc(var(--ck-tooltip-arrow-size)*-1);transform:translateY(-100%)}.ck.ck-tooltip.ck-tooltip_n .ck-tooltip__text:after{bottom:calc(var(--ck-tooltip-arrow-size)*-1);transform:translateX(-50%);border-left-color:transparent;border-bottom-color:transparent;border-right-color:transparent;border-top-color:var(--ck-color-tooltip-background);border-left-width:var(--ck-tooltip-arrow-size);border-bottom-width:0;border-right-width:var(--ck-tooltip-arrow-size);border-top-width:var(--ck-tooltip-arrow-size)}.ck.ck-tooltip.ck-tooltip_e{left:calc(100% + var(--ck-tooltip-arrow-size));top:50%}.ck.ck-tooltip.ck-tooltip_e .ck-tooltip__text{left:0;transform:translateY(-50%)}.ck.ck-tooltip.ck-tooltip_e .ck-tooltip__text:after{left:calc(var(--ck-tooltip-arrow-size)*-1);top:calc(50% - var(--ck-tooltip-arrow-size)*1);border-left-color:transparent;border-bottom-color:transparent;border-right-color:var(--ck-color-tooltip-background);border-top-color:transparent;border-left-width:0;border-bottom-width:var(--ck-tooltip-arrow-size);border-right-width:var(--ck-tooltip-arrow-size);border-top-width:var(--ck-tooltip-arrow-size)}.ck.ck-tooltip.ck-tooltip_w{right:calc(100% + var(--ck-tooltip-arrow-size));left:auto;top:50%}.ck.ck-tooltip.ck-tooltip_w .ck-tooltip__text{left:0;transform:translateY(-50%)}.ck.ck-tooltip.ck-tooltip_w .ck-tooltip__text:after{left:100%;top:calc(50% - var(--ck-tooltip-arrow-size)*1);border-left-color:var(--ck-color-tooltip-background);border-bottom-color:transparent;border-right-color:transparent;border-top-color:transparent;border-left-width:var(--ck-tooltip-arrow-size);border-bottom-width:var(--ck-tooltip-arrow-size);border-right-width:0;border-top-width:var(--ck-tooltip-arrow-size)}'},function(e,t,n){var r=n(2),i=n(183);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]),r(i,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=i.locals||{}},function(e,t){e.exports=".ck.ck-button,a.ck.ck-button{-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none}.ck.ck-button .ck-tooltip,a.ck.ck-button .ck-tooltip{display:block}@media (hover:none){.ck.ck-button .ck-tooltip,a.ck.ck-button .ck-tooltip{display:none}}.ck.ck-button,a.ck.ck-button{position:relative;display:inline-flex;align-items:center;justify-content:left}.ck.ck-button .ck-button__label,a.ck.ck-button .ck-button__label{display:none}.ck.ck-button.ck-button_with-text .ck-button__label,a.ck.ck-button.ck-button_with-text .ck-button__label{display:inline-block}.ck.ck-button:not(.ck-button_with-text),a.ck.ck-button:not(.ck-button_with-text){justify-content:center}.ck.ck-button:hover .ck-tooltip,a.ck.ck-button:hover .ck-tooltip{visibility:visible;opacity:1}.ck.ck-button:focus:not(:hover) .ck-tooltip,a.ck.ck-button:focus:not(:hover) .ck-tooltip{display:none}.ck.ck-button,a.ck.ck-button{background:var(--ck-color-button-default-background)}.ck.ck-button:not(.ck-disabled):hover,a.ck.ck-button:not(.ck-disabled):hover{background:var(--ck-color-button-default-hover-background)}.ck.ck-button:not(.ck-disabled):active,a.ck.ck-button:not(.ck-disabled):active{background:var(--ck-color-button-default-active-background);box-shadow:inset 0 2px 2px var(--ck-color-button-default-active-shadow)}.ck.ck-button.ck-disabled,a.ck.ck-button.ck-disabled{background:var(--ck-color-button-default-disabled-background)}.ck.ck-button,a.ck.ck-button{border-radius:0}.ck-rounded-corners .ck.ck-button,.ck-rounded-corners a.ck.ck-button,.ck.ck-button.ck-rounded-corners,a.ck.ck-button.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-button,a.ck.ck-button{white-space:nowrap;cursor:default;vertical-align:middle;padding:var(--ck-spacing-tiny);text-align:center;min-width:var(--ck-ui-component-min-height);min-height:var(--ck-ui-component-min-height);line-height:1;font-size:inherit;border:1px solid transparent;transition:box-shadow .2s ease-in-out,border .2s ease-in-out;-webkit-appearance:none}.ck.ck-button:active,.ck.ck-button:focus,a.ck.ck-button:active,a.ck.ck-button:focus{outline:none;border:var(--ck-focus-ring);box-shadow:var(--ck-focus-outer-shadow),0 0}.ck.ck-button .ck-button__icon use,.ck.ck-button .ck-button__icon use *,a.ck.ck-button .ck-button__icon use,a.ck.ck-button .ck-button__icon use *{color:inherit}.ck.ck-button .ck-button__label,a.ck.ck-button .ck-button__label{font-size:inherit;font-weight:inherit;color:inherit;cursor:inherit;vertical-align:middle}[dir=ltr] .ck.ck-button .ck-button__label,[dir=ltr] a.ck.ck-button .ck-button__label{text-align:left}[dir=rtl] .ck.ck-button .ck-button__label,[dir=rtl] a.ck.ck-button .ck-button__label{text-align:right}.ck.ck-button .ck-button__keystroke,a.ck.ck-button .ck-button__keystroke{color:inherit}[dir=ltr] .ck.ck-button .ck-button__keystroke,[dir=ltr] a.ck.ck-button .ck-button__keystroke{margin-left:var(--ck-spacing-large)}[dir=rtl] .ck.ck-button .ck-button__keystroke,[dir=rtl] a.ck.ck-button .ck-button__keystroke{margin-right:var(--ck-spacing-large)}.ck.ck-button .ck-button__keystroke,a.ck.ck-button .ck-button__keystroke{font-weight:700;opacity:.7}.ck.ck-button.ck-disabled:active,.ck.ck-button.ck-disabled:focus,a.ck.ck-button.ck-disabled:active,a.ck.ck-button.ck-disabled:focus{box-shadow:var(--ck-focus-disabled-outer-shadow),0 0}.ck.ck-button.ck-disabled .ck-button__icon,a.ck.ck-button.ck-disabled .ck-button__icon{opacity:var(--ck-disabled-opacity)}.ck.ck-button.ck-disabled .ck-button__label,a.ck.ck-button.ck-disabled .ck-button__label{opacity:var(--ck-disabled-opacity)}.ck.ck-button.ck-disabled .ck-button__keystroke,a.ck.ck-button.ck-disabled .ck-button__keystroke{opacity:.3}.ck.ck-button.ck-button_with-text,a.ck.ck-button.ck-button_with-text{padding:var(--ck-spacing-tiny) var(--ck-spacing-standard)}[dir=ltr] .ck.ck-button.ck-button_with-text .ck-button__icon,[dir=ltr] a.ck.ck-button.ck-button_with-text .ck-button__icon{margin-left:calc(var(--ck-spacing-small)*-1);margin-right:var(--ck-spacing-small)}[dir=rtl] .ck.ck-button.ck-button_with-text .ck-button__icon,[dir=rtl] a.ck.ck-button.ck-button_with-text .ck-button__icon{margin-right:calc(var(--ck-spacing-small)*-1);margin-left:var(--ck-spacing-small)}.ck.ck-button.ck-button_with-keystroke .ck-button__label,a.ck.ck-button.ck-button_with-keystroke .ck-button__label{flex-grow:1}.ck.ck-button.ck-on,a.ck.ck-button.ck-on{background:var(--ck-color-button-on-background)}.ck.ck-button.ck-on:not(.ck-disabled):hover,a.ck.ck-button.ck-on:not(.ck-disabled):hover{background:var(--ck-color-button-on-hover-background)}.ck.ck-button.ck-on:not(.ck-disabled):active,a.ck.ck-button.ck-on:not(.ck-disabled):active{background:var(--ck-color-button-on-active-background);box-shadow:inset 0 2px 2px var(--ck-color-button-on-active-shadow)}.ck.ck-button.ck-on.ck-disabled,a.ck.ck-button.ck-on.ck-disabled{background:var(--ck-color-button-on-disabled-background)}.ck.ck-button.ck-button-save,a.ck.ck-button.ck-button-save{color:var(--ck-color-button-save)}.ck.ck-button.ck-button-cancel,a.ck.ck-button.ck-button-cancel{color:var(--ck-color-button-cancel)}.ck.ck-button-action,a.ck.ck-button-action{background:var(--ck-color-button-action-background)}.ck.ck-button-action:not(.ck-disabled):hover,a.ck.ck-button-action:not(.ck-disabled):hover{background:var(--ck-color-button-action-hover-background)}.ck.ck-button-action:not(.ck-disabled):active,a.ck.ck-button-action:not(.ck-disabled):active{background:var(--ck-color-button-action-active-background);box-shadow:inset 0 2px 2px var(--ck-color-button-action-active-shadow)}.ck.ck-button-action.ck-disabled,a.ck.ck-button-action.ck-disabled{background:var(--ck-color-button-action-disabled-background)}.ck.ck-button-action,a.ck.ck-button-action{color:var(--ck-color-button-action-text)}.ck.ck-button-bold,a.ck.ck-button-bold{font-weight:700}"},function(e,t,n){var r=n(2),i=n(185);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]),r(i,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=i.locals||{}},function(e,t){e.exports=".ck.ck-button.ck-switchbutton .ck-button__toggle,.ck.ck-button.ck-switchbutton .ck-button__toggle .ck-button__toggle__inner{display:block}:root{--ck-switch-button-toggle-width:2.6153846154em;--ck-switch-button-toggle-inner-size:1.0769230769em;--ck-switch-button-toggle-spacing:1px;--ck-switch-button-translation:calc(var(--ck-switch-button-toggle-width) - var(--ck-switch-button-toggle-inner-size) - var(--ck-switch-button-toggle-spacing)*2)}[dir=ltr] .ck.ck-button.ck-switchbutton .ck-button__label{margin-right:calc(var(--ck-spacing-large)*2)}[dir=rtl] .ck.ck-button.ck-switchbutton .ck-button__label{margin-left:calc(var(--ck-spacing-large)*2)}.ck.ck-button.ck-switchbutton .ck-button__toggle{border-radius:0}.ck-rounded-corners .ck.ck-button.ck-switchbutton .ck-button__toggle,.ck.ck-button.ck-switchbutton .ck-button__toggle.ck-rounded-corners{border-radius:var(--ck-border-radius)}[dir=ltr] .ck.ck-button.ck-switchbutton .ck-button__toggle{margin-left:auto}[dir=rtl] .ck.ck-button.ck-switchbutton .ck-button__toggle{margin-right:auto}.ck.ck-button.ck-switchbutton .ck-button__toggle{transition:background .4s ease;width:var(--ck-switch-button-toggle-width);background:var(--ck-color-switch-button-off-background)}.ck.ck-button.ck-switchbutton .ck-button__toggle .ck-button__toggle__inner{border-radius:0}.ck-rounded-corners .ck.ck-button.ck-switchbutton .ck-button__toggle .ck-button__toggle__inner,.ck.ck-button.ck-switchbutton .ck-button__toggle .ck-button__toggle__inner.ck-rounded-corners{border-radius:var(--ck-border-radius);border-radius:calc(var(--ck-border-radius)*0.5)}.ck.ck-button.ck-switchbutton .ck-button__toggle .ck-button__toggle__inner{margin:var(--ck-switch-button-toggle-spacing);width:var(--ck-switch-button-toggle-inner-size);height:var(--ck-switch-button-toggle-inner-size);background:var(--ck-color-switch-button-inner-background);transition:all .3s ease}.ck.ck-button.ck-switchbutton .ck-button__toggle:hover{background:var(--ck-color-switch-button-off-hover-background)}.ck.ck-button.ck-switchbutton .ck-button__toggle:hover .ck-button__toggle__inner{box-shadow:0 0 0 5px var(--ck-color-switch-button-inner-shadow)}.ck.ck-button.ck-switchbutton.ck-disabled .ck-button__toggle{opacity:var(--ck-disabled-opacity)}.ck.ck-button.ck-switchbutton.ck-on .ck-button__toggle{background:var(--ck-color-switch-button-on-background)}.ck.ck-button.ck-switchbutton.ck-on .ck-button__toggle:hover{background:var(--ck-color-switch-button-on-hover-background)}[dir=ltr] .ck.ck-button.ck-switchbutton.ck-on .ck-button__toggle .ck-button__toggle__inner{transform:translateX(var(--ck-switch-button-translation))}[dir=rtl] .ck.ck-button.ck-switchbutton.ck-on .ck-button__toggle .ck-button__toggle__inner{transform:translateX(calc(var(--ck-switch-button-translation)*-1))}"},function(e,t,n){var r=n(2),i=n(187);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]),r(i,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=i.locals||{}},function(e,t){e.exports=".ck.ck-color-grid{display:grid}:root{--ck-color-grid-tile-size:24px;--ck-color-color-grid-check-icon:#000}.ck.ck-color-grid{grid-gap:5px;padding:8px}.ck.ck-color-grid__tile{width:var(--ck-color-grid-tile-size);height:var(--ck-color-grid-tile-size);min-width:var(--ck-color-grid-tile-size);min-height:var(--ck-color-grid-tile-size);padding:0;transition:box-shadow .2s ease;border:0}.ck.ck-color-grid__tile.ck-disabled{cursor:unset;transition:unset}.ck.ck-color-grid__tile.ck-color-table__color-tile_bordered{box-shadow:0 0 0 1px var(--ck-color-base-border)}.ck.ck-color-grid__tile .ck.ck-icon{display:none;color:var(--ck-color-color-grid-check-icon)}.ck.ck-color-grid__tile.ck-on{box-shadow:inset 0 0 0 1px var(--ck-color-base-background),0 0 0 2px var(--ck-color-base-text)}.ck.ck-color-grid__tile.ck-on .ck.ck-icon{display:block}.ck.ck-color-grid__tile.ck-on,.ck.ck-color-grid__tile:focus:not(.ck-disabled),.ck.ck-color-grid__tile:hover:not(.ck-disabled){border:0}.ck.ck-color-grid__tile:focus:not(.ck-disabled),.ck.ck-color-grid__tile:hover:not(.ck-disabled){box-shadow:inset 0 0 0 1px var(--ck-color-base-background),0 0 0 2px var(--ck-color-focus-border)}.ck.ck-color-grid__label{padding:0 var(--ck-spacing-standard)}"},function(e,t,n){var r=n(2),i=n(189);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]),r(i,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=i.locals||{}},function(e,t){e.exports=".ck.ck-splitbutton{font-size:inherit}.ck.ck-splitbutton .ck-splitbutton__action:focus{z-index:calc(var(--ck-z-default) + 1)}.ck.ck-splitbutton.ck-splitbutton_open>.ck-button .ck-tooltip{display:none}:root{--ck-color-split-button-hover-background:#ebebeb;--ck-color-split-button-hover-border:#b3b3b3}[dir=ltr] .ck.ck-splitbutton>.ck-splitbutton__action{border-top-right-radius:unset;border-bottom-right-radius:unset}[dir=rtl] .ck.ck-splitbutton>.ck-splitbutton__action{border-top-left-radius:unset;border-bottom-left-radius:unset}.ck.ck-splitbutton>.ck-splitbutton__arrow{min-width:unset}[dir=ltr] .ck.ck-splitbutton>.ck-splitbutton__arrow{border-radius:0}.ck-rounded-corners [dir=ltr] .ck.ck-splitbutton>.ck-splitbutton__arrow,[dir=ltr] .ck.ck-splitbutton>.ck-splitbutton__arrow.ck-rounded-corners{border-radius:var(--ck-border-radius);border-top-left-radius:unset;border-bottom-left-radius:unset}[dir=rtl] .ck.ck-splitbutton>.ck-splitbutton__arrow{border-top-right-radius:unset;border-bottom-right-radius:unset}.ck.ck-splitbutton>.ck-splitbutton__arrow svg{width:var(--ck-dropdown-arrow-size)}.ck.ck-splitbutton.ck-splitbutton_open>.ck-button:not(.ck-on):not(.ck-disabled):not(:hover),.ck.ck-splitbutton:hover>.ck-button:not(.ck-on):not(.ck-disabled):not(:hover){background:var(--ck-color-split-button-hover-background)}[dir=ltr] .ck.ck-splitbutton.ck-splitbutton_open>.ck-splitbutton__arrow:not(.ck-disabled),[dir=ltr] .ck.ck-splitbutton:hover>.ck-splitbutton__arrow:not(.ck-disabled){border-left-color:var(--ck-color-split-button-hover-border)}[dir=rtl] .ck.ck-splitbutton.ck-splitbutton_open>.ck-splitbutton__arrow:not(.ck-disabled),[dir=rtl] .ck.ck-splitbutton:hover>.ck-splitbutton__arrow:not(.ck-disabled){border-right-color:var(--ck-color-split-button-hover-border)}.ck.ck-splitbutton.ck-splitbutton_open{border-radius:0}.ck-rounded-corners .ck.ck-splitbutton.ck-splitbutton_open,.ck.ck-splitbutton.ck-splitbutton_open.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck-rounded-corners .ck.ck-splitbutton.ck-splitbutton_open>.ck-splitbutton__action,.ck.ck-splitbutton.ck-splitbutton_open.ck-rounded-corners>.ck-splitbutton__action{border-bottom-left-radius:0}.ck-rounded-corners .ck.ck-splitbutton.ck-splitbutton_open>.ck-splitbutton__arrow,.ck.ck-splitbutton.ck-splitbutton_open.ck-rounded-corners>.ck-splitbutton__arrow{border-bottom-right-radius:0}"},function(e,t,n){var r=n(2),i=n(191);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]),r(i,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=i.locals||{}},function(e,t){e.exports=":root{--ck-dropdown-max-width:75vw}.ck.ck-dropdown{display:inline-block;position:relative}.ck.ck-dropdown .ck-dropdown__arrow{pointer-events:none;z-index:var(--ck-z-default)}.ck.ck-dropdown .ck-button.ck-dropdown__button{width:100%}.ck.ck-dropdown .ck-button.ck-dropdown__button.ck-on .ck-tooltip{display:none}.ck.ck-dropdown .ck-dropdown__panel{-webkit-backface-visibility:hidden;display:none;z-index:var(--ck-z-modal);max-width:var(--ck-dropdown-max-width);position:absolute}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel-visible{display:inline-block}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_n,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_ne,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_nme,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_nmw,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_nw{bottom:100%}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_s,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_se,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_sme,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_smw,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_sw{top:100%;bottom:auto}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_ne,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_se{left:0}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_nw,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_sw{right:0}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_n,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_s{left:50%;transform:translateX(-50%)}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_nmw,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_smw{left:75%;transform:translateX(-75%)}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_nme,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_sme{left:25%;transform:translateX(-25%)}.ck.ck-toolbar .ck-dropdown__panel{z-index:calc(var(--ck-z-modal) + 1)}:root{--ck-dropdown-arrow-size:calc(var(--ck-icon-size)*0.5)}.ck.ck-dropdown{font-size:inherit}.ck.ck-dropdown .ck-dropdown__arrow{width:var(--ck-dropdown-arrow-size)}[dir=ltr] .ck.ck-dropdown .ck-dropdown__arrow{right:var(--ck-spacing-standard);margin-left:var(--ck-spacing-standard)}[dir=rtl] .ck.ck-dropdown .ck-dropdown__arrow{left:var(--ck-spacing-standard);margin-right:var(--ck-spacing-small)}.ck.ck-dropdown.ck-disabled .ck-dropdown__arrow{opacity:var(--ck-disabled-opacity)}[dir=ltr] .ck.ck-dropdown .ck-button.ck-dropdown__button:not(.ck-button_with-text){padding-left:var(--ck-spacing-small)}[dir=rtl] .ck.ck-dropdown .ck-button.ck-dropdown__button:not(.ck-button_with-text){padding-right:var(--ck-spacing-small)}.ck.ck-dropdown .ck-button.ck-dropdown__button .ck-button__label{width:7em;overflow:hidden;text-overflow:ellipsis}.ck.ck-dropdown .ck-button.ck-dropdown__button.ck-disabled .ck-button__label{opacity:var(--ck-disabled-opacity)}.ck.ck-dropdown .ck-button.ck-dropdown__button.ck-on{border-bottom-left-radius:0;border-bottom-right-radius:0}.ck.ck-dropdown .ck-button.ck-dropdown__button.ck-dropdown__button_label-width_auto .ck-button__label{width:auto}.ck.ck-dropdown .ck-button.ck-dropdown__button.ck-off:active,.ck.ck-dropdown .ck-button.ck-dropdown__button.ck-on:active{box-shadow:none}.ck.ck-dropdown .ck-button.ck-dropdown__button.ck-off:active:focus,.ck.ck-dropdown .ck-button.ck-dropdown__button.ck-on:active:focus{box-shadow:var(--ck-focus-outer-shadow),0 0}.ck.ck-dropdown__panel{border-radius:0}.ck-rounded-corners .ck.ck-dropdown__panel,.ck.ck-dropdown__panel.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-dropdown__panel{box-shadow:var(--ck-drop-shadow),0 0;background:var(--ck-color-dropdown-panel-background);border:1px solid var(--ck-color-dropdown-panel-border);bottom:0;min-width:100%}.ck.ck-dropdown__panel.ck-dropdown__panel_se{border-top-left-radius:0}.ck.ck-dropdown__panel.ck-dropdown__panel_sw{border-top-right-radius:0}.ck.ck-dropdown__panel.ck-dropdown__panel_ne{border-bottom-left-radius:0}.ck.ck-dropdown__panel.ck-dropdown__panel_nw{border-bottom-right-radius:0}"},function(e,t,n){var r=n(2),i=n(193);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]),r(i,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=i.locals||{}},function(e,t){e.exports=".ck.ck-toolbar{-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none;display:flex;flex-flow:row nowrap;align-items:center}.ck.ck-toolbar>.ck-toolbar__items{display:flex;flex-flow:row wrap;align-items:center;flex-grow:1}.ck.ck-toolbar .ck.ck-toolbar__separator{display:inline-block}.ck.ck-toolbar .ck.ck-toolbar__separator:first-child,.ck.ck-toolbar .ck.ck-toolbar__separator:last-child{display:none}.ck.ck-toolbar .ck-toolbar__line-break{flex-basis:100%}.ck.ck-toolbar.ck-toolbar_grouping>.ck-toolbar__items{flex-wrap:nowrap}.ck.ck-toolbar.ck-toolbar_vertical>.ck-toolbar__items{flex-direction:column}.ck.ck-toolbar.ck-toolbar_floating>.ck-toolbar__items{flex-wrap:nowrap}.ck.ck-toolbar>.ck.ck-toolbar__grouped-dropdown>.ck-dropdown__button .ck-dropdown__arrow{display:none}.ck.ck-toolbar{border-radius:0}.ck-rounded-corners .ck.ck-toolbar,.ck.ck-toolbar.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-toolbar{background:var(--ck-color-toolbar-background);padding:0 var(--ck-spacing-small);border:1px solid var(--ck-color-toolbar-border)}.ck.ck-toolbar .ck.ck-toolbar__separator{align-self:stretch;width:1px;min-width:1px;background:var(--ck-color-toolbar-border);margin-top:var(--ck-spacing-small);margin-bottom:var(--ck-spacing-small)}.ck.ck-toolbar .ck-toolbar__line-break{height:0}.ck.ck-toolbar>.ck-toolbar__items>:not(.ck-toolbar__line-break){margin-right:var(--ck-spacing-small)}.ck.ck-toolbar>.ck-toolbar__items:empty+.ck.ck-toolbar__separator{display:none}.ck.ck-toolbar>.ck-toolbar__items>:not(.ck-toolbar__line-break),.ck.ck-toolbar>.ck.ck-toolbar__grouped-dropdown{margin-top:var(--ck-spacing-small);margin-bottom:var(--ck-spacing-small)}.ck.ck-toolbar.ck-toolbar_vertical{padding:0}.ck.ck-toolbar.ck-toolbar_vertical>.ck-toolbar__items>.ck{width:100%;margin:0;border-radius:0;border:0}.ck.ck-toolbar.ck-toolbar_compact{padding:0}.ck.ck-toolbar.ck-toolbar_compact>.ck-toolbar__items>*{margin:0}.ck.ck-toolbar.ck-toolbar_compact>.ck-toolbar__items>:not(:first-child):not(:last-child){border-radius:0}.ck.ck-toolbar>.ck.ck-toolbar__grouped-dropdown>.ck.ck-button.ck-dropdown__button{padding-left:var(--ck-spacing-tiny)}.ck-toolbar-container .ck.ck-toolbar{border:0}.ck.ck-toolbar[dir=rtl]>.ck-toolbar__items>.ck,[dir=rtl] .ck.ck-toolbar>.ck-toolbar__items>.ck{margin-right:0}.ck.ck-toolbar[dir=rtl]:not(.ck-toolbar_compact)>.ck-toolbar__items>.ck,[dir=rtl] .ck.ck-toolbar:not(.ck-toolbar_compact)>.ck-toolbar__items>.ck{margin-left:var(--ck-spacing-small)}.ck.ck-toolbar[dir=rtl]>.ck-toolbar__items>.ck:last-child,[dir=rtl] .ck.ck-toolbar>.ck-toolbar__items>.ck:last-child{margin-left:0}.ck.ck-toolbar[dir=rtl].ck-toolbar_compact>.ck-toolbar__items>.ck:first-child,[dir=rtl] .ck.ck-toolbar.ck-toolbar_compact>.ck-toolbar__items>.ck:first-child{border-top-left-radius:0;border-bottom-left-radius:0}.ck.ck-toolbar[dir=rtl].ck-toolbar_compact>.ck-toolbar__items>.ck:last-child,[dir=rtl] .ck.ck-toolbar.ck-toolbar_compact>.ck-toolbar__items>.ck:last-child{border-top-right-radius:0;border-bottom-right-radius:0}.ck.ck-toolbar[dir=rtl]>.ck.ck-toolbar__separator,[dir=rtl] .ck.ck-toolbar>.ck.ck-toolbar__separator{margin-left:var(--ck-spacing-small)}.ck.ck-toolbar[dir=rtl].ck-toolbar_grouping>.ck-toolbar__items:not(:empty):not(:only-child),[dir=rtl] .ck.ck-toolbar.ck-toolbar_grouping>.ck-toolbar__items:not(:empty):not(:only-child){margin-left:var(--ck-spacing-small)}.ck.ck-toolbar[dir=ltr]>.ck-toolbar__items>.ck:last-child,[dir=ltr] .ck.ck-toolbar>.ck-toolbar__items>.ck:last-child{margin-right:0}.ck.ck-toolbar[dir=ltr].ck-toolbar_compact>.ck-toolbar__items>.ck:first-child,[dir=ltr] .ck.ck-toolbar.ck-toolbar_compact>.ck-toolbar__items>.ck:first-child{border-top-right-radius:0;border-bottom-right-radius:0}.ck.ck-toolbar[dir=ltr].ck-toolbar_compact>.ck-toolbar__items>.ck:last-child,[dir=ltr] .ck.ck-toolbar.ck-toolbar_compact>.ck-toolbar__items>.ck:last-child{border-top-left-radius:0;border-bottom-left-radius:0}.ck.ck-toolbar[dir=ltr]>.ck.ck-toolbar__separator,[dir=ltr] .ck.ck-toolbar>.ck.ck-toolbar__separator{margin-right:var(--ck-spacing-small)}.ck.ck-toolbar[dir=ltr].ck-toolbar_grouping>.ck-toolbar__items:not(:empty):not(:only-child),[dir=ltr] .ck.ck-toolbar.ck-toolbar_grouping>.ck-toolbar__items:not(:empty):not(:only-child){margin-right:var(--ck-spacing-small)}"},function(e,t,n){var r=n(2),i=n(195);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]),r(i,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=i.locals||{}},function(e,t){e.exports=".ck.ck-list{-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none;display:flex;flex-direction:column}.ck.ck-list .ck-list__item,.ck.ck-list .ck-list__separator{display:block}.ck.ck-list .ck-list__item>:focus{position:relative;z-index:var(--ck-z-default)}.ck.ck-list{border-radius:0}.ck-rounded-corners .ck.ck-list,.ck.ck-list.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-list{list-style-type:none;background:var(--ck-color-list-background)}.ck.ck-list__item{cursor:default;min-width:12em}.ck.ck-list__item .ck-button{min-height:unset;width:100%;text-align:left;border-radius:0;padding:calc(var(--ck-line-height-base)*0.2*var(--ck-font-size-base)) calc(var(--ck-line-height-base)*0.4*var(--ck-font-size-base))}.ck.ck-list__item .ck-button .ck-button__label{line-height:calc(var(--ck-line-height-base)*1.2*var(--ck-font-size-base))}.ck.ck-list__item .ck-button:active{box-shadow:none}.ck.ck-list__item .ck-button.ck-on{background:var(--ck-color-list-button-on-background);color:var(--ck-color-list-button-on-text)}.ck.ck-list__item .ck-button.ck-on:active{box-shadow:none}.ck.ck-list__item .ck-button.ck-on:hover:not(.ck-disabled){background:var(--ck-color-list-button-on-background-focus)}.ck.ck-list__item .ck-button.ck-on:focus:not(.ck-disabled){border-color:var(--ck-color-base-background)}.ck.ck-list__item .ck-button:hover:not(.ck-disabled){background:var(--ck-color-list-button-hover-background)}.ck.ck-list__item .ck-switchbutton.ck-on{background:var(--ck-color-list-background);color:inherit}.ck.ck-list__item .ck-switchbutton.ck-on:hover:not(.ck-disabled){background:var(--ck-color-list-button-hover-background);color:inherit}.ck.ck-list__separator{height:1px;width:100%;background:var(--ck-color-base-border)}"},function(e,t,n){var r=n(2),i=n(197);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]),r(i,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=i.locals||{}},function(e,t){e.exports=":root{--ck-toolbar-dropdown-max-width:60vw}.ck.ck-toolbar-dropdown>.ck-dropdown__panel{width:max-content;max-width:var(--ck-toolbar-dropdown-max-width)}.ck.ck-toolbar-dropdown>.ck-dropdown__panel .ck-button:focus{z-index:calc(var(--ck-z-default) + 1)}.ck.ck-toolbar-dropdown .ck-toolbar{border:0}"},function(e,t,n){var r=n(2),i=n(199);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]),r(i,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=i.locals||{}},function(e,t){e.exports=".ck.ck-dropdown .ck-dropdown__panel .ck-list{border-radius:0}.ck-rounded-corners .ck.ck-dropdown .ck-dropdown__panel .ck-list,.ck.ck-dropdown .ck-dropdown__panel .ck-list.ck-rounded-corners{border-radius:var(--ck-border-radius);border-top-left-radius:0}.ck.ck-dropdown .ck-dropdown__panel .ck-list .ck-list__item:first-child .ck-button{border-radius:0}.ck-rounded-corners .ck.ck-dropdown .ck-dropdown__panel .ck-list .ck-list__item:first-child .ck-button,.ck.ck-dropdown .ck-dropdown__panel .ck-list .ck-list__item:first-child .ck-button.ck-rounded-corners{border-radius:var(--ck-border-radius);border-top-left-radius:0;border-bottom-left-radius:0;border-bottom-right-radius:0}.ck.ck-dropdown .ck-dropdown__panel .ck-list .ck-list__item:last-child .ck-button{border-radius:0}.ck-rounded-corners .ck.ck-dropdown .ck-dropdown__panel .ck-list .ck-list__item:last-child .ck-button,.ck.ck-dropdown .ck-dropdown__panel .ck-list .ck-list__item:last-child .ck-button.ck-rounded-corners{border-radius:var(--ck-border-radius);border-top-left-radius:0;border-top-right-radius:0}"},function(e,t,n){var r=n(2),i=n(201);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]),r(i,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=i.locals||{}},function(e,t){e.exports=":root{--ck-color-editable-blur-selection:#d9d9d9}.ck.ck-editor__editable:not(.ck-editor__nested-editable){border-radius:0}.ck-rounded-corners .ck.ck-editor__editable:not(.ck-editor__nested-editable),.ck.ck-editor__editable:not(.ck-editor__nested-editable).ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-editor__editable:not(.ck-editor__nested-editable).ck-focused{outline:none;border:var(--ck-focus-ring);box-shadow:var(--ck-inner-shadow),0 0}.ck.ck-editor__editable_inline{overflow:auto;padding:0 var(--ck-spacing-standard);border:1px solid transparent}.ck.ck-editor__editable_inline[dir=ltr]{text-align:left}.ck.ck-editor__editable_inline[dir=rtl]{text-align:right}.ck.ck-editor__editable_inline>:first-child{margin-top:var(--ck-spacing-large)}.ck.ck-editor__editable_inline>:last-child{margin-bottom:var(--ck-spacing-large)}.ck.ck-editor__editable_inline.ck-blurred ::selection{background:var(--ck-color-editable-blur-selection)}.ck.ck-balloon-panel.ck-toolbar-container[class*=arrow_n]:after{border-bottom-color:var(--ck-color-base-foreground)}.ck.ck-balloon-panel.ck-toolbar-container[class*=arrow_s]:after{border-top-color:var(--ck-color-base-foreground)}"},function(e,t,n){var r=n(2),i=n(203);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]),r(i,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=i.locals||{}},function(e,t){e.exports=".ck.ck-label{display:block}.ck.ck-voice-label{display:none}.ck.ck-label{font-weight:700}"},function(e,t,n){var r=n(2),i=n(205);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]),r(i,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=i.locals||{}},function(e,t){e.exports=".ck.ck-form__header{display:flex;flex-direction:row;flex-wrap:nowrap;align-items:center;justify-content:space-between}:root{--ck-form-header-height:38px}.ck.ck-form__header{padding:var(--ck-spacing-small) var(--ck-spacing-large);height:var(--ck-form-header-height);line-height:var(--ck-form-header-height);border-bottom:1px solid var(--ck-color-base-border)}.ck.ck-form__header .ck-form__header__label{font-weight:700}"},function(e,t,n){var r=n(2),i=n(207);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]),r(i,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=i.locals||{}},function(e,t){e.exports=":root{--ck-input-text-width:18em}.ck.ck-input-text{border-radius:0}.ck-rounded-corners .ck.ck-input-text,.ck.ck-input-text.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-input-text{background:var(--ck-color-input-background);border:1px solid var(--ck-color-input-border);padding:var(--ck-spacing-extra-tiny) var(--ck-spacing-medium);min-width:var(--ck-input-text-width);min-height:var(--ck-ui-component-min-height);transition:box-shadow .1s ease-in-out,border .1s ease-in-out}.ck.ck-input-text:focus{outline:none;border:var(--ck-focus-ring);box-shadow:var(--ck-focus-outer-shadow),0 0}.ck.ck-input-text[readonly]{border:1px solid var(--ck-color-input-disabled-border);background:var(--ck-color-input-disabled-background);color:var(--ck-color-input-disabled-text)}.ck.ck-input-text[readonly]:focus{box-shadow:var(--ck-focus-disabled-outer-shadow),0 0}.ck.ck-input-text.ck-error{border-color:var(--ck-color-input-error-border);animation:ck-text-input-shake .3s ease both}.ck.ck-input-text.ck-error:focus{box-shadow:var(--ck-focus-error-outer-shadow),0 0}@keyframes ck-text-input-shake{20%{transform:translateX(-2px)}40%{transform:translateX(2px)}60%{transform:translateX(-1px)}80%{transform:translateX(1px)}}"},function(e,t,n){var r=n(2),i=n(209);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]),r(i,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=i.locals||{}},function(e,t){e.exports=".ck.ck-labeled-field-view>.ck.ck-labeled-field-view__input-wrapper{display:flex;position:relative}.ck.ck-labeled-field-view .ck.ck-label{display:block;position:absolute}:root{--ck-labeled-field-view-transition:.1s cubic-bezier(0,0,0.24,0.95);--ck-labeled-field-empty-unfocused-max-width:100% - 2 * var(--ck-spacing-medium);--ck-color-labeled-field-label-background:var(--ck-color-base-background)}.ck.ck-labeled-field-view{border-radius:0}.ck-rounded-corners .ck.ck-labeled-field-view,.ck.ck-labeled-field-view.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-labeled-field-view>.ck.ck-labeled-field-view__input-wrapper{width:100%}.ck.ck-labeled-field-view>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label{top:0}[dir=ltr] .ck.ck-labeled-field-view>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label{left:0}[dir=rtl] .ck.ck-labeled-field-view>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label{right:0}.ck.ck-labeled-field-view>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label{pointer-events:none;transform-origin:0 0;transform:translate(var(--ck-spacing-medium),-6px) scale(.75);background:var(--ck-color-labeled-field-label-background);padding:0 calc(var(--ck-font-size-tiny)*0.5);line-height:normal;font-weight:400;text-overflow:ellipsis;overflow:hidden;max-width:100%;transition:transform var(--ck-labeled-field-view-transition),padding var(--ck-labeled-field-view-transition),background var(--ck-labeled-field-view-transition)}.ck.ck-labeled-field-view.ck-error .ck-input:not([readonly])+.ck.ck-label,.ck.ck-labeled-field-view.ck-error>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label{color:var(--ck-color-base-error)}.ck.ck-labeled-field-view .ck-labeled-field-view__status{font-size:var(--ck-font-size-small);margin-top:var(--ck-spacing-small);white-space:normal}.ck.ck-labeled-field-view .ck-labeled-field-view__status.ck-labeled-field-view__status_error{color:var(--ck-color-base-error)}.ck.ck-labeled-field-view.ck-disabled>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label,.ck.ck-labeled-field-view.ck-labeled-field-view_empty:not(.ck-labeled-field-view_focused)>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label{color:var(--ck-color-input-disabled-text)}[dir=ltr] .ck.ck-labeled-field-view.ck-disabled>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label,[dir=ltr] .ck.ck-labeled-field-view.ck-labeled-field-view_empty:not(.ck-labeled-field-view_focused):not(.ck-labeled-field-view_placeholder)>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label{transform:translate(var(--ck-spacing-medium),calc(var(--ck-font-size-base)*0.6)) scale(1)}[dir=rtl] .ck.ck-labeled-field-view.ck-disabled>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label,[dir=rtl] .ck.ck-labeled-field-view.ck-labeled-field-view_empty:not(.ck-labeled-field-view_focused):not(.ck-labeled-field-view_placeholder)>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label{transform:translate(calc(var(--ck-spacing-medium)*-1),calc(var(--ck-font-size-base)*0.6)) scale(1)}.ck.ck-labeled-field-view.ck-disabled>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label,.ck.ck-labeled-field-view.ck-labeled-field-view_empty:not(.ck-labeled-field-view_focused):not(.ck-labeled-field-view_placeholder)>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label{max-width:calc(var(--ck-labeled-field-empty-unfocused-max-width));background:transparent;padding:0}.ck.ck-labeled-field-view>.ck.ck-labeled-field-view__input-wrapper>.ck-dropdown>.ck.ck-button{background:transparent}.ck.ck-labeled-field-view.ck-labeled-field-view_empty>.ck.ck-labeled-field-view__input-wrapper>.ck-dropdown>.ck-button>.ck-button__label{opacity:0}.ck.ck-labeled-field-view.ck-labeled-field-view_empty:not(.ck-labeled-field-view_focused):not(.ck-labeled-field-view_placeholder)>.ck.ck-labeled-field-view__input-wrapper>.ck-dropdown+.ck-label{max-width:calc(var(--ck-labeled-field-empty-unfocused-max-width) - var(--ck-dropdown-arrow-size) - var(--ck-spacing-standard))}"},function(e,t,n){var r=n(2),i=n(211);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]),r(i,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=i.locals||{}},function(e,t){e.exports=':root{--ck-balloon-panel-arrow-z-index:calc(var(--ck-z-default) - 3)}.ck.ck-balloon-panel{display:none;position:absolute;z-index:var(--ck-z-modal)}.ck.ck-balloon-panel.ck-balloon-panel_with-arrow:after,.ck.ck-balloon-panel.ck-balloon-panel_with-arrow:before{content:"";position:absolute}.ck.ck-balloon-panel.ck-balloon-panel_with-arrow:before{z-index:var(--ck-balloon-panel-arrow-z-index)}.ck.ck-balloon-panel.ck-balloon-panel_with-arrow:after{z-index:calc(var(--ck-balloon-panel-arrow-z-index) + 1)}.ck.ck-balloon-panel[class*=arrow_n]:before{z-index:var(--ck-balloon-panel-arrow-z-index)}.ck.ck-balloon-panel[class*=arrow_n]:after{z-index:calc(var(--ck-balloon-panel-arrow-z-index) + 1)}.ck.ck-balloon-panel[class*=arrow_s]:before{z-index:var(--ck-balloon-panel-arrow-z-index)}.ck.ck-balloon-panel[class*=arrow_s]:after{z-index:calc(var(--ck-balloon-panel-arrow-z-index) + 1)}.ck.ck-balloon-panel.ck-balloon-panel_visible{display:block}:root{--ck-balloon-arrow-offset:2px;--ck-balloon-arrow-height:10px;--ck-balloon-arrow-half-width:8px;--ck-balloon-arrow-drop-shadow:0 2px 2px var(--ck-color-shadow-drop)}.ck.ck-balloon-panel{border-radius:0}.ck-rounded-corners .ck.ck-balloon-panel,.ck.ck-balloon-panel.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-balloon-panel{box-shadow:var(--ck-drop-shadow),0 0;min-height:15px;background:var(--ck-color-panel-background);border:1px solid var(--ck-color-panel-border)}.ck.ck-balloon-panel.ck-balloon-panel_with-arrow:after,.ck.ck-balloon-panel.ck-balloon-panel_with-arrow:before{width:0;height:0;border-style:solid}.ck.ck-balloon-panel[class*=arrow_n]:after,.ck.ck-balloon-panel[class*=arrow_n]:before{border-left-width:var(--ck-balloon-arrow-half-width);border-bottom-width:var(--ck-balloon-arrow-height);border-right-width:var(--ck-balloon-arrow-half-width);border-top-width:0}.ck.ck-balloon-panel[class*=arrow_n]:before{border-bottom-color:var(--ck-color-panel-border)}.ck.ck-balloon-panel[class*=arrow_n]:after,.ck.ck-balloon-panel[class*=arrow_n]:before{border-left-color:transparent;border-right-color:transparent;border-top-color:transparent}.ck.ck-balloon-panel[class*=arrow_n]:after{border-bottom-color:var(--ck-color-panel-background);margin-top:var(--ck-balloon-arrow-offset)}.ck.ck-balloon-panel[class*=arrow_s]:after,.ck.ck-balloon-panel[class*=arrow_s]:before{border-left-width:var(--ck-balloon-arrow-half-width);border-bottom-width:0;border-right-width:var(--ck-balloon-arrow-half-width);border-top-width:var(--ck-balloon-arrow-height)}.ck.ck-balloon-panel[class*=arrow_s]:before{border-top-color:var(--ck-color-panel-border);filter:drop-shadow(var(--ck-balloon-arrow-drop-shadow))}.ck.ck-balloon-panel[class*=arrow_s]:after,.ck.ck-balloon-panel[class*=arrow_s]:before{border-left-color:transparent;border-bottom-color:transparent;border-right-color:transparent}.ck.ck-balloon-panel[class*=arrow_s]:after{border-top-color:var(--ck-color-panel-background);margin-bottom:var(--ck-balloon-arrow-offset)}.ck.ck-balloon-panel.ck-balloon-panel_arrow_n:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_n:before{left:50%;margin-left:calc(var(--ck-balloon-arrow-half-width)*-1);top:calc(var(--ck-balloon-arrow-height)*-1)}.ck.ck-balloon-panel.ck-balloon-panel_arrow_nw:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_nw:before{left:calc(var(--ck-balloon-arrow-half-width)*2);top:calc(var(--ck-balloon-arrow-height)*-1)}.ck.ck-balloon-panel.ck-balloon-panel_arrow_ne:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_ne:before{right:calc(var(--ck-balloon-arrow-half-width)*2);top:calc(var(--ck-balloon-arrow-height)*-1)}.ck.ck-balloon-panel.ck-balloon-panel_arrow_s:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_s:before{left:50%;margin-left:calc(var(--ck-balloon-arrow-half-width)*-1);bottom:calc(var(--ck-balloon-arrow-height)*-1)}.ck.ck-balloon-panel.ck-balloon-panel_arrow_sw:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_sw:before{left:calc(var(--ck-balloon-arrow-half-width)*2);bottom:calc(var(--ck-balloon-arrow-height)*-1)}.ck.ck-balloon-panel.ck-balloon-panel_arrow_se:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_se:before{right:calc(var(--ck-balloon-arrow-half-width)*2);bottom:calc(var(--ck-balloon-arrow-height)*-1)}.ck.ck-balloon-panel.ck-balloon-panel_arrow_sme:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_sme:before{right:25%;margin-right:calc(var(--ck-balloon-arrow-half-width)*2);bottom:calc(var(--ck-balloon-arrow-height)*-1)}.ck.ck-balloon-panel.ck-balloon-panel_arrow_smw:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_smw:before{left:25%;margin-left:calc(var(--ck-balloon-arrow-half-width)*2);bottom:calc(var(--ck-balloon-arrow-height)*-1)}.ck.ck-balloon-panel.ck-balloon-panel_arrow_nme:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_nme:before{right:25%;margin-right:calc(var(--ck-balloon-arrow-half-width)*2);top:calc(var(--ck-balloon-arrow-height)*-1)}.ck.ck-balloon-panel.ck-balloon-panel_arrow_nmw:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_nmw:before{left:25%;margin-left:calc(var(--ck-balloon-arrow-half-width)*2);top:calc(var(--ck-balloon-arrow-height)*-1)}'},function(e,t,n){var r=n(2),i=n(213);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]),r(i,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=i.locals||{}},function(e,t){e.exports=".ck .ck-balloon-rotator__navigation{display:flex;align-items:center;justify-content:center}.ck .ck-balloon-rotator__content .ck-toolbar{justify-content:center}.ck .ck-balloon-rotator__navigation{background:var(--ck-color-toolbar-background);border-bottom:1px solid var(--ck-color-toolbar-border);padding:0 var(--ck-spacing-small)}.ck .ck-balloon-rotator__navigation>*{margin-right:var(--ck-spacing-small);margin-top:var(--ck-spacing-small);margin-bottom:var(--ck-spacing-small)}.ck .ck-balloon-rotator__navigation .ck-balloon-rotator__counter{margin-right:var(--ck-spacing-standard);margin-left:var(--ck-spacing-small)}.ck .ck-balloon-rotator__content .ck.ck-annotation-wrapper{box-shadow:none}"},function(e,t,n){var r=n(2),i=n(215);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]),r(i,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=i.locals||{}},function(e,t){e.exports=".ck .ck-fake-panel{position:absolute;z-index:calc(var(--ck-z-modal) - 1)}.ck .ck-fake-panel div{position:absolute}.ck .ck-fake-panel div:first-child{z-index:2}.ck .ck-fake-panel div:nth-child(2){z-index:1}:root{--ck-balloon-fake-panel-offset-horizontal:6px;--ck-balloon-fake-panel-offset-vertical:6px}.ck .ck-fake-panel div{box-shadow:var(--ck-drop-shadow),0 0;min-height:15px;background:var(--ck-color-panel-background);border:1px solid var(--ck-color-panel-border);border-radius:var(--ck-border-radius);width:100%;height:100%}.ck .ck-fake-panel div:first-child{margin-left:var(--ck-balloon-fake-panel-offset-horizontal);margin-top:var(--ck-balloon-fake-panel-offset-vertical)}.ck .ck-fake-panel div:nth-child(2){margin-left:calc(var(--ck-balloon-fake-panel-offset-horizontal)*2);margin-top:calc(var(--ck-balloon-fake-panel-offset-vertical)*2)}.ck .ck-fake-panel div:nth-child(3){margin-left:calc(var(--ck-balloon-fake-panel-offset-horizontal)*3);margin-top:calc(var(--ck-balloon-fake-panel-offset-vertical)*3)}.ck .ck-balloon-panel_arrow_s+.ck-fake-panel,.ck .ck-balloon-panel_arrow_se+.ck-fake-panel,.ck .ck-balloon-panel_arrow_sw+.ck-fake-panel{--ck-balloon-fake-panel-offset-vertical:-6px}"},function(e,t,n){var r=n(2),i=n(217);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]),r(i,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=i.locals||{}},function(e,t){e.exports=".ck.ck-sticky-panel .ck-sticky-panel__content_sticky{z-index:var(--ck-z-modal);position:fixed;top:0}.ck.ck-sticky-panel .ck-sticky-panel__content_sticky_bottom-limit{top:auto;position:absolute}.ck.ck-sticky-panel .ck-sticky-panel__content_sticky{box-shadow:var(--ck-drop-shadow),0 0;border-width:0 1px 1px;border-top-left-radius:0;border-top-right-radius:0}"},function(e,t,n){var r=n(2),i=n(219);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]),r(i,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=i.locals||{}},function(e,t){e.exports=".ck.ck-block-toolbar-button{position:absolute;z-index:var(--ck-z-default)}:root{--ck-color-block-toolbar-button:var(--ck-color-text);--ck-block-toolbar-button-size:var(--ck-font-size-normal)}.ck.ck-block-toolbar-button{color:var(--ck-color-block-toolbar-button);font-size:var(--ck-block-toolbar-size)}"},function(e,t,n){var r=n(2),i=n(221);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]),r(i,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=i.locals||{}},function(e,t){e.exports=".ck.ck-placeholder,.ck .ck-placeholder{position:relative}.ck.ck-placeholder:before,.ck .ck-placeholder:before{position:absolute;left:0;right:0;content:attr(data-placeholder);pointer-events:none}.ck.ck-read-only .ck-placeholder:before{display:none}.ck.ck-placeholder:before,.ck .ck-placeholder:before{cursor:text;color:var(--ck-color-engine-placeholder-text)}"},function(e,t,n){var r=n(2),i=n(223);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]),r(i,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=i.locals||{}},function(e,t){e.exports=".ck.ck-editor{position:relative}.ck.ck-editor .ck-editor__top .ck-sticky-panel .ck-toolbar{z-index:var(--ck-z-modal)}.ck.ck-editor__top .ck-sticky-panel .ck-toolbar{border-radius:0}.ck-rounded-corners .ck.ck-editor__top .ck-sticky-panel .ck-toolbar,.ck.ck-editor__top .ck-sticky-panel .ck-toolbar.ck-rounded-corners{border-radius:var(--ck-border-radius);border-bottom-left-radius:0;border-bottom-right-radius:0}.ck.ck-editor__top .ck-sticky-panel .ck-toolbar{border-bottom-width:0}.ck.ck-editor__top .ck-sticky-panel .ck-sticky-panel__content_sticky .ck-toolbar{border-bottom-width:1px;border-radius:0}.ck-rounded-corners .ck.ck-editor__top .ck-sticky-panel .ck-sticky-panel__content_sticky .ck-toolbar,.ck.ck-editor__top .ck-sticky-panel .ck-sticky-panel__content_sticky .ck-toolbar.ck-rounded-corners{border-radius:var(--ck-border-radius);border-radius:0}.ck.ck-editor__main>.ck-editor__editable{background:var(--ck-color-base-background);border-radius:0}.ck-rounded-corners .ck.ck-editor__main>.ck-editor__editable,.ck.ck-editor__main>.ck-editor__editable.ck-rounded-corners{border-radius:var(--ck-border-radius);border-top-left-radius:0;border-top-right-radius:0}.ck.ck-editor__main>.ck-editor__editable:not(.ck-focused){border-color:var(--ck-color-base-border)}"},function(e,t,n){var r=n(2),i=n(225);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]),r(i,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=i.locals||{}},function(e,t){e.exports='.ck .ck-widget .ck-widget__type-around__button{display:block;position:absolute;overflow:hidden;z-index:var(--ck-z-default)}.ck .ck-widget .ck-widget__type-around__button svg{position:absolute;top:50%;left:50%;z-index:calc(var(--ck-z-default) + 2)}.ck .ck-widget .ck-widget__type-around__button.ck-widget__type-around__button_before{top:calc(var(--ck-widget-outline-thickness)*-0.5);left:min(10%,30px);transform:translateY(-50%)}.ck .ck-widget .ck-widget__type-around__button.ck-widget__type-around__button_after{bottom:calc(var(--ck-widget-outline-thickness)*-0.5);right:min(10%,30px);transform:translateY(50%)}.ck .ck-widget.ck-widget_selected>.ck-widget__type-around>.ck-widget__type-around__button:after,.ck .ck-widget>.ck-widget__type-around>.ck-widget__type-around__button:hover:after{content:"";display:block;position:absolute;top:1px;left:1px;z-index:calc(var(--ck-z-default) + 1)}.ck .ck-widget>.ck-widget__type-around>.ck-widget__type-around__fake-caret{display:none;position:absolute;left:0;right:0}.ck .ck-widget:hover>.ck-widget__type-around>.ck-widget__type-around__fake-caret{left:calc(var(--ck-widget-outline-thickness)*-1);right:calc(var(--ck-widget-outline-thickness)*-1)}.ck .ck-widget.ck-widget_type-around_show-fake-caret_before>.ck-widget__type-around>.ck-widget__type-around__fake-caret{top:calc(var(--ck-widget-outline-thickness)*-1 - 1px);display:block}.ck .ck-widget.ck-widget_type-around_show-fake-caret_after>.ck-widget__type-around>.ck-widget__type-around__fake-caret{bottom:calc(var(--ck-widget-outline-thickness)*-1 - 1px);display:block}.ck.ck-editor__editable.ck-read-only .ck-widget__type-around,.ck.ck-editor__editable.ck-restricted-editing_mode_restricted .ck-widget__type-around,.ck.ck-editor__editable.ck-widget__type-around_disabled .ck-widget__type-around{display:none}:root{--ck-widget-type-around-button-size:20px;--ck-color-widget-type-around-button-active:var(--ck-color-focus-border);--ck-color-widget-type-around-button-hover:var(--ck-color-widget-hover-border);--ck-color-widget-type-around-button-blurred-editable:var(--ck-color-widget-blurred-border);--ck-color-widget-type-around-button-radar-start-alpha:0;--ck-color-widget-type-around-button-radar-end-alpha:.3;--ck-color-widget-type-around-button-icon:var(--ck-color-base-background)}.ck .ck-widget .ck-widget__type-around__button{width:var(--ck-widget-type-around-button-size);height:var(--ck-widget-type-around-button-size);background:var(--ck-color-widget-type-around-button);border-radius:100px;transition:opacity var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve),background var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve);opacity:0;pointer-events:none}.ck .ck-widget .ck-widget__type-around__button svg{width:10px;height:8px;transform:translate(-50%,-50%);transition:transform .5s ease;margin-top:1px}.ck .ck-widget .ck-widget__type-around__button svg *{stroke-dasharray:10;stroke-dashoffset:0;fill:none;stroke:var(--ck-color-widget-type-around-button-icon);stroke-width:1.5px;stroke-linecap:round;stroke-linejoin:round}.ck .ck-widget .ck-widget__type-around__button svg line{stroke-dasharray:7}.ck .ck-widget .ck-widget__type-around__button:hover{animation:ck-widget-type-around-button-sonar 1s ease infinite}.ck .ck-widget .ck-widget__type-around__button:hover svg polyline{animation:ck-widget-type-around-arrow-dash 2s linear}.ck .ck-widget .ck-widget__type-around__button:hover svg line{animation:ck-widget-type-around-arrow-tip-dash 2s linear}.ck .ck-widget.ck-widget_selected>.ck-widget__type-around>.ck-widget__type-around__button,.ck .ck-widget:hover>.ck-widget__type-around>.ck-widget__type-around__button{opacity:1;pointer-events:auto}.ck .ck-widget:not(.ck-widget_selected)>.ck-widget__type-around>.ck-widget__type-around__button{background:var(--ck-color-widget-type-around-button-hover)}.ck .ck-widget.ck-widget_selected>.ck-widget__type-around>.ck-widget__type-around__button,.ck .ck-widget>.ck-widget__type-around>.ck-widget__type-around__button:hover{background:var(--ck-color-widget-type-around-button-active)}.ck .ck-widget.ck-widget_selected>.ck-widget__type-around>.ck-widget__type-around__button:after,.ck .ck-widget>.ck-widget__type-around>.ck-widget__type-around__button:hover:after{width:calc(var(--ck-widget-type-around-button-size) - 2px);height:calc(var(--ck-widget-type-around-button-size) - 2px);border-radius:100px;background:linear-gradient(135deg,hsla(0,0%,100%,0),hsla(0,0%,100%,.3))}.ck .ck-widget.ck-widget_with-selection-handle>.ck-widget__type-around>.ck-widget__type-around__button_before{margin-left:20px}.ck .ck-widget .ck-widget__type-around__fake-caret{pointer-events:none;height:1px;animation:ck-widget-type-around-fake-caret-pulse 1s linear infinite normal forwards;outline:1px solid hsla(0,0%,100%,.5);background:var(--ck-color-base-text)}.ck .ck-widget.ck-widget_selected.ck-widget_type-around_show-fake-caret_after,.ck .ck-widget.ck-widget_selected.ck-widget_type-around_show-fake-caret_before{outline-color:transparent}.ck .ck-widget.ck-widget_type-around_show-fake-caret_after.ck-widget_selected:hover,.ck .ck-widget.ck-widget_type-around_show-fake-caret_before.ck-widget_selected:hover{outline-color:var(--ck-color-widget-hover-border)}.ck .ck-widget.ck-widget_type-around_show-fake-caret_after>.ck-widget__type-around>.ck-widget__type-around__button,.ck .ck-widget.ck-widget_type-around_show-fake-caret_before>.ck-widget__type-around>.ck-widget__type-around__button{opacity:0;pointer-events:none}.ck .ck-widget.ck-widget_type-around_show-fake-caret_after.ck-widget_with-selection-handle.ck-widget_selected:hover>.ck-widget__selection-handle,.ck .ck-widget.ck-widget_type-around_show-fake-caret_after.ck-widget_with-selection-handle.ck-widget_selected>.ck-widget__selection-handle,.ck .ck-widget.ck-widget_type-around_show-fake-caret_before.ck-widget_with-selection-handle.ck-widget_selected:hover>.ck-widget__selection-handle,.ck .ck-widget.ck-widget_type-around_show-fake-caret_before.ck-widget_with-selection-handle.ck-widget_selected>.ck-widget__selection-handle{opacity:0}.ck .ck-widget.ck-widget_type-around_show-fake-caret_after.ck-widget_selected.ck-widget_with-resizer>.ck-widget__resizer,.ck .ck-widget.ck-widget_type-around_show-fake-caret_before.ck-widget_selected.ck-widget_with-resizer>.ck-widget__resizer{opacity:0}.ck[dir=rtl] .ck-widget.ck-widget_with-selection-handle .ck-widget__type-around>.ck-widget__type-around__button_before{margin-left:0;margin-right:20px}.ck-editor__nested-editable.ck-editor__editable_selected .ck-widget.ck-widget_selected>.ck-widget__type-around>.ck-widget__type-around__button,.ck-editor__nested-editable.ck-editor__editable_selected .ck-widget:hover>.ck-widget__type-around>.ck-widget__type-around__button{opacity:0;pointer-events:none}.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected>.ck-widget__type-around>.ck-widget__type-around__button:not(:hover){background:var(--ck-color-widget-type-around-button-blurred-editable)}.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected>.ck-widget__type-around>.ck-widget__type-around__button:not(:hover) svg *{stroke:#999}@keyframes ck-widget-type-around-arrow-dash{0%{stroke-dashoffset:10}20%,to{stroke-dashoffset:0}}@keyframes ck-widget-type-around-arrow-tip-dash{0%,20%{stroke-dashoffset:7}40%,to{stroke-dashoffset:0}}@keyframes ck-widget-type-around-button-sonar{0%{box-shadow:0 0 0 0 hsla(var(--ck-color-focus-border-coordinates),var(--ck-color-widget-type-around-button-radar-start-alpha))}50%{box-shadow:0 0 0 5px hsla(var(--ck-color-focus-border-coordinates),var(--ck-color-widget-type-around-button-radar-end-alpha))}to{box-shadow:0 0 0 5px hsla(var(--ck-color-focus-border-coordinates),var(--ck-color-widget-type-around-button-radar-start-alpha))}}@keyframes ck-widget-type-around-fake-caret-pulse{0%{opacity:1}49%{opacity:1}50%{opacity:0}99%{opacity:0}to{opacity:1}}'},function(e,t,n){var r=n(2),i=n(227);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]),r(i,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=i.locals||{}},function(e,t){e.exports=":root{--ck-color-resizer:var(--ck-color-focus-border);--ck-color-resizer-tooltip-background:#262626;--ck-color-resizer-tooltip-text:#f2f2f2;--ck-resizer-border-radius:var(--ck-border-radius);--ck-resizer-tooltip-offset:10px}.ck .ck-widget,.ck .ck-widget.ck-widget_with-selection-handle{position:relative}.ck .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle{position:absolute}.ck .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle .ck-icon{display:block}.ck .ck-widget.ck-widget_with-selection-handle.ck-widget_selected>.ck-widget__selection-handle,.ck .ck-widget.ck-widget_with-selection-handle:hover>.ck-widget__selection-handle{visibility:visible}.ck .ck-size-view{background:var(--ck-color-resizer-tooltip-background);color:var(--ck-color-resizer-tooltip-text);border:1px solid var(--ck-color-resizer-tooltip-text);border-radius:var(--ck-resizer-border-radius);font-size:var(--ck-font-size-tiny);display:block;padding:var(--ck-spacing-small)}.ck .ck-size-view.ck-orientation-bottom-left,.ck .ck-size-view.ck-orientation-bottom-right,.ck .ck-size-view.ck-orientation-top-left,.ck .ck-size-view.ck-orientation-top-right{position:absolute}.ck .ck-size-view.ck-orientation-top-left{top:var(--ck-resizer-tooltip-offset);left:var(--ck-resizer-tooltip-offset)}.ck .ck-size-view.ck-orientation-top-right{top:var(--ck-resizer-tooltip-offset);right:var(--ck-resizer-tooltip-offset)}.ck .ck-size-view.ck-orientation-bottom-right{bottom:var(--ck-resizer-tooltip-offset);right:var(--ck-resizer-tooltip-offset)}.ck .ck-size-view.ck-orientation-bottom-left{bottom:var(--ck-resizer-tooltip-offset);left:var(--ck-resizer-tooltip-offset)}:root{--ck-widget-outline-thickness:3px;--ck-widget-handler-icon-size:16px;--ck-widget-handler-animation-duration:200ms;--ck-widget-handler-animation-curve:ease;--ck-color-widget-blurred-border:#dedede;--ck-color-widget-hover-border:#ffc83d;--ck-color-widget-editable-focus-background:var(--ck-color-base-background);--ck-color-widget-drag-handler-icon-color:var(--ck-color-base-background)}.ck .ck-widget{outline-width:var(--ck-widget-outline-thickness);outline-style:solid;outline-color:transparent;transition:outline-color var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve)}.ck .ck-widget.ck-widget_selected,.ck .ck-widget.ck-widget_selected:hover{outline:var(--ck-widget-outline-thickness) solid var(--ck-color-focus-border)}.ck .ck-widget:hover{outline-color:var(--ck-color-widget-hover-border)}.ck .ck-editor__nested-editable{border:1px solid transparent}.ck .ck-editor__nested-editable.ck-editor__nested-editable_focused,.ck .ck-editor__nested-editable:focus{outline:none;border:var(--ck-focus-ring);box-shadow:var(--ck-inner-shadow),0 0;background-color:var(--ck-color-widget-editable-focus-background)}.ck .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle{padding:4px;box-sizing:border-box;background-color:transparent;opacity:0;transition:background-color var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve),visibility var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve),opacity var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve);border-radius:var(--ck-border-radius) var(--ck-border-radius) 0 0;transform:translateY(-100%);left:calc(0px - var(--ck-widget-outline-thickness))}.ck .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle .ck-icon{width:var(--ck-widget-handler-icon-size);height:var(--ck-widget-handler-icon-size);color:var(--ck-color-widget-drag-handler-icon-color)}.ck .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle .ck-icon .ck-icon__selected-indicator{opacity:0;transition:opacity .3s var(--ck-widget-handler-animation-curve)}.ck .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle:hover .ck-icon .ck-icon__selected-indicator{opacity:1}.ck .ck-widget.ck-widget_with-selection-handle:hover>.ck-widget__selection-handle{opacity:1;background-color:var(--ck-color-widget-hover-border)}.ck .ck-widget.ck-widget_with-selection-handle.ck-widget_selected:hover>.ck-widget__selection-handle,.ck .ck-widget.ck-widget_with-selection-handle.ck-widget_selected>.ck-widget__selection-handle{opacity:1;background-color:var(--ck-color-focus-border)}.ck .ck-widget.ck-widget_with-selection-handle.ck-widget_selected:hover>.ck-widget__selection-handle .ck-icon .ck-icon__selected-indicator,.ck .ck-widget.ck-widget_with-selection-handle.ck-widget_selected>.ck-widget__selection-handle .ck-icon .ck-icon__selected-indicator{opacity:1}.ck[dir=rtl] .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle{left:auto;right:calc(0px - var(--ck-widget-outline-thickness))}.ck.ck-editor__editable.ck-read-only .ck-widget{transition:none}.ck.ck-editor__editable.ck-read-only .ck-widget:not(.ck-widget_selected){--ck-widget-outline-thickness:0px}.ck.ck-editor__editable.ck-read-only .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle,.ck.ck-editor__editable.ck-read-only .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle:hover{background:var(--ck-color-widget-blurred-border)}.ck.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected,.ck.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected:hover{outline-color:var(--ck-color-widget-blurred-border)}.ck.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected.ck-widget_with-selection-handle>.ck-widget__selection-handle,.ck.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected.ck-widget_with-selection-handle>.ck-widget__selection-handle:hover,.ck.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected:hover.ck-widget_with-selection-handle>.ck-widget__selection-handle,.ck.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected:hover.ck-widget_with-selection-handle>.ck-widget__selection-handle:hover{background:var(--ck-color-widget-blurred-border)}.ck.ck-editor__editable>.ck-widget.ck-widget_with-selection-handle:first-child,.ck.ck-editor__editable blockquote>.ck-widget.ck-widget_with-selection-handle:first-child{margin-top:calc(1em + var(--ck-widget-handler-icon-size))}"},function(e,t,n){var r=n(2),i=n(229);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]),r(i,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=i.locals||{}},function(e,t){e.exports='.ck.ck-editor__editable .ck.ck-clipboard-drop-target-position{display:inline;position:relative;pointer-events:none}.ck.ck-editor__editable .ck.ck-clipboard-drop-target-position span{position:absolute;width:0}.ck.ck-editor__editable .ck-widget:-webkit-drag>.ck-widget__selection-handle,.ck.ck-editor__editable .ck-widget:-webkit-drag>.ck-widget__type-around{display:none}:root{--ck-clipboard-drop-target-dot-width:12px;--ck-clipboard-drop-target-dot-height:8px;--ck-clipboard-drop-target-color:var(--ck-color-focus-border)}.ck.ck-editor__editable .ck.ck-clipboard-drop-target-position span{bottom:calc(var(--ck-clipboard-drop-target-dot-height)*-0.5);top:calc(var(--ck-clipboard-drop-target-dot-height)*-0.5);border:1px solid var(--ck-clipboard-drop-target-color);background:var(--ck-clipboard-drop-target-color);margin-left:-1px}.ck.ck-editor__editable .ck.ck-clipboard-drop-target-position span:after{content:"";width:0;height:0;display:block;position:absolute;left:50%;top:calc(var(--ck-clipboard-drop-target-dot-height)*-0.5);transform:translateX(-50%);border-left:calc(var(--ck-clipboard-drop-target-dot-width)*0.5) solid transparent;border-bottom:0 solid transparent;border-right:calc(var(--ck-clipboard-drop-target-dot-width)*0.5) solid transparent;border-top:calc(var(--ck-clipboard-drop-target-dot-height)) solid var(--ck-clipboard-drop-target-color)}.ck.ck-editor__editable .ck-widget.ck-clipboard-drop-target-range{outline:var(--ck-widget-outline-thickness) solid var(--ck-clipboard-drop-target-color)!important}.ck.ck-editor__editable .ck-widget:-webkit-drag{zoom:.6;outline:none!important}'},function(e,t,n){var r=n(2),i=n(231);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]),r(i,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=i.locals||{}},function(e,t){e.exports=".ck-content blockquote{overflow:hidden;padding-right:1.5em;padding-left:1.5em;margin-left:0;margin-right:0;font-style:italic;border-left:5px solid #ccc}.ck-content[dir=rtl] blockquote{border-left:0;border-right:5px solid #ccc}"},function(e,t){e.exports=".ck.ck-heading_heading1{font-size:20px}.ck.ck-heading_heading2{font-size:17px}.ck.ck-heading_heading3{font-size:14px}.ck[class*=ck-heading_heading]{font-weight:700}.ck.ck-dropdown.ck-heading-dropdown .ck-dropdown__button .ck-button__label{width:8em}.ck.ck-dropdown.ck-heading-dropdown .ck-dropdown__panel .ck-list__item{min-width:18em}"},function(e,t,n){var r=n(2),i=n(234);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]),r(i,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=i.locals||{}},function(e,t){e.exports=".ck .ck-widget_with-resizer{position:relative}.ck .ck-widget__resizer{display:none;position:absolute;pointer-events:none;left:0;top:0}.ck-focused .ck-widget_with-resizer.ck-widget_selected>.ck-widget__resizer{display:block}.ck .ck-widget__resizer__handle{position:absolute;pointer-events:all}.ck .ck-widget__resizer__handle.ck-widget__resizer__handle-bottom-right,.ck .ck-widget__resizer__handle.ck-widget__resizer__handle-top-left{cursor:nwse-resize}.ck .ck-widget__resizer__handle.ck-widget__resizer__handle-bottom-left,.ck .ck-widget__resizer__handle.ck-widget__resizer__handle-top-right{cursor:nesw-resize}:root{--ck-resizer-size:10px;--ck-resizer-offset:calc(var(--ck-resizer-size)/-2 - 2px);--ck-resizer-border-width:1px}.ck .ck-widget__resizer{outline:1px solid var(--ck-color-resizer)}.ck .ck-widget__resizer__handle{width:var(--ck-resizer-size);height:var(--ck-resizer-size);background:var(--ck-color-focus-border);border:var(--ck-resizer-border-width) solid #fff;border-radius:var(--ck-resizer-border-radius)}.ck .ck-widget__resizer__handle.ck-widget__resizer__handle-top-left{top:var(--ck-resizer-offset);left:var(--ck-resizer-offset)}.ck .ck-widget__resizer__handle.ck-widget__resizer__handle-top-right{top:var(--ck-resizer-offset);right:var(--ck-resizer-offset)}.ck .ck-widget__resizer__handle.ck-widget__resizer__handle-bottom-right{bottom:var(--ck-resizer-offset);right:var(--ck-resizer-offset)}.ck .ck-widget__resizer__handle.ck-widget__resizer__handle-bottom-left{bottom:var(--ck-resizer-offset);left:var(--ck-resizer-offset)}"},function(e,t,n){var r=n(2),i=n(236);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]),r(i,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=i.locals||{}},function(e,t){e.exports=".ck.ck-text-alternative-form{display:flex;flex-direction:row;flex-wrap:nowrap}.ck.ck-text-alternative-form .ck-labeled-field-view{display:inline-block}.ck.ck-text-alternative-form .ck-label{display:none}@media screen and (max-width:600px){.ck.ck-text-alternative-form{flex-wrap:wrap}.ck.ck-text-alternative-form .ck-labeled-field-view{flex-basis:100%}.ck.ck-text-alternative-form .ck-button{flex-basis:50%}}"},function(e,t){e.exports='.ck-vertical-form .ck-button:after{content:"";width:0;position:absolute;right:-1px;top:var(--ck-spacing-small);bottom:var(--ck-spacing-small);z-index:1}@media screen and (max-width:600px){.ck.ck-responsive-form .ck-button:after{content:"";width:0;position:absolute;right:-1px;top:var(--ck-spacing-small);bottom:var(--ck-spacing-small);z-index:1}}.ck-vertical-form>.ck-button:nth-last-child(2):after{border-right:1px solid var(--ck-color-base-border)}.ck.ck-responsive-form{padding:var(--ck-spacing-large)}.ck.ck-responsive-form:focus{outline:none}[dir=ltr] .ck.ck-responsive-form>:not(:first-child),[dir=rtl] .ck.ck-responsive-form>:not(:last-child){margin-left:var(--ck-spacing-standard)}@media screen and (max-width:600px){.ck.ck-responsive-form{padding:0;width:calc(var(--ck-input-text-width)*0.8)}.ck.ck-responsive-form .ck-labeled-field-view{margin:var(--ck-spacing-large) var(--ck-spacing-large) 0}.ck.ck-responsive-form .ck-labeled-field-view .ck-input-text{min-width:0;width:100%}.ck.ck-responsive-form .ck-labeled-field-view .ck-labeled-field-view__error{white-space:normal}.ck.ck-responsive-form>.ck-button:last-child,.ck.ck-responsive-form>.ck-button:nth-last-child(2){padding:var(--ck-spacing-standard);margin-top:var(--ck-spacing-large);border-radius:0;border:0;border-top:1px solid var(--ck-color-base-border)}[dir=ltr] .ck.ck-responsive-form>.ck-button:last-child,[dir=ltr] .ck.ck-responsive-form>.ck-button:nth-last-child(2),[dir=rtl] .ck.ck-responsive-form>.ck-button:last-child,[dir=rtl] .ck.ck-responsive-form>.ck-button:nth-last-child(2){margin-left:0}.ck.ck-responsive-form>.ck-button:nth-last-child(2):after,[dir=rtl] .ck.ck-responsive-form>.ck-button:last-child:last-of-type,[dir=rtl] .ck.ck-responsive-form>.ck-button:nth-last-child(2):last-of-type{border-right:1px solid var(--ck-color-base-border)}}'},function(e,t,n){var r=n(2),i=n(239);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]),r(i,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=i.locals||{}},function(e,t){e.exports=".ck-content .image{display:table;clear:both;text-align:center;margin:1em auto}.ck-content .image img{display:block;margin:0 auto;max-width:100%;min-width:50px}.ck.ck-editor__editable .image>figcaption.ck-placeholder:before{position:static}"},function(e,t,n){var r=n(2),i=n(241);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]),r(i,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=i.locals||{}},function(e,t){e.exports=".ck-content .image>figcaption{display:table-caption;caption-side:bottom;word-break:break-word;color:#333;background-color:#f7f7f7;padding:.6em;font-size:.75em;outline-offset:-1px}"},function(e,t,n){var r=n(2),i=n(243);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]),r(i,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=i.locals||{}},function(e,t){e.exports=".ck-content .image.image_resized{max-width:100%;display:block;box-sizing:border-box}.ck-content .image.image_resized img{width:100%}.ck-content .image.image_resized>figcaption{display:block}[dir=ltr] .ck.ck-button.ck-button_with-text.ck-resize-image-button .ck-button__icon{margin-right:var(--ck-spacing-standard)}[dir=rtl] .ck.ck-button.ck-button_with-text.ck-resize-image-button .ck-button__icon{margin-left:var(--ck-spacing-standard)}.ck.ck-dropdown .ck-button.ck-resize-image-button .ck-button__label{width:4em}"},function(e,t,n){var r=n(2),i=n(245);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]),r(i,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=i.locals||{}},function(e,t){e.exports=":root{--ck-image-style-spacing:1.5em}.ck-content .image-style-side{float:right;margin-left:var(--ck-image-style-spacing);max-width:50%}.ck-content .image-style-align-left{float:left;margin-right:var(--ck-image-style-spacing)}.ck-content .image-style-align-center{margin-left:auto;margin-right:auto}.ck-content .image-style-align-right{float:right;margin-left:var(--ck-image-style-spacing)}"},function(e,t,n){var r=n(2),i=n(247);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]),r(i,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=i.locals||{}},function(e,t){e.exports=".ck.ck-editor__editable .image{position:relative}.ck.ck-editor__editable .image .ck-progress-bar{position:absolute;top:0;left:0}.ck.ck-editor__editable .image.ck-appear{animation:fadeIn .7s}.ck.ck-editor__editable .image .ck-progress-bar{height:2px;width:0;background:var(--ck-color-upload-bar-background);transition:width .1s}@keyframes fadeIn{0%{opacity:0}to{opacity:1}}"},function(e,t,n){var r=n(2),i=n(249);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]),r(i,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=i.locals||{}},function(e,t){e.exports='.ck-image-upload-complete-icon{display:block;position:absolute;top:10px;right:10px;border-radius:50%}.ck-image-upload-complete-icon:after{content:"";position:absolute}:root{--ck-color-image-upload-icon:#fff;--ck-color-image-upload-icon-background:#008a00;--ck-image-upload-icon-size:20px;--ck-image-upload-icon-width:2px}.ck-image-upload-complete-icon{width:var(--ck-image-upload-icon-size);height:var(--ck-image-upload-icon-size);opacity:0;background:var(--ck-color-image-upload-icon-background);animation-name:ck-upload-complete-icon-show,ck-upload-complete-icon-hide;animation-fill-mode:forwards,forwards;animation-duration:.5s,.5s;font-size:var(--ck-image-upload-icon-size);animation-delay:0ms,3s}.ck-image-upload-complete-icon:after{left:25%;top:50%;opacity:0;height:0;width:0;transform:scaleX(-1) rotate(135deg);transform-origin:left top;border-top:var(--ck-image-upload-icon-width) solid var(--ck-color-image-upload-icon);border-right:var(--ck-image-upload-icon-width) solid var(--ck-color-image-upload-icon);animation-name:ck-upload-complete-icon-check;animation-duration:.5s;animation-delay:.5s;animation-fill-mode:forwards;box-sizing:border-box}@keyframes ck-upload-complete-icon-show{0%{opacity:0}to{opacity:1}}@keyframes ck-upload-complete-icon-hide{0%{opacity:1}to{opacity:0}}@keyframes ck-upload-complete-icon-check{0%{opacity:1;width:0;height:0}33%{width:.3em;height:0}to{opacity:1;width:.3em;height:.45em}}'},function(e,t,n){var r=n(2),i=n(251);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]),r(i,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=i.locals||{}},function(e,t){e.exports='.ck .ck-upload-placeholder-loader{position:absolute;display:flex;align-items:center;justify-content:center;top:0;left:0}.ck .ck-upload-placeholder-loader:before{content:"";position:relative}:root{--ck-color-upload-placeholder-loader:#b3b3b3;--ck-upload-placeholder-loader-size:32px}.ck .ck-image-upload-placeholder{width:100%;margin:0}.ck .ck-upload-placeholder-loader{width:100%;height:100%}.ck .ck-upload-placeholder-loader:before{width:var(--ck-upload-placeholder-loader-size);height:var(--ck-upload-placeholder-loader-size);border-radius:50%;border-top:3px solid var(--ck-color-upload-placeholder-loader);border-right:2px solid transparent;animation:ck-upload-placeholder-loader 1s linear infinite}@keyframes ck-upload-placeholder-loader{to{transform:rotate(1turn)}}'},function(e,t,n){var r=n(2),i=n(253);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]),r(i,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=i.locals||{}},function(e,t){e.exports=".ck .ck-link_selected{background:var(--ck-color-link-selected-background)}.ck .ck-fake-link-selection{background:var(--ck-color-link-fake-selection)}.ck .ck-fake-link-selection_collapsed{height:100%;border-right:1px solid var(--ck-color-base-text);margin-right:-1px;outline:1px solid hsla(0,0%,100%,.5)}"},function(e,t,n){var r=n(2),i=n(255);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]),r(i,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=i.locals||{}},function(e,t){e.exports=".ck.ck-link-form{display:flex}.ck.ck-link-form .ck-label{display:none}@media screen and (max-width:600px){.ck.ck-link-form{flex-wrap:wrap}.ck.ck-link-form .ck-labeled-field-view{flex-basis:100%}.ck.ck-link-form .ck-button{flex-basis:50%}}.ck.ck-link-form_layout-vertical{display:block}.ck.ck-link-form_layout-vertical .ck-button.ck-button-cancel,.ck.ck-link-form_layout-vertical .ck-button.ck-button-save{margin-top:var(--ck-spacing-medium)}.ck.ck-link-form_layout-vertical{padding:0;min-width:var(--ck-input-text-width)}.ck.ck-link-form_layout-vertical .ck-labeled-field-view{margin:var(--ck-spacing-large) var(--ck-spacing-large) var(--ck-spacing-small)}.ck.ck-link-form_layout-vertical .ck-labeled-field-view .ck-input-text{min-width:0;width:100%}.ck.ck-link-form_layout-vertical .ck-button{padding:var(--ck-spacing-standard);margin:0;border-radius:0;border:0;border-top:1px solid var(--ck-color-base-border);width:50%}[dir=ltr] .ck.ck-link-form_layout-vertical .ck-button,[dir=rtl] .ck.ck-link-form_layout-vertical .ck-button{margin-left:0}[dir=rtl] .ck.ck-link-form_layout-vertical .ck-button:last-of-type{border-right:1px solid var(--ck-color-base-border)}.ck.ck-link-form_layout-vertical .ck.ck-list{margin:var(--ck-spacing-standard) var(--ck-spacing-large)}.ck.ck-link-form_layout-vertical .ck.ck-list .ck-button.ck-switchbutton{border:0;padding:0;width:100%}.ck.ck-link-form_layout-vertical .ck.ck-list .ck-button.ck-switchbutton:hover{background:none}"},function(e,t,n){var r=n(2),i=n(257);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]),r(i,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=i.locals||{}},function(e,t){e.exports=".ck.ck-link-actions{display:flex;flex-direction:row;flex-wrap:nowrap}.ck.ck-link-actions .ck-link-actions__preview{display:inline-block}.ck.ck-link-actions .ck-link-actions__preview .ck-button__label{overflow:hidden}@media screen and (max-width:600px){.ck.ck-link-actions{flex-wrap:wrap}.ck.ck-link-actions .ck-link-actions__preview{flex-basis:100%}.ck.ck-link-actions .ck-button:not(.ck-link-actions__preview){flex-basis:50%}}.ck.ck-link-actions .ck-button.ck-link-actions__preview{padding-left:0;padding-right:0}.ck.ck-link-actions .ck-button.ck-link-actions__preview .ck-button__label{padding:0 var(--ck-spacing-medium);color:var(--ck-color-link-default);text-overflow:ellipsis;cursor:pointer;max-width:var(--ck-input-text-width);min-width:3em;text-align:center}.ck.ck-link-actions .ck-button.ck-link-actions__preview .ck-button__label:hover{text-decoration:underline}.ck.ck-link-actions .ck-button.ck-link-actions__preview,.ck.ck-link-actions .ck-button.ck-link-actions__preview:active,.ck.ck-link-actions .ck-button.ck-link-actions__preview:focus,.ck.ck-link-actions .ck-button.ck-link-actions__preview:hover{background:none}.ck.ck-link-actions .ck-button.ck-link-actions__preview:active{box-shadow:none}.ck.ck-link-actions .ck-button.ck-link-actions__preview:focus .ck-button__label{text-decoration:underline}[dir=ltr] .ck.ck-link-actions .ck-button:not(:first-child),[dir=rtl] .ck.ck-link-actions .ck-button:not(:last-child){margin-left:var(--ck-spacing-standard)}@media screen and (max-width:600px){.ck.ck-link-actions .ck-button.ck-link-actions__preview{margin:var(--ck-spacing-standard) var(--ck-spacing-standard) 0}.ck.ck-link-actions .ck-button.ck-link-actions__preview .ck-button__label{min-width:0;max-width:100%}[dir=ltr] .ck.ck-link-actions .ck-button:not(.ck-link-actions__preview),[dir=rtl] .ck.ck-link-actions .ck-button:not(.ck-link-actions__preview){margin-left:0}}"},function(e,t,n){var r=n(2),i=n(259);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]),r(i,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=i.locals||{}},function(e,t){e.exports='.ck-media__wrapper .ck-media__placeholder{display:flex;flex-direction:column;align-items:center}.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__url .ck-tooltip{display:block}@media (hover:none){.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__url .ck-tooltip{display:none}}.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__url{max-width:100%;position:relative}.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__url:hover .ck-tooltip{visibility:visible;opacity:1}.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__url .ck-media__placeholder__url__text{overflow:hidden;display:block}.ck-media__wrapper[data-oembed-url*="facebook.com"] .ck-media__placeholder__icon *,.ck-media__wrapper[data-oembed-url*="google.com/maps"] .ck-media__placeholder__icon *,.ck-media__wrapper[data-oembed-url*="instagram.com"] .ck-media__placeholder__icon *,.ck-media__wrapper[data-oembed-url*="twitter.com"] .ck-media__placeholder__icon *{display:none}.ck-editor__editable:not(.ck-read-only) .ck-media__wrapper>:not(.ck-media__placeholder),.ck-editor__editable:not(.ck-read-only) .ck-widget:not(.ck-widget_selected) .ck-media__placeholder{pointer-events:none}:root{--ck-media-embed-placeholder-icon-size:3em;--ck-color-media-embed-placeholder-url-text:#757575;--ck-color-media-embed-placeholder-url-text-hover:var(--ck-color-base-text)}.ck-media__wrapper{margin:0 auto}.ck-media__wrapper .ck-media__placeholder{padding:calc(var(--ck-spacing-standard)*3);background:var(--ck-color-base-foreground)}.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__icon{min-width:var(--ck-media-embed-placeholder-icon-size);height:var(--ck-media-embed-placeholder-icon-size);margin-bottom:var(--ck-spacing-large);background-position:50%;background-size:cover}.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__icon .ck-icon{width:100%;height:100%}.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__url__text{color:var(--ck-color-media-embed-placeholder-url-text);white-space:nowrap;text-align:center;font-style:italic;text-overflow:ellipsis}.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__url__text:hover{color:var(--ck-color-media-embed-placeholder-url-text-hover);cursor:pointer;text-decoration:underline}.ck-media__wrapper[data-oembed-url*="open.spotify.com"]{max-width:300px;max-height:380px}.ck-media__wrapper[data-oembed-url*="google.com/maps"] .ck-media__placeholder__icon{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNTAuMzc4IiBoZWlnaHQ9IjI1NC4xNjciIHZpZXdCb3g9IjAgMCA2Ni4yNDYgNjcuMjQ4Ij48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMTcyLjUzMSAtMjE4LjQ1NSkgc2NhbGUoLjk4MDEyKSI+PHJlY3Qgcnk9IjUuMjM4IiByeD0iNS4yMzgiIHk9IjIzMS4zOTkiIHg9IjE3Ni4wMzEiIGhlaWdodD0iNjAuMDk5IiB3aWR0aD0iNjAuMDk5IiBmaWxsPSIjMzRhNjY4IiBwYWludC1vcmRlcj0ibWFya2VycyBzdHJva2UgZmlsbCIvPjxwYXRoIGQ9Ik0yMDYuNDc3IDI2MC45bC0yOC45ODcgMjguOTg3YTUuMjE4IDUuMjE4IDAgMDAzLjc4IDEuNjFoNDkuNjIxYzEuNjk0IDAgMy4xOS0uNzk4IDQuMTQ2LTIuMDM3eiIgZmlsbD0iIzVjODhjNSIvPjxwYXRoIGQ9Ik0yMjYuNzQyIDIyMi45ODhjLTkuMjY2IDAtMTYuNzc3IDcuMTctMTYuNzc3IDE2LjAxNC4wMDcgMi43NjIuNjYzIDUuNDc0IDIuMDkzIDcuODc1LjQzLjcwMy44MyAxLjQwOCAxLjE5IDIuMTA3LjMzMy41MDIuNjUgMS4wMDUuOTUgMS41MDguMzQzLjQ3Ny42NzMuOTU3Ljk4OCAxLjQ0IDEuMzEgMS43NjkgMi41IDMuNTAyIDMuNjM3IDUuMTY4Ljc5MyAxLjI3NSAxLjY4MyAyLjY0IDIuNDY2IDMuOTkgMi4zNjMgNC4wOTQgNC4wMDcgOC4wOTIgNC42IDEzLjkxNHYuMDEyYy4xODIuNDEyLjUxNi42NjYuODc5LjY2Ny40MDMtLjAwMS43NjgtLjMxNC45My0uNzk5LjYwMy01Ljc1NiAyLjIzOC05LjcyOSA0LjU4NS0xMy43OTQuNzgyLTEuMzUgMS42NzMtMi43MTUgMi40NjUtMy45OSAxLjEzNy0xLjY2NiAyLjMyOC0zLjQgMy42MzgtNS4xNjkuMzE1LS40ODIuNjQ1LS45NjIuOTg4LTEuNDM5LjMtLjUwMy42MTctMS4wMDYuOTUtMS41MDguMzU5LS43Ljc2LTEuNDA0IDEuMTktMi4xMDcgMS40MjYtMi40MDIgMi01LjExNCAyLjAwNC03Ljg3NSAwLTguODQ0LTcuNTExLTE2LjAxNC0xNi43NzYtMTYuMDE0eiIgZmlsbD0iI2RkNGIzZSIgcGFpbnQtb3JkZXI9Im1hcmtlcnMgc3Ryb2tlIGZpbGwiLz48ZWxsaXBzZSByeT0iNS41NjQiIHJ4PSI1LjgyOCIgY3k9IjIzOS4wMDIiIGN4PSIyMjYuNzQyIiBmaWxsPSIjODAyZDI3IiBwYWludC1vcmRlcj0ibWFya2VycyBzdHJva2UgZmlsbCIvPjxwYXRoIGQ9Ik0xOTAuMzAxIDIzNy4yODNjLTQuNjcgMC04LjQ1NyAzLjg1My04LjQ1NyA4LjYwNnMzLjc4NiA4LjYwNyA4LjQ1NyA4LjYwN2MzLjA0MyAwIDQuODA2LS45NTggNi4zMzctMi41MTYgMS41My0xLjU1NyAyLjA4Ny0zLjkxMyAyLjA4Ny02LjI5IDAtLjM2Mi0uMDIzLS43MjItLjA2NC0xLjA3OWgtOC4yNTd2My4wNDNoNC44NWMtLjE5Ny43NTktLjUzMSAxLjQ1LTEuMDU4IDEuOTg2LS45NDIuOTU4LTIuMDI4IDEuNTQ4LTMuOTAxIDEuNTQ4LTIuODc2IDAtNS4yMDgtMi4zNzItNS4yMDgtNS4yOTkgMC0yLjkyNiAyLjMzMi01LjI5OSA1LjIwOC01LjI5OSAxLjM5OSAwIDIuNjE4LjQwNyAzLjU4NCAxLjI5M2wyLjM4MS0yLjM4YzAtLjAwMi0uMDAzLS4wMDQtLjAwNC0uMDA1LTEuNTg4LTEuNTI0LTMuNjItMi4yMTUtNS45NTUtMi4yMTV6bTQuNDMgNS42NmwuMDAzLjAwNnYtLjAwM3oiIGZpbGw9IiNmZmYiIHBhaW50LW9yZGVyPSJtYXJrZXJzIHN0cm9rZSBmaWxsIi8+PHBhdGggZD0iTTIxNS4xODQgMjUxLjkyOWwtNy45OCA3Ljk3OSAyOC40NzcgMjguNDc1YTUuMjMzIDUuMjMzIDAgMDAuNDQ5LTIuMTIzdi0zMS4xNjVjLS40NjkuNjc1LS45MzQgMS4zNDktMS4zODIgMi4wMDUtLjc5MiAxLjI3NS0xLjY4MiAyLjY0LTIuNDY1IDMuOTktMi4zNDcgNC4wNjUtMy45ODIgOC4wMzgtNC41ODUgMTMuNzk0LS4xNjIuNDg1LS41MjcuNzk4LS45My43OTktLjM2My0uMDAxLS42OTctLjI1NS0uODc5LS42Njd2LS4wMTJjLS41OTMtNS44MjItMi4yMzctOS44Mi00LjYtMTMuOTE0LS43ODMtMS4zNS0xLjY3My0yLjcxNS0yLjQ2Ni0zLjk5LTEuMTM3LTEuNjY2LTIuMzI3LTMuNC0zLjYzNy01LjE2OWwtLjAwMi0uMDAzeiIgZmlsbD0iI2MzYzNjMyIvPjxwYXRoIGQ9Ik0yMTIuOTgzIDI0OC40OTVsLTM2Ljk1MiAzNi45NTN2LjgxMmE1LjIyNyA1LjIyNyAwIDAwNS4yMzggNS4yMzhoMS4wMTVsMzUuNjY2LTM1LjY2NmExMzYuMjc1IDEzNi4yNzUgMCAwMC0yLjc2NC0zLjkgMzcuNTc1IDM3LjU3NSAwIDAwLS45ODktMS40NCAzNS4xMjcgMzUuMTI3IDAgMDAtLjk1LTEuNTA4Yy0uMDgzLS4xNjItLjE3Ni0uMzI2LS4yNjQtLjQ4OXoiIGZpbGw9IiNmZGRjNGYiIHBhaW50LW9yZGVyPSJtYXJrZXJzIHN0cm9rZSBmaWxsIi8+PHBhdGggZD0iTTIxMS45OTggMjYxLjA4M2wtNi4xNTIgNi4xNTEgMjQuMjY0IDI0LjI2NGguNzgxYTUuMjI3IDUuMjI3IDAgMDA1LjIzOS01LjIzOHYtMS4wNDV6IiBmaWxsPSIjZmZmIiBwYWludC1vcmRlcj0ibWFya2VycyBzdHJva2UgZmlsbCIvPjwvZz48L3N2Zz4=)}.ck-media__wrapper[data-oembed-url*="facebook.com"] .ck-media__placeholder{background:#4268b3}.ck-media__wrapper[data-oembed-url*="facebook.com"] .ck-media__placeholder .ck-media__placeholder__icon{background-image:url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAyNCIgaGVpZ2h0PSIxMDI0IiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxwYXRoIGQ9Ik05NjcuNDg0IDBINTYuNTE3QzI1LjMwNCAwIDAgMjUuMzA0IDAgNTYuNTE3djkxMC45NjZDMCA5OTguNjk0IDI1LjI5NyAxMDI0IDU2LjUyMiAxMDI0SDU0N1Y2MjhINDE0VjQ3M2gxMzNWMzU5LjAyOWMwLTEzMi4yNjIgODAuNzczLTIwNC4yODIgMTk4Ljc1Ni0yMDQuMjgyIDU2LjUxMyAwIDEwNS4wODYgNC4yMDggMTE5LjI0NCA2LjA4OVYyOTlsLTgxLjYxNi4wMzdjLTYzLjk5MyAwLTc2LjM4NCAzMC40OTItNzYuMzg0IDc1LjIzNlY0NzNoMTUzLjQ4N2wtMTkuOTg2IDE1NUg3MDd2Mzk2aDI2MC40ODRjMzEuMjEzIDAgNTYuNTE2LTI1LjMwMyA1Ni41MTYtNTYuNTE2VjU2LjUxNUMxMDI0IDI1LjMwMyA5OTguNjk3IDAgOTY3LjQ4NCAwIiBmaWxsPSIjRkZGRkZFIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=)}.ck-media__wrapper[data-oembed-url*="facebook.com"] .ck-media__placeholder .ck-media__placeholder__url__text{color:#cdf}.ck-media__wrapper[data-oembed-url*="facebook.com"] .ck-media__placeholder .ck-media__placeholder__url__text:hover{color:#fff}.ck-media__wrapper[data-oembed-url*="instagram.com"] .ck-media__placeholder{background:linear-gradient(-135deg,#1400c7,#b800b1,#f50000)}.ck-media__wrapper[data-oembed-url*="instagram.com"] .ck-media__placeholder .ck-media__placeholder__icon{background-image:url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTA0IiBoZWlnaHQ9IjUwNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+PGRlZnM+PHBhdGggaWQ9ImEiIGQ9Ik0wIC4xNTloNTAzLjg0MVY1MDMuOTRIMHoiLz48L2RlZnM+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj48bWFzayBpZD0iYiIgZmlsbD0iI2ZmZiI+PHVzZSB4bGluazpocmVmPSIjYSIvPjwvbWFzaz48cGF0aCBkPSJNMjUxLjkyMS4xNTljLTY4LjQxOCAwLTc2Ljk5Ny4yOS0xMDMuODY3IDEuNTE2LTI2LjgxNCAxLjIyMy00NS4xMjcgNS40ODItNjEuMTUxIDExLjcxLTE2LjU2NiA2LjQzNy0zMC42MTUgMTUuMDUxLTQ0LjYyMSAyOS4wNTYtMTQuMDA1IDE0LjAwNi0yMi42MTkgMjguMDU1LTI5LjA1NiA0NC42MjEtNi4yMjggMTYuMDI0LTEwLjQ4NyAzNC4zMzctMTEuNzEgNjEuMTUxQy4yOSAxNzUuMDgzIDAgMTgzLjY2MiAwIDI1Mi4wOGMwIDY4LjQxNy4yOSA3Ni45OTYgMS41MTYgMTAzLjg2NiAxLjIyMyAyNi44MTQgNS40ODIgNDUuMTI3IDExLjcxIDYxLjE1MSA2LjQzNyAxNi41NjYgMTUuMDUxIDMwLjYxNSAyOS4wNTYgNDQuNjIxIDE0LjAwNiAxNC4wMDUgMjguMDU1IDIyLjYxOSA0NC42MjEgMjkuMDU3IDE2LjAyNCA2LjIyNyAzNC4zMzcgMTAuNDg2IDYxLjE1MSAxMS43MDkgMjYuODcgMS4yMjYgMzUuNDQ5IDEuNTE2IDEwMy44NjcgMS41MTYgNjguNDE3IDAgNzYuOTk2LS4yOSAxMDMuODY2LTEuNTE2IDI2LjgxNC0xLjIyMyA0NS4xMjctNS40ODIgNjEuMTUxLTExLjcwOSAxNi41NjYtNi40MzggMzAuNjE1LTE1LjA1MiA0NC42MjEtMjkuMDU3IDE0LjAwNS0xNC4wMDYgMjIuNjE5LTI4LjA1NSAyOS4wNTctNDQuNjIxIDYuMjI3LTE2LjAyNCAxMC40ODYtMzQuMzM3IDExLjcwOS02MS4xNTEgMS4yMjYtMjYuODcgMS41MTYtMzUuNDQ5IDEuNTE2LTEwMy44NjYgMC02OC40MTgtLjI5LTc2Ljk5Ny0xLjUxNi0xMDMuODY3LTEuMjIzLTI2LjgxNC01LjQ4Mi00NS4xMjctMTEuNzA5LTYxLjE1MS02LjQzOC0xNi41NjYtMTUuMDUyLTMwLjYxNS0yOS4wNTctNDQuNjIxLTE0LjAwNi0xNC4wMDUtMjguMDU1LTIyLjYxOS00NC42MjEtMjkuMDU2LTE2LjAyNC02LjIyOC0zNC4zMzctMTAuNDg3LTYxLjE1MS0xMS43MUMzMjguOTE3LjQ0OSAzMjAuMzM4LjE1OSAyNTEuOTIxLjE1OXptMCA0NS4zOTFjNjcuMjY1IDAgNzUuMjMzLjI1NyAxMDEuNzk3IDEuNDY5IDI0LjU2MiAxLjEyIDM3LjkwMSA1LjIyNCA0Ni43NzggOC42NzQgMTEuNzU5IDQuNTcgMjAuMTUxIDEwLjAyOSAyOC45NjYgMTguODQ1IDguODE2IDguODE1IDE0LjI3NSAxNy4yMDcgMTguODQ1IDI4Ljk2NiAzLjQ1IDguODc3IDcuNTU0IDIyLjIxNiA4LjY3NCA0Ni43NzggMS4yMTIgMjYuNTY0IDEuNDY5IDM0LjUzMiAxLjQ2OSAxMDEuNzk4IDAgNjcuMjY1LS4yNTcgNzUuMjMzLTEuNDY5IDEwMS43OTctMS4xMiAyNC41NjItNS4yMjQgMzcuOTAxLTguNjc0IDQ2Ljc3OC00LjU3IDExLjc1OS0xMC4wMjkgMjAuMTUxLTE4Ljg0NSAyOC45NjYtOC44MTUgOC44MTYtMTcuMjA3IDE0LjI3NS0yOC45NjYgMTguODQ1LTguODc3IDMuNDUtMjIuMjE2IDcuNTU0LTQ2Ljc3OCA4LjY3NC0yNi41NiAxLjIxMi0zNC41MjcgMS40NjktMTAxLjc5NyAxLjQ2OS02Ny4yNzEgMC03NS4yMzctLjI1Ny0xMDEuNzk4LTEuNDY5LTI0LjU2Mi0xLjEyLTM3LjkwMS01LjIyNC00Ni43NzgtOC42NzQtMTEuNzU5LTQuNTctMjAuMTUxLTEwLjAyOS0yOC45NjYtMTguODQ1LTguODE1LTguODE1LTE0LjI3NS0xNy4yMDctMTguODQ1LTI4Ljk2Ni0zLjQ1LTguODc3LTcuNTU0LTIyLjIxNi04LjY3NC00Ni43NzgtMS4yMTItMjYuNTY0LTEuNDY5LTM0LjUzMi0xLjQ2OS0xMDEuNzk3IDAtNjcuMjY2LjI1Ny03NS4yMzQgMS40NjktMTAxLjc5OCAxLjEyLTI0LjU2MiA1LjIyNC0zNy45MDEgOC42NzQtNDYuNzc4IDQuNTctMTEuNzU5IDEwLjAyOS0yMC4xNTEgMTguODQ1LTI4Ljk2NiA4LjgxNS04LjgxNiAxNy4yMDctMTQuMjc1IDI4Ljk2Ni0xOC44NDUgOC44NzctMy40NSAyMi4yMTYtNy41NTQgNDYuNzc4LTguNjc0IDI2LjU2NC0xLjIxMiAzNC41MzItMS40NjkgMTAxLjc5OC0xLjQ2OXoiIGZpbGw9IiNGRkYiIG1hc2s9InVybCgjYikiLz48cGF0aCBkPSJNMjUxLjkyMSAzMzYuMDUzYy00Ni4zNzggMC04My45NzQtMzcuNTk2LTgzLjk3NC04My45NzMgMC00Ni4zNzggMzcuNTk2LTgzLjk3NCA4My45NzQtODMuOTc0IDQ2LjM3NyAwIDgzLjk3MyAzNy41OTYgODMuOTczIDgzLjk3NCAwIDQ2LjM3Ny0zNy41OTYgODMuOTczLTgzLjk3MyA4My45NzN6bTAtMjEzLjMzOGMtNzEuNDQ3IDAtMTI5LjM2NSA1Ny45MTgtMTI5LjM2NSAxMjkuMzY1IDAgNzEuNDQ2IDU3LjkxOCAxMjkuMzY0IDEyOS4zNjUgMTI5LjM2NCA3MS40NDYgMCAxMjkuMzY0LTU3LjkxOCAxMjkuMzY0LTEyOS4zNjQgMC03MS40NDctNTcuOTE4LTEyOS4zNjUtMTI5LjM2NC0xMjkuMzY1ek00MTYuNjI3IDExNy42MDRjMCAxNi42OTYtMTMuNTM1IDMwLjIzLTMwLjIzMSAzMC4yMy0xNi42OTUgMC0zMC4yMy0xMy41MzQtMzAuMjMtMzAuMjMgMC0xNi42OTYgMTMuNTM1LTMwLjIzMSAzMC4yMy0zMC4yMzEgMTYuNjk2IDAgMzAuMjMxIDEzLjUzNSAzMC4yMzEgMzAuMjMxIiBmaWxsPSIjRkZGIi8+PC9nPjwvc3ZnPg==)}.ck-media__wrapper[data-oembed-url*="instagram.com"] .ck-media__placeholder .ck-media__placeholder__url__text{color:#ffe0fe}.ck-media__wrapper[data-oembed-url*="instagram.com"] .ck-media__placeholder .ck-media__placeholder__url__text:hover{color:#fff}.ck-media__wrapper[data-oembed-url*="twitter.com"] .ck.ck-media__placeholder{background:linear-gradient(90deg,#71c6f4,#0d70a5)}.ck-media__wrapper[data-oembed-url*="twitter.com"] .ck.ck-media__placeholder .ck-media__placeholder__icon{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0MDAgNDAwIj48cGF0aCBkPSJNNDAwIDIwMGMwIDExMC41LTg5LjUgMjAwLTIwMCAyMDBTMCAzMTAuNSAwIDIwMCA4OS41IDAgMjAwIDBzMjAwIDg5LjUgMjAwIDIwMHpNMTYzLjQgMzA1LjVjODguNyAwIDEzNy4yLTczLjUgMTM3LjItMTM3LjIgMC0yLjEgMC00LjItLjEtNi4yIDkuNC02LjggMTcuNi0xNS4zIDI0LjEtMjUtOC42IDMuOC0xNy45IDYuNC0yNy43IDcuNiAxMC02IDE3LjYtMTUuNCAyMS4yLTI2LjctOS4zIDUuNS0xOS42IDkuNS0zMC42IDExLjctOC44LTkuNC0yMS4zLTE1LjItMzUuMi0xNS4yLTI2LjYgMC00OC4yIDIxLjYtNDguMiA0OC4yIDAgMy44LjQgNy41IDEuMyAxMS00MC4xLTItNzUuNi0yMS4yLTk5LjQtNTAuNC00LjEgNy4xLTYuNSAxNS40LTYuNSAyNC4yIDAgMTYuNyA4LjUgMzEuNSAyMS41IDQwLjEtNy45LS4yLTE1LjMtMi40LTIxLjgtNnYuNmMwIDIzLjQgMTYuNiA0Mi44IDM4LjcgNDcuMy00IDEuMS04LjMgMS43LTEyLjcgMS43LTMuMSAwLTYuMS0uMy05LjEtLjkgNi4xIDE5LjIgMjMuOSAzMy4xIDQ1IDMzLjUtMTYuNSAxMi45LTM3LjMgMjAuNi01OS45IDIwLjYtMy45IDAtNy43LS4yLTExLjUtLjcgMjEuMSAxMy44IDQ2LjUgMjEuOCA3My43IDIxLjgiIGZpbGw9IiNmZmYiLz48L3N2Zz4=)}.ck-media__wrapper[data-oembed-url*="twitter.com"] .ck.ck-media__placeholder .ck-media__placeholder__url__text{color:#b8e6ff}.ck-media__wrapper[data-oembed-url*="twitter.com"] .ck.ck-media__placeholder .ck-media__placeholder__url__text:hover{color:#fff}'},function(e,t,n){var r=n(2),i=n(261);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]),r(i,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=i.locals||{}},function(e,t){e.exports=".ck.ck-media-form{display:flex;align-items:flex-start;flex-direction:row;flex-wrap:nowrap}.ck.ck-media-form .ck-labeled-field-view{display:inline-block}.ck.ck-media-form .ck-label{display:none}@media screen and (max-width:600px){.ck.ck-media-form{flex-wrap:wrap}.ck.ck-media-form .ck-labeled-field-view{flex-basis:100%}.ck.ck-media-form .ck-button{flex-basis:50%}}"},function(e,t,n){var r=n(2),i=n(263);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]),r(i,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=i.locals||{}},function(e,t){e.exports=".ck-content .media{clear:both;margin:1em 0;display:block;min-width:15em}"},function(e,t,n){var r=n(2),i=n(265);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]),r(i,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=i.locals||{}},function(e,t){e.exports=":root{--ck-color-table-focused-cell-background:rgba(158,207,250,0.3)}.ck-widget.table td.ck-editor__nested-editable.ck-editor__nested-editable_focused,.ck-widget.table td.ck-editor__nested-editable:focus,.ck-widget.table th.ck-editor__nested-editable.ck-editor__nested-editable_focused,.ck-widget.table th.ck-editor__nested-editable:focus{background:var(--ck-color-table-focused-cell-background);border-style:none;outline:1px solid var(--ck-color-focus-border);outline-offset:-1px}"},function(e,t,n){var r=n(2),i=n(267);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]),r(i,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=i.locals||{}},function(e,t){e.exports=".ck .ck-insert-table-dropdown__grid{display:flex;flex-direction:row;flex-wrap:wrap}:root{--ck-insert-table-dropdown-padding:10px;--ck-insert-table-dropdown-box-height:11px;--ck-insert-table-dropdown-box-width:12px;--ck-insert-table-dropdown-box-margin:1px}.ck .ck-insert-table-dropdown__grid{width:calc(var(--ck-insert-table-dropdown-box-width)*10 + var(--ck-insert-table-dropdown-box-margin)*20 + var(--ck-insert-table-dropdown-padding)*2);padding:var(--ck-insert-table-dropdown-padding) var(--ck-insert-table-dropdown-padding) 0}.ck .ck-insert-table-dropdown__label{text-align:center}.ck .ck-insert-table-dropdown-grid-box{width:var(--ck-insert-table-dropdown-box-width);height:var(--ck-insert-table-dropdown-box-height);margin:var(--ck-insert-table-dropdown-box-margin);border:1px solid var(--ck-color-base-border);border-radius:1px}.ck .ck-insert-table-dropdown-grid-box.ck-on{border-color:var(--ck-color-focus-border);background:var(--ck-color-focus-outer-shadow)}"},function(e,t,n){var r=n(2),i=n(269);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]),r(i,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=i.locals||{}},function(e,t){e.exports=':root{--ck-table-selected-cell-background:rgba(158,207,250,0.3)}.ck.ck-editor__editable .table table td.ck-editor__editable_selected,.ck.ck-editor__editable .table table th.ck-editor__editable_selected{position:relative;caret-color:transparent;outline:unset;box-shadow:unset}.ck.ck-editor__editable .table table td.ck-editor__editable_selected:after,.ck.ck-editor__editable .table table th.ck-editor__editable_selected:after{content:"";pointer-events:none;background-color:var(--ck-table-selected-cell-background);position:absolute;top:0;left:0;right:0;bottom:0}.ck.ck-editor__editable .table table td.ck-editor__editable_selected ::selection,.ck.ck-editor__editable .table table td.ck-editor__editable_selected:focus,.ck.ck-editor__editable .table table th.ck-editor__editable_selected ::selection,.ck.ck-editor__editable .table table th.ck-editor__editable_selected:focus{background-color:transparent}.ck.ck-editor__editable .table table td.ck-editor__editable_selected .ck-widget_selected,.ck.ck-editor__editable .table table th.ck-editor__editable_selected .ck-widget_selected{outline:unset}'},function(e,t,n){var r=n(2),i=n(271);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]),r(i,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=i.locals||{}},function(e,t){e.exports=".ck-content .table{margin:1em auto;display:table}.ck-content .table table{border-collapse:collapse;border-spacing:0;width:100%;height:100%;border:1px double #b3b3b3}.ck-content .table table td,.ck-content .table table th{min-width:2em;padding:.4em;border:1px solid #bfbfbf}.ck-content .table table th{font-weight:700;background:hsla(0,0%,0%,5%)}.ck-content[dir=rtl] .table th{text-align:right}.ck-content[dir=ltr] .table th{text-align:left}"},function(e,t,n){var r=n(2),i=n(273);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]),r(i,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=i.locals||{}},function(e,t){e.exports=".ck .ck-button.ck-color-table__remove-color{display:flex;align-items:center;width:100%}label.ck.ck-color-grid__label{font-weight:unset}.ck .ck-button.ck-color-table__remove-color{padding:calc(var(--ck-spacing-standard)/2) var(--ck-spacing-standard);border-bottom-left-radius:0;border-bottom-right-radius:0}.ck .ck-button.ck-color-table__remove-color:not(:focus){border-bottom:1px solid var(--ck-color-base-border)}[dir=ltr] .ck .ck-button.ck-color-table__remove-color .ck.ck-icon{margin-right:var(--ck-spacing-standard)}[dir=rtl] .ck .ck-button.ck-color-table__remove-color .ck.ck-icon{margin-left:var(--ck-spacing-standard)}"},function(e,t,n){var r=n(2),i=n(275);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]),r(i,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=i.locals||{}},function(e,t){e.exports=".ck-content .text-tiny{font-size:.7em}.ck-content .text-small{font-size:.85em}.ck-content .text-big{font-size:1.4em}.ck-content .text-huge{font-size:1.8em}"},function(e,t,n){var r=n(2),i=n(277);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]),r(i,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=i.locals||{}},function(e,t){e.exports=":root{--ck-highlight-marker-yellow:#fdfd77;--ck-highlight-marker-green:#62f962;--ck-highlight-marker-pink:#fc7899;--ck-highlight-marker-blue:#72ccfd;--ck-highlight-pen-red:#e71313;--ck-highlight-pen-green:#128a00}.ck-content .marker-yellow{background-color:var(--ck-highlight-marker-yellow)}.ck-content .marker-green{background-color:var(--ck-highlight-marker-green)}.ck-content .marker-pink{background-color:var(--ck-highlight-marker-pink)}.ck-content .marker-blue{background-color:var(--ck-highlight-marker-blue)}.ck-content .pen-red{color:var(--ck-highlight-pen-red);background-color:transparent}.ck-content .pen-green{color:var(--ck-highlight-pen-green);background-color:transparent}"},function(e,t,n){var r=n(279),i=n(67),o=n(87),a=n(24)("socket.io-client");e.exports=t=c;var s=t.managers={};function c(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var n,i=r(e),c=i.source,l=i.id;return t.forceNew||t["force new connection"]||!1===t.multiplex||s[l]&&i.path in s[l].nsps?(a("ignoring socket cache for %s",c),n=o(c,t)):(s[l]||(a("new io instance for %s",c),s[l]=o(c,t)),n=s[l]),i.query&&!t.query&&(t.query=i.query),n.socket(i.path,t)}t.protocol=i.protocol,t.connect=c,t.Manager=n(87),t.Socket=n(93)},function(e,t,n){var r=n(85),i=n(24)("socket.io-client:url");e.exports=function(e,t){var n=e;t=t||"undefined"!=typeof location&&location,null==e&&(e=t.protocol+"//"+t.host),"string"==typeof e&&("/"===e.charAt(0)&&(e="/"===e.charAt(1)?t.protocol+e:t.host+e),/^(https?|wss?):\/\//.test(e)||(i("protocol-less url %s",e),e=void 0!==t?t.protocol+"//"+e:"https://"+e),i("parse %s",e),n=r(e)),n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443")),n.path=n.path||"/";var o=-1!==n.host.indexOf(":")?"["+n.host+"]":n.host;return n.id=n.protocol+"://"+o+":"+n.port,n.href=n.protocol+"://"+o+(t&&t.port===n.port?"":":"+n.port),n}},function(e,t,n){function r(e){var n;function r(){if(r.enabled){var e=r,i=+new Date,o=i-(n||i);e.diff=o,e.prev=n,e.curr=i,n=i;for(var a=new Array(arguments.length),s=0;s<a.length;s++)a[s]=arguments[s];a[0]=t.coerce(a[0]),"string"!=typeof a[0]&&a.unshift("%O");var c=0;a[0]=a[0].replace(/%([a-zA-Z%])/g,(function(n,r){if("%%"===n)return n;c++;var i=t.formatters[r];return"function"==typeof i&&(n=i.call(e,a[c]),a.splice(c,1),c--),n})),t.formatArgs.call(e,a),(r.log||t.log||console.log.bind(console)).apply(e,a)}}return r.namespace=e,r.enabled=t.enabled(e),r.useColors=t.useColors(),r.color=function(e){var n,r=0;for(n in e)r=(r<<5)-r+e.charCodeAt(n),r|=0;return t.colors[Math.abs(r)%t.colors.length]}(e),r.destroy=i,"function"==typeof t.init&&t.init(r),t.instances.push(r),r}function i(){var e=t.instances.indexOf(this);return-1!==e&&(t.instances.splice(e,1),!0)}(t=e.exports=r.debug=r.default=r).coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){t.enable("")},t.enable=function(e){var n;t.save(e),t.names=[],t.skips=[];var r=("string"==typeof e?e:"").split(/[\s,]+/),i=r.length;for(n=0;n<i;n++)r[n]&&("-"===(e=r[n].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")));for(n=0;n<t.instances.length;n++){var o=t.instances[n];o.enabled=t.enabled(o.namespace)}},t.enabled=function(e){if("*"===e[e.length-1])return!0;var n,r;for(n=0,r=t.skips.length;n<r;n++)if(t.skips[n].test(e))return!1;for(n=0,r=t.names.length;n<r;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=n(281),t.instances=[],t.names=[],t.skips=[],t.formatters={}},function(e,t){var n=1e3,r=6e4,i=36e5,o=24*i;function a(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}e.exports=function(e,t){t=t||{};var s=typeof e;if("string"===s&&e.length>0)return function(e){if(!((e=String(e)).length>100)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(t){var a=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*a;case"days":case"day":case"d":return a*o;case"hours":case"hour":case"hrs":case"hr":case"h":return a*i;case"minutes":case"minute":case"mins":case"min":case"m":return a*r;case"seconds":case"second":case"secs":case"sec":case"s":return a*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return a;default:return}}}}(e);if("number"===s&&!1===isNaN(e))return t.long?function(e){return a(e,o,"day")||a(e,i,"hour")||a(e,r,"minute")||a(e,n,"second")||e+" ms"}(e):function(e){return e>=o?Math.round(e/o)+"d":e>=i?Math.round(e/i)+"h":e>=r?Math.round(e/r)+"m":e>=n?Math.round(e/n)+"s":e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},function(e,t,n){var r=n(50),i=n(86),o=Object.prototype.toString,a="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===o.call(Blob),s="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===o.call(File);t.deconstructPacket=function(e){var t=[],n=e;return n.data=function e(t,n){if(!t)return t;if(i(t)){var o={_placeholder:!0,num:n.length};return n.push(t),o}if(r(t)){for(var a=new Array(t.length),s=0;s<t.length;s++)a[s]=e(t[s],n);return a}if("object"==typeof t&&!(t instanceof Date)){for(var c in a={},t)a[c]=e(t[c],n);return a}return t}(e.data,t),n.attachments=t.length,{packet:n,buffers:t}},t.reconstructPacket=function(e,t){return e.data=function e(t,n){if(!t)return t;if(t&&t._placeholder)return n[t.num];if(r(t))for(var i=0;i<t.length;i++)t[i]=e(t[i],n);else if("object"==typeof t)for(var o in t)t[o]=e(t[o],n);return t}(e.data,t),e.attachments=void 0,e},t.removeBlobs=function(e,t){var n=0,o=e;!function e(c,l,u){if(!c)return c;if(a&&c instanceof Blob||s&&c instanceof File){n++;var d=new FileReader;d.onload=function(){u?u[l]=this.result:o=this.result,--n||t(o)},d.readAsArrayBuffer(c)}else if(r(c))for(var f=0;f<c.length;f++)e(c[f],f,c);else if("object"==typeof c&&!i(c))for(var h in c)e(c[h],h,c)}(o),n||t(o)}},function(e,t,n){"use strict";t.byteLength=function(e){var t=l(e),n=t[1];return 3*(t[0]+n)/4-n},t.toByteArray=function(e){var t,n,r=l(e),a=r[0],s=r[1],c=new o(function(e,t,n){return 3*(t+n)/4-n}(0,a,s)),u=0,d=s>0?a-4:a;for(n=0;n<d;n+=4)t=i[e.charCodeAt(n)]<<18|i[e.charCodeAt(n+1)]<<12|i[e.charCodeAt(n+2)]<<6|i[e.charCodeAt(n+3)],c[u++]=t>>16&255,c[u++]=t>>8&255,c[u++]=255&t;return 2===s&&(t=i[e.charCodeAt(n)]<<2|i[e.charCodeAt(n+1)]>>4,c[u++]=255&t),1===s&&(t=i[e.charCodeAt(n)]<<10|i[e.charCodeAt(n+1)]<<4|i[e.charCodeAt(n+2)]>>2,c[u++]=t>>8&255,c[u++]=255&t),c},t.fromByteArray=function(e){for(var t,n=e.length,i=n%3,o=[],a=0,s=n-i;a<s;a+=16383)o.push(d(e,a,a+16383>s?s:a+16383));return 1===i?o.push(r[(t=e[n-1])>>2]+r[t<<4&63]+"=="):2===i&&o.push(r[(t=(e[n-2]<<8)+e[n-1])>>10]+r[t>>4&63]+r[t<<2&63]+"="),o.join("")};for(var r=[],i=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,c=a.length;s<c;++s)r[s]=a[s],i[a.charCodeAt(s)]=s;function l(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function u(e){return r[e>>18&63]+r[e>>12&63]+r[e>>6&63]+r[63&e]}function d(e,t,n){for(var r=[],i=t;i<n;i+=3)r.push(u((e[i]<<16&16711680)+(e[i+1]<<8&65280)+(255&e[i+2])));return r.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},function(e,t){t.read=function(e,t,n,r,i){var o,a,s=8*i-r-1,c=(1<<s)-1,l=c>>1,u=-7,d=n?i-1:0,f=n?-1:1,h=e[t+d];for(d+=f,o=h&(1<<-u)-1,h>>=-u,u+=s;u>0;o=256*o+e[t+d],d+=f,u-=8);for(a=o&(1<<-u)-1,o>>=-u,u+=r;u>0;a=256*a+e[t+d],d+=f,u-=8);if(0===o)o=1-l;else{if(o===c)return a?NaN:1/0*(h?-1:1);a+=Math.pow(2,r),o-=l}return(h?-1:1)*a*Math.pow(2,o-r)},t.write=function(e,t,n,r,i,o){var a,s,c,l=8*o-i-1,u=(1<<l)-1,d=u>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:o-1,p=r?1:-1,v=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=u):(a=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-a))<1&&(a--,c*=2),(t+=a+d>=1?f/c:f*Math.pow(2,1-d))*c>=2&&(a++,c/=2),a+d>=u?(s=0,a=u):a+d>=1?(s=(t*c-1)*Math.pow(2,i),a+=d):(s=t*Math.pow(2,d-1)*Math.pow(2,i),a=0));i>=8;e[n+h]=255&s,h+=p,s/=256,i-=8);for(a=a<<i|s,l+=i;l>0;e[n+h]=255&a,h+=p,a/=256,l-=8);e[n+h-p]|=128*v}},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t,n){e.exports=n(287),e.exports.parser=n(36)},function(e,t,n){var r=n(88),i=n(35),o=n(24)("engine.io-client:socket"),a=n(92),s=n(36),c=n(85),l=n(57);function u(e,t){if(!(this instanceof u))return new u(e,t);t=t||{},e&&"object"==typeof e&&(t=e,e=null),e?(e=c(e),t.hostname=e.host,t.secure="https"===e.protocol||"wss"===e.protocol,t.port=e.port,e.query&&(t.query=e.query)):t.host&&(t.hostname=c(t.host).host),this.secure=null!=t.secure?t.secure:"undefined"!=typeof location&&"https:"===location.protocol,t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.agent=t.agent||!1,this.hostname=t.hostname||("undefined"!=typeof location?location.hostname:"localhost"),this.port=t.port||("undefined"!=typeof location&&location.port?location.port:this.secure?443:80),this.query=t.query||{},"string"==typeof this.query&&(this.query=l.decode(this.query)),this.upgrade=!1!==t.upgrade,this.path=(t.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!t.forceJSONP,this.jsonp=!1!==t.jsonp,this.forceBase64=!!t.forceBase64,this.enablesXDR=!!t.enablesXDR,this.withCredentials=!1!==t.withCredentials,this.timestampParam=t.timestampParam||"t",this.timestampRequests=t.timestampRequests,this.transports=t.transports||["polling","websocket"],this.transportOptions=t.transportOptions||{},this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.policyPort=t.policyPort||843,this.rememberUpgrade=t.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=t.onlyBinaryUpgrades,this.perMessageDeflate=!1!==t.perMessageDeflate&&(t.perMessageDeflate||{}),!0===this.perMessageDeflate&&(this.perMessageDeflate={}),this.perMessageDeflate&&null==this.perMessageDeflate.threshold&&(this.perMessageDeflate.threshold=1024),this.pfx=t.pfx||void 0,this.key=t.key||void 0,this.passphrase=t.passphrase||void 0,this.cert=t.cert||void 0,this.ca=t.ca||void 0,this.ciphers=t.ciphers||void 0,this.rejectUnauthorized=void 0===t.rejectUnauthorized||t.rejectUnauthorized,this.forceNode=!!t.forceNode,this.isReactNative="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase(),("undefined"==typeof self||this.isReactNative)&&(t.extraHeaders&&Object.keys(t.extraHeaders).length>0&&(this.extraHeaders=t.extraHeaders),t.localAddress&&(this.localAddress=t.localAddress)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingIntervalTimer=null,this.pingTimeoutTimer=null,this.open()}e.exports=u,u.priorWebsocketSuccess=!1,i(u.prototype),u.protocol=s.protocol,u.Socket=u,u.Transport=n(70),u.transports=n(88),u.parser=n(36),u.prototype.createTransport=function(e){o('creating transport "%s"',e);var t=function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}(this.query);t.EIO=s.protocol,t.transport=e;var n=this.transportOptions[e]||{};return this.id&&(t.sid=this.id),new r[e]({query:t,socket:this,agent:n.agent||this.agent,hostname:n.hostname||this.hostname,port:n.port||this.port,secure:n.secure||this.secure,path:n.path||this.path,forceJSONP:n.forceJSONP||this.forceJSONP,jsonp:n.jsonp||this.jsonp,forceBase64:n.forceBase64||this.forceBase64,enablesXDR:n.enablesXDR||this.enablesXDR,withCredentials:n.withCredentials||this.withCredentials,timestampRequests:n.timestampRequests||this.timestampRequests,timestampParam:n.timestampParam||this.timestampParam,policyPort:n.policyPort||this.policyPort,pfx:n.pfx||this.pfx,key:n.key||this.key,passphrase:n.passphrase||this.passphrase,cert:n.cert||this.cert,ca:n.ca||this.ca,ciphers:n.ciphers||this.ciphers,rejectUnauthorized:n.rejectUnauthorized||this.rejectUnauthorized,perMessageDeflate:n.perMessageDeflate||this.perMessageDeflate,extraHeaders:n.extraHeaders||this.extraHeaders,forceNode:n.forceNode||this.forceNode,localAddress:n.localAddress||this.localAddress,requestTimeout:n.requestTimeout||this.requestTimeout,protocols:n.protocols||void 0,isReactNative:this.isReactNative})},u.prototype.open=function(){var e;if(this.rememberUpgrade&&u.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))e="websocket";else{if(0===this.transports.length){var t=this;return void setTimeout((function(){t.emit("error","No transports available")}),0)}e=this.transports[0]}this.readyState="opening";try{e=this.createTransport(e)}catch(e){return this.transports.shift(),void this.open()}e.open(),this.setTransport(e)},u.prototype.setTransport=function(e){o("setting transport %s",e.name);var t=this;this.transport&&(o("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=e,e.on("drain",(function(){t.onDrain()})).on("packet",(function(e){t.onPacket(e)})).on("error",(function(e){t.onError(e)})).on("close",(function(){t.onClose("transport close")}))},u.prototype.probe=function(e){o('probing transport "%s"',e);var t=this.createTransport(e,{probe:1}),n=!1,r=this;function i(){r.onlyBinaryUpgrades&&(n=n||!this.supportsBinary&&r.transport.supportsBinary),n||(o('probe transport "%s" opened',e),t.send([{type:"ping",data:"probe"}]),t.once("packet",(function(i){if(!n)if("pong"===i.type&&"probe"===i.data){if(o('probe transport "%s" pong',e),r.upgrading=!0,r.emit("upgrading",t),!t)return;u.priorWebsocketSuccess="websocket"===t.name,o('pausing current transport "%s"',r.transport.name),r.transport.pause((function(){n||"closed"!==r.readyState&&(o("changing transport and sending upgrade packet"),f(),r.setTransport(t),t.send([{type:"upgrade"}]),r.emit("upgrade",t),t=null,r.upgrading=!1,r.flush())}))}else{o('probe transport "%s" failed',e);var a=new Error("probe error");a.transport=t.name,r.emit("upgradeError",a)}})))}function a(){n||(n=!0,f(),t.close(),t=null)}function s(n){var i=new Error("probe error: "+n);i.transport=t.name,a(),o('probe transport "%s" failed because of error: %s',e,n),r.emit("upgradeError",i)}function c(){s("transport closed")}function l(){s("socket closed")}function d(e){t&&e.name!==t.name&&(o('"%s" works - aborting "%s"',e.name,t.name),a())}function f(){t.removeListener("open",i),t.removeListener("error",s),t.removeListener("close",c),r.removeListener("close",l),r.removeListener("upgrading",d)}u.priorWebsocketSuccess=!1,t.once("open",i),t.once("error",s),t.once("close",c),this.once("close",l),this.once("upgrading",d),t.open()},u.prototype.onOpen=function(){if(o("socket open"),this.readyState="open",u.priorWebsocketSuccess="websocket"===this.transport.name,this.emit("open"),this.flush(),"open"===this.readyState&&this.upgrade&&this.transport.pause){o("starting upgrade probes");for(var e=0,t=this.upgrades.length;e<t;e++)this.probe(this.upgrades[e])}},u.prototype.onPacket=function(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(o('socket receive: type "%s", data "%s"',e.type,e.data),this.emit("packet",e),this.emit("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"pong":this.setPing(),this.emit("pong");break;case"error":var t=new Error("server error");t.code=e.data,this.onError(t);break;case"message":this.emit("data",e.data),this.emit("message",e.data)}else o('packet received with socket readyState "%s"',this.readyState)},u.prototype.onHandshake=function(e){this.emit("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.onOpen(),"closed"!==this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},u.prototype.onHeartbeat=function(e){clearTimeout(this.pingTimeoutTimer);var t=this;t.pingTimeoutTimer=setTimeout((function(){"closed"!==t.readyState&&t.onClose("ping timeout")}),e||t.pingInterval+t.pingTimeout)},u.prototype.setPing=function(){var e=this;clearTimeout(e.pingIntervalTimer),e.pingIntervalTimer=setTimeout((function(){o("writing ping packet - expecting pong within %sms",e.pingTimeout),e.ping(),e.onHeartbeat(e.pingTimeout)}),e.pingInterval)},u.prototype.ping=function(){var e=this;this.sendPacket("ping",(function(){e.emit("ping")}))},u.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emit("drain"):this.flush()},u.prototype.flush=function(){"closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(o("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},u.prototype.write=u.prototype.send=function(e,t,n){return this.sendPacket("message",e,t,n),this},u.prototype.sendPacket=function(e,t,n,r){if("function"==typeof t&&(r=t,t=void 0),"function"==typeof n&&(r=n,n=null),"closing"!==this.readyState&&"closed"!==this.readyState){(n=n||{}).compress=!1!==n.compress;var i={type:e,data:t,options:n};this.emit("packetCreate",i),this.writeBuffer.push(i),r&&this.once("flush",r),this.flush()}},u.prototype.close=function(){if("opening"===this.readyState||"open"===this.readyState){this.readyState="closing";var e=this;this.writeBuffer.length?this.once("drain",(function(){this.upgrading?r():t()})):this.upgrading?r():t()}function t(){e.onClose("forced close"),o("socket closing - telling transport to close"),e.transport.close()}function n(){e.removeListener("upgrade",n),e.removeListener("upgradeError",n),t()}function r(){e.once("upgrade",n),e.once("upgradeError",n)}return this},u.prototype.onError=function(e){o("socket error %j",e),u.priorWebsocketSuccess=!1,this.emit("error",e),this.onClose("transport error",e)},u.prototype.onClose=function(e,t){"opening"!==this.readyState&&"open"!==this.readyState&&"closing"!==this.readyState||(o('socket close with reason: "%s"',e),clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",e,t),this.writeBuffer=[],this.prevBufferLen=0)},u.prototype.filterUpgrades=function(e){for(var t=[],n=0,r=e.length;n<r;n++)~a(this.transports,e[n])&&t.push(e[n]);return t}},function(e,t){try{e.exports="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(t){e.exports=!1}},function(e,t,n){var r=n(68),i=n(89),o=n(35),a=n(58),s=n(24)("engine.io-client:polling-xhr"),c=n(69);function l(){}function u(e){if(i.call(this,e),this.requestTimeout=e.requestTimeout,this.extraHeaders=e.extraHeaders,"undefined"!=typeof location){var t="https:"===location.protocol,n=location.port;n||(n=t?443:80),this.xd="undefined"!=typeof location&&e.hostname!==location.hostname||n!==e.port,this.xs=e.secure!==t}}function d(e){this.method=e.method||"GET",this.uri=e.uri,this.xd=!!e.xd,this.xs=!!e.xs,this.async=!1!==e.async,this.data=void 0!==e.data?e.data:null,this.agent=e.agent,this.isBinary=e.isBinary,this.supportsBinary=e.supportsBinary,this.enablesXDR=e.enablesXDR,this.withCredentials=e.withCredentials,this.requestTimeout=e.requestTimeout,this.pfx=e.pfx,this.key=e.key,this.passphrase=e.passphrase,this.cert=e.cert,this.ca=e.ca,this.ciphers=e.ciphers,this.rejectUnauthorized=e.rejectUnauthorized,this.extraHeaders=e.extraHeaders,this.create()}function f(){for(var e in d.requests)d.requests.hasOwnProperty(e)&&d.requests[e].abort()}e.exports=u,e.exports.Request=d,a(u,i),u.prototype.supportsBinary=!0,u.prototype.request=function(e){return(e=e||{}).uri=this.uri(),e.xd=this.xd,e.xs=this.xs,e.agent=this.agent||!1,e.supportsBinary=this.supportsBinary,e.enablesXDR=this.enablesXDR,e.withCredentials=this.withCredentials,e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized,e.requestTimeout=this.requestTimeout,e.extraHeaders=this.extraHeaders,new d(e)},u.prototype.doWrite=function(e,t){var n=this.request({method:"POST",data:e,isBinary:"string"!=typeof e&&void 0!==e}),r=this;n.on("success",t),n.on("error",(function(e){r.onError("xhr post error",e)})),this.sendXhr=n},u.prototype.doPoll=function(){s("xhr poll");var e=this.request(),t=this;e.on("data",(function(e){t.onData(e)})),e.on("error",(function(e){t.onError("xhr poll error",e)})),this.pollXhr=e},o(d.prototype),d.prototype.create=function(){var e={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized;var t=this.xhr=new r(e),n=this;try{s("xhr open %s: %s",this.method,this.uri),t.open(this.method,this.uri,this.async);try{if(this.extraHeaders)for(var i in t.setDisableHeaderCheck&&t.setDisableHeaderCheck(!0),this.extraHeaders)this.extraHeaders.hasOwnProperty(i)&&t.setRequestHeader(i,this.extraHeaders[i])}catch(e){}if("POST"===this.method)try{t.setRequestHeader("Content-type",this.isBinary?"application/octet-stream":"text/plain;charset=UTF-8")}catch(e){}try{t.setRequestHeader("Accept","*/*")}catch(e){}"withCredentials"in t&&(t.withCredentials=this.withCredentials),this.requestTimeout&&(t.timeout=this.requestTimeout),this.hasXDR()?(t.onload=function(){n.onLoad()},t.onerror=function(){n.onError(t.responseText)}):t.onreadystatechange=function(){if(2===t.readyState)try{var e=t.getResponseHeader("Content-Type");(n.supportsBinary&&"application/octet-stream"===e||"application/octet-stream; charset=UTF-8"===e)&&(t.responseType="arraybuffer")}catch(e){}4===t.readyState&&(200===t.status||1223===t.status?n.onLoad():setTimeout((function(){n.onError("number"==typeof t.status?t.status:0)}),0))},s("xhr data %s",this.data),t.send(this.data)}catch(e){return void setTimeout((function(){n.onError(e)}),0)}"undefined"!=typeof document&&(this.index=d.requestsCount++,d.requests[this.index]=this)},d.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},d.prototype.onData=function(e){this.emit("data",e),this.onSuccess()},d.prototype.onError=function(e){this.emit("error",e),this.cleanup(!0)},d.prototype.cleanup=function(e){if(null!=this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=l:this.xhr.onreadystatechange=l,e)try{this.xhr.abort()}catch(e){}"undefined"!=typeof document&&delete d.requests[this.index],this.xhr=null}},d.prototype.onLoad=function(){var e;try{var t;try{t=this.xhr.getResponseHeader("Content-Type")}catch(e){}e=("application/octet-stream"===t||"application/octet-stream; charset=UTF-8"===t)&&this.xhr.response||this.xhr.responseText}catch(e){this.onError(e)}null!=e&&this.onData(e)},d.prototype.hasXDR=function(){return"undefined"!=typeof XDomainRequest&&!this.xs&&this.enablesXDR},d.prototype.abort=function(){this.cleanup()},d.requestsCount=0,d.requests={},"undefined"!=typeof document&&("function"==typeof attachEvent?attachEvent("onunload",f):"function"==typeof addEventListener&&addEventListener("onpagehide"in c?"pagehide":"unload",f,!1))},function(e,t){e.exports=Object.keys||function(e){var t=[],n=Object.prototype.hasOwnProperty;for(var r in e)n.call(e,r)&&t.push(r);return t}},function(e,t){e.exports=function(e,t,n){var r=e.byteLength;if(t=t||0,n=n||r,e.slice)return e.slice(t,n);if(t<0&&(t+=r),n<0&&(n+=r),n>r&&(n=r),t>=r||t>=n||0===r)return new ArrayBuffer(0);for(var i=new Uint8Array(e),o=new Uint8Array(n-t),a=t,s=0;a<n;a++,s++)o[s]=i[a];return o.buffer}},function(e,t){function n(){}e.exports=function(e,t,r){var i=!1;return r=r||n,o.count=e,0===e?t():o;function o(e,n){if(o.count<=0)throw new Error("after called too many times");--o.count,e?(i=!0,t(e),t=r):0!==o.count||i||t(null,n)}}},function(e,t){var n,r,i,o=String.fromCharCode;function a(e){for(var t,n,r=[],i=0,o=e.length;i<o;)(t=e.charCodeAt(i++))>=55296&&t<=56319&&i<o?56320==(64512&(n=e.charCodeAt(i++)))?r.push(((1023&t)<<10)+(1023&n)+65536):(r.push(t),i--):r.push(t);return r}function s(e,t){if(e>=55296&&e<=57343){if(t)throw Error("Lone surrogate U+"+e.toString(16).toUpperCase()+" is not a scalar value");return!1}return!0}function c(e,t){return o(e>>t&63|128)}function l(e,t){if(0==(4294967168&e))return o(e);var n="";return 0==(4294965248&e)?n=o(e>>6&31|192):0==(4294901760&e)?(s(e,t)||(e=65533),n=o(e>>12&15|224),n+=c(e,6)):0==(4292870144&e)&&(n=o(e>>18&7|240),n+=c(e,12),n+=c(e,6)),n+o(63&e|128)}function u(){if(i>=r)throw Error("Invalid byte index");var e=255&n[i];if(i++,128==(192&e))return 63&e;throw Error("Invalid continuation byte")}function d(e){var t,o;if(i>r)throw Error("Invalid byte index");if(i==r)return!1;if(t=255&n[i],i++,0==(128&t))return t;if(192==(224&t)){if((o=(31&t)<<6|u())>=128)return o;throw Error("Invalid continuation byte")}if(224==(240&t)){if((o=(15&t)<<12|u()<<6|u())>=2048)return s(o,e)?o:65533;throw Error("Invalid continuation byte")}if(240==(248&t)&&(o=(7&t)<<18|u()<<12|u()<<6|u())>=65536&&o<=1114111)return o;throw Error("Invalid UTF-8 detected")}e.exports={version:"2.1.2",encode:function(e,t){for(var n=!1!==(t=t||{}).strict,r=a(e),i=r.length,o=-1,s="";++o<i;)s+=l(r[o],n);return s},decode:function(e,t){var s=!1!==(t=t||{}).strict;n=a(e),r=n.length,i=0;for(var c,l=[];!1!==(c=d(s));)l.push(c);return function(e){for(var t,n=e.length,r=-1,i="";++r<n;)(t=e[r])>65535&&(i+=o((t-=65536)>>>10&1023|55296),t=56320|1023&t),i+=o(t);return i}(l)}}},function(e,t){!function(e){"use strict";t.encode=function(t){var n,r=new Uint8Array(t),i=r.length,o="";for(n=0;n<i;n+=3)o+=e[r[n]>>2],o+=e[(3&r[n])<<4|r[n+1]>>4],o+=e[(15&r[n+1])<<2|r[n+2]>>6],o+=e[63&r[n+2]];return i%3==2?o=o.substring(0,o.length-1)+"=":i%3==1&&(o=o.substring(0,o.length-2)+"=="),o},t.decode=function(t){var n,r,i,o,a,s=.75*t.length,c=t.length,l=0;"="===t[t.length-1]&&(s--,"="===t[t.length-2]&&s--);var u=new ArrayBuffer(s),d=new Uint8Array(u);for(n=0;n<c;n+=4)r=e.indexOf(t[n]),i=e.indexOf(t[n+1]),o=e.indexOf(t[n+2]),a=e.indexOf(t[n+3]),d[l++]=r<<2|i>>4,d[l++]=(15&i)<<4|o>>2,d[l++]=(3&o)<<6|63&a;return u}}("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/")},function(e,t){var n=void 0!==n?n:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder&&MozBlobBuilder,r=function(){try{return 2===new Blob(["hi"]).size}catch(e){return!1}}(),i=r&&function(){try{return 2===new Blob([new Uint8Array([1,2])]).size}catch(e){return!1}}(),o=n&&n.prototype.append&&n.prototype.getBlob;function a(e){return e.map((function(e){if(e.buffer instanceof ArrayBuffer){var t=e.buffer;if(e.byteLength!==t.byteLength){var n=new Uint8Array(e.byteLength);n.set(new Uint8Array(t,e.byteOffset,e.byteLength)),t=n.buffer}return t}return e}))}function s(e,t){t=t||{};var r=new n;return a(e).forEach((function(e){r.append(e)})),t.type?r.getBlob(t.type):r.getBlob()}function c(e,t){return new Blob(a(e),t||{})}"undefined"!=typeof Blob&&(s.prototype=Blob.prototype,c.prototype=Blob.prototype),e.exports=r?i?Blob:c:o?s:void 0},function(e,t,n){var r=n(89),i=n(58),o=n(69);e.exports=u;var a,s=/\n/g,c=/\\n/g;function l(){}function u(e){r.call(this,e),this.query=this.query||{},a||(a=o.___eio=o.___eio||[]),this.index=a.length;var t=this;a.push((function(e){t.onData(e)})),this.query.j=this.index,"function"==typeof addEventListener&&addEventListener("beforeunload",(function(){t.script&&(t.script.onerror=l)}),!1)}i(u,r),u.prototype.supportsBinary=!1,u.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),r.prototype.doClose.call(this)},u.prototype.doPoll=function(){var e=this,t=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),t.async=!0,t.src=this.uri(),t.onerror=function(t){e.onError("jsonp poll error",t)};var n=document.getElementsByTagName("script")[0];n?n.parentNode.insertBefore(t,n):(document.head||document.body).appendChild(t),this.script=t,"undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent)&&setTimeout((function(){var e=document.createElement("iframe");document.body.appendChild(e),document.body.removeChild(e)}),100)},u.prototype.doWrite=function(e,t){var n=this;if(!this.form){var r,i=document.createElement("form"),o=document.createElement("textarea"),a=this.iframeId="eio_iframe_"+this.index;i.className="socketio",i.style.position="absolute",i.style.top="-1000px",i.style.left="-1000px",i.target=a,i.method="POST",i.setAttribute("accept-charset","utf-8"),o.name="d",i.appendChild(o),document.body.appendChild(i),this.form=i,this.area=o}function l(){u(),t()}function u(){if(n.iframe)try{n.form.removeChild(n.iframe)}catch(e){n.onError("jsonp polling iframe removal error",e)}try{var e;r=document.createElement('<iframe src="javascript:0" name="'+n.iframeId+'">')}catch(e){(r=document.createElement("iframe")).name=n.iframeId,r.src="javascript:0"}r.id=n.iframeId,n.form.appendChild(r),n.iframe=r}this.form.action=this.uri(),u(),e=e.replace(c,"\\\n"),this.area.value=e.replace(s,"\\n");try{this.form.submit()}catch(e){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"===n.iframe.readyState&&l()}:this.iframe.onload=l}},function(e,t,n){(function(t){var r,i,o=n(70),a=n(36),s=n(57),c=n(58),l=n(91),u=n(24)("engine.io-client:websocket");if("undefined"!=typeof WebSocket?r=WebSocket:"undefined"!=typeof self&&(r=self.WebSocket||self.MozWebSocket),"undefined"==typeof window)try{i=n(298)}catch(e){}var d=r||i;function f(e){e&&e.forceBase64&&(this.supportsBinary=!1),this.perMessageDeflate=e.perMessageDeflate,this.usingBrowserWebSocket=r&&!e.forceNode,this.protocols=e.protocols,this.usingBrowserWebSocket||(d=i),o.call(this,e)}e.exports=f,c(f,o),f.prototype.name="websocket",f.prototype.supportsBinary=!0,f.prototype.doOpen=function(){if(this.check()){var e=this.uri(),t=this.protocols,n={};this.isReactNative||(n.agent=this.agent,n.perMessageDeflate=this.perMessageDeflate,n.pfx=this.pfx,n.key=this.key,n.passphrase=this.passphrase,n.cert=this.cert,n.ca=this.ca,n.ciphers=this.ciphers,n.rejectUnauthorized=this.rejectUnauthorized),this.extraHeaders&&(n.headers=this.extraHeaders),this.localAddress&&(n.localAddress=this.localAddress);try{this.ws=this.usingBrowserWebSocket&&!this.isReactNative?t?new d(e,t):new d(e):new d(e,t,n)}catch(e){return this.emit("error",e)}void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.supports&&this.ws.supports.binary?(this.supportsBinary=!0,this.ws.binaryType="nodebuffer"):this.ws.binaryType="arraybuffer",this.addEventListeners()}},f.prototype.addEventListeners=function(){var e=this;this.ws.onopen=function(){e.onOpen()},this.ws.onclose=function(){e.onClose()},this.ws.onmessage=function(t){e.onData(t.data)},this.ws.onerror=function(t){e.onError("websocket error",t)}},f.prototype.write=function(e){var n=this;this.writable=!1;for(var r=e.length,i=0,o=r;i<o;i++)!function(e){a.encodePacket(e,n.supportsBinary,(function(i){if(!n.usingBrowserWebSocket){var o={};e.options&&(o.compress=e.options.compress),n.perMessageDeflate&&("string"==typeof i?t.byteLength(i):i.length)<n.perMessageDeflate.threshold&&(o.compress=!1)}try{n.usingBrowserWebSocket?n.ws.send(i):n.ws.send(i,o)}catch(e){u("websocket closed before onclose event")}--r||(n.emit("flush"),setTimeout((function(){n.writable=!0,n.emit("drain")}),0))}))}(e[i])},f.prototype.onClose=function(){o.prototype.onClose.call(this)},f.prototype.doClose=function(){void 0!==this.ws&&this.ws.close()},f.prototype.uri=function(){var e=this.query||{},t=this.secure?"wss":"ws",n="";return this.port&&("wss"===t&&443!==Number(this.port)||"ws"===t&&80!==Number(this.port))&&(n=":"+this.port),this.timestampRequests&&(e[this.timestampParam]=l()),this.supportsBinary||(e.b64=1),(e=s.encode(e)).length&&(e="?"+e),t+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+n+this.path+e},f.prototype.check=function(){return!(!d||"__initialize"in d&&this.name===f.prototype.name)}}).call(this,n(51).Buffer)},function(e,t){},function(e,t){e.exports=function(e,t){for(var n=[],r=(t=t||0)||0;r<e.length;r++)n[r-t]=e[r];return n}},function(e,t){function n(e){this.ms=(e=e||{}).min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}e.exports=n,n.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=0==(1&Math.floor(10*t))?e-n:e+n}return 0|Math.min(e,this.max)},n.prototype.reset=function(){this.attempts=0},n.prototype.setMin=function(e){this.ms=e},n.prototype.setMax=function(e){this.max=e},n.prototype.setJitter=function(e){this.jitter=e}},function(e,t,n){"use strict";(function(t){var r=n(302),i=n(303),o=/^[A-Za-z][A-Za-z0-9+-.]*:[\\/]+/,a=/^([a-z][a-z0-9.+-]*:)?([\\/]{1,})?([\S\s]*)/i,s=new RegExp("^[\\x09\\x0A\\x0B\\x0C\\x0D\\x20\\xA0\\u1680\\u180E\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200A\\u202F\\u205F\\u3000\\u2028\\u2029\\uFEFF]+");function c(e){return(e||"").toString().replace(s,"")}var l=[["#","hash"],["?","query"],function(e){return e.replace("\\","/")},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d+)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],u={hash:1,query:1};function d(e){var n,r=("undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{}).location||{},i={},a=typeof(e=e||r);if("blob:"===e.protocol)i=new h(unescape(e.pathname),{});else if("string"===a)for(n in i=new h(e,{}),u)delete i[n];else if("object"===a){for(n in e)n in u||(i[n]=e[n]);void 0===i.slashes&&(i.slashes=o.test(e.href))}return i}function f(e){e=c(e);var t=a.exec(e);return{protocol:t[1]?t[1].toLowerCase():"",slashes:!!(t[2]&&t[2].length>=2),rest:t[2]&&1===t[2].length?"/"+t[3]:t[3]}}function h(e,t,n){if(e=c(e),!(this instanceof h))return new h(e,t,n);var o,a,s,u,p,v,g=l.slice(),m=typeof t,y=this,k=0;for("object"!==m&&"string"!==m&&(n=t,t=null),n&&"function"!=typeof n&&(n=i.parse),t=d(t),o=!(a=f(e||"")).protocol&&!a.slashes,y.slashes=a.slashes||o&&t.slashes,y.protocol=a.protocol||t.protocol||"",e=a.rest,a.slashes||(g[3]=[/(.*)/,"pathname"]);k<g.length;k++)"function"!=typeof(u=g[k])?(v=u[1],(s=u[0])!=s?y[v]=e:"string"==typeof s?~(p=e.indexOf(s))&&("number"==typeof u[2]?(y[v]=e.slice(0,p),e=e.slice(p+u[2])):(y[v]=e.slice(p),e=e.slice(0,p))):(p=s.exec(e))&&(y[v]=p[1],e=e.slice(0,p.index)),y[v]=y[v]||o&&u[3]&&t[v]||"",u[4]&&(y[v]=y[v].toLowerCase())):e=u(e);n&&(y.query=n(y.query)),o&&t.slashes&&"/"!==y.pathname.charAt(0)&&(""!==y.pathname||""!==t.pathname)&&(y.pathname=function(e,t){if(""===e)return t;for(var n=(t||"/").split("/").slice(0,-1).concat(e.split("/")),r=n.length,i=n[r-1],o=!1,a=0;r--;)"."===n[r]?n.splice(r,1):".."===n[r]?(n.splice(r,1),a++):a&&(0===r&&(o=!0),n.splice(r,1),a--);return o&&n.unshift(""),"."!==i&&".."!==i||n.push(""),n.join("/")}(y.pathname,t.pathname)),"/"!==y.pathname.charAt(0)&&y.hostname&&(y.pathname="/"+y.pathname),r(y.port,y.protocol)||(y.host=y.hostname,y.port=""),y.username=y.password="",y.auth&&(u=y.auth.split(":"),y.username=u[0]||"",y.password=u[1]||""),y.origin=y.protocol&&y.host&&"file:"!==y.protocol?y.protocol+"//"+y.host:"null",y.href=y.toString()}h.prototype={set:function(e,t,n){var o=this;switch(e){case"query":"string"==typeof t&&t.length&&(t=(n||i.parse)(t)),o[e]=t;break;case"port":o[e]=t,r(t,o.protocol)?t&&(o.host=o.hostname+":"+t):(o.host=o.hostname,o[e]="");break;case"hostname":o[e]=t,o.port&&(t+=":"+o.port),o.host=t;break;case"host":o[e]=t,/:\d+$/.test(t)?(t=t.split(":"),o.port=t.pop(),o.hostname=t.join(":")):(o.hostname=t,o.port="");break;case"protocol":o.protocol=t.toLowerCase(),o.slashes=!n;break;case"pathname":case"hash":if(t){var a="pathname"===e?"/":"#";o[e]=t.charAt(0)!==a?a+t:t}else o[e]=t;break;default:o[e]=t}for(var s=0;s<l.length;s++){var c=l[s];c[4]&&(o[c[1]]=o[c[1]].toLowerCase())}return o.origin=o.protocol&&o.host&&"file:"!==o.protocol?o.protocol+"//"+o.host:"null",o.href=o.toString(),o},toString:function(e){e&&"function"==typeof e||(e=i.stringify);var t,n=this,r=n.protocol;r&&":"!==r.charAt(r.length-1)&&(r+=":");var o=r+(n.slashes?"//":"");return n.username&&(o+=n.username,n.password&&(o+=":"+n.password),o+="@"),o+=n.host+n.pathname,(t="object"==typeof n.query?e(n.query):n.query)&&(o+="?"!==t.charAt(0)?"?"+t:t),n.hash&&(o+=n.hash),o}},h.extractProtocol=f,h.location=d,h.trimLeft=c,h.qs=i,e.exports=h}).call(this,n(49))},function(e,t,n){"use strict";e.exports=function(e,t){if(t=t.split(":")[0],!(e=+e))return!1;switch(t){case"http":case"ws":return 80!==e;case"https":case"wss":return 443!==e;case"ftp":return 21!==e;case"gopher":return 70!==e;case"file":return!1}return 0!==e}},function(e,t,n){"use strict";var r=Object.prototype.hasOwnProperty;function i(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(e){return null}}function o(e){try{return encodeURIComponent(e)}catch(e){return null}}t.stringify=function(e,t){t=t||"";var n,i,a=[];for(i in"string"!=typeof t&&(t="?"),e)if(r.call(e,i)){if((n=e[i])||null!=n&&!isNaN(n)||(n=""),i=o(i),n=o(n),null===i||null===n)continue;a.push(i+"="+n)}return a.length?t+a.join("&"):""},t.parse=function(e){for(var t,n=/([^=?#&]+)=?([^&]*)/g,r={};t=n.exec(e);){var o=i(t[1]),a=i(t[2]);null===o||null===a||o in r||(r[o]=a)}return r}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(1)),o=r(n(3)),a=r(n(305)),s=r(n(32)),c=function(){function e(t,n,r){_classCallCheck(this,e),this._channelName=t,this._wsGateway=n,this._socket=r,this._subscribeToChannel()}return _createClass(e,[{key:"remove",value:function(){this._socket.off(this._channelName)}},{key:"getEventName",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n="";return t&&(n+="all:"),n+="event",e&&(n+=":"+e),n}},{key:"_subscribeToChannel",value:function(){var e=this;this._socket.on(this._channelName,(function(t){var n=s.default.decode(t,a.default);e.fire(e.getEventName(n.type,!0),n.data,n.socketId),n.socketId!==e._wsGateway.sessionId&&e.fire(e.getEventName(n.type),n.data,n.socketId)}))}}]),e}();i.default(c,o.default),t.default=c},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i){var o;return _classCallCheck(this,n),(o=t.call(this)).type=e,o.socketId=r,o.data=i,o}return _createClass(n,[{key:"toJSON",value:function(){return{type:this.type,socketId:this.socketId,data:this.data}}}],[{key:"fromJSON",value:function(e){return new n(e.type,e.socketId,e.data)}}]),n}(r(n(6)).default);t.default=i,i.DESCRIPTOR_NAME="ChannelMessage",i.DESCRIPTOR={fields:{type:{type:"uint32",id:1},socketId:{type:"string",id:2},data:{type:"bytes",id:3}}}},function(e,t,n){"use strict";var r=e.exports=n(307);r.build="light",r.load=function(e,t,n){return"function"==typeof t?(n=t,t=new r.Root):t||(t=new r.Root),t.load(e,n)},r.loadSync=function(e,t){return t||(t=new r.Root),t.loadSync(e)},r.encoder=n(100),r.decoder=n(105),r.verifier=n(106),r.converter=n(107),r.ReflectionObject=n(37),r.Namespace=n(52),r.Root=n(109),r.Enum=n(26),r.Type=n(101),r.Field=n(38),r.OneOf=n(73),r.MapField=n(102),r.Service=n(103),r.Method=n(104),r.Message=n(74),r.wrappers=n(108),r.types=n(53),r.util=n(14),r.ReflectionObject._configure(r.Root),r.Namespace._configure(r.Type,r.Service,r.Enum),r.Root._configure(r.Type),r.Field._configure(r.Type)},function(e,t,n){"use strict";var r=t;function i(){r.util._configure(),r.Writer._configure(r.BufferWriter),r.Reader._configure(r.BufferReader)}r.build="minimal",r.Writer=n(71),r.BufferWriter=n(314),r.Reader=n(72),r.BufferReader=n(315),r.util=n(25),r.rpc=n(98),r.roots=n(99),r.configure=i,i()},function(e,t,n){"use strict";var r=t;r.length=function(e){var t=e.length;if(!t)return 0;for(var n=0;--t%4>1&&"="===e.charAt(t);)++n;return Math.ceil(3*e.length)/4-n};for(var i=new Array(64),o=new Array(123),a=0;a<64;)o[i[a]=a<26?a+65:a<52?a+71:a<62?a-4:a-59|43]=a++;r.encode=function(e,t,n){for(var r,o=null,a=[],s=0,c=0;t<n;){var l=e[t++];switch(c){case 0:a[s++]=i[l>>2],r=(3&l)<<4,c=1;break;case 1:a[s++]=i[r|l>>4],r=(15&l)<<2,c=2;break;case 2:a[s++]=i[r|l>>6],a[s++]=i[63&l],c=0}s>8191&&((o||(o=[])).push(String.fromCharCode.apply(String,a)),s=0)}return c&&(a[s++]=i[r],a[s++]=61,1===c&&(a[s++]=61)),o?(s&&o.push(String.fromCharCode.apply(String,a.slice(0,s))),o.join("")):String.fromCharCode.apply(String,a.slice(0,s))},r.decode=function(e,t,n){for(var r,i=n,a=0,s=0;s<e.length;){var c=e.charCodeAt(s++);if(61===c&&a>1)break;if(void 0===(c=o[c]))throw Error("invalid encoding");switch(a){case 0:r=c,a=1;break;case 1:t[n++]=r<<2|(48&c)>>4,r=c,a=2;break;case 2:t[n++]=(15&r)<<4|(60&c)>>2,r=c,a=3;break;case 3:t[n++]=(3&r)<<6|c,a=0}}if(1===a)throw Error("invalid encoding");return n-i},r.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}},function(e,t,n){"use strict";function r(){this._listeners={}}e.exports=r,r.prototype.on=function(e,t,n){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:t,ctx:n||this}),this},r.prototype.off=function(e,t){if(void 0===e)this._listeners={};else if(void 0===t)this._listeners[e]=[];else for(var n=this._listeners[e],r=0;r<n.length;)n[r].fn===t?n.splice(r,1):++r;return this},r.prototype.emit=function(e){var t=this._listeners[e];if(t){for(var n=[],r=1;r<arguments.length;)n.push(arguments[r++]);for(r=0;r<t.length;)t[r].fn.apply(t[r++].ctx,n)}return this}},function(e,t,n){"use strict";function r(e){return"undefined"!=typeof Float32Array?function(){var t=new Float32Array([-0]),n=new Uint8Array(t.buffer),r=128===n[3];function i(e,r,i){t[0]=e,r[i]=n[0],r[i+1]=n[1],r[i+2]=n[2],r[i+3]=n[3]}function o(e,r,i){t[0]=e,r[i]=n[3],r[i+1]=n[2],r[i+2]=n[1],r[i+3]=n[0]}function a(e,r){return n[0]=e[r],n[1]=e[r+1],n[2]=e[r+2],n[3]=e[r+3],t[0]}function s(e,r){return n[3]=e[r],n[2]=e[r+1],n[1]=e[r+2],n[0]=e[r+3],t[0]}e.writeFloatLE=r?i:o,e.writeFloatBE=r?o:i,e.readFloatLE=r?a:s,e.readFloatBE=r?s:a}():function(){function t(e,t,n,r){var i=t<0?1:0;if(i&&(t=-t),0===t)e(1/t>0?0:2147483648,n,r);else if(isNaN(t))e(2143289344,n,r);else if(t>34028234663852886e22)e((i<<31|2139095040)>>>0,n,r);else if(t<11754943508222875e-54)e((i<<31|Math.round(t/1401298464324817e-60))>>>0,n,r);else{var o=Math.floor(Math.log(t)/Math.LN2);e((i<<31|o+127<<23|8388607&Math.round(t*Math.pow(2,-o)*8388608))>>>0,n,r)}}function n(e,t,n){var r=e(t,n),i=2*(r>>31)+1,o=r>>>23&255,a=8388607&r;return 255===o?a?NaN:i*(1/0):0===o?1401298464324817e-60*i*a:i*Math.pow(2,o-150)*(a+8388608)}e.writeFloatLE=t.bind(null,i),e.writeFloatBE=t.bind(null,o),e.readFloatLE=n.bind(null,a),e.readFloatBE=n.bind(null,s)}(),"undefined"!=typeof Float64Array?function(){var t=new Float64Array([-0]),n=new Uint8Array(t.buffer),r=128===n[7];function i(e,r,i){t[0]=e,r[i]=n[0],r[i+1]=n[1],r[i+2]=n[2],r[i+3]=n[3],r[i+4]=n[4],r[i+5]=n[5],r[i+6]=n[6],r[i+7]=n[7]}function o(e,r,i){t[0]=e,r[i]=n[7],r[i+1]=n[6],r[i+2]=n[5],r[i+3]=n[4],r[i+4]=n[3],r[i+5]=n[2],r[i+6]=n[1],r[i+7]=n[0]}function a(e,r){return n[0]=e[r],n[1]=e[r+1],n[2]=e[r+2],n[3]=e[r+3],n[4]=e[r+4],n[5]=e[r+5],n[6]=e[r+6],n[7]=e[r+7],t[0]}function s(e,r){return n[7]=e[r],n[6]=e[r+1],n[5]=e[r+2],n[4]=e[r+3],n[3]=e[r+4],n[2]=e[r+5],n[1]=e[r+6],n[0]=e[r+7],t[0]}e.writeDoubleLE=r?i:o,e.writeDoubleBE=r?o:i,e.readDoubleLE=r?a:s,e.readDoubleBE=r?s:a}():function(){function t(e,t,n,r,i,o){var a=r<0?1:0;if(a&&(r=-r),0===r)e(0,i,o+t),e(1/r>0?0:2147483648,i,o+n);else if(isNaN(r))e(0,i,o+t),e(2146959360,i,o+n);else if(r>17976931348623157e292)e(0,i,o+t),e((a<<31|2146435072)>>>0,i,o+n);else{var s;if(r<22250738585072014e-324)e((s=r/5e-324)>>>0,i,o+t),e((a<<31|s/4294967296)>>>0,i,o+n);else{var c=Math.floor(Math.log(r)/Math.LN2);1024===c&&(c=1023),e(4503599627370496*(s=r*Math.pow(2,-c))>>>0,i,o+t),e((a<<31|c+1023<<20|1048576*s&1048575)>>>0,i,o+n)}}}function n(e,t,n,r,i){var o=e(r,i+t),a=e(r,i+n),s=2*(a>>31)+1,c=a>>>20&2047,l=4294967296*(1048575&a)+o;return 2047===c?l?NaN:s*(1/0):0===c?5e-324*s*l:s*Math.pow(2,c-1075)*(l+4503599627370496)}e.writeDoubleLE=t.bind(null,i,0,4),e.writeDoubleBE=t.bind(null,o,4,0),e.readDoubleLE=n.bind(null,a,0,4),e.readDoubleBE=n.bind(null,s,4,0)}(),e}function i(e,t,n){t[n]=255&e,t[n+1]=e>>>8&255,t[n+2]=e>>>16&255,t[n+3]=e>>>24}function o(e,t,n){t[n]=e>>>24,t[n+1]=e>>>16&255,t[n+2]=e>>>8&255,t[n+3]=255&e}function a(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}function s(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}e.exports=r(r)},function(e,t,n){"use strict";var r=t;r.length=function(e){for(var t=0,n=0,r=0;r<e.length;++r)(n=e.charCodeAt(r))<128?t+=1:n<2048?t+=2:55296==(64512&n)&&56320==(64512&e.charCodeAt(r+1))?(++r,t+=4):t+=3;return t},r.read=function(e,t,n){if(n-t<1)return"";for(var r,i=null,o=[],a=0;t<n;)(r=e[t++])<128?o[a++]=r:r>191&&r<224?o[a++]=(31&r)<<6|63&e[t++]:r>239&&r<365?(r=((7&r)<<18|(63&e[t++])<<12|(63&e[t++])<<6|63&e[t++])-65536,o[a++]=55296+(r>>10),o[a++]=56320+(1023&r)):o[a++]=(15&r)<<12|(63&e[t++])<<6|63&e[t++],a>8191&&((i||(i=[])).push(String.fromCharCode.apply(String,o)),a=0);return i?(a&&i.push(String.fromCharCode.apply(String,o.slice(0,a))),i.join("")):String.fromCharCode.apply(String,o.slice(0,a))},r.write=function(e,t,n){for(var r,i,o=n,a=0;a<e.length;++a)(r=e.charCodeAt(a))<128?t[n++]=r:r<2048?(t[n++]=r>>6|192,t[n++]=63&r|128):55296==(64512&r)&&56320==(64512&(i=e.charCodeAt(a+1)))?(++a,t[n++]=(r=65536+((1023&r)<<10)+(1023&i))>>18|240,t[n++]=r>>12&63|128,t[n++]=r>>6&63|128,t[n++]=63&r|128):(t[n++]=r>>12|224,t[n++]=r>>6&63|128,t[n++]=63&r|128);return n-o}},function(e,t,n){"use strict";e.exports=function(e,t,n){var r=n||8192,i=r>>>1,o=null,a=r;return function(n){if(n<1||n>i)return e(n);a+n>r&&(o=e(r),a=0);var s=t.call(o,a,a+=n);return 7&a&&(a=1+(7|a)),s}}},function(e,t,n){"use strict";e.exports=i;var r=n(25);function i(e,t){this.lo=e>>>0,this.hi=t>>>0}var o=i.zero=new i(0,0);o.toNumber=function(){return 0},o.zzEncode=o.zzDecode=function(){return this},o.length=function(){return 1};var a=i.zeroHash="\0\0\0\0\0\0\0\0";i.fromNumber=function(e){if(0===e)return o;var t=e<0;t&&(e=-e);var n=e>>>0,r=(e-n)/4294967296>>>0;return t&&(r=~r>>>0,n=~n>>>0,++n>4294967295&&(n=0,++r>4294967295&&(r=0))),new i(n,r)},i.from=function(e){if("number"==typeof e)return i.fromNumber(e);if(r.isString(e)){if(!r.Long)return i.fromNumber(parseInt(e,10));e=r.Long.fromString(e)}return e.low||e.high?new i(e.low>>>0,e.high>>>0):o},i.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var t=1+~this.lo>>>0,n=~this.hi>>>0;return t||(n=n+1>>>0),-(t+4294967296*n)}return this.lo+4294967296*this.hi},i.prototype.toLong=function(e){return r.Long?new r.Long(0|this.lo,0|this.hi,Boolean(e)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(e)}};var s=String.prototype.charCodeAt;i.fromHash=function(e){return e===a?o:new i((s.call(e,0)|s.call(e,1)<<8|s.call(e,2)<<16|s.call(e,3)<<24)>>>0,(s.call(e,4)|s.call(e,5)<<8|s.call(e,6)<<16|s.call(e,7)<<24)>>>0)},i.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},i.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this},i.prototype.zzDecode=function(){var e=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this},i.prototype.length=function(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return 0===n?0===t?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:n<128?9:10}},function(e,t,n){"use strict";e.exports=o;var r=n(71);(o.prototype=Object.create(r.prototype)).constructor=o;var i=n(25);function o(){r.call(this)}function a(e,t,n){e.length<40?i.utf8.write(e,t,n):t.utf8Write?t.utf8Write(e,n):t.write(e,n)}o._configure=function(){o.alloc=i._Buffer_allocUnsafe,o.writeBytesBuffer=i.Buffer&&i.Buffer.prototype instanceof Uint8Array&&"set"===i.Buffer.prototype.set.name?function(e,t,n){t.set(e,n)}:function(e,t,n){if(e.copy)e.copy(t,n,0,e.length);else for(var r=0;r<e.length;)t[n++]=e[r++]}},o.prototype.bytes=function(e){i.isString(e)&&(e=i._Buffer_from(e,"base64"));var t=e.length>>>0;return this.uint32(t),t&&this._push(o.writeBytesBuffer,t,e),this},o.prototype.string=function(e){var t=i.Buffer.byteLength(e);return this.uint32(t),t&&this._push(a,t,e),this},o._configure()},function(e,t,n){"use strict";e.exports=o;var r=n(72);(o.prototype=Object.create(r.prototype)).constructor=o;var i=n(25);function o(e){r.call(this,e)}o._configure=function(){i.Buffer&&(o.prototype._slice=i.Buffer.prototype.slice)},o.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))},o._configure()},function(e,t,n){"use strict";e.exports=i;var r=n(25);function i(e,t,n){if("function"!=typeof e)throw TypeError("rpcImpl must be a function");r.EventEmitter.call(this),this.rpcImpl=e,this.requestDelimited=Boolean(t),this.responseDelimited=Boolean(n)}(i.prototype=Object.create(r.EventEmitter.prototype)).constructor=i,i.prototype.rpcCall=function e(t,n,i,o,a){if(!o)throw TypeError("request must be specified");var s=this;if(!a)return r.asPromise(e,s,t,n,i,o);if(s.rpcImpl)try{return s.rpcImpl(t,n[s.requestDelimited?"encodeDelimited":"encode"](o).finish(),(function(e,n){if(e)return s.emit("error",e,t),a(e);if(null!==n){if(!(n instanceof i))try{n=i[s.responseDelimited?"decodeDelimited":"decode"](n)}catch(e){return s.emit("error",e,t),a(e)}return s.emit("data",n,t),a(null,n)}s.end(!0)}))}catch(e){return s.emit("error",e,t),void setTimeout((function(){a(e)}),0)}else setTimeout((function(){a(Error("already ended"))}),0)},i.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},function(e,t,n){"use strict";function r(e,t){"string"==typeof e&&(t=e,e=void 0);var n=[];function i(e){if("string"!=typeof e){var t=o();if(r.verbose&&console.log("codegen: "+t),t="return "+t,e){for(var a=Object.keys(e),s=new Array(a.length+1),c=new Array(a.length),l=0;l<a.length;)s[l]=a[l],c[l]=e[a[l++]];return s[l]=t,Function.apply(null,s).apply(null,c)}return Function(t)()}for(var u=new Array(arguments.length-1),d=0;d<u.length;)u[d]=arguments[++d];if(d=0,e=e.replace(/%([%dfijs])/g,(function(e,t){var n=u[d++];switch(t){case"d":case"f":return String(Number(n));case"i":return String(Math.floor(n));case"j":return JSON.stringify(n);case"s":return String(n)}return"%"})),d!==u.length)throw Error("parameter count mismatch");return n.push(e),i}function o(r){return"function "+(r||t||"")+"("+(e&&e.join(",")||"")+"){\n  "+n.join("\n  ")+"\n}"}return i.toString=o,i}e.exports=r,r.verbose=!1},function(e,t,n){"use strict";e.exports=o;var r=n(96),i=n(97)("fs");function o(e,t,n){return"function"==typeof t?(n=t,t={}):t||(t={}),n?!t.xhr&&i&&i.readFile?i.readFile(e,(function(r,i){return r&&"undefined"!=typeof XMLHttpRequest?o.xhr(e,t,n):r?n(r):n(null,t.binary?i:i.toString("utf8"))})):o.xhr(e,t,n):r(o,this,e,t)}o.xhr=function(e,t,n){var r=new XMLHttpRequest;r.onreadystatechange=function(){if(4===r.readyState){if(0!==r.status&&200!==r.status)return n(Error("status "+r.status));if(t.binary){var e=r.response;if(!e){e=[];for(var i=0;i<r.responseText.length;++i)e.push(255&r.responseText.charCodeAt(i))}return n(null,"undefined"!=typeof Uint8Array?new Uint8Array(e):e)}return n(null,r.responseText)}},t.binary&&("overrideMimeType"in r&&r.overrideMimeType("text/plain; charset=x-user-defined"),r.responseType="arraybuffer"),r.open("GET",e),r.send()}},function(e,t,n){"use strict";var r=t,i=r.isAbsolute=function(e){return/^(?:\/|\w+:)/.test(e)},o=r.normalize=function(e){var t=(e=e.replace(/\\/g,"/").replace(/\/{2,}/g,"/")).split("/"),n=i(e),r="";n&&(r=t.shift()+"/");for(var o=0;o<t.length;)".."===t[o]?o>0&&".."!==t[o-1]?t.splice(--o,2):n?t.splice(o,1):++o:"."===t[o]?t.splice(o,1):++o;return r+t.join("/")};r.resolve=function(e,t,n){return n||(t=o(t)),i(t)?t:(n||(e=o(e)),(e=e.replace(/(?:\/|^)[^/]+$/,"")).length?o(e+"/"+t):t)}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return n}(r(n(31)).default);t.default=i,i.DESCRIPTOR_NAME="SessionsSocketDescriptor",i.DESCRIPTOR={fields:{session:{type:"string",id:1},user:{type:"string",id:2},role:{id:3,type:"string"}}}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return n}(r(n(31)).default);t.default=i,i.DESCRIPTOR_NAME="OperationMetadataDescriptor",i.DESCRIPTOR={fields:{userId:{type:"string",id:1},type:{type:"string",id:2,rule:"optional"}}}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return n}(r(n(31)).default);t.default=i,i.DESCRIPTOR_NAME="KeyValueDescriptor",i.DESCRIPTOR={fields:{key:{type:"string",id:1},value:{type:"string",id:2}}}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return n}(r(n(31)).default);t.default=i,i.DESCRIPTOR_NAME="UserDescriptor",i.DESCRIPTOR={fields:{attributes:{rule:"repeated",type:"KeyValueDescriptor",id:1}}}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this)).id=e,r}return _createClass(n,[{key:"toJSON",value:function(){return{id:this.id}}}],[{key:"fromJSON",value:function(e){return new n(e.id)}}]),n}(r(n(6)).default);t.default=i,i.TYPE="21",i.READABLE_TYPE_NAME="getUser",i.DESCRIPTOR_NAME="GetUserMessage",i.DESCRIPTOR={fields:{id:{type:"string",id:1}}}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this)).attributes=e,r}return _createClass(n,[{key:"toJSON",value:function(){var e=this;return{attributes:Object.keys(this.attributes).map((function(t){return{key:t,value:JSON.stringify(e.attributes[t])}}))}}}],[{key:"fromJSON",value:function(e){return new n(e.attributes.reduce((function(e,t){return e[t.key]=t.value?JSON.parse(t.value):null,e}),{}))}}]),n}(r(n(6)).default);t.default=i,i.DESCRIPTOR_NAME="GetUserResponse",i.DESCRIPTOR={fields:{attributes:{rule:"repeated",type:"KeyValueDescriptor",id:1}}}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this)).ids=e,r}return _createClass(n,[{key:"toJSON",value:function(){return{ids:this.ids}}}],[{key:"fromJSON",value:function(e){return new n(e.ids)}}]),n}(r(n(6)).default);t.default=i,i.TYPE="22",i.READABLE_TYPE_NAME="getManyUsers",i.DESCRIPTOR_NAME="GetManyUsersMessage",i.DESCRIPTOR={fields:{ids:{id:1,type:"string",rule:"repeated"}}}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this)).users=e,r}return _createClass(n,[{key:"toJSON",value:function(){return{users:this.users.map(o)}}}],[{key:"fromJSON",value:function(e){return new n(e.users.map(a))}}]),n}(r(n(6)).default);function o(e){return{attributes:Object.keys(e).map((function(t){return{key:t,value:JSON.stringify(e[t])}}))}}function a(e){return e.attributes.reduce((function(e,t){return e[t.key]=t.value?JSON.parse(t.value):null,e}),{})}t.default=i,i.DESCRIPTOR_NAME="GetManyUsersResponse",i.DESCRIPTOR={fields:{users:{rule:"repeated",type:"UserDescriptor",id:1}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default="20.0.0"},function(e,t,n){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=n(330),a=r(n(336)),s=i(n(18)),c=[a.MESSAGE_TYPES.EVENT,a.MESSAGE_TYPES.ACK,a.MESSAGE_TYPES.BINARY_ACK,a.MESSAGE_TYPES.BINARY_EVENT];t.Encoder=function(e){_inherits(n,e);var t=_createSuper(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new a.default;return _classCallCheck(this,n),(e=t.call(this))._packetParser=r,e}return _createClass(n,[{key:"encode",value:function(e,t){if(c.includes(e.type)){var r=e.data&&Array.isArray(e.data)&&e.data.pop();if(r&&!r._cs&&(e.data.push(r),r=null),!r||r&&!r.originalParser)try{return t([this._packetParser.encode(e.type,e.data,e.id,e.nsp)])}catch(e){console.error("Can not properly serialize or deserialize messages. Check the original error.",{originalError:{message:e.message}})}}return _get3(_getPrototypeOf(n.prototype),"encode",this).call(this,e,t)}}]),n}(o.Encoder),t.Decoder=function(e){_inherits(n,e);var t=_createSuper(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new a.default;return _classCallCheck(this,n),(e=t.call(this))._packetParser=r,e}return _createClass(n,[{key:"add",value:function(e){if(!s.default.isBuffer(e))return _get3(_getPrototypeOf(n.prototype),"add",this).call(this,e);var t;try{t=this._packetParser.decode(e).packet}catch(t){return _get3(_getPrototypeOf(n.prototype),"add",this).call(this,e)}this.emit("decoded",t)}}]),n}(o.Decoder)},function(e,t,n){var r=n(331)("socket.io-parser"),i=n(334),o=n(335),a=n(50),s=n(110);function c(){}t.protocol=4,t.types=["CONNECT","DISCONNECT","EVENT","ACK","ERROR","BINARY_EVENT","BINARY_ACK"],t.CONNECT=0,t.DISCONNECT=1,t.EVENT=2,t.ACK=3,t.ERROR=4,t.BINARY_EVENT=5,t.BINARY_ACK=6,t.Encoder=c,t.Decoder=d;var l=t.ERROR+'"encode error"';function u(e){var n=""+e.type;if(t.BINARY_EVENT!==e.type&&t.BINARY_ACK!==e.type||(n+=e.attachments+"-"),e.nsp&&"/"!==e.nsp&&(n+=e.nsp+","),null!=e.id&&(n+=e.id),null!=e.data){var i=function(e){try{return JSON.stringify(e)}catch(e){return!1}}(e.data);if(!1===i)return l;n+=i}return r("encoded %j as %s",e,n),n}function d(){this.reconstructor=null}function f(e){this.reconPack=e,this.buffers=[]}function h(e){return{type:t.ERROR,data:"parser error: "+e}}c.prototype.encode=function(e,n){r("encoding packet %j",e),t.BINARY_EVENT===e.type||t.BINARY_ACK===e.type?function(e,t){o.removeBlobs(e,(function(e){var n=o.deconstructPacket(e),r=u(n.packet),i=n.buffers;i.unshift(r),t(i)}))}(e,n):n([u(e)])},i(d.prototype),d.prototype.add=function(e){var n;if("string"==typeof e)n=function(e){var n=0,i={type:Number(e.charAt(0))};if(null==t.types[i.type])return h("unknown packet type "+i.type);if(t.BINARY_EVENT===i.type||t.BINARY_ACK===i.type){for(var o=n+1;"-"!==e.charAt(++n)&&n!=e.length;);var s=e.substring(o,n);if(s!=Number(s)||"-"!==e.charAt(n))throw new Error("Illegal attachments");i.attachments=Number(s)}if("/"===e.charAt(n+1)){for(o=n+1;++n&&","!==(l=e.charAt(n))&&n!==e.length;);i.nsp=e.substring(o,n)}else i.nsp="/";var c=e.charAt(n+1);if(""!==c&&Number(c)==c){for(o=n+1;++n;){var l;if(null==(l=e.charAt(n))||Number(l)!=l){--n;break}if(n===e.length)break}i.id=Number(e.substring(o,n+1))}if(e.charAt(++n)){var u=function(e){try{return JSON.parse(e)}catch(e){return!1}}(e.substr(n));if(!1===u||i.type!==t.ERROR&&!a(u))return h("invalid payload");i.data=u}return r("decoded %s as %j",e,i),i}(e),t.BINARY_EVENT===n.type||t.BINARY_ACK===n.type?(this.reconstructor=new f(n),0===this.reconstructor.reconPack.attachments&&this.emit("decoded",n)):this.emit("decoded",n);else{if(!s(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");(n=this.reconstructor.takeBinaryData(e))&&(this.reconstructor=null,this.emit("decoded",n))}},d.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},f.prototype.takeBinaryData=function(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){var t=o.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null},f.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]}},function(e,t,n){(function(r){t.log=function(){var e;return"object"==typeof console&&console.log&&(e=console).log.apply(e,arguments)},t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),this.useColors){var n="color: "+this.color;t.splice(1,0,n,"color: inherit");var r=0,i=0;t[0].replace(/%[a-zA-Z%]/g,(function(e){"%%"!==e&&"%c"===e&&(i=++r)})),t.splice(i,0,n)}},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){var e;try{e=t.storage.getItem("debug")}catch(e){}return!e&&void 0!==r&&"env"in r&&(e=r.env.DEBUG),e},t.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},t.storage=function(){try{return localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.exports=n(332)(t),e.exports.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}}).call(this,n(66))},function(e,t,n){e.exports=function(e){function t(e){for(var t=0,n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t|=0;return r.colors[Math.abs(t)%r.colors.length]}function r(e){var n;function a(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];if(a.enabled){var o=a,s=Number(new Date);o.diff=s-(n||s),o.prev=n,o.curr=s,n=s,t[0]=r.coerce(t[0]),"string"!=typeof t[0]&&t.unshift("%O");var c=0;t[0]=t[0].replace(/%([a-zA-Z%])/g,(function(e,n){if("%%"===e)return e;c++;var i=r.formatters[n];return"function"==typeof i&&(e=i.call(o,t[c]),t.splice(c,1),c--),e})),r.formatArgs.call(o,t),(o.log||r.log).apply(o,t)}}return a.namespace=e,a.enabled=r.enabled(e),a.useColors=r.useColors(),a.color=t(e),a.destroy=i,a.extend=o,"function"==typeof r.init&&r.init(a),r.instances.push(a),a}function i(){var e=r.instances.indexOf(this);return-1!==e&&(r.instances.splice(e,1),!0)}function o(e,t){var n=r(this.namespace+(void 0===t?":":t)+e);return n.log=this.log,n}function a(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return r.debug=r,r.default=r,r.coerce=function(e){return e instanceof Error?e.stack||e.message:e},r.disable=function(){var e=[].concat(_toConsumableArray(r.names.map(a)),_toConsumableArray(r.skips.map(a).map((function(e){return"-"+e})))).join(",");return r.enable(""),e},r.enable=function(e){var t;r.save(e),r.names=[],r.skips=[];var n=("string"==typeof e?e:"").split(/[\s,]+/),i=n.length;for(t=0;t<i;t++)n[t]&&("-"===(e=n[t].replace(/\*/g,".*?"))[0]?r.skips.push(new RegExp("^"+e.substr(1)+"$")):r.names.push(new RegExp("^"+e+"$")));for(t=0;t<r.instances.length;t++){var o=r.instances[t];o.enabled=r.enabled(o.namespace)}},r.enabled=function(e){if("*"===e[e.length-1])return!0;var t,n;for(t=0,n=r.skips.length;t<n;t++)if(r.skips[t].test(e))return!1;for(t=0,n=r.names.length;t<n;t++)if(r.names[t].test(e))return!0;return!1},r.humanize=n(333),Object.keys(e).forEach((function(t){r[t]=e[t]})),r.instances=[],r.names=[],r.skips=[],r.formatters={},r.selectColor=t,r.enable(r.load()),r}},function(e,t){var n=1e3,r=6e4,i=36e5,o=24*i;function a(e,t,n,r){var i=t>=1.5*n;return Math.round(e/n)+" "+r+(i?"s":"")}e.exports=function(e,t){t=t||{};var s=typeof e;if("string"===s&&e.length>0)return function(e){if(!((e=String(e)).length>100)){var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(t){var a=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*a;case"weeks":case"week":case"w":return 6048e5*a;case"days":case"day":case"d":return a*o;case"hours":case"hour":case"hrs":case"hr":case"h":return a*i;case"minutes":case"minute":case"mins":case"min":case"m":return a*r;case"seconds":case"second":case"secs":case"sec":case"s":return a*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return a;default:return}}}}(e);if("number"===s&&isFinite(e))return t.long?function(e){var t=Math.abs(e);return t>=o?a(e,t,o,"day"):t>=i?a(e,t,i,"hour"):t>=r?a(e,t,r,"minute"):t>=n?a(e,t,n,"second"):e+" ms"}(e):function(e){var t=Math.abs(e);return t>=o?Math.round(e/o)+"d":t>=i?Math.round(e/i)+"h":t>=r?Math.round(e/r)+"m":t>=n?Math.round(e/n)+"s":e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},function(e,t,n){function r(e){if(e)return function(e){for(var t in r.prototype)e[t]=r.prototype[t];return e}(e)}e.exports=r,r.prototype.on=r.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},r.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,r=this._callbacks["$"+e];if(!r)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var i=0;i<r.length;i++)if((n=r[i])===t||n.fn===t){r.splice(i,1);break}return this},r.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),n=this._callbacks["$"+e];if(n)for(var r=0,i=(n=n.slice(0)).length;r<i;++r)n[r].apply(this,t);return this},r.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},r.prototype.hasListeners=function(e){return!!this.listeners(e).length}},function(e,t,n){var r=n(50),i=n(110),o=Object.prototype.toString,a="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===o.call(Blob),s="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===o.call(File);t.deconstructPacket=function(e){var t=[],n=e;return n.data=function e(t,n){if(!t)return t;if(i(t)){var o={_placeholder:!0,num:n.length};return n.push(t),o}if(r(t)){for(var a=new Array(t.length),s=0;s<t.length;s++)a[s]=e(t[s],n);return a}if("object"==typeof t&&!(t instanceof Date)){for(var c in a={},t)a[c]=e(t[c],n);return a}return t}(e.data,t),n.attachments=t.length,{packet:n,buffers:t}},t.reconstructPacket=function(e,t){return e.data=function e(t,n){if(!t)return t;if(t&&t._placeholder)return n[t.num];if(r(t))for(var i=0;i<t.length;i++)t[i]=e(t[i],n);else if("object"==typeof t)for(var o in t)t[o]=e(t[o],n);return t}(e.data,t),e.attachments=void 0,e},t.removeBlobs=function(e,t){var n=0,o=e;!function e(c,l,u){if(!c)return c;if(a&&c instanceof Blob||s&&c instanceof File){n++;var d=new FileReader;d.onload=function(){u?u[l]=this.result:o=this.result,--n||t(o)},d.readAsArrayBuffer(c)}else if(r(c))for(var f=0;f<c.length;f++)e(c[f],f,c);else if("object"==typeof c&&!i(c))for(var h in c)e(c[h],h,c)}(o),n||t(o)}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(337)),o=r(n(32));!function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.ERROR=4]="ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"}(t.MESSAGE_TYPES||(t.MESSAGE_TYPES={})),t.default=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"encode",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"/",a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};if(t.length>2)throw new Error("PacketParser supports only 2 elements in data");return o.default.encode(i.default.create({type:e,data:t,id:n,nsp:r},a))}},{key:"decode",value:function(e){var t=o.default.decode(e,i.default);return{packet:{id:t.id,type:t.type,data:t.packetData,nsp:t.nsp},options:{flags:t.options.flags,rooms:t.options.rooms,except:t.options.except}}}}]),e}()},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(32)),o=r(n(6)),a=r(n(338)),s=r(n(18)),c=r(n(339)),l=r(n(340)),u=r(n(341)),d=r(n(342)),f=r(n(343)),h=r(n(344)),p=r(n(345)),v=r(n(346)),g=r(n(347)),m=r(n(348)),y=r(n(349)),k=[c.default,l.default,u.default,d.default,f.default,h.default,p.default,v.default,g.default,m.default,y.default].reduce((function(e,t){return e[t.TYPE]=t,e}),{}),_=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i){var o,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"/",s=arguments.length>4?arguments[4]:void 0;return _classCallCheck(this,n),(o=t.call(this)).type=e,o.data=r,o.id=i,o.nsp=a,o.options=s,o}return _createClass(n,[{key:"packetData",get:function(){return[this.data.data,this.data.data1]}},{key:"toJSON",value:function(){var e=i.default.encode(this.options),t=i.default.encode(this.data);return{type:this.type+10*this.data.constructor.TYPE,id:this.id,nsp:"/"===this.nsp?void 0:this.nsp,data:t,options:e}}}],[{key:"fromJSON",value:function(e){var t=Math.floor(e.type/10);return new n(e.type-10*t,i.default.decode(e.data,k[t]),e.id,e.nsp,e.options?i.default.decode(e.options,a.default):new a.default)}},{key:"create",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=s.default.getPacketType(s.default.getType(e.data[0]),s.default.getType(e.data[1]));return new n(e.type,k[r].create(e.data[0],e.data[1]),e.id,e.nsp,new a.default(t.flags,t.rooms,t.except))}}]),n}(o.default);t.default=_,_.TYPE=10,_.DESCRIPTOR_NAME="PacketMessage",_.DESCRIPTOR={fields:{type:{type:"uint32",id:1},id:{type:"uint32",id:2},nsp:{type:"string",id:3},data:{type:"bytes",id:4},options:{type:"bytes",id:5}}}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return _classCallCheck(this,n),(r=t.call(this)).flags=e,r.rooms=i,r.except=o,r}return _createClass(n,[{key:"toJSON",value:function(){var e,t;return{flags:this.flags?JSON.stringify(this.flags):void 0,rooms:(null===(e=this.rooms)||void 0===e?void 0:e.length)?this.rooms:void 0,except:(null===(t=this.except)||void 0===t?void 0:t.length)?this.except:void 0}}}],[{key:"fromJSON",value:function(e){return new n(e.flags&&JSON.parse(e.flags),e.rooms,e.except)}}]),n}(r(n(6)).default);t.default=i,i.TYPE=11,i.DESCRIPTOR_NAME="PacketOptionsMessage",i.DESCRIPTOR={fields:{flags:{type:"string",id:1},rooms:{type:"string",id:2,rule:"repeated"},except:{type:"string",id:3,rule:"repeated"}}}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var o=r(n(22)),a=i(n(18)),s=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var i;return _classCallCheck(this,n),(i=t.call(this)).data=e,i.data1=r,i}return _createClass(n,[{key:"toJSON",value:function(){return{data:this.data,data1:this.data1}}}],[{key:"fromJSON",value:function(e){return new n(e.data,e.data1)}},{key:"create",value:function(e,t){return new n(e,t)}}]),n}(o.default);t.default=s,s.TYPE=a.default.getPacketType(a.MessageDataTypes.NUMBER,a.MessageDataTypes.BUFFER),s.DESCRIPTOR_NAME="NumberBytesPacketDataMessage",s.DESCRIPTOR={fields:{data:{type:"uint32",id:1},data1:{type:"bytes",id:2}}}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var o=r(n(22)),a=i(n(18)),s=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var i;return _classCallCheck(this,n),(i=t.call(this)).data=e,i.data1=r,i}return _createClass(n,[{key:"toJSON",value:function(){return{data:this.data,data1:this.data1}}}],[{key:"fromJSON",value:function(e){return new n(e.data,e.data1)}},{key:"create",value:function(e,t){return new n(e,t)}}]),n}(o.default);t.default=s,s.TYPE=a.default.getPacketType(a.MessageDataTypes.STRING,a.MessageDataTypes.BUFFER),s.DESCRIPTOR_NAME="StringBytesPacketDataMessage",s.DESCRIPTOR={fields:{data:{type:"string",id:1},data1:{type:"bytes",id:2}}}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var o=r(n(22)),a=i(n(18)),s=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var i;return _classCallCheck(this,n),(i=t.call(this)).data=e,i.data1=r,i}return _createClass(n,[{key:"toJSON",value:function(){return{data:this.data,data1:this.data1}}}],[{key:"fromJSON",value:function(e){return new n(e.data,e.data1)}},{key:"create",value:function(e,t){return new n(e,t)}}]),n}(o.default);t.default=s,s.TYPE=a.default.getPacketType(a.MessageDataTypes.BUFFER,a.MessageDataTypes.BUFFER),s.DESCRIPTOR_NAME="BytesBytesPacketDataMessage",s.DESCRIPTOR={fields:{data:{type:"bytes",id:1},data1:{type:"bytes",id:2}}}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var o=r(n(22)),a=i(n(18)),s=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var i;return _classCallCheck(this,n),(i=t.call(this)).data=e,i.data1=r,i}return _createClass(n,[{key:"toJSON",value:function(){return{data:this.data,data1:this.data1?JSON.stringify(this.data1):void 0}}}],[{key:"fromJSON",value:function(e){return new n(e.data,e.data1&&JSON.parse(e.data1))}},{key:"create",value:function(e,t){return new n(e,t)}}]),n}(o.default);t.default=s,s.TYPE=a.default.getPacketType(a.MessageDataTypes.STRING,a.MessageDataTypes.OBJECT),s.DESCRIPTOR_NAME="StringObjectPacketDataMessage",s.DESCRIPTOR={fields:{data:{type:"string",id:1},data1:{type:"string",id:2}}}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var o=r(n(22)),a=i(n(18)),s=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var i;return _classCallCheck(this,n),(i=t.call(this)).data=e,i.data1=r,i}return _createClass(n,[{key:"toJSON",value:function(){return{data:this.data,data1:this.data1?JSON.stringify(this.data1):void 0}}}],[{key:"fromJSON",value:function(e){return new n(e.data,e.data1&&JSON.parse(e.data1))}},{key:"create",value:function(e,t){return new n(e,t)}}]),n}(o.default);t.default=s,s.TYPE=a.default.getPacketType(a.MessageDataTypes.NUMBER,a.MessageDataTypes.OBJECT),s.DESCRIPTOR_NAME="NumberObjectPacketDataMessage",s.DESCRIPTOR={fields:{data:{type:"uint32",id:1},data1:{type:"string",id:2}}}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var o=r(n(22)),a=i(n(18)),s=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var i;return _classCallCheck(this,n),(i=t.call(this)).data=e,i.data1=r,i}return _createClass(n,[{key:"toJSON",value:function(){return{data:this.data?JSON.stringify(this.data):void 0,data1:this.data1?JSON.stringify(this.data1):void 0}}}],[{key:"fromJSON",value:function(e){return new n(e.data&&JSON.parse(e.data),e.data1&&JSON.parse(e.data1))}},{key:"create",value:function(e,t){return new n(e,t)}}]),n}(o.default);t.default=s,s.TYPE=a.default.getPacketType(a.MessageDataTypes.OBJECT,a.MessageDataTypes.OBJECT),s.DESCRIPTOR_NAME="ObjectObjectPacketDataMessage",s.DESCRIPTOR={fields:{data:{type:"string",id:1},data1:{type:"string",id:2}}}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var o=r(n(22)),a=i(n(18)),s=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var i;return _classCallCheck(this,n),(i=t.call(this)).data=e,i.data1=r,i}return _createClass(n,[{key:"toJSON",value:function(){return{data:this.data?JSON.stringify(this.data):void 0,data1:this.data1}}}],[{key:"fromJSON",value:function(e){return new n(e.data&&JSON.parse(e.data),e.data1)}},{key:"create",value:function(e,t){return new n(e,t)}}]),n}(o.default);t.default=s,s.TYPE=a.default.getPacketType(a.MessageDataTypes.OBJECT,a.MessageDataTypes.BUFFER),s.DESCRIPTOR_NAME="ObjectBufferPacketDataMessage",s.DESCRIPTOR={fields:{data:{type:"string",id:1},data1:{type:"bytes",id:2}}}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var o=r(n(22)),a=i(n(18)),s=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var i;return _classCallCheck(this,n),(i=t.call(this)).data=e,i.data1=r,i}return _createClass(n,[{key:"toJSON",value:function(){return{data:this.data,data1:this.data1}}}],[{key:"fromJSON",value:function(e){return new n(e.data,e.data1)}},{key:"create",value:function(e,t){return new n(e,t)}}]),n}(o.default);t.default=s,s.TYPE=a.default.getPacketType(a.MessageDataTypes.STRING,a.MessageDataTypes.STRING),s.DESCRIPTOR_NAME="StringStringPacketDataMessage",s.DESCRIPTOR={fields:{data:{type:"string",id:1},data1:{type:"string",id:2}}}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var o=r(n(22)),a=i(n(18)),s=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var i;return _classCallCheck(this,n),(i=t.call(this)).data=e,i.data1=r,i}return _createClass(n,[{key:"toJSON",value:function(){return{data:this.data,data1:this.data1}}}],[{key:"fromJSON",value:function(e){return new n(e.data,e.data1)}},{key:"create",value:function(e,t){return new n(e,t)}}]),n}(o.default);t.default=s,s.TYPE=a.default.getPacketType(a.MessageDataTypes.STRING,a.MessageDataTypes.NUMBER),s.DESCRIPTOR_NAME="StringNumberPacketDataMessage",s.DESCRIPTOR={fields:{data:{type:"string",id:1},data1:{type:"uint32",id:2}}}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var o=r(n(22)),a=i(n(18)),s=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var i;return _classCallCheck(this,n),(i=t.call(this)).data=e,i.data1=r,i}return _createClass(n,[{key:"toJSON",value:function(){return{data:this.data,data1:this.data1}}}],[{key:"fromJSON",value:function(e){return new n(e.data,e.data1)}},{key:"create",value:function(e,t){return new n(e,t)}}]),n}(o.default);t.default=s,s.TYPE=a.default.getPacketType(a.MessageDataTypes.NUMBER,a.MessageDataTypes.NUMBER),s.DESCRIPTOR_NAME="NumberNumberPacketDataMessage",s.DESCRIPTOR={fields:{data:{type:"uint32",id:1},data1:{type:"uint32",id:2}}}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var o=r(n(22)),a=i(n(18)),s=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var i;return _classCallCheck(this,n),(i=t.call(this)).data=e,i.data1=r,i}return _createClass(n,[{key:"toJSON",value:function(){return{data:this.data,data1:this.data1}}}],[{key:"fromJSON",value:function(e){return new n(e.data,e.data1)}},{key:"create",value:function(e,t){return new n(e,t)}}]),n}(o.default);t.default=s,s.TYPE=a.default.getPacketType(a.MessageDataTypes.NUMBER,a.MessageDataTypes.STRING),s.DESCRIPTOR_NAME="NumberStringPacketDataMessage",s.DESCRIPTOR={fields:{data:{type:"uint32",id:1},data1:{type:"string",id:2}}}},function(e,t,n){var r=n(2),i=n(351);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]),r(i,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=i.locals||{}},function(e,t){e.exports=":root{--ck-user-colors--0:#6d78e8;--ck-user-colors--0-alpha:rgba(109,120,232,0.15);--ck-user-colors--1:#007a6c;--ck-user-colors--1-alpha:rgba(0,122,108,0.15);--ck-user-colors--2:#ba4545;--ck-user-colors--2-alpha:rgba(186,69,69,0.15);--ck-user-colors--3:#5635b1;--ck-user-colors--3-alpha:rgba(86,53,177,0.15);--ck-user-colors--4:#548a2e;--ck-user-colors--4-alpha:rgba(84,138,46,0.15);--ck-user-colors--5:#c3185d;--ck-user-colors--5-alpha:rgba(195,24,93,0.15);--ck-user-colors--6:#ea4343;--ck-user-colors--6-alpha:rgba(234,67,67,0.15);--ck-user-colors--7:#0bc3d0;--ck-user-colors--7-alpha:rgba(11,195,208,0.15);--ck-user-dot-size:6px}.ck .ck-user__color--0{color:var(--ck-user-colors--0)}.ck .ck-user__bg-color--0{background-color:var(--ck-user-colors--0)}.ck .ck-user__selection--0{background-color:var(--ck-user-colors--0-alpha)}.ck .ck-user__selection--0.ck-widget{background-color:transparent;border:3px solid var(--ck-user-colors--0)}.ck .ck-user__marker--0,.ck .ck-user__marker--0 .ck-user__marker-dot,.ck .ck-user__marker--0:after{background-color:var(--ck-user-colors--0)}.ck .ck-user__marker--0 .ck-user__marker-line{border:1px solid var(--ck-user-colors--0)}.ck .ck-user__color--1{color:var(--ck-user-colors--1)}.ck .ck-user__bg-color--1{background-color:var(--ck-user-colors--1)}.ck .ck-user__selection--1{background-color:var(--ck-user-colors--1-alpha)}.ck .ck-user__selection--1.ck-widget{background-color:transparent;border:3px solid var(--ck-user-colors--1)}.ck .ck-user__marker--1,.ck .ck-user__marker--1 .ck-user__marker-dot,.ck .ck-user__marker--1:after{background-color:var(--ck-user-colors--1)}.ck .ck-user__marker--1 .ck-user__marker-line{border:1px solid var(--ck-user-colors--1)}.ck .ck-user__color--2{color:var(--ck-user-colors--2)}.ck .ck-user__bg-color--2{background-color:var(--ck-user-colors--2)}.ck .ck-user__selection--2{background-color:var(--ck-user-colors--2-alpha)}.ck .ck-user__selection--2.ck-widget{background-color:transparent;border:3px solid var(--ck-user-colors--2)}.ck .ck-user__marker--2,.ck .ck-user__marker--2 .ck-user__marker-dot,.ck .ck-user__marker--2:after{background-color:var(--ck-user-colors--2)}.ck .ck-user__marker--2 .ck-user__marker-line{border:1px solid var(--ck-user-colors--2)}.ck .ck-user__color--3{color:var(--ck-user-colors--3)}.ck .ck-user__bg-color--3{background-color:var(--ck-user-colors--3)}.ck .ck-user__selection--3{background-color:var(--ck-user-colors--3-alpha)}.ck .ck-user__selection--3.ck-widget{background-color:transparent;border:3px solid var(--ck-user-colors--3)}.ck .ck-user__marker--3,.ck .ck-user__marker--3 .ck-user__marker-dot,.ck .ck-user__marker--3:after{background-color:var(--ck-user-colors--3)}.ck .ck-user__marker--3 .ck-user__marker-line{border:1px solid var(--ck-user-colors--3)}.ck .ck-user__color--4{color:var(--ck-user-colors--4)}.ck .ck-user__bg-color--4{background-color:var(--ck-user-colors--4)}.ck .ck-user__selection--4{background-color:var(--ck-user-colors--4-alpha)}.ck .ck-user__selection--4.ck-widget{background-color:transparent;border:3px solid var(--ck-user-colors--4)}.ck .ck-user__marker--4,.ck .ck-user__marker--4 .ck-user__marker-dot,.ck .ck-user__marker--4:after{background-color:var(--ck-user-colors--4)}.ck .ck-user__marker--4 .ck-user__marker-line{border:1px solid var(--ck-user-colors--4)}.ck .ck-user__color--5{color:var(--ck-user-colors--5)}.ck .ck-user__bg-color--5{background-color:var(--ck-user-colors--5)}.ck .ck-user__selection--5{background-color:var(--ck-user-colors--5-alpha)}.ck .ck-user__selection--5.ck-widget{background-color:transparent;border:3px solid var(--ck-user-colors--5)}.ck .ck-user__marker--5,.ck .ck-user__marker--5 .ck-user__marker-dot,.ck .ck-user__marker--5:after{background-color:var(--ck-user-colors--5)}.ck .ck-user__marker--5 .ck-user__marker-line{border:1px solid var(--ck-user-colors--5)}.ck .ck-user__color--6{color:var(--ck-user-colors--6)}.ck .ck-user__bg-color--6{background-color:var(--ck-user-colors--6)}.ck .ck-user__selection--6{background-color:var(--ck-user-colors--6-alpha)}.ck .ck-user__selection--6.ck-widget{background-color:transparent;border:3px solid var(--ck-user-colors--6)}.ck .ck-user__marker--6,.ck .ck-user__marker--6 .ck-user__marker-dot,.ck .ck-user__marker--6:after{background-color:var(--ck-user-colors--6)}.ck .ck-user__marker--6 .ck-user__marker-line{border:1px solid var(--ck-user-colors--6)}.ck .ck-user__color--7{color:var(--ck-user-colors--7)}.ck .ck-user__bg-color--7{background-color:var(--ck-user-colors--7)}.ck .ck-user__selection--7{background-color:var(--ck-user-colors--7-alpha)}.ck .ck-user__selection--7.ck-widget{background-color:transparent;border:3px solid var(--ck-user-colors--7)}.ck .ck-user__marker--7,.ck .ck-user__marker--7 .ck-user__marker-dot,.ck .ck-user__marker--7:after{background-color:var(--ck-user-colors--7)}.ck .ck-user__marker--7 .ck-user__marker-line{border:1px solid var(--ck-user-colors--7)}"},function(e,t,n){var r=n(2),i=n(353);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]),r(i,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=i.locals||{}},function(e,t){e.exports=".ck .ck-user__marker{display:inline;position:relative;cursor:default}.ck .ck-user__marker:after{content:attr(data-name);display:none;position:absolute;font-family:Georgia,sans-serif;font-size:var(--ck-font-size-base);line-height:1;font-style:normal;font-weight:400;left:0;opacity:0;top:-20px;padding:var(--ck-spacing-small);color:#fff;white-space:nowrap;transition:opacity .2s linear,transform .3s ease-in-out;z-index:99999}.ck .ck-user__marker:hover .ck-user__marker-dot{width:0}.ck .ck-user__marker:hover:after{display:block;opacity:1;animation:fadeInLeft .3s ease-in-out}.ck .ck-user__marker-line{position:absolute;bottom:0;height:100%;width:0}.ck .ck-user__marker-dot{display:block;position:absolute;left:50%;top:calc(var(--ck-user-dot-size)/2*-1);width:var(--ck-user-dot-size);height:var(--ck-user-dot-size);border-radius:50%;transform:translate(-50%,-50%);cursor:default}.ck .ck-placeholder .ck-user__marker{display:none}@keyframes fadeInLeft{0%{opacity:0;transform:translateX(-10px)}to{opacity:1;transform:translateX(0)}}"},function(e,t,n){var r=n(355),i=n(356),o=i;o.v1=r,o.v4=i,e.exports=o},function(e,t,n){var r,i,o=n(111),a=n(112),s=0,c=0;e.exports=function(e,t,n){var l=t&&n||0,u=t||[],d=(e=e||{}).node||r,f=void 0!==e.clockseq?e.clockseq:i;if(null==d||null==f){var h=o();null==d&&(d=r=[1|h[0],h[1],h[2],h[3],h[4],h[5]]),null==f&&(f=i=16383&(h[6]<<8|h[7]))}var p=void 0!==e.msecs?e.msecs:(new Date).getTime(),v=void 0!==e.nsecs?e.nsecs:c+1,g=p-s+(v-c)/1e4;if(g<0&&void 0===e.clockseq&&(f=f+1&16383),(g<0||p>s)&&void 0===e.nsecs&&(v=0),v>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");s=p,c=v,i=f;var m=(1e4*(268435455&(p+=122192928e5))+v)%4294967296;u[l++]=m>>>24&255,u[l++]=m>>>16&255,u[l++]=m>>>8&255,u[l++]=255&m;var y=p/4294967296*1e4&268435455;u[l++]=y>>>8&255,u[l++]=255&y,u[l++]=y>>>24&15|16,u[l++]=y>>>16&255,u[l++]=f>>>8|128,u[l++]=255&f;for(var k=0;k<6;++k)u[l+k]=d[k];return t||a(u)}},function(e,t,n){var r=n(111),i=n(112);e.exports=function(e,t,n){var o=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var a=(e=e||{}).random||(e.rng||r)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t)for(var s=0;s<16;++s)t[o+s]=a[s];return t||i(a)}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(13)),o=n(78),a=r(n(40)),s=r(n(39)),c=r(n(358)),l=r(n(359)),u=r(n(360)),d=r(n(361)),f=r(n(32));t.default=function(e){_inherits(h,e);var t,n,r,i=_createSuper(h);function h(e,t){var n;return _classCallCheck(this,h),(n=i.call(this,{idProperty:"id"}))._id=e,n._sessionType=t,n._handlers=new Map,n._eventsQueue=[],n._isRunning=!1,n}return _createClass(h,[{key:"connect",value:(r=_asyncToGenerator(regeneratorRuntime.mark((function e(t){var n,r,i,u,d,p,v,g=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._wsGateway=t,this.stopListening(t,"change:state"),n=new l.default(this._id,this._sessionType),e.prev=2,e.next=5,this._wsGateway._sendRequest(o._SERVICE,l.default.TYPE,f.default.encode(n));case 5:i=e.sent,r=f.default.decode(i,c.default),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),r=new c.default(this._id,[]);case 12:return this._connectToChannel(this._wsGateway,r.channel,this._sessionType),e.next=15,function(){var e=_asyncToGenerator(regeneratorRuntime.mark((function e(t,n){var r,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=n.map((function(e){return e.userId}))).length){e.next=7;break}return e.next=4,a.default.getMany(t,r);case 4:e.t0=e.sent,e.next=8;break;case 7:e.t0=[];case 8:return i=e.t0,e.abrupt("return",n.map((function(e){var t={id:e.id,role:e.role};return t.user=e.userId&&i.find((function(t){return t.id===e.userId}))||new a.default,t})));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this._wsGateway,r.sockets);case 15:u=e.sent,d=_createForOfIteratorHelper(u);try{for(d.s();!(p=d.n()).done;)v=p.value,_get3(_getPrototypeOf(h.prototype),"add",this).call(this,v)}catch(m){d.e(m)}finally{d.f()}return this._connected=!0,this.fire("connected"),this.listenTo(this._wsGateway,"change:state",(function(e,t,n){return g._onWsGatewayStateChange(n)}),{priority:s.default._CHANGE_STATE_EVENT_PRIORITY}),e.next=23,this._runQueue();case 23:case"end":return e.stop()}}),e,this,[[2,9]])}))),function(e){return r.apply(this,arguments)})},{key:"disconnect",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this._connected){for(this._connected=!1,this._eventsQueue=[];this.length;)_get3(_getPrototypeOf(h.prototype),"remove",this).call(this,0);this._channel&&(this.stopListening(this._channel),this._channel=void 0),this._wsGateway&&e&&(this.stopListening(this._wsGateway),this._wsGateway=void 0),this.fire("disconnected"),e&&this.stopListening()}}},{key:"add",value:function(e,t){throw new TypeError("The collection is read-only.")}},{key:"remove",value:function(e){throw new TypeError("The collection is read-only.")}},{key:"_connectToChannel",value:function(e,t,n){var r=this;this._channel=e._getChannel(n,t),this._channel&&(this._addHandler(this._channel,u.default.TYPE,function(){var t=_asyncToGenerator(regeneratorRuntime.mark((function t(n){var i,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=f.default.decode(n,u.default),-1!==r.getIndex(i.id)){t.next=9;break}if(o={id:i.id,role:i.role},t.t0=i.userId,!t.t0){t.next=8;break}return t.next=7,a.default.get(e,i.userId);case 7:o.user=t.sent;case 8:_get3(_getPrototypeOf(h.prototype),"add",r).call(r,o);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),this._addHandler(this._channel,d.default.TYPE,(function(e){var t=f.default.decode(e,d.default);-1!==r.getIndex(t.id)&&_get3(_getPrototypeOf(h.prototype),"remove",r).call(r,t.id)})))}},{key:"_onWsGatewayStateChange",value:(n=_asyncToGenerator(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===s.default.STATE_DISCONNECTED&&this.disconnect(!1),e.t0=t===s.default.STATE_CONNECTED,!e.t0){e.next=5;break}return e.next=5,this.connect(this._wsGateway);case 5:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"_runQueue",value:(t=_asyncToGenerator(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isRunning&&this._connected){e.next=2;break}return e.abrupt("return");case 2:this._isRunning=!0;case 3:if(!(t=this._eventsQueue.shift())){e.next=11;break}if(n=this._handlers.get(t.eventName),e.t0=n,!e.t0){e.next=9;break}return e.next=9,n(t.data);case 9:e.next=3;break;case 11:this._isRunning=!1;case 12:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"_addHandler",value:function(e,t,n){var r=this,i=e.getEventName(t,!0);this.listenTo(e,i,function(){var e=_asyncToGenerator(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r._eventsQueue.push({eventName:t.name,data:n}),e.next=3,r._runQueue();case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),this._handlers.set(i,n)}}]),h}(i.default)},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return _classCallCheck(this,n),(r=t.call(this)).channel=e,r.sockets=i,r}return _createClass(n,[{key:"toJSON",value:function(){return{channel:this.channel,sockets:this.sockets.map((function(e){return{user:e.userId,session:e.id,role:e.role}}))}}}],[{key:"fromJSON",value:function(e){return new n(e.channel,e.sockets.map((function(e){return{id:e.session,userId:e.user,role:e.role}})))}}]),n}(r(n(6)).default);t.default=i,i.DESCRIPTOR_NAME="SessionsConnectResponse",i.DESCRIPTOR={fields:{channel:{type:"string",id:1},sockets:{rule:"repeated",type:"SessionsSocketDescriptor",id:2}}}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var i;return _classCallCheck(this,n),(i=t.call(this)).id=e,i.sessionType=r,i}return _createClass(n,[{key:"toJSON",value:function(){return{id:this.id,sessionType:this.sessionType}}}],[{key:"fromJSON",value:function(e){return new n(e.id,e.sessionType)}}]),n}(r(n(6)).default);t.default=i,i.TYPE="31",i.READABLE_TYPE_NAME="getConnectedSockets",i.DESCRIPTOR_NAME="SessionsConnectMessage",i.DESCRIPTOR={fields:{id:{type:"string",id:1},sessionType:{type:"uint32",id:2}}}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i){var o;return _classCallCheck(this,n),(o=t.call(this)).id=e,o.userId=r,o.role=i,o}return _createClass(n,[{key:"toJSON",value:function(){var e,t;return{id:this.id,userId:null!==(e=this.userId)&&void 0!==e?e:void 0,role:null!==(t=this.role)&&void 0!==t?t:void 0}}}],[{key:"fromJSON",value:function(e){return new n(e.id,e.userId,e.role)}}]),n}(r(n(6)).default);t.default=i,i.TYPE="32",i.READABLE_TYPE_NAME="connectSocket",i.DESCRIPTOR_NAME="SocketConnectMessage",i.DESCRIPTOR={fields:{id:{type:"string",id:1},userId:{type:"string",id:2},role:{type:"string",id:3}}}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this)).id=e,r}return _createClass(n,[{key:"toJSON",value:function(){return{id:this.id}}}],[{key:"fromJSON",value:function(e){return new n(e.id)}}]),n}(r(n(6)).default);t.default=i,i.TYPE="33",i.READABLE_TYPE_NAME="disconnectSocket",i.DESCRIPTOR_NAME="SocketDisconnectMessage",i.DESCRIPTOR={fields:{id:{type:"string",id:1}}}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i,o){var a;return _classCallCheck(this,n),(a=t.call(this)).id=e,a.buffers=r,a.types=i,a.bundleVersion=o,a}return _createClass(n,[{key:"toJSON",value:function(){return{id:this.id,buffers:this.buffers,types:this.types,bundleVersion:this.bundleVersion}}}],[{key:"fromJSON",value:function(e){return new n(e.id,e.buffers,e.types,e.bundleVersion)}}]),n}(r(n(6)).default);t.default=i,i.TYPE="11",i.READABLE_TYPE_NAME="connectToDocument",i.DESCRIPTOR_NAME="CollaborativeEditingConnectMessage",i.DESCRIPTOR={fields:{id:{type:"string",id:1},bundleVersion:{type:"string",id:2},buffers:{rule:"repeated",type:"bytes",id:3},types:{rule:"repeated",type:"uint32",id:4}}}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(6)),o=r(n(79)),a=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i,o){var a,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return _classCallCheck(this,n),(a=t.call(this)).id=e,a.buffers=r,a.types=i,a.baseVersion=o,a.metadata=s,a}return _createClass(n,[{key:"data",get:function(){return{buffers:this.buffers,types:this.types,baseVersion:this.baseVersion}}},{key:"toJSON",value:function(){return{id:this.id,buffers:this.buffers,types:this.types,baseVersion:this.baseVersion,metadata:o.default.removeUnnecessaryMetadata(this.types,this.metadata)}}}],[{key:"fromJSON",value:function(e){return new n(e.id,e.buffers,e.types,e.baseVersion,o.default.prepareMetadataForOperations(e.types,e.metadata).map((function(e){return"function"!=typeof e.toJSON?e:e.toJSON()})))}}]),n}(i.default);t.default=a,a.TYPE="13",a.READABLE_TYPE_NAME="updateDocument",a.DESCRIPTOR_NAME="CollaborativeEditingUpdateMessage",a.DESCRIPTOR={fields:{id:{type:"string",id:1},baseVersion:{type:"uint32",id:2},buffers:{rule:"repeated",type:"bytes",id:3},types:{rule:"repeated",type:"uint32",id:4},metadata:{rule:"repeated",type:"OperationMetadataDescriptor",id:6}}}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i){var o;return _classCallCheck(this,n),(o=t.call(this)).id=e,o.lastKnowVersion=r,o.bundleVersion=i,o}return _createClass(n,[{key:"toJSON",value:function(){return{id:this.id,bundleVersion:this.bundleVersion,lastKnowVersion:this.lastKnowVersion}}}],[{key:"fromJSON",value:function(e){return new n(e.id,e.lastKnowVersion,e.bundleVersion)}}]),n}(r(n(6)).default);t.default=i,i.TYPE="12",i.READABLE_TYPE_NAME="reconnectToDocument",i.DESCRIPTOR_NAME="CollaborativeEditingReconnectMessage",i.DESCRIPTOR={fields:{id:{type:"string",id:1},bundleVersion:{type:"string",id:2},lastKnowVersion:{type:"uint32",id:3}}}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(6)),o=r(n(79)),a=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return _classCallCheck(this,n),(r=t.call(this)).version=e,r.buffers=i,r.types=o,r.metadata=a,r}return _createClass(n,[{key:"data",get:function(){return{buffers:this.buffers,types:this.types,baseVersion:this.version-this.types.length}}},{key:"wereChangesApplied",get:function(){var e;return!(null===(e=this.types)||void 0===e?void 0:e.length)}},{key:"toJSON",value:function(){return{version:this.version,buffers:this.buffers,types:this.types,metadata:o.default.removeUnnecessaryMetadata(this.types,this.metadata)}}}],[{key:"fromJSON",value:function(e){return new n(e.version,e.buffers,e.types,o.default.prepareMetadataForOperations(e.types,e.metadata).map((function(e){return"function"!=typeof e.toJSON?e:e.toJSON()})))}}]),n}(i.default);t.default=a,a.DESCRIPTOR_NAME="CollaborativeEditingResponse",a.DESCRIPTOR={fields:{version:{type:"uint32",id:1},buffers:{rule:"repeated",type:"bytes",id:2},types:{rule:"repeated",type:"uint32",id:3},metadata:{rule:"repeated",type:"OperationMetadataDescriptor",id:5}}}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(6)),o=r(n(79)),a=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[],l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;return _classCallCheck(this,n),(i=t.call(this)).channel=e,i.version=r,i.buffers=o,i.types=a,i.offset=s,i.metadata=c,i.initData=l,i}return _createClass(n,[{key:"data",get:function(){return{buffers:this.buffers,types:this.types,baseVersion:this.version-this.types.length}}},{key:"wereChangesApplied",get:function(){var e;return!(null===(e=this.types)||void 0===e?void 0:e.length)&&null===this.initData}},{key:"toJSON",value:function(){var e;return{channel:this.channel,version:this.version,buffers:this.buffers,types:this.types,offset:this.offset,metadata:o.default.removeUnnecessaryMetadata(this.types,this.metadata),initData:null!==(e=this.initData)&&void 0!==e?e:"",isInitialized:"string"==typeof this.initData}}}],[{key:"fromJSON",value:function(e){var t,r=null;return!0===e.isInitialized?r=null!==(t=e.initData)&&void 0!==t?t:"":"boolean"!=typeof e.isInitialized&&e.initData&&(r=e.initData),new n(e.channel,e.version,e.buffers,e.types,e.offset,o.default.prepareMetadataForOperations(e.types,e.metadata).map((function(e){return"function"!=typeof e.toJSON?e:e.toJSON()})),r)}}]),n}(i.default);t.default=a,a.DESCRIPTOR_NAME="CollaborativeEditingConnectResponse",a.DESCRIPTOR={fields:{channel:{type:"string",id:1},offset:{type:"uint32",id:2},version:{type:"uint32",id:3},buffers:{rule:"repeated",type:"bytes",id:4},types:{rule:"repeated",type:"uint32",id:5},metadata:{rule:"repeated",type:"OperationMetadataDescriptor",id:7},initData:{type:"string",id:8},isInitialized:{type:"bool",id:9}}}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i){var o,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",s=arguments.length>4?arguments[4]:void 0,c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;return _classCallCheck(this,n),(o=t.call(this)).documentId=e,o.commentThreadId=r,o.content=i,o.commentId=a,o.userId=c,o.attributes=l,o.createdAt=s?new Date(s):"",o}return _createClass(n,[{key:"toJSON",value:function(){return{commentThreadId:this.commentThreadId,content:this.content,documentId:this.documentId,commentId:this.commentId,createdAt:this.createdAt instanceof Date?this.createdAt.toISOString():this.createdAt,userId:this.userId,attributes:JSON.stringify(this.attributes)}}}],[{key:"fromJSON",value:function(e){return new n(e.documentId,e.commentThreadId,e.content,e.commentId?e.commentId:void 0,e.createdAt?new Date(e.createdAt):void 0,e.userId?e.userId:void 0,e.attributes?JSON.parse(e.attributes):{})}}]),n}(r(n(6)).default);t.default=i,i.TYPE="91",i.READABLE_TYPE_NAME="addComment",i.DESCRIPTOR_NAME="CommentsV2AddCommentMessage",i.DESCRIPTOR={fields:{commentThreadId:{type:"string",id:1},content:{type:"string",id:2},documentId:{type:"string",id:3},commentId:{type:"string",id:4},createdAt:{type:"string",id:5},userId:{type:"string",id:6},attributes:{type:"string",id:7}}}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i){var o;return _classCallCheck(this,n),(o=t.call(this)).commentThreadId=e,o.commentId=r,o.createdAt=new Date(i),o}return _createClass(n,[{key:"toJSON",value:function(){return{commentThreadId:this.commentThreadId,commentId:this.commentId,createdAt:this.createdAt.toISOString()}}}],[{key:"fromJSON",value:function(e){return new n(e.commentThreadId,e.commentId,e.createdAt)}}]),n}(r(n(6)).default);t.default=i,i.DESCRIPTOR_NAME="CommentsV2AddCommentResponse",i.DESCRIPTOR={fields:{commentThreadId:{type:"string",id:1},commentId:{type:"string",id:2},createdAt:{type:"string",id:3}}}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this)).documentId=e,r}return _createClass(n,[{key:"toJSON",value:function(){return{documentId:this.documentId}}}],[{key:"fromJSON",value:function(e){return new n(e.documentId)}}]),n}(r(n(6)).default);t.default=i,i.TYPE="92",i.READABLE_TYPE_NAME="connectToComment",i.DESCRIPTOR_NAME="CommentsV2ConnectMessage",i.DESCRIPTOR={fields:{documentId:{type:"string",id:1}}}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(6)),o=r(n(76)),a=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i){var o;return _classCallCheck(this,n),(o=t.call(this)).channel=e,o._threads=r,o._threadsV2=i,o.threads=(null==i?void 0:i.length)?i:r,o}return _createClass(n,[{key:"toJSON",value:function(){var e,t;return{channel:this.channel,threads:null===(e=this._threads)||void 0===e?void 0:e.map((function(e){return JSON.stringify(e)})),threadsV2:null===(t=this._threadsV2)||void 0===t?void 0:t.map(o.default.toJSON)}}}],[{key:"fromJSON",value:function(e){var t,r;return new n(e.channel,null===(t=e.threads)||void 0===t?void 0:t.map((function(e){return JSON.parse(e)})),null===(r=e.threadsV2)||void 0===r?void 0:r.map(o.default.fromJSON))}}]),n}(i.default);t.default=a,a.DESCRIPTOR_NAME="CommentsV2ConnectResponse",a.DESCRIPTOR={fields:{channel:{type:"string",id:1},threads:{type:"string",rule:"repeated",id:2},threadsV2:{type:"CommentsThreadDescriptor",rule:"repeated",id:3}}}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i){var o;return _classCallCheck(this,n),(o=t.call(this)).documentId=e,o.commentThreadId=r,o.commentId=i,o}return _createClass(n,[{key:"toJSON",value:function(){return{documentId:this.documentId,commentThreadId:this.commentThreadId,commentId:this.commentId}}}],[{key:"fromJSON",value:function(e){return new n(e.documentId,e.commentThreadId,e.commentId)}}]),n}(r(n(6)).default);t.default=i,i.TYPE="95",i.READABLE_TYPE_NAME="removeComment",i.DESCRIPTOR_NAME="CommentsV2RemoveCommentMessage",i.DESCRIPTOR={fields:{commentThreadId:{type:"string",id:1},commentId:{type:"string",id:2},documentId:{type:"string",id:3}}}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var i;return _classCallCheck(this,n),(i=t.call(this)).documentId=e,i.commentThreadId=r,i}return _createClass(n,[{key:"toJSON",value:function(){return{documentId:this.documentId,commentThreadId:this.commentThreadId}}}],[{key:"fromJSON",value:function(e){return new n(e.documentId,e.commentThreadId)}}]),n}(r(n(6)).default);t.default=i,i.TYPE="97",i.READABLE_TYPE_NAME="removeCommentThread",i.DESCRIPTOR_NAME="CommentsV2RemoveCommentThreadMessage",i.DESCRIPTOR={fields:{commentThreadId:{type:"string",id:1},documentId:{type:"string",id:2}}}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i,o){var a,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,c=arguments.length>5&&void 0!==arguments[5]&&arguments[5];return _classCallCheck(this,n),(a=t.call(this)).documentId=e,a.commentThreadId=r,a.commentId=i,a.content=o,a.attributes=s,a.isAttributesUpdated=c,a}return _createClass(n,[{key:"toJSON",value:function(){return{documentId:this.documentId,commentThreadId:this.commentThreadId,commentId:this.commentId,content:this.content,attributes:this.attributes?JSON.stringify(this.attributes):null,isAttributesUpdated:this.isAttributesUpdated}}}],[{key:"fromJSON",value:function(e){return new n(e.documentId,e.commentThreadId,e.commentId,e.content,e.attributes?JSON.parse(e.attributes):null,e.isAttributesUpdated)}}]),n}(r(n(6)).default);t.default=i,i.TYPE="96",i.READABLE_TYPE_NAME="updateComment",i.DESCRIPTOR_NAME="CommentsV2UpdateCommentMessage",i.DESCRIPTOR={fields:{commentThreadId:{type:"string",id:1},commentId:{type:"string",id:2},content:{type:"string",id:3},documentId:{type:"string",id:4},attributes:{type:"string",id:5},isAttributesUpdated:{type:"bool",id:6}}}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var i;return _classCallCheck(this,n),(i=t.call(this)).commentThreadId=e,i.documentId=r,i}return _createClass(n,[{key:"toJSON",value:function(){return{commentThreadId:this.commentThreadId,documentId:this.documentId}}}],[{key:"fromJSON",value:function(e){return new n(e.commentThreadId,e.documentId)}}]),n}(r(n(6)).default);t.default=i,i.TYPE="93",i.READABLE_TYPE_NAME="getComment",i.DESCRIPTOR_NAME="CommentsV2GetCommentThreadMessage",i.DESCRIPTOR={fields:{commentThreadId:{type:"string",id:1},documentId:{type:"string",id:2}}}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(6)),o=r(n(75)),a=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i){var o;return _classCallCheck(this,n),(o=t.call(this)).commentThreadId=e,o._comments=r,o._commentsV2=i,o.comments=(null==i?void 0:i.length)?i:r,o}return _createClass(n,[{key:"toJSON",value:function(){var e,t;return{commentThreadId:this.commentThreadId,comments:null===(e=this._comments)||void 0===e?void 0:e.map((function(e){return JSON.stringify(e)})),commentsV2:null===(t=this._commentsV2)||void 0===t?void 0:t.map(o.default.toJSON)}}}],[{key:"fromJSON",value:function(e){var t,r;return new n(e.commentThreadId,null===(t=e.comments)||void 0===t?void 0:t.map((function(e){return function(e){var t=JSON.parse(e);return Object.assign(Object.assign({},t),{createdAt:new Date(t.createdAt)})}(e)})),null===(r=e.commentsV2)||void 0===r?void 0:r.map(o.default.fromJSON))}}]),n}(i.default);t.default=a,a.DESCRIPTOR_NAME="CommentsV2GetCommentThreadResponse",a.DESCRIPTOR={fields:{commentThreadId:{type:"string",id:1},comments:{type:"string",rule:"repeated",id:2},commentsV2:{type:"CommentDescriptor",rule:"repeated",id:3}}}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this)).documentId=e,r}return _createClass(n,[{key:"toJSON",value:function(){return{documentId:this.documentId}}}],[{key:"fromJSON",value:function(e){return new n(e.documentId)}}]),n}(r(n(6)).default);t.default=i,i.TYPE="94",i.READABLE_TYPE_NAME="getDocumentThreads",i.DESCRIPTOR_NAME="CommentsV2GetDocumentThreadsMessage",i.DESCRIPTOR={fields:{documentId:{type:"string",id:1}}}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(6)),o=r(n(76)),a=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var i;return _classCallCheck(this,n),(i=t.call(this))._threads=e,i._threadsV2=r,i.threads=(null==r?void 0:r.length)?r:e,i}return _createClass(n,[{key:"toJSON",value:function(){var e,t;return{threads:null===(e=this._threads)||void 0===e?void 0:e.map((function(e){return JSON.stringify(e)})),threadsV2:null===(t=this._threadsV2)||void 0===t?void 0:t.map(o.default.toJSON)}}}],[{key:"fromJSON",value:function(e){var t,r;return new n(null===(t=e.threads)||void 0===t?void 0:t.map((function(e){return function(e){var t,n=JSON.parse(e),r=Object.assign({},n);return n.comments&&(r.comments=null===(t=n.comments)||void 0===t?void 0:t.map((function(e){return Object.assign(Object.assign({},e),{createdAt:new Date(e.createdAt)})}))),r}(e)})),null===(r=e.threadsV2)||void 0===r?void 0:r.map(o.default.fromJSON))}}]),n}(i.default);t.default=a,a.DESCRIPTOR_NAME="CommentsV2GetDocumentThreadsResponse",a.DESCRIPTOR={fields:{threads:{type:"string",rule:"repeated",id:1},threadsV2:{type:"CommentsThreadDescriptor",rule:"repeated",id:2}}}},function(e,t,n){var r=n(2),i=n(379);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]),r(i,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=i.locals||{}},function(e,t){e.exports=":root{--ck-user-avatar-size:40px;--ck-user-avatar-background:#3670ab;--ck-user-avatar-color:#fff}.ck.ck-user{display:flex;justify-content:center;align-items:center;position:relative;border-radius:50%;overflow:hidden;background-color:var(--ck-user-avatar-background);height:var(--ck-user-avatar-size);width:var(--ck-user-avatar-size);min-width:var(--ck-user-avatar-size);min-height:var(--ck-user-avatar-size)}.ck.ck-user__name{color:var(--ck-user-avatar-color);cursor:default;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none}.ck.ck-user__name.ck-user__name--hidden{display:none}.ck.ck-user__img{display:none;width:inherit;height:inherit;background-position:50%;background-repeat:no-repeat;background-size:cover;background-color:var(--ck-user-avatar-background);border-radius:50%;border:2px solid var(--ck-user-avatar-background)}.ck.ck-user__img.ck-user__anonymous{display:block;background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20'%3E%3Cpath fill='%23FFF' d='M9.8 20H2c0-5.7 5-5.7 6-7l.2-.8c-1.6-.8-2.7-2.7-2.7-5 0-2.8 2-5.2 4.3-5.2S14 4.4 14 7.3c0 2.2-1 4-2.6 5l.2.6c1.2 1.3 6 1.4 6 7H9.8z'/%3E%3C/svg%3E\")}.ck.ck-user__img.ck-user__anonymous+.ck-user__name{display:none}.ck.ck-user__img.ck-user__avatar{display:block;background-color:#fff}.ck.ck-user__img.ck-user__img--hidden{display:none}"},function(e,t,n){var r=n(2),i=n(381);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]),r(i,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=i.locals||{}},function(e,t){e.exports=':root{--ck-color-comment-background:#f3f7fb;--ck-color-comment-separator:#cddeef;--ck-color-comment-remove-background:#fcc;--ck-color-comment-input-background:var(--ck-color-comment-background)}.ck .ck-comment__wrapper{font-size:var(--ck-font-size-base);position:relative;outline:0;transition:all .3s linear}.ck .ck-comment__wrapper.ck-comment--remove-confirmation{transform:translate3d(-100%,0,0)}.ck .ck-comment__wrapper:first-of-type{border-top-right-radius:var(--ck-border-radius);border-top-left-radius:var(--ck-border-radius)}.ck .ck-comment:after{content:"";display:block;position:absolute;opacity:1;top:calc(var(--ck-user-avatar-size) + var(--ck-spacing-small));left:calc(var(--ck-spacing-standard) + var(--ck-user-avatar-size)/2 - 2px);width:4px;height:100%;background-color:var(--ck-color-comment-separator)}.ck .ck-comment--remove{background-color:var(--ck-color-comment-remove-background)}.ck .ck-comment--remove:after{opacity:0}.ck .ck-comment--edit{background-color:var(--ck-color-comment-input-background)}.ck .ck-comment--edit:after{opacity:0}.ck .ck-comment__main .ck-comment__input-wrapper{display:flex;flex-direction:column;position:relative;transition:all .3s linear}.ck .ck-comment__main .ck-comment__input-wrapper .ck-comment__input{padding:0}.ck .ck-comment__content{word-break:break-word}.ck .ck-comment__user{z-index:var(--ck-z-default)}.ck-comment__input-actions .ck.ck-button.ck-comment__input-actions--submit{color:var(--ck-color-button-save)}.ck-comment__input-actions .ck.ck-button.ck-comment__input-actions--cancel{color:var(--ck-color-button-cancel)}.ck .ck-comment__input p,.ck .ck-comment p{margin:0}.ck .ck-comment__input ol,.ck .ck-comment__input ul,.ck .ck-comment ol,.ck .ck-comment ul{padding-left:10px;margin-left:10px}.ck .ck-comment__input ul,.ck .ck-comment ul{list-style:disc;margin-bottom:5px;margin-top:0}.ck .ck-comment__input ul ul,.ck .ck-comment ul ul{list-style:circle}.ck .ck-comment__input ul ul ul,.ck .ck-comment ul ul ul{list-style:square}'},function(e,t,n){var r=n(2),i=n(383);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]),r(i,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=i.locals||{}},function(e,t){e.exports=':root{--ck-color-thread-remove-background:var(--ck-color-comment-remove-background);--ck-color-comment-count:#5891ca}.ck .ck-thread{width:100%;color:var(--ck-color-base-text);outline:0;background-color:var(--ck-color-base-background);overflow:hidden;transition:all .3s ease;border-radius:var(--ck-border-radius)}.ck .ck-thread__comments .ck-comment__wrapper:last-of-type .ck-comment:after{opacity:0}.ck .ck-thread__container{transition:transform .3s ease}.ck .ck-thread__comments{position:relative;z-index:var(--ck-z-default);list-style:none;margin:0;padding:0;border-radius:var(--ck-border-radius);overflow:hidden}.ck .ck-thread__comment-count{--ck-user-avatar-size:28px;padding-left:calc(var(--ck-user-avatar-size) + var(--ck-spacing-standard)*2);color:var(--ck-color-comment-count);font-size:var(--ck-font-size-base);font-weight:700;cursor:pointer;transition:background-color .3s ease}.ck .ck-thread__comment-count:before{content:"\\25BC";margin-right:var(--ck-spacing-small)}.ck .ck-thread--active .ck-comment__options.ck-dropdown{display:block}.ck .ck-thread--active .ck-thread__input{display:block;background-color:var(--ck-color-comment-background)}.ck .ck-thread--remove .ck-comment{background-color:var(--ck-color-comment-remove-background)}.ck .ck-thread--remove .ck-thread__input--active{background-color:var(--ck-color-base-background)}.ck .ck-thread--remove .ck-thread__comment-count,.ck .ck-thread--remove .ck-thread__input--active.ck-thread__input{background-color:var(--ck-color-comment-remove-background)}.ck .ck-thread--remove .ck-comment__wrapper .ck-comment:after{opacity:0}.ck .ck-thread--remove-confirmation .ck-thread__container{transform:translate3d(-100%,0,0)}.ck.ck-button.ck-thread__remove-confirm-submit{color:var(--ck-color-button-save)}.ck.ck-button.ck-thread__remove-confirm-cancel{color:var(--ck-color-button-cancel)}.ck .ck-thread__remove-confirm{font-size:var(--ck-font-size-base);position:absolute;display:flex;justify-content:flex-start;top:0;left:100%;width:100%;height:100%;background-color:var(--ck-color-comment-remove-background)}.ck .ck-thread__remove-confirm .ck-thread__remove-confirm-inner{display:flex;flex-direction:column;align-items:center;justify-content:center;padding-top:var(--ck-spacing-standard);height:100%;width:100%;max-height:400px}.ck .ck-thread__remove-confirm p{font-weight:700;margin:0}.ck .ck-thread__input{width:calc(100% - var(--ck-user-avatar-size));transition:background-color .2s ease-in-out;border-radius:var(--ck-border-radius)}'},function(e,t,n){var r=n(2),i=n(385);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]),r(i,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=i.locals||{}},function(e,t){e.exports=".ck .ck-comment__input-container{--ck-user-avatar-size:28px;font-size:var(--ck-font-size-base);display:none;padding:var(--ck-spacing-standard);background:var(--ck-color-comment-background)}.ck .ck-comment__input-container--active{display:flex}.ck .ck-comment__input{padding:var(--ck-spacing-standard);padding-top:var(--ck-spacing-medium);color:var(--ck-color-base-text);border-width:0;resize:none;background-color:transparent;transition:color .3s ease-in-out}.ck .ck-comment__input:focus{outline:none}.ck .ck-comment__input .ck-editor__editable_inline{--ck-focus-ring:none;--ck-inner-shadow:none;padding:0;overflow:visible;border:0;background-color:transparent;word-break:break-word}.ck-comment__input-wrapper .ck.ck-editor__editable_inline :first-child{margin-top:0}.ck-comment__input-wrapper .ck.ck-editor__editable_inline :last-child{margin-bottom:0}.ck .ck-comment__input-actions{width:100%;text-align:right;display:none}.ck .ck-comment__input-actions.ck-comment__input-actions--active{display:block}.ck .ck-comment__input-actions .ck-button{background-color:transparent;min-width:unset;min-height:unset;cursor:pointer;color:var(--ck-color-annotations-icon);border-radius:var(--ck-border-radius);font-size:var(--ck-annotation-button-size)}.ck .ck-comment__input-actions .ck-button.ck-disabled{opacity:.3}.ck .ck-comment__input-textarea{display:block}"},function(e,t,n){var r=n(2),i=n(387);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]),r(i,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=i.locals||{}},function(e,t){e.exports=":root{--ck-color-annotation-icon:grey;--ck-color-annotation-info:#757575;--ck-annotation-button-size:0.85em}.ck .ck-annotation{--ck-user-avatar-size:28px;font-size:var(--ck-font-size-base);display:flex;position:relative;animation:fadeInLeft .3s;transition:background-color .3s ease;padding:var(--ck-spacing-standard)}.ck .ck-annotation .ck-button{background-color:transparent;min-width:unset;min-height:unset;cursor:pointer;color:var(--ck-color-annotation-icon);border-radius:var(--ck-border-radius);font-size:var(--ck-annotation-button-size)}.ck .ck-annotation__main{display:flex;flex-wrap:wrap;justify-content:space-between;width:calc(100% - var(--ck-user-avatar-size));transition:all .2s ease;border-radius:var(--ck-border-radius);padding-left:var(--ck-spacing-standard)}.ck .ck-annotation__main p{margin:0;white-space:normal;font-size:var(--ck-font-size-base);line-height:1.5em}.ck .ck-annotation__user{margin-top:var(--ck-spacing-small)}.ck .ck-annotation__info{display:flex;align-items:center;color:var(--ck-color-annotation-info);min-height:2.4em}.ck .ck-annotation__info-name,.ck .ck-annotation__info-time{font-weight:700;max-width:150px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;color:var(--ck-color-annotation-info);font-size:var(--ck-font-size-small)}.ck .ck-annotation__info-time{margin-left:var(--ck-spacing-large)}.ck .ck-annotation__actions{transition:opacity .2s ease;opacity:.5}.ck .ck-annotation__content-wrapper{width:100%}@keyframes fadeInLeft{0%{transform:translate3d(-5%,0,0);opacity:0}to{transform:translateZ(0);opacity:1}}"},function(e,t,n){var r=n(2),i=n(389);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]),r(i,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=i.locals||{}},function(e,t){e.exports=":root{--ck-color-comment-marker:#fef7a9;--ck-color-comment-marker-active:#fdf05d}.ck-comment-marker{background:var(--ck-color-comment-marker);border-top:3px solid transparent;border-bottom:3px solid transparent}.ck-comment-marker.ck-widget{background-color:transparent;border:3px solid var(--ck-color-comment-marker)}.ck-comment-marker--active{background:var(--ck-color-comment-marker-active)}.ck-comment-marker--active.ck-widget{border-color:var(--ck-color-comment-marker-active)}.ck-comment-marker--active.ck-widget .ck-comment-marker{background-color:var(--ck-color-comment-marker)}.ck-comment-marker--active .ck-comment-marker{background:var(--ck-color-comment-marker-active)}"},function(e,t,n){var r=n(2),i=n(391);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]),r(i,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=i.locals||{}},function(e,t){e.exports=":root{--ck-color-annotation-wrapper-background:#fff;--ck-color-annotation-wrapper-drop-shadow:0 1px 1px 1px #e6e6e6}.ck.ck-sidebar{position:relative;transition:min-height .25s ease;outline:0}.ck-sidebar-item{position:absolute;width:100%;transition:top .3s ease,box-shadow .3s ease}.ck-sidebar-item--no-animation{transition:top 0s ease!important}.ck.ck-annotation-wrapper{outline:0;border-radius:var(--ck-border-radius);background:var(--ck-color-annotation-wrapper-background);box-shadow:var(--ck-color-annotation-wrapper-drop-shadow)}.ck.ck-annotation-wrapper:not(.ck-annotation-wrapper--active):hover{box-shadow:var(--ck-drop-shadow)}.ck.ck-annotation-wrapper--active{box-shadow:var(--ck-drop-shadow-active)}.ck.ck-annotation-wrapper--active .ck-annotation__actions,.ck.ck-annotation-wrapper:hover .ck-annotation__actions{opacity:1}.ck.ck-annotation-wrapper--active .ck-suggestion--accept,.ck.ck-annotation-wrapper:hover .ck-suggestion--accept{color:var(--ck-color-button-save)}.ck.ck-annotation-wrapper--active .ck-suggestion--discard,.ck.ck-annotation-wrapper:hover .ck-suggestion--discard{color:var(--ck-color-button-cancel)}"},function(e,t,n){var r=n(2),i=n(393);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]),r(i,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=i.locals||{}},function(e,t){e.exports=":root{--ck-annotation-counter-icon-size:18px;--ck-annotation-counter-number-size:10px;--ck-color-annotation-counter-comment:#f2de02;--ck-color-annotation-counter-suggestion-insertion:#5ad86b;--ck-color-annotation-counter-suggestion-deletion:#d85a79;--ck-color-annotation-counter-suggestion-format:#5ac1d8}.ck.ck-sidebar--narrow .ck-sidebar-item{display:flex;justify-content:center}.ck.ck-sidebar--narrow .ck-annotation-counter{font-size:var(--ck-annotation-counter-icon-size);min-height:unset;padding:0;cursor:pointer;color:grey}.ck.ck-sidebar--narrow .ck-annotation-counter:focus,.ck.ck-sidebar--narrow .ck-annotation-counter:hover{background:transparent;box-shadow:none;color:#4d4d4d}.ck.ck-sidebar--narrow .ck-annotation-counter__badge{border-radius:50%;position:absolute;width:16px;height:16px;background:#333;font-weight:700;color:#fff;font-size:var(--ck-annotation-counter-number-size);font-family:var(--ck-font-face);right:0;top:0;text-shadow:-1px 0 2px #444,1px 0 2px #444;display:flex;justify-content:center;line-height:16px;z-index:1}.ck.ck-sidebar--narrow .ck-annotation-counter__badge--edit-mode{line-height:1}.ck.ck-sidebar--narrow .ck-annotation-counter__badge--suggestion-insertion,.ck.ck-sidebar--narrow .ck-annotation-counter__badge--suggestion-replace{background:var(--ck-color-annotation-counter-suggestion-insertion)}.ck.ck-sidebar--narrow .ck-annotation-counter__badge--suggestion-deletion{background:var(--ck-color-annotation-counter-suggestion-deletion)}.ck.ck-sidebar--narrow .ck-annotation-counter__badge--suggestion-format{background:var(--ck-color-annotation-counter-suggestion-format)}.ck.ck-sidebar--narrow .ck-annotation-counter__badge--comment{background:var(--ck-color-annotation-counter-comment)}"},function(e,t,n){var r=n(2),i=n(395);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]),r(i,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=i.locals||{}},function(e,t){e.exports=":root{--ck-inline-annotation-container-width:300px;--ck-inline-annotation-container-max-height:400px}.ck.ck-balloon-panel .ck-annotation-wrapper{position:static;width:var(--ck-inline-annotation-container-width);max-height:var(--ck-inline-annotation-container-max-height);overflow-y:auto;overscroll-behavior-y:contain;overflow-x:hidden}.ck.ck-balloon-panel .ck-annotation{animation:none}.ck.ck-balloon-panel .ck-annotation-wrapper *{white-space:normal}.ck.ck-balloon-panel .ck-annotation-wrapper strong{font-weight:700}.ck.ck-balloon-panel .ck-annotation-wrapper i{font-style:italic}.ck.ck-balloon-panel button.ck-suggestion--accept .ck-tooltip__text,.ck.ck-balloon-panel button.ck-suggestion--discard .ck-tooltip__text{text-align:center}.ck.ck-balloon-panel button.ck-suggestion--discard .ck-tooltip{left:unset;right:0}.ck.ck-balloon-panel button.ck-suggestion--discard .ck-tooltip__text{left:unset}.ck.ck-balloon-panel button.ck-suggestion--discard .ck-tooltip__text:after{left:calc(100% - 10px)}"},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i){var o,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;return _classCallCheck(this,n),(o=t.call(this)).id=e,o.documentId=r,o.type=i,o.data=a,o.originalSuggestionId=s,o.attributes=c,o}return _createClass(n,[{key:"toJSON",value:function(){return{id:this.id,documentId:this.documentId,type:this.type,data:JSON.stringify(this.data),originalSuggestionId:this.originalSuggestionId,attributes:JSON.stringify(this.attributes)}}}],[{key:"fromJSON",value:function(e){var t;return new n(e.id,e.documentId,e.type,JSON.parse(e.data),null!==(t=e.originalSuggestionId)&&void 0!==t?t:null,e.attributes?JSON.parse(e.attributes):null)}}]),n}(r(n(6)).default);t.default=i,i.TYPE="101",i.READABLE_TYPE_NAME="addSuggestion",i.DESCRIPTOR_NAME="TrackChangesAddSuggestionMessage",i.DESCRIPTOR={fields:{id:{type:"string",id:1},documentId:{type:"string",id:2},type:{type:"string",id:3},data:{type:"string",id:4},originalSuggestionId:{type:"string",id:5},attributes:{type:"string",id:6}}}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i,o,a,s){var c,l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{},u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;return _classCallCheck(this,n),(c=t.call(this)).id=e,c.authorId=r,c.type=i,c.hasComments=a,c.state=s,c.data=l,c.attributes=u,c.createdAt=o?new Date(o):void 0,c}return _createClass(n,[{key:"toJSON",value:function(){var e;return{id:this.id,authorId:this.authorId,type:this.type,createdAt:null===(e=this.createdAt)||void 0===e?void 0:e.toISOString(),data:JSON.stringify(this.data),hasComments:this.hasComments,state:this.state,attributes:JSON.stringify(this.attributes)}}}],[{key:"fromJSON",value:function(e){return new n(e.id,e.authorId,e.type,e.createdAt,e.hasComments,e.state,JSON.parse(e.data),e.attributes?JSON.parse(e.attributes):null)}}]),n}(r(n(6)).default);t.default=i,i.DESCRIPTOR_NAME="TrackChangesAddSuggestionResponse",i.DESCRIPTOR={fields:{id:{type:"string",id:1},authorId:{type:"string",id:2},type:{type:"string",id:3},createdAt:{type:"string",id:4},data:{type:"string",id:5},hasComments:{type:"bool",id:6},state:{type:"string",id:7},attributes:{type:"string",id:8}}}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var i;return _classCallCheck(this,n),(i=t.call(this)).id=e,i.documentId=r,i}return _createClass(n,[{key:"toJSON",value:function(){return{id:this.id,documentId:this.documentId}}}],[{key:"fromJSON",value:function(e){return new n(e.id,e.documentId)}}]),n}(r(n(6)).default);t.default=i,i.TYPE="103",i.READABLE_TYPE_NAME="getSuggestion",i.DESCRIPTOR_NAME="TrackChangesGetSuggestionMessage",i.DESCRIPTOR={fields:{id:{type:"string",id:1},documentId:{type:"string",id:2}}}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i,o,a,s){var c,l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{},u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;return _classCallCheck(this,n),(c=t.call(this)).id=e,c.authorId=r,c.type=i,c.hasComments=a,c.state=s,c.data=l,c.attributes=u,c.createdAt=new Date(o),c}return _createClass(n,[{key:"toJSON",value:function(){return{id:this.id,authorId:this.authorId,type:this.type,createdAt:this.createdAt.toISOString(),data:JSON.stringify(this.data),hasComments:this.hasComments,state:this.state,attributes:JSON.stringify(this.attributes)}}}],[{key:"fromJSON",value:function(e){return new n(e.id,e.authorId,e.type,e.createdAt,e.hasComments,e.state,JSON.parse(e.data),e.attributes?JSON.parse(e.attributes):null)}}]),n}(r(n(6)).default);t.default=i,i.DESCRIPTOR_NAME="TrackChangesGetSuggestionResponse",i.DESCRIPTOR={fields:{id:{type:"string",id:1},authorId:{type:"string",id:2},type:{type:"string",id:3},createdAt:{type:"string",id:4},data:{type:"string",id:5},hasComments:{type:"bool",id:6},state:{type:"string",id:7},attributes:{type:"string",id:8}}}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this)).documentId=e,r}return _createClass(n,[{key:"toJSON",value:function(){return{documentId:this.documentId}}}],[{key:"fromJSON",value:function(e){return new n(e.documentId)}}]),n}(r(n(6)).default);t.default=i,i.TYPE="102",i.READABLE_TYPE_NAME="getAllSuggestions",i.DESCRIPTOR_NAME="TrackChangesGetAllSuggestionMessage",i.DESCRIPTOR={fields:{documentId:{type:"string",id:1}}}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(6)),o=r(n(77)),a=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var i;return _classCallCheck(this,n),(i=t.call(this))._suggestions=e,i._suggestionsV2=r,i.suggestions=(null==r?void 0:r.length)?r:e,i}return _createClass(n,[{key:"toJSON",value:function(){var e,t;return{suggestions:null===(e=this._suggestions)||void 0===e?void 0:e.map((function(e){return JSON.stringify(e)})),suggestionsV2:null===(t=this._suggestionsV2)||void 0===t?void 0:t.map(o.default.toJSON)}}}],[{key:"fromJSON",value:function(e){var t,r;return new n(null===(t=e.suggestions)||void 0===t?void 0:t.map(s),null===(r=e.suggestionsV2)||void 0===r?void 0:r.map(o.default.fromJSON))}}]),n}(i.default);function s(e){var t=JSON.parse(e);return t.createdAt=t.createdAt?new Date(t.createdAt):void 0,t}t.default=a,a.DESCRIPTOR_NAME="TrackChangesGetAllSuggestionsResponse",a.DESCRIPTOR={fields:{suggestions:{type:"string",rule:"repeated",id:1},suggestionsV2:{type:"SuggestionDescriptor",rule:"repeated",id:2}}}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i,o,a){var s,c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;return _classCallCheck(this,n),(s=t.call(this)).id=e,s.documentId=r,s.hasComments=i,s.isHasCommentsModified=o,s.state=a,s.attributes=c,s}return _createClass(n,[{key:"toJSON",value:function(){return{id:this.id,documentId:this.documentId,hasComments:this.hasComments,isHasCommentsModified:this.isHasCommentsModified,state:this.state,attributes:JSON.stringify(this.attributes)}}}],[{key:"fromJSON",value:function(e){return new n(e.id,e.documentId,e.hasComments,e.isHasCommentsModified,e.state,e.attributes?JSON.parse(e.attributes):null)}}]),n}(r(n(6)).default);t.default=i,i.TYPE="104",i.READABLE_TYPE_NAME="updateSuggestion",i.DESCRIPTOR_NAME="TrackChangesUpdateSuggestionMessage",i.DESCRIPTOR={fields:{id:{type:"string",id:1},documentId:{type:"string",id:2},hasComments:{type:"bool",id:3},isHasCommentsModified:{type:"bool",id:4},state:{type:"string",id:5},attributes:{type:"string",id:6}}}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this)).documentId=e,r}return _createClass(n,[{key:"toJSON",value:function(){return{documentId:this.documentId}}}],[{key:"fromJSON",value:function(e){return new n(e.documentId)}}]),n}(r(n(6)).default);t.default=i,i.TYPE="105",i.READABLE_TYPE_NAME="connectToSuggestions",i.DESCRIPTOR_NAME="TrackChangesConnectMessage",i.DESCRIPTOR={fields:{documentId:{type:"string",id:1}}}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(6)),o=r(n(77)),a=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i){var o;return _classCallCheck(this,n),(o=t.call(this)).channel=e,o._suggestions=r,o._suggestionsV2=i,o.suggestions=(null==i?void 0:i.length)?i:r,o}return _createClass(n,[{key:"toJSON",value:function(){var e,t;return{channel:this.channel,suggestions:null===(e=this._suggestions)||void 0===e?void 0:e.map((function(e){return JSON.stringify(e)})),suggestionsV2:null===(t=this._suggestionsV2)||void 0===t?void 0:t.map(o.default.toJSON)}}}],[{key:"fromJSON",value:function(e){var t,r;return new n(e.channel,null===(t=e.suggestions)||void 0===t?void 0:t.map((function(e){return JSON.parse(e)})),null===(r=e.suggestionsV2)||void 0===r?void 0:r.map(o.default.fromJSON))}}]),n}(i.default);t.default=a,a.DESCRIPTOR_NAME="TrackChangesConnectResponse",a.DESCRIPTOR={fields:{channel:{type:"string",id:1},suggestions:{type:"string",rule:"repeated",id:2},suggestionsV2:{type:"SuggestionDescriptor",rule:"repeated",id:3}}}},function(e,t){e.exports=":root{--ck-color-comment-box-border:#f2de02;--ck-color-suggestion-box-deletion-border:#d85a79;--ck-color-suggestion-box-insertion-border:#5ad86b;--ck-color-suggestion-box-format-border:#5ac1d8}.ck .ck-suggestion{border-top-left-radius:var(--ck-border-radius)}.ck .ck-annotation{border-left:3px solid transparent}.ck .ck-suggestion--disabled-comments .ck-annotation{min-height:80px}.ck .ck-comment,.ck .ck-comment__input-container,.ck .ck-thread__comment-count{border-left:3px solid var(--ck-color-comment-box-border)}.ck .ck-suggestion-insertion .ck-suggestion{border-left-color:var(--ck-color-suggestion-box-insertion-border)}.ck .ck-suggestion-deletion .ck-suggestion{border-left-color:var(--ck-color-suggestion-box-deletion-border)}.ck .ck-suggestion-replace .ck-suggestion{border-left-color:var(--ck-color-suggestion-box-insertion-border)}.ck .ck-suggestion-format .ck-suggestion{border-left-color:var(--ck-color-suggestion-box-format-border)}.ck .ck-suggestion-wrapper{outline:0}.ck .ck-suggestion-type{font-weight:700}.ck .ck-suggestion-insertion .ck-comment,.ck .ck-suggestion-insertion .ck-comment__input-container,.ck .ck-suggestion-insertion .ck-thread__comment-count,.ck .ck-suggestion-replace .ck-comment,.ck .ck-suggestion-replace .ck-comment__input-container,.ck .ck-suggestion-replace .ck-thread__comment-count{border-left-color:var(--ck-color-suggestion-box-insertion-border)}.ck .ck-suggestion-deletion .ck-comment,.ck .ck-suggestion-deletion .ck-comment__input-container,.ck .ck-suggestion-deletion .ck-thread__comment-count{border-left-color:var(--ck-color-suggestion-box-deletion-border)}.ck .ck-suggestion-format .ck-comment,.ck .ck-suggestion-format .ck-comment__input-container,.ck .ck-suggestion-format .ck-thread__comment-count{border-left-color:var(--ck-color-suggestion-box-format-border)}"},function(e,t){e.exports=':root{--ck-color-suggestion-marker-insertion-border:rgba(30,174,49,0.35);--ck-color-suggestion-marker-insertion-border-active:rgba(19,109,31,0.5);--ck-color-suggestion-marker-insertion-background:rgba(102,229,119,0.35);--ck-color-suggestion-marker-insertion-background-active:rgba(37,218,61,0.5);--ck-color-suggestion-marker-deletion-border:rgba(174,30,66,0.35);--ck-color-suggestion-marker-deletion-border-active:rgba(109,19,41,0.5);--ck-color-suggestion-marker-deletion-background:rgba(229,102,134,0.35);--ck-color-suggestion-marker-deletion-background-active:rgba(218,37,82,0.5);--ck-color-suggestion-marker-deletion-stroke:rgba(87,15,33,0.5);--ck-color-suggestion-marker-format-border:rgba(10,160,194,0.4);--ck-color-suggestion-marker-format-border-active:rgba(10,160,194,0.65);--ck-color-suggestion-widget-insertion-background:rgba(102,229,119,0.05);--ck-color-suggestion-widget-insertion-background-active:rgba(37,218,61,0.07);--ck-color-suggestion-widget-deletion-background:rgba(229,102,134,0.05);--ck-color-suggestion-widget-deletion-background-active:rgba(196,33,74,0.07);--ck-color-suggestion-widget-format-background:rgba(10,160,194,0.09);--ck-color-suggestion-widget-format-background-active:rgba(10,160,194,0.16)}.ck-content .ck-suggestion-marker-insertion{border-top:3px solid var(--ck-color-suggestion-marker-insertion-border);border-bottom:3px solid var(--ck-color-suggestion-marker-insertion-border);background:var(--ck-color-suggestion-marker-insertion-background)}.ck-content .ck-suggestion-marker-insertion.ck-suggestion-marker--active{border-color:var(--ck-color-suggestion-marker-insertion-border-active);background:var(--ck-color-suggestion-marker-insertion-background-active)}.ck-content .ck-suggestion-marker-insertion.ck-widget{background:none;text-decoration:none;border:3px solid var(--ck-color-suggestion-marker-insertion-border)}.ck-content .ck-suggestion-marker-insertion.ck-widget.ck-suggestion-marker--active{border-color:var(--ck-color-suggestion-marker-insertion-border-active)}.ck-content .ck-suggestion-marker-deletion{border-top:3px solid var(--ck-color-suggestion-marker-deletion-border);border-bottom:3px solid var(--ck-color-suggestion-marker-deletion-border);text-decoration:line-through;text-decoration-color:var(--ck-color-suggestion-marker-deletion-stroke);background:var(--ck-color-suggestion-marker-deletion-background)}.ck-content .ck-suggestion-marker-deletion.ck-suggestion-marker--active{border-color:var(--ck-color-suggestion-marker-deletion-border-active);background:var(--ck-color-suggestion-marker-deletion-background-active)}.ck-content .ck-suggestion-marker-deletion.ck-widget{background:none;text-decoration:none;border:3px solid var(--ck-color-suggestion-marker-deletion-border)}.ck-content .ck-suggestion-marker-deletion.ck-widget.ck-suggestion-marker--active{border-color:var(--ck-color-suggestion-marker-deletion-border-active)}.ck-content .ck-suggestion-marker-merge:after{border-top:3px solid var(--ck-color-suggestion-marker-deletion-border);border-bottom:3px solid var(--ck-color-suggestion-marker-deletion-border);text-decoration:line-through;text-decoration-color:var(--ck-color-suggestion-marker-deletion-stroke);background:var(--ck-color-suggestion-marker-deletion-background);color:var(--ck-color-suggestion-marker-deletion-stroke);content:"\xb6"}.ck-content .ck-suggestion-marker-merge.ck-suggestion-marker--active:after{border-color:var(--ck-color-suggestion-marker-deletion-border-active);background:var(--ck-color-suggestion-marker-deletion-background-active)}.ck-content .ck-suggestion-marker-split:after{border-top:3px solid var(--ck-color-suggestion-marker-insertion-border);border-bottom:3px solid var(--ck-color-suggestion-marker-insertion-border);background:var(--ck-color-suggestion-marker-insertion-background);color:var(--ck-color-suggestion-marker-insertion-border);content:"\xb6"}.ck-content .ck-suggestion-marker-split.ck-suggestion-marker--active:after{border-color:var(--ck-color-suggestion-marker-insertion-border-active);background:var(--ck-color-suggestion-marker-insertion-background-active)}.ck-content .ck-suggestion-marker-formatInline{border-top:3px solid var(--ck-color-suggestion-marker-format-border);border-bottom:3px solid var(--ck-color-suggestion-marker-format-border)}.ck-content .ck-suggestion-marker-formatInline.ck-suggestion-marker--active{border-color:var(--ck-color-suggestion-marker-format-border-active)}.ck-content .ck-suggestion-marker-formatInline.ck-widget{background:none;border:3px solid var(--ck-color-suggestion-marker-format-border)}.ck-content .ck-suggestion-marker-formatInline.ck-widget.ck-suggestion-marker--active{border-color:var(--ck-color-suggestion-marker-format-border-active)}.ck-content .ck-suggestion-marker-formatBlock{border:0;background:none;box-shadow:-7px 0 0 0 var(--ck-color-base-background),-10px 0 0 0 var(--ck-color-suggestion-marker-format-border)}.ck-content .ck-suggestion-marker-formatBlock.ck-suggestion-marker--active{box-shadow:-5px 0 0 0 var(--ck-color-base-background),-8px 0 0 0 var(--ck-color-suggestion-marker-format-border-active)}.ck-content ol .ck-suggestion-marker-formatBlock,.ck-content ul .ck-suggestion-marker-formatBlock{box-shadow:-2px 0 0 0 var(--ck-color-base-background),-5px 0 0 0 var(--ck-color-suggestion-marker-format-border)}.ck-content ol .ck-suggestion-marker-formatBlock.ck-suggestion-marker--active,.ck-content ul .ck-suggestion-marker-formatBlock.ck-suggestion-marker--active{box-shadow:-2px 0 0 0 var(--ck-color-base-background),-5px 0 0 0 var(--ck-color-suggestion-marker-format-border-active)}'},function(e,t,n){var r=n(2),i=n(408);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]),r(i,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=i.locals||{}},function(e,t){e.exports=".ck-content .ck-suggestion-marker-deletion.ck-widget.ck-horizontal-line{background-color:var(--ck-color-suggestion-widget-deletion-background)}.ck-content .ck-suggestion-marker-deletion.ck-widget.ck-horizontal-line.ck-suggestion-marker--active{background-color:var(--ck-color-suggestion-widget-deletion-background-active)}.ck-content .ck-suggestion-marker-insertion.ck-widget.ck-horizontal-line{background-color:var(--ck-color-suggestion-widget-insertion-background)}.ck-content .ck-suggestion-marker-insertion.ck-widget.ck-horizontal-line.ck-suggestion-marker--active{background-color:var(--ck-color-suggestion-widget-insertion-background-active)}"},function(e,t,n){var r=n(2),i=n(410);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]),r(i,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=i.locals||{}},function(e,t){e.exports=".ck-content .ck-suggestion-marker-deletion.ck-widget.image{background-color:var(--ck-color-suggestion-widget-deletion-background)}.ck-content .ck-suggestion-marker-deletion.ck-widget.image img{opacity:.6}.ck-content .ck-suggestion-marker-deletion.ck-widget.image figcaption{background-color:var(--ck-color-suggestion-widget-deletion-background)}.ck-content .ck-suggestion-marker-deletion.ck-widget.image.ck-suggestion-marker--active,.ck-content .ck-suggestion-marker-deletion.ck-widget.image.ck-suggestion-marker--active figcaption{background-color:var(--ck-color-suggestion-widget-deletion-background-active)}.ck-content .ck-suggestion-marker-insertion.ck-widget.image,.ck-content .ck-suggestion-marker-insertion.ck-widget.image figcaption{background-color:var(--ck-color-suggestion-widget-insertion-background)}.ck-content .ck-suggestion-marker-insertion.ck-widget.image.ck-suggestion-marker--active,.ck-content .ck-suggestion-marker-insertion.ck-widget.image.ck-suggestion-marker--active figcaption{background-color:var(--ck-color-suggestion-widget-insertion-background-active)}"},function(e,t,n){var r=n(2),i=n(412);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]),r(i,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=i.locals||{}},function(e,t){e.exports=".ck-content .ck-suggestion-marker-deletion.ck-widget.media{background-color:var(--ck-color-suggestion-widget-deletion-background)}.ck-content .ck-suggestion-marker-deletion.ck-widget.media .ck-media__wrapper{opacity:.6}.ck-content .ck-suggestion-marker-deletion.ck-widget.media.ck-suggestion-marker--active{background-color:var(--ck-color-suggestion-widget-deletion-background-active)}.ck-content .ck-suggestion-marker-insertion.ck-widget.media{background-color:var(--ck-color-suggestion-widget-insertion-background)}.ck-content .ck-suggestion-marker-insertion.ck-widget.media.ck-suggestion-marker--active{background-color:var(--ck-color-suggestion-widget-insertion-background-active)}"},function(e,t,n){var r=n(2),i=n(414);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]),r(i,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=i.locals||{}},function(e,t){e.exports=".ck-content .ck-suggestion-marker-deletion.ck-widget.page-break{background-color:var(--ck-color-suggestion-widget-deletion-background)}.ck-content .ck-suggestion-marker-deletion.ck-widget.page-break.ck-suggestion-marker--active{background-color:var(--ck-color-suggestion-widget-deletion-background-active)}.ck-content .ck-suggestion-marker-insertion.ck-widget.page-break{background-color:var(--ck-color-suggestion-widget-insertion-background)}.ck-content .ck-suggestion-marker-insertion.ck-widget.page-break.ck-suggestion-marker--active{background-color:var(--ck-color-suggestion-widget-insertion-background-active)}"},function(e,t,n){var r=n(2),i=n(416);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]),r(i,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=i.locals||{}},function(e,t){e.exports=":root{--ck-color-suggestion-widget-th-insertion-background:rgba(102,229,119,0.12);--ck-color-suggestion-widget-th-insertion-background-active:rgba(37,218,61,0.14);--ck-color-suggestion-widget-th-deletion-background:rgba(229,102,134,0.14);--ck-color-suggestion-widget-th-deletion-background-active:rgba(196,33,74,0.16)}.ck-content figure.table .ck-suggestion-marker-formatBlock{box-shadow:-3px 0 0 0 var(--ck-color-suggestion-marker-format-border)}.ck-content figure.table .ck-suggestion-marker-formatBlock.ck-suggestion-marker--active{box-shadow:-3px 0 0 0 var(--ck-color-suggestion-marker-format-border-active)}.ck-content .ck-suggestion-marker-deletion.table table{border-color:var(--ck-color-suggestion-marker-deletion-border)}.ck-content .ck-suggestion-marker-deletion.table th{background-color:var(--ck-color-suggestion-widget-th-deletion-background);border-color:var(--ck-color-suggestion-marker-deletion-border);text-decoration:none}.ck-content .ck-suggestion-marker-deletion.table td{background-color:var(--ck-color-suggestion-widget-deletion-background);border-color:var(--ck-color-suggestion-marker-deletion-border);text-decoration:none}.ck-content .ck-suggestion-marker-deletion.table.ck-suggestion-marker--active table{border-color:var(--ck-color-suggestion-marker-deletion-border-active)}.ck-content .ck-suggestion-marker-deletion.table.ck-suggestion-marker--active th{background-color:var(--ck-color-suggestion-widget-th-deletion-background-active);border-color:var(--ck-color-suggestion-marker-deletion-border-active)}.ck-content .ck-suggestion-marker-deletion.table.ck-suggestion-marker--active td{background-color:var(--ck-color-suggestion-widget-deletion-background-active);border-color:var(--ck-color-suggestion-marker-deletion-border-active)}.ck-content .ck-suggestion-marker-insertion.table table,.ck-content .ck-suggestion-marker-insertion.table th{border-color:var(--ck-color-suggestion-marker-insertion-border)}.ck-content .ck-suggestion-marker-insertion.table th{background-color:var(--ck-color-suggestion-widget-th-insertion-background)}.ck-content .ck-suggestion-marker-insertion.table td{background-color:var(--ck-color-suggestion-widget-insertion-background);border-color:var(--ck-color-suggestion-marker-insertion-border)}.ck-content .ck-suggestion-marker-insertion.table.ck-suggestion-marker--active table{border-color:var(--ck-color-suggestion-marker-insertion-border-active)}.ck-content .ck-suggestion-marker-insertion.table.ck-suggestion-marker--active th{background-color:var(--ck-color-suggestion-widget-th-insertion-background-active);border-color:var(--ck-color-suggestion-marker-insertion-border-active)}.ck-content .ck-suggestion-marker-insertion.table.ck-suggestion-marker--active td{background-color:var(--ck-color-suggestion-widget-insertion-background-active);border-color:var(--ck-color-suggestion-marker-insertion-border-active)}.ck-content .table th.ck-suggestion-marker-insertion{background-color:var(--ck-color-suggestion-widget-th-insertion-background)}.ck-content .table th.ck-suggestion-marker-insertion.ck-suggestion-marker--active{background-color:var(--ck-color-suggestion-widget-th-insertion-background-active)}.ck-content .table th.ck-suggestion-marker-deletion{background-color:var(--ck-color-suggestion-widget-th-deletion-background);text-decoration:none}.ck-content .table th.ck-suggestion-marker-deletion.ck-suggestion-marker--active{background-color:var(--ck-color-suggestion-widget-th-deletion-background-active)}.ck-content .table td.ck-suggestion-marker-insertion{background-color:var(--ck-color-suggestion-widget-insertion-background)}.ck-content .table td.ck-suggestion-marker-insertion.ck-suggestion-marker--active{background-color:var(--ck-color-suggestion-widget-insertion-background-active)}.ck-content .table td.ck-suggestion-marker-deletion{background-color:var(--ck-color-suggestion-widget-deletion-background);text-decoration:none}.ck-content .table td.ck-suggestion-marker-deletion.ck-suggestion-marker--active{background-color:var(--ck-color-suggestion-widget-deletion-background-active)}.ck-content .table td.ck-suggestion-marker-formatBlock,.ck-content .table td.ck-suggestion-marker-formatInline,.ck-content .table th.ck-suggestion-marker-formatBlock,.ck-content .table th.ck-suggestion-marker-formatInline{background-color:var(--ck-color-suggestion-widget-format-background);box-shadow:none}.ck-content .table td.ck-suggestion-marker-formatBlock.ck-suggestion-marker--active,.ck-content .table td.ck-suggestion-marker-formatInline.ck-suggestion-marker--active,.ck-content .table th.ck-suggestion-marker-formatBlock.ck-suggestion-marker--active,.ck-content .table th.ck-suggestion-marker-formatInline.ck-suggestion-marker--active{background-color:var(--ck-color-suggestion-widget-format-background-active);box-shadow:none}"},function(e,t,n){var r=n(2),i=n(418);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]),r(i,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=i.locals||{}},function(e,t){e.exports='.ck.ck-tooltip,.ck.ck-tooltip .ck-tooltip__text:after{position:absolute;pointer-events:none;-webkit-backface-visibility:hidden}.ck.ck-tooltip{visibility:hidden;opacity:0;display:none;z-index:var(--ck-z-modal)}.ck.ck-tooltip .ck-tooltip__text{display:inline-block}.ck.ck-tooltip .ck-tooltip__text:after{content:"";width:0;height:0}:root{--ck-color-presence-list-dropdown-background:#fff;--ck-color-presence-list-dropdown-arrow-border:#ebebeb;--ck-presence-list-dropdown-list-max-width:250px;--ck-presence-list-dropdown-list-min-width:180px;--ck-presence-list-users-tooltip-max-width:120px;--ck-presence-list-users-tooltip-min-width:25px}.ck.ck-presence-list{display:flex;align-items:center;margin-right:var(--ck-spacing-standard);transition:margin-right .2s ease-in-out;font-size:var(--ck-font-size-base)}.ck.ck-presence-list *{box-sizing:border-box}.ck.ck-presence-list__list{display:flex;justify-content:flex-end}.ck.ck-presence-list__counter{color:var(--ck-color-base-text)}.ck.ck-presence-list__counter--hidden{display:none}.ck.ck-presence-list__list-item{font:inherit;color:inherit;border:0;padding:0;outline:none;background:none;position:relative;margin-left:var(--ck-spacing-standard)}.ck.ck-presence-list__list-item:hover .ck-tooltip{visibility:visible;opacity:1}.ck.ck-presence-list__list-item .ck.ck-tooltip{display:block}.ck.ck-presence-list__list-item .ck-tooltip__text span{display:block;max-width:var(--ck-presence-list-users-tooltip-max-width);overflow:hidden;text-align:center;text-overflow:ellipsis;white-space:nowrap}.ck.ck-presence-list__marker{position:relative;display:block;width:100%;height:3px;margin-top:3px}.ck.ck-presence-list--collapsed .ck-presence-list__list{min-width:calc(var(--ck-user-avatar-size)*1.5);margin-left:var(--ck-spacing-standard)}.ck.ck-presence-list--collapsed .ck-presence-list__list *{cursor:pointer;transition:all .4s ease-in-out}.ck.ck-presence-list--collapsed .ck.ck-presence-list__list-item{margin-left:calc(var(--ck-user-avatar-size)*-1 + 5px)}.ck.ck-presence-list--collapsed .ck.ck-presence-list__list-item .ck-tooltip{display:none}.ck.ck-presence-list--collapsed .ck.ck-presence-list__list-item:nth-last-child(5){opacity:.15}.ck.ck-presence-list--collapsed .ck.ck-presence-list__list-item:nth-last-child(4){opacity:.35}.ck.ck-presence-list--collapsed .ck.ck-presence-list__list-item:nth-last-child(3){opacity:.55}.ck.ck-presence-list--collapsed .ck.ck-presence-list__list-item:nth-last-child(2){opacity:.75}.ck.ck-presence-list__balloon{--ck-color-panel-border:var(--ck-color-presence-list-dropdown-arrow-border);--ck-color-panel-background:var(--ck-color-presence-list-dropdown-background);background-color:var(--ck-color-presence-list-dropdown-background);border:0;opacity:1;animation:fadeIn .3s ease-in-out}.ck.ck-presence-list__balloon .ck.ck-presence-list__dropdown-list-wrapper{max-height:80vh;min-width:var(--ck-presence-list-dropdown-list-min-width);max-width:var(--ck-presence-list-dropdown-list-max-width);overflow-y:auto;overflow-x:hidden;border-radius:var(--ck-border-radius)}.ck.ck-presence-list__balloon .ck.ck-presence-list__dropdown-list-item{font:inherit;color:inherit;border:0;padding:0;outline:none;background:none;display:flex;align-items:center;position:relative;padding:var(--ck-spacing-standard)}.ck.ck-presence-list__balloon .ck.ck-presence-list__dropdown-list-item:first-of-type .ck-presence-list__marker{border-top-left-radius:var(--ck-border-radius)}.ck.ck-presence-list__balloon .ck.ck-presence-list__dropdown-list-item:last-of-type .ck-presence-list__marker{border-bottom-left-radius:var(--ck-border-radius)}.ck.ck-presence-list__balloon .ck.ck-presence-list__dropdown-list .ck-user__full-name{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;color:var(--ck-color-base-text);margin-left:var(--ck-spacing-standard)}.ck.ck-presence-list__balloon .ck.ck-presence-list__dropdown-list .ck.ck-presence-list__marker{position:absolute;left:0;margin:0;height:100%;width:3px}.ck-presence-list__balloon button.ck-presence-list__dropdown-list-item *,.ck-presence-list__list button.ck-presence-list__list-item *{cursor:pointer}@keyframes fadeIn{0%{opacity:0}to{opacity:1}}'},function(e,t,n){"use strict";var r=regeneratorRuntime.mark(aa),i=regeneratorRuntime.mark(sa),o=regeneratorRuntime.mark(gu),a=regeneratorRuntime.mark(GT),s=regeneratorRuntime.mark(JT),c=regeneratorRuntime.mark($T);n.r(t),n.d(t,"default",(function(){return $A}));var l=n(4),u=n(1),d=function(){function e(t){_classCallCheck(this,e),this.editor=t,this.set("isEnabled",!0),this._disableStack=new Set}return _createClass(e,[{key:"forceDisabled",value:function(e){this._disableStack.add(e),1==this._disableStack.size&&(this.on("set:isEnabled",f,{priority:"highest"}),this.isEnabled=!1)}},{key:"clearForceDisabled",value:function(e){this._disableStack.delete(e),0==this._disableStack.size&&(this.off("set:isEnabled",f),this.isEnabled=!0)}},{key:"destroy",value:function(){this.stopListening()}}],[{key:"isContextPlugin",get:function(){return!1}}]),e}();function f(e){e.return=!1,e.stop()}Object(u.default)(d,l.default);var h=function(){function e(t){var n=this;_classCallCheck(this,e),this.editor=t,this.set("value",void 0),this.set("isEnabled",!1),this._disableStack=new Set,this.decorate("execute"),this.listenTo(this.editor.model.document,"change",(function(){n.refresh()})),this.on("execute",(function(e){n.isEnabled||e.stop()}),{priority:"high"}),this.listenTo(t,"change:isReadOnly",(function(e,t,r){r?n.forceDisabled("readOnlyMode"):n.clearForceDisabled("readOnlyMode")}))}return _createClass(e,[{key:"refresh",value:function(){this.isEnabled=!0}},{key:"forceDisabled",value:function(e){this._disableStack.add(e),1==this._disableStack.size&&(this.on("set:isEnabled",p,{priority:"highest"}),this.isEnabled=!1)}},{key:"clearForceDisabled",value:function(e){this._disableStack.delete(e),0==this._disableStack.size&&(this.off("set:isEnabled",p),this.refresh())}},{key:"execute",value:function(){}},{key:"destroy",value:function(){this.stopListening()}}]),e}();function p(e){e.return=!1,e.stop()}Object(u.default)(h,l.default);var v=n(15),g=function(e,t){return function(n){return e(t(n))}},m=g(Object.getPrototypeOf,Object),y=n(8),k=Function.prototype.toString,_=Object.prototype.hasOwnProperty,b=k.call(Object),w=function(e){if(!Object(y.a)(e)||"[object Object]"!=Object(v.a)(e))return!1;var t=m(e);if(null===t)return!0;var n=_.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&k.call(n)==b},x=n(23),C=function(e,t){for(var n=e.length;n--;)if(Object(x.a)(e[n][0],t))return n;return-1},T=Array.prototype.splice;function A(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}A.prototype.clear=function(){this.__data__=[],this.size=0},A.prototype.delete=function(e){var t=this.__data__,n=C(t,e);return!(n<0||(n==t.length-1?t.pop():T.call(t,n,1),--this.size,0))},A.prototype.get=function(e){var t=this.__data__,n=C(t,e);return n<0?void 0:t[n][1]},A.prototype.has=function(e){return C(this.__data__,e)>-1},A.prototype.set=function(e,t){var n=this.__data__,r=C(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this};var S=A,E=n(17),I=n(10),O=Object(E.a)(I.a,"Map"),R=Object(E.a)(Object,"create"),P=Object.prototype.hasOwnProperty,M=Object.prototype.hasOwnProperty;function N(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}N.prototype.clear=function(){this.__data__=R?R(null):{},this.size=0},N.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},N.prototype.get=function(e){var t=this.__data__;if(R){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return P.call(t,e)?t[e]:void 0},N.prototype.has=function(e){var t=this.__data__;return R?void 0!==t[e]:M.call(t,e)},N.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=R&&void 0===t?"__lodash_hash_undefined__":t,this};var D=N,F=function(e,t){var n=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?n["string"==typeof t?"string":"hash"]:n.map};function j(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}j.prototype.clear=function(){this.size=0,this.__data__={hash:new D,map:new(O||S),string:new D}},j.prototype.delete=function(e){var t=F(this,e).delete(e);return this.size-=t?1:0,t},j.prototype.get=function(e){return F(this,e).get(e)},j.prototype.has=function(e){return F(this,e).has(e)},j.prototype.set=function(e,t){var n=F(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this};var L=j;function V(e){var t=this.__data__=new S(e);this.size=t.size}V.prototype.clear=function(){this.__data__=new S,this.size=0},V.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},V.prototype.get=function(e){return this.__data__.get(e)},V.prototype.has=function(e){return this.__data__.has(e)},V.prototype.set=function(e,t){var n=this.__data__;if(n instanceof S){var r=n.__data__;if(!O||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new L(r)}return n.set(e,t),this.size=n.size,this};var B=V,z=n(44),H=n(20),U=n(64),W=n(46),q=g(Object.keys,Object),Y=Object.prototype.hasOwnProperty,G=n(33),J=function(e){return Object(G.a)(e)?Object(U.a)(e):function(e){if(!Object(W.a)(e))return q(e);var t=[];for(var n in Object(e))Y.call(e,n)&&"constructor"!=n&&t.push(n);return t}(e)},$=n(21),K=n(61),Q=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t},Z=function(){return[]},X=Object.prototype.propertyIsEnumerable,ee=Object.getOwnPropertySymbols,te=ee?function(e){return null==e?[]:(e=Object(e),function(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var a=e[n];t(a)&&(o[i++]=a)}return o}(ee(e),(function(t){return X.call(e,t)})))}:Z,ne=function(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e},re=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)ne(t,te(e)),e=m(e);return t}:Z,ie=n(12),oe=function(e,t,n){var r=t(e);return Object(ie.a)(e)?r:ne(r,n(e))},ae=function(e){return oe(e,J,te)},se=function(e){return oe(e,$.a,re)},ce=Object(E.a)(I.a,"DataView"),le=Object(E.a)(I.a,"Promise"),ue=Object(E.a)(I.a,"Set"),de=Object(E.a)(I.a,"WeakMap"),fe=n(30),he=Object(fe.a)(ce),pe=Object(fe.a)(O),ve=Object(fe.a)(le),ge=Object(fe.a)(ue),me=Object(fe.a)(de),ye=v.a;(ce&&"[object DataView]"!=ye(new ce(new ArrayBuffer(1)))||O&&"[object Map]"!=ye(new O)||le&&"[object Promise]"!=ye(le.resolve())||ue&&"[object Set]"!=ye(new ue)||de&&"[object WeakMap]"!=ye(new de))&&(ye=function(e){var t=Object(v.a)(e),n="[object Object]"==t?e.constructor:void 0,r=n?Object(fe.a)(n):"";if(r)switch(r){case he:return"[object DataView]";case pe:return"[object Map]";case ve:return"[object Promise]";case ge:return"[object Set]";case me:return"[object WeakMap]"}return t});var ke=ye,_e=Object.prototype.hasOwnProperty,be=I.a.Uint8Array,we=function(e){var t=new e.constructor(e.byteLength);return new be(t).set(new be(e)),t},xe=/\w*$/,Ce=n(16),Te=Ce.a?Ce.a.prototype:void 0,Ae=Te?Te.valueOf:void 0,Se=function(e,t){var n=t?we(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)},Ee=n(7),Ie=Object.create,Oe=function(){function e(){}return function(t){if(!Object(Ee.a)(t))return{};if(Ie)return Ie(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}(),Re=function(e){return"function"!=typeof e.constructor||Object(W.a)(e)?{}:Oe(m(e))},Pe=n(28),Me=n(45),Ne=n(29),De=Ne.a&&Ne.a.isMap,Fe=De?Object(Me.a)(De):function(e){return Object(y.a)(e)&&"[object Map]"==ke(e)},je=Ne.a&&Ne.a.isSet,Le=je?Object(Me.a)(je):function(e){return Object(y.a)(e)&&"[object Set]"==ke(e)},Ve="[object Arguments]",Be="[object Function]",ze="[object Object]",He={};He[Ve]=He["[object Array]"]=He["[object ArrayBuffer]"]=He["[object DataView]"]=He["[object Boolean]"]=He["[object Date]"]=He["[object Float32Array]"]=He["[object Float64Array]"]=He["[object Int8Array]"]=He["[object Int16Array]"]=He["[object Int32Array]"]=He["[object Map]"]=He["[object Number]"]=He[ze]=He["[object RegExp]"]=He["[object Set]"]=He["[object String]"]=He["[object Symbol]"]=He["[object Uint8Array]"]=He["[object Uint8ClampedArray]"]=He["[object Uint16Array]"]=He["[object Uint32Array]"]=!0,He["[object Error]"]=He[Be]=He["[object WeakMap]"]=!1;var Ue=function e(t,n,r,i,o,a){var s,c=1&n,l=2&n,u=4&n;if(r&&(s=o?r(t,i,o,a):r(t)),void 0!==s)return s;if(!Object(Ee.a)(t))return t;var d=Object(ie.a)(t);if(d){if(s=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&_e.call(e,"index")&&(n.index=e.index,n.input=e.input),n}(t),!c)return Q(t,s)}else{var f=ke(t),h=f==Be||"[object GeneratorFunction]"==f;if(Object(Pe.a)(t))return Object(K.a)(t,c);if(f==ze||f==Ve||h&&!o){if(s=l||h?{}:Re(t),!c)return l?function(e,t){return Object(H.a)(e,re(e),t)}(t,function(e,t){return e&&Object(H.a)(t,Object($.a)(t),e)}(s,t)):function(e,t){return Object(H.a)(e,te(e),t)}(t,function(e,t){return e&&Object(H.a)(t,J(t),e)}(s,t))}else{if(!He[f])return o?t:{};s=function(e,t,n){var r=e.constructor;switch(t){case"[object ArrayBuffer]":return we(e);case"[object Boolean]":case"[object Date]":return new r(+e);case"[object DataView]":return function(e,t){var n=t?we(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return Se(e,n);case"[object Map]":return new r;case"[object Number]":case"[object String]":return new r(e);case"[object RegExp]":return function(e){var t=new e.constructor(e.source,xe.exec(e));return t.lastIndex=e.lastIndex,t}(e);case"[object Set]":return new r;case"[object Symbol]":return function(e){return Ae?Object(Ae.call(e)):{}}(e)}}(t,f,c)}}a||(a=new B);var p=a.get(t);if(p)return p;a.set(t,s),Le(t)?t.forEach((function(i){s.add(e(i,n,r,i,t,a))})):Fe(t)&&t.forEach((function(i,o){s.set(o,e(i,n,r,o,t,a))}));var v=d?void 0:(u?l?se:ae:l?$.a:J)(t);return function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n););}(v||t,(function(i,o){v&&(i=t[o=i]),Object(z.a)(s,o,e(i,n,r,o,t,a))})),s},We=function(e,t){return Ue(e,5,t="function"==typeof t?t:void 0)},qe=function(e){return Object(y.a)(e)&&1===e.nodeType&&!w(e)},Ye=function(){function e(t,n){_classCallCheck(this,e),this._config={},n&&this.define(Ge(n)),t&&this._setObjectToTarget(this._config,t)}return _createClass(e,[{key:"set",value:function(e,t){this._setToTarget(this._config,e,t)}},{key:"define",value:function(e,t){this._setToTarget(this._config,e,t,!0)}},{key:"get",value:function(e){return this._getFromSource(this._config,e)}},{key:"names",value:regeneratorRuntime.mark((function e(){var t,n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=0,n=Object.keys(this._config);case 1:if(!(t<n.length)){e.next=8;break}return r=n[t],e.next=5,r;case 5:t++,e.next=1;break;case 8:case"end":return e.stop()}}),e,this)}))},{key:"_setToTarget",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(w(t))this._setObjectToTarget(e,t,r);else{var i=t.split(".");t=i.pop();var o,a=_createForOfIteratorHelper(i);try{for(a.s();!(o=a.n()).done;){var s=o.value;w(e[s])||(e[s]={}),e=e[s]}}catch(c){a.e(c)}finally{a.f()}if(w(n))return w(e[t])||(e[t]={}),void this._setObjectToTarget(e=e[t],n,r);r&&void 0!==e[t]||(e[t]=n)}}},{key:"_getFromSource",value:function(e,t){var n=t.split(".");t=n.pop();var r,i=_createForOfIteratorHelper(n);try{for(i.s();!(r=i.n()).done;){var o=r.value;if(!w(e[o])){e=null;break}e=e[o]}}catch(a){i.e(a)}finally{i.f()}return e?Ge(e[t]):void 0}},{key:"_setObjectToTarget",value:function(e,t,n){var r=this;Object.keys(t).forEach((function(i){r._setToTarget(e,i,t[i],n)}))}}]),e}();function Ge(e){return We(e,Je)}function Je(e){return qe(e)?e:void 0}var $e=n(13),Ke=n(0),Qe=n(3),Ze=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];_classCallCheck(this,e),this._context=t,this._plugins=new Map,this._availablePlugins=new Map;var i,o=_createForOfIteratorHelper(n);try{for(o.s();!(i=o.n()).done;){var a=i.value;a.pluginName&&this._availablePlugins.set(a.pluginName,a)}}catch(f){o.e(f)}finally{o.f()}this._contextPlugins=new Map;var s,c=_createForOfIteratorHelper(r);try{for(c.s();!(s=c.n()).done;){var l=_slicedToArray(s.value,2),u=l[0],d=l[1];this._contextPlugins.set(u,d),this._contextPlugins.set(d,u),u.pluginName&&this._availablePlugins.set(u.pluginName,u)}}catch(f){c.e(f)}finally{c.f()}}return _createClass(e,[{key:Symbol.iterator,value:regeneratorRuntime.mark((function e(){var t,n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=_createForOfIteratorHelper(this._plugins),e.prev=1,t.s();case 3:if((n=t.n()).done){e.next=11;break}if(r=n.value,e.t0="function"==typeof r[0],!e.t0){e.next=9;break}return e.next=9,r;case 9:e.next=3;break;case 11:e.next=16;break;case 13:e.prev=13,e.t1=e.catch(1),t.e(e.t1);case 16:return e.prev=16,t.f(),e.finish(16);case 19:case"end":return e.stop()}}),e,this,[[1,13,16,19]])}))},{key:"get",value:function(e){var t=this._plugins.get(e);if(!t){var n=e;throw"function"==typeof e&&(n=e.pluginName||e.name),new Ke.default("plugincollection-plugin-not-loaded",this._context,{plugin:n})}return t}},{key:"has",value:function(e){return this._plugins.has(e)}},{key:"init",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=this,i=this._context;!function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Set;t.forEach((function(t){s(t)&&(n.has(t)||(n.add(t),t.pluginName&&!r._availablePlugins.has(t.pluginName)&&r._availablePlugins.set(t.pluginName,t),t.requires&&e(t.requires,n)))}))}(e),d(e);var o=_toConsumableArray(function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Set;return t.map((function(e){return s(e)?e:r._availablePlugins.get(e)})).reduce((function(t,r){return n.has(r)?t:(n.add(r),r.requires&&(d(r.requires,r),e(r.requires,n).forEach((function(e){return t.add(e)}))),t.add(r))}),new Set)}(e.filter((function(e){return!l(e,t)}))));!function(e,t){var n,i=_createForOfIteratorHelper(t);try{for(i.s();!(n=i.n()).done;){var o=n.value;if("function"!=typeof o)throw new Ke.default("plugincollection-replace-plugin-invalid-type",null,{pluginItem:o});var a=o.pluginName;if(!a)throw new Ke.default("plugincollection-replace-plugin-missing-name",null,{pluginItem:o});if(o.requires&&o.requires.length)throw new Ke.default("plugincollection-plugin-for-replacing-cannot-have-dependencies",null,{pluginName:a});var s=r._availablePlugins.get(a);if(!s)throw new Ke.default("plugincollection-plugin-for-replacing-not-exist",null,{pluginName:a});var c=e.indexOf(s);if(-1===c){if(r._contextPlugins.has(s))return;throw new Ke.default("plugincollection-plugin-for-replacing-not-loaded",null,{pluginName:a})}if(s.requires&&s.requires.length)throw new Ke.default("plugincollection-replaced-plugin-cannot-have-dependencies",null,{pluginName:a});e.splice(c,1,o),r._availablePlugins.set(a,o)}}catch(l){i.e(l)}finally{i.f()}}(o,n);var a=function(e){return e.map((function(e){var t=r._contextPlugins.get(e)||new e(i);return r._add(e,t),t}))}(o);return f(a,"init").then((function(){return f(a,"afterInit")})).then((function(){return a}));function s(e){return"function"==typeof e}function c(e){return s(e)&&e.isContextPlugin}function l(e,t){return t.some((function(t){return t===e||u(e)===t||u(t)===e}))}function u(e){return s(e)?e.pluginName||e.name:e}function d(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e.map((function(e){return s(e)?e:r._availablePlugins.get(e)||e})).forEach((function(e){!function(e,t){if(!s(e)){if(t)throw new Ke.default("plugincollection-soft-required",i,{missingPlugin:e,requiredBy:u(t)});throw new Ke.default("plugincollection-plugin-not-found",i,{plugin:e})}}(e,n),function(e,t){if(c(t)&&!c(e))throw new Ke.default("plugincollection-context-required",i,{plugin:u(e),requiredBy:u(t)})}(e,n),function(e,n){if(n&&l(e,t))throw new Ke.default("plugincollection-required",i,{plugin:u(e),requiredBy:u(n)})}(e,n)}))}function f(e,t){return e.reduce((function(e,n){return n[t]?r._contextPlugins.has(n)?e:e.then(n[t].bind(n)):e}),Promise.resolve())}}},{key:"destroy",value:function(){var e,t=[],n=_createForOfIteratorHelper(this);try{for(n.s();!(e=n.n()).done;){var r=_slicedToArray(e.value,2)[1];"function"!=typeof r.destroy||this._contextPlugins.has(r)||t.push(r.destroy())}}catch(i){n.e(i)}finally{n.f()}return Promise.all(t)}},{key:"_add",value:function(e,t){this._plugins.set(e,t);var n=e.pluginName;if(n){if(this._plugins.has(n))throw new Ke.default("plugincollection-plugin-name-conflict",null,{pluginName:n,plugin1:this._plugins.get(n).constructor,plugin2:e});this._plugins.set(n,t)}}}]),e}();function Xe(e){return Array.isArray(e)?e:[e]}Object(u.default)(Ze,Qe.default),window.CKEDITOR_TRANSLATIONS||(window.CKEDITOR_TRANSLATIONS={});var et=["ar","ara","fa","per","fas","he","heb","ku","kur","ug","uig"];function tt(e){return et.includes(e)?"rtl":"ltr"}var nt=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,e),this.uiLanguage=n.uiLanguage||"en",this.contentLanguage=n.contentLanguage||this.uiLanguage,this.uiLanguageDirection=tt(this.uiLanguage),this.contentLanguageDirection=tt(this.contentLanguage),this.t=function(e,n){return t._t(e,n)}}return _createClass(e,[{key:"language",get:function(){return console.warn("locale-deprecated-language-property: The Locale#language property has been deprecated and will be removed in the near future. Please use #uiLanguage and #contentLanguage properties instead."),this.uiLanguage}},{key:"_t",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return t=Xe(t),"string"==typeof e&&(e={string:e}),function(e,t){return e.replace(/%(\d+)/g,(function(e,n){return n<t.length?t[n]:e}))}(function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if("number"!=typeof n)throw new Ke.default("translation-service-quantity-not-a-number",null,{quantity:n});var r=Object.keys(window.CKEDITOR_TRANSLATIONS).length;1===r&&(e=Object.keys(window.CKEDITOR_TRANSLATIONS)[0]);var i=t.id||t.string;if(0===r||!function(e,t){return!!window.CKEDITOR_TRANSLATIONS[e]&&!!window.CKEDITOR_TRANSLATIONS[e].dictionary[t]}(e,i))return 1!==n?t.plural:t.string;var o=window.CKEDITOR_TRANSLATIONS[e].dictionary,a=window.CKEDITOR_TRANSLATIONS[e].getPluralForm||function(e){return 1===e?0:1};if("string"==typeof o[i])return o[i];var s=Number(a(n));return o[i][s]}(this.uiLanguage,e,e.plural?t[0]:1),t)}}]),e}(),rt=function(){function e(t){_classCallCheck(this,e),this.config=new Ye(t,this.constructor.defaultConfig);var n=this.constructor.builtinPlugins;this.config.define("plugins",n),this.plugins=new Ze(this,n);var r=this.config.get("language")||{};this.locale=new nt({uiLanguage:"string"==typeof r?r:r.ui,contentLanguage:this.config.get("language.content")}),this.t=this.locale.t,this.editors=new $e.default,this._contextOwner=null}return _createClass(e,[{key:"initPlugins",value:function(){var e,t=this.config.get("plugins")||[],n=this.config.get("substitutePlugins")||[],r=_createForOfIteratorHelper(t.concat(n));try{for(r.s();!(e=r.n()).done;){var i=e.value;if("function"!=typeof i)throw new Ke.default("context-initplugins-constructor-only",null,{Plugin:i});if(!0!==i.isContextPlugin)throw new Ke.default("context-initplugins-invalid-plugin",null,{Plugin:i})}}catch(o){r.e(o)}finally{r.f()}return this.plugins.init(t,[],n)}},{key:"destroy",value:function(){var e=this;return Promise.all(Array.from(this.editors,(function(e){return e.destroy()}))).then((function(){return e.plugins.destroy()}))}},{key:"_addEditor",value:function(e,t){if(this._contextOwner)throw new Ke.default("context-addeditor-private-context");this.editors.add(e),t&&(this._contextOwner=e)}},{key:"_removeEditor",value:function(e){return this.editors.has(e)&&this.editors.remove(e),this._contextOwner===e?this.destroy():Promise.resolve()}},{key:"_getEditorConfig",value:function(){var e,t={},n=_createForOfIteratorHelper(this.config.names());try{for(n.s();!(e=n.n()).done;){var r=e.value;["plugins","removePlugins","extraPlugins"].includes(r)||(t[r]=this.config.get(r))}}catch(i){n.e(i)}finally{n.f()}return t}}],[{key:"create",value:function(e){var t=this;return new Promise((function(n){var r=new t(e);n(r.initPlugins().then((function(){return r})))}))}}]),e}(),it=function(){function e(t){_classCallCheck(this,e),this.context=t}return _createClass(e,[{key:"destroy",value:function(){this.stopListening()}}],[{key:"isContextPlugin",get:function(){return!0}}]),e}();function ot(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++)if(e[r]!=t[r])return r;return e.length==t.length?"same":e.length<t.length?"prefix":"extension"}Object(u.default)(it,l.default);var at=function(e){return Ue(e,4)},st=n(34),ct=function(){function e(t){_classCallCheck(this,e),this.document=t,this.parent=null}return _createClass(e,[{key:"index",get:function(){var e;if(!this.parent)return null;if(-1==(e=this.parent.getChildIndex(this)))throw new Ke.default("view-node-not-found-in-parent",this);return e}},{key:"nextSibling",get:function(){var e=this.index;return null!==e&&this.parent.getChild(e+1)||null}},{key:"previousSibling",get:function(){var e=this.index;return null!==e&&this.parent.getChild(e-1)||null}},{key:"root",get:function(){for(var e=this;e.parent;)e=e.parent;return e}},{key:"isAttached",value:function(){return this.root.is("rootElement")}},{key:"getPath",value:function(){for(var e=[],t=this;t.parent;)e.unshift(t.index),t=t.parent;return e}},{key:"getAncestors",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{includeSelf:!1,parentFirst:!1},t=[],n=e.includeSelf?this:this.parent;n;)t[e.parentFirst?"push":"unshift"](n),n=n.parent;return t}},{key:"getCommonAncestor",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.getAncestors(t),r=e.getAncestors(t),i=0;n[i]==r[i]&&n[i];)i++;return 0===i?null:n[i-1]}},{key:"isBefore",value:function(e){if(this==e)return!1;if(this.root!==e.root)return!1;var t=this.getPath(),n=e.getPath(),r=ot(t,n);switch(r){case"prefix":return!0;case"extension":return!1;default:return t[r]<n[r]}}},{key:"isAfter",value:function(e){return this!=e&&this.root===e.root&&!this.isBefore(e)}},{key:"_remove",value:function(){this.parent._removeChildren(this.index)}},{key:"_fireChange",value:function(e,t){this.fire("change:"+e,t),this.parent&&this.parent._fireChange(e,t)}},{key:"toJSON",value:function(){var e=at(this);return delete e.parent,e}},{key:"is",value:function(e){return"node"===e||"view:node"===e}}]),e}();Object(u.default)(ct,Qe.default);var lt=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var i;return _classCallCheck(this,n),(i=t.call(this,e))._textData=r,i}return _createClass(n,[{key:"is",value:function(e){return"$text"===e||"view:$text"===e||"text"===e||"view:text"===e||"node"===e||"view:node"===e}},{key:"data",get:function(){return this._textData}},{key:"_data",get:function(){return this.data},set:function(e){this._fireChange("text",this),this._textData=e}},{key:"isSimilar",value:function(e){return e instanceof n&&(this===e||this.data===e.data)}},{key:"_clone",value:function(){return new n(this.document,this.data)}}]),n}(ct),ut=function(){function e(t,n,r){if(_classCallCheck(this,e),this.textNode=t,n<0||n>t.data.length)throw new Ke.default("view-textproxy-wrong-offsetintext",this);if(r<0||n+r>t.data.length)throw new Ke.default("view-textproxy-wrong-length",this);this.data=t.data.substring(n,n+r),this.offsetInText=n}return _createClass(e,[{key:"offsetSize",get:function(){return this.data.length}},{key:"isPartial",get:function(){return this.data.length!==this.textNode.data.length}},{key:"parent",get:function(){return this.textNode.parent}},{key:"root",get:function(){return this.textNode.root}},{key:"document",get:function(){return this.textNode.document}},{key:"is",value:function(e){return"$textProxy"===e||"view:$textProxy"===e||"textProxy"===e||"view:textProxy"===e}},{key:"getAncestors",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{includeSelf:!1,parentFirst:!1},t=[],n=e.includeSelf?this.textNode:this.parent;null!==n;)t[e.parentFirst?"push":"unshift"](n),n=n.parent;return t}}]),e}(),dt=n(9);function ft(e){return Object(dt.a)(e)?new Map(e):function(e){var t=new Map;for(var n in e)t.set(n,e[n]);return t}(e)}var ht=function(){function e(){_classCallCheck(this,e),this._patterns=[],this.add.apply(this,arguments)}return _createClass(e,[{key:"add",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var r=0,i=t;r<i.length;r++){var o=i[r];("string"==typeof o||o instanceof RegExp)&&(o={name:o}),o.classes&&("string"==typeof o.classes||o.classes instanceof RegExp)&&(o.classes=[o.classes]),this._patterns.push(o)}}},{key:"match",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var r=0,i=t;r<i.length;r++){var o,a=i[r],s=_createForOfIteratorHelper(this._patterns);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=pt(a,c);if(l)return{element:a,pattern:c,match:l}}}catch(u){s.e(u)}finally{s.f()}}return null}},{key:"matchAll",value:function(){for(var e=[],t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,o=n;i<o.length;i++){var a,s=o[i],c=_createForOfIteratorHelper(this._patterns);try{for(c.s();!(a=c.n()).done;){var l=a.value,u=pt(s,l);u&&e.push({element:s,pattern:l,match:u})}}catch(d){c.e(d)}finally{c.f()}}return e.length>0?e:null}},{key:"getElementName",value:function(){if(1!==this._patterns.length)return null;var e=this._patterns[0],t=e.name;return"function"==typeof e||!t||t instanceof RegExp?null:t}}]),e}();function pt(e,t){if("function"==typeof t)return t(e);var n={};return t.name&&(n.name=function(e,t){return e instanceof RegExp?e.test(t):e===t}(t.name,e.name),!n.name)||t.attributes&&(n.attributes=function(e,t){var n=[];for(var r in e){var i=e[r];if(!t.hasAttribute(r))return null;var o=t.getAttribute(r);if(!0===i)n.push(r);else if(i instanceof RegExp){if(!i.test(o))return null;n.push(r)}else{if(o!==i)return null;n.push(r)}}return n}(t.attributes,e),!n.attributes)?null:!(t.classes&&(n.classes=function(e,t){var n,r=[],i=_createForOfIteratorHelper(e);try{for(i.s();!(n=i.n()).done;){var o=n.value;if(o instanceof RegExp){var a,s=_createForOfIteratorHelper(t.getClassNames());try{for(s.s();!(a=s.n()).done;){var c=a.value;o.test(c)&&r.push(c)}}catch(l){s.e(l)}finally{s.f()}if(0===r.length)return null}else{if(!t.hasClass(o))return null;r.push(o)}}}catch(l){i.e(l)}finally{i.f()}return r}(t.classes,e),!n.classes))&&!(t.styles&&(n.styles=function(e,t){var n=[];for(var r in e){var i=e[r];if(!t.hasStyle(r))return null;var o=t.getStyle(r);if(i instanceof RegExp){if(!i.test(o))return null;n.push(r)}else{if(o!==i)return null;n.push(r)}}return n}(t.styles,e),!n.styles))&&n}var vt=function(e){return"symbol"==typeof e||Object(y.a)(e)&&"[object Symbol]"==Object(v.a)(e)},gt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,mt=/^\w*$/;function yt(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function n(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=e.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(yt.Cache||L),n}yt.Cache=L;var kt=yt,_t=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,bt=/\\(\\)?/g,wt=function(e){var t=kt((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(_t,(function(e,n,r,i){t.push(r?i.replace(bt,"$1"):n||e)})),t}),(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}(),xt=Ce.a?Ce.a.prototype:void 0,Ct=xt?xt.toString:void 0,Tt=function(e){return null==e?"":function e(t){if("string"==typeof t)return t;if(Object(ie.a)(t))return function(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}(t,e)+"";if(vt(t))return Ct?Ct.call(t):"";var n=t+"";return"0"==n&&1/t==-1/0?"-0":n}(e)},At=function(e,t){return Object(ie.a)(e)?e:function(e,t){if(Object(ie.a)(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!vt(e))||mt.test(e)||!gt.test(e)||null!=t&&e in Object(t)}(e,t)?[e]:wt(Tt(e))},St=function(e){if("string"==typeof e||vt(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t},Et=function(e,t){for(var n=0,r=(t=At(t,e)).length;null!=e&&n<r;)e=e[St(t[n++])];return n&&n==r?e:void 0},It=function(e,t,n){var r=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(n=n>i?i:n)<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var o=Array(i);++r<i;)o[r]=e[r+t];return o},Ot=function(e,t){return null==e||function(e,t){return null==(e=function(e,t){return t.length<2?e:Et(e,It(t,0,-1))}(e,t=At(t,e)))||delete e[St(function(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}(t))]}(e,t)},Rt=function(e,t,n){var r=null==e?void 0:Et(e,t);return void 0===r?n:r},Pt=n(43),Mt=function(e,t,n){(void 0===n||Object(x.a)(e[t],n))&&(void 0!==n||t in e)||Object(Pt.a)(e,t,n)},Nt=n(55),Dt=function(e){return Object(y.a)(e)&&Object(G.a)(e)},Ft=n(41),jt=n(47),Lt=function(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]},Vt=n(63),Bt=Object(Vt.a)((function(e,t,n){!function e(t,n,r,i,o){t!==n&&function(e,t,n){for(var r=-1,i=Object(e),o=n(e),a=o.length;a--;){var s=o[++r];if(!1===t(i[s],s))break}}(n,(function(a,s){if(o||(o=new B),Object(Ee.a)(a))!function(e,t,n,r,i,o,a){var s=Lt(e,n),c=Lt(t,n),l=a.get(c);if(l)Mt(e,n,l);else{var u=o?o(s,c,n+"",e,t,a):void 0,d=void 0===u;if(d){var f=Object(ie.a)(c),h=!f&&Object(Pe.a)(c),p=!f&&!h&&Object(jt.a)(c);u=c,f||h||p?Object(ie.a)(s)?u=s:Dt(s)?u=Q(s):h?(d=!1,u=Object(K.a)(c,!0)):p?(d=!1,u=Se(c,!0)):u=[]:w(c)||Object(Nt.a)(c)?(u=s,Object(Nt.a)(s)?u=function(e){return Object(H.a)(e,Object($.a)(e))}(s):Object(Ee.a)(s)&&!Object(Ft.a)(s)||(u=Re(c))):d=!1}d&&(a.set(c,u),i(u,c,r,o,a),a.delete(c)),Mt(e,n,u)}}(t,n,s,r,e,i,o);else{var c=i?i(Lt(t,s),a,s+"",t,n,o):void 0;void 0===c&&(c=a),Mt(t,s,c)}}),$.a)}(e,t,n)})),zt=n(42),Ht=function(e,t,n){return null==e?e:function(e,t,n,r){if(!Object(Ee.a)(e))return e;for(var i=-1,o=(t=At(t,e)).length,a=o-1,s=e;null!=s&&++i<o;){var c=St(t[i]),l=n;if("__proto__"===c||"constructor"===c||"prototype"===c)return e;if(i!=a){var u=s[c];void 0===(l=void 0)&&(l=Object(Ee.a)(u)?u:Object(zt.a)(t[i+1])?[]:{})}Object(z.a)(s,c,l),s=s[c]}return e}(e,t,n)},Ut=function(){function e(t){_classCallCheck(this,e),this._styles={},this._styleProcessor=t}return _createClass(e,[{key:"isEmpty",get:function(){var e=Object.entries(this._styles);return!Array.from(e).length}},{key:"size",get:function(){return this.isEmpty?0:this.getStyleNames().length}},{key:"setTo",value:function(e){this.clear();for(var t=0,n=Array.from(function(e){var t=null,n=0,r=0,i=null,o=new Map;if(""===e)return o;";"!=e.charAt(e.length-1)&&(e+=";");for(var a=0;a<e.length;a++){var s=e.charAt(a);if(null===t)switch(s){case":":i||(i=e.substr(n,a-n),r=a+1);break;case'"':case"'":t=s;break;case";":var c=e.substr(r,a-r);i&&o.set(i.trim(),c.trim()),i=null,n=a+1}else s===t&&(t=null)}return o}(e).entries());t<n.length;t++){var r=_slicedToArray(n[t],2),i=r[0],o=r[1];this._styleProcessor.toNormalizedForm(i,o,this._styles)}}},{key:"has",value:function(e){if(this.isEmpty)return!1;var t=this._styleProcessor.getReducedForm(e,this._styles).find((function(t){return _slicedToArray(t,1)[0]===e}));return Array.isArray(t)}},{key:"set",value:function(e,t){if(Object(Ee.a)(e))for(var n=0,r=Object.entries(e);n<r.length;n++){var i=_slicedToArray(r[n],2),o=i[0],a=i[1];this._styleProcessor.toNormalizedForm(o,a,this._styles)}else this._styleProcessor.toNormalizedForm(e,t,this._styles)}},{key:"remove",value:function(e){var t=qt(e);Ot(this._styles,t),delete this._styles[e],this._cleanEmptyObjectsOnPath(t)}},{key:"getNormalized",value:function(e){return this._styleProcessor.getNormalized(e,this._styles)}},{key:"toString",value:function(){return this.isEmpty?"":this._getStylesEntries().map((function(e){return e.join(":")})).sort().join(";")+";"}},{key:"getAsString",value:function(e){if(!this.isEmpty){if(this._styles[e]&&!Object(Ee.a)(this._styles[e]))return this._styles[e];var t=this._styleProcessor.getReducedForm(e,this._styles).find((function(t){return _slicedToArray(t,1)[0]===e}));return Array.isArray(t)?t[1]:void 0}}},{key:"getStyleNames",value:function(){return this.isEmpty?[]:this._getStylesEntries().map((function(e){return _slicedToArray(e,1)[0]}))}},{key:"clear",value:function(){this._styles={}}},{key:"_getStylesEntries",value:function(){for(var e=[],t=0,n=Object.keys(this._styles);t<n.length;t++){var r=n[t];e.push.apply(e,_toConsumableArray(this._styleProcessor.getReducedForm(r,this._styles)))}return e}},{key:"_cleanEmptyObjectsOnPath",value:function(e){var t=e.split(".");if(t.length>1){var n=t.splice(0,t.length-1).join("."),r=Rt(this._styles,n);r&&!Array.from(Object.keys(r)).length&&this.remove(n)}}}]),e}(),Wt=function(){function e(){_classCallCheck(this,e),this._normalizers=new Map,this._extractors=new Map,this._reducers=new Map,this._consumables=new Map}return _createClass(e,[{key:"toNormalizedForm",value:function(e,t,n){if(Object(Ee.a)(t))Yt(n,qt(e),t);else if(this._normalizers.has(e)){var r=this._normalizers.get(e)(t);Yt(n,r.path,r.value)}else Yt(n,e,t)}},{key:"getNormalized",value:function(e,t){if(!e)return Bt({},t);if(void 0!==t[e])return t[e];if(this._extractors.has(e)){var n=this._extractors.get(e);if("string"==typeof n)return Rt(t,n);var r=n(e,t);if(r)return r}return Rt(t,qt(e))}},{key:"getReducedForm",value:function(e,t){var n=this.getNormalized(e,t);return void 0===n?[]:this._reducers.has(e)?this._reducers.get(e)(n):[[e,n]]}},{key:"getRelatedStyles",value:function(e){return this._consumables.get(e)||[]}},{key:"setNormalizer",value:function(e,t){this._normalizers.set(e,t)}},{key:"setExtractor",value:function(e,t){this._extractors.set(e,t)}},{key:"setReducer",value:function(e,t){this._reducers.set(e,t)}},{key:"setStyleRelation",value:function(e,t){this._mapStyleNames(e,t);var n,r=_createForOfIteratorHelper(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;this._mapStyleNames(i,[e])}}catch(o){r.e(o)}finally{r.f()}}},{key:"_mapStyleNames",value:function(e,t){var n;this._consumables.has(e)||this._consumables.set(e,[]),(n=this._consumables.get(e)).push.apply(n,_toConsumableArray(t))}}]),e}();function qt(e){return e.replace("-",".")}function Yt(e,t,n){var r=n;Object(Ee.a)(n)&&(r=Bt({},Rt(e,t),n)),Ht(e,t,r)}var Gt=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i,o){var a;if(_classCallCheck(this,n),(a=t.call(this,e)).name=r,a._attrs=function(e){var t,n=_createForOfIteratorHelper(e=ft(e));try{for(n.s();!(t=n.n()).done;){var r=_slicedToArray(t.value,2),i=r[0],o=r[1];null===o?e.delete(i):"string"!=typeof o&&e.set(i,String(o))}}catch(a){n.e(a)}finally{n.f()}return e}(i),a._children=[],o&&a._insertChild(0,o),a._classes=new Set,a._attrs.has("class")){var s=a._attrs.get("class");Jt(a._classes,s),a._attrs.delete("class")}return a._styles=new Ut(a.document.stylesProcessor),a._attrs.has("style")&&(a._styles.setTo(a._attrs.get("style")),a._attrs.delete("style")),a._customProperties=new Map,a._isAllowedInsideAttributeElement=!1,_possibleConstructorReturn(a)}return _createClass(n,[{key:"childCount",get:function(){return this._children.length}},{key:"isEmpty",get:function(){return 0===this._children.length}},{key:"isAllowedInsideAttributeElement",get:function(){return this._isAllowedInsideAttributeElement}},{key:"is",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return t?t===this.name&&("element"===e||"view:element"===e):"element"===e||"view:element"===e||"node"===e||"view:node"===e}},{key:"getChild",value:function(e){return this._children[e]}},{key:"getChildIndex",value:function(e){return this._children.indexOf(e)}},{key:"getChildren",value:function(){return this._children[Symbol.iterator]()}},{key:"getAttributeKeys",value:regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this._classes.size>0,!e.t0){e.next=4;break}return e.next=4,"class";case 4:if(e.t1=this._styles.isEmpty,e.t1){e.next=8;break}return e.next=8,"style";case 8:return e.delegateYield(this._attrs.keys(),"t2",9);case 9:case"end":return e.stop()}}),e,this)}))},{key:"getAttributes",value:regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(this._attrs.entries(),"t0",1);case 1:if(e.t1=this._classes.size>0,!e.t1){e.next=5;break}return e.next=5,["class",this.getAttribute("class")];case 5:if(e.t2=this._styles.isEmpty,e.t2){e.next=9;break}return e.next=9,["style",this.getAttribute("style")];case 9:case"end":return e.stop()}}),e,this)}))},{key:"getAttribute",value:function(e){if("class"==e)return this._classes.size>0?_toConsumableArray(this._classes).join(" "):void 0;if("style"==e){var t=this._styles.toString();return""==t?void 0:t}return this._attrs.get(e)}},{key:"hasAttribute",value:function(e){return"class"==e?this._classes.size>0:"style"==e?!this._styles.isEmpty:this._attrs.has(e)}},{key:"isSimilar",value:function(e){if(!(e instanceof n))return!1;if(this===e)return!0;if(this.name!=e.name)return!1;if(this.isAllowedInsideAttributeElement!=e.isAllowedInsideAttributeElement)return!1;if(this._attrs.size!==e._attrs.size||this._classes.size!==e._classes.size||this._styles.size!==e._styles.size)return!1;var t,r=_createForOfIteratorHelper(this._attrs);try{for(r.s();!(t=r.n()).done;){var i=_slicedToArray(t.value,2),o=i[0],a=i[1];if(!e._attrs.has(o)||e._attrs.get(o)!==a)return!1}}catch(h){r.e(h)}finally{r.f()}var s,c=_createForOfIteratorHelper(this._classes);try{for(c.s();!(s=c.n()).done;){var l=s.value;if(!e._classes.has(l))return!1}}catch(h){c.e(h)}finally{c.f()}var u,d=_createForOfIteratorHelper(this._styles.getStyleNames());try{for(d.s();!(u=d.n()).done;){var f=u.value;if(!e._styles.has(f)||e._styles.getAsString(f)!==this._styles.getAsString(f))return!1}}catch(h){d.e(h)}finally{d.f()}return!0}},{key:"hasClass",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var r=0,i=t;r<i.length;r++){var o=i[r];if(!this._classes.has(o))return!1}return!0}},{key:"getClassNames",value:function(){return this._classes.keys()}},{key:"getStyle",value:function(e){return this._styles.getAsString(e)}},{key:"getNormalizedStyle",value:function(e){return this._styles.getNormalized(e)}},{key:"getStyleNames",value:function(){return this._styles.getStyleNames()}},{key:"hasStyle",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var r=0,i=t;r<i.length;r++){var o=i[r];if(!this._styles.has(o))return!1}return!0}},{key:"findAncestor",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var r=_construct(ht,t),i=this.parent;i;){if(r.match(i))return i;i=i.parent}return null}},{key:"getCustomProperty",value:function(e){return this._customProperties.get(e)}},{key:"getCustomProperties",value:regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(this._customProperties.entries(),"t0",1);case 1:case"end":return e.stop()}}),e,this)}))},{key:"getIdentity",value:function(){var e=Array.from(this._classes).sort().join(","),t=this._styles.toString(),n=Array.from(this._attrs).map((function(e){return"".concat(e[0],'="').concat(e[1],'"')})).sort().join(" ");return this.name+(""==e?"":' class="'.concat(e,'"'))+(t?' style="'.concat(t,'"'):"")+(""==n?"":" "+n)}},{key:"_clone",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=[];if(e){var n,r=_createForOfIteratorHelper(this.getChildren());try{for(r.s();!(n=r.n()).done;){var i=n.value;t.push(i._clone(e))}}catch(a){r.e(a)}finally{r.f()}}var o=new this.constructor(this.document,this.name,this._attrs,t);return o._classes=new Set(this._classes),o._styles.set(this._styles.getNormalized()),o._customProperties=new Map(this._customProperties),o.getFillerOffset=this.getFillerOffset,o._isAllowedInsideAttributeElement=this.isAllowedInsideAttributeElement,o}},{key:"_appendChild",value:function(e){return this._insertChild(this.childCount,e)}},{key:"_insertChild",value:function(e,t){this._fireChange("children",this);var n,r=0,i=_createForOfIteratorHelper(function(e,t){return"string"==typeof t?[new lt(e,t)]:(Object(dt.a)(t)||(t=[t]),Array.from(t).map((function(t){return"string"==typeof t?new lt(e,t):t instanceof ut?new lt(e,t.data):t})))}(this.document,t));try{for(i.s();!(n=i.n()).done;){var o=n.value;null!==o.parent&&o._remove(),o.parent=this,o.document=this.document,this._children.splice(e,0,o),e++,r++}}catch(a){i.e(a)}finally{i.f()}return r}},{key:"_removeChildren",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this._fireChange("children",this);for(var n=e;n<e+t;n++)this._children[n].parent=null;return this._children.splice(e,t)}},{key:"_setAttribute",value:function(e,t){t=String(t),this._fireChange("attributes",this),"class"==e?Jt(this._classes,t):"style"==e?this._styles.setTo(t):this._attrs.set(e,t)}},{key:"_removeAttribute",value:function(e){return this._fireChange("attributes",this),"class"==e?this._classes.size>0&&(this._classes.clear(),!0):"style"==e?!this._styles.isEmpty&&(this._styles.clear(),!0):this._attrs.delete(e)}},{key:"_addClass",value:function(e){this._fireChange("attributes",this);var t,n=_createForOfIteratorHelper(Xe(e));try{for(n.s();!(t=n.n()).done;){var r=t.value;this._classes.add(r)}}catch(i){n.e(i)}finally{n.f()}}},{key:"_removeClass",value:function(e){this._fireChange("attributes",this);var t,n=_createForOfIteratorHelper(Xe(e));try{for(n.s();!(t=n.n()).done;){var r=t.value;this._classes.delete(r)}}catch(i){n.e(i)}finally{n.f()}}},{key:"_setStyle",value:function(e,t){this._fireChange("attributes",this),this._styles.set(e,t)}},{key:"_removeStyle",value:function(e){this._fireChange("attributes",this);var t,n=_createForOfIteratorHelper(Xe(e));try{for(n.s();!(t=n.n()).done;){var r=t.value;this._styles.remove(r)}}catch(i){n.e(i)}finally{n.f()}}},{key:"_setCustomProperty",value:function(e,t){this._customProperties.set(e,t)}},{key:"_removeCustomProperty",value:function(e){return this._customProperties.delete(e)}}]),n}(ct);function Jt(e,t){var n=t.split(/\s+/);e.clear(),n.forEach((function(t){return e.add(t)}))}var $t=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i,o){var a;return _classCallCheck(this,n),(a=t.call(this,e,r,i,o)).getFillerOffset=Kt,a}return _createClass(n,[{key:"is",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return t?t===this.name&&("containerElement"===e||"view:containerElement"===e||"element"===e||"view:element"===e):"containerElement"===e||"view:containerElement"===e||"element"===e||"view:element"===e||"node"===e||"view:node"===e}}]),n}(Gt);function Kt(){var e=_toConsumableArray(this.getChildren()),t=e[this.childCount-1];if(t&&t.is("element","br"))return this.childCount;var n,r=_createForOfIteratorHelper(e);try{for(r.s();!(n=r.n()).done;){if(!n.value.is("uiElement"))return null}}catch(i){r.e(i)}finally{r.f()}return this.childCount}var Qt=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i,o){var a;return _classCallCheck(this,n),(a=t.call(this,e,r,i,o)).set("isReadOnly",!1),a.set("isFocused",!1),a.bind("isReadOnly").to(e),a.bind("isFocused").to(e,"isFocused",(function(t){return t&&e.selection.editableElement==_assertThisInitialized(a)})),a.listenTo(e.selection,"change",(function(){a.isFocused=e.isFocused&&e.selection.editableElement==_assertThisInitialized(a)})),a}return _createClass(n,[{key:"is",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return t?t===this.name&&("editableElement"===e||"view:editableElement"===e||"containerElement"===e||"view:containerElement"===e||"element"===e||"view:element"===e):"editableElement"===e||"view:editableElement"===e||"containerElement"===e||"view:containerElement"===e||"element"===e||"view:element"===e||"node"===e||"view:node"===e}},{key:"destroy",value:function(){this.stopListening()}}]),n}($t);Object(u.default)(Qt,l.default);var Zt=Symbol("rootName"),Xt=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var i;return _classCallCheck(this,n),(i=t.call(this,e,r)).rootName="main",i}return _createClass(n,[{key:"is",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return t?t===this.name&&("rootElement"===e||"view:rootElement"===e||"editableElement"===e||"view:editableElement"===e||"containerElement"===e||"view:containerElement"===e||"element"===e||"view:element"===e):"rootElement"===e||"view:rootElement"===e||"editableElement"===e||"view:editableElement"===e||"containerElement"===e||"view:containerElement"===e||"element"===e||"view:element"===e||"node"===e||"view:node"===e}},{key:"rootName",get:function(){return this.getCustomProperty(Zt)},set:function(e){this._setCustomProperty(Zt,e)}},{key:"_name",set:function(e){this.name=e}}]),n}(Qt),en=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(_classCallCheck(this,e),!t.boundaries&&!t.startPosition)throw new Ke.default("view-tree-walker-no-start-position",null);if(t.direction&&"forward"!=t.direction&&"backward"!=t.direction)throw new Ke.default("view-tree-walker-unknown-direction",t.startPosition,{direction:t.direction});this.boundaries=t.boundaries||null,this.position=tn._createAt(t.startPosition?t.startPosition:t.boundaries["backward"==t.direction?"end":"start"]),this.direction=t.direction||"forward",this.singleCharacters=!!t.singleCharacters,this.shallow=!!t.shallow,this.ignoreElementEnd=!!t.ignoreElementEnd,this._boundaryStartParent=this.boundaries?this.boundaries.start.parent:null,this._boundaryEndParent=this.boundaries?this.boundaries.end.parent:null}return _createClass(e,[{key:Symbol.iterator,value:function(){return this}},{key:"skip",value:function(e){var t,n,r;do{var i;r=this.position,t=(i=this.next()).done,n=i.value}while(!t&&e(n));t||(this.position=r)}},{key:"next",value:function(){return"forward"==this.direction?this._next():this._previous()}},{key:"_next",value:function(){var e,t=this.position.clone(),n=this.position,r=t.parent;if(null===r.parent&&t.offset===r.childCount)return{done:!0};if(r===this._boundaryEndParent&&t.offset==this.boundaries.end.offset)return{done:!0};if(r instanceof lt){if(t.isAtEnd)return this.position=tn._createAfter(r),this._next();e=r.data[t.offset]}else e=r.getChild(t.offset);if(e instanceof Gt)return this.shallow?t.offset++:t=new tn(e,0),this.position=t,this._formatReturnValue("elementStart",e,n,t,1);if(e instanceof lt){if(this.singleCharacters)return t=new tn(e,0),this.position=t,this._next();var i,o=e.data.length;return e==this._boundaryEndParent?(o=this.boundaries.end.offset,i=new ut(e,0,o),t=tn._createAfter(i)):(i=new ut(e,0,e.data.length),t.offset++),this.position=t,this._formatReturnValue("text",i,n,t,o)}if("string"==typeof e){var a;a=this.singleCharacters?1:(r===this._boundaryEndParent?this.boundaries.end.offset:r.data.length)-t.offset;var s=new ut(r,t.offset,a);return t.offset+=a,this.position=t,this._formatReturnValue("text",s,n,t,a)}return t=tn._createAfter(r),this.position=t,this.ignoreElementEnd?this._next():this._formatReturnValue("elementEnd",r,n,t)}},{key:"_previous",value:function(){var e,t=this.position.clone(),n=this.position,r=t.parent;if(null===r.parent&&0===t.offset)return{done:!0};if(r==this._boundaryStartParent&&t.offset==this.boundaries.start.offset)return{done:!0};if(r instanceof lt){if(t.isAtStart)return this.position=tn._createBefore(r),this._previous();e=r.data[t.offset-1]}else e=r.getChild(t.offset-1);if(e instanceof Gt)return this.shallow?(t.offset--,this.position=t,this._formatReturnValue("elementStart",e,n,t,1)):(t=new tn(e,e.childCount),this.position=t,this.ignoreElementEnd?this._previous():this._formatReturnValue("elementEnd",e,n,t));if(e instanceof lt){if(this.singleCharacters)return t=new tn(e,e.data.length),this.position=t,this._previous();var i,o=e.data.length;if(e==this._boundaryStartParent){var a=this.boundaries.start.offset;o=(i=new ut(e,a,e.data.length-a)).data.length,t=tn._createBefore(i)}else i=new ut(e,0,e.data.length),t.offset--;return this.position=t,this._formatReturnValue("text",i,n,t,o)}if("string"==typeof e){var s;s=this.singleCharacters?1:t.offset-(r===this._boundaryStartParent?this.boundaries.start.offset:0),t.offset-=s;var c=new ut(r,t.offset,s);return this.position=t,this._formatReturnValue("text",c,n,t,s)}return t=tn._createBefore(r),this.position=t,this._formatReturnValue("elementStart",r,n,t,1)}},{key:"_formatReturnValue",value:function(e,t,n,r,i){return t instanceof ut&&(t.offsetInText+t.data.length==t.textNode.data.length&&("forward"!=this.direction||this.boundaries&&this.boundaries.end.isEqual(this.position)?n=tn._createAfter(t.textNode):(r=tn._createAfter(t.textNode),this.position=r)),0===t.offsetInText&&("backward"!=this.direction||this.boundaries&&this.boundaries.start.isEqual(this.position)?n=tn._createBefore(t.textNode):(r=tn._createBefore(t.textNode),this.position=r))),{done:!1,value:{type:e,item:t,previousPosition:n,nextPosition:r,length:i}}}}]),e}(),tn=function(){function e(t,n){_classCallCheck(this,e),this.parent=t,this.offset=n}return _createClass(e,[{key:"nodeAfter",get:function(){return this.parent.is("$text")?null:this.parent.getChild(this.offset)||null}},{key:"nodeBefore",get:function(){return this.parent.is("$text")?null:this.parent.getChild(this.offset-1)||null}},{key:"isAtStart",get:function(){return 0===this.offset}},{key:"isAtEnd",get:function(){var e=this.parent.is("$text")?this.parent.data.length:this.parent.childCount;return this.offset===e}},{key:"root",get:function(){return this.parent.root}},{key:"editableElement",get:function(){for(var e=this.parent;!(e instanceof Qt);){if(!e.parent)return null;e=e.parent}return e}},{key:"getShiftedBy",value:function(t){var n=e._createAt(this),r=n.offset+t;return n.offset=r<0?0:r,n}},{key:"getLastMatchingPosition",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.startPosition=this;var n=new en(t);return n.skip(e),n.position}},{key:"getAncestors",value:function(){return this.parent.is("documentFragment")?[this.parent]:this.parent.getAncestors({includeSelf:!0})}},{key:"getCommonAncestor",value:function(e){for(var t=this.getAncestors(),n=e.getAncestors(),r=0;t[r]==n[r]&&t[r];)r++;return 0===r?null:t[r-1]}},{key:"is",value:function(e){return"position"===e||"view:position"===e}},{key:"isEqual",value:function(e){return this.parent==e.parent&&this.offset==e.offset}},{key:"isBefore",value:function(e){return"before"==this.compareWith(e)}},{key:"isAfter",value:function(e){return"after"==this.compareWith(e)}},{key:"compareWith",value:function(e){if(this.root!==e.root)return"different";if(this.isEqual(e))return"same";var t=this.parent.is("node")?this.parent.getPath():[],n=e.parent.is("node")?e.parent.getPath():[];t.push(this.offset),n.push(e.offset);var r=ot(t,n);switch(r){case"prefix":return"before";case"extension":return"after";default:return t[r]<n[r]?"before":"after"}}},{key:"getWalker",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.startPosition=this,new en(e)}},{key:"clone",value:function(){return new e(this.parent,this.offset)}}],[{key:"_createAt",value:function(t,n){if(t instanceof e)return new this(t.parent,t.offset);var r=t;if("end"==n)n=r.is("$text")?r.data.length:r.childCount;else{if("before"==n)return this._createBefore(r);if("after"==n)return this._createAfter(r);if(0!==n&&!n)throw new Ke.default("view-createpositionat-offset-required",r)}return new e(r,n)}},{key:"_createAfter",value:function(t){if(t.is("$textProxy"))return new e(t.textNode,t.offsetInText+t.data.length);if(!t.parent)throw new Ke.default("view-position-after-root",t,{root:t});return new e(t.parent,t.index+1)}},{key:"_createBefore",value:function(t){if(t.is("$textProxy"))return new e(t.textNode,t.offsetInText);if(!t.parent)throw new Ke.default("view-position-before-root",t,{root:t});return new e(t.parent,t.index)}}]),e}(),nn=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;_classCallCheck(this,e),this.start=t.clone(),this.end=n?n.clone():t.clone()}return _createClass(e,[{key:Symbol.iterator,value:regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(new en({boundaries:this,ignoreElementEnd:!0}),"t0",1);case 1:case"end":return e.stop()}}),e,this)}))},{key:"isCollapsed",get:function(){return this.start.isEqual(this.end)}},{key:"isFlat",get:function(){return this.start.parent===this.end.parent}},{key:"root",get:function(){return this.start.root}},{key:"getEnlarged",value:function(){var t=this.start.getLastMatchingPosition(rn,{direction:"backward"}),n=this.end.getLastMatchingPosition(rn);return t.parent.is("$text")&&t.isAtStart&&(t=tn._createBefore(t.parent)),n.parent.is("$text")&&n.isAtEnd&&(n=tn._createAfter(n.parent)),new e(t,n)}},{key:"getTrimmed",value:function(){var t=this.start.getLastMatchingPosition(rn);if(t.isAfter(this.end)||t.isEqual(this.end))return new e(t,t);var n=this.end.getLastMatchingPosition(rn,{direction:"backward"}),r=t.nodeAfter,i=n.nodeBefore;return r&&r.is("$text")&&(t=new tn(r,0)),i&&i.is("$text")&&(n=new tn(i,i.data.length)),new e(t,n)}},{key:"isEqual",value:function(e){return this==e||this.start.isEqual(e.start)&&this.end.isEqual(e.end)}},{key:"containsPosition",value:function(e){return e.isAfter(this.start)&&e.isBefore(this.end)}},{key:"containsRange",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.isCollapsed&&(t=!1);var n=this.containsPosition(e.start)||t&&this.start.isEqual(e.start),r=this.containsPosition(e.end)||t&&this.end.isEqual(e.end);return n&&r}},{key:"getDifference",value:function(t){var n=[];return this.isIntersecting(t)?(this.containsPosition(t.start)&&n.push(new e(this.start,t.start)),this.containsPosition(t.end)&&n.push(new e(t.end,this.end))):n.push(this.clone()),n}},{key:"getIntersection",value:function(t){if(this.isIntersecting(t)){var n=this.start,r=this.end;return this.containsPosition(t.start)&&(n=t.start),this.containsPosition(t.end)&&(r=t.end),new e(n,r)}return null}},{key:"getWalker",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.boundaries=this,new en(e)}},{key:"getCommonAncestor",value:function(){return this.start.getCommonAncestor(this.end)}},{key:"getContainedElement",value:function(){if(this.isCollapsed)return null;var e=this.start.nodeAfter,t=this.end.nodeBefore;return this.start.parent.is("$text")&&this.start.isAtEnd&&this.start.parent.nextSibling&&(e=this.start.parent.nextSibling),this.end.parent.is("$text")&&this.end.isAtStart&&this.end.parent.previousSibling&&(t=this.end.parent.previousSibling),e&&e.is("element")&&e===t?e:null}},{key:"clone",value:function(){return new e(this.start,this.end)}},{key:"getItems",value:regeneratorRuntime.mark((function e(){var t,n,r,i,o,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(t=a.length>0&&void 0!==a[0]?a[0]:{}).boundaries=this,t.ignoreElementEnd=!0,n=new en(t),r=_createForOfIteratorHelper(n),e.prev=4,r.s();case 6:if((i=r.n()).done){e.next=12;break}return o=i.value,e.next=10,o.item;case 10:e.next=6;break;case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(4),r.e(e.t0);case 17:return e.prev=17,r.f(),e.finish(17);case 20:case"end":return e.stop()}}),e,this,[[4,14,17,20]])}))},{key:"getPositions",value:regeneratorRuntime.mark((function e(){var t,n,r,i,o,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=a.length>0&&void 0!==a[0]?a[0]:{}).boundaries=this,n=new en(t),e.next=5,n.position;case 5:r=_createForOfIteratorHelper(n),e.prev=6,r.s();case 8:if((i=r.n()).done){e.next=14;break}return o=i.value,e.next=12,o.nextPosition;case 12:e.next=8;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(6),r.e(e.t0);case 19:return e.prev=19,r.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,this,[[6,16,19,22]])}))},{key:"is",value:function(e){return"range"===e||"view:range"===e}},{key:"isIntersecting",value:function(e){return this.start.isBefore(e.end)&&this.end.isAfter(e.start)}}],[{key:"_createFromParentsAndOffsets",value:function(e,t,n,r){return new this(new tn(e,t),new tn(n,r))}},{key:"_createFromPositionAndShift",value:function(e,t){var n=e,r=e.getShiftedBy(t);return t>0?new this(n,r):new this(r,n)}},{key:"_createIn",value:function(e){return this._createFromParentsAndOffsets(e,0,e,e.childCount)}},{key:"_createOn",value:function(e){var t=e.is("$textProxy")?e.offsetSize:1;return this._createFromPositionAndShift(tn._createBefore(e),t)}}]),e}();function rn(e){return!(!e.item.is("attributeElement")&&!e.item.is("uiElement"))}function on(e){var t,n=0,r=_createForOfIteratorHelper(e);try{for(r.s();!(t=r.n()).done;){t.value;n++}}catch(i){r.e(i)}finally{r.f()}return n}var an=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0;_classCallCheck(this,e),this._ranges=[],this._lastRangeBackward=!1,this._isFake=!1,this._fakeSelectionLabel="",this.setTo(t,n,r)}return _createClass(e,[{key:"isFake",get:function(){return this._isFake}},{key:"fakeSelectionLabel",get:function(){return this._fakeSelectionLabel}},{key:"anchor",get:function(){if(!this._ranges.length)return null;var e=this._ranges[this._ranges.length-1];return(this._lastRangeBackward?e.end:e.start).clone()}},{key:"focus",get:function(){if(!this._ranges.length)return null;var e=this._ranges[this._ranges.length-1];return(this._lastRangeBackward?e.start:e.end).clone()}},{key:"isCollapsed",get:function(){return 1===this.rangeCount&&this._ranges[0].isCollapsed}},{key:"rangeCount",get:function(){return this._ranges.length}},{key:"isBackward",get:function(){return!this.isCollapsed&&this._lastRangeBackward}},{key:"editableElement",get:function(){return this.anchor?this.anchor.editableElement:null}},{key:"getRanges",value:regeneratorRuntime.mark((function e(){var t,n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=_createForOfIteratorHelper(this._ranges),e.prev=1,t.s();case 3:if((n=t.n()).done){e.next=9;break}return r=n.value,e.next=7,r.clone();case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),t.e(e.t0);case 14:return e.prev=14,t.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,this,[[1,11,14,17]])}))},{key:"getFirstRange",value:function(){var e,t=null,n=_createForOfIteratorHelper(this._ranges);try{for(n.s();!(e=n.n()).done;){var r=e.value;t&&!r.start.isBefore(t.start)||(t=r)}}catch(i){n.e(i)}finally{n.f()}return t?t.clone():null}},{key:"getLastRange",value:function(){var e,t=null,n=_createForOfIteratorHelper(this._ranges);try{for(n.s();!(e=n.n()).done;){var r=e.value;t&&!r.end.isAfter(t.end)||(t=r)}}catch(i){n.e(i)}finally{n.f()}return t?t.clone():null}},{key:"getFirstPosition",value:function(){var e=this.getFirstRange();return e?e.start.clone():null}},{key:"getLastPosition",value:function(){var e=this.getLastRange();return e?e.end.clone():null}},{key:"isEqual",value:function(e){if(this.isFake!=e.isFake)return!1;if(this.isFake&&this.fakeSelectionLabel!=e.fakeSelectionLabel)return!1;if(this.rangeCount!=e.rangeCount)return!1;if(0===this.rangeCount)return!0;if(!this.anchor.isEqual(e.anchor)||!this.focus.isEqual(e.focus))return!1;var t,n=_createForOfIteratorHelper(this._ranges);try{for(n.s();!(t=n.n()).done;){var r,i=t.value,o=!1,a=_createForOfIteratorHelper(e._ranges);try{for(a.s();!(r=a.n()).done;){var s=r.value;if(i.isEqual(s)){o=!0;break}}}catch(c){a.e(c)}finally{a.f()}if(!o)return!1}}catch(c){n.e(c)}finally{n.f()}return!0}},{key:"isSimilar",value:function(e){if(this.isBackward!=e.isBackward)return!1;var t=on(this.getRanges());if(t!=on(e.getRanges()))return!1;if(0==t)return!0;var n,r=_createForOfIteratorHelper(this.getRanges());try{for(r.s();!(n=r.n()).done;){var i=n.value;i=i.getTrimmed();var o,a=!1,s=_createForOfIteratorHelper(e.getRanges());try{for(s.s();!(o=s.n()).done;){var c=o.value;if(c=c.getTrimmed(),i.start.isEqual(c.start)&&i.end.isEqual(c.end)){a=!0;break}}}catch(l){s.e(l)}finally{s.f()}if(!a)return!1}}catch(l){r.e(l)}finally{r.f()}return!0}},{key:"getSelectedElement",value:function(){return 1!==this.rangeCount?null:this.getFirstRange().getContainedElement()}},{key:"setTo",value:function(t,n,r){if(null===t)this._setRanges([]),this._setFakeOptions(n);else if(t instanceof e||t instanceof sn)this._setRanges(t.getRanges(),t.isBackward),this._setFakeOptions({fake:t.isFake,label:t.fakeSelectionLabel});else if(t instanceof nn)this._setRanges([t],n&&n.backward),this._setFakeOptions(n);else if(t instanceof tn)this._setRanges([new nn(t)]),this._setFakeOptions(n);else if(t instanceof ct){var i,o=!!r&&!!r.backward;if(void 0===n)throw new Ke.default("view-selection-setto-required-second-parameter",this);i="in"==n?nn._createIn(t):"on"==n?nn._createOn(t):new nn(tn._createAt(t,n)),this._setRanges([i],o),this._setFakeOptions(r)}else{if(!Object(dt.a)(t))throw new Ke.default("view-selection-setto-not-selectable",this);this._setRanges(t,n&&n.backward),this._setFakeOptions(n)}this.fire("change")}},{key:"setFocus",value:function(e,t){if(null===this.anchor)throw new Ke.default("view-selection-setfocus-no-ranges",this);var n=tn._createAt(e,t);if("same"!=n.compareWith(this.focus)){var r=this.anchor;this._ranges.pop(),"before"==n.compareWith(r)?this._addRange(new nn(n,r),!0):this._addRange(new nn(r,n)),this.fire("change")}}},{key:"is",value:function(e){return"selection"===e||"view:selection"===e}},{key:"_setRanges",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e=Array.from(e),this._ranges=[];var n,r=_createForOfIteratorHelper(e);try{for(r.s();!(n=r.n()).done;){var i=n.value;this._addRange(i)}}catch(o){r.e(o)}finally{r.f()}this._lastRangeBackward=!!t}},{key:"_setFakeOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._isFake=!!e.fake,this._fakeSelectionLabel=e.fake&&e.label||""}},{key:"_addRange",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!(e instanceof nn))throw new Ke.default("view-selection-add-range-not-range",this);this._pushRange(e),this._lastRangeBackward=!!t}},{key:"_pushRange",value:function(e){var t,n=_createForOfIteratorHelper(this._ranges);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(e.isIntersecting(r))throw new Ke.default("view-selection-range-intersects",this,{addedRange:e,intersectingRange:r})}}catch(i){n.e(i)}finally{n.f()}this._ranges.push(new nn(e.start,e.end))}}]),e}();Object(u.default)(an,Qe.default);var sn=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0;_classCallCheck(this,e),this._selection=new an,this._selection.delegate("change").to(this),this._selection.setTo(t,n,r)}return _createClass(e,[{key:"isFake",get:function(){return this._selection.isFake}},{key:"fakeSelectionLabel",get:function(){return this._selection.fakeSelectionLabel}},{key:"anchor",get:function(){return this._selection.anchor}},{key:"focus",get:function(){return this._selection.focus}},{key:"isCollapsed",get:function(){return this._selection.isCollapsed}},{key:"rangeCount",get:function(){return this._selection.rangeCount}},{key:"isBackward",get:function(){return this._selection.isBackward}},{key:"editableElement",get:function(){return this._selection.editableElement}},{key:"_ranges",get:function(){return this._selection._ranges}},{key:"getRanges",value:regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(this._selection.getRanges(),"t0",1);case 1:case"end":return e.stop()}}),e,this)}))},{key:"getFirstRange",value:function(){return this._selection.getFirstRange()}},{key:"getLastRange",value:function(){return this._selection.getLastRange()}},{key:"getFirstPosition",value:function(){return this._selection.getFirstPosition()}},{key:"getLastPosition",value:function(){return this._selection.getLastPosition()}},{key:"getSelectedElement",value:function(){return this._selection.getSelectedElement()}},{key:"isEqual",value:function(e){return this._selection.isEqual(e)}},{key:"isSimilar",value:function(e){return this._selection.isSimilar(e)}},{key:"is",value:function(e){return"selection"===e||"documentSelection"==e||"view:selection"==e||"view:documentSelection"==e}},{key:"_setTo",value:function(e,t,n){this._selection.setTo(e,t,n)}},{key:"_setFocus",value:function(e,t){this._selection.setFocus(e,t)}}]),e}();Object(u.default)(sn,Qe.default);var cn=n(19),ln=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i){var o;return _classCallCheck(this,n),(o=t.call(this,e,r)).startRange=i,o._eventPhase="none",o._currentTarget=null,o}return _createClass(n,[{key:"eventPhase",get:function(){return this._eventPhase}},{key:"currentTarget",get:function(){return this._currentTarget}}]),n}(cn.a),un=Symbol("bubbling contexts"),dn={fire:function(e){try{var t=e instanceof cn.a?e:new cn.a(this,e),n=vn(this);if(!n.size)return;for(var r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];if(fn(t,"capturing",this),hn.apply(void 0,[n,"$capture",t].concat(i)))return t.return;var a=t.startRange||this.selection.getFirstRange(),s=a?a.getContainedElement():null,c=!!s&&Boolean(pn(n,s)),l=s||function(e){if(!e)return null;var t=e.start.parent,n=e.end.parent,r=t.getPath(),i=n.getPath();return r.length>i.length?t:n}(a);if(fn(t,"atTarget",l),!c){if(hn.apply(void 0,[n,"$text",t].concat(i)))return t.return;fn(t,"bubbling",l)}for(;l;){if(l.is("rootElement")){if(hn.apply(void 0,[n,"$root",t].concat(i)))return t.return}else if(l.is("element")&&hn.apply(void 0,[n,l.name,t].concat(i)))return t.return;if(hn.apply(void 0,[n,l,t].concat(i)))return t.return;fn(t,"bubbling",l=l.parent)}return fn(t,"bubbling",this),hn.apply(void 0,[n,"$document",t].concat(i)),t.return}catch(e){Ke.default.rethrowUnexpectedError(e,this)}},_addEventListener:function(e,t,n){var r,i=Xe(n.context||"$document"),o=vn(this),a=_createForOfIteratorHelper(i);try{for(a.s();!(r=a.n()).done;){var s=r.value,c=o.get(s);c||(c=Object.create(Qe.default),o.set(s,c)),this.listenTo(c,e,t,n)}}catch(l){a.e(l)}finally{a.f()}},_removeEventListener:function(e,t){var n,r=_createForOfIteratorHelper(vn(this).values());try{for(r.s();!(n=r.n()).done;){var i=n.value;this.stopListening(i,e,t)}}catch(o){r.e(o)}finally{r.f()}}};function fn(e,t,n){e instanceof ln&&(e._eventPhase=t,e._currentTarget=n)}function hn(e,t,n){for(var r="string"==typeof t?e.get(t):pn(e,t),i=arguments.length,o=new Array(i>3?i-3:0),a=3;a<i;a++)o[a-3]=arguments[a];return!!r&&(r.fire.apply(r,[n].concat(o)),n.stop.called)}function pn(e,t){var n,r=_createForOfIteratorHelper(e);try{for(r.s();!(n=r.n()).done;){var i=_slicedToArray(n.value,2),o=i[0],a=i[1];if("function"==typeof o&&o(t))return a}}catch(s){r.e(s)}finally{r.f()}return null}function vn(e){return e[un]||(e[un]=new Map),e[un]}var gn=function(){function e(t){_classCallCheck(this,e),this.selection=new sn,this.roots=new $e.default({idProperty:"rootName"}),this.stylesProcessor=t,this.set("isReadOnly",!1),this.set("isFocused",!1),this.set("isComposing",!1),this._postFixers=new Set}return _createClass(e,[{key:"getRoot",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"main";return this.roots.get(e)}},{key:"registerPostFixer",value:function(e){this._postFixers.add(e)}},{key:"destroy",value:function(){this.roots.map((function(e){return e.destroy()})),this.stopListening()}},{key:"_callPostFixers",value:function(e){var t=!1;do{var n,r=_createForOfIteratorHelper(this._postFixers);try{for(r.s();!(n=r.n()).done;){if(t=(0,n.value)(e))break}}catch(i){r.e(i)}finally{r.f()}}while(t)}}]),e}();Object(u.default)(gn,dn),Object(u.default)(gn,l.default);var mn=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i,o){var a;return _classCallCheck(this,n),(a=t.call(this,e,r,i,o)).getFillerOffset=yn,a._priority=10,a._id=null,a._clonesGroup=null,a}return _createClass(n,[{key:"priority",get:function(){return this._priority}},{key:"id",get:function(){return this._id}},{key:"getElementsWithSameId",value:function(){if(null===this.id)throw new Ke.default("attribute-element-get-elements-with-same-id-no-id",this);return new Set(this._clonesGroup)}},{key:"is",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return t?t===this.name&&("attributeElement"===e||"view:attributeElement"===e||"element"===e||"view:element"===e):"attributeElement"===e||"view:attributeElement"===e||"element"===e||"view:element"===e||"node"===e||"view:node"===e}},{key:"isSimilar",value:function(e){return null!==this.id||null!==e.id?this.id===e.id:_get3(_getPrototypeOf(n.prototype),"isSimilar",this).call(this,e)&&this.priority==e.priority}},{key:"_clone",value:function(e){var t=_get3(_getPrototypeOf(n.prototype),"_clone",this).call(this,e);return t._priority=this._priority,t._id=this._id,t}}]),n}(Gt);function yn(){if(kn(this))return null;for(var e=this.parent;e&&e.is("attributeElement");){if(kn(e)>1)return null;e=e.parent}return!e||kn(e)>1?null:this.childCount}function kn(e){return Array.from(e.getChildren()).filter((function(e){return!e.is("uiElement")})).length}mn.DEFAULT_PRIORITY=10;var _n=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i,o){var a;return _classCallCheck(this,n),(a=t.call(this,e,r,i,o))._isAllowedInsideAttributeElement=!0,a.getFillerOffset=bn,a}return _createClass(n,[{key:"is",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return t?t===this.name&&("emptyElement"===e||"view:emptyElement"===e||"element"===e||"view:element"===e):"emptyElement"===e||"view:emptyElement"===e||"element"===e||"view:element"===e||"node"===e||"view:node"===e}},{key:"_insertChild",value:function(e,t){if(t&&(t instanceof ct||Array.from(t).length>0))throw new Ke.default("view-emptyelement-cannot-add",[this,t])}}]),n}(Gt);function bn(){return null}var wn=navigator.userAgent.toLowerCase(),xn=function(e){return e.indexOf("macintosh")>-1}(wn),Cn=function(e){return!!e.match(/gecko\/\d+/)}(wn),Tn=function(e){return e.indexOf(" applewebkit/")>-1&&-1===e.indexOf("chrome")}(wn),An=function(e){return e.indexOf("android")>-1}(wn),Sn=function(e){return e.indexOf("chrome/")>-1&&e.indexOf("edge/")<0}(wn);!function(){try{0==="\u0107".search(new RegExp("[\\p{L}]","u"))}catch(e){}}();var En={ctrl:"\u2303",cmd:"\u2318",alt:"\u2325",shift:"\u21e7"},In={ctrl:"Ctrl+",alt:"Alt+",shift:"Shift+"},On=function(){for(var e={arrowleft:37,arrowup:38,arrowright:39,arrowdown:40,backspace:8,delete:46,enter:13,space:32,esc:27,tab:9,ctrl:1114112,shift:2228224,alt:4456448,cmd:8912896},t=65;t<=90;t++)e[String.fromCharCode(t).toLowerCase()]=t;for(var n=48;n<=57;n++)e[n-48]=n;for(var r=112;r<=123;r++)e["f"+(r-111)]=r;return e}(),Rn=Object.fromEntries(Object.entries(On).map((function(e){var t=_slicedToArray(e,2),n=t[0];return[t[1],n.charAt(0).toUpperCase()+n.slice(1)]})));function Pn(e){var t;if("string"==typeof e){if(!(t=On[e.toLowerCase()]))throw new Ke.default("keyboard-unknown-key",null,{key:e})}else t=e.keyCode+(e.altKey?On.alt:0)+(e.ctrlKey?On.ctrl:0)+(e.shiftKey?On.shift:0)+(e.metaKey?On.cmd:0);return t}function Mn(e){return"string"==typeof e&&(e=function(e){return e.split("+").map((function(e){return e.trim()}))}(e)),e.map((function(e){return"string"==typeof e?function(e){if(e.endsWith("!"))return Pn(e.slice(0,-1));var t=Pn(e);return xn&&t==On.ctrl?On.cmd:t}(e):e})).reduce((function(e,t){return t+e}),0)}function Nn(e){var t=Mn(e);return Object.entries(xn?En:In).reduce((function(e,n){var r=_slicedToArray(n,2),i=r[0],o=r[1];return 0!=(t&On[i])&&(t&=~On[i],e+=o),e}),"")+(t?Rn[t]:"")}function Dn(e,t){var n="ltr"===t;switch(e){case On.arrowleft:return n?"left":"right";case On.arrowright:return n?"right":"left";case On.arrowup:return"up";case On.arrowdown:return"down"}}function Fn(e,t){var n=Dn(e,t);return"down"===n||"right"===n}var jn=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i,o){var a;return _classCallCheck(this,n),(a=t.call(this,e,r,i,o))._isAllowedInsideAttributeElement=!0,a.getFillerOffset=Ln,a}return _createClass(n,[{key:"is",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return t?t===this.name&&("uiElement"===e||"view:uiElement"===e||"element"===e||"view:element"===e):"uiElement"===e||"view:uiElement"===e||"element"===e||"view:element"===e||"node"===e||"view:node"===e}},{key:"_insertChild",value:function(e,t){if(t&&(t instanceof ct||Array.from(t).length>0))throw new Ke.default("view-uielement-cannot-add",this)}},{key:"render",value:function(e){return this.toDomElement(e)}},{key:"toDomElement",value:function(e){var t,n=e.createElement(this.name),r=_createForOfIteratorHelper(this.getAttributeKeys());try{for(r.s();!(t=r.n()).done;){var i=t.value;n.setAttribute(i,this.getAttribute(i))}}catch(o){r.e(o)}finally{r.f()}return n}}]),n}(Gt);function Ln(){return null}var Vn=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i,o){var a;return _classCallCheck(this,n),(a=t.call(this,e,r,i,o))._isAllowedInsideAttributeElement=!0,a.getFillerOffset=Bn,a}return _createClass(n,[{key:"is",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return t?t===this.name&&("rawElement"===e||"view:rawElement"===e||"element"===e||"view:element"===e):"rawElement"===e||"view:rawElement"===e||e===this.name||e==="view:"+this.name||"element"===e||"view:element"===e||"node"===e||"view:node"===e}},{key:"_insertChild",value:function(e,t){if(t&&(t instanceof ct||Array.from(t).length>0))throw new Ke.default("view-rawelement-cannot-add",[this,t])}}]),n}(Gt);function Bn(){return null}var zn=function(){function e(t,n){_classCallCheck(this,e),this.document=t,this._children=[],n&&this._insertChild(0,n)}return _createClass(e,[{key:Symbol.iterator,value:function(){return this._children[Symbol.iterator]()}},{key:"childCount",get:function(){return this._children.length}},{key:"isEmpty",get:function(){return 0===this.childCount}},{key:"root",get:function(){return this}},{key:"parent",get:function(){return null}},{key:"is",value:function(e){return"documentFragment"===e||"view:documentFragment"===e}},{key:"_appendChild",value:function(e){return this._insertChild(this.childCount,e)}},{key:"getChild",value:function(e){return this._children[e]}},{key:"getChildIndex",value:function(e){return this._children.indexOf(e)}},{key:"getChildren",value:function(){return this._children[Symbol.iterator]()}},{key:"_insertChild",value:function(e,t){this._fireChange("children",this);var n,r=0,i=_createForOfIteratorHelper(function(e,t){return"string"==typeof t?[new lt(e,t)]:(Object(dt.a)(t)||(t=[t]),Array.from(t).map((function(t){return"string"==typeof t?new lt(e,t):t instanceof ut?new lt(e,t.data):t})))}(this.document,t));try{for(i.s();!(n=i.n()).done;){var o=n.value;null!==o.parent&&o._remove(),o.parent=this,this._children.splice(e,0,o),e++,r++}}catch(a){i.e(a)}finally{i.f()}return r}},{key:"_removeChildren",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this._fireChange("children",this);for(var n=e;n<e+t;n++)this._children[n].parent=null;return this._children.splice(e,t)}},{key:"_fireChange",value:function(e,t){this.fire("change:"+e,t)}}]),e}();Object(u.default)(zn,Qe.default);var Hn=function(){function e(t){_classCallCheck(this,e),this.document=t,this._cloneGroups=new Map}return _createClass(e,[{key:"setSelection",value:function(e,t,n){this.document.selection._setTo(e,t,n)}},{key:"setSelectionFocus",value:function(e,t){this.document.selection._setFocus(e,t)}},{key:"createDocumentFragment",value:function(e){return new zn(this.document,e)}},{key:"createText",value:function(e){return new lt(this.document,e)}},{key:"createAttributeElement",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new mn(this.document,e,t);return n.priority&&(r._priority=n.priority),n.id&&(r._id=n.id),r}},{key:"createContainerElement",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new $t(this.document,e,t);return void 0!==n.isAllowedInsideAttributeElement&&(r._isAllowedInsideAttributeElement=n.isAllowedInsideAttributeElement),r}},{key:"createEditableElement",value:function(e,t){var n=new Qt(this.document,e,t);return n._document=this.document,n}},{key:"createEmptyElement",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new _n(this.document,e,t);return void 0!==n.isAllowedInsideAttributeElement&&(r._isAllowedInsideAttributeElement=n.isAllowedInsideAttributeElement),r}},{key:"createUIElement",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=new jn(this.document,e,t);return n&&(i.render=n),void 0!==r.isAllowedInsideAttributeElement&&(i._isAllowedInsideAttributeElement=r.isAllowedInsideAttributeElement),i}},{key:"createRawElement",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=new Vn(this.document,e,t);return i.render=n||function(){},void 0!==r.isAllowedInsideAttributeElement&&(i._isAllowedInsideAttributeElement=r.isAllowedInsideAttributeElement),i}},{key:"setAttribute",value:function(e,t,n){n._setAttribute(e,t)}},{key:"removeAttribute",value:function(e,t){t._removeAttribute(e)}},{key:"addClass",value:function(e,t){t._addClass(e)}},{key:"removeClass",value:function(e,t){t._removeClass(e)}},{key:"setStyle",value:function(e,t,n){w(e)&&void 0===n&&(n=t),n._setStyle(e,t)}},{key:"removeStyle",value:function(e,t){t._removeStyle(e)}},{key:"setCustomProperty",value:function(e,t,n){n._setCustomProperty(e,t)}},{key:"removeCustomProperty",value:function(e,t){return t._removeCustomProperty(e)}},{key:"breakAttributes",value:function(e){return e instanceof tn?this._breakAttributes(e):this._breakAttributesRange(e)}},{key:"breakContainer",value:function(e){var t=e.parent;if(!t.is("containerElement"))throw new Ke.default("view-writer-break-non-container-element",this.document);if(!t.parent)throw new Ke.default("view-writer-break-root",this.document);if(e.isAtStart)return tn._createBefore(t);if(!e.isAtEnd){var n=t._clone(!1);this.insert(tn._createAfter(t),n);var r=new nn(e,tn._createAt(t,"end")),i=new tn(n,0);this.move(r,i)}return tn._createAfter(t)}},{key:"mergeAttributes",value:function(e){var t=e.offset,n=e.parent;if(n.is("$text"))return e;if(n.is("attributeElement")&&0===n.childCount){var r=n.parent,i=n.index;return n._remove(),this._removeFromClonedElementsGroup(n),this.mergeAttributes(new tn(r,i))}var o=n.getChild(t-1),a=n.getChild(t);if(!o||!a)return e;if(o.is("$text")&&a.is("$text"))return Gn(o,a);if(o.is("attributeElement")&&a.is("attributeElement")&&o.isSimilar(a)){var s=o.childCount;return o._appendChild(a.getChildren()),a._remove(),this._removeFromClonedElementsGroup(a),this.mergeAttributes(new tn(o,s))}return e}},{key:"mergeContainers",value:function(e){var t=e.nodeBefore,n=e.nodeAfter;if(!(t&&n&&t.is("containerElement")&&n.is("containerElement")))throw new Ke.default("view-writer-merge-containers-invalid-position",this.document);var r=t.getChild(t.childCount-1),i=tn._createAt(r instanceof lt?r:t,"end");return this.move(nn._createIn(n),tn._createAt(t,"end")),this.remove(nn._createOn(n)),i}},{key:"insert",value:function(e,t){!function e(t,n){var r,i=_createForOfIteratorHelper(t);try{var o=function(){var t=r.value;if(!Jn.some((function(e){return t instanceof e})))throw new Ke.default("view-writer-insert-invalid-node-type",n);t.is("$text")||e(t.getChildren(),n)};for(i.s();!(r=i.n()).done;)o()}catch(a){i.e(a)}finally{i.f()}}(t=Object(dt.a)(t)?_toConsumableArray(t):[t],this.document);var n,r=t.reduce((function(e,t){var n=e[e.length-1],r=!(t.is("uiElement")&&t.isAllowedInsideAttributeElement);return n&&n.breakAttributes==r?n.nodes.push(t):e.push({breakAttributes:r,nodes:[t]}),e}),[]),i=null,o=e,a=_createForOfIteratorHelper(r);try{for(a.s();!(n=a.n()).done;){var s=n.value,c=s.nodes,l=s.breakAttributes,u=this._insertNodes(o,c,l);i||(i=u.start),o=u.end}}catch(d){a.e(d)}finally{a.f()}return i?new nn(i,o):new nn(e)}},{key:"remove",value:function(e){var t=e instanceof nn?e:nn._createOn(e);if(Kn(t,this.document),t.isCollapsed)return new zn(this.document);var n,r=this._breakAttributesRange(t,!0),i=r.start,o=r.end,a=i.parent._removeChildren(i.offset,o.offset-i.offset),s=_createForOfIteratorHelper(a);try{for(s.s();!(n=s.n()).done;){var c=n.value;this._removeFromClonedElementsGroup(c)}}catch(u){s.e(u)}finally{s.f()}var l=this.mergeAttributes(i);return t.start=l,t.end=l.clone(),new zn(this.document,a)}},{key:"clear",value:function(e,t){Kn(e,this.document);var n,r=_createForOfIteratorHelper(e.getWalker({direction:"backward",ignoreElementEnd:!0}));try{for(r.s();!(n=r.n()).done;){var i=n.value,o=i.item,a=void 0;if(o.is("element")&&t.isSimilar(o))a=nn._createOn(o);else if(!i.nextPosition.isAfter(e.start)&&o.is("$textProxy")){var s=o.getAncestors().find((function(e){return e.is("element")&&t.isSimilar(e)}));s&&(a=nn._createIn(s))}a&&(a.end.isAfter(e.end)&&(a.end=e.end),a.start.isBefore(e.start)&&(a.start=e.start),this.remove(a))}}catch(c){r.e(c)}finally{r.f()}}},{key:"move",value:function(e,t){var n;if(t.isAfter(e.end)){var r=(t=this._breakAttributes(t,!0)).parent,i=r.childCount;e=this._breakAttributesRange(e,!0),n=this.remove(e),t.offset+=r.childCount-i}else n=this.remove(e);return this.insert(t,n)}},{key:"wrap",value:function(e,t){if(!(t instanceof mn))throw new Ke.default("view-writer-wrap-invalid-attribute",this.document);if(Kn(e,this.document),e.isCollapsed){var n=e.start;n.parent.is("element")&&!function(e){return Array.from(e.getChildren()).some((function(e){return!e.is("uiElement")}))}(n.parent)&&(n=n.getLastMatchingPosition((function(e){return e.item.is("uiElement")}))),n=this._wrapPosition(n,t);var r=this.document.selection;return r.isCollapsed&&r.getFirstPosition().isEqual(e.start)&&this.setSelection(n),new nn(n)}return this._wrapRange(e,t)}},{key:"unwrap",value:function(e,t){if(!(t instanceof mn))throw new Ke.default("view-writer-unwrap-invalid-attribute",this.document);if(Kn(e,this.document),e.isCollapsed)return e;var n=this._breakAttributesRange(e,!0),r=n.start,i=n.end,o=this._unwrapChildren(r.parent,r.offset,i.offset,t),a=this.mergeAttributes(o.start);a.isEqual(o.start)||o.end.offset--;var s=this.mergeAttributes(o.end);return new nn(a,s)}},{key:"rename",value:function(e,t){var n=new $t(this.document,e,t.getAttributes());return this.insert(tn._createAfter(t),n),this.move(nn._createIn(t),tn._createAt(n,0)),this.remove(nn._createOn(t)),n}},{key:"clearClonedElementsGroup",value:function(e){this._cloneGroups.delete(e)}},{key:"createPositionAt",value:function(e,t){return tn._createAt(e,t)}},{key:"createPositionAfter",value:function(e){return tn._createAfter(e)}},{key:"createPositionBefore",value:function(e){return tn._createBefore(e)}},{key:"createRange",value:function(e,t){return new nn(e,t)}},{key:"createRangeOn",value:function(e){return nn._createOn(e)}},{key:"createRangeIn",value:function(e){return nn._createIn(e)}},{key:"createSelection",value:function(e,t,n){return new an(e,t,n)}},{key:"_insertNodes",value:function(e,t,n){var r,i;if(!(r=n?Un(e):e.parent.is("$text")?e.parent.parent:e.parent))throw new Ke.default("view-writer-invalid-position-container",this.document);i=n?this._breakAttributes(e,!0):e.parent.is("$text")?Yn(e):e;var o,a=r._insertChild(i.offset,t),s=_createForOfIteratorHelper(t);try{for(s.s();!(o=s.n()).done;){var c=o.value;this._addToClonedElementsGroup(c)}}catch(f){s.e(f)}finally{s.f()}var l=i.getShiftedBy(a),u=this.mergeAttributes(i);u.isEqual(i)||l.offset--;var d=this.mergeAttributes(l);return new nn(u,d)}},{key:"_wrapChildren",value:function(e,t,n,r){for(var i=t,o=[];i<n;){var a=e.getChild(i),s=a.is("$text"),c=a.is("attributeElement"),l=a.isAllowedInsideAttributeElement;if(c&&this._wrapAttributeElement(r,a))o.push(new tn(e,i));else if(s||l||c&&Wn(r,a)){var u=r._clone();a._remove(),u._appendChild(a),e._insertChild(i,u),this._addToClonedElementsGroup(u),o.push(new tn(e,i))}else c&&this._wrapChildren(a,0,a.childCount,r);i++}for(var d=0,f=0,h=o;f<h.length;f++){var p=h[f];p.offset-=d,p.offset!=t&&(this.mergeAttributes(p).isEqual(p)||(d++,n--))}return nn._createFromParentsAndOffsets(e,t,e,n)}},{key:"_unwrapChildren",value:function(e,t,n,r){for(var i=t,o=[];i<n;){var a=e.getChild(i);if(a.is("attributeElement"))if(a.isSimilar(r)){var s=a.getChildren(),c=a.childCount;a._remove(),e._insertChild(i,s),this._removeFromClonedElementsGroup(a),o.push(new tn(e,i),new tn(e,i+c)),i+=c,n+=c-1}else this._unwrapAttributeElement(r,a)?(o.push(new tn(e,i),new tn(e,i+1)),i++):(this._unwrapChildren(a,0,a.childCount,r),i++);else i++}for(var l=0,u=0,d=o;u<d.length;u++){var f=d[u];f.offset-=l,f.offset!=t&&f.offset!=n&&(this.mergeAttributes(f).isEqual(f)||(l++,n--))}return nn._createFromParentsAndOffsets(e,t,e,n)}},{key:"_wrapRange",value:function(e,t){var n=this._breakAttributesRange(e,!0),r=n.start,i=n.end,o=this._wrapChildren(r.parent,r.offset,i.offset,t),a=this.mergeAttributes(o.start);a.isEqual(o.start)||o.end.offset--;var s=this.mergeAttributes(o.end);return new nn(a,s)}},{key:"_wrapPosition",value:function(e,t){if(t.isSimilar(e.parent))return qn(e.clone());e.parent.is("$text")&&(e=Yn(e));var n=this.createAttributeElement();n._priority=Number.POSITIVE_INFINITY,n.isSimilar=function(){return!1},e.parent._insertChild(e.offset,n);var r=new nn(e,e.getShiftedBy(1));this.wrap(r,t);var i=new tn(n.parent,n.index);n._remove();var o=i.nodeBefore,a=i.nodeAfter;return o instanceof lt&&a instanceof lt?Gn(o,a):qn(i)}},{key:"_wrapAttributeElement",value:function(e,t){if(!Qn(e,t))return!1;if(e.name!==t.name||e.priority!==t.priority)return!1;var n,r=_createForOfIteratorHelper(e.getAttributeKeys());try{for(r.s();!(n=r.n()).done;){var i=n.value;if("class"!==i&&"style"!==i&&t.hasAttribute(i)&&t.getAttribute(i)!==e.getAttribute(i))return!1}}catch(m){r.e(m)}finally{r.f()}var o,a=_createForOfIteratorHelper(e.getStyleNames());try{for(a.s();!(o=a.n()).done;){var s=o.value;if(t.hasStyle(s)&&t.getStyle(s)!==e.getStyle(s))return!1}}catch(m){a.e(m)}finally{a.f()}var c,l=_createForOfIteratorHelper(e.getAttributeKeys());try{for(l.s();!(c=l.n()).done;){var u=c.value;"class"!==u&&"style"!==u&&(t.hasAttribute(u)||this.setAttribute(u,e.getAttribute(u),t))}}catch(m){l.e(m)}finally{l.f()}var d,f=_createForOfIteratorHelper(e.getStyleNames());try{for(f.s();!(d=f.n()).done;){var h=d.value;t.hasStyle(h)||this.setStyle(h,e.getStyle(h),t)}}catch(m){f.e(m)}finally{f.f()}var p,v=_createForOfIteratorHelper(e.getClassNames());try{for(v.s();!(p=v.n()).done;){var g=p.value;t.hasClass(g)||this.addClass(g,t)}}catch(m){v.e(m)}finally{v.f()}return!0}},{key:"_unwrapAttributeElement",value:function(e,t){if(!Qn(e,t))return!1;if(e.name!==t.name||e.priority!==t.priority)return!1;var n,r=_createForOfIteratorHelper(e.getAttributeKeys());try{for(r.s();!(n=r.n()).done;){var i=n.value;if("class"!==i&&"style"!==i&&(!t.hasAttribute(i)||t.getAttribute(i)!==e.getAttribute(i)))return!1}}catch(d){r.e(d)}finally{r.f()}if(!t.hasClass.apply(t,_toConsumableArray(e.getClassNames())))return!1;var o,a=_createForOfIteratorHelper(e.getStyleNames());try{for(a.s();!(o=a.n()).done;){var s=o.value;if(!t.hasStyle(s)||t.getStyle(s)!==e.getStyle(s))return!1}}catch(d){a.e(d)}finally{a.f()}var c,l=_createForOfIteratorHelper(e.getAttributeKeys());try{for(l.s();!(c=l.n()).done;){var u=c.value;"class"!==u&&"style"!==u&&this.removeAttribute(u,t)}}catch(d){l.e(d)}finally{l.f()}return this.removeClass(Array.from(e.getClassNames()),t),this.removeStyle(Array.from(e.getStyleNames()),t),!0}},{key:"_breakAttributesRange",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.start,r=e.end;if(Kn(e,this.document),e.isCollapsed){var i=this._breakAttributes(e.start,t);return new nn(i,i)}var o=this._breakAttributes(r,t),a=o.parent.childCount,s=this._breakAttributes(n,t);return o.offset+=o.parent.childCount-a,new nn(s,o)}},{key:"_breakAttributes",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.offset,r=e.parent;if(e.parent.is("emptyElement"))throw new Ke.default("view-writer-cannot-break-empty-element",this.document);if(e.parent.is("uiElement"))throw new Ke.default("view-writer-cannot-break-ui-element",this.document);if(e.parent.is("rawElement"))throw new Ke.default("view-writer-cannot-break-raw-element",this.document);if(!t&&r.is("$text")&&$n(r.parent))return e.clone();if($n(r))return e.clone();if(r.is("$text"))return this._breakAttributes(Yn(e),t);if(n==r.childCount){var i=new tn(r.parent,r.index+1);return this._breakAttributes(i,t)}if(0===n){var o=new tn(r.parent,r.index);return this._breakAttributes(o,t)}var a=r.index+1,s=r._clone();r.parent._insertChild(a,s),this._addToClonedElementsGroup(s);var c=r._removeChildren(n,r.childCount-n);s._appendChild(c);var l=new tn(r.parent,a);return this._breakAttributes(l,t)}},{key:"_addToClonedElementsGroup",value:function(e){if(e.root.is("rootElement")){if(e.is("element")){var t,n=_createForOfIteratorHelper(e.getChildren());try{for(n.s();!(t=n.n()).done;){var r=t.value;this._addToClonedElementsGroup(r)}}catch(a){n.e(a)}finally{n.f()}}var i=e.id;if(i){var o=this._cloneGroups.get(i);o||(o=new Set,this._cloneGroups.set(i,o)),o.add(e),e._clonesGroup=o}}}},{key:"_removeFromClonedElementsGroup",value:function(e){if(e.is("element")){var t,n=_createForOfIteratorHelper(e.getChildren());try{for(n.s();!(t=n.n()).done;){var r=t.value;this._removeFromClonedElementsGroup(r)}}catch(a){n.e(a)}finally{n.f()}}var i=e.id;if(i){var o=this._cloneGroups.get(i);o&&o.delete(e)}}}]),e}();function Un(e){for(var t=e.parent;!$n(t);){if(!t)return;t=t.parent}return t}function Wn(e,t){return e.priority<t.priority||!(e.priority>t.priority)&&e.getIdentity()<t.getIdentity()}function qn(e){var t=e.nodeBefore;if(t&&t.is("$text"))return new tn(t,t.data.length);var n=e.nodeAfter;return n&&n.is("$text")?new tn(n,0):e}function Yn(e){if(e.offset==e.parent.data.length)return new tn(e.parent.parent,e.parent.index+1);if(0===e.offset)return new tn(e.parent.parent,e.parent.index);var t=e.parent.data.slice(e.offset);return e.parent._data=e.parent.data.slice(0,e.offset),e.parent.parent._insertChild(e.parent.index+1,new lt(e.root.document,t)),new tn(e.parent.parent,e.parent.index+1)}function Gn(e,t){var n=e.data.length;return e._data+=t.data,t._remove(),new tn(e,n)}var Jn=[lt,mn,$t,_n,Vn,jn];function $n(e){return e&&(e.is("containerElement")||e.is("documentFragment"))}function Kn(e,t){var n=Un(e.start),r=Un(e.end);if(!n||!r||n!==r)throw new Ke.default("view-writer-invalid-range-container",t)}function Qn(e,t){return null===e.id&&null===t.id}function Zn(e){return"[object Text]"==Object.prototype.toString.call(e)}var Xn=function(e){return e.createTextNode("\xa0")},er=function(e){var t=e.createElement("span");return t.dataset.ckeFiller=!0,t.innerHTML="\xa0",t},tr=function(e){var t=e.createElement("br");return t.dataset.ckeFiller=!0,t},nr="\u2060".repeat(7);function rr(e){return Zn(e)&&e.data.substr(0,7)===nr}function ir(e){return 7==e.data.length&&rr(e)}function or(e){return rr(e)?e.data.slice(7):e.data}function ar(e,t){if(t.keyCode==On.arrowleft){var n=t.domTarget.ownerDocument.defaultView.getSelection();if(1==n.rangeCount&&n.getRangeAt(0).collapsed){var r=n.getRangeAt(0).startContainer,i=n.getRangeAt(0).startOffset;rr(r)&&i<=7&&n.collapse(r,0)}}}function sr(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];n=n||function(e,t){return e===t},Array.isArray(e)||(e=Array.prototype.slice.call(e)),Array.isArray(t)||(t=Array.prototype.slice.call(t));var i=function(e,t,n){var r=cr(e,t,n);if(-1===r)return{firstIndex:-1,lastIndexOld:-1,lastIndexNew:-1};var i=cr(lr(e,r),lr(t,r),n);return{firstIndex:r,lastIndexOld:e.length-i,lastIndexNew:t.length-i}}(e,t,n);return r?function(e,t){var n=e.firstIndex,r=e.lastIndexOld,i=e.lastIndexNew;if(-1===n)return Array(t).fill("equal");var o=[];return n>0&&(o=o.concat(Array(n).fill("equal"))),i-n>0&&(o=o.concat(Array(i-n).fill("insert"))),r-n>0&&(o=o.concat(Array(r-n).fill("delete"))),i<t&&(o=o.concat(Array(t-i).fill("equal"))),o}(i,t.length):function(e,t){var n=[],r=t.firstIndex,i=t.lastIndexOld,o=t.lastIndexNew;return o-r>0&&n.push({index:r,type:"insert",values:e.slice(r,o)}),i-r>0&&n.push({index:r+(o-r),type:"delete",howMany:i-r}),n}(t,i)}function cr(e,t,n){for(var r=0;r<Math.max(e.length,t.length);r++)if(void 0===e[r]||void 0===t[r]||!n(e[r],t[r]))return r;return-1}function lr(e,t){return e.slice(t).reverse()}function ur(e,t,n){n=n||function(e,t){return e===t};var r,i,o=e.length,a=t.length;if(o>200||a>200||o+a>300)return ur.fastDiff(e,t,n,!0);if(a<o){var s=e;e=t,t=s,r="delete",i="insert"}else r="insert",i="delete";var c=e.length,l=t.length,u=l-c,d={},f={};function h(o){var a=(void 0!==f[o-1]?f[o-1]:-1)+1,s=void 0!==f[o+1]?f[o+1]:-1,u=a>s?-1:1;d[o+u]&&(d[o]=d[o+u].slice(0)),d[o]||(d[o]=[]),d[o].push(a>s?r:i);for(var h=Math.max(a,s),p=h-o;p<c&&h<l&&n(e[p],t[h]);)p++,h++,d[o].push("equal");return h}var p,v=0;do{for(p=-v;p<u;p++)f[p]=h(p);for(p=u+v;p>u;p--)f[p]=h(p);f[u]=h(u),v++}while(f[u]!==l);return d[u].slice(1)}function dr(e,t,n){e.insertBefore(n,e.childNodes[t]||null)}function fr(e){var t=e.parentNode;t&&t.removeChild(e)}function hr(e){if(e){if(e.defaultView)return e instanceof e.defaultView.Document;if(e.ownerDocument&&e.ownerDocument.defaultView)return e instanceof e.ownerDocument.defaultView.Node}return!1}ur.fastDiff=sr;var pr=function(){function e(t,n){_classCallCheck(this,e),this.domDocuments=new Set,this.domConverter=t,this.markedAttributes=new Set,this.markedChildren=new Set,this.markedTexts=new Set,this.selection=n,this.isFocused=!1,this._inlineFiller=null,this._fakeSelectionContainer=null}return _createClass(e,[{key:"markToSync",value:function(e,t){if("text"===e)this.domConverter.mapViewToDom(t.parent)&&this.markedTexts.add(t);else{if(!this.domConverter.mapViewToDom(t))return;if("attributes"===e)this.markedAttributes.add(t);else{if("children"!==e)throw new Ke.default("view-renderer-unknown-type",this);this.markedChildren.add(t)}}}},{key:"render",value:function(){var e,t,n=_createForOfIteratorHelper(this.markedChildren);try{for(n.s();!(t=n.n()).done;){var r=t.value;this._updateChildrenMappings(r)}}catch(v){n.e(v)}finally{n.f()}this._inlineFiller&&!this._isSelectionInInlineFiller()&&this._removeInlineFiller(),this._inlineFiller?e=this._getInlineFillerPosition():this._needsInlineFillerAtSelection()&&(e=this.selection.getFirstPosition(),this.markedChildren.add(e.parent));var i,o=_createForOfIteratorHelper(this.markedAttributes);try{for(o.s();!(i=o.n()).done;){var a=i.value;this._updateAttrs(a)}}catch(v){o.e(v)}finally{o.f()}var s,c=_createForOfIteratorHelper(this.markedChildren);try{for(c.s();!(s=c.n()).done;){var l=s.value;this._updateChildren(l,{inlineFillerPosition:e})}}catch(v){c.e(v)}finally{c.f()}var u,d=_createForOfIteratorHelper(this.markedTexts);try{for(d.s();!(u=d.n()).done;){var f=u.value;!this.markedChildren.has(f.parent)&&this.domConverter.mapViewToDom(f.parent)&&this._updateText(f,{inlineFillerPosition:e})}}catch(v){d.e(v)}finally{d.f()}if(e){var h=this.domConverter.viewPositionToDom(e),p=h.parent.ownerDocument;this._inlineFiller=rr(h.parent)?h.parent:vr(p,h.parent,h.offset)}else this._inlineFiller=null;this._updateFocus(),this._updateSelection(),this.markedTexts.clear(),this.markedAttributes.clear(),this.markedChildren.clear()}},{key:"_updateChildrenMappings",value:function(e){var t=this.domConverter.mapViewToDom(e);if(t){var n=this.domConverter.mapViewToDom(e).childNodes,r=Array.from(this.domConverter.viewChildrenToDom(e,t.ownerDocument,{withChildren:!1})),i=this._diffNodeLists(n,r),o=this._findReplaceActions(i,n,r);if(-1!==o.indexOf("replace")){var a,s={equal:0,insert:0,delete:0},c=_createForOfIteratorHelper(o);try{for(c.s();!(a=c.n()).done;){var l=a.value;if("replace"===l){var u=s.equal+s.insert,d=s.equal+s.delete,f=e.getChild(u);!f||f.is("uiElement")||f.is("rawElement")||this._updateElementMappings(f,n[d]),fr(r[u]),s.equal++}else s[l]++}}catch(h){c.e(h)}finally{c.f()}}}}},{key:"_updateElementMappings",value:function(e,t){this.domConverter.unbindDomElement(t),this.domConverter.bindElements(t,e),this.markedChildren.add(e),this.markedAttributes.add(e)}},{key:"_getInlineFillerPosition",value:function(){var e=this.selection.getFirstPosition();return e.parent.is("$text")?tn._createBefore(this.selection.getFirstPosition().parent):e}},{key:"_isSelectionInInlineFiller",value:function(){if(1!=this.selection.rangeCount||!this.selection.isCollapsed)return!1;var e=this.selection.getFirstPosition(),t=this.domConverter.viewPositionToDom(e);return!!(t&&Zn(t.parent)&&rr(t.parent))}},{key:"_removeInlineFiller",value:function(){var e=this._inlineFiller;if(!rr(e))throw new Ke.default("view-renderer-filler-was-lost",this);ir(e)?e.parentNode.removeChild(e):e.data=e.data.substr(7),this._inlineFiller=null}},{key:"_needsInlineFillerAtSelection",value:function(){if(1!=this.selection.rangeCount||!this.selection.isCollapsed)return!1;var e=this.selection.getFirstPosition(),t=e.parent,n=e.offset;return!(!this.domConverter.mapViewToDom(t.root)||!t.is("element")||!function(e){if("false"==e.getAttribute("contenteditable"))return!1;var t=e.findAncestor((function(e){return e.hasAttribute("contenteditable")}));return!t||"true"==t.getAttribute("contenteditable")}(t)||n===t.getFillerOffset()||e.nodeBefore instanceof lt||e.nodeAfter instanceof lt)}},{key:"_updateText",value:function(e,t){var n=this.domConverter.findCorrespondingDomText(e),r=this.domConverter.viewToDom(e,n.ownerDocument),i=n.data,o=r.data,a=t.inlineFillerPosition;if(a&&a.parent==e.parent&&a.offset==e.index&&(o=nr+o),i!=o){var s,c=_createForOfIteratorHelper(sr(i,o));try{for(c.s();!(s=c.n()).done;){var l=s.value;"insert"===l.type?n.insertData(l.index,l.values.join("")):n.deleteData(l.index,l.howMany)}}catch(u){c.e(u)}finally{c.f()}}}},{key:"_updateAttrs",value:function(e){var t=this.domConverter.mapViewToDom(e);if(t){var n,r=Array.from(t.attributes).map((function(e){return e.name})),i=_createForOfIteratorHelper(e.getAttributeKeys());try{for(i.s();!(n=i.n()).done;){var o=n.value;t.setAttribute(o,e.getAttribute(o))}}catch(l){i.e(l)}finally{i.f()}var a,s=_createForOfIteratorHelper(r);try{for(s.s();!(a=s.n()).done;){var c=a.value;e.hasAttribute(c)||t.removeAttribute(c)}}catch(l){s.e(l)}finally{s.f()}}}},{key:"_updateChildren",value:function(e,t){var n=this.domConverter.mapViewToDom(e);if(n){var r=t.inlineFillerPosition,i=this.domConverter.mapViewToDom(e).childNodes,o=Array.from(this.domConverter.viewChildrenToDom(e,n.ownerDocument,{bind:!0,inlineFillerPosition:r}));r&&r.parent===e&&vr(n.ownerDocument,o,r.offset);var a,s=this._diffNodeLists(i,o),c=0,l=new Set,u=_createForOfIteratorHelper(s);try{for(u.s();!(a=u.n()).done;){var d=a.value;"delete"===d?(l.add(i[c]),fr(i[c])):"equal"===d&&c++}}catch(y){u.e(y)}finally{u.f()}c=0;var f,h=_createForOfIteratorHelper(s);try{for(h.s();!(f=h.n()).done;){var p=f.value;"insert"===p?(dr(n,c,o[c]),c++):"equal"===p&&(this._markDescendantTextToSync(this.domConverter.domToView(o[c])),c++)}}catch(y){h.e(y)}finally{h.f()}var v,g=_createForOfIteratorHelper(l);try{for(g.s();!(v=g.n()).done;){var m=v.value;m.parentNode||this.domConverter.unbindDomElement(m)}}catch(y){g.e(y)}finally{g.f()}}}},{key:"_diffNodeLists",value:function(e,t){return ur(e=function(e,t){var n=Array.from(e);return 0!=n.length&&t?(n[n.length-1]==t&&n.pop(),n):n}(e,this._fakeSelectionContainer),t,(function(e,t,n){return t===n||(Zn(t)&&Zn(n)?t.data===n.data:!(!e.isBlockFiller(t)||!e.isBlockFiller(n)))}).bind(null,this.domConverter))}},{key:"_findReplaceActions",value:function(e,t,n){if(-1===e.indexOf("insert")||-1===e.indexOf("delete"))return e;var r,i=[],o=[],a=[],s={equal:0,insert:0,delete:0},c=_createForOfIteratorHelper(e);try{for(c.s();!(r=c.n()).done;){var l=r.value;"insert"===l?a.push(n[s.equal+s.insert]):"delete"===l?o.push(t[s.equal+s.delete]):((i=i.concat(ur(o,a,gr).map((function(e){return"equal"===e?"replace":e})))).push("equal"),o=[],a=[]),s[l]++}}catch(u){c.e(u)}finally{c.f()}return i.concat(ur(o,a,gr).map((function(e){return"equal"===e?"replace":e})))}},{key:"_markDescendantTextToSync",value:function(e){if(e)if(e.is("$text"))this.markedTexts.add(e);else if(e.is("element")){var t,n=_createForOfIteratorHelper(e.getChildren());try{for(n.s();!(t=n.n()).done;){var r=t.value;this._markDescendantTextToSync(r)}}catch(i){n.e(i)}finally{n.f()}}}},{key:"_updateSelection",value:function(){if(0===this.selection.rangeCount)return this._removeDomSelection(),void this._removeFakeSelection();var e=this.domConverter.mapViewToDom(this.selection.editableElement);this.isFocused&&e&&(this.selection.isFake?this._updateFakeSelection(e):(this._removeFakeSelection(),this._updateDomSelection(e)))}},{key:"_updateFakeSelection",value:function(e){var t=e.ownerDocument;this._fakeSelectionContainer||(this._fakeSelectionContainer=function(e){var t=e.createElement("div");return t.className="ck-fake-selection-container",Object.assign(t.style,{position:"fixed",top:0,left:"-9999px",width:"42px"}),t.textContent="\xa0",t}(t));var n=this._fakeSelectionContainer;if(this.domConverter.bindFakeSelection(n,this.selection),this._fakeSelectionNeedsUpdate(e)){n.parentElement&&n.parentElement==e||e.appendChild(n),n.textContent=this.selection.fakeSelectionLabel||"\xa0";var r=t.getSelection(),i=t.createRange();r.removeAllRanges(),i.selectNodeContents(n),r.addRange(i)}}},{key:"_updateDomSelection",value:function(e){var t=e.ownerDocument.defaultView.getSelection();if(this._domSelectionNeedsUpdate(t)){var n=this.domConverter.viewPositionToDom(this.selection.anchor),r=this.domConverter.viewPositionToDom(this.selection.focus);t.collapse(n.parent,n.offset),t.extend(r.parent,r.offset),Cn&&function(e,t){var n=e.parent;if(n.nodeType==Node.ELEMENT_NODE&&e.offset==n.childNodes.length-1){var r=n.childNodes[e.offset];r&&"BR"==r.tagName&&t.addRange(t.getRangeAt(0))}}(r,t)}}},{key:"_domSelectionNeedsUpdate",value:function(e){if(!this.domConverter.isDomSelectionCorrect(e))return!0;var t=e&&this.domConverter.domSelectionToView(e);return!(t&&this.selection.isEqual(t)||!this.selection.isCollapsed&&this.selection.isSimilar(t))}},{key:"_fakeSelectionNeedsUpdate",value:function(e){var t=this._fakeSelectionContainer,n=e.ownerDocument.getSelection();return!t||t.parentElement!==e||n.anchorNode!==t&&!t.contains(n.anchorNode)||t.textContent!==this.selection.fakeSelectionLabel}},{key:"_removeDomSelection",value:function(){var e,t=_createForOfIteratorHelper(this.domDocuments);try{for(t.s();!(e=t.n()).done;){var n=e.value;if(n.getSelection().rangeCount){var r=n.activeElement,i=this.domConverter.mapDomToView(r);r&&i&&n.getSelection().removeAllRanges()}}}catch(o){t.e(o)}finally{t.f()}}},{key:"_removeFakeSelection",value:function(){var e=this._fakeSelectionContainer;e&&e.remove()}},{key:"_updateFocus",value:function(){if(this.isFocused){var e=this.selection.editableElement;e&&this.domConverter.focus(e)}}}]),e}();function vr(e,t,n){var r=t instanceof Array?t:t.childNodes,i=r[n];if(Zn(i))return i.data=nr+i.data,i;var o=e.createTextNode(nr);return Array.isArray(t)?r.splice(n,0,o):dr(t,n,o),o}function gr(e,t){return hr(e)&&hr(t)&&!Zn(e)&&!Zn(t)&&e.nodeType!==Node.COMMENT_NODE&&t.nodeType!==Node.COMMENT_NODE&&e.tagName.toLowerCase()===t.tagName.toLowerCase()}Object(u.default)(pr,l.default);var mr={window:window,document:document};function yr(e){for(var t=0;e.previousSibling;)e=e.previousSibling,t++;return t}function kr(e){for(var t=[];e&&e.nodeType!=Node.DOCUMENT_NODE;)t.unshift(e),e=e.parentNode;return t}var _r=tr(document),br=Xn(document),wr=er(document),xr=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_classCallCheck(this,e),this.document=t,this.blockFillerMode=n.blockFillerMode||"br",this.preElements=["pre"],this.blockElements=["p","div","h1","h2","h3","h4","h5","h6","li","dd","dt","figcaption","td","th"],this._domToViewMapping=new WeakMap,this._viewToDomMapping=new WeakMap,this._fakeSelectionMapping=new WeakMap,this._rawContentElementMatcher=new ht,this._encounteredRawContentDomNodes=new WeakSet}return _createClass(e,[{key:"bindFakeSelection",value:function(e,t){this._fakeSelectionMapping.set(e,new an(t))}},{key:"fakeSelectionToView",value:function(e){return this._fakeSelectionMapping.get(e)}},{key:"bindElements",value:function(e,t){this._domToViewMapping.set(e,t),this._viewToDomMapping.set(t,e)}},{key:"unbindDomElement",value:function(e){var t=this._domToViewMapping.get(e);if(t){this._domToViewMapping.delete(e),this._viewToDomMapping.delete(t);var n,r=_createForOfIteratorHelper(e.childNodes);try{for(r.s();!(n=r.n()).done;){var i=n.value;this.unbindDomElement(i)}}catch(o){r.e(o)}finally{r.f()}}}},{key:"bindDocumentFragments",value:function(e,t){this._domToViewMapping.set(e,t),this._viewToDomMapping.set(t,e)}},{key:"viewToDom",value:function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e.is("$text")){var i=this._processDataFromViewText(e);return t.createTextNode(i)}if(this.mapViewToDom(e))return this.mapViewToDom(e);if(e.is("documentFragment"))n=t.createDocumentFragment(),r.bind&&this.bindDocumentFragments(n,e);else{if(e.is("uiElement"))return n=e.render(t),r.bind&&this.bindElements(n,e),n;n=e.hasAttribute("xmlns")?t.createElementNS(e.getAttribute("xmlns"),e.name):t.createElement(e.name),e.is("rawElement")&&e.render(n),r.bind&&this.bindElements(n,e);var o,a=_createForOfIteratorHelper(e.getAttributeKeys());try{for(a.s();!(o=a.n()).done;){var s=o.value;n.setAttribute(s,e.getAttribute(s))}}catch(d){a.e(d)}finally{a.f()}}if(!1!==r.withChildren){var c,l=_createForOfIteratorHelper(this.viewChildrenToDom(e,t,r));try{for(l.s();!(c=l.n()).done;){var u=c.value;n.appendChild(u)}}catch(d){l.e(d)}finally{l.f()}}return n}},{key:"viewChildrenToDom",value:regeneratorRuntime.mark((function e(t,n){var r,i,o,a,s,c,l=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=l.length>2&&void 0!==l[2]?l[2]:{},i=t.getFillerOffset&&t.getFillerOffset(),o=0,a=_createForOfIteratorHelper(t.getChildren()),e.prev=4,a.s();case 6:if((s=a.n()).done){e.next=17;break}if(c=s.value,e.t0=i===o,!e.t0){e.next=12;break}return e.next=12,this._getBlockFiller(n);case 12:return e.next=14,this.viewToDom(c,n,r);case 14:o++;case 15:e.next=6;break;case 17:e.next=22;break;case 19:e.prev=19,e.t1=e.catch(4),a.e(e.t1);case 22:return e.prev=22,a.f(),e.finish(22);case 25:if(e.t2=i===o,!e.t2){e.next=29;break}return e.next=29,this._getBlockFiller(n);case 29:case"end":return e.stop()}}),e,this,[[4,19,22,25]])}))},{key:"viewRangeToDom",value:function(e){var t=this.viewPositionToDom(e.start),n=this.viewPositionToDom(e.end),r=document.createRange();return r.setStart(t.parent,t.offset),r.setEnd(n.parent,n.offset),r}},{key:"viewPositionToDom",value:function(e){var t,n,r,i=e.parent;if(i.is("$text")){var o=this.findCorrespondingDomText(i);if(!o)return null;var a=e.offset;return rr(o)&&(a+=7),{parent:o,offset:a}}if(0===e.offset){if(!(t=this.mapViewToDom(i)))return null;r=t.childNodes[0]}else{var s=e.nodeBefore;if(!(n=s.is("$text")?this.findCorrespondingDomText(s):this.mapViewToDom(e.nodeBefore)))return null;t=n.parentNode,r=n.nextSibling}return Zn(r)&&rr(r)?{parent:r,offset:7}:{parent:t,offset:n?yr(n)+1:0}}},{key:"domToView",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.isBlockFiller(e))return null;var n,r=this.getHostViewElement(e);if(r)return r;if(Zn(e)){if(ir(e))return null;var i=this._processDataFromDomText(e);return""===i?null:new lt(this.document,i)}if(this.isComment(e))return null;if(this.mapDomToView(e))return this.mapDomToView(e);if(this.isDocumentFragment(e))n=new zn(this.document),t.bind&&this.bindDocumentFragments(e,n);else{var o=t.keepOriginalCase?e.tagName:e.tagName.toLowerCase();n=new Gt(this.document,o),t.bind&&this.bindElements(e,n);for(var a=e.attributes,s=a.length-1;s>=0;s--)n._setAttribute(a[s].name,a[s].value);if(!1!==t.withChildren&&this._rawContentElementMatcher.match(n))return n._setCustomProperty("$rawContent",e.innerHTML),this._encounteredRawContentDomNodes.add(e),n}if(!1!==t.withChildren){var c,l=_createForOfIteratorHelper(this.domChildrenToView(e,t));try{for(l.s();!(c=l.n()).done;){var u=c.value;n._appendChild(u)}}catch(d){l.e(d)}finally{l.f()}}return n}},{key:"domChildrenToView",value:regeneratorRuntime.mark((function e(t){var n,r,i,o=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=o.length>1&&void 0!==o[1]?o[1]:{},r=0;case 2:if(!(r<t.childNodes.length)){e.next=11;break}if(i=this.domToView(t.childNodes[r],n),e.t0=null!==i,!e.t0){e.next=8;break}return e.next=8,i;case 8:r++,e.next=2;break;case 11:case"end":return e.stop()}}),e,this)}))},{key:"domSelectionToView",value:function(e){if(1===e.rangeCount){var t=e.getRangeAt(0).startContainer;Zn(t)&&(t=t.parentNode);var n=this.fakeSelectionToView(t);if(n)return n}for(var r=this.isDomSelectionBackward(e),i=[],o=0;o<e.rangeCount;o++){var a=e.getRangeAt(o),s=this.domRangeToView(a);s&&i.push(s)}return new an(i,{backward:r})}},{key:"domRangeToView",value:function(e){var t=this.domPositionToView(e.startContainer,e.startOffset),n=this.domPositionToView(e.endContainer,e.endOffset);return t&&n?new nn(t,n):null}},{key:"domPositionToView",value:function(e,t){if(this.isBlockFiller(e))return this.domPositionToView(e.parentNode,yr(e));var n=this.mapDomToView(e);if(n&&(n.is("uiElement")||n.is("rawElement")))return tn._createBefore(n);if(Zn(e)){if(ir(e))return this.domPositionToView(e.parentNode,yr(e));var r=this.findCorrespondingViewText(e),i=t;return r?(rr(e)&&(i=(i-=7)<0?0:i),new tn(r,i)):null}if(0===t){var o=this.mapDomToView(e);if(o)return new tn(o,0)}else{var a=e.childNodes[t-1],s=Zn(a)?this.findCorrespondingViewText(a):this.mapDomToView(a);if(s&&s.parent)return new tn(s.parent,s.index+1)}return null}},{key:"mapDomToView",value:function(e){return this.getHostViewElement(e)||this._domToViewMapping.get(e)}},{key:"findCorrespondingViewText",value:function(e){if(ir(e))return null;var t=this.getHostViewElement(e);if(t)return t;var n=e.previousSibling;if(n){if(!this.isElement(n))return null;var r=this.mapDomToView(n);if(r)return r.nextSibling instanceof lt?r.nextSibling:null}else{var i=this.mapDomToView(e.parentNode);if(i){var o=i.getChild(0);return o instanceof lt?o:null}}return null}},{key:"mapViewToDom",value:function(e){return this._viewToDomMapping.get(e)}},{key:"findCorrespondingDomText",value:function(e){var t=e.previousSibling;return t&&this.mapViewToDom(t)?this.mapViewToDom(t).nextSibling:!t&&e.parent&&this.mapViewToDom(e.parent)?this.mapViewToDom(e.parent).childNodes[0]:null}},{key:"focus",value:function(e){var t=this.mapViewToDom(e);if(t&&t.ownerDocument.activeElement!==t){var n=mr.window,r=n.scrollX,i=n.scrollY,o=[];Tr(t,(function(e){var t=e.scrollLeft,n=e.scrollTop;o.push([t,n])})),t.focus(),Tr(t,(function(e){var t=_slicedToArray(o.shift(),2),n=t[0],r=t[1];e.scrollLeft=n,e.scrollTop=r})),mr.window.scrollTo(r,i)}}},{key:"isElement",value:function(e){return e&&e.nodeType==Node.ELEMENT_NODE}},{key:"isDocumentFragment",value:function(e){return e&&e.nodeType==Node.DOCUMENT_FRAGMENT_NODE}},{key:"isComment",value:function(e){return e&&e.nodeType==Node.COMMENT_NODE}},{key:"isBlockFiller",value:function(e){return"br"==this.blockFillerMode?e.isEqualNode(_r):!("BR"!==e.tagName||!Ar(e,this.blockElements)||1!==e.parentNode.childNodes.length)||e.isEqualNode(wr)||function(e,t){return e.isEqualNode(br)&&Ar(e,t)&&1===e.parentNode.childNodes.length}(e,this.blockElements)}},{key:"isDomSelectionBackward",value:function(e){if(e.isCollapsed)return!1;var t=document.createRange();t.setStart(e.anchorNode,e.anchorOffset),t.setEnd(e.focusNode,e.focusOffset);var n=t.collapsed;return t.detach(),n}},{key:"getHostViewElement",value:function(e){var t=kr(e);for(t.pop();t.length;){var n=t.pop(),r=this._domToViewMapping.get(n);if(r&&(r.is("uiElement")||r.is("rawElement")))return r}return null}},{key:"isDomSelectionCorrect",value:function(e){return this._isDomSelectionPositionCorrect(e.anchorNode,e.anchorOffset)&&this._isDomSelectionPositionCorrect(e.focusNode,e.focusOffset)}},{key:"registerRawContentMatcher",value:function(e){this._rawContentElementMatcher.add(e)}},{key:"_getBlockFiller",value:function(e){switch(this.blockFillerMode){case"nbsp":return Xn(e);case"markedNbsp":return er(e);case"br":return tr(e)}}},{key:"_isDomSelectionPositionCorrect",value:function(e,t){if(Zn(e)&&rr(e)&&t<7)return!1;if(this.isElement(e)&&rr(e.childNodes[t]))return!1;var n=this.mapDomToView(e);return!n||!n.is("uiElement")&&!n.is("rawElement")}},{key:"_processDataFromViewText",value:function(e){var t=this,n=e.data;if(e.getAncestors().some((function(e){return t.preElements.includes(e.name)})))return n;if(" "==n.charAt(0)){var r=this._getTouchingViewTextNode(e,!1);(!r||!this._nodeEndsWithSpace(r))&&r||(n="\xa0"+n.substr(1))}if(" "==n.charAt(n.length-1)){var i=this._getTouchingViewTextNode(e,!0);" "!=n.charAt(n.length-2)&&i&&" "!=i.data.charAt(0)||(n=n.substr(0,n.length-1)+"\xa0")}return n.replace(/ {2}/g," \xa0")}},{key:"_nodeEndsWithSpace",value:function(e){var t=this;if(e.getAncestors().some((function(e){return t.preElements.includes(e.name)})))return!1;var n=this._processDataFromViewText(e);return" "==n.charAt(n.length-1)}},{key:"_processDataFromDomText",value:function(e){var t=e.data;if(Cr(e,this.preElements))return or(e);t=t.replace(/[ \n\t\r]{1,}/g," ");var n=this._getTouchingInlineDomNode(e,!1),r=this._getTouchingInlineDomNode(e,!0),i=this._checkShouldLeftTrimDomText(e,n),o=this._checkShouldRightTrimDomText(e,r);return i&&(t=t.replace(/^ /,"")),o&&(t=t.replace(/ $/,"")),t=(t=or(new Text(t))).replace(/ \u00A0/g,"  "),(/( |\u00A0)\u00A0$/.test(t)||!r||r.data&&" "==r.data.charAt(0))&&(t=t.replace(/\u00A0$/," ")),i&&(t=t.replace(/^\u00A0/," ")),t}},{key:"_checkShouldLeftTrimDomText",value:function(e,t){return!t||!!qe(t)||!this._encounteredRawContentDomNodes.has(e.previousSibling)&&/[^\S\u00A0]/.test(t.data.charAt(t.data.length-1))}},{key:"_checkShouldRightTrimDomText",value:function(e,t){return!t&&!rr(e)}},{key:"_getTouchingViewTextNode",value:function(e,t){var n,r=_createForOfIteratorHelper(new en({startPosition:t?tn._createAfter(e):tn._createBefore(e),direction:t?"forward":"backward"}));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.item.is("containerElement"))return null;if(i.item.is("element","br"))return null;if(i.item.is("$textProxy"))return i.item}}catch(o){r.e(o)}finally{r.f()}return null}},{key:"_getTouchingInlineDomNode",value:function(e,t){if(!e.parentNode)return null;var n=t?"nextNode":"previousNode",r=e.ownerDocument,i=kr(e)[0],o=r.createTreeWalker(i,NodeFilter.SHOW_TEXT|NodeFilter.SHOW_ELEMENT,{acceptNode:function(e){return Zn(e)||"BR"==e.tagName?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});o.currentNode=e;var a=o[n]();if(null!==a){var s=function(e,t){for(var n=kr(e),r=kr(t),i=0;n[i]==r[i]&&n[i];)i++;return 0===i?null:n[i-1]}(e,a);if(s&&!Cr(e,this.blockElements,s)&&!Cr(a,this.blockElements,s))return a}return null}}]),e}();function Cr(e,t,n){var r=kr(e);return n&&(r=r.slice(r.indexOf(n)+1)),r.some((function(e){return e.tagName&&t.includes(e.tagName.toLowerCase())}))}function Tr(e,t){for(;e&&e!=mr.document;)t(e),e=e.parentNode}function Ar(e,t){var n=e.parentNode;return n&&n.tagName&&t.includes(n.tagName.toLowerCase())}var Sr=n(11);function Er(e){var t=Object.prototype.toString.apply(e);return"[object Window]"==t||"[object global]"==t}var Ir=n(420),Or=Object(Ir.a)({},Qe.default,{listenTo:function(e){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];if(hr(e)||Er(e)){var o=this._getProxyEmitter(e)||new Rr(e);o.attach.apply(o,r),e=o}(t=Qe.default.listenTo).call.apply(t,[this,e].concat(r))},stopListening:function(e,t,n){if(hr(e)||Er(e)){var r=this._getProxyEmitter(e);if(!r)return;e=r}Qe.default.stopListening.call(this,e,t,n),e instanceof Rr&&e.detach(t)},_getProxyEmitter:function(e){return Object(Qe._getEmitterListenedTo)(this,Pr(e))}}),Rr=function e(t){_classCallCheck(this,e),Object(Qe._setEmitterId)(this,Pr(t)),this._domNode=t};function Pr(e){return e["data-ck-expando"]||(e["data-ck-expando"]=Object(Sr.a)())}Object(Ir.a)(Rr.prototype,Qe.default,{attach:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!this._domListeners||!this._domListeners[e]){var r={capture:!!n.useCapture,passive:!!n.usePassive},i=this._createDomListener(e,r);this._domNode.addEventListener(e,i,r),this._domListeners||(this._domListeners={}),this._domListeners[e]=i}},detach:function(e){var t;!this._domListeners[e]||(t=this._events[e])&&t.callbacks.length||this._domListeners[e].removeListener()},_createDomListener:function(e,t){var n=this,r=function(t){n.fire(e,t)};return r.removeListener=function(){n._domNode.removeEventListener(e,r,t),delete n._domListeners[e]},r}});var Mr=function(){function e(t){_classCallCheck(this,e),this.view=t,this.document=t.document,this.isEnabled=!1}return _createClass(e,[{key:"enable",value:function(){this.isEnabled=!0}},{key:"disable",value:function(){this.isEnabled=!1}},{key:"destroy",value:function(){this.disable(),this.stopListening()}},{key:"checkShouldIgnoreEventFromTarget",value:function(e){return e&&3===e.nodeType&&(e=e.parentNode),!(!e||1!==e.nodeType)&&e.matches("[data-cke-ignore-events], [data-cke-ignore-events] *")}}]),e}();function Nr(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new L;++t<n;)this.add(e[t])}Object(u.default)(Mr,Or),Nr.prototype.add=Nr.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},Nr.prototype.has=function(e){return this.__data__.has(e)};var Dr=Nr,Fr=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1},jr=function(e,t){return e.has(t)},Lr=function(e,t,n,r,i,o){var a=1&n,s=e.length,c=t.length;if(s!=c&&!(a&&c>s))return!1;var l=o.get(e),u=o.get(t);if(l&&u)return l==t&&u==e;var d=-1,f=!0,h=2&n?new Dr:void 0;for(o.set(e,t),o.set(t,e);++d<s;){var p=e[d],v=t[d];if(r)var g=a?r(v,p,d,t,e,o):r(p,v,d,e,t,o);if(void 0!==g){if(g)continue;f=!1;break}if(h){if(!Fr(t,(function(e,t){if(!jr(h,t)&&(p===e||i(p,e,n,r,o)))return h.push(t)}))){f=!1;break}}else if(p!==v&&!i(p,v,n,r,o)){f=!1;break}}return o.delete(e),o.delete(t),f},Vr=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n},Br=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n},zr=Ce.a?Ce.a.prototype:void 0,Hr=zr?zr.valueOf:void 0,Ur=Object.prototype.hasOwnProperty,Wr="[object Arguments]",qr="[object Array]",Yr="[object Object]",Gr=Object.prototype.hasOwnProperty,Jr=function e(t,n,r,i,o){return t===n||(null==t||null==n||!Object(y.a)(t)&&!Object(y.a)(n)?t!=t&&n!=n:function(e,t,n,r,i,o){var a=Object(ie.a)(e),s=Object(ie.a)(t),c=a?qr:ke(e),l=s?qr:ke(t),u=(c=c==Wr?Yr:c)==Yr,d=(l=l==Wr?Yr:l)==Yr,f=c==l;if(f&&Object(Pe.a)(e)){if(!Object(Pe.a)(t))return!1;a=!0,u=!1}if(f&&!u)return o||(o=new B),a||Object(jt.a)(e)?Lr(e,t,n,r,i,o):function(e,t,n,r,i,o,a){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!o(new be(e),new be(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Object(x.a)(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var s=Vr;case"[object Set]":if(s||(s=Br),e.size!=t.size&&!(1&r))return!1;var c=a.get(e);if(c)return c==t;r|=2,a.set(e,t);var l=Lr(s(e),s(t),r,i,o,a);return a.delete(e),l;case"[object Symbol]":if(Hr)return Hr.call(e)==Hr.call(t)}return!1}(e,t,c,n,r,i,o);if(!(1&n)){var h=u&&Gr.call(e,"__wrapped__"),p=d&&Gr.call(t,"__wrapped__");if(h||p){var v=h?e.value():e,g=p?t.value():t;return o||(o=new B),i(v,g,n,r,o)}}return!!f&&(o||(o=new B),function(e,t,n,r,i,o){var a=1&n,s=ae(e),c=s.length;if(c!=ae(t).length&&!a)return!1;for(var l=c;l--;){var u=s[l];if(!(a?u in t:Ur.call(t,u)))return!1}var d=o.get(e),f=o.get(t);if(d&&f)return d==t&&f==e;var h=!0;o.set(e,t),o.set(t,e);for(var p=a;++l<c;){var v=e[u=s[l]],g=t[u];if(r)var m=a?r(g,v,u,t,e,o):r(v,g,u,e,t,o);if(!(void 0===m?v===g||i(v,g,n,r,o):m)){h=!1;break}p||(p="constructor"==u)}if(h&&!p){var y=e.constructor,k=t.constructor;y!=k&&"constructor"in e&&"constructor"in t&&!("function"==typeof y&&y instanceof y&&"function"==typeof k&&k instanceof k)&&(h=!1)}return o.delete(e),o.delete(t),h}(e,t,n,r,i,o))}(t,n,r,i,e,o))},$r=function(e,t,n){var r=(n="function"==typeof n?n:void 0)?n(e,t):void 0;return void 0===r?Jr(e,t,void 0,n):!!r},Kr=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this,e))._config={childList:!0,characterData:!0,characterDataOldValue:!0,subtree:!0},r.domConverter=e.domConverter,r.renderer=e._renderer,r._domElements=[],r._mutationObserver=new window.MutationObserver(r._onMutations.bind(_assertThisInitialized(r))),r}return _createClass(n,[{key:"flush",value:function(){this._onMutations(this._mutationObserver.takeRecords())}},{key:"observe",value:function(e){this._domElements.push(e),this.isEnabled&&this._mutationObserver.observe(e,this._config)}},{key:"enable",value:function(){_get3(_getPrototypeOf(n.prototype),"enable",this).call(this);var e,t=_createForOfIteratorHelper(this._domElements);try{for(t.s();!(e=t.n()).done;){var r=e.value;this._mutationObserver.observe(r,this._config)}}catch(i){t.e(i)}finally{t.f()}}},{key:"disable",value:function(){_get3(_getPrototypeOf(n.prototype),"disable",this).call(this),this._mutationObserver.disconnect()}},{key:"destroy",value:function(){_get3(_getPrototypeOf(n.prototype),"destroy",this).call(this),this._mutationObserver.disconnect()}},{key:"_onMutations",value:function(e){if(0!==e.length){var t,n=this.domConverter,r=new Map,i=new Set,o=_createForOfIteratorHelper(e);try{for(o.s();!(t=o.n()).done;){var a=t.value;if("childList"===a.type){var s=n.mapDomToView(a.target);if(s&&(s.is("uiElement")||s.is("rawElement")))continue;s&&!this._isBogusBrMutation(a)&&i.add(s)}}}catch(E){o.e(E)}finally{o.f()}var c,l=_createForOfIteratorHelper(e);try{for(l.s();!(c=l.n()).done;){var u=c.value,d=n.mapDomToView(u.target);if((!d||!d.is("uiElement")&&!d.is("rawElement"))&&"characterData"===u.type){var f=n.findCorrespondingViewText(u.target);f&&!i.has(f.parent)?r.set(f,{type:"text",oldText:f.data,newText:or(u.target),node:f}):!f&&rr(u.target)&&i.add(n.mapDomToView(u.target.parentNode))}}}catch(E){l.e(E)}finally{l.f()}var h,p=[],v=_createForOfIteratorHelper(r.values());try{for(v.s();!(h=v.n()).done;){var g=h.value;this.renderer.markToSync("text",g.node),p.push(g)}}catch(E){v.e(E)}finally{v.f()}var m,y=_createForOfIteratorHelper(i);try{for(y.s();!(m=y.n()).done;){var k=m.value,_=n.mapViewToDom(k),b=Array.from(k.getChildren()),w=Array.from(n.domChildrenToView(_,{withChildren:!1}));$r(b,w,S)||(this.renderer.markToSync("children",k),p.push({type:"children",oldChildren:b,newChildren:w,node:k}))}}catch(E){y.e(E)}finally{y.f()}var x=e[0].target.ownerDocument.getSelection(),C=null;if(x&&x.anchorNode){var T=n.domPositionToView(x.anchorNode,x.anchorOffset),A=n.domPositionToView(x.focusNode,x.focusOffset);T&&A&&(C=new an(T)).setFocus(A)}p.length&&(this.document.fire("mutations",p,C),this.view.forceRender())}function S(e,t){if(!Array.isArray(e))return e===t||!(!e.is("$text")||!t.is("$text"))&&e.data===t.data}}},{key:"_isBogusBrMutation",value:function(e){var t=null;return null===e.nextSibling&&0===e.removedNodes.length&&1==e.addedNodes.length&&(t=this.domConverter.domToView(e.addedNodes[0],{withChildren:!1})),t&&t.is("element","br")}}]),n}(Mr),Qr=function(){function e(t,n,r){_classCallCheck(this,e),this.view=t,this.document=t.document,this.domEvent=n,this.domTarget=n.target,Object(Ir.a)(this,r)}return _createClass(e,[{key:"target",get:function(){return this.view.domConverter.mapDomToView(this.domTarget)}},{key:"preventDefault",value:function(){this.domEvent.preventDefault()}},{key:"stopPropagation",value:function(){this.domEvent.stopPropagation()}}]),e}(),Zr=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this,e)).useCapture=!1,r}return _createClass(n,[{key:"observe",value:function(e){var t=this;("string"==typeof this.domEventType?[this.domEventType]:this.domEventType).forEach((function(n){t.listenTo(e,n,(function(e,n){t.isEnabled&&!t.checkShouldIgnoreEventFromTarget(n.target)&&t.onDomEvent(n)}),{useCapture:t.useCapture})}))}},{key:"fire",value:function(e,t,n){this.isEnabled&&this.document.fire(e,new Qr(this.view,t,n))}}]),n}(Mr),Xr=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this,e)).domEventType=["keydown","keyup"],r}return _createClass(n,[{key:"onDomEvent",value:function(e){this.fire(e.type,e,{keyCode:e.keyCode,altKey:e.altKey,ctrlKey:e.ctrlKey,shiftKey:e.shiftKey,metaKey:e.metaKey,get keystroke(){return Pn(this)}})}}]),n}(Zr),ei=function(){return I.a.Date.now()},ti=/\s/,ni=/^\s+/,ri=/^[-+]0x[0-9a-f]+$/i,ii=/^0b[01]+$/i,oi=/^0o[0-7]+$/i,ai=parseInt,si=function(e){if("number"==typeof e)return e;if(vt(e))return NaN;if(Object(Ee.a)(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Object(Ee.a)(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=function(e){return e?e.slice(0,function(e){for(var t=e.length;t--&&ti.test(e.charAt(t)););return t}(e)+1).replace(ni,""):e}(e);var n=ii.test(e);return n||oi.test(e)?ai(e.slice(2),n?2:8):ri.test(e)?NaN:+e},ci=Math.max,li=Math.min,ui=function(e,t,n){var r,i,o,a,s,c,l=0,u=!1,d=!1,f=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function h(t){var n=r,o=i;return r=i=void 0,l=t,a=e.apply(o,n)}function p(e){var n=e-c;return void 0===c||n>=t||n<0||d&&e-l>=o}function v(){var e=ei();if(p(e))return g(e);s=setTimeout(v,function(e){var n=t-(e-c);return d?li(n,o-(e-l)):n}(e))}function g(e){return s=void 0,f&&r?h(e):(r=i=void 0,a)}function m(){var e=ei(),n=p(e);if(r=arguments,i=this,c=e,n){if(void 0===s)return function(e){return l=e,s=setTimeout(v,t),u?h(e):a}(c);if(d)return clearTimeout(s),s=setTimeout(v,t),h(c)}return void 0===s&&(s=setTimeout(v,t)),a}return t=si(t)||0,Object(Ee.a)(n)&&(u=!!n.leading,o=(d="maxWait"in n)?ci(si(n.maxWait)||0,t):o,f="trailing"in n?!!n.trailing:f),m.cancel=function(){void 0!==s&&clearTimeout(s),l=0,r=c=i=s=void 0},m.flush=function(){return void 0===s?a:g(ei())},m},di=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this,e))._fireSelectionChangeDoneDebounced=ui((function(e){return r.document.fire("selectionChangeDone",e)}),200),r}return _createClass(n,[{key:"observe",value:function(){var e=this,t=this.document;t.on("arrowKey",(function(n,r){t.selection.isFake&&e.isEnabled&&r.preventDefault()}),{context:"$capture"}),t.on("arrowKey",(function(n,r){t.selection.isFake&&e.isEnabled&&e._handleSelectionMove(r.keyCode)}),{priority:"lowest"})}},{key:"destroy",value:function(){_get3(_getPrototypeOf(n.prototype),"destroy",this).call(this),this._fireSelectionChangeDoneDebounced.cancel()}},{key:"_handleSelectionMove",value:function(e){var t=this.document.selection,n=new an(t.getRanges(),{backward:t.isBackward,fake:!1});e!=On.arrowleft&&e!=On.arrowup||n.setTo(n.getFirstPosition()),e!=On.arrowright&&e!=On.arrowdown||n.setTo(n.getLastPosition());var r={oldSelection:t,newSelection:n,domSelection:null};this.document.fire("selectionChange",r),this._fireSelectionChangeDoneDebounced(r)}}]),n}(Mr),fi=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this,e)).mutationObserver=e.getObserver(Kr),r.selection=r.document.selection,r.domConverter=e.domConverter,r._documents=new WeakSet,r._fireSelectionChangeDoneDebounced=ui((function(e){return r.document.fire("selectionChangeDone",e)}),200),r._clearInfiniteLoopInterval=setInterval((function(){return r._clearInfiniteLoop()}),1e3),r._loopbackCounter=0,r}return _createClass(n,[{key:"observe",value:function(e){var t=this,n=e.ownerDocument;this._documents.has(n)||(this.listenTo(n,"selectionchange",(function(e,r){t._handleSelectionChange(r,n)})),this._documents.add(n))}},{key:"destroy",value:function(){_get3(_getPrototypeOf(n.prototype),"destroy",this).call(this),clearInterval(this._clearInfiniteLoopInterval),this._fireSelectionChangeDoneDebounced.cancel()}},{key:"_handleSelectionChange",value:function(e,t){if(this.isEnabled){var n=t.defaultView.getSelection();if(!this.checkShouldIgnoreEventFromTarget(n.anchorNode)){this.mutationObserver.flush();var r=this.domConverter.domSelectionToView(n);if(0!=r.rangeCount){if(this.view.hasDomSelection=!0,!(this.selection.isEqual(r)&&this.domConverter.isDomSelectionCorrect(n)||++this._loopbackCounter>60))if(this.selection.isSimilar(r))this.view.forceRender();else{var i={oldSelection:this.selection,newSelection:r,domSelection:n};this.document.fire("selectionChange",i),this._fireSelectionChangeDoneDebounced(i)}}else this.view.hasDomSelection=!1}}}},{key:"_clearInfiniteLoop",value:function(){this._loopbackCounter=0}}]),n}(Mr),hi=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;_classCallCheck(this,n),(r=t.call(this,e)).domEventType=["focus","blur"],r.useCapture=!0;var i=r.document;return i.on("focus",(function(){i.isFocused=!0,r._renderTimeoutId=setTimeout((function(){return e.forceRender()}),50)})),i.on("blur",(function(t,n){var r=i.selection.editableElement;null!==r&&r!==n.target||(i.isFocused=!1,e.forceRender())})),r}return _createClass(n,[{key:"onDomEvent",value:function(e){this.fire(e.type,e)}},{key:"destroy",value:function(){this._renderTimeoutId&&clearTimeout(this._renderTimeoutId),_get3(_getPrototypeOf(n.prototype),"destroy",this).call(this)}}]),n}(Zr),pi=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;_classCallCheck(this,n),(r=t.call(this,e)).domEventType=["compositionstart","compositionupdate","compositionend"];var i=r.document;return i.on("compositionstart",(function(){i.isComposing=!0})),i.on("compositionend",(function(){i.isComposing=!1})),r}return _createClass(n,[{key:"onDomEvent",value:function(e){this.fire(e.type,e)}}]),n}(Zr),vi=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this,e)).domEventType=["beforeinput"],r}return _createClass(n,[{key:"onDomEvent",value:function(e){this.fire(e.type,e)}}]),n}(Zr),gi=function(){function e(){_classCallCheck(this,e),this._replacedElements=[]}return _createClass(e,[{key:"replace",value:function(e,t){this._replacedElements.push({element:e,newElement:t}),e.style.display="none",t&&e.parentNode.insertBefore(t,e.nextSibling)}},{key:"restore",value:function(){this._replacedElements.forEach((function(e){var t=e.element,n=e.newElement;t.style.display="",n&&n.remove()})),this._replacedElements=[]}}]),e}(),mi=function(e){return"string"==typeof e||!Object(ie.a)(e)&&Object(y.a)(e)&&"[object String]"==Object(v.a)(e)};function yi(e){return"[object Range]"==Object.prototype.toString.apply(e)}function ki(e){var t=e.ownerDocument.defaultView.getComputedStyle(e);return{top:parseInt(t.borderTopWidth,10),right:parseInt(t.borderRightWidth,10),bottom:parseInt(t.borderBottomWidth,10),left:parseInt(t.borderLeftWidth,10)}}var _i=["top","right","bottom","left","width","height"],bi=function(){function e(t){_classCallCheck(this,e);var n=yi(t);if(Object.defineProperty(this,"_source",{value:t._source||t,writable:!0,enumerable:!1}),qe(t)||n)if(n){var r=e.getDomRangeRects(t);wi(this,e.getBoundingRect(r))}else wi(this,t.getBoundingClientRect());else if(Er(t)){var i=t.innerWidth,o=t.innerHeight;wi(this,{top:0,right:i,bottom:o,left:0,width:i,height:o})}else wi(this,t)}return _createClass(e,[{key:"clone",value:function(){return new e(this)}},{key:"moveTo",value:function(e,t){return this.top=t,this.right=e+this.width,this.bottom=t+this.height,this.left=e,this}},{key:"moveBy",value:function(e,t){return this.top+=t,this.right+=e,this.left+=e,this.bottom+=t,this}},{key:"getIntersection",value:function(t){var n={top:Math.max(this.top,t.top),right:Math.min(this.right,t.right),bottom:Math.min(this.bottom,t.bottom),left:Math.max(this.left,t.left)};return n.width=n.right-n.left,n.height=n.bottom-n.top,n.width<0||n.height<0?null:new e(n)}},{key:"getIntersectionArea",value:function(e){var t=this.getIntersection(e);return t?t.getArea():0}},{key:"getArea",value:function(){return this.width*this.height}},{key:"getVisible",value:function(){var t=this._source,n=this.clone();if(!xi(t))for(var r=t.parentNode||t.commonAncestorContainer;r&&!xi(r);){var i=new e(r),o=n.getIntersection(i);if(!o)return null;o.getArea()<n.getArea()&&(n=o),r=r.parentNode}return n}},{key:"isEqual",value:function(e){var t,n=_createForOfIteratorHelper(_i);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(this[r]!==e[r])return!1}}catch(i){n.e(i)}finally{n.f()}return!0}},{key:"contains",value:function(e){var t=this.getIntersection(e);return!(!t||!t.isEqual(e))}},{key:"excludeScrollbarsAndBorders",value:function(){var e,t,n,r=this._source;if(Er(r))e=r.innerWidth-r.document.documentElement.clientWidth,t=r.innerHeight-r.document.documentElement.clientHeight,n=r.getComputedStyle(r.document.documentElement).direction;else{var i=ki(this._source);e=r.offsetWidth-r.clientWidth-i.left-i.right,t=r.offsetHeight-r.clientHeight-i.top-i.bottom,n=r.ownerDocument.defaultView.getComputedStyle(r).direction,this.left+=i.left,this.top+=i.top,this.right-=i.right,this.bottom-=i.bottom,this.width=this.right-this.left,this.height=this.bottom-this.top}return this.width-=e,"ltr"===n?this.right-=e:this.left+=e,this.height-=t,this.bottom-=t,this}}],[{key:"getDomRangeRects",value:function(t){var n=[],r=Array.from(t.getClientRects());if(r.length){var i,o=_createForOfIteratorHelper(r);try{for(o.s();!(i=o.n()).done;){var a=i.value;n.push(new e(a))}}catch(l){o.e(l)}finally{o.f()}}else{var s=t.startContainer;Zn(s)&&(s=s.parentNode);var c=new e(s.getBoundingClientRect());c.right=c.left,c.width=0,n.push(c)}return n}},{key:"getBoundingRect",value:function(t){var n,r={left:Number.POSITIVE_INFINITY,top:Number.POSITIVE_INFINITY,right:Number.NEGATIVE_INFINITY,bottom:Number.NEGATIVE_INFINITY},i=0,o=_createForOfIteratorHelper(t);try{for(o.s();!(n=o.n()).done;){var a=n.value;i++,r.left=Math.min(r.left,a.left),r.top=Math.min(r.top,a.top),r.right=Math.max(r.right,a.right),r.bottom=Math.max(r.bottom,a.bottom)}}catch(s){o.e(s)}finally{o.f()}return 0==i?null:(r.width=r.right-r.left,r.height=r.bottom-r.top,new e(r))}}]),e}();function wi(e,t){var n,r=_createForOfIteratorHelper(_i);try{for(r.s();!(n=r.n()).done;){var i=n.value;e[i]=t[i]}}catch(o){r.e(o)}finally{r.f()}}function xi(e){return!!qe(e)&&e===e.ownerDocument.body}var Ci=function(){function e(t,n){_classCallCheck(this,e),e._observerInstance||e._createObserver(),this._element=t,this._callback=n,e._addElementCallback(t,n),e._observerInstance.observe(t)}return _createClass(e,[{key:"destroy",value:function(){e._deleteElementCallback(this._element,this._callback)}}],[{key:"_addElementCallback",value:function(t,n){e._elementCallbacks||(e._elementCallbacks=new Map);var r=e._elementCallbacks.get(t);r||(r=new Set,e._elementCallbacks.set(t,r)),r.add(n)}},{key:"_deleteElementCallback",value:function(t,n){var r=e._getElementCallbacks(t);r&&(r.delete(n),r.size||(e._elementCallbacks.delete(t),e._observerInstance.unobserve(t))),e._elementCallbacks&&!e._elementCallbacks.size&&(e._observerInstance=null,e._elementCallbacks=null)}},{key:"_getElementCallbacks",value:function(t){return e._elementCallbacks?e._elementCallbacks.get(t):null}},{key:"_createObserver",value:function(){var t;t="function"==typeof mr.window.ResizeObserver?mr.window.ResizeObserver:Ti,e._observerInstance=new t((function(t){var n,r=_createForOfIteratorHelper(t);try{for(r.s();!(n=r.n()).done;){var i=n.value,o=e._getElementCallbacks(i.target);if(o){var a,s=_createForOfIteratorHelper(o);try{for(s.s();!(a=s.n()).done;){(0,a.value)(i)}}catch(c){s.e(c)}finally{s.f()}}}}catch(c){r.e(c)}finally{r.f()}}))}}]),e}();Ci._observerInstance=null,Ci._elementCallbacks=null;var Ti=function(){function e(t){_classCallCheck(this,e),this._callback=t,this._elements=new Set,this._previousRects=new Map,this._periodicCheckTimeout=null}return _createClass(e,[{key:"observe",value:function(e){this._elements.add(e),this._checkElementRectsAndExecuteCallback(),1===this._elements.size&&this._startPeriodicCheck()}},{key:"unobserve",value:function(e){this._elements.delete(e),this._previousRects.delete(e),this._elements.size||this._stopPeriodicCheck()}},{key:"_startPeriodicCheck",value:function(){var e=this;this.listenTo(mr.window,"resize",(function(){e._checkElementRectsAndExecuteCallback()})),this._periodicCheckTimeout=setTimeout((function t(){e._checkElementRectsAndExecuteCallback(),e._periodicCheckTimeout=setTimeout(t,100)}),100)}},{key:"_stopPeriodicCheck",value:function(){clearTimeout(this._periodicCheckTimeout),this.stopListening(),this._previousRects.clear()}},{key:"_checkElementRectsAndExecuteCallback",value:function(){var e,t=[],n=_createForOfIteratorHelper(this._elements);try{for(n.s();!(e=n.n()).done;){var r=e.value;this._hasRectChanged(r)&&t.push({target:r,contentRect:this._previousRects.get(r)})}}catch(i){n.e(i)}finally{n.f()}t.length&&this._callback(t)}},{key:"_hasRectChanged",value:function(e){if(!e.ownerDocument.body.contains(e))return!1;var t=new bi(e),n=this._previousRects.get(e),r=!n||!n.isEqual(t);return this._previousRects.set(e,t),r}}]),e}();function Ai(e){return function(t){return t+e}}function Si(e){var t=e.next();return t.done?null:t.value}Object(u.default)(Ti,Or);var Ei=function(){function e(){_classCallCheck(this,e),this.set("isFocused",!1),this.set("focusedElement",null),this._elements=new Set,this._nextEventLoopTimeout=null}return _createClass(e,[{key:"add",value:function(e){var t=this;if(this._elements.has(e))throw new Ke.default("focustracker-add-element-already-exist",this);this.listenTo(e,"focus",(function(){return t._focus(e)}),{useCapture:!0}),this.listenTo(e,"blur",(function(){return t._blur()}),{useCapture:!0}),this._elements.add(e)}},{key:"remove",value:function(e){e===this.focusedElement&&this._blur(e),this._elements.has(e)&&(this.stopListening(e),this._elements.delete(e))}},{key:"destroy",value:function(){this.stopListening()}},{key:"_focus",value:function(e){clearTimeout(this._nextEventLoopTimeout),this.focusedElement=e,this.isFocused=!0}},{key:"_blur",value:function(){var e=this;clearTimeout(this._nextEventLoopTimeout),this._nextEventLoopTimeout=setTimeout((function(){e.focusedElement=null,e.isFocused=!1}),0)}}]),e}();Object(u.default)(Ei,Or),Object(u.default)(Ei,l.default);var Ii=function(){function e(){_classCallCheck(this,e),this._listener=Object.create(Or)}return _createClass(e,[{key:"listenTo",value:function(e){var t=this;this._listener.listenTo(e,"keydown",(function(e,n){t._listener.fire("_keydown:"+Pn(n),n)}))}},{key:"set",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=Mn(e);this._listener.listenTo(this._listener,"_keydown:"+r,(function(e,n){t(n,(function(){n.preventDefault(),n.stopPropagation(),e.stop()})),e.return=!0}),{priority:n.priority})}},{key:"press",value:function(e){return!!this._listener.fire("_keydown:"+Pn(e),e)}},{key:"destroy",value:function(){this._listener.stopListening()}}]),e}(),Oi=n(27),Ri=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this,e)).document.on("keydown",(function(e,t){if(r.isEnabled&&function(e){return e==On.arrowright||e==On.arrowleft||e==On.arrowup||e==On.arrowdown}(t.keyCode)){var n=new ln(r.document,"arrowKey",r.document.selection.getFirstRange());r.document.fire(n,t),n.stop.called&&e.stop()}})),r}return _createClass(n,[{key:"observe",value:function(){}}]),n}(Mr);function Pi(e){for(var t=e.target,n=e.viewportOffset,r=void 0===n?0:n,i=Vi(t),o=i,a=null;o;){Ni(Bi(o==i?t:a),(function(){return zi(t,o)}));var s=zi(t,o);if(Mi(o,s,r),o.parent!=o){if(a=o.frameElement,o=o.parent,!a)return}else o=null}}function Mi(e,t,n){var r=t.clone().moveBy(0,n),i=t.clone().moveBy(0,-n),o=new bi(e).excludeScrollbarsAndBorders();if(![i,r].every((function(e){return o.contains(e)}))){var a=e.scrollX,s=e.scrollY;Fi(i,o)?s-=o.top-t.top+n:Di(r,o)&&(s+=t.bottom-o.bottom+n),ji(t,o)?a-=o.left-t.left+n:Li(t,o)&&(a+=t.right-o.right+n),e.scrollTo(a,s)}}function Ni(e,t){for(var n,r,i=Vi(e);e!=i.document.body;)r=t(),(n=new bi(e).excludeScrollbarsAndBorders()).contains(r)||(Fi(r,n)?e.scrollTop-=n.top-r.top:Di(r,n)&&(e.scrollTop+=r.bottom-n.bottom),ji(r,n)?e.scrollLeft-=n.left-r.left:Li(r,n)&&(e.scrollLeft+=r.right-n.right)),e=e.parentNode}function Di(e,t){return e.bottom>t.bottom}function Fi(e,t){return e.top<t.top}function ji(e,t){return e.left<t.left}function Li(e,t){return e.right>t.right}function Vi(e){return yi(e)?e.startContainer.ownerDocument.defaultView:e.ownerDocument.defaultView}function Bi(e){if(yi(e)){var t=e.commonAncestorContainer;return Zn(t)&&(t=t.parentNode),t}return e.parentNode}function zi(e,t){var n=Vi(e),r=new bi(e);if(n===t)return r;for(var i=n;i!=t;){var o=new bi(i.frameElement).excludeScrollbarsAndBorders();r.moveBy(o.left,o.top),i=i.parent}return r}Object.assign({},{scrollViewportToShowTarget:Pi,scrollAncestorsToShowTarget:function(e){Ni(Bi(e),(function(){return new bi(e)}))}});var Hi=function(){function e(t){var n=this;_classCallCheck(this,e),this.document=new gn(t),this.domConverter=new xr(this.document),this.domRoots=new Map,this.set("isRenderingInProgress",!1),this.set("hasDomSelection",!1),this._renderer=new pr(this.domConverter,this.document.selection),this._renderer.bind("isFocused").to(this.document),this._initialDomRootAttributes=new WeakMap,this._observers=new Map,this._ongoingChange=!1,this._postFixersInProgress=!1,this._renderingDisabled=!1,this._hasChangedSinceTheLastRendering=!1,this._writer=new Hn(this.document),this.addObserver(Kr),this.addObserver(fi),this.addObserver(hi),this.addObserver(Xr),this.addObserver(di),this.addObserver(pi),this.addObserver(Ri),An&&this.addObserver(vi),function(e){e.document.on("arrowKey",ar,{priority:"low"})}(this),function(e){e.document.on("arrowKey",(function(t,n){return function(e,t,n){if(t.keyCode==On.arrowright){var r=t.domTarget.ownerDocument.defaultView.getSelection(),i=1==r.rangeCount&&r.getRangeAt(0).collapsed;if(i||t.shiftKey){var o=n.domPositionToView(r.focusNode,r.focusOffset);if(null===o)return;var a=!1,s=o.getLastMatchingPosition((function(e){return e.item.is("uiElement")&&(a=!0),!(!e.item.is("uiElement")&&!e.item.is("attributeElement"))}));if(a){var c=n.viewPositionToDom(s);i?r.collapse(c.parent,c.offset):r.extend(c.parent,c.offset)}}}}(0,n,e.domConverter)}),{priority:"low"})}(this),this.on("render",(function(){n._render(),n.document.fire("layoutChanged"),n._hasChangedSinceTheLastRendering=!1})),this.listenTo(this.document.selection,"change",(function(){n._hasChangedSinceTheLastRendering=!0}))}return _createClass(e,[{key:"attachDomRoot",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"main",r=this.document.getRoot(n);r._name=e.tagName.toLowerCase();for(var i={},o=0,a=Array.from(e.attributes);o<a.length;o++){var s=a[o],c=s.name,l=s.value;i[c]=l,"class"===c?this._writer.addClass(l.split(" "),r):this._writer.setAttribute(c,l,r)}this._initialDomRootAttributes.set(e,i);var u=function(){t._writer.setAttribute("contenteditable",!r.isReadOnly,r),r.isReadOnly?t._writer.addClass("ck-read-only",r):t._writer.removeClass("ck-read-only",r)};u(),this.domRoots.set(n,e),this.domConverter.bindElements(e,r),this._renderer.markToSync("children",r),this._renderer.markToSync("attributes",r),this._renderer.domDocuments.add(e.ownerDocument),r.on("change:children",(function(e,n){return t._renderer.markToSync("children",n)})),r.on("change:attributes",(function(e,n){return t._renderer.markToSync("attributes",n)})),r.on("change:text",(function(e,n){return t._renderer.markToSync("text",n)})),r.on("change:isReadOnly",(function(){return t.change(u)})),r.on("change",(function(){t._hasChangedSinceTheLastRendering=!0}));var d,f=_createForOfIteratorHelper(this._observers.values());try{for(f.s();!(d=f.n()).done;){var h=d.value;h.observe(e,n)}}catch(p){f.e(p)}finally{f.f()}}},{key:"detachDomRoot",value:function(e){var t=this.domRoots.get(e);Array.from(t.attributes).forEach((function(e){var n=e.name;return t.removeAttribute(n)}));var n=this._initialDomRootAttributes.get(t);for(var r in n)t.setAttribute(r,n[r]);this.domRoots.delete(e),this.domConverter.unbindDomElement(t)}},{key:"getDomRoot",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"main";return this.domRoots.get(e)}},{key:"addObserver",value:function(e){var t=this._observers.get(e);if(t)return t;t=new e(this),this._observers.set(e,t);var n,r=_createForOfIteratorHelper(this.domRoots);try{for(r.s();!(n=r.n()).done;){var i=_slicedToArray(n.value,2),o=i[0],a=i[1];t.observe(a,o)}}catch(s){r.e(s)}finally{r.f()}return t.enable(),t}},{key:"getObserver",value:function(e){return this._observers.get(e)}},{key:"disableObservers",value:function(){var e,t=_createForOfIteratorHelper(this._observers.values());try{for(t.s();!(e=t.n()).done;){e.value.disable()}}catch(n){t.e(n)}finally{t.f()}}},{key:"enableObservers",value:function(){var e,t=_createForOfIteratorHelper(this._observers.values());try{for(t.s();!(e=t.n()).done;){e.value.enable()}}catch(n){t.e(n)}finally{t.f()}}},{key:"scrollToTheSelection",value:function(){var e=this.document.selection.getFirstRange();e&&Pi({target:this.domConverter.viewRangeToDom(e),viewportOffset:20})}},{key:"focus",value:function(){if(!this.document.isFocused){var e=this.document.selection.editableElement;e&&(this.domConverter.focus(e),this.forceRender())}}},{key:"change",value:function(e){if(this.isRenderingInProgress||this._postFixersInProgress)throw new Ke.default("cannot-change-view-tree",this);try{if(this._ongoingChange)return e(this._writer);this._ongoingChange=!0;var t=e(this._writer);return this._ongoingChange=!1,!this._renderingDisabled&&this._hasChangedSinceTheLastRendering&&(this._postFixersInProgress=!0,this.document._callPostFixers(this._writer),this._postFixersInProgress=!1,this.fire("render")),t}catch(e){Ke.default.rethrowUnexpectedError(e,this)}}},{key:"forceRender",value:function(){this._hasChangedSinceTheLastRendering=!0,this.change((function(){}))}},{key:"destroy",value:function(){var e,t=_createForOfIteratorHelper(this._observers.values());try{for(t.s();!(e=t.n()).done;){e.value.destroy()}}catch(n){t.e(n)}finally{t.f()}this.document.destroy(),this.stopListening()}},{key:"createPositionAt",value:function(e,t){return tn._createAt(e,t)}},{key:"createPositionAfter",value:function(e){return tn._createAfter(e)}},{key:"createPositionBefore",value:function(e){return tn._createBefore(e)}},{key:"createRange",value:function(e,t){return new nn(e,t)}},{key:"createRangeOn",value:function(e){return nn._createOn(e)}},{key:"createRangeIn",value:function(e){return nn._createIn(e)}},{key:"createSelection",value:function(e,t,n){return new an(e,t,n)}},{key:"_disableRendering",value:function(e){this._renderingDisabled=e,0==e&&this.change((function(){}))}},{key:"_render",value:function(){this.isRenderingInProgress=!0,this.disableObservers(),this._renderer.render(),this.enableObservers(),this.isRenderingInProgress=!1}}]),e}();Object(u.default)(Hi,l.default);var Ui=function(){function e(t){_classCallCheck(this,e),this.parent=null,this._attrs=ft(t)}return _createClass(e,[{key:"index",get:function(){var e;if(!this.parent)return null;if(null===(e=this.parent.getChildIndex(this)))throw new Ke.default("model-node-not-found-in-parent",this);return e}},{key:"startOffset",get:function(){var e;if(!this.parent)return null;if(null===(e=this.parent.getChildStartOffset(this)))throw new Ke.default("model-node-not-found-in-parent",this);return e}},{key:"offsetSize",get:function(){return 1}},{key:"endOffset",get:function(){return this.parent?this.startOffset+this.offsetSize:null}},{key:"nextSibling",get:function(){var e=this.index;return null!==e&&this.parent.getChild(e+1)||null}},{key:"previousSibling",get:function(){var e=this.index;return null!==e&&this.parent.getChild(e-1)||null}},{key:"root",get:function(){for(var e=this;e.parent;)e=e.parent;return e}},{key:"isAttached",value:function(){return this.root.is("rootElement")}},{key:"getPath",value:function(){for(var e=[],t=this;t.parent;)e.unshift(t.startOffset),t=t.parent;return e}},{key:"getAncestors",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{includeSelf:!1,parentFirst:!1},t=[],n=e.includeSelf?this:this.parent;n;)t[e.parentFirst?"push":"unshift"](n),n=n.parent;return t}},{key:"getCommonAncestor",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.getAncestors(t),r=e.getAncestors(t),i=0;n[i]==r[i]&&n[i];)i++;return 0===i?null:n[i-1]}},{key:"isBefore",value:function(e){if(this==e)return!1;if(this.root!==e.root)return!1;var t=this.getPath(),n=e.getPath(),r=ot(t,n);switch(r){case"prefix":return!0;case"extension":return!1;default:return t[r]<n[r]}}},{key:"isAfter",value:function(e){return this!=e&&this.root===e.root&&!this.isBefore(e)}},{key:"hasAttribute",value:function(e){return this._attrs.has(e)}},{key:"getAttribute",value:function(e){return this._attrs.get(e)}},{key:"getAttributes",value:function(){return this._attrs.entries()}},{key:"getAttributeKeys",value:function(){return this._attrs.keys()}},{key:"toJSON",value:function(){var e={};return this._attrs.size&&(e.attributes=Array.from(this._attrs).reduce((function(e,t){return e[t[0]]=t[1],e}),{})),e}},{key:"is",value:function(e){return"node"===e||"model:node"===e}},{key:"_clone",value:function(){return new e(this._attrs)}},{key:"_remove",value:function(){this.parent._removeChildren(this.index)}},{key:"_setAttribute",value:function(e,t){this._attrs.set(e,t)}},{key:"_setAttributesTo",value:function(e){this._attrs=ft(e)}},{key:"_removeAttribute",value:function(e){return this._attrs.delete(e)}},{key:"_clearAttributes",value:function(){this._attrs.clear()}}]),e}(),Wi=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var i;return _classCallCheck(this,n),(i=t.call(this,r))._data=e||"",i}return _createClass(n,[{key:"offsetSize",get:function(){return this.data.length}},{key:"data",get:function(){return this._data}},{key:"is",value:function(e){return"$text"===e||"model:$text"===e||"text"===e||"model:text"===e||"node"===e||"model:node"===e}},{key:"toJSON",value:function(){var e=_get3(_getPrototypeOf(n.prototype),"toJSON",this).call(this);return e.data=this.data,e}},{key:"_clone",value:function(){return new n(this.data,this.getAttributes())}}],[{key:"fromJSON",value:function(e){return new n(e.data,e.attributes)}}]),n}(Ui),qi=function(){function e(t,n,r){if(_classCallCheck(this,e),this.textNode=t,n<0||n>t.offsetSize)throw new Ke.default("model-textproxy-wrong-offsetintext",this);if(r<0||n+r>t.offsetSize)throw new Ke.default("model-textproxy-wrong-length",this);this.data=t.data.substring(n,n+r),this.offsetInText=n}return _createClass(e,[{key:"startOffset",get:function(){return null!==this.textNode.startOffset?this.textNode.startOffset+this.offsetInText:null}},{key:"offsetSize",get:function(){return this.data.length}},{key:"endOffset",get:function(){return null!==this.startOffset?this.startOffset+this.offsetSize:null}},{key:"isPartial",get:function(){return this.offsetSize!==this.textNode.offsetSize}},{key:"parent",get:function(){return this.textNode.parent}},{key:"root",get:function(){return this.textNode.root}},{key:"is",value:function(e){return"$textProxy"===e||"model:$textProxy"===e||"textProxy"===e||"model:textProxy"===e}},{key:"getPath",value:function(){var e=this.textNode.getPath();return e.length>0&&(e[e.length-1]+=this.offsetInText),e}},{key:"getAncestors",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{includeSelf:!1,parentFirst:!1},t=[],n=e.includeSelf?this:this.parent;n;)t[e.parentFirst?"push":"unshift"](n),n=n.parent;return t}},{key:"hasAttribute",value:function(e){return this.textNode.hasAttribute(e)}},{key:"getAttribute",value:function(e){return this.textNode.getAttribute(e)}},{key:"getAttributes",value:function(){return this.textNode.getAttributes()}},{key:"getAttributeKeys",value:function(){return this.textNode.getAttributeKeys()}}]),e}(),Yi=function(){function e(t){_classCallCheck(this,e),this._nodes=[],t&&this._insertNodes(0,t)}return _createClass(e,[{key:Symbol.iterator,value:function(){return this._nodes[Symbol.iterator]()}},{key:"length",get:function(){return this._nodes.length}},{key:"maxOffset",get:function(){return this._nodes.reduce((function(e,t){return e+t.offsetSize}),0)}},{key:"getNode",value:function(e){return this._nodes[e]||null}},{key:"getNodeIndex",value:function(e){var t=this._nodes.indexOf(e);return-1==t?null:t}},{key:"getNodeStartOffset",value:function(e){var t=this.getNodeIndex(e);return null===t?null:this._nodes.slice(0,t).reduce((function(e,t){return e+t.offsetSize}),0)}},{key:"indexToOffset",value:function(e){if(e==this._nodes.length)return this.maxOffset;var t=this._nodes[e];if(!t)throw new Ke.default("model-nodelist-index-out-of-bounds",this);return this.getNodeStartOffset(t)}},{key:"offsetToIndex",value:function(e){var t,n=0,r=_createForOfIteratorHelper(this._nodes);try{for(r.s();!(t=r.n()).done;){var i=t.value;if(e>=n&&e<n+i.offsetSize)return this.getNodeIndex(i);n+=i.offsetSize}}catch(o){r.e(o)}finally{r.f()}if(n!=e)throw new Ke.default("model-nodelist-offset-out-of-bounds",this,{offset:e,nodeList:this});return this.length}},{key:"_insertNodes",value:function(e,t){var n,r,i=_createForOfIteratorHelper(t);try{for(i.s();!(r=i.n()).done;){if(!(r.value instanceof Ui))throw new Ke.default("model-nodelist-insertnodes-not-node",this)}}catch(o){i.e(o)}finally{i.f()}(n=this._nodes).splice.apply(n,[e,0].concat(_toConsumableArray(t)))}},{key:"_removeNodes",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this._nodes.splice(e,t)}},{key:"toJSON",value:function(){return this._nodes.map((function(e){return e.toJSON()}))}}]),e}(),Gi=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i){var o;return _classCallCheck(this,n),(o=t.call(this,r)).name=e,o._children=new Yi,i&&o._insertChild(0,i),o}return _createClass(n,[{key:"childCount",get:function(){return this._children.length}},{key:"maxOffset",get:function(){return this._children.maxOffset}},{key:"isEmpty",get:function(){return 0===this.childCount}},{key:"is",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return t?t===this.name&&("element"===e||"model:element"===e):"element"===e||"model:element"===e||"node"===e||"model:node"===e}},{key:"getChild",value:function(e){return this._children.getNode(e)}},{key:"getChildren",value:function(){return this._children[Symbol.iterator]()}},{key:"getChildIndex",value:function(e){return this._children.getNodeIndex(e)}},{key:"getChildStartOffset",value:function(e){return this._children.getNodeStartOffset(e)}},{key:"offsetToIndex",value:function(e){return this._children.offsetToIndex(e)}},{key:"getNodeByPath",value:function(e){var t,n=this,r=_createForOfIteratorHelper(e);try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.getChild(n.offsetToIndex(i))}}catch(o){r.e(o)}finally{r.f()}return n}},{key:"findAncestor",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{includeSelf:!1},n=t.includeSelf?this:this.parent;n;){if(n.name===e)return n;n=n.parent}return null}},{key:"toJSON",value:function(){var e=_get3(_getPrototypeOf(n.prototype),"toJSON",this).call(this);if(e.name=this.name,this._children.length>0){e.children=[];var t,r=_createForOfIteratorHelper(this._children);try{for(r.s();!(t=r.n()).done;){var i=t.value;e.children.push(i.toJSON())}}catch(o){r.e(o)}finally{r.f()}}return e}},{key:"_clone",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=e?Array.from(this._children).map((function(e){return e._clone(!0)})):null;return new n(this.name,this.getAttributes(),t)}},{key:"_appendChild",value:function(e){this._insertChild(this.childCount,e)}},{key:"_insertChild",value:function(e,t){var n,r=function(e){return"string"==typeof e?[new Wi(e)]:(Object(dt.a)(e)||(e=[e]),Array.from(e).map((function(e){return"string"==typeof e?new Wi(e):e instanceof qi?new Wi(e.data,e.getAttributes()):e})))}(t),i=_createForOfIteratorHelper(r);try{for(i.s();!(n=i.n()).done;){var o=n.value;null!==o.parent&&o._remove(),o.parent=this}}catch(a){i.e(a)}finally{i.f()}this._children._insertNodes(e,r)}},{key:"_removeChildren",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=this._children._removeNodes(e,n),i=_createForOfIteratorHelper(r);try{for(i.s();!(t=i.n()).done;){var o=t.value;o.parent=null}}catch(a){i.e(a)}finally{i.f()}return r}}],[{key:"fromJSON",value:function(e){var t=null;if(e.children){t=[];var r,i=_createForOfIteratorHelper(e.children);try{for(i.s();!(r=i.n()).done;){var o=r.value;t.push(o.name?n.fromJSON(o):Wi.fromJSON(o))}}catch(a){i.e(a)}finally{i.f()}}return new n(e.name,e.attributes,t)}}]),n}(Ui),Ji=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(_classCallCheck(this,e),!t.boundaries&&!t.startPosition)throw new Ke.default("model-tree-walker-no-start-position",null);var n=t.direction||"forward";if("forward"!=n&&"backward"!=n)throw new Ke.default("model-tree-walker-unknown-direction",t,{direction:n});this.direction=n,this.boundaries=t.boundaries||null,this.position=t.startPosition?t.startPosition.clone():Ki._createAt(this.boundaries["backward"==this.direction?"end":"start"]),this.position.stickiness="toNone",this.singleCharacters=!!t.singleCharacters,this.shallow=!!t.shallow,this.ignoreElementEnd=!!t.ignoreElementEnd,this._boundaryStartParent=this.boundaries?this.boundaries.start.parent:null,this._boundaryEndParent=this.boundaries?this.boundaries.end.parent:null,this._visitedParent=this.position.parent}return _createClass(e,[{key:Symbol.iterator,value:function(){return this}},{key:"skip",value:function(e){var t,n,r,i;do{var o;r=this.position,i=this._visitedParent,t=(o=this.next()).done,n=o.value}while(!t&&e(n));t||(this.position=r,this._visitedParent=i)}},{key:"next",value:function(){return"forward"==this.direction?this._next():this._previous()}},{key:"_next",value:function(){var e=this.position,t=this.position.clone(),n=this._visitedParent;if(null===n.parent&&t.offset===n.maxOffset)return{done:!0};if(n===this._boundaryEndParent&&t.offset==this.boundaries.end.offset)return{done:!0};var r=t.parent,i=Qi(t,r),o=i||Zi(t,r,i);if(o instanceof Gi)return this.shallow?t.offset++:(t.path.push(0),this._visitedParent=o),this.position=t,$i("elementStart",o,e,t,1);if(o instanceof Wi){var a;if(this.singleCharacters)a=1;else{var s=o.endOffset;this._boundaryEndParent==n&&this.boundaries.end.offset<s&&(s=this.boundaries.end.offset),a=s-t.offset}var c=new qi(o,t.offset-o.startOffset,a);return t.offset+=a,this.position=t,$i("text",c,e,t,a)}return t.path.pop(),t.offset++,this.position=t,this._visitedParent=n.parent,this.ignoreElementEnd?this._next():$i("elementEnd",n,e,t)}},{key:"_previous",value:function(){var e=this.position,t=this.position.clone(),n=this._visitedParent;if(null===n.parent&&0===t.offset)return{done:!0};if(n==this._boundaryStartParent&&t.offset==this.boundaries.start.offset)return{done:!0};var r=t.parent,i=Qi(t,r),o=i||Xi(t,r,i);if(o instanceof Gi)return t.offset--,this.shallow?(this.position=t,$i("elementStart",o,e,t,1)):(t.path.push(o.maxOffset),this.position=t,this._visitedParent=o,this.ignoreElementEnd?this._previous():$i("elementEnd",o,e,t));if(o instanceof Wi){var a;if(this.singleCharacters)a=1;else{var s=o.startOffset;this._boundaryStartParent==n&&this.boundaries.start.offset>s&&(s=this.boundaries.start.offset),a=t.offset-s}var c=new qi(o,t.offset-o.startOffset-a,a);return t.offset-=a,this.position=t,$i("text",c,e,t,a)}return t.path.pop(),this.position=t,this._visitedParent=n.parent,$i("elementStart",n,e,t,1)}}]),e}();function $i(e,t,n,r,i){return{done:!1,value:{type:e,item:t,previousPosition:n,nextPosition:r,length:i}}}var Ki=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"toNone";if(_classCallCheck(this,e),!t.is("element")&&!t.is("documentFragment"))throw new Ke.default("model-position-root-invalid",t);if(!(n instanceof Array)||0===n.length)throw new Ke.default("model-position-path-incorrect-format",t,{path:n});t.is("rootElement")?n=n.slice():(n=[].concat(_toConsumableArray(t.getPath()),_toConsumableArray(n)),t=t.root),this.root=t,this.path=n,this.stickiness=r}return _createClass(e,[{key:"offset",get:function(){return this.path[this.path.length-1]},set:function(e){this.path[this.path.length-1]=e}},{key:"parent",get:function(){for(var e=this.root,t=0;t<this.path.length-1;t++)if(!(e=e.getChild(e.offsetToIndex(this.path[t]))))throw new Ke.default("model-position-path-incorrect",this,{position:this});if(e.is("$text"))throw new Ke.default("model-position-path-incorrect",this,{position:this});return e}},{key:"index",get:function(){return this.parent.offsetToIndex(this.offset)}},{key:"textNode",get:function(){return Qi(this,this.parent)}},{key:"nodeAfter",get:function(){var e=this.parent;return Zi(this,e,Qi(this,e))}},{key:"nodeBefore",get:function(){var e=this.parent;return Xi(this,e,Qi(this,e))}},{key:"isAtStart",get:function(){return 0===this.offset}},{key:"isAtEnd",get:function(){return this.offset==this.parent.maxOffset}},{key:"compareWith",value:function(e){if(this.root!=e.root)return"different";var t=ot(this.path,e.path);switch(t){case"same":return"same";case"prefix":return"before";case"extension":return"after";default:return this.path[t]<e.path[t]?"before":"after"}}},{key:"getLastMatchingPosition",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.startPosition=this;var n=new Ji(t);return n.skip(e),n.position}},{key:"getParentPath",value:function(){return this.path.slice(0,-1)}},{key:"getAncestors",value:function(){var e=this.parent;return e.is("documentFragment")?[e]:e.getAncestors({includeSelf:!0})}},{key:"findAncestor",value:function(e){var t=this.parent;return t.is("element")?t.findAncestor(e,{includeSelf:!0}):null}},{key:"getCommonPath",value:function(e){if(this.root!=e.root)return[];var t=ot(this.path,e.path),n="string"==typeof t?Math.min(this.path.length,e.path.length):t;return this.path.slice(0,n)}},{key:"getCommonAncestor",value:function(e){for(var t=this.getAncestors(),n=e.getAncestors(),r=0;t[r]==n[r]&&t[r];)r++;return 0===r?null:t[r-1]}},{key:"getShiftedBy",value:function(e){var t=this.clone(),n=t.offset+e;return t.offset=n<0?0:n,t}},{key:"isAfter",value:function(e){return"after"==this.compareWith(e)}},{key:"isBefore",value:function(e){return"before"==this.compareWith(e)}},{key:"isEqual",value:function(e){return"same"==this.compareWith(e)}},{key:"isTouching",value:function(t){var n=null,r=null;switch(this.compareWith(t)){case"same":return!0;case"before":n=e._createAt(this),r=e._createAt(t);break;case"after":n=e._createAt(t),r=e._createAt(this);break;default:return!1}for(var i=n.parent;n.path.length+r.path.length;){if(n.isEqual(r))return!0;if(n.path.length>r.path.length){if(n.offset!==i.maxOffset)return!1;n.path=n.path.slice(0,-1),i=i.parent,n.offset++}else{if(0!==r.offset)return!1;r.path=r.path.slice(0,-1)}}}},{key:"is",value:function(e){return"position"===e||"model:position"===e}},{key:"hasSameParentAs",value:function(e){return this.root===e.root&&"same"==ot(this.getParentPath(),e.getParentPath())}},{key:"getTransformedByOperation",value:function(t){var n;switch(t.type){case"insert":n=this._getTransformedByInsertOperation(t);break;case"move":case"remove":case"reinsert":n=this._getTransformedByMoveOperation(t);break;case"split":n=this._getTransformedBySplitOperation(t);break;case"merge":n=this._getTransformedByMergeOperation(t);break;default:n=e._createAt(this)}return n}},{key:"_getTransformedByInsertOperation",value:function(e){return this._getTransformedByInsertion(e.position,e.howMany)}},{key:"_getTransformedByMoveOperation",value:function(e){return this._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany)}},{key:"_getTransformedBySplitOperation",value:function(e){var t=e.movedRange;return t.containsPosition(this)||t.start.isEqual(this)&&"toNext"==this.stickiness?this._getCombined(e.splitPosition,e.moveTargetPosition):e.graveyardPosition?this._getTransformedByMove(e.graveyardPosition,e.insertionPosition,1):this._getTransformedByInsertion(e.insertionPosition,1)}},{key:"_getTransformedByMergeOperation",value:function(t){var n,r=t.movedRange;return r.containsPosition(this)||r.start.isEqual(this)?(n=this._getCombined(t.sourcePosition,t.targetPosition),t.sourcePosition.isBefore(t.targetPosition)&&(n=n._getTransformedByDeletion(t.deletionPosition,1))):n=this.isEqual(t.deletionPosition)?e._createAt(t.deletionPosition):this._getTransformedByMove(t.deletionPosition,t.graveyardPosition,1),n}},{key:"_getTransformedByDeletion",value:function(t,n){var r=e._createAt(this);if(this.root!=t.root)return r;if("same"==ot(t.getParentPath(),this.getParentPath())){if(t.offset<this.offset){if(t.offset+n>this.offset)return null;r.offset-=n}}else if("prefix"==ot(t.getParentPath(),this.getParentPath())){var i=t.path.length-1;if(t.offset<=this.path[i]){if(t.offset+n>this.path[i])return null;r.path[i]-=n}}return r}},{key:"_getTransformedByInsertion",value:function(t,n){var r=e._createAt(this);if(this.root!=t.root)return r;if("same"==ot(t.getParentPath(),this.getParentPath()))(t.offset<this.offset||t.offset==this.offset&&"toPrevious"!=this.stickiness)&&(r.offset+=n);else if("prefix"==ot(t.getParentPath(),this.getParentPath())){var i=t.path.length-1;t.offset<=this.path[i]&&(r.path[i]+=n)}return r}},{key:"_getTransformedByMove",value:function(t,n,r){if(n=n._getTransformedByDeletion(t,r),t.isEqual(n))return e._createAt(this);var i=this._getTransformedByDeletion(t,r);return null===i||t.isEqual(this)&&"toNext"==this.stickiness||t.getShiftedBy(r).isEqual(this)&&"toPrevious"==this.stickiness?this._getCombined(t,n):i._getTransformedByInsertion(n,r)}},{key:"_getCombined",value:function(t,n){var r=t.path.length-1,i=e._createAt(n);return i.stickiness=this.stickiness,i.offset=i.offset+this.path[r]-t.offset,i.path=[].concat(_toConsumableArray(i.path),_toConsumableArray(this.path.slice(r+1))),i}},{key:"toJSON",value:function(){return{root:this.root.toJSON(),path:Array.from(this.path),stickiness:this.stickiness}}},{key:"clone",value:function(){return new this.constructor(this.root,this.path,this.stickiness)}}],[{key:"_createAt",value:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"toNone";if(t instanceof e)return new e(t.root,t.path,t.stickiness);var i=t;if("end"==n)n=i.maxOffset;else{if("before"==n)return this._createBefore(i,r);if("after"==n)return this._createAfter(i,r);if(0!==n&&!n)throw new Ke.default("model-createpositionat-offset-required",[this,t])}if(!i.is("element")&&!i.is("documentFragment"))throw new Ke.default("model-position-parent-incorrect",[this,t]);var o=i.getPath();return o.push(n),new this(i.root,o,r)}},{key:"_createAfter",value:function(e,t){if(!e.parent)throw new Ke.default("model-position-after-root",[this,e],{root:e});return this._createAt(e.parent,e.endOffset,t)}},{key:"_createBefore",value:function(e,t){if(!e.parent)throw new Ke.default("model-position-before-root",e,{root:e});return this._createAt(e.parent,e.startOffset,t)}},{key:"fromJSON",value:function(t,n){if("$graveyard"===t.root){var r=new e(n.graveyard,t.path);return r.stickiness=t.stickiness,r}if(!n.getRoot(t.root))throw new Ke.default("model-position-fromjson-no-root",n,{rootName:t.root});return new e(n.getRoot(t.root),t.path,t.stickiness)}}]),e}();function Qi(e,t){var n=t.getChild(t.offsetToIndex(e.offset));return n&&n.is("$text")&&n.startOffset<e.offset?n:null}function Zi(e,t,n){return null!==n?null:t.getChild(t.offsetToIndex(e.offset))}function Xi(e,t,n){return null!==n?null:t.getChild(t.offsetToIndex(e.offset)-1)}var eo=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;_classCallCheck(this,e),this.start=Ki._createAt(t),this.end=Ki._createAt(n||t),this.start.stickiness=this.isCollapsed?"toNone":"toNext",this.end.stickiness=this.isCollapsed?"toNone":"toPrevious"}return _createClass(e,[{key:Symbol.iterator,value:regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(new Ji({boundaries:this,ignoreElementEnd:!0}),"t0",1);case 1:case"end":return e.stop()}}),e,this)}))},{key:"isCollapsed",get:function(){return this.start.isEqual(this.end)}},{key:"isFlat",get:function(){return"same"==ot(this.start.getParentPath(),this.end.getParentPath())}},{key:"root",get:function(){return this.start.root}},{key:"containsPosition",value:function(e){return e.isAfter(this.start)&&e.isBefore(this.end)}},{key:"containsRange",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.isCollapsed&&(t=!1);var n=this.containsPosition(e.start)||t&&this.start.isEqual(e.start),r=this.containsPosition(e.end)||t&&this.end.isEqual(e.end);return n&&r}},{key:"containsItem",value:function(e){var t=Ki._createBefore(e);return this.containsPosition(t)||this.start.isEqual(t)}},{key:"is",value:function(e){return"range"===e||"model:range"===e}},{key:"isEqual",value:function(e){return this.start.isEqual(e.start)&&this.end.isEqual(e.end)}},{key:"isIntersecting",value:function(e){return this.start.isBefore(e.end)&&this.end.isAfter(e.start)}},{key:"getDifference",value:function(t){var n=[];return this.isIntersecting(t)?(this.containsPosition(t.start)&&n.push(new e(this.start,t.start)),this.containsPosition(t.end)&&n.push(new e(t.end,this.end))):n.push(new e(this.start,this.end)),n}},{key:"getIntersection",value:function(t){if(this.isIntersecting(t)){var n=this.start,r=this.end;return this.containsPosition(t.start)&&(n=t.start),this.containsPosition(t.end)&&(r=t.end),new e(n,r)}return null}},{key:"getJoined",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=this.isIntersecting(t);if(r||(r=this.start.isBefore(t.start)?n?this.end.isTouching(t.start):this.end.isEqual(t.start):n?t.end.isTouching(this.start):t.end.isEqual(this.start)),!r)return null;var i=this.start,o=this.end;return t.start.isBefore(i)&&(i=t.start),t.end.isAfter(o)&&(o=t.end),new e(i,o)}},{key:"getMinimalFlatRanges",value:function(){for(var t=[],n=this.start.getCommonPath(this.end).length,r=Ki._createAt(this.start),i=r.parent;r.path.length>n+1;){var o=i.maxOffset-r.offset;0!==o&&t.push(new e(r,r.getShiftedBy(o))),r.path=r.path.slice(0,-1),r.offset++,i=i.parent}for(;r.path.length<=this.end.path.length;){var a=this.end.path[r.path.length-1],s=a-r.offset;0!==s&&t.push(new e(r,r.getShiftedBy(s))),r.offset=a,r.path.push(0)}return t}},{key:"getWalker",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.boundaries=this,new Ji(e)}},{key:"getItems",value:regeneratorRuntime.mark((function e(){var t,n,r,i,o,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(t=a.length>0&&void 0!==a[0]?a[0]:{}).boundaries=this,t.ignoreElementEnd=!0,n=new Ji(t),r=_createForOfIteratorHelper(n),e.prev=4,r.s();case 6:if((i=r.n()).done){e.next=12;break}return o=i.value,e.next=10,o.item;case 10:e.next=6;break;case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(4),r.e(e.t0);case 17:return e.prev=17,r.f(),e.finish(17);case 20:case"end":return e.stop()}}),e,this,[[4,14,17,20]])}))},{key:"getPositions",value:regeneratorRuntime.mark((function e(){var t,n,r,i,o,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=a.length>0&&void 0!==a[0]?a[0]:{}).boundaries=this,n=new Ji(t),e.next=5,n.position;case 5:r=_createForOfIteratorHelper(n),e.prev=6,r.s();case 8:if((i=r.n()).done){e.next=14;break}return o=i.value,e.next=12,o.nextPosition;case 12:e.next=8;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(6),r.e(e.t0);case 19:return e.prev=19,r.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,this,[[6,16,19,22]])}))},{key:"getTransformedByOperation",value:function(t){switch(t.type){case"insert":return this._getTransformedByInsertOperation(t);case"move":case"remove":case"reinsert":return this._getTransformedByMoveOperation(t);case"split":return[this._getTransformedBySplitOperation(t)];case"merge":return[this._getTransformedByMergeOperation(t)]}return[new e(this.start,this.end)]}},{key:"getTransformedByOperations",value:function(t){var n,r=[new e(this.start,this.end)],i=_createForOfIteratorHelper(t);try{for(i.s();!(n=i.n()).done;)for(var o=n.value,a=0;a<r.length;a++){var s=r[a].getTransformedByOperation(o);r.splice.apply(r,[a,1].concat(_toConsumableArray(s))),a+=s.length-1}}catch(f){i.e(f)}finally{i.f()}for(var c=0;c<r.length;c++)for(var l=r[c],u=c+1;u<r.length;u++){var d=r[u];(l.containsRange(d)||d.containsRange(l)||l.isEqual(d))&&r.splice(u,1)}return r}},{key:"getCommonAncestor",value:function(){return this.start.getCommonAncestor(this.end)}},{key:"getContainedElement",value:function(){if(this.isCollapsed)return null;var e=this.start.nodeAfter,t=this.end.nodeBefore;return e&&e.is("element")&&e===t?e:null}},{key:"toJSON",value:function(){return{start:this.start.toJSON(),end:this.end.toJSON()}}},{key:"clone",value:function(){return new this.constructor(this.start,this.end)}},{key:"_getTransformedByInsertOperation",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this._getTransformedByInsertion(e.position,e.howMany,t)}},{key:"_getTransformedByMoveOperation",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany,t)}},{key:"_getTransformedBySplitOperation",value:function(t){var n=this.start._getTransformedBySplitOperation(t),r=this.end._getTransformedBySplitOperation(t);return this.end.isEqual(t.insertionPosition)&&(r=this.end.getShiftedBy(1)),n.root!=r.root&&(r=this.end.getShiftedBy(-1)),new e(n,r)}},{key:"_getTransformedByMergeOperation",value:function(t){if(this.start.isEqual(t.targetPosition)&&this.end.isEqual(t.deletionPosition))return new e(this.start);var n=this.start._getTransformedByMergeOperation(t),r=this.end._getTransformedByMergeOperation(t);return n.root!=r.root&&(r=this.end.getShiftedBy(-1)),n.isAfter(r)?(t.sourcePosition.isBefore(t.targetPosition)?(n=Ki._createAt(r)).offset=0:(t.deletionPosition.isEqual(n)||(r=t.deletionPosition),n=t.targetPosition),new e(n,r)):new e(n,r)}},{key:"_getTransformedByInsertion",value:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(r&&this.containsPosition(t))return[new e(this.start,t),new e(t.getShiftedBy(n),this.end._getTransformedByInsertion(t,n))];var i=new e(this.start,this.end);return i.start=i.start._getTransformedByInsertion(t,n),i.end=i.end._getTransformedByInsertion(t,n),[i]}},{key:"_getTransformedByMove",value:function(t,n,r){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(this.isCollapsed){var o=this.start._getTransformedByMove(t,n,r);return[new e(o)]}var a,s=e._createFromPositionAndShift(t,r),c=n._getTransformedByDeletion(t,r);if(this.containsPosition(n)&&!i&&(s.containsPosition(this.start)||s.containsPosition(this.end))){var l=this.start._getTransformedByMove(t,n,r),u=this.end._getTransformedByMove(t,n,r);return[new e(l,u)]}var d=this.getDifference(s),f=null,h=this.getIntersection(s);if(1==d.length?f=new e(d[0].start._getTransformedByDeletion(t,r),d[0].end._getTransformedByDeletion(t,r)):2==d.length&&(f=new e(this.start,this.end._getTransformedByDeletion(t,r))),a=f?f._getTransformedByInsertion(c,r,null!==h||i):[],h){var p=new e(h.start._getCombined(s.start,c),h.end._getCombined(s.start,c));2==a.length?a.splice(1,0,p):a.push(p)}return a}},{key:"_getTransformedByDeletion",value:function(t,n){var r=this.start._getTransformedByDeletion(t,n),i=this.end._getTransformedByDeletion(t,n);return null==r&&null==i?null:(null==r&&(r=t),null==i&&(i=t),new e(r,i))}}],[{key:"_createFromPositionAndShift",value:function(e,t){var n=e,r=e.getShiftedBy(t);return t>0?new this(n,r):new this(r,n)}},{key:"_createIn",value:function(e){return new this(Ki._createAt(e,0),Ki._createAt(e,e.maxOffset))}},{key:"_createOn",value:function(e){return this._createFromPositionAndShift(Ki._createBefore(e),e.offsetSize)}},{key:"_createFromRanges",value:function(e){if(0===e.length)throw new Ke.default("range-create-from-ranges-empty-array",null);if(1==e.length)return e[0].clone();var t=e[0];e.sort((function(e,t){return e.start.isAfter(t.start)?1:-1}));var n=e.indexOf(t),r=new this(t.start,t.end);if(n>0)for(var i=n-1;e[i].end.isEqual(r.start);i++)r.start=Ki._createAt(e[i].start);for(var o=n+1;o<e.length&&e[o].start.isEqual(r.end);o++)r.end=Ki._createAt(e[o].end);return r}},{key:"fromJSON",value:function(e,t){return new this(Ki.fromJSON(e.start,t),Ki.fromJSON(e.end,t))}}]),e}(),to=function(){function e(){var t=this;_classCallCheck(this,e),this._modelToViewMapping=new WeakMap,this._viewToModelMapping=new WeakMap,this._viewToModelLengthCallbacks=new Map,this._markerNameToElements=new Map,this._elementToMarkerNames=new Map,this._unboundMarkerNames=new Set,this.on("modelToViewPosition",(function(e,n){if(!n.viewPosition){var r=t._modelToViewMapping.get(n.modelPosition.parent);n.viewPosition=t.findPositionIn(r,n.modelPosition.offset)}}),{priority:"low"}),this.on("viewToModelPosition",(function(e,n){if(!n.modelPosition){var r=t.findMappedViewAncestor(n.viewPosition),i=t._viewToModelMapping.get(r),o=t._toModelOffset(n.viewPosition.parent,n.viewPosition.offset,r);n.modelPosition=Ki._createAt(i,o)}}),{priority:"low"})}return _createClass(e,[{key:"bindElements",value:function(e,t){this._modelToViewMapping.set(e,t),this._viewToModelMapping.set(t,e)}},{key:"unbindViewElement",value:function(e){var t=this.toModelElement(e);if(this._viewToModelMapping.delete(e),this._elementToMarkerNames.has(e)){var n,r=_createForOfIteratorHelper(this._elementToMarkerNames.get(e));try{for(r.s();!(n=r.n()).done;){var i=n.value;this._unboundMarkerNames.add(i)}}catch(o){r.e(o)}finally{r.f()}}this._modelToViewMapping.get(t)==e&&this._modelToViewMapping.delete(t)}},{key:"unbindModelElement",value:function(e){var t=this.toViewElement(e);this._modelToViewMapping.delete(e),this._viewToModelMapping.get(t)==e&&this._viewToModelMapping.delete(t)}},{key:"bindElementToMarker",value:function(e,t){var n=this._markerNameToElements.get(t)||new Set;n.add(e);var r=this._elementToMarkerNames.get(e)||new Set;r.add(t),this._markerNameToElements.set(t,n),this._elementToMarkerNames.set(e,r)}},{key:"unbindElementFromMarkerName",value:function(e,t){var n=this._markerNameToElements.get(t);n&&(n.delete(e),0==n.size&&this._markerNameToElements.delete(t));var r=this._elementToMarkerNames.get(e);r&&(r.delete(t),0==r.size&&this._elementToMarkerNames.delete(e))}},{key:"flushUnboundMarkerNames",value:function(){var e=Array.from(this._unboundMarkerNames);return this._unboundMarkerNames.clear(),e}},{key:"clearBindings",value:function(){this._modelToViewMapping=new WeakMap,this._viewToModelMapping=new WeakMap,this._markerNameToElements=new Map,this._elementToMarkerNames=new Map,this._unboundMarkerNames=new Set}},{key:"toModelElement",value:function(e){return this._viewToModelMapping.get(e)}},{key:"toViewElement",value:function(e){return this._modelToViewMapping.get(e)}},{key:"toModelRange",value:function(e){return new eo(this.toModelPosition(e.start),this.toModelPosition(e.end))}},{key:"toViewRange",value:function(e){return new nn(this.toViewPosition(e.start),this.toViewPosition(e.end))}},{key:"toModelPosition",value:function(e){var t={viewPosition:e,mapper:this};return this.fire("viewToModelPosition",t),t.modelPosition}},{key:"toViewPosition",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{isPhantom:!1},n={modelPosition:e,mapper:this,isPhantom:t.isPhantom};return this.fire("modelToViewPosition",n),n.viewPosition}},{key:"markerNameToElements",value:function(e){var t=this._markerNameToElements.get(e);if(!t)return null;var n,r=new Set,i=_createForOfIteratorHelper(t);try{for(i.s();!(n=i.n()).done;){var o=n.value;if(o.is("attributeElement")){var a,s=_createForOfIteratorHelper(o.getElementsWithSameId());try{for(s.s();!(a=s.n()).done;){var c=a.value;r.add(c)}}catch(l){s.e(l)}finally{s.f()}}else r.add(o)}}catch(l){i.e(l)}finally{i.f()}return r}},{key:"registerViewToModelLength",value:function(e,t){this._viewToModelLengthCallbacks.set(e,t)}},{key:"findMappedViewAncestor",value:function(e){for(var t=e.parent;!this._viewToModelMapping.has(t);)t=t.parent;return t}},{key:"_toModelOffset",value:function(e,t,n){if(n!=e)return this._toModelOffset(e.parent,e.index,n)+this._toModelOffset(e,t,e);if(e.is("$text"))return t;for(var r=0,i=0;i<t;i++)r+=this.getModelLength(e.getChild(i));return r}},{key:"getModelLength",value:function(e){if(this._viewToModelLengthCallbacks.get(e.name))return this._viewToModelLengthCallbacks.get(e.name)(e);if(this._viewToModelMapping.has(e))return 1;if(e.is("$text"))return e.data.length;if(e.is("uiElement"))return 0;var t,n=0,r=_createForOfIteratorHelper(e.getChildren());try{for(r.s();!(t=r.n()).done;){var i=t.value;n+=this.getModelLength(i)}}catch(o){r.e(o)}finally{r.f()}return n}},{key:"findPositionIn",value:function(e,t){var n,r=0,i=0,o=0;if(e.is("$text"))return new tn(e,t);for(;i<t;)n=e.getChild(o),i+=r=this.getModelLength(n),o++;return i==t?this._moveViewPositionToTextNode(new tn(e,o)):this.findPositionIn(n,t-(i-r))}},{key:"_moveViewPositionToTextNode",value:function(e){var t=e.nodeBefore,n=e.nodeAfter;return t instanceof lt?new tn(t,t.data.length):n instanceof lt?new tn(n,0):e}}]),e}();Object(u.default)(to,Qe.default);var no=function(){function e(){_classCallCheck(this,e),this._consumable=new Map,this._textProxyRegistry=new Map}return _createClass(e,[{key:"add",value:function(e,t){t=ro(t),e instanceof qi&&(e=this._getSymbolForTextProxy(e)),this._consumable.has(e)||this._consumable.set(e,new Map),this._consumable.get(e).set(t,!0)}},{key:"consume",value:function(e,t){return t=ro(t),e instanceof qi&&(e=this._getSymbolForTextProxy(e)),!!this.test(e,t)&&(this._consumable.get(e).set(t,!1),!0)}},{key:"test",value:function(e,t){t=ro(t),e instanceof qi&&(e=this._getSymbolForTextProxy(e));var n=this._consumable.get(e);if(void 0===n)return null;var r=n.get(t);return void 0===r?null:r}},{key:"revert",value:function(e,t){t=ro(t),e instanceof qi&&(e=this._getSymbolForTextProxy(e));var n=this.test(e,t);return!1===n?(this._consumable.get(e).set(t,!0),!0):!0!==n&&null}},{key:"_getSymbolForTextProxy",value:function(e){var t=null,n=this._textProxyRegistry.get(e.startOffset);if(n){var r=n.get(e.endOffset);r&&(t=r.get(e.parent))}return t||(t=this._addSymbolForTextProxy(e.startOffset,e.endOffset,e.parent)),t}},{key:"_addSymbolForTextProxy",value:function(e,t,n){var r,i,o=Symbol("textProxySymbol");return(r=this._textProxyRegistry.get(e))||(r=new Map,this._textProxyRegistry.set(e,r)),(i=r.get(t))||(i=new Map,r.set(t,i)),i.set(n,o),o}}]),e}();function ro(e){var t=e.split(":");return t.length>1?t[0]+":"+t[1]:t[0]}var io=function(){function e(t){_classCallCheck(this,e),this.conversionApi=Object.assign({dispatcher:this},t),this._reconversionEventsMapping=new Map}return _createClass(e,[{key:"convertChanges",value:function(e,t,n){var r,i=_createForOfIteratorHelper(e.getMarkersToRemove());try{for(i.s();!(r=i.n()).done;){var o=r.value;this.convertMarkerRemove(o.name,o.range,n)}}catch(g){i.e(g)}finally{i.f()}var a,s=_createForOfIteratorHelper(this._mapChangesWithAutomaticReconversion(e));try{for(s.s();!(a=s.n()).done;){var c=a.value;"insert"===c.type?this.convertInsert(eo._createFromPositionAndShift(c.position,c.length),n):"remove"===c.type?this.convertRemove(c.position,c.length,c.name,n):"reconvert"===c.type?this.reconvertElement(c.element,n):this.convertAttribute(c.range,c.attributeKey,c.attributeOldValue,c.attributeNewValue,n)}}catch(g){s.e(g)}finally{s.f()}var l,u=_createForOfIteratorHelper(this.conversionApi.mapper.flushUnboundMarkerNames());try{for(u.s();!(l=u.n()).done;){var d=l.value,f=t.get(d).getRange();this.convertMarkerRemove(d,f,n),this.convertMarkerAdd(d,f,n)}}catch(g){u.e(g)}finally{u.f()}var h,p=_createForOfIteratorHelper(e.getMarkersToAdd());try{for(p.s();!(h=p.n()).done;){var v=h.value;this.convertMarkerAdd(v.name,v.range,n)}}catch(g){p.e(g)}finally{p.f()}}},{key:"convertInsert",value:function(e,t){this.conversionApi.writer=t,this.conversionApi.consumable=this._createInsertConsumable(e);var n,r=_createForOfIteratorHelper(Array.from(e).map(ao));try{for(r.s();!(n=r.n()).done;){var i=n.value;this._convertInsertWithAttributes(i)}}catch(o){r.e(o)}finally{r.f()}this._clearConversionApi()}},{key:"convertRemove",value:function(e,t,n,r){this.conversionApi.writer=r,this.fire("remove:"+n,{position:e,length:t},this.conversionApi),this._clearConversionApi()}},{key:"convertAttribute",value:function(e,t,n,r,i){this.conversionApi.writer=i,this.conversionApi.consumable=this._createConsumableForRange(e,"attribute:"+t);var o,a=_createForOfIteratorHelper(e);try{for(a.s();!(o=a.n()).done;){var s=o.value,c={item:s.item,range:eo._createFromPositionAndShift(s.previousPosition,s.length),attributeKey:t,attributeOldValue:n,attributeNewValue:r};this._testAndFire("attribute:"+t,c)}}catch(l){a.e(l)}finally{a.f()}this._clearConversionApi()}},{key:"reconvertElement",value:function(e,t){var n=eo._createOn(e);this.conversionApi.writer=t,this.conversionApi.consumable=this._createInsertConsumable(n);var r=this.conversionApi.mapper,i=r.toViewElement(e);t.remove(i),this._convertInsertWithAttributes({item:e,range:n});var o,a=r.toViewElement(e),s=_createForOfIteratorHelper(eo._createIn(e));try{for(s.s();!(o=s.n()).done;){var c=o.value,l=c.item,u=so(l,r);u?u.root!==a.root&&t.move(t.createRangeOn(u),r.toViewPosition(Ki._createBefore(l))):this._convertInsertWithAttributes(ao(c))}}catch(d){s.e(d)}finally{s.f()}r.unbindViewElement(i),this._clearConversionApi()}},{key:"convertSelection",value:function(e,t,n){var r=Array.from(t.getMarkersAtPosition(e.getFirstPosition()));if(this.conversionApi.writer=n,this.conversionApi.consumable=this._createSelectionConsumable(e,r),this.fire("selection",{selection:e},this.conversionApi),e.isCollapsed){var i,o=_createForOfIteratorHelper(r);try{for(o.s();!(i=o.n()).done;){var a=i.value,s=a.getRange();if(oo(e.getFirstPosition(),a,this.conversionApi.mapper)){var c={item:e,markerName:a.name,markerRange:s};this.conversionApi.consumable.test(e,"addMarker:"+a.name)&&this.fire("addMarker:"+a.name,c,this.conversionApi)}}}catch(h){o.e(h)}finally{o.f()}var l,u=_createForOfIteratorHelper(e.getAttributeKeys());try{for(u.s();!(l=u.n()).done;){var d=l.value,f={item:e,range:e.getFirstRange(),attributeKey:d,attributeOldValue:null,attributeNewValue:e.getAttribute(d)};this.conversionApi.consumable.test(e,"attribute:"+f.attributeKey)&&this.fire("attribute:"+f.attributeKey+":$text",f,this.conversionApi)}}catch(h){u.e(h)}finally{u.f()}this._clearConversionApi()}}},{key:"convertMarkerAdd",value:function(e,t,n){if("$graveyard"!=t.root.rootName){this.conversionApi.writer=n;var r="addMarker:"+e,i=new no;if(i.add(t,r),this.conversionApi.consumable=i,this.fire(r,{markerName:e,markerRange:t},this.conversionApi),i.test(t,r)){this.conversionApi.consumable=this._createConsumableForRange(t,r);var o,a=_createForOfIteratorHelper(t.getItems());try{for(a.s();!(o=a.n()).done;){var s=o.value;if(this.conversionApi.consumable.test(s,r)){var c={item:s,range:eo._createOn(s),markerName:e,markerRange:t};this.fire(r,c,this.conversionApi)}}}catch(l){a.e(l)}finally{a.f()}this._clearConversionApi()}}}},{key:"convertMarkerRemove",value:function(e,t,n){"$graveyard"!=t.root.rootName&&(this.conversionApi.writer=n,this.fire("removeMarker:"+e,{markerName:e,markerRange:t},this.conversionApi),this._clearConversionApi())}},{key:"_mapReconversionTriggerEvent",value:function(e,t){this._reconversionEventsMapping.set(t,e)}},{key:"_createInsertConsumable",value:function(e){var t,n=new no,r=_createForOfIteratorHelper(e);try{for(r.s();!(t=r.n()).done;){var i=t.value.item;n.add(i,"insert");var o,a=_createForOfIteratorHelper(i.getAttributeKeys());try{for(a.s();!(o=a.n()).done;){var s=o.value;n.add(i,"attribute:"+s)}}catch(c){a.e(c)}finally{a.f()}}}catch(c){r.e(c)}finally{r.f()}return n}},{key:"_createConsumableForRange",value:function(e,t){var n,r=new no,i=_createForOfIteratorHelper(e.getItems());try{for(i.s();!(n=i.n()).done;){var o=n.value;r.add(o,t)}}catch(a){i.e(a)}finally{i.f()}return r}},{key:"_createSelectionConsumable",value:function(e,t){var n=new no;n.add(e,"selection");var r,i=_createForOfIteratorHelper(t);try{for(i.s();!(r=i.n()).done;){var o=r.value;n.add(e,"addMarker:"+o.name)}}catch(l){i.e(l)}finally{i.f()}var a,s=_createForOfIteratorHelper(e.getAttributeKeys());try{for(s.s();!(a=s.n()).done;){var c=a.value;n.add(e,"attribute:"+c)}}catch(l){s.e(l)}finally{s.f()}return n}},{key:"_testAndFire",value:function(e,t){this.conversionApi.consumable.test(t.item,e)&&this.fire(function(e,t){return"".concat(e,":").concat(t.item.name||"$text")}(e,t),t,this.conversionApi)}},{key:"_clearConversionApi",value:function(){delete this.conversionApi.writer,delete this.conversionApi.consumable}},{key:"_convertInsertWithAttributes",value:function(e){this._testAndFire("insert",e);var t,n=_createForOfIteratorHelper(e.item.getAttributeKeys());try{for(n.s();!(t=n.n()).done;){var r=t.value;e.attributeKey=r,e.attributeOldValue=null,e.attributeNewValue=e.item.getAttribute(r),this._testAndFire("attribute:"+r,e)}}catch(i){n.e(i)}finally{n.f()}}},{key:"_mapChangesWithAutomaticReconversion",value:function(e){var t,n=new Set,r=[],i=_createForOfIteratorHelper(e.getChanges());try{for(i.s();!(t=i.n()).done;){var o=t.value,a=o.position||o.range.start,s=a.parent;if(Qi(a,s))r.push(o);else{var c="attribute"===o.type?Zi(a,s,null):s;if(c.is("$text"))r.push(o);else{var l;if(l="attribute"===o.type?"attribute:".concat(o.attributeKey,":").concat(c.name):"".concat(o.type,":").concat(o.name),this._isReconvertTriggerEvent(l,c.name)){if(n.has(c))continue;n.add(c),r.push({type:"reconvert",element:c})}else r.push(o)}}}}catch(u){i.e(u)}finally{i.f()}return r}},{key:"_isReconvertTriggerEvent",value:function(e,t){return this._reconversionEventsMapping.get(e)===t}}]),e}();function oo(e,t,n){var r=t.getRange(),i=Array.from(e.getAncestors());return i.shift(),i.reverse(),!i.some((function(e){if(r.containsItem(e))return!!n.toViewElement(e).getCustomProperty("addHighlight")}))}function ao(e){return{item:e.item,range:eo._createFromPositionAndShift(e.previousPosition,e.length)}}function so(e,t){if(e.is("textProxy")){var n=t.toViewPosition(Ki._createBefore(e)).parent;return n.is("$text")?n:null}return t.toViewElement(e)}Object(u.default)(io,Qe.default);var co=function(){function e(t,n,r){_classCallCheck(this,e),this._lastRangeBackward=!1,this._ranges=[],this._attrs=new Map,t&&this.setTo(t,n,r)}return _createClass(e,[{key:"anchor",get:function(){if(this._ranges.length>0){var e=this._ranges[this._ranges.length-1];return this._lastRangeBackward?e.end:e.start}return null}},{key:"focus",get:function(){if(this._ranges.length>0){var e=this._ranges[this._ranges.length-1];return this._lastRangeBackward?e.start:e.end}return null}},{key:"isCollapsed",get:function(){return 1===this._ranges.length&&this._ranges[0].isCollapsed}},{key:"rangeCount",get:function(){return this._ranges.length}},{key:"isBackward",get:function(){return!this.isCollapsed&&this._lastRangeBackward}},{key:"isEqual",value:function(e){if(this.rangeCount!=e.rangeCount)return!1;if(0===this.rangeCount)return!0;if(!this.anchor.isEqual(e.anchor)||!this.focus.isEqual(e.focus))return!1;var t,n=_createForOfIteratorHelper(this._ranges);try{for(n.s();!(t=n.n()).done;){var r,i=t.value,o=!1,a=_createForOfIteratorHelper(e._ranges);try{for(a.s();!(r=a.n()).done;){var s=r.value;if(i.isEqual(s)){o=!0;break}}}catch(c){a.e(c)}finally{a.f()}if(!o)return!1}}catch(c){n.e(c)}finally{n.f()}return!0}},{key:"getRanges",value:regeneratorRuntime.mark((function e(){var t,n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=_createForOfIteratorHelper(this._ranges),e.prev=1,t.s();case 3:if((n=t.n()).done){e.next=9;break}return r=n.value,e.next=7,new eo(r.start,r.end);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),t.e(e.t0);case 14:return e.prev=14,t.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,this,[[1,11,14,17]])}))},{key:"getFirstRange",value:function(){var e,t=null,n=_createForOfIteratorHelper(this._ranges);try{for(n.s();!(e=n.n()).done;){var r=e.value;t&&!r.start.isBefore(t.start)||(t=r)}}catch(i){n.e(i)}finally{n.f()}return t?new eo(t.start,t.end):null}},{key:"getLastRange",value:function(){var e,t=null,n=_createForOfIteratorHelper(this._ranges);try{for(n.s();!(e=n.n()).done;){var r=e.value;t&&!r.end.isAfter(t.end)||(t=r)}}catch(i){n.e(i)}finally{n.f()}return t?new eo(t.start,t.end):null}},{key:"getFirstPosition",value:function(){var e=this.getFirstRange();return e?e.start.clone():null}},{key:"getLastPosition",value:function(){var e=this.getLastRange();return e?e.end.clone():null}},{key:"setTo",value:function(t,n,r){if(null===t)this._setRanges([]);else if(t instanceof e)this._setRanges(t.getRanges(),t.isBackward);else if(t&&"function"==typeof t.getRanges)this._setRanges(t.getRanges(),t.isBackward);else if(t instanceof eo)this._setRanges([t],!!n&&!!n.backward);else if(t instanceof Ki)this._setRanges([new eo(t)]);else if(t instanceof Ui){var i,o=!!r&&!!r.backward;if("in"==n)i=eo._createIn(t);else if("on"==n)i=eo._createOn(t);else{if(void 0===n)throw new Ke.default("model-selection-setto-required-second-parameter",[this,t]);i=new eo(Ki._createAt(t,n))}this._setRanges([i],o)}else{if(!Object(dt.a)(t))throw new Ke.default("model-selection-setto-not-selectable",[this,t]);this._setRanges(t,n&&!!n.backward)}}},{key:"_setRanges",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=(e=Array.from(e)).some((function(n){if(!(n instanceof eo))throw new Ke.default("model-selection-set-ranges-not-range",[t,e]);return t._ranges.every((function(e){return!e.isEqual(n)}))}));if(e.length!==this._ranges.length||r){this._removeAllRanges();var i,o=_createForOfIteratorHelper(e);try{for(o.s();!(i=o.n()).done;){var a=i.value;this._pushRange(a)}}catch(s){o.e(s)}finally{o.f()}this._lastRangeBackward=!!n,this.fire("change:range",{directChange:!0})}}},{key:"setFocus",value:function(e,t){if(null===this.anchor)throw new Ke.default("model-selection-setfocus-no-ranges",[this,e]);var n=Ki._createAt(e,t);if("same"!=n.compareWith(this.focus)){var r=this.anchor;this._ranges.length&&this._popRange(),"before"==n.compareWith(r)?(this._pushRange(new eo(n,r)),this._lastRangeBackward=!0):(this._pushRange(new eo(r,n)),this._lastRangeBackward=!1),this.fire("change:range",{directChange:!0})}}},{key:"getAttribute",value:function(e){return this._attrs.get(e)}},{key:"getAttributes",value:function(){return this._attrs.entries()}},{key:"getAttributeKeys",value:function(){return this._attrs.keys()}},{key:"hasAttribute",value:function(e){return this._attrs.has(e)}},{key:"removeAttribute",value:function(e){this.hasAttribute(e)&&(this._attrs.delete(e),this.fire("change:attribute",{attributeKeys:[e],directChange:!0}))}},{key:"setAttribute",value:function(e,t){this.getAttribute(e)!==t&&(this._attrs.set(e,t),this.fire("change:attribute",{attributeKeys:[e],directChange:!0}))}},{key:"getSelectedElement",value:function(){return 1!==this.rangeCount?null:this.getFirstRange().getContainedElement()}},{key:"is",value:function(e){return"selection"===e||"model:selection"===e}},{key:"getSelectedBlocks",value:regeneratorRuntime.mark((function e(){var t,n,r,i,o,a,s,c,l,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=new WeakSet,n=_createForOfIteratorHelper(this.getRanges()),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=38;break}if(i=r.value,o=fo(i.start,t),e.t0=o&&ho(o,i),!e.t0){e.next=11;break}return e.next=11,o;case 11:a=_createForOfIteratorHelper(i.getWalker()),e.prev=12,a.s();case 14:if((s=a.n()).done){e.next=23;break}if(c=s.value,l=c.item,e.t1="elementEnd"==c.type&&uo(l,t,i),!e.t1){e.next=21;break}return e.next=21,l;case 21:e.next=14;break;case 23:e.next=28;break;case 25:e.prev=25,e.t2=e.catch(12),a.e(e.t2);case 28:return e.prev=28,a.f(),e.finish(28);case 31:if(u=fo(i.end,t),e.t3=u&&!i.end.isTouching(Ki._createAt(u,0))&&ho(u,i),!e.t3){e.next=36;break}return e.next=36,u;case 36:e.next=4;break;case 38:e.next=43;break;case 40:e.prev=40,e.t4=e.catch(2),n.e(e.t4);case 43:return e.prev=43,n.f(),e.finish(43);case 46:case"end":return e.stop()}}),e,this,[[2,40,43,46],[12,25,28,31]])}))},{key:"containsEntireContent",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.anchor.root,t=Ki._createAt(e,0),n=Ki._createAt(e,"end");return t.isTouching(this.getFirstPosition())&&n.isTouching(this.getLastPosition())}},{key:"_pushRange",value:function(e){this._checkRange(e),this._ranges.push(new eo(e.start,e.end))}},{key:"_checkRange",value:function(e){for(var t=0;t<this._ranges.length;t++)if(e.isIntersecting(this._ranges[t]))throw new Ke.default("model-selection-range-intersects",[this,e],{addedRange:e,intersectingRange:this._ranges[t]})}},{key:"_removeAllRanges",value:function(){for(;this._ranges.length>0;)this._popRange()}},{key:"_popRange",value:function(){this._ranges.pop()}}]),e}();function lo(e,t){return!t.has(e)&&(t.add(e),e.root.document.model.schema.isBlock(e)&&e.parent)}function uo(e,t,n){return lo(e,t)&&ho(e,n)}function fo(e,t){var n=e.parent.root.document.model.schema,r=e.parent.getAncestors({parentFirst:!0,includeSelf:!0}),i=!1,o=r.find((function(e){return!i&&!(i=n.isLimit(e))&&lo(e,t)}));return r.forEach((function(e){return t.add(e)})),o}function ho(e,t){var n=function(e){for(var t=e.root.document.model.schema,n=e.parent;n;){if(t.isBlock(n))return n;n=n.parent}}(e);return!n||!t.containsRange(eo._createOn(n),!0)}Object(u.default)(co,Qe.default);var po=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var i;return _classCallCheck(this,n),i=t.call(this,e,r),(function(){var e=this;this.listenTo(this.root.document.model,"applyOperation",(function(t,n){var r=n[0];r.isDocumentOperation&&(function(e){var t=this.getTransformedByOperation(e),n=eo._createFromRanges(t),r=!n.isEqual(this),i=function(e,t){switch(t.type){case"insert":return e.containsPosition(t.position);case"move":case"remove":case"reinsert":case"merge":return e.containsPosition(t.sourcePosition)||e.start.isEqual(t.sourcePosition)||e.containsPosition(t.targetPosition);case"split":return e.containsPosition(t.splitPosition)||e.containsPosition(t.insertionPosition)}return!1}(this,e),o=null;if(r){"$graveyard"==n.root.rootName&&(o="remove"==e.type?e.sourcePosition:e.deletionPosition);var a=this.toRange();this.start=n.start,this.end=n.end,this.fire("change:range",a,{deletionPosition:o})}else i&&this.fire("change:content",this.toRange(),{deletionPosition:o})}).call(e,r)}),{priority:"low"})}).call(_assertThisInitialized(i)),i}return _createClass(n,[{key:"detach",value:function(){this.stopListening()}},{key:"is",value:function(e){return"liveRange"===e||"model:liveRange"===e||"range"==e||"model:range"===e}},{key:"toRange",value:function(){return new eo(this.start,this.end)}}],[{key:"fromRange",value:function(e){return new n(e.start,e.end)}}]),n}(eo);Object(u.default)(po,Qe.default);var vo="selection:",go=function(){function e(t){_classCallCheck(this,e),this._selection=new mo(t),this._selection.delegate("change:range").to(this),this._selection.delegate("change:attribute").to(this),this._selection.delegate("change:marker").to(this)}return _createClass(e,[{key:"isCollapsed",get:function(){return this._selection.isCollapsed}},{key:"anchor",get:function(){return this._selection.anchor}},{key:"focus",get:function(){return this._selection.focus}},{key:"rangeCount",get:function(){return this._selection.rangeCount}},{key:"hasOwnRange",get:function(){return this._selection.hasOwnRange}},{key:"isBackward",get:function(){return this._selection.isBackward}},{key:"isGravityOverridden",get:function(){return this._selection.isGravityOverridden}},{key:"markers",get:function(){return this._selection.markers}},{key:"_ranges",get:function(){return this._selection._ranges}},{key:"getRanges",value:function(){return this._selection.getRanges()}},{key:"getFirstPosition",value:function(){return this._selection.getFirstPosition()}},{key:"getLastPosition",value:function(){return this._selection.getLastPosition()}},{key:"getFirstRange",value:function(){return this._selection.getFirstRange()}},{key:"getLastRange",value:function(){return this._selection.getLastRange()}},{key:"getSelectedBlocks",value:function(){return this._selection.getSelectedBlocks()}},{key:"getSelectedElement",value:function(){return this._selection.getSelectedElement()}},{key:"containsEntireContent",value:function(e){return this._selection.containsEntireContent(e)}},{key:"destroy",value:function(){this._selection.destroy()}},{key:"getAttributeKeys",value:function(){return this._selection.getAttributeKeys()}},{key:"getAttributes",value:function(){return this._selection.getAttributes()}},{key:"getAttribute",value:function(e){return this._selection.getAttribute(e)}},{key:"hasAttribute",value:function(e){return this._selection.hasAttribute(e)}},{key:"refresh",value:function(){this._selection._updateMarkers(),this._selection._updateAttributes(!1)}},{key:"observeMarkers",value:function(e){this._selection.observeMarkers(e)}},{key:"is",value:function(e){return"selection"===e||"model:selection"==e||"documentSelection"==e||"model:documentSelection"==e}},{key:"_setFocus",value:function(e,t){this._selection.setFocus(e,t)}},{key:"_setTo",value:function(e,t,n){this._selection.setTo(e,t,n)}},{key:"_setAttribute",value:function(e,t){this._selection.setAttribute(e,t)}},{key:"_removeAttribute",value:function(e){this._selection.removeAttribute(e)}},{key:"_getStoredAttributes",value:function(){return this._selection._getStoredAttributes()}},{key:"_overrideGravity",value:function(){return this._selection.overrideGravity()}},{key:"_restoreGravity",value:function(e){this._selection.restoreGravity(e)}}],[{key:"_getStoreAttributeKey",value:function(e){return vo+e}},{key:"_isStoreAttributeKey",value:function(e){return e.startsWith(vo)}}]),e}();Object(u.default)(go,Qe.default);var mo=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this)).markers=new $e.default({idProperty:"name"}),r._model=e.model,r._document=e,r._attributePriority=new Map,r._selectionRestorePosition=null,r._hasChangedRange=!1,r._overriddenGravityRegister=new Set,r._observedMarkers=new Set,r.listenTo(r._model,"applyOperation",(function(e,t){var n=t[0];n.isDocumentOperation&&"marker"!=n.type&&"rename"!=n.type&&"noop"!=n.type&&(0==r._ranges.length&&r._selectionRestorePosition&&r._fixGraveyardSelection(r._selectionRestorePosition),r._selectionRestorePosition=null,r._hasChangedRange&&(r._hasChangedRange=!1,r.fire("change:range",{directChange:!1})))}),{priority:"lowest"}),r.on("change:range",(function(){var e,t=_createForOfIteratorHelper(r.getRanges());try{for(t.s();!(e=t.n()).done;){var n=e.value;if(!r._document._validateSelectionRange(n))throw new Ke.default("document-selection-wrong-position",_assertThisInitialized(r),{range:n})}}catch(i){t.e(i)}finally{t.f()}})),r.listenTo(r._model.markers,"update",(function(e,t,n,i){r._updateMarker(t,i)})),r.listenTo(r._document,"change",(function(e,t){!function(e,t){var n,r=_createForOfIteratorHelper(e.document.differ.getChanges());try{var i=function(){var r=n.value;if("insert"!=r.type)return"continue";var i=r.position.parent;r.length===i.maxOffset&&e.enqueueChange(t,(function(e){var t,n=_createForOfIteratorHelper(Array.from(i.getAttributeKeys()).filter((function(e){return e.startsWith(vo)})));try{for(n.s();!(t=n.n()).done;){var r=t.value;e.removeAttribute(r,i)}}catch(o){n.e(o)}finally{n.f()}}))};for(r.s();!(n=r.n()).done;)i()}catch(o){r.e(o)}finally{r.f()}}(r._model,t)})),r}return _createClass(n,[{key:"isCollapsed",get:function(){return 0===this._ranges.length?this._document._getDefaultRange().isCollapsed:_get3(_getPrototypeOf(n.prototype),"isCollapsed",this)}},{key:"anchor",get:function(){return _get3(_getPrototypeOf(n.prototype),"anchor",this)||this._document._getDefaultRange().start}},{key:"focus",get:function(){return _get3(_getPrototypeOf(n.prototype),"focus",this)||this._document._getDefaultRange().end}},{key:"rangeCount",get:function(){return this._ranges.length?this._ranges.length:1}},{key:"hasOwnRange",get:function(){return this._ranges.length>0}},{key:"isGravityOverridden",get:function(){return!!this._overriddenGravityRegister.size}},{key:"destroy",value:function(){for(var e=0;e<this._ranges.length;e++)this._ranges[e].detach();this.stopListening()}},{key:"getRanges",value:regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._ranges.length){e.next=4;break}return e.delegateYield(_get3(_getPrototypeOf(n.prototype),"getRanges",this).call(this),"t0",2);case 2:e.next=6;break;case 4:return e.next=6,this._document._getDefaultRange();case 6:case"end":return e.stop()}}),e,this)}))},{key:"getFirstRange",value:function(){return _get3(_getPrototypeOf(n.prototype),"getFirstRange",this).call(this)||this._document._getDefaultRange()}},{key:"getLastRange",value:function(){return _get3(_getPrototypeOf(n.prototype),"getLastRange",this).call(this)||this._document._getDefaultRange()}},{key:"setTo",value:function(e,t,r){_get3(_getPrototypeOf(n.prototype),"setTo",this).call(this,e,t,r),this._updateAttributes(!0),this._updateMarkers()}},{key:"setFocus",value:function(e,t){_get3(_getPrototypeOf(n.prototype),"setFocus",this).call(this,e,t),this._updateAttributes(!0),this._updateMarkers()}},{key:"setAttribute",value:function(e,t){this._setAttribute(e,t)&&this.fire("change:attribute",{attributeKeys:[e],directChange:!0})}},{key:"removeAttribute",value:function(e){this._removeAttribute(e)&&this.fire("change:attribute",{attributeKeys:[e],directChange:!0})}},{key:"overrideGravity",value:function(){var e=Object(Sr.a)();return this._overriddenGravityRegister.add(e),1===this._overriddenGravityRegister.size&&this._updateAttributes(!0),e}},{key:"restoreGravity",value:function(e){if(!this._overriddenGravityRegister.has(e))throw new Ke.default("document-selection-gravity-wrong-restore",this,{uid:e});this._overriddenGravityRegister.delete(e),this.isGravityOverridden||this._updateAttributes(!0)}},{key:"observeMarkers",value:function(e){this._observedMarkers.add(e),this._updateMarkers()}},{key:"_popRange",value:function(){this._ranges.pop().detach()}},{key:"_pushRange",value:function(e){var t=this._prepareRange(e);t&&this._ranges.push(t)}},{key:"_prepareRange",value:function(e){var t=this;if(this._checkRange(e),e.root!=this._document.graveyard){var n=po.fromRange(e);return n.on("change:range",(function(e,r,i){if(t._hasChangedRange=!0,n.root==t._document.graveyard){t._selectionRestorePosition=i.deletionPosition;var o=t._ranges.indexOf(n);t._ranges.splice(o,1),n.detach()}})),n}}},{key:"_updateMarkers",value:function(){if(this._observedMarkers.size){var e,t=[],n=!1,r=_createForOfIteratorHelper(this._model.markers);try{for(r.s();!(e=r.n()).done;){var i=e.value,o=i.name.split(":",1)[0];if(this._observedMarkers.has(o)){var a,s=i.getRange(),c=_createForOfIteratorHelper(this.getRanges());try{for(c.s();!(a=c.n()).done;){var l=a.value;s.containsRange(l,!l.isCollapsed)&&t.push(i)}}catch(m){c.e(m)}finally{c.f()}}}}catch(m){r.e(m)}finally{r.f()}for(var u=Array.from(this.markers),d=0,f=t;d<f.length;d++){var h=f[d];this.markers.has(h)||(this.markers.add(h),n=!0)}for(var p=0,v=Array.from(this.markers);p<v.length;p++){var g=v[p];t.includes(g)||(this.markers.remove(g),n=!0)}n&&this.fire("change:marker",{oldMarkers:u,directChange:!1})}}},{key:"_updateMarker",value:function(e,t){var n=e.name.split(":",1)[0];if(this._observedMarkers.has(n)){var r=!1,i=Array.from(this.markers),o=this.markers.has(e);if(t){var a,s=!1,c=_createForOfIteratorHelper(this.getRanges());try{for(c.s();!(a=c.n()).done;){var l=a.value;if(t.containsRange(l,!l.isCollapsed)){s=!0;break}}}catch(u){c.e(u)}finally{c.f()}s&&!o?(this.markers.add(e),r=!0):!s&&o&&(this.markers.remove(e),r=!0)}else o&&(this.markers.remove(e),r=!0);r&&this.fire("change:marker",{oldMarkers:i,directChange:!1})}}},{key:"_updateAttributes",value:function(e){var t=ft(this._getSurroundingAttributes()),n=ft(this.getAttributes());if(e)this._attributePriority=new Map,this._attrs=new Map;else{var r,i=_createForOfIteratorHelper(this._attributePriority);try{for(i.s();!(r=i.n()).done;){var o=_slicedToArray(r.value,2),a=o[0];"low"==o[1]&&(this._attrs.delete(a),this._attributePriority.delete(a))}}catch(g){i.e(g)}finally{i.f()}}this._setAttributesTo(t);var s,c=[],l=_createForOfIteratorHelper(this.getAttributes());try{for(l.s();!(s=l.n()).done;){var u=_slicedToArray(s.value,2),d=u[0],f=u[1];n.has(d)&&n.get(d)===f||c.push(d)}}catch(g){l.e(g)}finally{l.f()}var h,p=_createForOfIteratorHelper(n);try{for(p.s();!(h=p.n()).done;){var v=_slicedToArray(h.value,1)[0];this.hasAttribute(v)||c.push(v)}}catch(g){p.e(g)}finally{p.f()}c.length>0&&this.fire("change:attribute",{attributeKeys:c,directChange:!1})}},{key:"_setAttribute",value:function(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=r?"normal":"low";return("low"!=i||"normal"!=this._attributePriority.get(e))&&_get3(_getPrototypeOf(n.prototype),"getAttribute",this).call(this,e)!==t&&(this._attrs.set(e,t),this._attributePriority.set(e,i),!0)}},{key:"_removeAttribute",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=t?"normal":"low";return!("low"==r&&"normal"==this._attributePriority.get(e)||(this._attributePriority.set(e,r),!_get3(_getPrototypeOf(n.prototype),"hasAttribute",this).call(this,e)||(this._attrs.delete(e),0)))}},{key:"_setAttributesTo",value:function(e){var t,n=new Set,r=_createForOfIteratorHelper(this.getAttributes());try{for(r.s();!(t=r.n()).done;){var i=_slicedToArray(t.value,2),o=i[0],a=i[1];e.get(o)!==a&&this._removeAttribute(o,!1)}}catch(f){r.e(f)}finally{r.f()}var s,c=_createForOfIteratorHelper(e);try{for(c.s();!(s=c.n()).done;){var l=_slicedToArray(s.value,2),u=l[0],d=l[1];this._setAttribute(u,d,!1)&&n.add(u)}}catch(f){c.e(f)}finally{c.f()}return n}},{key:"_getStoredAttributes",value:regeneratorRuntime.mark((function e(){var t,n,r,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.getFirstPosition().parent,!this.isCollapsed||!t.isEmpty){e.next=21;break}n=_createForOfIteratorHelper(t.getAttributeKeys()),e.prev=3,n.s();case 5:if((r=n.n()).done){e.next=13;break}if(i=r.value,e.t0=i.startsWith(vo),!e.t0){e.next=11;break}return e.next=11,[i.substr(vo.length),t.getAttribute(i)];case 11:e.next=5;break;case 13:e.next=18;break;case 15:e.prev=15,e.t1=e.catch(3),n.e(e.t1);case 18:return e.prev=18,n.f(),e.finish(18);case 21:case"end":return e.stop()}}),e,this,[[3,15,18,21]])}))},{key:"_getSurroundingAttributes",value:function(){var e=this.getFirstPosition(),t=this._model.schema,n=null;if(this.isCollapsed){var r=e.textNode?e.textNode:e.nodeBefore,i=e.textNode?e.textNode:e.nodeAfter;if(this.isGravityOverridden||(n=yo(r)),n||(n=yo(i)),!this.isGravityOverridden&&!n)for(var o=r;o&&!t.isInline(o)&&!n;)n=yo(o=o.previousSibling);if(!n)for(var a=i;a&&!t.isInline(a)&&!n;)n=yo(a=a.nextSibling);n||(n=this._getStoredAttributes())}else{var s,c=_createForOfIteratorHelper(this.getFirstRange());try{for(c.s();!(s=c.n()).done;){var l=s.value;if(l.item.is("element")&&t.isObject(l.item))break;if("text"==l.type){n=l.item.getAttributes();break}}}catch(u){c.e(u)}finally{c.f()}}return n}},{key:"_fixGraveyardSelection",value:function(e){var t=this._model.schema.getNearestSelectionRange(e);t&&this._pushRange(t)}}]),n}(co);function yo(e){return e instanceof qi||e instanceof Wi?e.getAttributes():null}var ko=function(){function e(t){_classCallCheck(this,e),this._dispatchers=t}return _createClass(e,[{key:"add",value:function(e){var t,n=_createForOfIteratorHelper(this._dispatchers);try{for(n.s();!(t=n.n()).done;){e(t.value)}}catch(r){n.e(r)}finally{n.f()}return this}}]),e}(),_o=function(e){return Ue(e,5)},bo=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"elementToElement",value:function(e){return this.add(function(e){return(e=_o(e)).view=Co(e.view,"container"),function(t){if(t.on("insert:"+e.model,function(e){return function(t,n,r){var i=e(n.item,r);if(i&&r.consumable.consume(n.item,"insert")){var o=r.mapper.toViewPosition(n.range.start);r.mapper.bindElements(n.item,i),r.writer.insert(o,i)}}}(e.view),{priority:e.converterPriority||"normal"}),e.triggerBy){if(e.triggerBy.attributes){var n,r=_createForOfIteratorHelper(e.triggerBy.attributes);try{for(r.s();!(n=r.n()).done;){var i=n.value;t._mapReconversionTriggerEvent(e.model,"attribute:".concat(i,":").concat(e.model))}}catch(c){r.e(c)}finally{r.f()}}if(e.triggerBy.children){var o,a=_createForOfIteratorHelper(e.triggerBy.children);try{for(a.s();!(o=a.n()).done;){var s=o.value;t._mapReconversionTriggerEvent(e.model,"insert:"+s),t._mapReconversionTriggerEvent(e.model,"remove:"+s)}}catch(c){a.e(c)}finally{a.f()}}}}}(e))}},{key:"attributeToElement",value:function(e){return this.add(function(e){var t="attribute:"+((e=_o(e)).model.key?e.model.key:e.model);if(e.model.name&&(t+=":"+e.model.name),e.model.values){var n,r=_createForOfIteratorHelper(e.model.values);try{for(r.s();!(n=r.n()).done;){var i=n.value;e.view[i]=Co(e.view[i],"attribute")}}catch(a){r.e(a)}finally{r.f()}}else e.view=Co(e.view,"attribute");var o=To(e);return function(n){n.on(t,function(e){return function(t,n,r){var i=e(n.attributeOldValue,r),o=e(n.attributeNewValue,r);if((i||o)&&r.consumable.consume(n.item,t.name)){var a=r.writer;if(n.item instanceof co||n.item instanceof go)a.wrap(a.document.selection.getFirstRange(),o);else{var s=r.mapper.toViewRange(n.range);null!==n.attributeOldValue&&i&&(s=a.unwrap(s,i)),null!==n.attributeNewValue&&o&&a.wrap(s,o)}}}}(o),{priority:e.converterPriority||"normal"})}}(e))}},{key:"attributeToAttribute",value:function(e){return this.add(function(e){var t="attribute:"+((e=_o(e)).model.key?e.model.key:e.model);if(e.model.name&&(t+=":"+e.model.name),e.model.values){var n,r=_createForOfIteratorHelper(e.model.values);try{for(r.s();!(n=r.n()).done;){var i=n.value;e.view[i]=Ao(e.view[i])}}catch(a){r.e(a)}finally{r.f()}}else e.view=Ao(e.view);var o=To(e);return function(n){n.on(t,function(e){return function(t,n,r){var i=e(n.attributeOldValue,r),o=e(n.attributeNewValue,r);if((i||o)&&r.consumable.consume(n.item,t.name)){var s=r.mapper.toViewElement(n.item),c=r.writer;if(!s)throw new Ke.default("conversion-attribute-to-attribute-on-text",[n,r]);if(null!==n.attributeOldValue&&i)if("class"==i.key){var l,u=_createForOfIteratorHelper(Xe(i.value));try{for(u.s();!(l=u.n()).done;){var d=l.value;c.removeClass(d,s)}}catch(a){u.e(a)}finally{u.f()}}else if("style"==i.key)for(var f=0,h=Object.keys(i.value);f<h.length;f++){var p=h[f];c.removeStyle(p,s)}else c.removeAttribute(i.key,s);if(null!==n.attributeNewValue&&o)if("class"==o.key){var v,g=_createForOfIteratorHelper(Xe(o.value));try{for(g.s();!(v=g.n()).done;){var m=v.value;c.addClass(m,s)}}catch(a){g.e(a)}finally{g.f()}}else if("style"==o.key)for(var y=0,k=Object.keys(o.value);y<k.length;y++){var _=k[y];c.setStyle(_,o.value[_],s)}else c.setAttribute(o.key,o.value,s)}}}(o),{priority:e.converterPriority||"normal"})}}(e))}},{key:"markerToElement",value:function(e){return this.add(function(e){return(e=_o(e)).view=Co(e.view,"ui"),function(t){t.on("addMarker:"+e.model,function(e){return function(t,n,r){n.isOpening=!0;var i=e(n,r);n.isOpening=!1;var o=e(n,r);if(i&&o){var a=n.markerRange;if(!a.isCollapsed||r.consumable.consume(a,t.name)){var s,c=_createForOfIteratorHelper(a);try{for(c.s();!(s=c.n()).done;){var l=s.value;if(!r.consumable.consume(l.item,t.name))return}}catch(f){c.e(f)}finally{c.f()}var u=r.mapper,d=r.writer;d.insert(u.toViewPosition(a.start),i),r.mapper.bindElementToMarker(i,n.markerName),a.isCollapsed||(d.insert(u.toViewPosition(a.end),o),r.mapper.bindElementToMarker(o,n.markerName)),t.stop()}}}}(e.view),{priority:e.converterPriority||"normal"}),t.on("removeMarker:"+e.model,(function(e,t,n){var r=n.mapper.markerNameToElements(t.markerName);if(r){var i,o=_createForOfIteratorHelper(r);try{for(o.s();!(i=o.n()).done;){var a=i.value;n.mapper.unbindElementFromMarkerName(a,t.markerName),n.writer.clear(n.writer.createRangeOn(a),a)}}catch(s){o.e(s)}finally{o.f()}n.writer.clearClonedElementsGroup(t.markerName),e.stop()}}),{priority:e.converterPriority||"normal"})}}(e))}},{key:"markerToHighlight",value:function(e){return this.add(function(e){return function(t){t.on("addMarker:"+e.model,function(e){return function(t,n,r){if(n.item&&(n.item instanceof co||n.item instanceof go||n.item.is("$textProxy"))){var i=So(e,n,r);if(i&&r.consumable.consume(n.item,t.name)){var o=r.writer,a=wo(o,i),s=o.document.selection;if(n.item instanceof co||n.item instanceof go)o.wrap(s.getFirstRange(),a,s);else{var c,l=r.mapper.toViewRange(n.range),u=_createForOfIteratorHelper(o.wrap(l,a).getItems());try{for(u.s();!(c=u.n()).done;){var d=c.value;if(d.is("attributeElement")&&d.isSimilar(a)){r.mapper.bindElementToMarker(d,n.markerName);break}}}catch(f){u.e(f)}finally{u.f()}}}}}}(e.view),{priority:e.converterPriority||"normal"}),t.on("addMarker:"+e.model,function(e){return function(t,n,r){if(n.item&&n.item instanceof Gi){var i=So(e,n,r);if(i&&r.consumable.test(n.item,t.name)){var o=r.mapper.toViewElement(n.item);if(o&&o.getCustomProperty("addHighlight")){r.consumable.consume(n.item,t.name);var a,s=_createForOfIteratorHelper(eo._createIn(n.item));try{for(s.s();!(a=s.n()).done;){var c=a.value;r.consumable.consume(c.item,t.name)}}catch(l){s.e(l)}finally{s.f()}o.getCustomProperty("addHighlight")(o,i,r.writer),r.mapper.bindElementToMarker(o,n.markerName)}}}}}(e.view),{priority:e.converterPriority||"normal"}),t.on("removeMarker:"+e.model,function(e){return function(t,n,r){if(!n.markerRange.isCollapsed){var i=So(e,n,r);if(i){var o=wo(r.writer,i),a=r.mapper.markerNameToElements(n.markerName);if(a){var s,c=_createForOfIteratorHelper(a);try{for(c.s();!(s=c.n()).done;){var l=s.value;r.mapper.unbindElementFromMarkerName(l,n.markerName),l.is("attributeElement")?r.writer.unwrap(r.writer.createRangeOn(l),o):l.getCustomProperty("removeHighlight")(l,i.id,r.writer)}}catch(u){c.e(u)}finally{c.f()}r.writer.clearClonedElementsGroup(n.markerName),t.stop()}}}}}(e.view),{priority:e.converterPriority||"normal"})}}(e))}},{key:"markerToData",value:function(e){return this.add(function(e){var t=(e=_o(e)).model;return e.view||(e.view=function(n){return{group:t,name:n.substr(e.model.length+1)}}),function(n){n.on("addMarker:"+t,function(e){return function(t,n,r){var i=e(n.markerName,r);if(i){var o=n.markerRange;r.consumable.consume(o,t.name)&&(xo(o,!1,r,n,i),xo(o,!0,r,n,i),t.stop())}}}(e.view),{priority:e.converterPriority||"normal"}),n.on("removeMarker:"+t,function(e){return function(t,n,r){var i=e(n.markerName,r);if(i){var o=r.mapper.markerNameToElements(n.markerName);if(o){var a,s=_createForOfIteratorHelper(o);try{for(s.s();!(a=s.n()).done;){var c=a.value;r.mapper.unbindElementFromMarkerName(c,n.markerName),c.is("containerElement")?(l("data-".concat(i.group,"-start-before"),c),l("data-".concat(i.group,"-start-after"),c),l("data-".concat(i.group,"-end-before"),c),l("data-".concat(i.group,"-end-after"),c)):r.writer.clear(r.writer.createRangeOn(c),c)}}catch(u){s.e(u)}finally{s.f()}r.writer.clearClonedElementsGroup(n.markerName),t.stop()}}function l(e,t){if(t.hasAttribute(e)){var n=new Set(t.getAttribute(e).split(","));n.delete(i.name),0==n.size?r.writer.removeAttribute(e,t):r.writer.setAttribute(e,Array.from(n).join(","),t)}}}}(e.view),{priority:e.converterPriority||"normal"})}}(e))}}]),n}(ko);function wo(e,t){var n=e.createAttributeElement("span",t.attributes);return t.classes&&n._addClass(t.classes),t.priority&&(n._priority=t.priority),n._id=t.id,n}function xo(e,t,n,r,i){var o,a,s=t?e.start:e.end;n.schema.checkChild(s,"$text")?function(e,t,n,r,i){var o=n.writer.createUIElement("".concat(i.group,"-").concat(t?"start":"end"),i.name?{name:i.name}:null);n.writer.insert(e,o),n.mapper.bindElementToMarker(o,r.markerName)}(n.mapper.toViewPosition(s),t,n,r,i):(t&&s.nodeAfter||!t&&!s.nodeBefore?(o=s.nodeAfter,a=!0):(o=s.nodeBefore,a=!1),function(e,t,n,r,i,o){var a="data-".concat(o.group,"-").concat(t?"start":"end","-").concat(n?"before":"after"),s=e.hasAttribute(a)?e.getAttribute(a).split(","):[];s.unshift(o.name),r.writer.setAttribute(a,s.join(","),e),r.mapper.bindElementToMarker(e,i.markerName)}(n.mapper.toViewElement(o),t,a,n,r,i))}function Co(e,t){return"function"==typeof e?e:function(n,r){return function(e,t,n){var r;"string"==typeof e&&(e={name:e});var i=t.writer,o=Object.assign({},e.attributes);if(r="container"==n?i.createContainerElement(e.name,o):"attribute"==n?i.createAttributeElement(e.name,o,{priority:e.priority||mn.DEFAULT_PRIORITY}):i.createUIElement(e.name,o),e.styles)for(var a=0,s=Object.keys(e.styles);a<s.length;a++){var c=s[a];i.setStyle(c,e.styles[c],r)}if(e.classes){var l=e.classes;if("string"==typeof l)i.addClass(l,r);else{var u,d=_createForOfIteratorHelper(l);try{for(d.s();!(u=d.n()).done;){var f=u.value;i.addClass(f,r)}}catch(h){d.e(h)}finally{d.f()}}}return r}(e,r,t)}}function To(e){return e.model.values?function(t,n){var r=e.view[t];return r?r(t,n):null}:e.view}function Ao(e){return"string"==typeof e?function(t){return{key:e,value:t}}:"object"==typeof e?e.value?function(){return e}:function(t){return{key:e.key,value:t}}:e}function So(e,t,n){var r="function"==typeof e?e(t,n):e;return r?(r.priority||(r.priority=10),r.id||(r.id=t.markerName),r):null}function Eo(e){var t,n=e.model,r=n.schema,i=n.document,o=_createForOfIteratorHelper(i.getRootNames());try{for(o.s();!(t=o.n()).done;){var a=t.value,s=i.getRoot(a);if(s.isEmpty&&!r.checkChild(s,"$text")&&r.checkChild(s,"paragraph"))return e.insertElement("paragraph",s),!0}}catch(c){o.e(c)}finally{o.f()}return!1}function Io(e,t,n){var r=n.createContext(e);return!!n.checkChild(r,"paragraph")&&!!n.checkChild(r.push("paragraph"),t)}function Oo(e,t){var n=t.createElement("paragraph");return t.insert(n,e),t.createPositionAt(n,0)}var Ro=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"elementToElement",value:function(e){return this.add(Po(e))}},{key:"elementToAttribute",value:function(e){return this.add(function(e){Do(e=_o(e));var t=Fo(e,!1),n=Mo(e.view),r=n?"element:"+n:"element";return function(n){n.on(r,t,{priority:e.converterPriority||"low"})}}(e))}},{key:"attributeToAttribute",value:function(e){return this.add(function(e){var t=null;("string"==typeof(e=_o(e)).view||e.view.key)&&(t=function(e){"string"==typeof e.view&&(e.view={key:e.view});var t,n=e.view.key;return t="class"==n||"style"==n?_defineProperty2({},"class"==n?"classes":"styles",e.view.value):{attributes:_defineProperty2({},n,void 0===e.view.value?/[\s\S]*/:e.view.value)},e.view.name&&(t.name=e.view.name),e.view=t,n}(e)),Do(e,t);var n=Fo(e,!0);return function(t){t.on("element",n,{priority:e.converterPriority||"low"})}}(e))}},{key:"elementToMarker",value:function(e){return Object(Ke.logWarning)("upcast-helpers-element-to-marker-deprecated"),this.add(function(e){return function(e){var t=e.model;e.model=function(e,n){var r="string"==typeof t?t:t(e,n);return n.writer.createElement("$marker",{"data-name":r})}}(e=_o(e)),Po(e)}(e))}},{key:"dataToMarker",value:function(e){return this.add(function(e){(e=_o(e)).model||(e.model=function(t){return t?e.view+":"+t:e.view});var t=No(jo(e,"start")),n=No(jo(e,"end"));return function(r){r.on("element:"+e.view+"-start",t,{priority:e.converterPriority||"normal"}),r.on("element:"+e.view+"-end",n,{priority:e.converterPriority||"normal"});var i=Oi.default.get("low"),o=Oi.default.get("highest"),a=Oi.default.get(e.converterPriority)/o;r.on("element",function(e){return function(t,n,r){var i="data-"+e.view;function o(t,i){var o,a=_createForOfIteratorHelper(i);try{for(a.s();!(o=a.n()).done;){var s=o.value,c=e.model(s,r),l=r.writer.createElement("$marker",{"data-name":c});r.writer.insert(l,t),n.modelCursor=n.modelCursor.isEqual(t)?n.modelCursor.getShiftedBy(1):n.modelCursor._getTransformedByInsertion(t,1),n.modelRange=n.modelRange._getTransformedByInsertion(t,1)[0]}}catch(u){a.e(u)}finally{a.f()}}n.modelRange||(n=Object.assign(n,r.convertChildren(n.viewItem,n.modelCursor))),r.consumable.consume(n.viewItem,{attributes:i+"-end-after"})&&o(n.modelRange.end,n.viewItem.getAttribute(i+"-end-after").split(",")),r.consumable.consume(n.viewItem,{attributes:i+"-start-after"})&&o(n.modelRange.end,n.viewItem.getAttribute(i+"-start-after").split(",")),r.consumable.consume(n.viewItem,{attributes:i+"-end-before"})&&o(n.modelRange.start,n.viewItem.getAttribute(i+"-end-before").split(",")),r.consumable.consume(n.viewItem,{attributes:i+"-start-before"})&&o(n.modelRange.start,n.viewItem.getAttribute(i+"-start-before").split(","))}}(e),{priority:i+a})}}(e))}}]),n}(ko);function Po(e){var t=No(e=_o(e)),n=Mo(e.view),r=n?"element:"+n:"element";return function(n){n.on(r,t,{priority:e.converterPriority||"normal"})}}function Mo(e){return"string"==typeof e?e:"object"==typeof e&&"string"==typeof e.name?e.name:null}function No(e){var t=new ht(e.view);return function(n,r,i){var o=t.match(r.viewItem);if(o){var a=o.match;if(a.name=!0,i.consumable.test(r.viewItem,a)){var s=function(e,t,n){return e instanceof Function?e(t,n):n.writer.createElement(e)}(e.model,r.viewItem,i);s&&i.safeInsert(s,r.modelCursor)&&(i.consumable.consume(r.viewItem,a),i.convertChildren(r.viewItem,s),i.updateConversionResult(s,r))}}}}function Do(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=null===t||function(e){return e.getAttribute(t)};e.model={key:"object"!=typeof e.model?e.model:e.model.key,value:"object"!=typeof e.model||void 0===e.model.value?n:e.model.value}}function Fo(e,t){var n=new ht(e.view);return function(r,i,o){var a=n.match(i.viewItem);if(a){var s=e.model.key,c="function"==typeof e.model.value?e.model.value(i.viewItem,o):e.model.value;null!==c&&(function(e,t){var n="function"==typeof e?e(t):e;return!("object"==typeof n&&!Mo(n)||n.classes||n.attributes||n.styles)}(e.view,i.viewItem)?a.match.name=!0:delete a.match.name,o.consumable.test(i.viewItem,a.match)&&(i.modelRange||(i=Object.assign(i,o.convertChildren(i.viewItem,i.modelCursor))),function(e,t,n,r){for(var i=!1,o=0,a=Array.from(e.getItems({shallow:n}));o<a.length;o++){var s=a[o];r.schema.checkAttribute(s,t.key)&&(i=!0,s.hasAttribute(t.key)||r.writer.setAttribute(t.key,t.value,s))}return i}(i.modelRange,{key:s,value:c},t,o)&&o.consumable.consume(i.viewItem,a.match)))}}}function jo(e,t){var n={};return n.view=e.view+"-"+t,n.model=function(t,n){var r=t.getAttribute("name"),i=e.model(r,n);return n.writer.createElement("$marker",{"data-name":i})},n}var Lo=function(){function e(t,n){var r=this;_classCallCheck(this,e),this.model=t,this.view=new Hi(n),this.mapper=new to,this.downcastDispatcher=new io({mapper:this.mapper,schema:t.schema});var i=this.model.document,o=i.selection,a=this.model.markers;this.listenTo(this.model,"_beforeChanges",(function(){r.view._disableRendering(!0)}),{priority:"highest"}),this.listenTo(this.model,"_afterChanges",(function(){r.view._disableRendering(!1)}),{priority:"lowest"}),this.listenTo(i,"change",(function(){r.view.change((function(e){r.downcastDispatcher.convertChanges(i.differ,a,e),r.downcastDispatcher.convertSelection(o,a,e)}))}),{priority:"low"}),this.listenTo(this.view.document,"selectionChange",function(e,t){return function(n,r){var i,o=r.newSelection,a=[],s=_createForOfIteratorHelper(o.getRanges());try{for(s.s();!(i=s.n()).done;){var c=i.value;a.push(t.toModelRange(c))}}catch(u){s.e(u)}finally{s.f()}var l=e.createSelection(a,{backward:o.isBackward});l.isEqual(e.document.selection)||e.change((function(e){e.setSelection(l)}))}}(this.model,this.mapper)),this.downcastDispatcher.on("insert:$text",(function(e,t,n){if(n.consumable.consume(t.item,"insert")){var r=n.writer,i=n.mapper.toViewPosition(t.range.start),o=r.createText(t.item.data);r.insert(i,o)}}),{priority:"lowest"}),this.downcastDispatcher.on("remove",(function(e,t,n){var r,i=n.mapper.toViewPosition(t.position),o=t.position.getShiftedBy(t.length),a=n.mapper.toViewPosition(o,{isPhantom:!0}),s=n.writer.createRange(i,a),c=n.writer.remove(s.getTrimmed()),l=_createForOfIteratorHelper(n.writer.createRangeIn(c).getItems());try{for(l.s();!(r=l.n()).done;){var u=r.value;n.mapper.unbindViewElement(u)}}catch(d){l.e(d)}finally{l.f()}}),{priority:"low"}),this.downcastDispatcher.on("selection",(function(e,t,n){var r,i=n.writer,o=_createForOfIteratorHelper(i.document.selection.getRanges());try{for(o.s();!(r=o.n()).done;){var a=r.value;a.isCollapsed&&a.end.parent.isAttached()&&n.writer.mergeAttributes(a.start)}}catch(s){o.e(s)}finally{o.f()}i.setSelection(null)}),{priority:"low"}),this.downcastDispatcher.on("selection",(function(e,t,n){var r=t.selection;if(!r.isCollapsed&&n.consumable.consume(r,"selection")){var i,o=[],a=_createForOfIteratorHelper(r.getRanges());try{for(a.s();!(i=a.n()).done;){var s=i.value,c=n.mapper.toViewRange(s);o.push(c)}}catch(l){a.e(l)}finally{a.f()}n.writer.setSelection(o,{backward:r.isBackward})}}),{priority:"low"}),this.downcastDispatcher.on("selection",(function(e,t,n){var r=t.selection;if(r.isCollapsed&&n.consumable.consume(r,"selection")){var i=n.writer,o=r.getFirstPosition(),a=n.mapper.toViewPosition(o),s=i.breakAttributes(a);i.setSelection(s)}}),{priority:"low"}),this.view.document.roots.bindTo(this.model.document.roots).using((function(e){if("$graveyard"==e.rootName)return null;var t=new Xt(r.view.document,e.name);return t.rootName=e.rootName,r.mapper.bindElements(e,t),t}))}return _createClass(e,[{key:"destroy",value:function(){this.view.destroy(),this.stopListening()}}]),e}();Object(u.default)(Lo,l.default);var Vo=function(){function e(){_classCallCheck(this,e),this._commands=new Map}return _createClass(e,[{key:"add",value:function(e,t){this._commands.set(e,t)}},{key:"get",value:function(e){return this._commands.get(e)}},{key:"execute",value:function(e){var t=this.get(e);if(!t)throw new Ke.default("commandcollection-command-not-found",this,{commandName:e});for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return t.execute.apply(t,r)}},{key:"names",value:regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(this._commands.keys(),"t0",1);case 1:case"end":return e.stop()}}),e,this)}))},{key:"commands",value:regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(this._commands.values(),"t0",1);case 1:case"end":return e.stop()}}),e,this)}))},{key:Symbol.iterator,value:function(){return this._commands[Symbol.iterator]()}},{key:"destroy",value:function(){var e,t=_createForOfIteratorHelper(this.commands());try{for(t.s();!(e=t.n()).done;){e.value.destroy()}}catch(n){t.e(n)}finally{t.f()}}}]),e}(),Bo=function(){function e(){_classCallCheck(this,e),this._consumables=new Map}return _createClass(e,[{key:"add",value:function(e,t){var n;e.is("$text")||e.is("documentFragment")?this._consumables.set(e,!0):(this._consumables.has(e)?n=this._consumables.get(e):(n=new zo(e),this._consumables.set(e,n)),n.add(t))}},{key:"test",value:function(e,t){var n=this._consumables.get(e);return void 0===n?null:e.is("$text")||e.is("documentFragment")?n:n.test(t)}},{key:"consume",value:function(e,t){return!!this.test(e,t)&&(e.is("$text")||e.is("documentFragment")?this._consumables.set(e,!1):this._consumables.get(e).consume(t),!0)}},{key:"revert",value:function(e,t){var n=this._consumables.get(e);void 0!==n&&(e.is("$text")||e.is("documentFragment")?this._consumables.set(e,!0):n.revert(t))}}],[{key:"consumablesFromElement",value:function(e){var t,n={element:e,name:!0,attributes:[],classes:[],styles:[]},r=_createForOfIteratorHelper(e.getAttributeKeys());try{for(r.s();!(t=r.n()).done;){var i=t.value;"style"!=i&&"class"!=i&&n.attributes.push(i)}}catch(d){r.e(d)}finally{r.f()}var o,a=_createForOfIteratorHelper(e.getClassNames());try{for(a.s();!(o=a.n()).done;){var s=o.value;n.classes.push(s)}}catch(d){a.e(d)}finally{a.f()}var c,l=_createForOfIteratorHelper(e.getStyleNames());try{for(l.s();!(c=l.n()).done;){var u=c.value;n.styles.push(u)}}catch(d){l.e(d)}finally{l.f()}return n}},{key:"createFrom",value:function(t,n){if(n||(n=new e(t)),t.is("$text"))return n.add(t),n;t.is("element")&&n.add(t,e.consumablesFromElement(t)),t.is("documentFragment")&&n.add(t);var r,i=_createForOfIteratorHelper(t.getChildren());try{for(i.s();!(r=i.n()).done;){var o=r.value;n=e.createFrom(o,n)}}catch(a){i.e(a)}finally{i.f()}return n}}]),e}(),zo=function(){function e(t){_classCallCheck(this,e),this.element=t,this._canConsumeName=null,this._consumables={attributes:new Map,styles:new Map,classes:new Map}}return _createClass(e,[{key:"add",value:function(e){for(var t in e.name&&(this._canConsumeName=!0),this._consumables)t in e&&this._add(t,e[t])}},{key:"test",value:function(e){if(e.name&&!this._canConsumeName)return this._canConsumeName;for(var t in this._consumables)if(t in e){var n=this._test(t,e[t]);if(!0!==n)return n}return!0}},{key:"consume",value:function(e){for(var t in e.name&&(this._canConsumeName=!1),this._consumables)t in e&&this._consume(t,e[t])}},{key:"revert",value:function(e){for(var t in e.name&&(this._canConsumeName=!0),this._consumables)t in e&&this._revert(t,e[t])}},{key:"_add",value:function(e,t){var n,r=Object(ie.a)(t)?t:[t],i=this._consumables[e],o=_createForOfIteratorHelper(r);try{for(o.s();!(n=o.n()).done;){var a=n.value;if("attributes"===e&&("class"===a||"style"===a))throw new Ke.default("viewconsumable-invalid-attribute",this);if(i.set(a,!0),"styles"===e){var s,c=_createForOfIteratorHelper(this.element.document.stylesProcessor.getRelatedStyles(a));try{for(c.s();!(s=c.n()).done;){var l=s.value;i.set(l,!0)}}catch(u){c.e(u)}finally{c.f()}}}}catch(u){o.e(u)}finally{o.f()}}},{key:"_test",value:function(e,t){var n,r=Object(ie.a)(t)?t:[t],i=this._consumables[e],o=_createForOfIteratorHelper(r);try{for(o.s();!(n=o.n()).done;){var a=n.value;if("attributes"!==e||"class"!==a&&"style"!==a){var s=i.get(a);if(void 0===s)return null;if(!s)return!1}else{var c="class"==a?"classes":"styles",l=this._test(c,_toConsumableArray(this._consumables[c].keys()));if(!0!==l)return l}}}catch(u){o.e(u)}finally{o.f()}return!0}},{key:"_consume",value:function(e,t){var n,r=Object(ie.a)(t)?t:[t],i=this._consumables[e],o=_createForOfIteratorHelper(r);try{for(o.s();!(n=o.n()).done;){var a=n.value;if("attributes"!==e||"class"!==a&&"style"!==a){if(i.set(a,!1),"styles"==e){var s,c=_createForOfIteratorHelper(this.element.document.stylesProcessor.getRelatedStyles(a));try{for(c.s();!(s=c.n()).done;){var l=s.value;i.set(l,!1)}}catch(d){c.e(d)}finally{c.f()}}}else{var u="class"==a?"classes":"styles";this._consume(u,_toConsumableArray(this._consumables[u].keys()))}}}catch(d){o.e(d)}finally{o.f()}}},{key:"_revert",value:function(e,t){var n,r=Object(ie.a)(t)?t:[t],i=this._consumables[e],o=_createForOfIteratorHelper(r);try{for(o.s();!(n=o.n()).done;){var a=n.value;if("attributes"!==e||"class"!==a&&"style"!==a)!1===i.get(a)&&i.set(a,!0);else{var s="class"==a?"classes":"styles";this._revert(s,_toConsumableArray(this._consumables[s].keys()))}}}catch(c){o.e(c)}finally{o.f()}}}]),e}(),Ho=function(){function e(){var t=this;_classCallCheck(this,e),this._sourceDefinitions={},this._attributeProperties={},this.decorate("checkChild"),this.decorate("checkAttribute"),this.on("checkAttribute",(function(e,t){t[0]=new Uo(t[0])}),{priority:"highest"}),this.on("checkChild",(function(e,n){n[0]=new Uo(n[0]),n[1]=t.getDefinition(n[1])}),{priority:"highest"})}return _createClass(e,[{key:"register",value:function(e,t){if(this._sourceDefinitions[e])throw new Ke.default("schema-cannot-register-item-twice",this,{itemName:e});this._sourceDefinitions[e]=[Object.assign({},t)],this._clearCache()}},{key:"extend",value:function(e,t){if(!this._sourceDefinitions[e])throw new Ke.default("schema-cannot-extend-missing-item",this,{itemName:e});this._sourceDefinitions[e].push(Object.assign({},t)),this._clearCache()}},{key:"getDefinitions",value:function(){return this._compiledDefinitions||this._compile(),this._compiledDefinitions}},{key:"getDefinition",value:function(e){var t;return t="string"==typeof e?e:e.is&&(e.is("$text")||e.is("$textProxy"))?"$text":e.name,this.getDefinitions()[t]}},{key:"isRegistered",value:function(e){return!!this.getDefinition(e)}},{key:"isBlock",value:function(e){var t=this.getDefinition(e);return!(!t||!t.isBlock)}},{key:"isLimit",value:function(e){var t=this.getDefinition(e);return!(!t||!t.isLimit&&!t.isObject)}},{key:"isObject",value:function(e){var t=this.getDefinition(e);return!!t&&!!(t.isObject||t.isLimit&&t.isSelectable&&t.isContent)}},{key:"isInline",value:function(e){var t=this.getDefinition(e);return!(!t||!t.isInline)}},{key:"isSelectable",value:function(e){var t=this.getDefinition(e);return!(!t||!t.isSelectable&&!t.isObject)}},{key:"isContent",value:function(e){var t=this.getDefinition(e);return!(!t||!t.isContent&&!t.isObject)}},{key:"checkChild",value:function(e,t){return!!t&&this._checkContextMatch(t,e)}},{key:"checkAttribute",value:function(e,t){var n=this.getDefinition(e.last);return!!n&&n.allowAttributes.includes(t)}},{key:"checkMerge",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(e instanceof Ki){var n=e.nodeBefore,r=e.nodeAfter;if(!(n instanceof Gi))throw new Ke.default("schema-check-merge-no-element-before",this);if(!(r instanceof Gi))throw new Ke.default("schema-check-merge-no-element-after",this);return this.checkMerge(n,r)}var i,o=_createForOfIteratorHelper(t.getChildren());try{for(o.s();!(i=o.n()).done;){var a=i.value;if(!this.checkChild(e,a))return!1}}catch(s){o.e(s)}finally{o.f()}return!0}},{key:"addChildCheck",value:function(e){this.on("checkChild",(function(t,n){var r=_slicedToArray(n,2),i=r[0],o=r[1];if(o){var a=e(i,o);"boolean"==typeof a&&(t.stop(),t.return=a)}}),{priority:"high"})}},{key:"addAttributeCheck",value:function(e){this.on("checkAttribute",(function(t,n){var r=_slicedToArray(n,2),i=r[0],o=r[1],a=e(i,o);"boolean"==typeof a&&(t.stop(),t.return=a)}),{priority:"high"})}},{key:"setAttributeProperties",value:function(e,t){this._attributeProperties[e]=Object.assign(this.getAttributeProperties(e),t)}},{key:"getAttributeProperties",value:function(e){return this._attributeProperties[e]||{}}},{key:"getLimitElement",value:function(e){var t;for(t=e instanceof Ki?e.parent:(e instanceof eo?[e]:Array.from(e.getRanges())).reduce((function(e,t){var n=t.getCommonAncestor();return e?e.getCommonAncestor(n,{includeSelf:!0}):n}),null);!this.isLimit(t)&&t.parent;)t=t.parent;return t}},{key:"checkAttributeInSelection",value:function(e,t){if(e.isCollapsed){var n=[].concat(_toConsumableArray(e.getFirstPosition().getAncestors()),[new Wi("",e.getAttributes())]);return this.checkAttribute(n,t)}var r,i=_createForOfIteratorHelper(e.getRanges());try{for(i.s();!(r=i.n()).done;){var o,a=_createForOfIteratorHelper(r.value);try{for(a.s();!(o=a.n()).done;){var s=o.value;if(this.checkAttribute(s.item,t))return!0}}catch(c){a.e(c)}finally{a.f()}}}catch(c){i.e(c)}finally{i.f()}return!1}},{key:"getValidRanges",value:regeneratorRuntime.mark((function e(t,n){var r,i,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=regeneratorRuntime.mark((function e(t){var n,r,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=_createForOfIteratorHelper(t),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=8;break}return i=r.value,e.delegateYield(i.getMinimalFlatRanges(),"t0",6);case 6:e.next=3;break;case 8:e.next=13;break;case 10:e.prev=10,e.t1=e.catch(1),n.e(e.t1);case 13:return e.prev=13,n.f(),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[1,10,13,16]])}))(t),r=_createForOfIteratorHelper(t),e.prev=2,r.s();case 4:if((i=r.n()).done){e.next=9;break}return o=i.value,e.delegateYield(this._getValidRangesForRange(o,n),"t0",7);case 7:e.next=4;break;case 9:e.next=14;break;case 11:e.prev=11,e.t1=e.catch(2),r.e(e.t1);case 14:return e.prev=14,r.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,this,[[2,11,14,17]])}))},{key:"getNearestSelectionRange",value:function(e){var t,n,r=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"both";if(this.checkChild(e,"$text"))return new eo(e);var o=e.getAncestors().reverse().find((function(e){return r.isLimit(e)}))||e.root;"both"!=i&&"backward"!=i||(t=new Ji({boundaries:eo._createIn(o),startPosition:e,direction:"backward"})),"both"!=i&&"forward"!=i||(n=new Ji({boundaries:eo._createIn(o),startPosition:e}));var a,s=_createForOfIteratorHelper(regeneratorRuntime.mark((function e(t,n){var r,i,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=!1;case 1:if(r){e.next=18;break}if(r=!0,!t){e.next=9;break}if(i=t.next(),e.t0=i.done,e.t0){e.next=9;break}return r=!1,e.next=9,{walker:t,value:i.value};case 9:if(!n){e.next=16;break}if(o=n.next(),e.t1=o.done,e.t1){e.next=16;break}return r=!1,e.next=16,{walker:n,value:o.value};case 16:e.next=1;break;case 18:case"end":return e.stop()}}),e)}))(t,n));try{for(s.s();!(a=s.n()).done;){var c=a.value,l=c.value;if(l.type==(c.walker==t?"elementEnd":"elementStart")&&this.isObject(l.item))return eo._createOn(l.item);if(this.checkChild(l.nextPosition,"$text"))return new eo(l.nextPosition)}}catch(u){s.e(u)}finally{s.f()}return null}},{key:"findAllowedParent",value:function(e,t){for(var n=e.parent;n;){if(this.checkChild(n,t))return n;if(this.isLimit(n))return null;n=n.parent}return null}},{key:"removeDisallowedAttributes",value:function(e,t){var n,r=_createForOfIteratorHelper(e);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.is("$text"))ea(this,i,t);else{var o,a=_createForOfIteratorHelper(eo._createIn(i).getPositions());try{for(a.s();!(o=a.n()).done;){var s=o.value;ea(this,s.nodeBefore||s.parent,t)}}catch(c){a.e(c)}finally{a.f()}}}}catch(c){r.e(c)}finally{r.f()}}},{key:"createContext",value:function(e){return new Uo(e)}},{key:"_clearCache",value:function(){this._compiledDefinitions=null}},{key:"_compile",value:function(){for(var e={},t=this._sourceDefinitions,n=Object.keys(t),r=0,i=n;r<i.length;r++){var o=i[r];e[o]=Wo(t[o],o)}for(var a=0,s=n;a<s.length;a++){qo(e,s[a])}for(var c=0,l=n;c<l.length;c++){Yo(e,l[c])}for(var u=0,d=n;u<d.length;u++){var f=d[u];Go(e,f),Jo(e,f)}for(var h=0,p=n;h<p.length;h++){var v=p[h];$o(e,v),Ko(e,v)}this._compiledDefinitions=e}},{key:"_checkContextMatch",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.length-1,r=t.getItem(n);if(e.allowIn.includes(r.name)){if(0==n)return!0;var i=this.getDefinition(r);return this._checkContextMatch(i,t,n-1)}return!1}},{key:"_getValidRangesForRange",value:regeneratorRuntime.mark((function e(t,n){var r,i,o,a,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.start,i=t.start,o=_createForOfIteratorHelper(t.getItems({shallow:!0})),e.prev=2,o.s();case 4:if((a=o.n()).done){e.next=19;break}if(s=a.value,e.t0=s.is("element"),!e.t0){e.next=9;break}return e.delegateYield(this._getValidRangesForRange(eo._createIn(s),n),"t1",9);case 9:if(e.t2=this.checkAttribute(s,n),e.t2){e.next=16;break}if(e.t3=r.isEqual(i),e.t3){e.next=15;break}return e.next=15,new eo(r,i);case 15:r=Ki._createAfter(s);case 16:i=Ki._createAfter(s);case 17:e.next=4;break;case 19:e.next=24;break;case 21:e.prev=21,e.t4=e.catch(2),o.e(e.t4);case 24:return e.prev=24,o.f(),e.finish(24);case 27:if(e.t5=r.isEqual(i),e.t5){e.next=31;break}return e.next=31,new eo(r,i);case 31:case"end":return e.stop()}}),e,this,[[2,21,24,27]])}))}]),e}();Object(u.default)(Ho,l.default);var Uo=function(){function e(t){if(_classCallCheck(this,e),t instanceof e)return t;"string"==typeof t?t=[t]:Array.isArray(t)||(t=t.getAncestors({includeSelf:!0})),this._items=t.map(Xo)}return _createClass(e,[{key:"length",get:function(){return this._items.length}},{key:"last",get:function(){return this._items[this._items.length-1]}},{key:Symbol.iterator,value:function(){return this._items[Symbol.iterator]()}},{key:"push",value:function(t){var n=new e([t]);return n._items=[].concat(_toConsumableArray(this._items),_toConsumableArray(n._items)),n}},{key:"getItem",value:function(e){return this._items[e]}},{key:"getNames",value:regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(this._items.map((function(e){return e.name})),"t0",1);case 1:case"end":return e.stop()}}),e,this)}))},{key:"endsWith",value:function(e){return Array.from(this.getNames()).join(" ").endsWith(e)}},{key:"startsWith",value:function(e){return Array.from(this.getNames()).join(" ").startsWith(e)}}]),e}();function Wo(e,t){var n={name:t,allowIn:[],allowContentOf:[],allowWhere:[],allowAttributes:[],allowAttributesOf:[],inheritTypesFrom:[]};return function(e,t){var n,r=_createForOfIteratorHelper(e);try{for(r.s();!(n=r.n()).done;){var i,o=n.value,a=_createForOfIteratorHelper(Object.keys(o).filter((function(e){return e.startsWith("is")})));try{for(a.s();!(i=a.n()).done;){var s=i.value;t[s]=o[s]}}catch(c){a.e(c)}finally{a.f()}}}catch(c){r.e(c)}finally{r.f()}}(e,n),Qo(e,n,"allowIn"),Qo(e,n,"allowContentOf"),Qo(e,n,"allowWhere"),Qo(e,n,"allowAttributes"),Qo(e,n,"allowAttributesOf"),Qo(e,n,"inheritTypesFrom"),function(e,t){var n,r=_createForOfIteratorHelper(e);try{for(r.s();!(n=r.n()).done;){var i=n.value.inheritAllFrom;i&&(t.allowContentOf.push(i),t.allowWhere.push(i),t.allowAttributesOf.push(i),t.inheritTypesFrom.push(i))}}catch(o){r.e(o)}finally{r.f()}}(e,n),n}function qo(e,t){var n,r=_createForOfIteratorHelper(e[t].allowContentOf);try{for(r.s();!(n=r.n()).done;){var i=n.value;e[i]&&Zo(e,i).forEach((function(e){e.allowIn.push(t)}))}}catch(o){r.e(o)}finally{r.f()}delete e[t].allowContentOf}function Yo(e,t){var n,r=_createForOfIteratorHelper(e[t].allowWhere);try{for(r.s();!(n=r.n()).done;){var i,o=e[n.value];o&&(i=e[t].allowIn).push.apply(i,_toConsumableArray(o.allowIn))}}catch(a){r.e(a)}finally{r.f()}delete e[t].allowWhere}function Go(e,t){var n,r=_createForOfIteratorHelper(e[t].allowAttributesOf);try{for(r.s();!(n=r.n()).done;){var i,o=e[n.value];o&&(i=e[t].allowAttributes).push.apply(i,_toConsumableArray(o.allowAttributes))}}catch(a){r.e(a)}finally{r.f()}delete e[t].allowAttributesOf}function Jo(e,t){var n,r=e[t],i=_createForOfIteratorHelper(r.inheritTypesFrom);try{for(i.s();!(n=i.n()).done;){var o=e[n.value];if(o){var a,s=_createForOfIteratorHelper(Object.keys(o).filter((function(e){return e.startsWith("is")})));try{for(s.s();!(a=s.n()).done;){var c=a.value;c in r||(r[c]=o[c])}}catch(l){s.e(l)}finally{s.f()}}}}catch(l){i.e(l)}finally{i.f()}delete r.inheritTypesFrom}function $o(e,t){var n=e[t],r=n.allowIn.filter((function(t){return e[t]}));n.allowIn=Array.from(new Set(r))}function Ko(e,t){var n=e[t];n.allowAttributes=Array.from(new Set(n.allowAttributes))}function Qo(e,t,n){var r,i=_createForOfIteratorHelper(e);try{for(i.s();!(r=i.n()).done;){var o,a=r.value;"string"==typeof a[n]?t[n].push(a[n]):Array.isArray(a[n])&&(o=t[n]).push.apply(o,_toConsumableArray(a[n]))}}catch(s){i.e(s)}finally{i.f()}}function Zo(e,t){var n=e[t];return function(e){return Object.keys(e).map((function(t){return e[t]}))}(e).filter((function(e){return e.allowIn.includes(n.name)}))}function Xo(e){return"string"==typeof e||e.is("documentFragment")?{name:"string"==typeof e?e:"$documentFragment",getAttributeKeys:regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})),getAttribute:function(){}}:{name:e.is("element")?e.name:"$text",getAttributeKeys:regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.delegateYield(e.getAttributeKeys(),"t0",1);case 1:case"end":return t.stop()}}),t)})),getAttribute:function(t){return e.getAttribute(t)}}}function ea(e,t,n){var r,i=_createForOfIteratorHelper(t.getAttributeKeys());try{for(i.s();!(r=i.n()).done;){var o=r.value;e.checkAttribute(t,o)||n.removeAttribute(o,t)}}catch(a){i.e(a)}finally{i.f()}}var ta=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,e),this._splitParts=new Map,this._cursorParents=new Map,this._modelCursor=null,this.conversionApi=Object.assign({},t),this.conversionApi.convertItem=this._convertItem.bind(this),this.conversionApi.convertChildren=this._convertChildren.bind(this),this.conversionApi.safeInsert=this._safeInsert.bind(this),this.conversionApi.updateConversionResult=this._updateConversionResult.bind(this),this.conversionApi.splitToAllowedParent=this._splitToAllowedParent.bind(this),this.conversionApi.getSplitParts=this._getSplitParts.bind(this)}return _createClass(e,[{key:"convert",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:["$root"];this.fire("viewCleanup",e),this._modelCursor=function(e,t){var n,r,i=_createForOfIteratorHelper(new Uo(e));try{for(i.s();!(r=i.n()).done;){var o,a=r.value,s={},c=_createForOfIteratorHelper(a.getAttributeKeys());try{for(c.s();!(o=c.n()).done;){var l=o.value;s[l]=a.getAttribute(l)}}catch(d){c.e(d)}finally{c.f()}var u=t.createElement(a.name,s);n&&t.append(u,n),n=Ki._createAt(u,0)}}catch(d){i.e(d)}finally{i.f()}return n}(n,t),this.conversionApi.writer=t,this.conversionApi.consumable=Bo.createFrom(e),this.conversionApi.store={};var r=this._convertItem(e,this._modelCursor),i=r.modelRange,o=t.createDocumentFragment();if(i){this._removeEmptyElements();for(var a=0,s=Array.from(this._modelCursor.parent.getChildren());a<s.length;a++){var c=s[a];t.append(c,o)}o.markers=function(e,t){var n,r=new Set,i=new Map,o=_createForOfIteratorHelper(eo._createIn(e).getItems());try{for(o.s();!(n=o.n()).done;){var a=n.value;"$marker"==a.name&&r.add(a)}}catch(f){o.e(f)}finally{o.f()}var s,c=_createForOfIteratorHelper(r);try{for(c.s();!(s=c.n()).done;){var l=s.value,u=l.getAttribute("data-name"),d=t.createPositionBefore(l);i.has(u)?i.get(u).end=d.clone():i.set(u,new eo(d.clone())),t.remove(l)}}catch(f){c.e(f)}finally{c.f()}return i}(o,t)}return this._modelCursor=null,this._splitParts.clear(),this._cursorParents.clear(),this.conversionApi.writer=null,this.conversionApi.store=null,o}},{key:"_convertItem",value:function(e,t){var n=Object.assign({viewItem:e,modelCursor:t,modelRange:null});if(e.is("element")?this.fire("element:"+e.name,n,this.conversionApi):e.is("$text")?this.fire("text",n,this.conversionApi):this.fire("documentFragment",n,this.conversionApi),n.modelRange&&!(n.modelRange instanceof eo))throw new Ke.default("view-conversion-dispatcher-incorrect-result",this);return{modelRange:n.modelRange,modelCursor:n.modelCursor}}},{key:"_convertChildren",value:function(e,t){for(var n=t.is("position")?t:Ki._createAt(t,0),r=new eo(n),i=0,o=Array.from(e.getChildren());i<o.length;i++){var a=o[i],s=this._convertItem(a,n);s.modelRange instanceof eo&&(r.end=s.modelRange.end,n=s.modelCursor)}return{modelRange:r,modelCursor:n}}},{key:"_safeInsert",value:function(e,t){var n=this._splitToAllowedParent(e,t);return!!n&&(this.conversionApi.writer.insert(e,n.position),!0)}},{key:"_updateConversionResult",value:function(e,t){var n=this._getSplitParts(e),r=this.conversionApi.writer;t.modelRange||(t.modelRange=r.createRange(r.createPositionBefore(e),r.createPositionAfter(n[n.length-1])));var i=this._cursorParents.get(e);t.modelCursor=i?r.createPositionAt(i,0):t.modelRange.end}},{key:"_splitToAllowedParent",value:function(e,t){var n=this.conversionApi,r=n.schema,i=n.writer,o=r.findAllowedParent(t,e);if(o){if(o===t.parent)return{position:t};this._modelCursor.parent.getAncestors().includes(o)&&(o=null)}if(!o)return Io(t,e,r)?{position:Oo(t,i)}:null;var a,s=this.conversionApi.writer.split(t,o),c=[],l=_createForOfIteratorHelper(s.range.getWalker());try{for(l.s();!(a=l.n()).done;){var u=a.value;if("elementEnd"==u.type)c.push(u.item);else{var d=c.pop();this._registerSplitPair(d,u.item)}}}catch(h){l.e(h)}finally{l.f()}var f=s.range.end.parent;return this._cursorParents.set(e,f),{position:s.position,cursorParent:f}}},{key:"_registerSplitPair",value:function(e,t){this._splitParts.has(e)||this._splitParts.set(e,[e]);var n=this._splitParts.get(e);this._splitParts.set(t,n),n.push(t)}},{key:"_getSplitParts",value:function(e){return this._splitParts.has(e)?this._splitParts.get(e):[e]}},{key:"_removeEmptyElements",value:function(){var e,t=!1,n=_createForOfIteratorHelper(this._splitParts.keys());try{for(n.s();!(e=n.n()).done;){var r=e.value;r.isEmpty&&(this.conversionApi.writer.remove(r),this._splitParts.delete(r),t=!0)}}catch(i){n.e(i)}finally{n.f()}t&&this._removeEmptyElements()}}]),e}();Object(u.default)(ta,Qe.default);var na=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"getHtml",value:function(e){var t=document.implementation.createHTMLDocument("").createElement("div");return t.appendChild(e),t.innerHTML}}]),e}(),ra=function(){function e(t){_classCallCheck(this,e),this._domParser=new DOMParser,this._domConverter=new xr(t,{blockFillerMode:"nbsp"}),this._htmlWriter=new na}return _createClass(e,[{key:"toData",value:function(e){var t=this._domConverter.viewToDom(e,document);return this._htmlWriter.getHtml(t)}},{key:"toView",value:function(e){var t=this._toDom(e);return this._domConverter.domToView(t)}},{key:"registerRawContentMatcher",value:function(e){this._domConverter.registerRawContentMatcher(e)}},{key:"useFillerType",value:function(e){this._domConverter.blockFillerMode="marked"==e?"markedNbsp":"nbsp"}},{key:"_toDom",value:function(e){for(var t=this._domParser.parseFromString(e,"text/html"),n=t.createDocumentFragment(),r=t.body.childNodes;r.length>0;)n.appendChild(r[0]);return n}}]),e}(),ia=function(){function e(t,n){var r=this;_classCallCheck(this,e),this.model=t,this.mapper=new to,this.downcastDispatcher=new io({mapper:this.mapper,schema:t.schema}),this.downcastDispatcher.on("insert:$text",(function(e,t,n){if(n.consumable.consume(t.item,"insert")){var r=n.writer,i=n.mapper.toViewPosition(t.range.start),o=r.createText(t.item.data);r.insert(i,o)}}),{priority:"lowest"}),this.upcastDispatcher=new ta({schema:t.schema}),this.viewDocument=new gn(n),this.stylesProcessor=n,this.htmlProcessor=new ra(this.viewDocument),this.processor=this.htmlProcessor,this._viewWriter=new Hn(this.viewDocument),this.upcastDispatcher.on("text",(function(e,t,n){var r=n.schema,i=n.consumable,o=n.writer,a=t.modelCursor;if(i.test(t.viewItem)){if(!r.checkChild(a,"$text")){if(!Io(a,"$text",r))return;a=Oo(a,o)}i.consume(t.viewItem);var s=o.createText(t.viewItem.data);o.insert(s,a),t.modelRange=o.createRange(a,a.getShiftedBy(s.offsetSize)),t.modelCursor=t.modelRange.end}}),{priority:"lowest"}),this.upcastDispatcher.on("element",(function(e,t,n){if(!t.modelRange&&n.consumable.consume(t.viewItem,{name:!0})){var r=n.convertChildren(t.viewItem,t.modelCursor),i=r.modelRange,o=r.modelCursor;t.modelRange=i,t.modelCursor=o}}),{priority:"lowest"}),this.upcastDispatcher.on("documentFragment",(function(e,t,n){if(!t.modelRange&&n.consumable.consume(t.viewItem,{name:!0})){var r=n.convertChildren(t.viewItem,t.modelCursor),i=r.modelRange,o=r.modelCursor;t.modelRange=i,t.modelCursor=o}}),{priority:"lowest"}),this.decorate("init"),this.decorate("set"),this.on("init",(function(){r.fire("ready")}),{priority:"lowest"}),this.on("ready",(function(){r.model.enqueueChange("transparent",Eo)}),{priority:"lowest"})}return _createClass(e,[{key:"get",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.rootName,n=void 0===t?"main":t,r=e.trim,i=void 0===r?"empty":r;if(!this._checkIfRootsExists([n]))throw new Ke.default("datacontroller-get-non-existent-root",this);var o=this.model.document.getRoot(n);return"empty"!==i||this.model.hasContent(o,{ignoreWhitespaces:!0})?this.stringify(o,e):""}},{key:"stringify",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.toView(e,t);return this.processor.toData(n)}},{key:"toView",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.viewDocument,r=this._viewWriter;this.mapper.clearBindings();var i=eo._createIn(e),o=new zn(n);this.mapper.bindElements(e,o),this.downcastDispatcher.conversionApi.options=t,this.downcastDispatcher.convertInsert(i,r);var a,s=e.is("documentFragment")?Array.from(e.markers):function(e){var t=[],n=e.root.document;if(!n)return[];var r,i=eo._createIn(e),o=_createForOfIteratorHelper(n.model.markers);try{for(o.s();!(r=o.n()).done;){var a=r.value,s=i.getIntersection(a.getRange());s&&t.push([a.name,s])}}catch(c){o.e(c)}finally{o.f()}return t}(e),c=_createForOfIteratorHelper(s);try{for(c.s();!(a=c.n()).done;){var l=_slicedToArray(a.value,2),u=l[0],d=l[1];this.downcastDispatcher.convertMarkerAdd(u,d,r)}}catch(f){c.e(f)}finally{c.f()}return delete this.downcastDispatcher.conversionApi.options,o}},{key:"init",value:function(e){var t=this;if(this.model.document.version)throw new Ke.default("datacontroller-init-document-not-empty",this);var n={};if("string"==typeof e?n.main=e:n=e,!this._checkIfRootsExists(Object.keys(n)))throw new Ke.default("datacontroller-init-non-existent-root",this);return this.model.enqueueChange("transparent",(function(e){for(var r=0,i=Object.keys(n);r<i.length;r++){var o=i[r],a=t.model.document.getRoot(o);e.insert(t.parse(n[o],a),a,0)}})),Promise.resolve()}},{key:"set",value:function(e){var t=this,n={};if("string"==typeof e?n.main=e:n=e,!this._checkIfRootsExists(Object.keys(n)))throw new Ke.default("datacontroller-set-non-existent-root",this);this.model.enqueueChange("transparent",(function(e){e.setSelection(null),e.removeSelectionAttribute(t.model.document.selection.getAttributeKeys());for(var r=0,i=Object.keys(n);r<i.length;r++){var o=i[r],a=t.model.document.getRoot(o);e.remove(e.createRangeIn(a)),e.insert(t.parse(n[o],a),a,0)}}))}},{key:"parse",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"$root",n=this.processor.toView(e);return this.toModel(n,t)}},{key:"toModel",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"$root";return this.model.change((function(r){return t.upcastDispatcher.convert(e,r,n)}))}},{key:"addStyleProcessorRules",value:function(e){e(this.stylesProcessor)}},{key:"registerRawContentMatcher",value:function(e){this.processor&&this.processor!==this.htmlProcessor&&this.processor.registerRawContentMatcher(e),this.htmlProcessor.registerRawContentMatcher(e)}},{key:"destroy",value:function(){this.stopListening()}},{key:"_checkIfRootsExists",value:function(e){var t,n=_createForOfIteratorHelper(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(!this.model.document.getRootNames().includes(r))return!1}}catch(i){n.e(i)}finally{n.f()}return!0}}]),e}();Object(u.default)(ia,l.default);var oa=function(){function e(t,n){_classCallCheck(this,e),this._helpers=new Map,this._downcast=Xe(t),this._createConversionHelpers({name:"downcast",dispatchers:this._downcast,isDowncast:!0}),this._upcast=Xe(n),this._createConversionHelpers({name:"upcast",dispatchers:this._upcast,isDowncast:!1})}return _createClass(e,[{key:"addAlias",value:function(e,t){var n=this._downcast.includes(t);if(!this._upcast.includes(t)&&!n)throw new Ke.default("conversion-add-alias-dispatcher-not-registered",this);this._createConversionHelpers({name:e,dispatchers:[t],isDowncast:n})}},{key:"for",value:function(e){if(!this._helpers.has(e))throw new Ke.default("conversion-for-unknown-group",this);return this._helpers.get(e)}},{key:"elementToElement",value:function(e){this.for("downcast").elementToElement(e);var t,n=_createForOfIteratorHelper(aa(e));try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.model,o=r.view;this.for("upcast").elementToElement({model:i,view:o,converterPriority:e.converterPriority})}}catch(a){n.e(a)}finally{n.f()}}},{key:"attributeToElement",value:function(e){this.for("downcast").attributeToElement(e);var t,n=_createForOfIteratorHelper(aa(e));try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.model,o=r.view;this.for("upcast").elementToAttribute({view:o,model:i,converterPriority:e.converterPriority})}}catch(a){n.e(a)}finally{n.f()}}},{key:"attributeToAttribute",value:function(e){this.for("downcast").attributeToAttribute(e);var t,n=_createForOfIteratorHelper(aa(e));try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.model,o=r.view;this.for("upcast").attributeToAttribute({view:o,model:i})}}catch(a){n.e(a)}finally{n.f()}}},{key:"_createConversionHelpers",value:function(e){var t=e.name,n=e.dispatchers,r=e.isDowncast;if(this._helpers.has(t))throw new Ke.default("conversion-group-exists",this);var i=r?new bo(n):new Ro(n);this._helpers.set(t,i)}}]),e}();function aa(e){var t,n,i;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!e.model.values){r.next=19;break}t=_createForOfIteratorHelper(e.model.values),r.prev=2,t.s();case 4:if((n=t.n()).done){r.next=9;break}return i=n.value,r.delegateYield(sa({key:e.model.key,value:i},e.view[i],e.upcastAlso?e.upcastAlso[i]:void 0),"t0",7);case 7:r.next=4;break;case 9:r.next=14;break;case 11:r.prev=11,r.t1=r.catch(2),t.e(r.t1);case 14:return r.prev=14,t.f(),r.finish(14);case 17:r.next=20;break;case 19:return r.delegateYield(sa(e.model,e.view,e.upcastAlso),"t2",20);case 20:case"end":return r.stop()}}),r,null,[[2,11,14,17]])}function sa(e,t,n){var r,o,a;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,{model:e,view:t};case 2:if(!n){i.next=20;break}r=_createForOfIteratorHelper(Xe(n)),i.prev=4,r.s();case 6:if((o=r.n()).done){i.next=12;break}return a=o.value,i.next=10,{model:e,view:a};case 10:i.next=6;break;case 12:i.next=17;break;case 14:i.prev=14,i.t0=i.catch(4),r.e(i.t0);case 17:return i.prev=17,r.f(),i.finish(17);case 20:case"end":return i.stop()}}),i,null,[[4,14,17,20]])}var ca=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default";_classCallCheck(this,e),this.operations=[],this.type=t}return _createClass(e,[{key:"baseVersion",get:function(){var e,t=_createForOfIteratorHelper(this.operations);try{for(t.s();!(e=t.n()).done;){var n=e.value;if(null!==n.baseVersion)return n.baseVersion}}catch(r){t.e(r)}finally{t.f()}return null}},{key:"addOperation",value:function(e){return e.batch=this,this.operations.push(e),e}}]),e}(),la=function(){function e(t){_classCallCheck(this,e),this.baseVersion=t,this.isDocumentOperation=null!==this.baseVersion,this.batch=null}return _createClass(e,[{key:"_validate",value:function(){}},{key:"toJSON",value:function(){var e=Object.assign({},this);return e.__className=this.constructor.className,delete e.batch,delete e.isDocumentOperation,e}}],[{key:"className",get:function(){return"Operation"}},{key:"fromJSON",value:function(e){return new this(e.baseVersion)}}]),e}(),ua=function(){function e(t){_classCallCheck(this,e),this.markers=new Map,this._children=new Yi,t&&this._insertChild(0,t)}return _createClass(e,[{key:Symbol.iterator,value:function(){return this.getChildren()}},{key:"childCount",get:function(){return this._children.length}},{key:"maxOffset",get:function(){return this._children.maxOffset}},{key:"isEmpty",get:function(){return 0===this.childCount}},{key:"root",get:function(){return this}},{key:"parent",get:function(){return null}},{key:"is",value:function(e){return"documentFragment"===e||"model:documentFragment"===e}},{key:"getChild",value:function(e){return this._children.getNode(e)}},{key:"getChildren",value:function(){return this._children[Symbol.iterator]()}},{key:"getChildIndex",value:function(e){return this._children.getNodeIndex(e)}},{key:"getChildStartOffset",value:function(e){return this._children.getNodeStartOffset(e)}},{key:"getPath",value:function(){return[]}},{key:"getNodeByPath",value:function(e){var t,n=this,r=_createForOfIteratorHelper(e);try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.getChild(n.offsetToIndex(i))}}catch(o){r.e(o)}finally{r.f()}return n}},{key:"offsetToIndex",value:function(e){return this._children.offsetToIndex(e)}},{key:"toJSON",value:function(){var e,t=[],n=_createForOfIteratorHelper(this._children);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push(r.toJSON())}}catch(i){n.e(i)}finally{n.f()}return t}},{key:"_appendChild",value:function(e){this._insertChild(this.childCount,e)}},{key:"_insertChild",value:function(e,t){var n,r=function(e){return"string"==typeof e?[new Wi(e)]:(Object(dt.a)(e)||(e=[e]),Array.from(e).map((function(e){return"string"==typeof e?new Wi(e):e instanceof qi?new Wi(e.data,e.getAttributes()):e})))}(t),i=_createForOfIteratorHelper(r);try{for(i.s();!(n=i.n()).done;){var o=n.value;null!==o.parent&&o._remove(),o.parent=this}}catch(a){i.e(a)}finally{i.f()}this._children._insertNodes(e,r)}},{key:"_removeChildren",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=this._children._removeNodes(e,n),i=_createForOfIteratorHelper(r);try{for(i.s();!(t=i.n()).done;){var o=t.value;o.parent=null}}catch(a){i.e(a)}finally{i.f()}return r}}],[{key:"fromJSON",value:function(t){var n,r=[],i=_createForOfIteratorHelper(t);try{for(i.s();!(n=i.n()).done;){var o=n.value;r.push(o.name?Gi.fromJSON(o):Wi.fromJSON(o))}}catch(a){i.e(a)}finally{i.f()}return new e(r)}}]),e}();function da(e,t){var n=(t=pa(t)).reduce((function(e,t){return e+t.offsetSize}),0),r=e.parent;ga(e);var i=e.index;return r._insertChild(i,t),va(r,i+t.length),va(r,i),new eo(e,e.getShiftedBy(n))}function fa(e){if(!e.isFlat)throw new Ke.default("operation-utils-remove-range-not-flat",this);var t=e.start.parent;ga(e.start),ga(e.end);var n=t._removeChildren(e.start.index,e.end.index-e.start.index);return va(t,e.start.index),n}function ha(e,t){if(!e.isFlat)throw new Ke.default("operation-utils-move-range-not-flat",this);var n=fa(e);return da(t=t._getTransformedByDeletion(e.start,e.end.offset-e.start.offset),n)}function pa(e){var t=[];e instanceof Array||(e=[e]);for(var n=0;n<e.length;n++)if("string"==typeof e[n])t.push(new Wi(e[n]));else if(e[n]instanceof qi)t.push(new Wi(e[n].data,e[n].getAttributes()));else if(e[n]instanceof ua||e[n]instanceof Yi){var r,i=_createForOfIteratorHelper(e[n]);try{for(i.s();!(r=i.n()).done;){var o=r.value;t.push(o)}}catch(l){i.e(l)}finally{i.f()}}else e[n]instanceof Ui&&t.push(e[n]);for(var a=1;a<t.length;a++){var s=t[a],c=t[a-1];s instanceof Wi&&c instanceof Wi&&ma(s,c)&&(t.splice(a-1,2,new Wi(c.data+s.data,c.getAttributes())),a--)}return t}function va(e,t){var n=e.getChild(t-1),r=e.getChild(t);if(n&&r&&n.is("$text")&&r.is("$text")&&ma(n,r)){var i=new Wi(n.data+r.data,n.getAttributes());e._removeChildren(t-1,2),e._insertChild(t-1,i)}}function ga(e){var t=e.textNode,n=e.parent;if(t){var r=e.offset-t.startOffset,i=t.index;n._removeChildren(i,1);var o=new Wi(t.data.substr(0,r),t.getAttributes()),a=new Wi(t.data.substr(r),t.getAttributes());n._insertChild(i,[o,a])}}function ma(e,t){var n,r=e.getAttributes(),i=t.getAttributes(),o=_createForOfIteratorHelper(r);try{for(o.s();!(n=o.n()).done;){var a=n.value;if(a[1]!==t.getAttribute(a[0]))return!1;i.next()}}catch(s){o.e(s)}finally{o.f()}return i.next().done}var ya=function(e,t){return Jr(e,t)},ka=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i,o,a){var s;return _classCallCheck(this,n),(s=t.call(this,a)).range=e.clone(),s.key=r,s.oldValue=void 0===i?null:i,s.newValue=void 0===o?null:o,s}return _createClass(n,[{key:"type",get:function(){return null===this.oldValue?"addAttribute":null===this.newValue?"removeAttribute":"changeAttribute"}},{key:"clone",value:function(){return new n(this.range,this.key,this.oldValue,this.newValue,this.baseVersion)}},{key:"getReversed",value:function(){return new n(this.range,this.key,this.newValue,this.oldValue,this.baseVersion+1)}},{key:"toJSON",value:function(){var e=_get3(_getPrototypeOf(n.prototype),"toJSON",this).call(this);return e.range=this.range.toJSON(),e}},{key:"_validate",value:function(){if(!this.range.isFlat)throw new Ke.default("attribute-operation-range-not-flat",this);var e,t=_createForOfIteratorHelper(this.range.getItems({shallow:!0}));try{for(t.s();!(e=t.n()).done;){var n=e.value;if(null!==this.oldValue&&!ya(n.getAttribute(this.key),this.oldValue))throw new Ke.default("attribute-operation-wrong-old-value",this,{item:n,key:this.key,value:this.oldValue});if(null===this.oldValue&&null!==this.newValue&&n.hasAttribute(this.key))throw new Ke.default("attribute-operation-attribute-exists",this,{node:n,key:this.key})}}catch(r){t.e(r)}finally{t.f()}}},{key:"_execute",value:function(){ya(this.oldValue,this.newValue)||function(e,t,n){ga(e.start),ga(e.end);var r,i=_createForOfIteratorHelper(e.getItems({shallow:!0}));try{for(i.s();!(r=i.n()).done;){var o=r.value,a=o.is("$textProxy")?o.textNode:o;null!==n?a._setAttribute(t,n):a._removeAttribute(t),va(a.parent,a.index)}}catch(s){i.e(s)}finally{i.f()}va(e.end.parent,e.end.index)}(this.range,this.key,this.newValue)}}],[{key:"className",get:function(){return"AttributeOperation"}},{key:"fromJSON",value:function(e,t){return new n(eo.fromJSON(e.range,t),e.key,e.oldValue,e.newValue,e.baseVersion)}}]),n}(la),_a=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var i;return _classCallCheck(this,n),(i=t.call(this,null)).sourcePosition=e.clone(),i.howMany=r,i}return _createClass(n,[{key:"type",get:function(){return"detach"}},{key:"toJSON",value:function(){var e=_get3(_getPrototypeOf(n.prototype),"toJSON",this).call(this);return e.sourcePosition=this.sourcePosition.toJSON(),e}},{key:"_validate",value:function(){if(this.sourcePosition.root.document)throw new Ke.default("detach-operation-on-document-node",this)}},{key:"_execute",value:function(){fa(eo._createFromPositionAndShift(this.sourcePosition,this.howMany))}}],[{key:"className",get:function(){return"DetachOperation"}}]),n}(la),ba=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i,o){var a;return _classCallCheck(this,n),(a=t.call(this,o)).sourcePosition=e.clone(),a.sourcePosition.stickiness="toNext",a.howMany=r,a.targetPosition=i.clone(),a.targetPosition.stickiness="toNone",a}return _createClass(n,[{key:"type",get:function(){return"$graveyard"==this.targetPosition.root.rootName?"remove":"$graveyard"==this.sourcePosition.root.rootName?"reinsert":"move"}},{key:"clone",value:function(){return new this.constructor(this.sourcePosition,this.howMany,this.targetPosition,this.baseVersion)}},{key:"getMovedRangeStart",value:function(){return this.targetPosition._getTransformedByDeletion(this.sourcePosition,this.howMany)}},{key:"getReversed",value:function(){var e=this.sourcePosition._getTransformedByInsertion(this.targetPosition,this.howMany);return new this.constructor(this.getMovedRangeStart(),this.howMany,e,this.baseVersion+1)}},{key:"_validate",value:function(){var e=this.sourcePosition.parent,t=this.targetPosition.parent,n=this.sourcePosition.offset,r=this.targetPosition.offset;if(n+this.howMany>e.maxOffset)throw new Ke.default("move-operation-nodes-do-not-exist",this);if(e===t&&n<r&&r<n+this.howMany)throw new Ke.default("move-operation-range-into-itself",this);if(this.sourcePosition.root==this.targetPosition.root&&"prefix"==ot(this.sourcePosition.getParentPath(),this.targetPosition.getParentPath())){var i=this.sourcePosition.path.length-1;if(this.targetPosition.path[i]>=n&&this.targetPosition.path[i]<n+this.howMany)throw new Ke.default("move-operation-node-into-itself",this)}}},{key:"_execute",value:function(){ha(eo._createFromPositionAndShift(this.sourcePosition,this.howMany),this.targetPosition)}},{key:"toJSON",value:function(){var e=_get3(_getPrototypeOf(n.prototype),"toJSON",this).call(this);return e.sourcePosition=this.sourcePosition.toJSON(),e.targetPosition=this.targetPosition.toJSON(),e}}],[{key:"className",get:function(){return"MoveOperation"}},{key:"fromJSON",value:function(e,t){var n=Ki.fromJSON(e.sourcePosition,t),r=Ki.fromJSON(e.targetPosition,t);return new this(n,e.howMany,r,e.baseVersion)}}]),n}(la),wa=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i){var o;return _classCallCheck(this,n),(o=t.call(this,i)).position=e.clone(),o.position.stickiness="toNone",o.nodes=new Yi(pa(r)),o.shouldReceiveAttributes=!1,o}return _createClass(n,[{key:"type",get:function(){return"insert"}},{key:"howMany",get:function(){return this.nodes.maxOffset}},{key:"clone",value:function(){var e=new Yi(_toConsumableArray(this.nodes).map((function(e){return e._clone(!0)}))),t=new n(this.position,e,this.baseVersion);return t.shouldReceiveAttributes=this.shouldReceiveAttributes,t}},{key:"getReversed",value:function(){var e=new Ki(this.position.root.document.graveyard,[0]);return new ba(this.position,this.nodes.maxOffset,e,this.baseVersion+1)}},{key:"_validate",value:function(){var e=this.position.parent;if(!e||e.maxOffset<this.position.offset)throw new Ke.default("insert-operation-position-invalid",this)}},{key:"_execute",value:function(){var e=this.nodes;this.nodes=new Yi(_toConsumableArray(e).map((function(e){return e._clone(!0)}))),da(this.position,e)}},{key:"toJSON",value:function(){var e=_get3(_getPrototypeOf(n.prototype),"toJSON",this).call(this);return e.position=this.position.toJSON(),e.nodes=this.nodes.toJSON(),e}}],[{key:"className",get:function(){return"InsertOperation"}},{key:"fromJSON",value:function(e,t){var r,i=[],o=_createForOfIteratorHelper(e.nodes);try{for(o.s();!(r=o.n()).done;){var a=r.value;i.push(a.name?Gi.fromJSON(a):Wi.fromJSON(a))}}catch(c){o.e(c)}finally{o.f()}var s=new n(Ki.fromJSON(e.position,t),i,e.baseVersion);return s.shouldReceiveAttributes=e.shouldReceiveAttributes,s}}]),n}(la),xa=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i,o,a,s){var c;return _classCallCheck(this,n),(c=t.call(this,s)).name=e,c.oldRange=r?r.clone():null,c.newRange=i?i.clone():null,c.affectsData=a,c._markers=o,c}return _createClass(n,[{key:"type",get:function(){return"marker"}},{key:"clone",value:function(){return new n(this.name,this.oldRange,this.newRange,this._markers,this.affectsData,this.baseVersion)}},{key:"getReversed",value:function(){return new n(this.name,this.newRange,this.oldRange,this._markers,this.affectsData,this.baseVersion+1)}},{key:"_execute",value:function(){this._markers[this.newRange?"_set":"_remove"](this.name,this.newRange,!0,this.affectsData)}},{key:"toJSON",value:function(){var e=_get3(_getPrototypeOf(n.prototype),"toJSON",this).call(this);return this.oldRange&&(e.oldRange=this.oldRange.toJSON()),this.newRange&&(e.newRange=this.newRange.toJSON()),delete e._markers,e}}],[{key:"className",get:function(){return"MarkerOperation"}},{key:"fromJSON",value:function(e,t){return new n(e.name,e.oldRange?eo.fromJSON(e.oldRange,t):null,e.newRange?eo.fromJSON(e.newRange,t):null,t.model.markers,e.affectsData,e.baseVersion)}}]),n}(la),Ca=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i,o){var a;return _classCallCheck(this,n),(a=t.call(this,o)).position=e,a.position.stickiness="toNext",a.oldName=r,a.newName=i,a}return _createClass(n,[{key:"type",get:function(){return"rename"}},{key:"clone",value:function(){return new n(this.position.clone(),this.oldName,this.newName,this.baseVersion)}},{key:"getReversed",value:function(){return new n(this.position.clone(),this.newName,this.oldName,this.baseVersion+1)}},{key:"_validate",value:function(){var e=this.position.nodeAfter;if(!(e instanceof Gi))throw new Ke.default("rename-operation-wrong-position",this);if(e.name!==this.oldName)throw new Ke.default("rename-operation-wrong-name",this)}},{key:"_execute",value:function(){this.position.nodeAfter.name=this.newName}},{key:"toJSON",value:function(){var e=_get3(_getPrototypeOf(n.prototype),"toJSON",this).call(this);return e.position=this.position.toJSON(),e}}],[{key:"className",get:function(){return"RenameOperation"}},{key:"fromJSON",value:function(e,t){return new n(Ki.fromJSON(e.position,t),e.oldName,e.newName,e.baseVersion)}}]),n}(la),Ta=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i,o,a){var s;return _classCallCheck(this,n),(s=t.call(this,a)).root=e,s.key=r,s.oldValue=i,s.newValue=o,s}return _createClass(n,[{key:"type",get:function(){return null===this.oldValue?"addRootAttribute":null===this.newValue?"removeRootAttribute":"changeRootAttribute"}},{key:"clone",value:function(){return new n(this.root,this.key,this.oldValue,this.newValue,this.baseVersion)}},{key:"getReversed",value:function(){return new n(this.root,this.key,this.newValue,this.oldValue,this.baseVersion+1)}},{key:"_validate",value:function(){if(this.root!=this.root.root||this.root.is("documentFragment"))throw new Ke.default("rootattribute-operation-not-a-root",this,{root:this.root,key:this.key});if(null!==this.oldValue&&this.root.getAttribute(this.key)!==this.oldValue)throw new Ke.default("rootattribute-operation-wrong-old-value",this,{root:this.root,key:this.key});if(null===this.oldValue&&null!==this.newValue&&this.root.hasAttribute(this.key))throw new Ke.default("rootattribute-operation-attribute-exists",this,{root:this.root,key:this.key})}},{key:"_execute",value:function(){null!==this.newValue?this.root._setAttribute(this.key,this.newValue):this.root._removeAttribute(this.key)}},{key:"toJSON",value:function(){var e=_get3(_getPrototypeOf(n.prototype),"toJSON",this).call(this);return e.root=this.root.toJSON(),e}}],[{key:"className",get:function(){return"RootAttributeOperation"}},{key:"fromJSON",value:function(e,t){if(!t.getRoot(e.root))throw new Ke.default("rootattribute-operation-fromjson-no-root",this,{rootName:e.root});return new n(t.getRoot(e.root),e.key,e.oldValue,e.newValue,e.baseVersion)}}]),n}(la),Aa=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i,o,a){var s;return _classCallCheck(this,n),(s=t.call(this,a)).sourcePosition=e.clone(),s.sourcePosition.stickiness="toPrevious",s.howMany=r,s.targetPosition=i.clone(),s.targetPosition.stickiness="toNext",s.graveyardPosition=o.clone(),s}return _createClass(n,[{key:"type",get:function(){return"merge"}},{key:"deletionPosition",get:function(){return new Ki(this.sourcePosition.root,this.sourcePosition.path.slice(0,-1))}},{key:"movedRange",get:function(){var e=this.sourcePosition.getShiftedBy(Number.POSITIVE_INFINITY);return new eo(this.sourcePosition,e)}},{key:"clone",value:function(){return new this.constructor(this.sourcePosition,this.howMany,this.targetPosition,this.graveyardPosition,this.baseVersion)}},{key:"getReversed",value:function(){var e=this.targetPosition._getTransformedByMergeOperation(this),t=this.sourcePosition.path.slice(0,-1),n=new Ki(this.sourcePosition.root,t)._getTransformedByMergeOperation(this);return new Sa(e,this.howMany,n,this.graveyardPosition,this.baseVersion+1)}},{key:"_validate",value:function(){var e=this.sourcePosition.parent,t=this.targetPosition.parent;if(!e.parent)throw new Ke.default("merge-operation-source-position-invalid",this);if(!t.parent)throw new Ke.default("merge-operation-target-position-invalid",this);if(this.howMany!=e.maxOffset)throw new Ke.default("merge-operation-how-many-invalid",this)}},{key:"_execute",value:function(){var e=this.sourcePosition.parent;ha(eo._createIn(e),this.targetPosition),ha(eo._createOn(e),this.graveyardPosition)}},{key:"toJSON",value:function(){var e=_get3(_getPrototypeOf(n.prototype),"toJSON",this).call(this);return e.sourcePosition=e.sourcePosition.toJSON(),e.targetPosition=e.targetPosition.toJSON(),e.graveyardPosition=e.graveyardPosition.toJSON(),e}}],[{key:"className",get:function(){return"MergeOperation"}},{key:"fromJSON",value:function(e,t){var n=Ki.fromJSON(e.sourcePosition,t),r=Ki.fromJSON(e.targetPosition,t),i=Ki.fromJSON(e.graveyardPosition,t);return new this(n,e.howMany,r,i,e.baseVersion)}}]),n}(la),Sa=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i,o,a){var s;return _classCallCheck(this,n),(s=t.call(this,a)).splitPosition=e.clone(),s.splitPosition.stickiness="toNext",s.howMany=r,s.insertionPosition=i,s.graveyardPosition=o?o.clone():null,s.graveyardPosition&&(s.graveyardPosition.stickiness="toNext"),s}return _createClass(n,[{key:"type",get:function(){return"split"}},{key:"moveTargetPosition",get:function(){var e=this.insertionPosition.path.slice();return e.push(0),new Ki(this.insertionPosition.root,e)}},{key:"movedRange",get:function(){var e=this.splitPosition.getShiftedBy(Number.POSITIVE_INFINITY);return new eo(this.splitPosition,e)}},{key:"clone",value:function(){return new this.constructor(this.splitPosition,this.howMany,this.insertionPosition,this.graveyardPosition,this.baseVersion)}},{key:"getReversed",value:function(){var e=new Ki(this.splitPosition.root.document.graveyard,[0]);return new Aa(this.moveTargetPosition,this.howMany,this.splitPosition,e,this.baseVersion+1)}},{key:"_validate",value:function(){var e=this.splitPosition.parent;if(!e||e.maxOffset<this.splitPosition.offset)throw new Ke.default("split-operation-position-invalid",this);if(!e.parent)throw new Ke.default("split-operation-split-in-root",this);if(this.howMany!=e.maxOffset-this.splitPosition.offset)throw new Ke.default("split-operation-how-many-invalid",this);if(this.graveyardPosition&&!this.graveyardPosition.nodeAfter)throw new Ke.default("split-operation-graveyard-position-invalid",this)}},{key:"_execute",value:function(){var e=this.splitPosition.parent;if(this.graveyardPosition)ha(eo._createFromPositionAndShift(this.graveyardPosition,1),this.insertionPosition);else{var t=e._clone();da(this.insertionPosition,t)}ha(new eo(Ki._createAt(e,this.splitPosition.offset),Ki._createAt(e,e.maxOffset)),this.moveTargetPosition)}},{key:"toJSON",value:function(){var e=_get3(_getPrototypeOf(n.prototype),"toJSON",this).call(this);return e.splitPosition=this.splitPosition.toJSON(),e.insertionPosition=this.insertionPosition.toJSON(),this.graveyardPosition&&(e.graveyardPosition=this.graveyardPosition.toJSON()),e}}],[{key:"className",get:function(){return"SplitOperation"}},{key:"getInsertionPosition",value:function(e){var t=e.path.slice(0,-1);return t[t.length-1]++,new Ki(e.root,t,"toPrevious")}},{key:"fromJSON",value:function(e,t){var n=Ki.fromJSON(e.splitPosition,t),r=Ki.fromJSON(e.insertionPosition,t),i=e.graveyardPosition?Ki.fromJSON(e.graveyardPosition,t):null;return new this(n,e.howMany,r,i,e.baseVersion)}}]),n}(la),Ea=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"main";return _classCallCheck(this,n),(i=t.call(this,r))._document=e,i.rootName=o,i}return _createClass(n,[{key:"document",get:function(){return this._document}},{key:"is",value:function(e,t){return t?t===this.name&&("rootElement"===e||"model:rootElement"===e||"element"===e||"model:element"===e):"rootElement"===e||"model:rootElement"===e||"element"===e||"model:element"===e||"node"===e||"model:node"===e}},{key:"toJSON",value:function(){return this.rootName}}]),n}(Gi),Ia=function(){function e(t,n){_classCallCheck(this,e),this.model=t,this.batch=n}return _createClass(e,[{key:"createText",value:function(e,t){return new Wi(e,t)}},{key:"createElement",value:function(e,t){return new Gi(e,t)}},{key:"createDocumentFragment",value:function(){return new ua}},{key:"cloneElement",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return e._clone(t)}},{key:"insert",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(this._assertWriterUsedCorrectly(),!(e instanceof Wi&&""==e.data)){var r=Ki._createAt(t,n);if(e.parent){if(Na(e.root,r.root))return void this.move(eo._createOn(e),r);if(e.root.document)throw new Ke.default("model-writer-insert-forbidden-move",this);this.remove(e)}var i=new wa(r,e,r.root.document?r.root.document.version:null);if(e instanceof Wi&&(i.shouldReceiveAttributes=!0),this.batch.addOperation(i),this.model.applyOperation(i),e instanceof ua){var o,a=_createForOfIteratorHelper(e.markers);try{for(a.s();!(o=a.n()).done;){var s=_slicedToArray(o.value,2),c=s[0],l=s[1],u=Ki._createAt(l.root,0),d={range:new eo(l.start._getCombined(u,r),l.end._getCombined(u,r)),usingOperation:!0,affectsData:!0};this.model.markers.has(c)?this.updateMarker(c,d):this.addMarker(c,d)}}catch(f){a.e(f)}finally{a.f()}}}}},{key:"insertText",value:function(e,t,n,r){t instanceof ua||t instanceof Gi||t instanceof Ki?this.insert(this.createText(e),t,n):this.insert(this.createText(e,t),n,r)}},{key:"insertElement",value:function(e,t,n,r){t instanceof ua||t instanceof Gi||t instanceof Ki?this.insert(this.createElement(e),t,n):this.insert(this.createElement(e,t),n,r)}},{key:"append",value:function(e,t){this.insert(e,t,"end")}},{key:"appendText",value:function(e,t,n){t instanceof ua||t instanceof Gi?this.insert(this.createText(e),t,"end"):this.insert(this.createText(e,t),n,"end")}},{key:"appendElement",value:function(e,t,n){t instanceof ua||t instanceof Gi?this.insert(this.createElement(e),t,"end"):this.insert(this.createElement(e,t),n,"end")}},{key:"setAttribute",value:function(e,t,n){if(this._assertWriterUsedCorrectly(),n instanceof eo){var r,i=_createForOfIteratorHelper(n.getMinimalFlatRanges());try{for(i.s();!(r=i.n()).done;){Oa(this,e,t,r.value)}}catch(o){i.e(o)}finally{i.f()}}else Ra(this,e,t,n)}},{key:"setAttributes",value:function(e,t){var n,r=_createForOfIteratorHelper(ft(e));try{for(r.s();!(n=r.n()).done;){var i=_slicedToArray(n.value,2),o=i[0],a=i[1];this.setAttribute(o,a,t)}}catch(s){r.e(s)}finally{r.f()}}},{key:"removeAttribute",value:function(e,t){if(this._assertWriterUsedCorrectly(),t instanceof eo){var n,r=_createForOfIteratorHelper(t.getMinimalFlatRanges());try{for(r.s();!(n=r.n()).done;){Oa(this,e,null,n.value)}}catch(i){r.e(i)}finally{r.f()}}else Ra(this,e,null,t)}},{key:"clearAttributes",value:function(e){var t=this;this._assertWriterUsedCorrectly();var n=function(e){var n,r=_createForOfIteratorHelper(e.getAttributeKeys());try{for(r.s();!(n=r.n()).done;){var i=n.value;t.removeAttribute(i,e)}}catch(o){r.e(o)}finally{r.f()}};if(e instanceof eo){var r,i=_createForOfIteratorHelper(e.getItems());try{for(i.s();!(r=i.n()).done;){n(r.value)}}catch(o){i.e(o)}finally{i.f()}}else n(e)}},{key:"move",value:function(e,t,n){if(this._assertWriterUsedCorrectly(),!(e instanceof eo))throw new Ke.default("writer-move-invalid-range",this);if(!e.isFlat)throw new Ke.default("writer-move-range-not-flat",this);var r=Ki._createAt(t,n);if(!r.isEqual(e.start)){if(this._addOperationForAffectedMarkers("move",e),!Na(e.root,r.root))throw new Ke.default("writer-move-different-document",this);var i=new ba(e.start,e.end.offset-e.start.offset,r,e.root.document?e.root.document.version:null);this.batch.addOperation(i),this.model.applyOperation(i)}}},{key:"remove",value:function(e){this._assertWriterUsedCorrectly();var t,n=_createForOfIteratorHelper((e instanceof eo?e:eo._createOn(e)).getMinimalFlatRanges().reverse());try{for(n.s();!(t=n.n()).done;){var r=t.value;this._addOperationForAffectedMarkers("move",r),Ma(r.start,r.end.offset-r.start.offset,this.batch,this.model)}}catch(i){n.e(i)}finally{n.f()}}},{key:"merge",value:function(e){this._assertWriterUsedCorrectly();var t=e.nodeBefore,n=e.nodeAfter;if(this._addOperationForAffectedMarkers("merge",e),!(t instanceof Gi))throw new Ke.default("writer-merge-no-element-before",this);if(!(n instanceof Gi))throw new Ke.default("writer-merge-no-element-after",this);e.root.document?this._merge(e):this._mergeDetached(e)}},{key:"createPositionFromPath",value:function(e,t,n){return this.model.createPositionFromPath(e,t,n)}},{key:"createPositionAt",value:function(e,t){return this.model.createPositionAt(e,t)}},{key:"createPositionAfter",value:function(e){return this.model.createPositionAfter(e)}},{key:"createPositionBefore",value:function(e){return this.model.createPositionBefore(e)}},{key:"createRange",value:function(e,t){return this.model.createRange(e,t)}},{key:"createRangeIn",value:function(e){return this.model.createRangeIn(e)}},{key:"createRangeOn",value:function(e){return this.model.createRangeOn(e)}},{key:"createSelection",value:function(e,t,n){return this.model.createSelection(e,t,n)}},{key:"_mergeDetached",value:function(e){var t=e.nodeBefore,n=e.nodeAfter;this.move(eo._createIn(n),Ki._createAt(t,"end")),this.remove(n)}},{key:"_merge",value:function(e){var t=Ki._createAt(e.nodeBefore,"end"),n=Ki._createAt(e.nodeAfter,0),r=new Ki(e.root.document.graveyard,[0]),i=new Aa(n,e.nodeAfter.maxOffset,t,r,e.root.document.version);this.batch.addOperation(i),this.model.applyOperation(i)}},{key:"rename",value:function(e,t){if(this._assertWriterUsedCorrectly(),!(e instanceof Gi))throw new Ke.default("writer-rename-not-element-instance",this);var n=e.root.document?e.root.document.version:null,r=new Ca(Ki._createBefore(e),e.name,t,n);this.batch.addOperation(r),this.model.applyOperation(r)}},{key:"split",value:function(e,t){this._assertWriterUsedCorrectly();var n,r,i=e.parent;if(!i.parent)throw new Ke.default("writer-split-element-no-parent",this);if(t||(t=i.parent),!e.parent.getAncestors({includeSelf:!0}).includes(t))throw new Ke.default("writer-split-invalid-limit-element",this);do{var o=i.root.document?i.root.document.version:null,a=i.maxOffset-e.offset,s=Sa.getInsertionPosition(e),c=new Sa(e,a,s,null,o);this.batch.addOperation(c),this.model.applyOperation(c),n||r||(n=i,r=e.parent.nextSibling),i=(e=this.createPositionAfter(e.parent)).parent}while(i!==t);return{position:e,range:new eo(Ki._createAt(n,"end"),Ki._createAt(r,0))}}},{key:"wrap",value:function(e,t){if(this._assertWriterUsedCorrectly(),!e.isFlat)throw new Ke.default("writer-wrap-range-not-flat",this);var n=t instanceof Gi?t:new Gi(t);if(n.childCount>0)throw new Ke.default("writer-wrap-element-not-empty",this);if(null!==n.parent)throw new Ke.default("writer-wrap-element-attached",this);this.insert(n,e.start);var r=new eo(e.start.getShiftedBy(1),e.end.getShiftedBy(1));this.move(r,Ki._createAt(n,0))}},{key:"unwrap",value:function(e){if(this._assertWriterUsedCorrectly(),null===e.parent)throw new Ke.default("writer-unwrap-element-no-parent",this);this.move(eo._createIn(e),this.createPositionAfter(e)),this.remove(e)}},{key:"addMarker",value:function(e,t){if(this._assertWriterUsedCorrectly(),!t||"boolean"!=typeof t.usingOperation)throw new Ke.default("writer-addmarker-no-usingoperation",this);var n=t.usingOperation,r=t.range,i=void 0!==t.affectsData&&t.affectsData;if(this.model.markers.has(e))throw new Ke.default("writer-addmarker-marker-exists",this);if(!r)throw new Ke.default("writer-addmarker-no-range",this);return n?(Pa(this,e,null,r,i),this.model.markers.get(e)):this.model.markers._set(e,r,n,i)}},{key:"updateMarker",value:function(e,t){this._assertWriterUsedCorrectly();var n="string"==typeof e?e:e.name,r=this.model.markers.get(n);if(!r)throw new Ke.default("writer-updatemarker-marker-not-exists",this);if(t){var i="boolean"==typeof t.usingOperation,o="boolean"==typeof t.affectsData,a=o?t.affectsData:r.affectsData;if(!i&&!t.range&&!o)throw new Ke.default("writer-updatemarker-wrong-options",this);var s=r.getRange(),c=t.range?t.range:s;i&&t.usingOperation!==r.managedUsingOperations?t.usingOperation?Pa(this,n,null,c,a):(Pa(this,n,s,null,a),this.model.markers._set(n,c,void 0,a)):r.managedUsingOperations?Pa(this,n,s,c,a):this.model.markers._set(n,c,void 0,a)}else this.model.markers._refresh(r)}},{key:"removeMarker",value:function(e){this._assertWriterUsedCorrectly();var t="string"==typeof e?e:e.name;if(!this.model.markers.has(t))throw new Ke.default("writer-removemarker-no-marker",this);var n=this.model.markers.get(t);n.managedUsingOperations?Pa(this,t,n.getRange(),null,n.affectsData):this.model.markers._remove(t)}},{key:"setSelection",value:function(e,t,n){this._assertWriterUsedCorrectly(),this.model.document.selection._setTo(e,t,n)}},{key:"setSelectionFocus",value:function(e,t){this._assertWriterUsedCorrectly(),this.model.document.selection._setFocus(e,t)}},{key:"setSelectionAttribute",value:function(e,t){if(this._assertWriterUsedCorrectly(),"string"==typeof e)this._setSelectionAttribute(e,t);else{var n,r=_createForOfIteratorHelper(ft(e));try{for(r.s();!(n=r.n()).done;){var i=_slicedToArray(n.value,2),o=i[0],a=i[1];this._setSelectionAttribute(o,a)}}catch(s){r.e(s)}finally{r.f()}}}},{key:"removeSelectionAttribute",value:function(e){if(this._assertWriterUsedCorrectly(),"string"==typeof e)this._removeSelectionAttribute(e);else{var t,n=_createForOfIteratorHelper(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;this._removeSelectionAttribute(r)}}catch(i){n.e(i)}finally{n.f()}}}},{key:"overrideSelectionGravity",value:function(){return this.model.document.selection._overrideGravity()}},{key:"restoreSelectionGravity",value:function(e){this.model.document.selection._restoreGravity(e)}},{key:"_setSelectionAttribute",value:function(e,t){var n=this.model.document.selection;if(n.isCollapsed&&n.anchor.parent.isEmpty){var r=go._getStoreAttributeKey(e);this.setAttribute(r,t,n.anchor.parent)}n._setAttribute(e,t)}},{key:"_removeSelectionAttribute",value:function(e){var t=this.model.document.selection;if(t.isCollapsed&&t.anchor.parent.isEmpty){var n=go._getStoreAttributeKey(e);this.removeAttribute(n,t.anchor.parent)}t._removeAttribute(e)}},{key:"_assertWriterUsedCorrectly",value:function(){if(this.model._currentWriter!==this)throw new Ke.default("writer-incorrect-use",this)}},{key:"_addOperationForAffectedMarkers",value:function(e,t){var n,r=_createForOfIteratorHelper(this.model.markers);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.managedUsingOperations){var o=i.getRange(),a=!1;if("move"===e)a=t.containsPosition(o.start)||t.start.isEqual(o.start)||t.containsPosition(o.end)||t.end.isEqual(o.end);else{var s=t.nodeAfter,c=o.end.parent==s&&0==o.end.offset,l=o.end.nodeAfter==s,u=o.start.nodeAfter==s;a=o.start.parent==t.nodeBefore&&o.start.isAtEnd||c||l||u}a&&this.updateMarker(i.name,{range:o})}}}catch(d){r.e(d)}finally{r.f()}}}]),e}();function Oa(e,t,n,r){var i,o,a,s,c=e.model,l=c.document,u=r.start,d=_createForOfIteratorHelper(r.getWalker({shallow:!0}));try{for(d.s();!(s=d.n()).done;){var f=s.value;a=f.item.getAttribute(t),i&&o!=a&&(o!=n&&h(),u=i),i=f.nextPosition,o=a}}catch(p){d.e(p)}finally{d.f()}function h(){var r=new eo(u,i),a=new ka(r,t,o,n,r.root.document?l.version:null);e.batch.addOperation(a),c.applyOperation(a)}i instanceof Ki&&i!=u&&o!=n&&h()}function Ra(e,t,n,r){var i,o,a=e.model,s=a.document,c=r.getAttribute(t);if(c!=n){if(r.root===r)o=new Ta(r,t,c,n,r.document?s.version:null);else{var l=(i=new eo(Ki._createBefore(r),e.createPositionAfter(r))).root.document?s.version:null;o=new ka(i,t,c,n,l)}e.batch.addOperation(o),a.applyOperation(o)}}function Pa(e,t,n,r,i){var o=e.model,a=new xa(t,n,r,o.markers,i,o.document.version);e.batch.addOperation(a),o.applyOperation(a)}function Ma(e,t,n,r){var i;if(e.root.document){var o=r.document,a=new Ki(o.graveyard,[0]);i=new ba(e,t,a,o.version)}else i=new _a(e,t);n.addOperation(i),r.applyOperation(i)}function Na(e,t){return e===t||e instanceof Ea&&t instanceof Ea}var Da=function(){function e(t){_classCallCheck(this,e),this._markerCollection=t,this._changesInElement=new Map,this._elementSnapshots=new Map,this._changedMarkers=new Map,this._changeCount=0,this._cachedChanges=null,this._cachedChangesWithGraveyard=null}return _createClass(e,[{key:"isEmpty",get:function(){return 0==this._changesInElement.size&&0==this._changedMarkers.size}},{key:"refreshItem",value:function(e){if(!this._isInInsertedElement(e.parent)){this._markRemove(e.parent,e.startOffset,e.offsetSize),this._markInsert(e.parent,e.startOffset,e.offsetSize);var t,n=eo._createOn(e),r=_createForOfIteratorHelper(this._markerCollection.getMarkersIntersectingRange(n));try{for(r.s();!(t=r.n()).done;){var i=t.value,o=i.getRange();this.bufferMarkerChange(i.name,o,o,i.affectsData)}}catch(a){r.e(a)}finally{r.f()}this._cachedChanges=null}}},{key:"bufferOperation",value:function(e){switch(e.type){case"insert":if(this._isInInsertedElement(e.position.parent))return;this._markInsert(e.position.parent,e.position.offset,e.nodes.maxOffset);break;case"addAttribute":case"removeAttribute":case"changeAttribute":var t,n=_createForOfIteratorHelper(e.range.getItems({shallow:!0}));try{for(n.s();!(t=n.n()).done;){var r=t.value;this._isInInsertedElement(r.parent)||this._markAttribute(r)}}catch(p){n.e(p)}finally{n.f()}break;case"remove":case"move":case"reinsert":if(e.sourcePosition.isEqual(e.targetPosition)||e.sourcePosition.getShiftedBy(e.howMany).isEqual(e.targetPosition))return;var i=this._isInInsertedElement(e.sourcePosition.parent),o=this._isInInsertedElement(e.targetPosition.parent);i||this._markRemove(e.sourcePosition.parent,e.sourcePosition.offset,e.howMany),o||this._markInsert(e.targetPosition.parent,e.getMovedRangeStart().offset,e.howMany);break;case"rename":if(this._isInInsertedElement(e.position.parent))return;this._markRemove(e.position.parent,e.position.offset,1),this._markInsert(e.position.parent,e.position.offset,1);var a,s=eo._createFromPositionAndShift(e.position,1),c=_createForOfIteratorHelper(this._markerCollection.getMarkersIntersectingRange(s));try{for(c.s();!(a=c.n()).done;){var l=a.value,u=l.getRange();this.bufferMarkerChange(l.name,u,u,l.affectsData)}}catch(p){c.e(p)}finally{c.f()}break;case"split":var d=e.splitPosition.parent;this._isInInsertedElement(d)||this._markRemove(d,e.splitPosition.offset,e.howMany),this._isInInsertedElement(e.insertionPosition.parent)||this._markInsert(e.insertionPosition.parent,e.insertionPosition.offset,1),e.graveyardPosition&&this._markRemove(e.graveyardPosition.parent,e.graveyardPosition.offset,1);break;case"merge":var f=e.sourcePosition.parent;this._isInInsertedElement(f.parent)||this._markRemove(f.parent,f.startOffset,1),this._markInsert(e.graveyardPosition.parent,e.graveyardPosition.offset,1);var h=e.targetPosition.parent;this._isInInsertedElement(h)||this._markInsert(h,e.targetPosition.offset,f.maxOffset)}this._cachedChanges=null}},{key:"bufferMarkerChange",value:function(e,t,n,r){var i=this._changedMarkers.get(e);i?(i.newRange=n,i.affectsData=r,null==i.oldRange&&null==i.newRange&&this._changedMarkers.delete(e)):this._changedMarkers.set(e,{oldRange:t,newRange:n,affectsData:r})}},{key:"getMarkersToRemove",value:function(){var e,t=[],n=_createForOfIteratorHelper(this._changedMarkers);try{for(n.s();!(e=n.n()).done;){var r=_slicedToArray(e.value,2),i=r[0],o=r[1];null!=o.oldRange&&t.push({name:i,range:o.oldRange})}}catch(a){n.e(a)}finally{n.f()}return t}},{key:"getMarkersToAdd",value:function(){var e,t=[],n=_createForOfIteratorHelper(this._changedMarkers);try{for(n.s();!(e=n.n()).done;){var r=_slicedToArray(e.value,2),i=r[0],o=r[1];null!=o.newRange&&t.push({name:i,range:o.newRange})}}catch(a){n.e(a)}finally{n.f()}return t}},{key:"getChangedMarkers",value:function(){return Array.from(this._changedMarkers).map((function(e){return{name:e[0],data:{oldRange:e[1].oldRange,newRange:e[1].newRange}}}))}},{key:"hasDataChanges",value:function(){var e,t=_createForOfIteratorHelper(this._changedMarkers);try{for(t.s();!(e=t.n()).done;){if(_slicedToArray(e.value,2)[1].affectsData)return!0}}catch(n){t.e(n)}finally{t.f()}return this._changesInElement.size>0}},{key:"getChanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{includeChangesInGraveyard:!1};if(this._cachedChanges)return e.includeChangesInGraveyard?this._cachedChangesWithGraveyard.slice():this._cachedChanges.slice();var t,n=[],r=_createForOfIteratorHelper(this._changesInElement.keys());try{for(r.s();!(t=r.n()).done;){var i,o=t.value,a=this._changesInElement.get(o).sort((function(e,t){return e.offset===t.offset?e.type!=t.type?"remove"==e.type?-1:1:0:e.offset<t.offset?-1:1})),s=this._elementSnapshots.get(o),c=Fa(o.getChildren()),l=ja(s.length,a),u=0,d=0,f=_createForOfIteratorHelper(l);try{for(f.s();!(i=f.n()).done;){var h=i.value;if("i"===h)n.push(this._getInsertDiff(o,u,c[u].name)),u++;else if("r"===h)n.push(this._getRemoveDiff(o,u,s[d].name)),d++;else if("a"===h){var p,v=c[u].attributes,g=s[d].attributes,m=void 0;if("$text"==c[u].name)m=new eo(Ki._createAt(o,u),Ki._createAt(o,u+1));else{var y=o.offsetToIndex(u);m=new eo(Ki._createAt(o,u),Ki._createAt(o.getChild(y),0))}(p=n).push.apply(p,_toConsumableArray(this._getAttributesDiff(m,g,v))),u++,d++}else u++,d++}}catch(I){f.e(I)}finally{f.f()}}}catch(I){r.e(I)}finally{r.f()}n.sort((function(e,t){return e.position.root!=t.position.root?e.position.root.rootName<t.position.root.rootName?-1:1:e.position.isEqual(t.position)?e.changeCount-t.changeCount:e.position.isBefore(t.position)?-1:1}));for(var k=1,_=0;k<n.length;k++){var b=n[_],w=n[k],x="remove"==b.type&&"remove"==w.type&&"$text"==b.name&&"$text"==w.name&&b.position.isEqual(w.position),C="insert"==b.type&&"insert"==w.type&&"$text"==b.name&&"$text"==w.name&&b.position.parent==w.position.parent&&b.position.offset+b.length==w.position.offset,T="attribute"==b.type&&"attribute"==w.type&&b.position.parent==w.position.parent&&b.range.isFlat&&w.range.isFlat&&b.position.offset+b.length==w.position.offset&&b.attributeKey==w.attributeKey&&b.attributeOldValue==w.attributeOldValue&&b.attributeNewValue==w.attributeNewValue;x||C||T?(b.length++,T&&(b.range.end=b.range.end.getShiftedBy(1)),n[k]=null):_=k}var A,S=_createForOfIteratorHelper(n=n.filter((function(e){return e})));try{for(S.s();!(A=S.n()).done;){var E=A.value;delete E.changeCount,"attribute"==E.type&&(delete E.position,delete E.length)}}catch(I){S.e(I)}finally{S.f()}return this._changeCount=0,this._cachedChangesWithGraveyard=n.slice(),this._cachedChanges=n.filter(La),e.includeChangesInGraveyard?this._cachedChangesWithGraveyard:this._cachedChanges}},{key:"reset",value:function(){this._changesInElement.clear(),this._elementSnapshots.clear(),this._changedMarkers.clear(),this._cachedChanges=null}},{key:"_markInsert",value:function(e,t,n){var r={type:"insert",offset:t,howMany:n,count:this._changeCount++};this._markChange(e,r)}},{key:"_markRemove",value:function(e,t,n){var r={type:"remove",offset:t,howMany:n,count:this._changeCount++};this._markChange(e,r),this._removeAllNestedChanges(e,t,n)}},{key:"_markAttribute",value:function(e){var t={type:"attribute",offset:e.startOffset,howMany:e.offsetSize,count:this._changeCount++};this._markChange(e.parent,t)}},{key:"_markChange",value:function(e,t){this._makeSnapshot(e);var n=this._getChangesForElement(e);this._handleChange(t,n),n.push(t);for(var r=0;r<n.length;r++)n[r].howMany<1&&(n.splice(r,1),r--)}},{key:"_getChangesForElement",value:function(e){var t;return this._changesInElement.has(e)?t=this._changesInElement.get(e):(t=[],this._changesInElement.set(e,t)),t}},{key:"_makeSnapshot",value:function(e){this._elementSnapshots.has(e)||this._elementSnapshots.set(e,Fa(e.getChildren()))}},{key:"_handleChange",value:function(e,t){e.nodesToHandle=e.howMany;var n,r=_createForOfIteratorHelper(t);try{for(r.s();!(n=r.n()).done;){var i=n.value,o=e.offset+e.howMany,a=i.offset+i.howMany;if("insert"==e.type&&("insert"==i.type&&(e.offset<=i.offset?i.offset+=e.howMany:e.offset<a&&(i.howMany+=e.nodesToHandle,e.nodesToHandle=0)),"remove"==i.type&&e.offset<i.offset&&(i.offset+=e.howMany),"attribute"==i.type))if(e.offset<=i.offset)i.offset+=e.howMany;else if(e.offset<a){var s=i.howMany;i.howMany=e.offset-i.offset,t.unshift({type:"attribute",offset:o,howMany:s-i.howMany,count:this._changeCount++})}if("remove"==e.type){if("insert"==i.type)if(o<=i.offset)i.offset-=e.howMany;else if(o<=a)if(e.offset<i.offset){var c=o-i.offset;i.offset=e.offset,i.howMany-=c,e.nodesToHandle-=c}else i.howMany-=e.nodesToHandle,e.nodesToHandle=0;else if(e.offset<=i.offset)e.nodesToHandle-=i.howMany,i.howMany=0;else if(e.offset<a){var l=a-e.offset;i.howMany-=l,e.nodesToHandle-=l}if("remove"==i.type&&(o<=i.offset?i.offset-=e.howMany:e.offset<i.offset&&(e.nodesToHandle+=i.howMany,i.howMany=0)),"attribute"==i.type)if(o<=i.offset)i.offset-=e.howMany;else if(e.offset<i.offset){var u=o-i.offset;i.offset=e.offset,i.howMany-=u}else if(e.offset<a)if(o<=a){var d=i.howMany;i.howMany=e.offset-i.offset,t.unshift({type:"attribute",offset:e.offset,howMany:d-i.howMany-e.nodesToHandle,count:this._changeCount++})}else i.howMany-=a-e.offset}if("attribute"==e.type){if("insert"==i.type)if(e.offset<i.offset&&o>i.offset){if(o>a){var f={type:"attribute",offset:a,howMany:o-a,count:this._changeCount++};this._handleChange(f,t),t.push(f)}e.nodesToHandle=i.offset-e.offset,e.howMany=e.nodesToHandle}else e.offset>=i.offset&&e.offset<a&&(o>a?(e.nodesToHandle=o-a,e.offset=a):e.nodesToHandle=0);if("remove"==i.type&&e.offset<i.offset&&o>i.offset){var h={type:"attribute",offset:i.offset,howMany:o-i.offset,count:this._changeCount++};this._handleChange(h,t),t.push(h),e.nodesToHandle=i.offset-e.offset,e.howMany=e.nodesToHandle}"attribute"==i.type&&(e.offset>=i.offset&&o<=a?(e.nodesToHandle=0,e.howMany=0,e.offset=0):e.offset<=i.offset&&o>=a&&(i.howMany=0))}}}catch(p){r.e(p)}finally{r.f()}e.howMany=e.nodesToHandle,delete e.nodesToHandle}},{key:"_getInsertDiff",value:function(e,t,n){return{type:"insert",position:Ki._createAt(e,t),name:n,length:1,changeCount:this._changeCount++}}},{key:"_getRemoveDiff",value:function(e,t,n){return{type:"remove",position:Ki._createAt(e,t),name:n,length:1,changeCount:this._changeCount++}}},{key:"_getAttributesDiff",value:function(e,t,n){var r=[];n=new Map(n);var i,o=_createForOfIteratorHelper(t);try{for(o.s();!(i=o.n()).done;){var a=_slicedToArray(i.value,2),s=a[0],c=a[1],l=n.has(s)?n.get(s):null;l!==c&&r.push({type:"attribute",position:e.start,range:e.clone(),length:1,attributeKey:s,attributeOldValue:c,attributeNewValue:l,changeCount:this._changeCount++}),n.delete(s)}}catch(v){o.e(v)}finally{o.f()}var u,d=_createForOfIteratorHelper(n);try{for(d.s();!(u=d.n()).done;){var f=_slicedToArray(u.value,2),h=f[0],p=f[1];r.push({type:"attribute",position:e.start,range:e.clone(),length:1,attributeKey:h,attributeOldValue:null,attributeNewValue:p,changeCount:this._changeCount++})}}catch(v){d.e(v)}finally{d.f()}return r}},{key:"_isInInsertedElement",value:function(e){var t=e.parent;if(!t)return!1;var n=this._changesInElement.get(t),r=e.startOffset;if(n){var i,o=_createForOfIteratorHelper(n);try{for(o.s();!(i=o.n()).done;){var a=i.value;if("insert"==a.type&&r>=a.offset&&r<a.offset+a.howMany)return!0}}catch(s){o.e(s)}finally{o.f()}}return this._isInInsertedElement(t)}},{key:"_removeAllNestedChanges",value:function(e,t,n){var r,i=_createForOfIteratorHelper(new eo(Ki._createAt(e,t),Ki._createAt(e,t+n)).getItems({shallow:!0}));try{for(i.s();!(r=i.n()).done;){var o=r.value;o.is("element")&&(this._elementSnapshots.delete(o),this._changesInElement.delete(o),this._removeAllNestedChanges(o,0,o.maxOffset))}}catch(a){i.e(a)}finally{i.f()}}}]),e}();function Fa(e){var t,n=[],r=_createForOfIteratorHelper(e);try{for(r.s();!(t=r.n()).done;){var i=t.value;if(i.is("$text"))for(var o=0;o<i.data.length;o++)n.push({name:"$text",attributes:new Map(i.getAttributes())});else n.push({name:i.name,attributes:new Map(i.getAttributes())})}}catch(a){r.e(a)}finally{r.f()}return n}function ja(e,t){var n,r=[],i=0,o=0,a=_createForOfIteratorHelper(t);try{for(a.s();!(n=a.n()).done;){var s=n.value;if(s.offset>i){for(var c=0;c<s.offset-i;c++)r.push("e");o+=s.offset-i}if("insert"==s.type){for(var l=0;l<s.howMany;l++)r.push("i");i=s.offset+s.howMany}else if("remove"==s.type){for(var u=0;u<s.howMany;u++)r.push("r");i=s.offset,o+=s.howMany}else r.push.apply(r,_toConsumableArray("a".repeat(s.howMany).split(""))),i=s.offset+s.howMany,o+=s.howMany}}catch(f){a.e(f)}finally{a.f()}if(o<e)for(var d=0;d<e-o-i;d++)r.push("e");return r}function La(e){return!(e.position&&"$graveyard"==e.position.root.rootName||e.range&&"$graveyard"==e.range.root.rootName)}var Va=function(){function e(){_classCallCheck(this,e),this._operations=[],this._undoPairs=new Map,this._undoneOperations=new Set}return _createClass(e,[{key:"addOperation",value:function(e){this._operations.includes(e)||this._operations.push(e)}},{key:"getOperations",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Number.NEGATIVE_INFINITY,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.POSITIVE_INFINITY,r=[],i=_createForOfIteratorHelper(this._operations);try{for(i.s();!(e=i.n()).done;){var o=e.value;o.baseVersion>=t&&o.baseVersion<n&&r.push(o)}}catch(a){i.e(a)}finally{i.f()}return r}},{key:"getOperation",value:function(e){var t,n=_createForOfIteratorHelper(this._operations);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.baseVersion==e)return r}}catch(i){n.e(i)}finally{n.f()}}},{key:"setOperationAsUndone",value:function(e,t){this._undoPairs.set(t,e),this._undoneOperations.add(e)}},{key:"isUndoingOperation",value:function(e){return this._undoPairs.has(e)}},{key:"isUndoneOperation",value:function(e){return this._undoneOperations.has(e)}},{key:"getUndoneOperation",value:function(e){return this._undoPairs.get(e)}}]),e}();function Ba(e,t){return function(e){return!!e&&1==e.length&&/[\ud800-\udbff]/.test(e)}(e.charAt(t-1))&&function(e){return!!e&&1==e.length&&/[\udc00-\udfff]/.test(e)}(e.charAt(t))}function za(e,t){return function(e){return!!e&&1==e.length&&/[\u0300-\u036f\u1ab0-\u1aff\u1dc0-\u1dff\u20d0-\u20ff\ufe20-\ufe2f]/.test(e)}(e.charAt(t))}var Ha="$graveyard",Ua=function(){function e(t){var n=this;_classCallCheck(this,e),this.model=t,this.version=0,this.history=new Va(this),this.selection=new go(this),this.roots=new $e.default({idProperty:"rootName"}),this.differ=new Da(t.markers),this._postFixers=new Set,this._hasSelectionChangedFromTheLastChangeBlock=!1,this.createRoot("$root",Ha),this.listenTo(t,"applyOperation",(function(e,t){var r=t[0];if(r.isDocumentOperation&&r.baseVersion!==n.version)throw new Ke.default("model-document-applyoperation-wrong-version",n,{operation:r})}),{priority:"highest"}),this.listenTo(t,"applyOperation",(function(e,t){var r=t[0];r.isDocumentOperation&&n.differ.bufferOperation(r)}),{priority:"high"}),this.listenTo(t,"applyOperation",(function(e,t){var r=t[0];r.isDocumentOperation&&(n.version++,n.history.addOperation(r))}),{priority:"low"}),this.listenTo(this.selection,"change",(function(){n._hasSelectionChangedFromTheLastChangeBlock=!0})),this.listenTo(t.markers,"update",(function(e,t,r,i){n.differ.bufferMarkerChange(t.name,r,i,t.affectsData),null===r&&t.on("change",(function(e,r){n.differ.bufferMarkerChange(t.name,r,t.getRange(),t.affectsData)}))}))}return _createClass(e,[{key:"graveyard",get:function(){return this.getRoot(Ha)}},{key:"createRoot",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"$root",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"main";if(this.roots.get(t))throw new Ke.default("model-document-createroot-name-exists",this,{name:t});var n=new Ea(this,e,t);return this.roots.add(n),n}},{key:"destroy",value:function(){this.selection.destroy(),this.stopListening()}},{key:"getRoot",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"main";return this.roots.get(e)}},{key:"getRootNames",value:function(){return Array.from(this.roots,(function(e){return e.rootName})).filter((function(e){return e!=Ha}))}},{key:"registerPostFixer",value:function(e){this._postFixers.add(e)}},{key:"toJSON",value:function(){var e=at(this);return e.selection="[engine.model.DocumentSelection]",e.model="[engine.model.Model]",e}},{key:"_handleChangeBlock",value:function(e){this._hasDocumentChangedFromTheLastChangeBlock()&&(this._callPostFixers(e),this.selection.refresh(),this.differ.hasDataChanges()?this.fire("change:data",e.batch):this.fire("change",e.batch),this.selection.refresh(),this.differ.reset()),this._hasSelectionChangedFromTheLastChangeBlock=!1}},{key:"_hasDocumentChangedFromTheLastChangeBlock",value:function(){return!this.differ.isEmpty||this._hasSelectionChangedFromTheLastChangeBlock}},{key:"_getDefaultRoot",value:function(){var e,t=_createForOfIteratorHelper(this.roots);try{for(t.s();!(e=t.n()).done;){var n=e.value;if(n!==this.graveyard)return n}}catch(r){t.e(r)}finally{t.f()}return this.graveyard}},{key:"_getDefaultRange",value:function(){var e=this._getDefaultRoot(),t=this.model,n=t.schema,r=t.createPositionFromPath(e,[0]);return n.getNearestSelectionRange(r)||t.createRange(r)}},{key:"_validateSelectionRange",value:function(e){return Wa(e.start)&&Wa(e.end)}},{key:"_callPostFixers",value:function(e){var t=!1;do{var n,r=_createForOfIteratorHelper(this._postFixers);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(this.selection.refresh(),t=i(e))break}}catch(o){r.e(o)}finally{r.f()}}while(t)}}]),e}();function Wa(e){var t=e.textNode;if(t){var n=t.data,r=e.offset-t.startOffset;return!Ba(n,r)&&!za(n,r)}return!0}Object(u.default)(Ua,Qe.default);var qa=function(){function e(){_classCallCheck(this,e),this._markers=new Map}return _createClass(e,[{key:Symbol.iterator,value:function(){return this._markers.values()}},{key:"has",value:function(e){return this._markers.has(e)}},{key:"get",value:function(e){return this._markers.get(e)||null}},{key:"_set",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=e instanceof Ya?e.name:e;if(i.includes(","))throw new Ke.default("markercollection-incorrect-marker-name",this);var o=this._markers.get(i);if(o){var a=o.getRange(),s=!1;return a.isEqual(t)||(o._attachLiveRange(po.fromRange(t)),s=!0),n!=o.managedUsingOperations&&(o._managedUsingOperations=n,s=!0),"boolean"==typeof r&&r!=o.affectsData&&(o._affectsData=r,s=!0),s&&this.fire("update:"+i,o,a,t),o}var c=po.fromRange(t),l=new Ya(i,c,n,r);return this._markers.set(i,l),this.fire("update:"+i,l,null,t),l}},{key:"_remove",value:function(e){var t=e instanceof Ya?e.name:e,n=this._markers.get(t);return!!n&&(this._markers.delete(t),this.fire("update:"+t,n,n.getRange(),null),this._destroyMarker(n),!0)}},{key:"_refresh",value:function(e){var t=e instanceof Ya?e.name:e,n=this._markers.get(t);if(!n)throw new Ke.default("markercollection-refresh-marker-not-exists",this);var r=n.getRange();this.fire("update:"+t,n,r,r,n.managedUsingOperations,n.affectsData)}},{key:"getMarkersAtPosition",value:regeneratorRuntime.mark((function e(t){var n,r,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=_createForOfIteratorHelper(this),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=11;break}if(i=r.value,e.t0=i.getRange().containsPosition(t),!e.t0){e.next=9;break}return e.next=9,i;case 9:e.next=3;break;case 11:e.next=16;break;case 13:e.prev=13,e.t1=e.catch(1),n.e(e.t1);case 16:return e.prev=16,n.f(),e.finish(16);case 19:case"end":return e.stop()}}),e,this,[[1,13,16,19]])}))},{key:"getMarkersIntersectingRange",value:regeneratorRuntime.mark((function e(t){var n,r,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=_createForOfIteratorHelper(this),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=11;break}if(i=r.value,e.t0=null!==i.getRange().getIntersection(t),!e.t0){e.next=9;break}return e.next=9,i;case 9:e.next=3;break;case 11:e.next=16;break;case 13:e.prev=13,e.t1=e.catch(1),n.e(e.t1);case 16:return e.prev=16,n.f(),e.finish(16);case 19:case"end":return e.stop()}}),e,this,[[1,13,16,19]])}))},{key:"destroy",value:function(){var e,t=_createForOfIteratorHelper(this._markers.values());try{for(t.s();!(e=t.n()).done;){var n=e.value;this._destroyMarker(n)}}catch(r){t.e(r)}finally{t.f()}this._markers=null,this.stopListening()}},{key:"getMarkersGroup",value:regeneratorRuntime.mark((function e(t){var n,r,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=_createForOfIteratorHelper(this._markers.values()),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=11;break}if(i=r.value,e.t0=i.name.startsWith(t+":"),!e.t0){e.next=9;break}return e.next=9,i;case 9:e.next=3;break;case 11:e.next=16;break;case 13:e.prev=13,e.t1=e.catch(1),n.e(e.t1);case 16:return e.prev=16,n.f(),e.finish(16);case 19:case"end":return e.stop()}}),e,this,[[1,13,16,19]])}))},{key:"_destroyMarker",value:function(e){e.stopListening(),e._detachLiveRange()}}]),e}();Object(u.default)(qa,Qe.default);var Ya=function(){function e(t,n,r,i){_classCallCheck(this,e),this.name=t,this._liveRange=this._attachLiveRange(n),this._managedUsingOperations=r,this._affectsData=i}return _createClass(e,[{key:"managedUsingOperations",get:function(){if(!this._liveRange)throw new Ke.default("marker-destroyed",this);return this._managedUsingOperations}},{key:"affectsData",get:function(){if(!this._liveRange)throw new Ke.default("marker-destroyed",this);return this._affectsData}},{key:"getStart",value:function(){if(!this._liveRange)throw new Ke.default("marker-destroyed",this);return this._liveRange.start.clone()}},{key:"getEnd",value:function(){if(!this._liveRange)throw new Ke.default("marker-destroyed",this);return this._liveRange.end.clone()}},{key:"getRange",value:function(){if(!this._liveRange)throw new Ke.default("marker-destroyed",this);return this._liveRange.toRange()}},{key:"is",value:function(e){return"marker"===e||"model:marker"===e}},{key:"_attachLiveRange",value:function(e){return this._liveRange&&this._detachLiveRange(),e.delegate("change:range").to(this),e.delegate("change:content").to(this),this._liveRange=e,e}},{key:"_detachLiveRange",value:function(){this._liveRange.stopDelegating("change:range",this),this._liveRange.stopDelegating("change:content",this),this._liveRange.detach(),this._liveRange=null}}]),e}();Object(u.default)(Ya,Qe.default);var Ga=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"type",get:function(){return"noop"}},{key:"clone",value:function(){return new n(this.baseVersion)}},{key:"getReversed",value:function(){return new n(this.baseVersion+1)}},{key:"_execute",value:function(){}}],[{key:"className",get:function(){return"NoOperation"}}]),n}(la),Ja={};Ja[ka.className]=ka,Ja[wa.className]=wa,Ja[xa.className]=xa,Ja[ba.className]=ba,Ja[Ga.className]=Ga,Ja[la.className]=la,Ja[Ca.className]=Ca,Ja[Ta.className]=Ta,Ja[Sa.className]=Sa,Ja[Aa.className]=Aa;var $a=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"fromJSON",value:function(e,t){return Ja[e.__className].fromJSON(e,t)}}]),e}(),Ka=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"toNone";if(_classCallCheck(this,n),!(i=t.call(this,e,r,o)).root.is("rootElement"))throw new Ke.default("model-liveposition-root-not-rootelement",e);return(function(){var e=this;this.listenTo(this.root.document.model,"applyOperation",(function(t,n){var r=n[0];r.isDocumentOperation&&(function(e){var t=this.getTransformedByOperation(e);if(!this.isEqual(t)){var n=this.toPosition();this.path=t.path,this.root=t.root,this.fire("change",n)}}).call(e,r)}),{priority:"low"})}).call(_assertThisInitialized(i)),_possibleConstructorReturn(i)}return _createClass(n,[{key:"detach",value:function(){this.stopListening()}},{key:"is",value:function(e){return"livePosition"===e||"model:livePosition"===e||"position"==e||"model:position"===e}},{key:"toPosition",value:function(){return new Ki(this.root,this.path.slice(),this.stickiness)}}],[{key:"fromPosition",value:function(e,t){return new this(e.root,e.path.slice(),t||e.stickiness)}}]),n}(Ki);Object(u.default)(Ka,Qe.default);var Qa=function(){function e(t,n,r){_classCallCheck(this,e),this.model=t,this.writer=n,this.position=r,this.canMergeWith=new Set([this.position.parent]),this.schema=t.schema,this._documentFragment=n.createDocumentFragment(),this._documentFragmentPosition=n.createPositionAt(this._documentFragment,0),this._firstNode=null,this._lastNode=null,this._lastAutoParagraph=null,this._filterAttributesOf=[],this._affectedStart=null,this._affectedEnd=null}return _createClass(e,[{key:"handleNodes",value:function(e){for(var t=0,n=Array.from(e);t<n.length;t++){var r=n[t];this._handleNode(r)}this._insertPartialFragment(),this._lastAutoParagraph&&this._updateLastNodeFromAutoParagraph(this._lastAutoParagraph),this._mergeOnRight(),this.schema.removeDisallowedAttributes(this._filterAttributesOf,this.writer),this._filterAttributesOf=[]}},{key:"_updateLastNodeFromAutoParagraph",value:function(e){var t=this.writer.createPositionAfter(this._lastNode),n=this.writer.createPositionAfter(e);if(n.isAfter(t)){if(this._lastNode=e,this.position.parent!=e||!this.position.isAtEnd)throw new Ke.default("insertcontent-invalid-insertion-position",this);this.position=n,this._setAffectedBoundaries(this.position)}}},{key:"getSelectionRange",value:function(){return this.nodeToSelect?eo._createOn(this.nodeToSelect):this.model.schema.getNearestSelectionRange(this.position)}},{key:"getAffectedRange",value:function(){return this._affectedStart?new eo(this._affectedStart,this._affectedEnd):null}},{key:"destroy",value:function(){this._affectedStart&&this._affectedStart.detach(),this._affectedEnd&&this._affectedEnd.detach()}},{key:"_handleNode",value:function(e){if(this.schema.isObject(e))this._handleObject(e);else{var t=this._checkAndAutoParagraphToAllowedPosition(e);t||(t=this._checkAndSplitToAllowedPosition(e))?(this._appendToFragment(e),this._firstNode||(this._firstNode=e),this._lastNode=e):this._handleDisallowedNode(e)}}},{key:"_insertPartialFragment",value:function(){if(!this._documentFragment.isEmpty){var e=Ka.fromPosition(this.position,"toNext");this._setAffectedBoundaries(this.position),this._documentFragment.getChild(0)==this._firstNode&&(this.writer.insert(this._firstNode,this.position),this._mergeOnLeft(),this.position=e.toPosition()),this._documentFragment.isEmpty||this.writer.insert(this._documentFragment,this.position),this._documentFragmentPosition=this.writer.createPositionAt(this._documentFragment,0),this.position=e.toPosition(),e.detach()}}},{key:"_handleObject",value:function(e){this._checkAndSplitToAllowedPosition(e)?this._appendToFragment(e):this._tryAutoparagraphing(e)}},{key:"_handleDisallowedNode",value:function(e){e.is("element")?this.handleNodes(e.getChildren()):this._tryAutoparagraphing(e)}},{key:"_appendToFragment",value:function(e){if(!this.schema.checkChild(this.position,e))throw new Ke.default("insertcontent-wrong-position",this,{node:e,position:this.position});this.writer.insert(e,this._documentFragmentPosition),this._documentFragmentPosition=this._documentFragmentPosition.getShiftedBy(e.offsetSize),this.nodeToSelect=this.schema.isObject(e)&&!this.schema.checkChild(this.position,"$text")?e:null,this._filterAttributesOf.push(e)}},{key:"_setAffectedBoundaries",value:function(e){this._affectedStart||(this._affectedStart=Ka.fromPosition(e,"toPrevious")),this._affectedEnd&&!this._affectedEnd.isBefore(e)||(this._affectedEnd&&this._affectedEnd.detach(),this._affectedEnd=Ka.fromPosition(e,"toNext"))}},{key:"_mergeOnLeft",value:function(){var e=this._firstNode;if(e instanceof Gi&&this._canMergeLeft(e)){var t=Ka._createBefore(e);t.stickiness="toNext";var n=Ka.fromPosition(this.position,"toNext");this._affectedStart.isEqual(t)&&(this._affectedStart.detach(),this._affectedStart=Ka._createAt(t.nodeBefore,"end","toPrevious")),this._firstNode===this._lastNode&&(this._firstNode=t.nodeBefore,this._lastNode=t.nodeBefore),this.writer.merge(t),t.isEqual(this._affectedEnd)&&this._firstNode===this._lastNode&&(this._affectedEnd.detach(),this._affectedEnd=Ka._createAt(t.nodeBefore,"end","toNext")),this.position=n.toPosition(),n.detach(),this._filterAttributesOf.push(this.position.parent),t.detach()}}},{key:"_mergeOnRight",value:function(){var e=this._lastNode;if(e instanceof Gi&&this._canMergeRight(e)){var t=Ka._createAfter(e);if(t.stickiness="toNext",!this.position.isEqual(t))throw new Ke.default("insertcontent-invalid-insertion-position",this);this.position=Ki._createAt(t.nodeBefore,"end");var n=Ka.fromPosition(this.position,"toPrevious");this._affectedEnd.isEqual(t)&&(this._affectedEnd.detach(),this._affectedEnd=Ka._createAt(t.nodeBefore,"end","toNext")),this._firstNode===this._lastNode&&(this._firstNode=t.nodeBefore,this._lastNode=t.nodeBefore),this.writer.merge(t),t.getShiftedBy(-1).isEqual(this._affectedStart)&&this._firstNode===this._lastNode&&(this._affectedStart.detach(),this._affectedStart=Ka._createAt(t.nodeBefore,0,"toPrevious")),this.position=n.toPosition(),n.detach(),this._filterAttributesOf.push(this.position.parent),t.detach()}}},{key:"_canMergeLeft",value:function(e){var t=e.previousSibling;return t instanceof Gi&&this.canMergeWith.has(t)&&this.model.schema.checkMerge(t,e)}},{key:"_canMergeRight",value:function(e){var t=e.nextSibling;return t instanceof Gi&&this.canMergeWith.has(t)&&this.model.schema.checkMerge(e,t)}},{key:"_tryAutoparagraphing",value:function(e){var t=this.writer.createElement("paragraph");this._getAllowedIn(t,this.position.parent)&&this.schema.checkChild(t,e)&&(t._appendChild(e),this._handleNode(t))}},{key:"_checkAndAutoParagraphToAllowedPosition",value:function(e){if(this.schema.checkChild(this.position.parent,e))return!0;if(!this.schema.checkChild(this.position.parent,"paragraph")||!this.schema.checkChild("paragraph",e))return!1;this._insertPartialFragment();var t=this.writer.createElement("paragraph");return this.writer.insert(t,this.position),this._setAffectedBoundaries(this.position),this._lastAutoParagraph=t,this.position=this.writer.createPositionAt(t,0),!0}},{key:"_checkAndSplitToAllowedPosition",value:function(e){var t=this._getAllowedIn(e,this.position.parent);if(!t)return!1;for(t!=this.position.parent&&this._insertPartialFragment();t!=this.position.parent;){if(this.schema.isLimit(this.position.parent))return!1;if(this.position.isAtStart){var n=this.position.parent;this.position=this.writer.createPositionBefore(n),n.isEmpty&&n.parent===t&&this.writer.remove(n)}else if(this.position.isAtEnd)this.position=this.writer.createPositionAfter(this.position.parent);else{var r=this.writer.createPositionAfter(this.position.parent);this._setAffectedBoundaries(this.position),this.writer.split(this.position),this.position=r,this.canMergeWith.add(this.position.nodeAfter)}}return!0}},{key:"_getAllowedIn",value:function(e,t){return this.schema.checkChild(t,e)?t:t.parent?this._getAllowedIn(e,t.parent):null}}]),e}();function Za(e,t,n){var r=t.parent,i=n.parent;return r!=i&&!e.isLimit(r)&&!e.isLimit(i)&&function(e,t,n){var r,i=_createForOfIteratorHelper(new eo(e,t).getWalker());try{for(i.s();!(r=i.n()).done;){var o=r.value;if(n.isLimit(o.item))return!1}}catch(a){i.e(a)}finally{i.f()}return!0}(t,n,e)}function Xa(e,t,n){var r=e.createElement("paragraph");e.insert(r,t),es(e,n,e.createPositionAt(r,0))}function es(e,t,n){t instanceof go?e.setSelection(n):t.setTo(n)}var ts=' ,.?!:;"-()';function ns(e,t){var n=e.isForward,r=e.walker,i=e.unit,o=e.schema,a=t.type,s=t.item,c=t.nextPosition;if("text"==a)return"word"===e.unit?function(e,t){var n=e.position.textNode;if(n)for(var r=e.position.offset-n.startOffset;!rs(n.data,r,t)&&!is(n,r,t);){e.next();var i=t?e.position.nodeAfter:e.position.nodeBefore;if(i&&i.is("$text")){var o=i.data.charAt(t?0:i.data.length-1);ts.includes(o)||(e.next(),n=e.position.textNode)}r=e.position.offset-n.startOffset}return e.position}(r,n):function(e,t){var n=e.position.textNode;if(n)for(var r=n.data,i=e.position.offset-n.startOffset;Ba(r,i)||"character"==t&&za(r,i);)e.next(),i=e.position.offset-n.startOffset;return e.position}(r,i);if(a==(n?"elementStart":"elementEnd")){if(o.isSelectable(s))return Ki._createAt(s,n?"after":"before");if(o.checkChild(c,"$text"))return c}else{if(o.isLimit(s))return void r.skip((function(){return!0}));if(o.checkChild(c,"$text"))return c}}function rs(e,t,n){return ts.includes(e.charAt(t+(n?0:-1)))}function is(e,t,n){return t===(n?e.endOffset:0)}function os(e,t){var n=[];Array.from(e.getItems({direction:"backward"})).map((function(e){return t.createRangeOn(e)})).filter((function(t){return(t.start.isAfter(e.start)||t.start.isEqual(e.start))&&(t.end.isBefore(e.end)||t.end.isEqual(e.end))})).forEach((function(e){n.push(e.start.parent),t.remove(e)})),n.forEach((function(e){for(var n=e;n.parent&&n.isEmpty;){var r=t.createRangeOn(n);n=n.parent,t.remove(r)}}))}function as(e,t){return e.isCollapsed?function(e,t){var n=e.start,r=t.getNearestSelectionRange(n);if(!r)return null;if(!r.isCollapsed)return r;var i=r.start;return n.isEqual(i)?null:new eo(i)}(e,t):function(e,t){var n=e.start,r=e.end,i=t.checkChild(n,"$text"),o=t.checkChild(r,"$text"),a=t.getLimitElement(n),s=t.getLimitElement(r);if(a===s){if(i&&o)return null;if(function(e,t,n){var r=e.nodeAfter&&!n.isLimit(e.nodeAfter)||n.checkChild(e,"$text"),i=t.nodeBefore&&!n.isLimit(t.nodeBefore)||n.checkChild(t,"$text");return r||i}(n,r,t)){var c=n.nodeAfter&&t.isSelectable(n.nodeAfter)?null:t.getNearestSelectionRange(n,"forward"),l=r.nodeBefore&&t.isSelectable(r.nodeBefore)?null:t.getNearestSelectionRange(r,"backward");return new eo(c?c.start:n,l?l.end:r)}}var u=a&&!a.is("rootElement"),d=s&&!s.is("rootElement");if(u||d){var f=n.nodeAfter&&r.nodeBefore&&n.nodeAfter.parent===r.nodeBefore.parent,h=u&&(!f||!cs(n.nodeAfter,t)),p=d&&(!f||!cs(r.nodeBefore,t)),v=n,g=r;return h&&(v=Ki._createBefore(ss(a,t))),p&&(g=Ki._createAfter(ss(s,t))),new eo(v,g)}return null}(e,t)}function ss(e,t){for(var n=e,r=n;t.isLimit(r)&&r.parent;)n=r,r=r.parent;return n}function cs(e,t){return e&&t.isSelectable(e)}var ls=function(){function e(){var t=this;_classCallCheck(this,e),this.markers=new qa,this.document=new Ua(this),this.schema=new Ho,this._pendingChanges=[],this._currentWriter=null,["insertContent","deleteContent","modifySelection","getSelectedContent","applyOperation"].forEach((function(e){return t.decorate(e)})),this.on("applyOperation",(function(e,t){t[0]._validate()}),{priority:"highest"}),this.schema.register("$root",{isLimit:!0}),this.schema.register("$block",{allowIn:"$root",isBlock:!0}),this.schema.register("$text",{allowIn:"$block",isInline:!0,isContent:!0}),this.schema.register("$clipboardHolder",{allowContentOf:"$root",isLimit:!0}),this.schema.extend("$text",{allowIn:"$clipboardHolder"}),this.schema.register("$documentFragment",{allowContentOf:"$root",isLimit:!0}),this.schema.extend("$text",{allowIn:"$documentFragment"}),this.schema.register("$marker"),this.schema.addChildCheck((function(e,t){if("$marker"===t.name)return!0})),function(e){e.document.registerPostFixer((function(t){return function(e,t){var n,r=t.document.selection,i=t.schema,o=[],a=!1,s=_createForOfIteratorHelper(r.getRanges());try{for(s.s();!(n=s.n()).done;){var c=n.value,l=as(c,i);l&&!l.isEqual(c)?(o.push(l),a=!0):o.push(c)}}catch(u){s.e(u)}finally{s.f()}a&&e.setSelection(function(e){var t=[];t.push(e.shift());var n,r=_createForOfIteratorHelper(e);try{for(r.s();!(n=r.n()).done;){var i=n.value,o=t.pop();if(i.isEqual(o))t.push(o);else if(i.isIntersecting(o)){var a=o.start.isAfter(i.start)?i.start:o.start,s=o.end.isAfter(i.end)?o.end:i.end,c=new eo(a,s);t.push(c)}else t.push(o),t.push(i)}}catch(u){r.e(u)}finally{r.f()}return t}(o),{backward:r.isBackward})}(t,e)}))}(this),this.document.registerPostFixer(Eo)}return _createClass(e,[{key:"change",value:function(e){try{return 0===this._pendingChanges.length?(this._pendingChanges.push({batch:new ca,callback:e}),this._runPendingChanges()[0]):e(this._currentWriter)}catch(e){Ke.default.rethrowUnexpectedError(e,this)}}},{key:"enqueueChange",value:function(e,t){try{"string"==typeof e?e=new ca(e):"function"==typeof e&&(t=e,e=new ca),this._pendingChanges.push({batch:e,callback:t}),1==this._pendingChanges.length&&this._runPendingChanges()}catch(e){Ke.default.rethrowUnexpectedError(e,this)}}},{key:"applyOperation",value:function(e){e._execute()}},{key:"insertContent",value:function(e,t,n){return function(e,t,n,r){return e.change((function(i){var o;(o=n?n instanceof co||n instanceof go?n:i.createSelection(n,r):e.document.selection).isCollapsed||e.deleteContent(o,{doNotAutoparagraph:!0});var a,s=new Qa(e,i,o.anchor);a=t.is("documentFragment")?t.getChildren():[t],s.handleNodes(a);var c=s.getSelectionRange();c&&(o instanceof go?i.setSelection(c):o.setTo(c));var l=s.getAffectedRange()||e.createRange(o.anchor);return s.destroy(),l}))}(this,e,t,n)}},{key:"deleteContent",value:function(e,t){!function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!t.isCollapsed){var r=t.getFirstRange();if("$graveyard"!=r.root.rootName){var i=e.schema;e.change((function(e){if(n.doNotResetEntireContent||!function(e,t){var n=e.getLimitElement(t);if(!t.containsEntireContent(n))return!1;var r=t.getFirstRange();return r.start.parent!=r.end.parent&&e.checkChild(n,"paragraph")}(i,t)){var o=_slicedToArray(function(e){var t=e.root.document.model,n=e.start,r=e.end;if(t.hasContent(e,{ignoreMarkers:!0})){var i=function(e){var t,n=e.parent,r=n.root.document.model.schema,i=_createForOfIteratorHelper(n.getAncestors({parentFirst:!0,includeSelf:!0}));try{for(i.s();!(t=i.n()).done;){var o=t.value;if(r.isLimit(o))return null;if(r.isBlock(o))return o}}catch(a){i.e(a)}finally{i.f()}}(r);if(i&&r.isTouching(t.createPositionAt(i,0))){var o=t.createSelection(e);t.modifySelection(o,{direction:"backward"}),r=o.getLastPosition()}}return[Ka.fromPosition(n,"toPrevious"),Ka.fromPosition(r,"toNext")]}(r),2),a=o[0],s=o[1];a.isTouching(s)||e.remove(e.createRange(a,s)),n.leaveUnmerged||(function(e,t,n){var r=e.model;if(Za(e.model.schema,t,n)){var i=_slicedToArray(function(e,t){for(var n=e.getAncestors(),r=t.getAncestors(),i=0;n[i]&&n[i]==r[i];)i++;return[n[i],r[i]]}(t,n),2),o=i[0],a=i[1];o&&a&&(!r.hasContent(o,{ignoreMarkers:!0})&&r.hasContent(a,{ignoreMarkers:!0})?function e(t,n,r,i){var o=n.parent,a=r.parent;if(o!=i&&a!=i){for(n=t.createPositionAfter(o),(r=t.createPositionBefore(a)).isEqual(n)||t.insert(o,r);n.parent.isEmpty;){var s=n.parent;n=t.createPositionBefore(s),t.remove(s)}r=t.createPositionBefore(a),function(e,t){var n=t.nodeBefore,r=t.nodeAfter;n.name!=r.name&&e.rename(n,r.name),e.clearAttributes(n),e.setAttributes(Object.fromEntries(r.getAttributes()),n),e.merge(t)}(t,r),Za(t.model.schema,n,r)&&e(t,n,r,i)}}(e,t,n,o.parent):function e(t,n,r,i){var o=n.parent,a=r.parent;if(o!=i&&a!=i){for(n=t.createPositionAfter(o),(r=t.createPositionBefore(a)).isEqual(n)||t.insert(a,n),t.merge(n);r.parent.isEmpty;){var s=r.parent;r=t.createPositionBefore(s),t.remove(s)}Za(t.model.schema,n,r)&&e(t,n,r,i)}}(e,t,n,o.parent))}}(e,a,s),i.removeDisallowedAttributes(a.parent.getChildren(),e)),es(e,t,a),!n.doNotAutoparagraph&&function(e,t){var n=e.checkChild(t,"$text"),r=e.checkChild(t,"paragraph");return!n&&r}(i,a)&&Xa(e,a,t),a.detach(),s.detach()}else!function(e,t){var n=e.model.schema.getLimitElement(t);e.remove(e.createRangeIn(n)),Xa(e,e.createPositionAt(n,0),t)}(e,t)}))}}}(this,e,t)}},{key:"modifySelection",value:function(e,t){!function(e,t){for(var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=e.schema,o="backward"!=r.direction,a=r.unit?r.unit:"character",s=new Ji({boundaries:function(e,t){var n=Ki._createAt(e.root,t?"end":0);return t?new eo(e,n):new eo(n,e)}(t.focus,o),singleCharacters:!0,direction:o?"forward":"backward"}),c={walker:s,schema:i,isForward:o,unit:a},l=function(){if(n.done)return{v:void 0};var r=ns(c,n.value);return r?{v:void(t instanceof go?e.change((function(e){e.setSelectionFocus(r)})):t.setFocus(r))}:void 0};n=s.next();){var u=l();if("object"==typeof u)return u.v}}(this,e,t)}},{key:"getSelectedContent",value:function(e){return function(e,t){return e.change((function(e){var n=e.createDocumentFragment(),r=t.getFirstRange();if(!r||r.isCollapsed)return n;var i,o,a=r.start.root,s=r.start.getCommonPath(r.end),c=a.getNodeByPath(s),l=(i=r.start.parent==r.end.parent?r:e.createRange(e.createPositionAt(c,r.start.path[s.length]),e.createPositionAt(c,r.end.path[s.length]+1))).end.offset-i.start.offset,u=_createForOfIteratorHelper(i.getItems({shallow:!0}));try{for(u.s();!(o=u.n()).done;){var d=o.value;d.is("$textProxy")?e.appendText(d.data,d.getAttributes(),n):e.append(e.cloneElement(d,!0),n)}}catch(p){u.e(p)}finally{u.f()}if(i!=r){var f=r._getTransformedByMove(i.start,e.createPositionAt(n,0),l)[0],h=e.createRange(e.createPositionAt(n,0),f.start);os(e.createRange(f.end,e.createPositionAt(n,"end")),e),os(h,e)}return n}))}(this,e)}},{key:"hasContent",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e instanceof Gi?eo._createIn(e):e;if(n.isCollapsed)return!1;var r=t.ignoreWhitespaces,i=void 0!==r&&r,o=t.ignoreMarkers,a=void 0!==o&&o;if(!a){var s,c=_createForOfIteratorHelper(this.markers.getMarkersIntersectingRange(n));try{for(c.s();!(s=c.n()).done;){var l=s.value;if(l.affectsData)return!0}}catch(h){c.e(h)}finally{c.f()}}var u,d=_createForOfIteratorHelper(n.getItems());try{for(d.s();!(u=d.n()).done;){var f=u.value;if(this.schema.isContent(f)){if(!f.is("$textProxy"))return!0;if(!i)return!0;if(-1!==f.data.search(/\S/))return!0}}}catch(h){d.e(h)}finally{d.f()}return!1}},{key:"createPositionFromPath",value:function(e,t,n){return new Ki(e,t,n)}},{key:"createPositionAt",value:function(e,t){return Ki._createAt(e,t)}},{key:"createPositionAfter",value:function(e){return Ki._createAfter(e)}},{key:"createPositionBefore",value:function(e){return Ki._createBefore(e)}},{key:"createRange",value:function(e,t){return new eo(e,t)}},{key:"createRangeIn",value:function(e){return eo._createIn(e)}},{key:"createRangeOn",value:function(e){return eo._createOn(e)}},{key:"createSelection",value:function(e,t,n){return new co(e,t,n)}},{key:"createBatch",value:function(e){return new ca(e)}},{key:"createOperationFromJSON",value:function(e){return $a.fromJSON(e,this.document)}},{key:"destroy",value:function(){this.document.destroy(),this.stopListening()}},{key:"_runPendingChanges",value:function(){var e=[];for(this.fire("_beforeChanges");this._pendingChanges.length;){this._currentWriter=new Ia(this,this._pendingChanges[0].batch);var t=this._pendingChanges[0].callback(this._currentWriter);e.push(t),this.document._handleChangeBlock(this._currentWriter),this._pendingChanges.shift(),this._currentWriter=null}return this.fire("_afterChanges"),e}}]),e}();Object(u.default)(ls,l.default);var us=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this)).editor=e,r}return _createClass(n,[{key:"set",value:function(e,t){var r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("string"==typeof t){var o=t;t=function(e,t){r.editor.execute(o),t()}}_get3(_getPrototypeOf(n.prototype),"set",this).call(this,e,t,i)}}]),n}(Ii),ds=function(){function t(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,t),this._context=n.context||new rt({language:n.language}),this._context._addEditor(this,!n.context);var r=Array.from(this.constructor.builtinPlugins||[]);this.config=new Ye(n,this.constructor.defaultConfig),this.config.define("plugins",r),this.config.define(this._context._getEditorConfig()),this.plugins=new Ze(this,r,this._context.plugins),this.locale=this._context.locale,this.t=this.locale.t,this.commands=new Vo,this.set("state","initializing"),this.once("ready",(function(){return e.state="ready"}),{priority:"high"}),this.once("destroy",(function(){return e.state="destroyed"}),{priority:"high"}),this.set("isReadOnly",!1),this.model=new ls;var i=new Wt;this.data=new ia(this.model,i),this.editing=new Lo(this.model,i),this.editing.view.document.bind("isReadOnly").to(this),this.conversion=new oa([this.editing.downcastDispatcher,this.data.downcastDispatcher],this.data.upcastDispatcher),this.conversion.addAlias("dataDowncast",this.data.downcastDispatcher),this.conversion.addAlias("editingDowncast",this.editing.downcastDispatcher),this.keystrokes=new us(this),this.keystrokes.listenTo(this.editing.view.document)}return _createClass(t,[{key:"initPlugins",value:function(){var e=this.config,t=e.get("plugins"),n=e.get("removePlugins")||[],r=e.get("extraPlugins")||[],i=e.get("substitutePlugins")||[];return this.plugins.init(t.concat(r),n,i)}},{key:"destroy",value:function(){var e=this,t=Promise.resolve();return"initializing"==this.state&&(t=new Promise((function(t){return e.once("ready",t)}))),t.then((function(){e.fire("destroy"),e.stopListening(),e.commands.destroy()})).then((function(){return e.plugins.destroy()})).then((function(){e.model.destroy(),e.data.destroy(),e.editing.destroy(),e.keystrokes.destroy()})).then((function(){return e._context._removeEditor(e)}))}},{key:"execute",value:function(){try{var t;return(t=this.commands).execute.apply(t,arguments)}catch(e){Ke.default.rethrowUnexpectedError(e,this)}}},{key:"focus",value:function(){this.editing.view.focus()}}]),t}();Object(u.default)(ds,l.default);var fs=function(){function e(t){_classCallCheck(this,e),this.editor=t,this._components=new Map}return _createClass(e,[{key:"names",value:regeneratorRuntime.mark((function e(){var t,n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=_createForOfIteratorHelper(this._components.values()),e.prev=1,t.s();case 3:if((n=t.n()).done){e.next=9;break}return r=n.value,e.next=7,r.originalName;case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),t.e(e.t0);case 14:return e.prev=14,t.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,this,[[1,11,14,17]])}))},{key:"add",value:function(e,t){this._components.set(hs(e),{callback:t,originalName:e})}},{key:"create",value:function(e){if(!this.has(e))throw new Ke.default("componentfactory-item-missing",this,{name:e});return this._components.get(hs(e)).callback(this.editor.locale)}},{key:"has",value:function(e){return this._components.has(hs(e))}}]),e}();function hs(e){return String(e).toLowerCase()}var ps=function(){function e(t){var n=this;_classCallCheck(this,e),this.editor=t,this.componentFactory=new fs(t),this.focusTracker=new Ei,this._editableElementsMap=new Map,this.listenTo(t.editing.view.document,"layoutChanged",(function(){return n.update()}))}return _createClass(e,[{key:"element",get:function(){return null}},{key:"update",value:function(){this.fire("update")}},{key:"destroy",value:function(){this.stopListening(),this.focusTracker.destroy();var e,t=_createForOfIteratorHelper(this._editableElementsMap.values());try{for(t.s();!(e=t.n()).done;){e.value.ckeditorInstance=null}}catch(n){t.e(n)}finally{t.f()}this._editableElementsMap=new Map}},{key:"setEditableElement",value:function(e,t){this._editableElementsMap.set(e,t),t.ckeditorInstance||(t.ckeditorInstance=this.editor)}},{key:"getEditableElement",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"main";return this._editableElementsMap.get(e)}},{key:"getEditableElementsNames",value:function(){return this._editableElementsMap.keys()}},{key:"_editableElements",get:function(){return console.warn("editor-ui-deprecated-editable-elements: The EditorUI#_editableElements property has been deprecated and will be removed in the near future.",{editorUI:this}),this._editableElementsMap}}]),e}();Object(u.default)(ps,Qe.default);var vs={setData:function(e){this.data.set(e)},getData:function(e){return this.data.get(e)}},gs={updateSourceElement:function(){if(!this.sourceElement)throw new Ke.default("editor-missing-sourceelement",this);!function(e,t){e instanceof HTMLTextAreaElement&&(e.value=t),e.innerHTML=t}(this.sourceElement,this.data.get())}},ms=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"init",value:function(){this.set("hasAny",!1),this._actions=new $e.default({idProperty:"_id"}),this._actions.delegate("add","remove").to(this)}},{key:"add",value:function(e){if("string"!=typeof e)throw new Ke.default("pendingactions-add-invalid-message",this);var t=Object.create(l.default);return t.set("message",e),this._actions.add(t),this.hasAny=!0,t}},{key:"remove",value:function(e){this._actions.remove(e),this.hasAny=!!this._actions.length}},{key:"first",get:function(){return this._actions.get(0)}},{key:Symbol.iterator,value:function(){return this._actions[Symbol.iterator]()}}],[{key:"pluginName",get:function(){return"PendingActions"}}]),n}(it),ys=n(116),ks=n.n(ys),_s=n(117),bs=n.n(_s),ws=n(118),xs=n.n(ws),Cs=n(119),Ts=n.n(Cs),As=n(120),Ss=n.n(As),Es=n(121),Is=n.n(Es),Os=n(122),Rs=n.n(Os),Ps=n(123),Ms=n.n(Ps),Ns=n(124),Ds=n.n(Ns),Fs=n(125),js=n.n(Fs),Ls=n(126),Vs=n.n(Ls),Bs=n(127),zs=n.n(Bs),Hs=n(128),Us=n.n(Hs),Ws=n(129),qs=n.n(Ws),Ys=n(130),Gs=n.n(Ys),Js=n(131),$s=n.n(Js),Ks=n(132),Qs=n.n(Ks),Zs=n(133),Xs=n.n(Zs),ec=n(134),tc=n.n(ec),nc=n(135),rc=n.n(nc),ic=n(136),oc=n.n(ic),ac=n(137),sc=n.n(ac),cc=n(138),lc=n.n(cc),uc=n(139),dc=n.n(uc),fc=n(140),hc=n.n(fc),pc={cancel:ks.a,caption:bs.a,check:xs.a,eraser:Ts.a,lowVision:Ss.a,image:Is.a,alignBottom:Rs.a,alignMiddle:Ms.a,alignTop:Ds.a,alignLeft:js.a,alignCenter:Vs.a,alignRight:zs.a,alignJustify:Us.a,objectLeft:qs.a,objectCenter:Gs.a,objectRight:$s.a,objectFullWidth:Qs.a,objectSizeFull:Xs.a,objectSizeLarge:tc.a,objectSizeSmall:rc.a,objectSizeMedium:oc.a,pencil:sc.a,pilcrow:lc.a,quote:dc.a,threeVerticalDots:hc.a};function vc(e){var t=e.emitter,n=e.activator,r=e.callback,i=e.contextElements;t.listenTo(document,"mousedown",(function(e,t){if(n()){var o,a="function"==typeof t.composedPath?t.composedPath():[],s=_createForOfIteratorHelper(i);try{for(s.s();!(o=s.n()).done;){var c=o.value;if(c.contains(t.target)||a.includes(c))return}}catch(l){s.e(l)}finally{s.f()}r()}}))}function gc(e){e.set("_isCssTransitionsDisabled",!1),e.disableCssTransitions=function(){e._isCssTransitionsDisabled=!0},e.enableCssTransitions=function(){e._isCssTransitionsDisabled=!1},e.extendTemplate({attributes:{class:[e.bindTemplate.if("_isCssTransitionsDisabled","ck-transitions-disabled")]}})}function mc(e){var t=e.view;t.listenTo(t.element,"submit",(function(e,n){n.preventDefault(),t.fire("submit")}),{useCapture:!0})}var yc=function(e){_inherits(n,e);var t=_createSuper(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return _classCallCheck(this,n),(e=t.call(this,r,{idProperty:"viewUid"})).on("add",(function(t,n,r){e._renderViewIntoCollectionParent(n,r)})),e.on("remove",(function(t,n){n.element&&e._parentElement&&n.element.remove()})),e._parentElement=null,e}return _createClass(n,[{key:"destroy",value:function(){this.map((function(e){return e.destroy()}))}},{key:"setParent",value:function(e){this._parentElement=e;var t,n=_createForOfIteratorHelper(this);try{for(n.s();!(t=n.n()).done;){var r=t.value;this._renderViewIntoCollectionParent(r)}}catch(i){n.e(i)}finally{n.f()}}},{key:"delegate",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(!n.length||!function(e){return e.every((function(e){return"string"==typeof e}))}(n))throw new Ke.default("ui-viewcollection-delegate-wrong-events",this);return{to:function(t){var r,i=_createForOfIteratorHelper(e);try{for(i.s();!(r=i.n()).done;){var o,a=r.value,s=_createForOfIteratorHelper(n);try{for(s.s();!(o=s.n()).done;){var c=o.value;a.delegate(c).to(t)}}catch(l){s.e(l)}finally{s.f()}}}catch(l){i.e(l)}finally{i.f()}e.on("add",(function(e,r){var i,o=_createForOfIteratorHelper(n);try{for(o.s();!(i=o.n()).done;){var a=i.value;r.delegate(a).to(t)}}catch(l){o.e(l)}finally{o.f()}})),e.on("remove",(function(e,r){var i,o=_createForOfIteratorHelper(n);try{for(o.s();!(i=o.n()).done;){var a=i.value;r.stopDelegating(a,t)}}catch(l){o.e(l)}finally{o.f()}}))}}}},{key:"_renderViewIntoCollectionParent",value:function(e,t){e.isRendered||e.render(),e.element&&this._parentElement&&this._parentElement.insertBefore(e.element,this._parentElement.children[t])}}]),n}($e.default);n(176);var kc=function(){function e(t){_classCallCheck(this,e),this.element=null,this.isRendered=!1,this.locale=t,this.t=t&&t.t,this._viewCollections=new $e.default,this._unboundChildren=this.createCollection(),this._viewCollections.on("add",(function(e,n){n.locale=t})),this.decorate("render")}return _createClass(e,[{key:"bindTemplate",get:function(){return this._bindTemplate?this._bindTemplate:this._bindTemplate=_c.bind(this,this)}},{key:"createCollection",value:function(e){var t=new yc(e);return this._viewCollections.add(t),t}},{key:"registerChild",value:function(e){Object(dt.a)(e)||(e=[e]);var t,n=_createForOfIteratorHelper(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;this._unboundChildren.add(r)}}catch(i){n.e(i)}finally{n.f()}}},{key:"deregisterChild",value:function(e){Object(dt.a)(e)||(e=[e]);var t,n=_createForOfIteratorHelper(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;this._unboundChildren.remove(r)}}catch(i){n.e(i)}finally{n.f()}}},{key:"setTemplate",value:function(e){this.template=new _c(e)}},{key:"extendTemplate",value:function(e){_c.extend(this.template,e)}},{key:"render",value:function(){if(this.isRendered)throw new Ke.default("ui-view-render-already-rendered",this);this.template&&(this.element=this.template.render(),this.registerChild(this.template.getViews())),this.isRendered=!0}},{key:"destroy",value:function(){this.stopListening(),this._viewCollections.map((function(e){return e.destroy()})),this.template&&this.template._revertData&&this.template.revert(this.element)}}]),e}();Object(u.default)(kc,Or),Object(u.default)(kc,l.default);var _c=function(){function e(t){_classCallCheck(this,e),Object.assign(this,Ic(Ec(t))),this._isRendered=!1,this._revertData=null}return _createClass(e,[{key:"render",value:function(){var e=this._renderNode({intoFragment:!0});return this._isRendered=!0,e}},{key:"apply",value:function(e){return this._revertData={children:[],bindings:[],attributes:{}},this._renderNode({node:e,isApplying:!0,revertData:this._revertData}),e}},{key:"revert",value:function(e){if(!this._revertData)throw new Ke.default("ui-template-revert-not-applied",[this,e]);this._revertTemplateFromNode(e,this._revertData)}},{key:"getViews",value:regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(regeneratorRuntime.mark((function e(t){var n,r,i;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(!t.children){o.next=24;break}n=_createForOfIteratorHelper(t.children),o.prev=2,n.s();case 4:if((r=n.n()).done){o.next=16;break}if(!Nc(i=r.value)){o.next=11;break}return o.next=9,i;case 9:o.next=14;break;case 11:if(o.t0=Dc(i),!o.t0){o.next=14;break}return o.delegateYield(e(i),"t1",14);case 14:o.next=4;break;case 16:o.next=21;break;case 18:o.prev=18,o.t2=o.catch(2),n.e(o.t2);case 21:return o.prev=21,n.f(),o.finish(21);case 24:case"end":return o.stop()}}),e,null,[[2,18,21,24]])}))(this),"t0",1);case 1:case"end":return e.stop()}}),e,this)}))},{key:"_renderNode",value:function(e){if(e.node?this.tag&&this.text:this.tag?this.text:!this.text)throw new Ke.default("ui-template-wrong-syntax",this);return this.text?this._renderText(e):this._renderElement(e)}},{key:"_renderElement",value:function(e){var t=e.node;return t||(t=e.node=document.createElementNS(this.ns||"http://www.w3.org/1999/xhtml",this.tag)),this._renderAttributes(e),this._renderElementChildren(e),this._setUpListeners(e),t}},{key:"_renderText",value:function(e){var t=e.node;return t?e.revertData.text=t.textContent:t=e.node=document.createTextNode(""),Cc(this.text)?this._bindToObservable({schema:this.text,updater:function(e){return{set:function(t){e.textContent=t},remove:function(){e.textContent=""}}}(t),data:e}):t.textContent=this.text.join(""),t}},{key:"_renderAttributes",value:function(e){var t,n,r,i;if(this.attributes){var o=e.node,a=e.revertData;for(t in this.attributes)if(r=o.getAttribute(t),n=this.attributes[t],a&&(a.attributes[t]=r),i=Object(Ee.a)(n[0])&&n[0].ns?n[0].ns:null,Cc(n)){var s=i?n[0].value:n;a&&jc(t)&&s.unshift(r),this._bindToObservable({schema:s,updater:Ac(o,t,i),data:e})}else"style"==t&&"string"!=typeof n[0]?this._renderStyleAttribute(n[0],e):(a&&r&&jc(t)&&n.unshift(r),Mc(n=n.map((function(e){return e&&e.value||e})).reduce((function(e,t){return e.concat(t)}),[]).reduce(Rc,""))||o.setAttributeNS(i,t,n))}}},{key:"_renderStyleAttribute",value:function(e,t){var n=t.node;for(var r in e){var i=e[r];Cc(i)?this._bindToObservable({schema:[i],updater:Sc(n,r),data:t}):n.style[r]=i}}},{key:"_renderElementChildren",value:function(e){var t,n=e.node,r=e.intoFragment?document.createDocumentFragment():n,i=e.isApplying,o=0,a=_createForOfIteratorHelper(this.children);try{for(a.s();!(t=a.n()).done;){var s=t.value;if(Fc(s)){if(!i){s.setParent(n);var c,l=_createForOfIteratorHelper(s);try{for(l.s();!(c=l.n()).done;){var u=c.value;r.appendChild(u.element)}}catch(f){l.e(f)}finally{l.f()}}}else if(Nc(s))i||(s.isRendered||s.render(),r.appendChild(s.element));else if(hr(s))r.appendChild(s);else if(i){var d={children:[],bindings:[],attributes:{}};e.revertData.children.push(d),s._renderNode({node:r.childNodes[o++],isApplying:!0,revertData:d})}else r.appendChild(s.render())}}catch(f){a.e(f)}finally{a.f()}e.intoFragment&&n.appendChild(r)}},{key:"_setUpListeners",value:function(e){var t=this;if(this.eventListeners){var n=function(n){var r=t.eventListeners[n].map((function(t){var r=_slicedToArray(n.split("@"),2),i=r[0],o=r[1];return t.activateDomEventListener(i,o,e)}));e.revertData&&e.revertData.bindings.push(r)};for(var r in this.eventListeners)n(r)}}},{key:"_bindToObservable",value:function(e){var t=e.schema,n=e.updater,r=e.data,i=r.revertData;Tc(t,n,r);var o=t.filter((function(e){return!Mc(e)})).filter((function(e){return e.observable})).map((function(e){return e.activateAttributeListener(t,n,r)}));i&&i.bindings.push(o)}},{key:"_revertTemplateFromNode",value:function(e,t){var n,r=_createForOfIteratorHelper(t.bindings);try{for(r.s();!(n=r.n()).done;){var i,o=_createForOfIteratorHelper(n.value);try{for(o.s();!(i=o.n()).done;){(0,i.value)()}}catch(l){o.e(l)}finally{o.f()}}}catch(l){r.e(l)}finally{r.f()}if(t.text)e.textContent=t.text;else{for(var a in t.attributes){var s=t.attributes[a];null===s?e.removeAttribute(a):e.setAttribute(a,s)}for(var c=0;c<t.children.length;++c)this._revertTemplateFromNode(e.childNodes[c],t.children[c])}}}],[{key:"bind",value:function(e,t){return{to:function(n,r){return new wc({eventNameOrFunction:n,attribute:n,observable:e,emitter:t,callback:r})},if:function(n,r,i){return new xc({observable:e,emitter:t,attribute:n,valueIfTrue:r,callback:i})}}}},{key:"extend",value:function(e,t){if(e._isRendered)throw new Ke.default("template-extend-render",[this,e]);!function e(t,n){var r;if(n.attributes&&(t.attributes||(t.attributes={}),Pc(t.attributes,n.attributes)),n.eventListeners&&(t.eventListeners||(t.eventListeners={}),Pc(t.eventListeners,n.eventListeners)),n.text&&(r=t.text).push.apply(r,_toConsumableArray(n.text)),n.children&&n.children.length){if(t.children.length!=n.children.length)throw new Ke.default("ui-template-extend-children-mismatch",t);var i,o=0,a=_createForOfIteratorHelper(n.children);try{for(a.s();!(i=a.n()).done;){var s=i.value;e(t.children[o++],s)}}catch(c){a.e(c)}finally{a.f()}}}(e,Ic(Ec(t)))}}]),e}();Object(u.default)(_c,Qe.default);var bc=function(){function e(t){_classCallCheck(this,e),Object.assign(this,t)}return _createClass(e,[{key:"getValue",value:function(e){var t=this.observable[this.attribute];return this.callback?this.callback(t,e):t}},{key:"activateAttributeListener",value:function(e,t,n){var r=this,i=function(){return Tc(e,t,n)};return this.emitter.listenTo(this.observable,"change:"+this.attribute,i),function(){r.emitter.stopListening(r.observable,"change:"+r.attribute,i)}}}]),e}(),wc=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"activateDomEventListener",value:function(e,t,n){var r=this,i=function(e,n){t&&!n.target.matches(t)||("function"==typeof r.eventNameOrFunction?r.eventNameOrFunction(n):r.observable.fire(r.eventNameOrFunction,n))};return this.emitter.listenTo(n.node,e,i),function(){r.emitter.stopListening(n.node,e,i)}}}]),n}(bc),xc=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"getValue",value:function(e){return!Mc(_get3(_getPrototypeOf(n.prototype),"getValue",this).call(this,e))&&(this.valueIfTrue||!0)}}]),n}(bc);function Cc(e){return!!e&&(e.value&&(e=e.value),Array.isArray(e)?e.some(Cc):e instanceof bc)}function Tc(e,t,n){var r=function(e,t){return e.map((function(e){return e instanceof bc?e.getValue(t):e}))}(e,n.node);Mc(r=1==e.length&&e[0]instanceof xc?r[0]:r.reduce(Rc,""))?t.remove():t.set(r)}function Ac(e,t,n){return{set:function(r){e.setAttributeNS(n,t,r)},remove:function(){e.removeAttributeNS(n,t)}}}function Sc(e,t){return{set:function(n){e.style[t]=n},remove:function(){e.style[t]=null}}}function Ec(e){return We(e,(function(e){if(e&&(e instanceof bc||Dc(e)||Nc(e)||Fc(e)))return e}))}function Ic(e){if("string"==typeof e?e=function(e){return{text:[e]}}(e):e.text&&function(e){e.text=Xe(e.text)}(e),e.on&&(e.eventListeners=function(e){for(var t in e)Oc(e,t);return e}(e.on),delete e.on),!e.text){e.attributes&&function(e){for(var t in e)e[t].value&&(e[t].value=Xe(e[t].value)),Oc(e,t)}(e.attributes);var t=[];if(e.children)if(Fc(e.children))t.push(e.children);else{var n,r=_createForOfIteratorHelper(e.children);try{for(r.s();!(n=r.n()).done;){var i=n.value;Dc(i)||Nc(i)||hr(i)?t.push(i):t.push(new _c(i))}}catch(o){r.e(o)}finally{r.f()}}e.children=t}return e}function Oc(e,t){e[t]=Xe(e[t])}function Rc(e,t){return Mc(t)?e:Mc(e)?t:"".concat(e," ").concat(t)}function Pc(e,t){for(var n in t){var r;e[n]?(r=e[n]).push.apply(r,_toConsumableArray(t[n])):e[n]=t[n]}}function Mc(e){return!e&&0!==e}function Nc(e){return e instanceof kc}function Dc(e){return e instanceof _c}function Fc(e){return e instanceof yc}function jc(e){return"class"==e||"style"==e}var Lc=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return _classCallCheck(this,n),(r=t.call(this,i)).locale=e,r}return _createClass(n,[{key:"attachToDom",value:function(){this._bodyCollectionContainer=new _c({tag:"div",attributes:{class:["ck","ck-reset_all","ck-body","ck-rounded-corners"],dir:this.locale.uiLanguageDirection},children:this}).render();var e=document.querySelector(".ck-body-wrapper");e||(e=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=n&&n.xmlns,o=i?e.createElementNS(i,t):e.createElement(t);for(var a in n)o.setAttribute(a,n[a]);!mi(r)&&Object(dt.a)(r)||(r=[r]);var s,c=_createForOfIteratorHelper(r);try{for(c.s();!(s=c.n()).done;){var l=s.value;mi(l)&&(l=e.createTextNode(l)),o.appendChild(l)}}catch(u){c.e(u)}finally{c.f()}return o}(document,"div",{class:"ck-body-wrapper"}),document.body.appendChild(e)),e.appendChild(this._bodyCollectionContainer)}},{key:"detachFromDom",value:function(){_get3(_getPrototypeOf(n.prototype),"destroy",this).call(this),this._bodyCollectionContainer&&this._bodyCollectionContainer.remove();var e=document.querySelector(".ck-body-wrapper");e&&0==e.childElementCount&&e.remove()}}]),n}(yc);n(178);var Vc=function(e){_inherits(n,e);var t=_createSuper(n);function n(){var e;_classCallCheck(this,n);var r=(e=t.call(this)).bindTemplate;return e.set("content",""),e.set("viewBox","0 0 20 20"),e.set("fillColor",""),e.setTemplate({tag:"svg",ns:"http://www.w3.org/2000/svg",attributes:{class:["ck","ck-icon"],viewBox:r.to("viewBox")}}),e}return _createClass(n,[{key:"render",value:function(){var e=this;_get3(_getPrototypeOf(n.prototype),"render",this).call(this),this._updateXMLContent(),this._colorFillPaths(),this.on("change:content",(function(){e._updateXMLContent(),e._colorFillPaths()})),this.on("change:fillColor",(function(){e._colorFillPaths()}))}},{key:"_updateXMLContent",value:function(){if(this.content){var e=(new DOMParser).parseFromString(this.content.trim(),"image/svg+xml").querySelector("svg"),t=e.getAttribute("viewBox");for(t&&(this.viewBox=t),this.element.innerHTML="";e.childNodes.length>0;)this.element.appendChild(e.childNodes[0])}}},{key:"_colorFillPaths",value:function(){var e=this;this.fillColor&&this.element.querySelectorAll(".ck-icon__fill").forEach((function(t){t.style.fill=e.fillColor}))}}]),n}(kc);n(180);var Bc=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;_classCallCheck(this,n),(r=t.call(this,e)).set("text",""),r.set("position","s");var i=r.bindTemplate;return r.setTemplate({tag:"span",attributes:{class:["ck","ck-tooltip",i.to("position",(function(e){return"ck-tooltip_"+e})),i.if("text","ck-hidden",(function(e){return!e.trim()}))]},children:[{tag:"span",attributes:{class:["ck","ck-tooltip__text"]},children:[{text:i.to("text")}]}]}),r}return n}(kc);n(182);var zc=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;_classCallCheck(this,n);var i=(r=t.call(this,e)).bindTemplate,o=Object(Sr.a)();return r.set("class"),r.set("labelStyle"),r.set("icon"),r.set("isEnabled",!0),r.set("isOn",!1),r.set("isVisible",!0),r.set("isToggleable",!1),r.set("keystroke"),r.set("label"),r.set("tabindex",-1),r.set("tooltip"),r.set("tooltipPosition","s"),r.set("type","button"),r.set("withText",!1),r.set("withKeystroke",!1),r.children=r.createCollection(),r.tooltipView=r._createTooltipView(),r.labelView=r._createLabelView(o),r.iconView=new Vc,r.iconView.extendTemplate({attributes:{class:"ck-button__icon"}}),r.keystrokeView=r._createKeystrokeView(),r.bind("_tooltipString").to(_assertThisInitialized(r),"tooltip",_assertThisInitialized(r),"label",_assertThisInitialized(r),"keystroke",r._getTooltipString.bind(_assertThisInitialized(r))),r.setTemplate({tag:"button",attributes:{class:["ck","ck-button",i.to("class"),i.if("isEnabled","ck-disabled",(function(e){return!e})),i.if("isVisible","ck-hidden",(function(e){return!e})),i.to("isOn",(function(e){return e?"ck-on":"ck-off"})),i.if("withText","ck-button_with-text"),i.if("withKeystroke","ck-button_with-keystroke")],type:i.to("type",(function(e){return e||"button"})),tabindex:i.to("tabindex"),"aria-labelledby":"ck-editor__aria-label_"+o,"aria-disabled":i.if("isEnabled",!0,(function(e){return!e})),"aria-pressed":i.to("isOn",(function(e){return!!r.isToggleable&&String(e)}))},children:r.children,on:{mousedown:i.to((function(e){e.preventDefault()})),click:i.to((function(e){r.isEnabled?r.fire("execute"):e.preventDefault()}))}}),r}return _createClass(n,[{key:"render",value:function(){_get3(_getPrototypeOf(n.prototype),"render",this).call(this),this.icon&&(this.iconView.bind("content").to(this,"icon"),this.children.add(this.iconView)),this.children.add(this.tooltipView),this.children.add(this.labelView),this.withKeystroke&&this.children.add(this.keystrokeView)}},{key:"focus",value:function(){this.element.focus()}},{key:"_createTooltipView",value:function(){var e=new Bc;return e.bind("text").to(this,"_tooltipString"),e.bind("position").to(this,"tooltipPosition"),e}},{key:"_createLabelView",value:function(e){var t=new kc;return t.setTemplate({tag:"span",attributes:{class:["ck","ck-button__label"],style:this.bindTemplate.to("labelStyle"),id:"ck-editor__aria-label_"+e},children:[{text:this.bindTemplate.to("label")}]}),t}},{key:"_createKeystrokeView",value:function(){var e=new kc;return e.setTemplate({tag:"span",attributes:{class:["ck","ck-button__keystroke"]},children:[{text:this.bindTemplate.to("keystroke",(function(e){return Nn(e)}))}]}),e}},{key:"_getTooltipString",value:function(e,t,n){return e?"string"==typeof e?e:(n&&(n=Nn(n)),e instanceof Function?e(t,n):"".concat(t).concat(n?" (".concat(n,")"):"")):""}}]),n}(kc);n(184);var Hc=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this,e)).isToggleable=!0,r.toggleSwitchView=r._createToggleView(),r.extendTemplate({attributes:{class:"ck-switchbutton"}}),r}return _createClass(n,[{key:"render",value:function(){_get3(_getPrototypeOf(n.prototype),"render",this).call(this),this.children.add(this.toggleSwitchView)}},{key:"_createToggleView",value:function(){var e=new kc;return e.setTemplate({tag:"span",attributes:{class:["ck","ck-button__toggle"]},children:[{tag:"span",attributes:{class:["ck","ck-button__toggle__inner"]}}]}),e}}]),n}(zc);function Uc(e){return e.map(Wc).filter((function(e){return!!e}))}function Wc(e){return"string"==typeof e?{model:e,label:e,hasBorder:!1,view:{name:"span",styles:{color:e}}}:{model:e.color,label:e.label||e.color,hasBorder:void 0!==e.hasBorder&&e.hasBorder,view:{name:"span",styles:{color:""+e.color}}}}n(141);var qc=function(){function e(t){var n=this;if(_classCallCheck(this,e),Object.assign(this,t),t.actions&&t.keystrokeHandler){var r=function(e){var r=t.actions[e];"string"==typeof r&&(r=[r]);var i,o=_createForOfIteratorHelper(r);try{for(o.s();!(i=o.n()).done;){var a=i.value;t.keystrokeHandler.set(a,(function(t,r){n[e](),r()}))}}catch(s){o.e(s)}finally{o.f()}};for(var i in t.actions)r(i)}}return _createClass(e,[{key:"first",get:function(){return this.focusables.find(Yc)||null}},{key:"last",get:function(){return this.focusables.filter(Yc).slice(-1)[0]||null}},{key:"next",get:function(){return this._getFocusableItem(1)}},{key:"previous",get:function(){return this._getFocusableItem(-1)}},{key:"current",get:function(){var e=this,t=null;return null===this.focusTracker.focusedElement?null:(this.focusables.find((function(n,r){var i=n.element===e.focusTracker.focusedElement;return i&&(t=r),i})),t)}},{key:"focusFirst",value:function(){this._focus(this.first)}},{key:"focusLast",value:function(){this._focus(this.last)}},{key:"focusNext",value:function(){this._focus(this.next)}},{key:"focusPrevious",value:function(){this._focus(this.previous)}},{key:"_focus",value:function(e){e&&e.focus()}},{key:"_getFocusableItem",value:function(e){var t=this.current,n=this.focusables.length;if(!n)return null;if(null===t)return this[1===e?"first":"last"];var r=(t+n+e)%n;do{var i=this.focusables.get(r);if(Yc(i))return i;r=(r+n+e)%n}while(r!==t);return null}}]),e}();function Yc(e){return!(!e.focus||"none"==mr.window.getComputedStyle(e.element).display)}n(186);var Gc=n(62),Jc=n.n(Gc),$c=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this,e)).arrowView=r._createArrowView(),r.extendTemplate({attributes:{"aria-haspopup":!0}}),r.delegate("execute").to(_assertThisInitialized(r),"open"),r}return _createClass(n,[{key:"render",value:function(){_get3(_getPrototypeOf(n.prototype),"render",this).call(this),this.children.add(this.arrowView)}},{key:"_createArrowView",value:function(){var e=new Vc;return e.content=Jc.a,e.extendTemplate({attributes:{class:"ck-dropdown__arrow"}}),e}}]),n}(zc);n(188);var Kc=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;_classCallCheck(this,n);var i=(r=t.call(this,e)).bindTemplate;return r.set("icon"),r.set("isEnabled",!0),r.set("isOn",!1),r.set("isToggleable",!1),r.set("isVisible",!0),r.set("keystroke"),r.set("label"),r.set("tabindex",-1),r.set("tooltip"),r.set("tooltipPosition","s"),r.set("type","button"),r.set("withText",!1),r.children=r.createCollection(),r.actionView=r._createActionView(),r.arrowView=r._createArrowView(),r.keystrokes=new Ii,r.focusTracker=new Ei,r.setTemplate({tag:"div",attributes:{class:["ck","ck-splitbutton",i.if("isVisible","ck-hidden",(function(e){return!e})),r.arrowView.bindTemplate.if("isOn","ck-splitbutton_open")]},children:r.children}),r}return _createClass(n,[{key:"render",value:function(){var e=this;_get3(_getPrototypeOf(n.prototype),"render",this).call(this),this.children.add(this.actionView),this.children.add(this.arrowView),this.focusTracker.add(this.actionView.element),this.focusTracker.add(this.arrowView.element),this.keystrokes.listenTo(this.element),this.keystrokes.set("arrowright",(function(t,n){e.focusTracker.focusedElement===e.actionView.element&&(e.arrowView.focus(),n())})),this.keystrokes.set("arrowleft",(function(t,n){e.focusTracker.focusedElement===e.arrowView.element&&(e.actionView.focus(),n())}))}},{key:"focus",value:function(){this.actionView.focus()}},{key:"_createActionView",value:function(){var e=new zc;return e.bind("icon","isEnabled","isOn","isToggleable","keystroke","label","tabindex","tooltip","tooltipPosition","type","withText").to(this),e.extendTemplate({attributes:{class:"ck-splitbutton__action"}}),e.delegate("execute").to(this),e}},{key:"_createArrowView",value:function(){var e=new zc,t=e.bindTemplate;return e.icon=Jc.a,e.extendTemplate({attributes:{class:"ck-splitbutton__arrow","aria-haspopup":!0,"aria-expanded":t.to("isOn",(function(e){return String(e)}))}}),e.bind("isEnabled").to(this),e.delegate("execute").to(this,"open"),e}}]),n}(kc),Qc=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;_classCallCheck(this,n);var i=(r=t.call(this,e)).bindTemplate;return r.set("isVisible",!1),r.set("position","se"),r.children=r.createCollection(),r.setTemplate({tag:"div",attributes:{class:["ck","ck-reset","ck-dropdown__panel",i.to("position",(function(e){return"ck-dropdown__panel_"+e})),i.if("isVisible","ck-dropdown__panel-visible")]},children:r.children,on:{selectstart:i.to((function(e){return e.preventDefault()}))}}),r}return _createClass(n,[{key:"focus",value:function(){this.children.length&&this.children.first.focus()}},{key:"focusLast",value:function(){if(this.children.length){var e=this.children.last;"function"==typeof e.focusLast?e.focusLast():e.focus()}}}]),n}(kc);function Zc(e){var t=e.element,n=e.target,r=e.positions,i=e.limiter,o=e.fitInViewport;Object(Ft.a)(n)&&(n=n()),Object(Ft.a)(i)&&(i=i());var a,s,c=function(e){return e&&e.parentNode?e.offsetParent===mr.document.body?null:e.offsetParent:null}(t),l=new bi(t),u=new bi(n);if(i||o){var d=function(e,t){var n=t.viewportRect,r=t.elementRect.getArea(),i=function(e,t){var n,r=t.targetRect,i=t.elementRect,o=t.limiterRect,a=t.viewportRect,s=[],c=i.getArea(),l=_createForOfIteratorHelper(e);try{for(l.s();!(n=l.n()).done;){var u=Xc(n.value,r,i);if(u){var d=_slicedToArray(u,2),f=d[0],h=d[1],p=0,v=0;if(o)if(a){var g=o.getIntersection(a);g&&(p=g.getIntersectionArea(h))}else p=o.getIntersectionArea(h);a&&(v=a.getIntersectionArea(h));var m={positionName:f,positionRect:h,limiterIntersectArea:p,viewportIntersectArea:v};if(p===c)return[m];s.push(m)}}}catch(y){l.e(y)}finally{l.f()}return s}(e,t);if(n){var o=el(i.filter((function(e){return e.viewportIntersectArea===r})),r);if(o)return o}return el(i,r)}(r,{targetRect:u,elementRect:l,limiterRect:i&&new bi(i).getVisible(),viewportRect:o&&new bi(mr.window)}),f=_slicedToArray(d||Xc(r[0],u,l),2);s=f[0],a=f[1]}else{var h=_slicedToArray(Xc(r[0],u,l),2);s=h[0],a=h[1]}var p=tl(a);return c&&(p=function(e,t){var n=e.left,r=e.top,i=tl(new bi(t)),o=ki(t);return n-=i.left,r-=i.top,n+=t.scrollLeft,r+=t.scrollTop,{left:n-=o.left,top:r-=o.top}}(p,c)),{left:p.left,top:p.top,name:s}}function Xc(e,t,n){var r=e(t,n);if(!r)return null;var i=r.left,o=r.top;return[r.name,n.clone().moveTo(i,o)]}function el(e,t){var n,r,i,o=0,a=_createForOfIteratorHelper(e);try{for(a.s();!(i=a.n()).done;){var s=i.value,c=s.positionName,l=s.positionRect,u=s.limiterIntersectArea,d=s.viewportIntersectArea;if(u===t)return[c,l];var f=Math.pow(d,2)+Math.pow(u,2);f>o&&(o=f,n=l,r=c)}}catch(h){a.e(h)}finally{a.f()}return n?[r,n]:null}function tl(e){var t=e.left,n=e.top,r=mr.window;return{left:t+r.scrollX,top:n+r.scrollY}}n(190);var nl=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i){var o;_classCallCheck(this,n);var a=(o=t.call(this,e)).bindTemplate;return o.buttonView=r,o.panelView=i,o.set("isOpen",!1),o.set("isEnabled",!0),o.set("class"),o.set("id"),o.set("panelPosition","auto"),o.keystrokes=new Ii,o.setTemplate({tag:"div",attributes:{class:["ck","ck-dropdown",a.to("class"),a.if("isEnabled","ck-disabled",(function(e){return!e}))],id:a.to("id"),"aria-describedby":a.to("ariaDescribedById")},children:[r,i]}),r.extendTemplate({attributes:{class:["ck-dropdown__button"]}}),o}return _createClass(n,[{key:"render",value:function(){var e=this;_get3(_getPrototypeOf(n.prototype),"render",this).call(this),this.listenTo(this.buttonView,"open",(function(){e.isOpen=!e.isOpen})),this.panelView.bind("isVisible").to(this,"isOpen"),this.on("change:isOpen",(function(){e.isOpen&&(e.panelView.position="auto"===e.panelPosition?n._getOptimalPosition({element:e.panelView.element,target:e.buttonView.element,fitInViewport:!0,positions:e._panelPositions}).name:e.panelPosition)})),this.keystrokes.listenTo(this.element);var t=function(t,n){e.isOpen&&(e.buttonView.focus(),e.isOpen=!1,n())};this.keystrokes.set("arrowdown",(function(t,n){e.buttonView.isEnabled&&!e.isOpen&&(e.isOpen=!0,n())})),this.keystrokes.set("arrowright",(function(t,n){e.isOpen&&n()})),this.keystrokes.set("arrowleft",t),this.keystrokes.set("esc",t)}},{key:"focus",value:function(){this.buttonView.focus()}},{key:"_panelPositions",get:function(){var e=n.defaultPanelPositions,t=e.south,r=e.north,i=e.southEast,o=e.southWest,a=e.northEast,s=e.northWest,c=e.southMiddleEast,l=e.southMiddleWest,u=e.northMiddleEast,d=e.northMiddleWest;return"rtl"!==this.locale.uiLanguageDirection?[i,o,c,l,t,a,s,u,d,r]:[o,i,l,c,t,s,a,d,u,r]}}]),n}(kc);nl.defaultPanelPositions={south:function(e,t){return{top:e.bottom,left:e.left-(t.width-e.width)/2,name:"s"}},southEast:function(e){return{top:e.bottom,left:e.left,name:"se"}},southWest:function(e,t){return{top:e.bottom,left:e.left-t.width+e.width,name:"sw"}},southMiddleEast:function(e,t){return{top:e.bottom,left:e.left-(t.width-e.width)/4,name:"sme"}},southMiddleWest:function(e,t){return{top:e.bottom,left:e.left-3*(t.width-e.width)/4,name:"smw"}},north:function(e,t){return{top:e.top-t.height,left:e.left-(t.width-e.width)/2,name:"n"}},northEast:function(e,t){return{top:e.top-t.height,left:e.left,name:"ne"}},northWest:function(e,t){return{top:e.top-t.height,left:e.left-t.width+e.width,name:"nw"}},northMiddleEast:function(e,t){return{top:e.top-t.height,left:e.left-(t.width-e.width)/4,name:"nme"}},northMiddleWest:function(e,t){return{top:e.top-t.height,left:e.left-3*(t.width-e.width)/4,name:"nmw"}}},nl._getOptimalPosition=Zc;var rl=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this,e)).setTemplate({tag:"span",attributes:{class:["ck","ck-toolbar__separator"]}}),r}return n}(kc),il=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this,e)).setTemplate({tag:"span",attributes:{class:["ck","ck-toolbar__line-break"]}}),r}return n}(kc);function ol(e){return Array.isArray(e)?{items:e,removeItems:[]}:e?Object.assign({items:[],removeItems:[]},e):{items:[],removeItems:[]}}n(192);var al=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var i;_classCallCheck(this,n);var o=(i=t.call(this,e)).bindTemplate,a=i.t;i.options=r||{},i.set("ariaLabel",a("Editor toolbar")),i.set("maxWidth","auto"),i.items=i.createCollection(),i.focusTracker=new Ei,i.keystrokes=new Ii,i.set("class"),i.set("isCompact",!1),i.itemsView=new sl(e),i.children=i.createCollection(),i.children.add(i.itemsView),i.focusables=i.createCollection(),i._focusCycler=new qc({focusables:i.focusables,focusTracker:i.focusTracker,keystrokeHandler:i.keystrokes,actions:{focusPrevious:["arrowleft","arrowup"],focusNext:["arrowright","arrowdown"]}});var s=["ck","ck-toolbar",o.to("class"),o.if("isCompact","ck-toolbar_compact")];return i.options.shouldGroupWhenFull&&i.options.isFloating&&s.push("ck-toolbar_floating"),i.setTemplate({tag:"div",attributes:{class:s,role:"toolbar","aria-label":o.to("ariaLabel"),style:{maxWidth:o.to("maxWidth")}},children:i.children,on:{mousedown:function(e){return e.bindTemplate.to((function(t){t.target===e.element&&t.preventDefault()}))}(_assertThisInitialized(i))}}),i._behavior=i.options.shouldGroupWhenFull?new ll(_assertThisInitialized(i)):new cl(_assertThisInitialized(i)),i}return _createClass(n,[{key:"render",value:function(){var e=this;_get3(_getPrototypeOf(n.prototype),"render",this).call(this);var t,r=_createForOfIteratorHelper(this.items);try{for(r.s();!(t=r.n()).done;){var i=t.value;this.focusTracker.add(i.element)}}catch(o){r.e(o)}finally{r.f()}this.items.on("add",(function(t,n){e.focusTracker.add(n.element)})),this.items.on("remove",(function(t,n){e.focusTracker.remove(n.element)})),this.keystrokes.listenTo(this.element),this._behavior.render(this)}},{key:"destroy",value:function(){return this._behavior.destroy(),_get3(_getPrototypeOf(n.prototype),"destroy",this).call(this)}},{key:"focus",value:function(){this._focusCycler.focusFirst()}},{key:"focusLast",value:function(){this._focusCycler.focusLast()}},{key:"fillFromConfig",value:function(e,t){var n=this,r=ol(e),i=r.items.filter((function(e,i,o){return"|"===e||-1===r.removeItems.indexOf(e)&&("-"===e?!n.options.shouldGroupWhenFull||(Object(Ke.logWarning)("toolbarview-line-break-ignored-when-grouping-items",o),!1):!!t.has(e)||(Object(Ke.logWarning)("toolbarview-item-unavailable",{name:e}),!1))})),o=this._cleanSeparators(i).map((function(e){return"|"===e?new rl:"-"===e?new il:t.create(e)}));this.items.addMany(o)}},{key:"_cleanSeparators",value:function(e){var t=function(e){return"-"!==e&&"|"!==e},n=e.length,r=e.findIndex(t),i=n-e.slice().reverse().findIndex(t);return e.slice(r,i).filter((function(e,n,r){return!!t(e)||!(n>0&&r[n-1]===e)}))}}]),n}(kc),sl=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this,e)).children=r.createCollection(),r.setTemplate({tag:"div",attributes:{class:["ck","ck-toolbar__items"]},children:r.children}),r}return n}(kc),cl=function(){function e(t){_classCallCheck(this,e);var n=t.bindTemplate;t.set("isVertical",!1),t.itemsView.children.bindTo(t.items).using((function(e){return e})),t.focusables.bindTo(t.items).using((function(e){return e})),t.extendTemplate({attributes:{class:[n.if("isVertical","ck-toolbar_vertical")]}})}return _createClass(e,[{key:"render",value:function(){}},{key:"destroy",value:function(){}}]),e}(),ll=function(){function e(t){var n=this;_classCallCheck(this,e),this.view=t,this.viewChildren=t.children,this.viewFocusables=t.focusables,this.viewItemsView=t.itemsView,this.viewFocusTracker=t.focusTracker,this.viewLocale=t.locale,this.ungroupedItems=t.createCollection(),this.groupedItems=t.createCollection(),this.groupedItemsDropdown=this._createGroupedItemsDropdown(),this.resizeObserver=null,this.cachedPadding=null,this.shouldUpdateGroupingOnNextResize=!1,t.itemsView.children.bindTo(this.ungroupedItems).using((function(e){return e})),this.ungroupedItems.on("add",this._updateFocusCycleableItems.bind(this)),this.ungroupedItems.on("remove",this._updateFocusCycleableItems.bind(this)),t.children.on("add",this._updateFocusCycleableItems.bind(this)),t.children.on("remove",this._updateFocusCycleableItems.bind(this)),t.items.on("change",(function(e,t){var r,i=t.index,o=_createForOfIteratorHelper(t.removed);try{for(o.s();!(r=o.n()).done;){var a=r.value;i>=n.ungroupedItems.length?n.groupedItems.remove(a):n.ungroupedItems.remove(a)}}catch(l){o.e(l)}finally{o.f()}for(var s=i;s<i+t.added.length;s++){var c=t.added[s-i];s>n.ungroupedItems.length?n.groupedItems.add(c,s-n.ungroupedItems.length):n.ungroupedItems.add(c,s)}n._updateGrouping()})),t.extendTemplate({attributes:{class:["ck-toolbar_grouping"]}})}return _createClass(e,[{key:"render",value:function(e){this.viewElement=e.element,this._enableGroupingOnResize(),this._enableGroupingOnMaxWidthChange(e)}},{key:"destroy",value:function(){this.groupedItemsDropdown.destroy(),this.resizeObserver.destroy()}},{key:"_updateGrouping",value:function(){if(this.viewElement.ownerDocument.body.contains(this.viewElement))if(this.viewElement.offsetParent){for(var e,t=this.groupedItems.length;this._areItemsOverflowing;)this._groupLastItem(),e=!0;if(!e&&this.groupedItems.length){for(;this.groupedItems.length&&!this._areItemsOverflowing;)this._ungroupFirstItem();this._areItemsOverflowing&&this._groupLastItem()}this.groupedItems.length!==t&&this.view.fire("groupedItemsUpdate")}else this.shouldUpdateGroupingOnNextResize=!0}},{key:"_areItemsOverflowing",get:function(){if(!this.ungroupedItems.length)return!1;var e=this.viewElement,t=this.viewLocale.uiLanguageDirection,n=new bi(e.lastChild),r=new bi(e);if(!this.cachedPadding){var i=mr.window.getComputedStyle(e);this.cachedPadding=Number.parseInt(i["ltr"===t?"paddingRight":"paddingLeft"])}return"ltr"===t?n.right>r.right-this.cachedPadding:n.left<r.left+this.cachedPadding}},{key:"_enableGroupingOnResize",value:function(){var e,t=this;this.resizeObserver=new Ci(this.viewElement,(function(n){e&&e===n.contentRect.width&&!t.shouldUpdateGroupingOnNextResize||(t.shouldUpdateGroupingOnNextResize=!1,t._updateGrouping(),e=n.contentRect.width)})),this._updateGrouping()}},{key:"_enableGroupingOnMaxWidthChange",value:function(e){var t=this;e.on("change:maxWidth",(function(){t._updateGrouping()}))}},{key:"_groupLastItem",value:function(){this.groupedItems.length||(this.viewChildren.add(new rl),this.viewChildren.add(this.groupedItemsDropdown),this.viewFocusTracker.add(this.groupedItemsDropdown.element)),this.groupedItems.add(this.ungroupedItems.remove(this.ungroupedItems.last),0)}},{key:"_ungroupFirstItem",value:function(){this.ungroupedItems.add(this.groupedItems.remove(this.groupedItems.first)),this.groupedItems.length||(this.viewChildren.remove(this.groupedItemsDropdown),this.viewChildren.remove(this.viewChildren.last),this.viewFocusTracker.remove(this.groupedItemsDropdown.element))}},{key:"_createGroupedItemsDropdown",value:function(){var e=this.viewLocale,t=e.t,n=hl(e);return n.class="ck-toolbar__grouped-dropdown",n.panelPosition="ltr"===e.uiLanguageDirection?"sw":"se",pl(n,[]),n.buttonView.set({label:t("Show more items"),tooltip:!0,tooltipPosition:"rtl"===e.uiLanguageDirection?"se":"sw",icon:pc.threeVerticalDots}),n.toolbarView.items.bindTo(this.groupedItems).using((function(e){return e})),n}},{key:"_updateFocusCycleableItems",value:function(){var e=this;this.viewFocusables.clear(),this.ungroupedItems.map((function(t){e.viewFocusables.add(t)})),this.groupedItems.length&&this.viewFocusables.add(this.groupedItemsDropdown)}}]),e}();n(194);var ul=function(e){_inherits(n,e);var t=_createSuper(n);function n(){var e;return _classCallCheck(this,n),(e=t.call(this)).items=e.createCollection(),e.focusTracker=new Ei,e.keystrokes=new Ii,e._focusCycler=new qc({focusables:e.items,focusTracker:e.focusTracker,keystrokeHandler:e.keystrokes,actions:{focusPrevious:"arrowup",focusNext:"arrowdown"}}),e.setTemplate({tag:"ul",attributes:{class:["ck","ck-reset","ck-list"]},children:e.items}),e}return _createClass(n,[{key:"render",value:function(){var e=this;_get3(_getPrototypeOf(n.prototype),"render",this).call(this);var t,r=_createForOfIteratorHelper(this.items);try{for(r.s();!(t=r.n()).done;){var i=t.value;this.focusTracker.add(i.element)}}catch(o){r.e(o)}finally{r.f()}this.items.on("add",(function(t,n){e.focusTracker.add(n.element)})),this.items.on("remove",(function(t,n){e.focusTracker.remove(n.element)})),this.keystrokes.listenTo(this.element)}},{key:"focus",value:function(){this._focusCycler.focusFirst()}},{key:"focusLast",value:function(){this._focusCycler.focusLast()}}]),n}(kc),dl=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this,e)).children=r.createCollection(),r.setTemplate({tag:"li",attributes:{class:["ck","ck-list__item"]},children:r.children}),r}return _createClass(n,[{key:"focus",value:function(){this.children.first.focus()}}]),n}(kc),fl=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this,e)).setTemplate({tag:"li",attributes:{class:["ck","ck-list__separator"]}}),r}return n}(kc);function hl(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:$c,n=new t(e),r=new Qc(e),i=new nl(e,n,r);return n.bind("isEnabled").to(i),n instanceof $c?n.bind("isOn").to(i,"isOpen"):n.arrowView.bind("isOn").to(i,"isOpen"),function(e){(function(e){e.on("render",(function(){vc({emitter:e,activator:function(){return e.isOpen},callback:function(){e.isOpen=!1},contextElements:[e.element]})}))})(e),function(e){e.on("execute",(function(t){t.source instanceof Hc||(e.isOpen=!1)}))}(e),function(e){e.keystrokes.set("arrowdown",(function(t,n){e.isOpen&&(e.panelView.focus(),n())})),e.keystrokes.set("arrowup",(function(t,n){e.isOpen&&(e.panelView.focusLast(),n())}))}(e)}(i),i}function pl(e,t){var n=e.locale,r=n.t,i=e.toolbarView=new al(n);i.set("ariaLabel",r("Dropdown toolbar")),e.extendTemplate({attributes:{class:["ck-toolbar-dropdown"]}}),t.map((function(e){return i.items.add(e)})),e.panelView.children.add(i),i.items.delegate("execute").to(e)}function vl(e,t){var n=e.locale,r=e.listView=new ul(n);r.items.bindTo(t).using((function(e){var t=e.type,r=e.model;if("separator"===t)return new fl(n);if("button"===t||"switchbutton"===t){var i,o,a=new dl(n);return(i=o="button"===t?new zc(n):new Hc(n)).bind.apply(i,_toConsumableArray(Object.keys(r))).to(r),o.delegate("execute").to(a),a.children.add(o),a}})),e.panelView.children.add(r),r.items.delegate("execute").to(e)}n(196),n(198),n(200);var gl=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this,e)).body=new Lc(e),r}return _createClass(n,[{key:"render",value:function(){_get3(_getPrototypeOf(n.prototype),"render",this).call(this),this.body.attachToDom()}},{key:"destroy",value:function(){return this.body.detachFromDom(),_get3(_getPrototypeOf(n.prototype),"destroy",this).call(this)}}]),n}(kc);n(202);var ml=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;_classCallCheck(this,n),(r=t.call(this,e)).set("text"),r.set("for"),r.id="ck-editor__label_"+Object(Sr.a)();var i=r.bindTemplate;return r.setTemplate({tag:"label",attributes:{class:["ck","ck-label"],id:r.id,for:i.to("for")},children:[{text:i.to("text")}]}),r}return n}(kc),yl=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this,e)).top=r.createCollection(),r.main=r.createCollection(),r._voiceLabelView=r._createVoiceLabel(),r.setTemplate({tag:"div",attributes:{class:["ck","ck-reset","ck-editor","ck-rounded-corners"],role:"application",dir:e.uiLanguageDirection,lang:e.uiLanguage,"aria-labelledby":r._voiceLabelView.id},children:[r._voiceLabelView,{tag:"div",attributes:{class:["ck","ck-editor__top","ck-reset_all"],role:"presentation"},children:r.top},{tag:"div",attributes:{class:["ck","ck-editor__main"],role:"presentation"},children:r.main}]}),r}return _createClass(n,[{key:"_createVoiceLabel",value:function(){var e=this.t,t=new ml;return t.text=e("Rich Text Editor"),t.extendTemplate({attributes:{class:"ck-voice-label"}}),t}}]),n}(gl),kl=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i){var o;return _classCallCheck(this,n),(o=t.call(this,e,r,i)).extendTemplate({attributes:{role:"textbox",class:"ck-editor__editable_inline"}}),o}return _createClass(n,[{key:"render",value:function(){var e=this;_get3(_getPrototypeOf(n.prototype),"render",this).call(this);var t=this._editingView,r=this.t;t.change((function(n){var i=t.document.getRoot(e.name);n.setAttribute("aria-label",r("Rich Text Editor, %0",e.name),i)}))}}]),n}(function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i){var o;return _classCallCheck(this,n),(o=t.call(this,e)).setTemplate({tag:"div",attributes:{class:["ck","ck-content","ck-editor__editable","ck-rounded-corners"],lang:e.contentLanguage,dir:e.contentLanguageDirection}}),o.name=null,o.set("isFocused",!1),o._editableElement=i,o._hasExternalElement=!!o._editableElement,o._editingView=r,o}return _createClass(n,[{key:"render",value:function(){var e=this;_get3(_getPrototypeOf(n.prototype),"render",this).call(this),this._hasExternalElement?this.template.apply(this.element=this._editableElement):this._editableElement=this.element,this.on("change:isFocused",(function(){return e._updateIsFocusedClasses()})),this._updateIsFocusedClasses()}},{key:"destroy",value:function(){this._hasExternalElement&&this.template.revert(this._editableElement),_get3(_getPrototypeOf(n.prototype),"destroy",this).call(this)}},{key:"_updateIsFocusedClasses",value:function(){var e=this._editingView;function t(t){e.change((function(n){var r=e.document.getRoot(t.name);n.addClass(t.isFocused?"ck-focused":"ck-blurred",r),n.removeClass(t.isFocused?"ck-blurred":"ck-focused",r)}))}e.isRenderingInProgress?function n(r){e.once("change:isRenderingInProgress",(function(e,i,o){o?n(r):t(r)}))}(this):t(this)}}]),n}(kc));n(204),n(206);var _l=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;_classCallCheck(this,n),(r=t.call(this,e)).set("value"),r.set("id"),r.set("placeholder"),r.set("isReadOnly",!1),r.set("hasError",!1),r.set("ariaDescribedById"),r.focusTracker=new Ei,r.bind("isFocused").to(r.focusTracker),r.set("isEmpty",!0);var i=r.bindTemplate;return r.setTemplate({tag:"input",attributes:{type:"text",class:["ck","ck-input","ck-input-text",i.if("isFocused","ck-input_focused"),i.if("isEmpty","ck-input-text_empty"),i.if("hasError","ck-error")],id:i.to("id"),placeholder:i.to("placeholder"),readonly:i.to("isReadOnly"),"aria-invalid":i.if("hasError",!0),"aria-describedby":i.to("ariaDescribedById")},on:{input:i.to("input"),change:i.to(r._updateIsEmpty.bind(_assertThisInitialized(r)))}}),r}return _createClass(n,[{key:"render",value:function(){var e=this;_get3(_getPrototypeOf(n.prototype),"render",this).call(this),this.focusTracker.add(this.element),this._setDomElementValue(this.value),this._updateIsEmpty(),this.on("change:value",(function(t,n,r){e._setDomElementValue(r),e._updateIsEmpty()}))}},{key:"select",value:function(){this.element.select()}},{key:"focus",value:function(){this.element.focus()}},{key:"_updateIsEmpty",value:function(){this.isEmpty=function(e){return!e.value}(this.element)}},{key:"_setDomElementValue",value:function(e){this.element.value=e||0===e?e:""}}]),n}(kc);n(208);var bl=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var i;_classCallCheck(this,n),i=t.call(this,e);var o="ck-labeled-field-view-"+Object(Sr.a)(),a="ck-labeled-field-view-status-"+Object(Sr.a)();i.fieldView=r(_assertThisInitialized(i),o,a),i.set("label"),i.set("isEnabled",!0),i.set("isEmpty",!0),i.set("isFocused",!1),i.set("errorText",null),i.set("infoText",null),i.set("class"),i.set("placeholder"),i.labelView=i._createLabelView(o),i.statusView=i._createStatusView(a),i.bind("_statusText").to(_assertThisInitialized(i),"errorText",_assertThisInitialized(i),"infoText",(function(e,t){return e||t}));var s=i.bindTemplate;return i.setTemplate({tag:"div",attributes:{class:["ck","ck-labeled-field-view",s.to("class"),s.if("isEnabled","ck-disabled",(function(e){return!e})),s.if("isEmpty","ck-labeled-field-view_empty"),s.if("isFocused","ck-labeled-field-view_focused"),s.if("placeholder","ck-labeled-field-view_placeholder"),s.if("errorText","ck-error")]},children:[{tag:"div",attributes:{class:["ck","ck-labeled-field-view__input-wrapper"]},children:[i.fieldView,i.labelView]},i.statusView]}),i}return _createClass(n,[{key:"_createLabelView",value:function(e){var t=new ml(this.locale);return t.for=e,t.bind("text").to(this,"label"),t}},{key:"_createStatusView",value:function(e){var t=new kc(this.locale),n=this.bindTemplate;return t.setTemplate({tag:"div",attributes:{class:["ck","ck-labeled-field-view__status",n.if("errorText","ck-labeled-field-view__status_error"),n.if("_statusText","ck-hidden",(function(e){return!e}))],id:e,role:n.if("errorText","alert")},children:[{text:n.to("_statusText")}]}),t}},{key:"focus",value:function(){this.fieldView.focus()}}]),n}(kc);function wl(e,t,n){var r=new _l(e.locale);return r.set({id:t,ariaDescribedById:n}),r.bind("isReadOnly").to(e,"isEnabled",(function(e){return!e})),r.bind("hasError").to(e,"errorText",(function(e){return!!e})),r.on("input",(function(){e.errorText=null})),e.bind("isEmpty","isFocused","placeholder").to(r),r}var xl=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"init",value:function(){this.on("show:warning",(function(e,t){window.alert(t.message)}),{priority:"lowest"})}},{key:"showSuccess",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._showNotification({message:e,type:"success",namespace:t.namespace,title:t.title})}},{key:"showInfo",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._showNotification({message:e,type:"info",namespace:t.namespace,title:t.title})}},{key:"showWarning",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._showNotification({message:e,type:"warning",namespace:t.namespace,title:t.title})}},{key:"_showNotification",value:function(e){this.fire("show:"+e.type+(e.namespace?":"+e.namespace:""),{message:e.message,type:e.type,title:e.title||""})}}],[{key:"pluginName",get:function(){return"Notification"}}]),n}(it),Cl=function e(t,n){_classCallCheck(this,e),n&&Object(Ir.a)(this,n),t&&this.set(t)};Object(u.default)(Cl,l.default),n(210);var Tl=Ai("px"),Al=mr.document.body,Sl=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;_classCallCheck(this,n);var i=(r=t.call(this,e)).bindTemplate;return r.set("top",0),r.set("left",0),r.set("position","arrow_nw"),r.set("isVisible",!1),r.set("withArrow",!0),r.set("class"),r.content=r.createCollection(),r.setTemplate({tag:"div",attributes:{class:["ck","ck-balloon-panel",i.to("position",(function(e){return"ck-balloon-panel_"+e})),i.if("isVisible","ck-balloon-panel_visible"),i.if("withArrow","ck-balloon-panel_with-arrow"),i.to("class")],style:{top:i.to("top",Tl),left:i.to("left",Tl)}},children:r.content}),r}return _createClass(n,[{key:"show",value:function(){this.isVisible=!0}},{key:"hide",value:function(){this.isVisible=!1}},{key:"attachTo",value:function(e){this.show();var t=n.defaultPositions,r=Object.assign({},{element:this.element,positions:[t.southArrowNorth,t.southArrowNorthMiddleWest,t.southArrowNorthMiddleEast,t.southArrowNorthWest,t.southArrowNorthEast,t.northArrowSouth,t.northArrowSouthMiddleWest,t.northArrowSouthMiddleEast,t.northArrowSouthWest,t.northArrowSouthEast],limiter:Al,fitInViewport:!0},e),i=n._getOptimalPosition(r),o=parseInt(i.left),a=parseInt(i.top);Object.assign(this,{top:a,left:o,position:i.name})}},{key:"pin",value:function(e){var t=this;this.unpin(),this._pinWhenIsVisibleCallback=function(){t.isVisible?t._startPinning(e):t._stopPinning()},this._startPinning(e),this.listenTo(this,"change:isVisible",this._pinWhenIsVisibleCallback)}},{key:"unpin",value:function(){this._pinWhenIsVisibleCallback&&(this._stopPinning(),this.stopListening(this,"change:isVisible",this._pinWhenIsVisibleCallback),this._pinWhenIsVisibleCallback=null,this.hide())}},{key:"_startPinning",value:function(e){var t=this;this.attachTo(e);var n=El(e.target),r=e.limiter?El(e.limiter):Al;this.listenTo(mr.document,"scroll",(function(i,o){var a=o.target,s=n&&a.contains(n),c=r&&a.contains(r);!s&&!c&&n&&r||t.attachTo(e)}),{useCapture:!0}),this.listenTo(mr.window,"resize",(function(){t.attachTo(e)}))}},{key:"_stopPinning",value:function(){this.stopListening(mr.document,"scroll"),this.stopListening(mr.window,"resize")}}]),n}(kc);function El(e){return qe(e)?e:yi(e)?e.commonAncestorContainer:"function"==typeof e?El(e()):null}function Il(e,t){return e.top-t.height-Sl.arrowVerticalOffset}function Ol(e){return e.bottom+Sl.arrowVerticalOffset}Sl.arrowHorizontalOffset=25,Sl.arrowVerticalOffset=10,Sl._getOptimalPosition=Zc,Sl.defaultPositions={northWestArrowSouthWest:function(e,t){return{top:Il(e,t),left:e.left-Sl.arrowHorizontalOffset,name:"arrow_sw"}},northWestArrowSouthMiddleWest:function(e,t){return{top:Il(e,t),left:e.left-.25*t.width-Sl.arrowHorizontalOffset,name:"arrow_smw"}},northWestArrowSouth:function(e,t){return{top:Il(e,t),left:e.left-t.width/2,name:"arrow_s"}},northWestArrowSouthMiddleEast:function(e,t){return{top:Il(e,t),left:e.left-.75*t.width+Sl.arrowHorizontalOffset,name:"arrow_sme"}},northWestArrowSouthEast:function(e,t){return{top:Il(e,t),left:e.left-t.width+Sl.arrowHorizontalOffset,name:"arrow_se"}},northArrowSouthWest:function(e,t){return{top:Il(e,t),left:e.left+e.width/2-Sl.arrowHorizontalOffset,name:"arrow_sw"}},northArrowSouthMiddleWest:function(e,t){return{top:Il(e,t),left:e.left+e.width/2-.25*t.width-Sl.arrowHorizontalOffset,name:"arrow_smw"}},northArrowSouth:function(e,t){return{top:Il(e,t),left:e.left+e.width/2-t.width/2,name:"arrow_s"}},northArrowSouthMiddleEast:function(e,t){return{top:Il(e,t),left:e.left+e.width/2-.75*t.width+Sl.arrowHorizontalOffset,name:"arrow_sme"}},northArrowSouthEast:function(e,t){return{top:Il(e,t),left:e.left+e.width/2-t.width+Sl.arrowHorizontalOffset,name:"arrow_se"}},northEastArrowSouthWest:function(e,t){return{top:Il(e,t),left:e.right-Sl.arrowHorizontalOffset,name:"arrow_sw"}},northEastArrowSouthMiddleWest:function(e,t){return{top:Il(e,t),left:e.right-.25*t.width-Sl.arrowHorizontalOffset,name:"arrow_smw"}},northEastArrowSouth:function(e,t){return{top:Il(e,t),left:e.right-t.width/2,name:"arrow_s"}},northEastArrowSouthMiddleEast:function(e,t){return{top:Il(e,t),left:e.right-.75*t.width+Sl.arrowHorizontalOffset,name:"arrow_sme"}},northEastArrowSouthEast:function(e,t){return{top:Il(e,t),left:e.right-t.width+Sl.arrowHorizontalOffset,name:"arrow_se"}},southWestArrowNorthWest:function(e,t){return{top:Ol(e),left:e.left-Sl.arrowHorizontalOffset,name:"arrow_nw"}},southWestArrowNorthMiddleWest:function(e,t){return{top:Ol(e),left:e.left-.25*t.width-Sl.arrowHorizontalOffset,name:"arrow_nmw"}},southWestArrowNorth:function(e,t){return{top:Ol(e),left:e.left-t.width/2,name:"arrow_n"}},southWestArrowNorthMiddleEast:function(e,t){return{top:Ol(e),left:e.left-.75*t.width+Sl.arrowHorizontalOffset,name:"arrow_nme"}},southWestArrowNorthEast:function(e,t){return{top:Ol(e),left:e.left-t.width+Sl.arrowHorizontalOffset,name:"arrow_ne"}},southArrowNorthWest:function(e,t){return{top:Ol(e),left:e.left+e.width/2-Sl.arrowHorizontalOffset,name:"arrow_nw"}},southArrowNorthMiddleWest:function(e,t){return{top:Ol(e),left:e.left+e.width/2-.25*t.width-Sl.arrowHorizontalOffset,name:"arrow_nmw"}},southArrowNorth:function(e,t){return{top:Ol(e),left:e.left+e.width/2-t.width/2,name:"arrow_n"}},southArrowNorthMiddleEast:function(e,t){return{top:Ol(e),left:e.left+e.width/2-.75*t.width+Sl.arrowHorizontalOffset,name:"arrow_nme"}},southArrowNorthEast:function(e,t){return{top:Ol(e),left:e.left+e.width/2-t.width+Sl.arrowHorizontalOffset,name:"arrow_ne"}},southEastArrowNorthWest:function(e,t){return{top:Ol(e),left:e.right-Sl.arrowHorizontalOffset,name:"arrow_nw"}},southEastArrowNorthMiddleWest:function(e,t){return{top:Ol(e),left:e.right-.25*t.width-Sl.arrowHorizontalOffset,name:"arrow_nmw"}},southEastArrowNorth:function(e,t){return{top:Ol(e),left:e.right-t.width/2,name:"arrow_n"}},southEastArrowNorthMiddleEast:function(e,t){return{top:Ol(e),left:e.right-.75*t.width+Sl.arrowHorizontalOffset,name:"arrow_nme"}},southEastArrowNorthEast:function(e,t){return{top:Ol(e),left:e.right-t.width+Sl.arrowHorizontalOffset,name:"arrow_ne"}}};var Rl=n(142),Pl=n.n(Rl),Ml=n(143),Nl=n.n(Ml);n(212),n(214);var Dl=Ai("px"),Fl=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this,e)).positionLimiter=function(){var e=r.editor.editing.view,t=e.document.selection.editableElement;return t?e.domConverter.mapViewToDom(t.root):null},r.set("visibleView",null),r.view=new Sl(e.locale),e.ui.view.body.add(r.view),e.ui.focusTracker.add(r.view.element),r._viewToStack=new Map,r._idToStack=new Map,r.set("_numberOfStacks",0),r.set("_singleViewMode",!1),r._rotatorView=r._createRotatorView(),r._fakePanelsView=r._createFakePanelsView(),r}return _createClass(n,[{key:"hasView",value:function(e){return Array.from(this._viewToStack.keys()).includes(e)}},{key:"add",value:function(e){if(this.hasView(e.view))throw new Ke.default("contextualballoon-add-view-exist",[this,e]);var t=e.stackId||"main";if(!this._idToStack.has(t))return this._idToStack.set(t,new Map([[e.view,e]])),this._viewToStack.set(e.view,this._idToStack.get(t)),this._numberOfStacks=this._idToStack.size,void(this._visibleStack&&!e.singleViewMode||this.showStack(t));var n=this._idToStack.get(t);e.singleViewMode&&this.showStack(t),n.set(e.view,e),this._viewToStack.set(e.view,n),n===this._visibleStack&&this._showView(e)}},{key:"remove",value:function(e){if(!this.hasView(e))throw new Ke.default("contextualballoon-remove-view-not-exist",[this,e]);var t=this._viewToStack.get(e);this._singleViewMode&&this.visibleView===e&&(this._singleViewMode=!1),this.visibleView===e&&(1===t.size?this._idToStack.size>1?this._showNextStack():(this.view.hide(),this.visibleView=null,this._rotatorView.hideView()):this._showView(Array.from(t.values())[t.size-2])),1===t.size?(this._idToStack.delete(this._getStackId(t)),this._numberOfStacks=this._idToStack.size):t.delete(e),this._viewToStack.delete(e)}},{key:"updatePosition",value:function(e){e&&(this._visibleStack.get(this.visibleView).position=e),this.view.pin(this._getBalloonPosition()),this._fakePanelsView.updatePosition()}},{key:"showStack",value:function(e){this.visibleStack=e;var t=this._idToStack.get(e);if(!t)throw new Ke.default("contextualballoon-showstack-stack-not-exist",this);this._visibleStack!==t&&this._showView(Array.from(t.values()).pop())}},{key:"_visibleStack",get:function(){return this._viewToStack.get(this.visibleView)}},{key:"_getStackId",value:function(e){return Array.from(this._idToStack.entries()).find((function(t){return t[1]===e}))[0]}},{key:"_showNextStack",value:function(){var e=Array.from(this._idToStack.values()),t=e.indexOf(this._visibleStack)+1;e[t]||(t=0),this.showStack(this._getStackId(e[t]))}},{key:"_showPrevStack",value:function(){var e=Array.from(this._idToStack.values()),t=e.indexOf(this._visibleStack)-1;e[t]||(t=e.length-1),this.showStack(this._getStackId(e[t]))}},{key:"_createRotatorView",value:function(){var e=this,t=new jl(this.editor.locale),n=this.editor.locale.t;return this.view.content.add(t),t.bind("isNavigationVisible").to(this,"_numberOfStacks",this,"_singleViewMode",(function(e,t){return!t&&e>1})),t.on("change:isNavigationVisible",(function(){return e.updatePosition()}),{priority:"low"}),t.bind("counter").to(this,"visibleView",this,"_numberOfStacks",(function(t,r){if(r<2)return"";var i=Array.from(e._idToStack.values()).indexOf(e._visibleStack)+1;return n("%0 of %1",[i,r])})),t.buttonNextView.on("execute",(function(){t.focusTracker.isFocused&&e.editor.editing.view.focus(),e._showNextStack()})),t.buttonPrevView.on("execute",(function(){t.focusTracker.isFocused&&e.editor.editing.view.focus(),e._showPrevStack()})),t}},{key:"_createFakePanelsView",value:function(){var e=new Ll(this.editor.locale,this.view);return e.bind("numberOfPanels").to(this,"_numberOfStacks",this,"_singleViewMode",(function(e,t){return!t&&e>=2?Math.min(e-1,2):0})),e.listenTo(this.view,"change:top",(function(){return e.updatePosition()})),e.listenTo(this.view,"change:left",(function(){return e.updatePosition()})),this.editor.ui.view.body.add(e),e}},{key:"_showView",value:function(e){var t=e.view,n=e.balloonClassName,r=void 0===n?"":n,i=e.withArrow,o=void 0===i||i,a=e.singleViewMode,s=void 0!==a&&a;this.view.class=r,this.view.withArrow=o,this._rotatorView.showView(t),this.visibleView=t,this.view.pin(this._getBalloonPosition()),this._fakePanelsView.updatePosition(),s&&(this._singleViewMode=!0)}},{key:"_getBalloonPosition",value:function(){var e=Array.from(this._visibleStack.values()).pop().position;return e&&!e.limiter&&(e=Object.assign({},e,{limiter:this.positionLimiter})),e}}],[{key:"pluginName",get:function(){return"ContextualBalloon"}}]),n}(d),jl=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;_classCallCheck(this,n),r=t.call(this,e);var i=e.t,o=r.bindTemplate;return r.set("isNavigationVisible",!0),r.focusTracker=new Ei,r.buttonPrevView=r._createButtonView(i("Previous"),Pl.a),r.buttonNextView=r._createButtonView(i("Next"),Nl.a),r.content=r.createCollection(),r.setTemplate({tag:"div",attributes:{class:["ck","ck-balloon-rotator"],"z-index":"-1"},children:[{tag:"div",attributes:{class:["ck-balloon-rotator__navigation",o.to("isNavigationVisible",(function(e){return e?"":"ck-hidden"}))]},children:[r.buttonPrevView,{tag:"span",attributes:{class:["ck-balloon-rotator__counter"]},children:[{text:o.to("counter")}]},r.buttonNextView]},{tag:"div",attributes:{class:"ck-balloon-rotator__content"},children:r.content}]}),r}return _createClass(n,[{key:"render",value:function(){_get3(_getPrototypeOf(n.prototype),"render",this).call(this),this.focusTracker.add(this.element)}},{key:"showView",value:function(e){this.hideView(),this.content.add(e)}},{key:"hideView",value:function(){this.content.clear()}},{key:"_createButtonView",value:function(e,t){var n=new zc(this.locale);return n.set({label:e,icon:t,tooltip:!0}),n}}]),n}(kc),Ll=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var i;_classCallCheck(this,n);var o=(i=t.call(this,e)).bindTemplate;return i.set("top",0),i.set("left",0),i.set("height",0),i.set("width",0),i.set("numberOfPanels",0),i.content=i.createCollection(),i._balloonPanelView=r,i.setTemplate({tag:"div",attributes:{class:["ck-fake-panel",o.to("numberOfPanels",(function(e){return e?"":"ck-hidden"}))],style:{top:o.to("top",Dl),left:o.to("left",Dl),width:o.to("width",Dl),height:o.to("height",Dl)}},children:i.content}),i.on("change:numberOfPanels",(function(e,t,n,r){n>r?i._addPanels(n-r):i._removePanels(r-n),i.updatePosition()})),i}return _createClass(n,[{key:"_addPanels",value:function(e){for(;e--;){var t=new kc;t.setTemplate({tag:"div"}),this.content.add(t),this.registerChild(t)}}},{key:"_removePanels",value:function(e){for(;e--;){var t=this.content.last;this.content.remove(t),this.deregisterChild(t),t.destroy()}}},{key:"updatePosition",value:function(){if(this.numberOfPanels){var e=this._balloonPanelView,t=e.top,n=e.left,r=new bi(this._balloonPanelView.element),i=r.width,o=r.height;Object.assign(this,{top:t,left:n,width:i,height:o})}}}]),n}(kc);n(216);var Vl=Ai("px"),Bl=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;_classCallCheck(this,n);var i=(r=t.call(this,e)).bindTemplate;return r.set("isActive",!1),r.set("isSticky",!1),r.set("limiterElement",null),r.set("limiterBottomOffset",50),r.set("viewportTopOffset",0),r.set("_marginLeft",null),r.set("_isStickyToTheLimiter",!1),r.set("_hasViewportTopOffset",!1),r.content=r.createCollection(),r._contentPanelPlaceholder=new _c({tag:"div",attributes:{class:["ck","ck-sticky-panel__placeholder"],style:{display:i.to("isSticky",(function(e){return e?"block":"none"})),height:i.to("isSticky",(function(e){return e?Vl(r._panelRect.height):null}))}}}).render(),r._contentPanel=new _c({tag:"div",attributes:{class:["ck","ck-sticky-panel__content",i.if("isSticky","ck-sticky-panel__content_sticky"),i.if("_isStickyToTheLimiter","ck-sticky-panel__content_sticky_bottom-limit")],style:{width:i.to("isSticky",(function(e){return e?Vl(r._contentPanelPlaceholder.getBoundingClientRect().width):null})),top:i.to("_hasViewportTopOffset",(function(e){return e?Vl(r.viewportTopOffset):null})),bottom:i.to("_isStickyToTheLimiter",(function(e){return e?Vl(r.limiterBottomOffset):null})),marginLeft:i.to("_marginLeft")}},children:r.content}).render(),r.setTemplate({tag:"div",attributes:{class:["ck","ck-sticky-panel"]},children:[r._contentPanelPlaceholder,r._contentPanel]}),r}return _createClass(n,[{key:"render",value:function(){var e=this;_get3(_getPrototypeOf(n.prototype),"render",this).call(this),this._checkIfShouldBeSticky(),this.listenTo(mr.window,"scroll",(function(){e._checkIfShouldBeSticky()})),this.listenTo(this,"change:isActive",(function(){e._checkIfShouldBeSticky()}))}},{key:"_checkIfShouldBeSticky",value:function(){var e,t=this._panelRect=this._contentPanel.getBoundingClientRect();this.limiterElement?(e=this._limiterRect=this.limiterElement.getBoundingClientRect(),this.isSticky=this.isActive&&e.top<this.viewportTopOffset&&this._panelRect.height+this.limiterBottomOffset<e.height):this.isSticky=!1,this.isSticky?(this._isStickyToTheLimiter=e.bottom<t.height+this.limiterBottomOffset+this.viewportTopOffset,this._hasViewportTopOffset=!this._isStickyToTheLimiter&&!!this.viewportTopOffset,this._marginLeft=this._isStickyToTheLimiter?null:Vl(-mr.window.scrollX)):(this._isStickyToTheLimiter=!1,this._hasViewportTopOffset=!1,this._marginLeft=null)}}]),n}(kc);Ai("px"),n(218),Ai("px"),Ai("px"),n(220);var zl=new WeakMap;function Hl(e){var t=e.view,n=e.element,r=e.text,i=e.isDirectHost,o=void 0===i||i,a=e.keepOnFocus,s=void 0!==a&&a,c=t.document;zl.has(c)||(zl.set(c,new Map),c.registerPostFixer((function(e){return Wl(c,e)}))),zl.get(c).set(n,{text:r,isDirectHost:o,keepOnFocus:s,hostElement:o?n:null}),t.change((function(e){return Wl(c,e)}))}function Ul(e,t){return!!t.hasClass("ck-placeholder")&&(e.removeClass("ck-placeholder",t),!0)}function Wl(e,t){var n,r=zl.get(e),i=[],o=!1,a=_createForOfIteratorHelper(r);try{for(a.s();!(n=a.n()).done;){var s=_slicedToArray(n.value,2),c=s[0],l=s[1];l.isDirectHost&&(i.push(c),ql(t,c,l)&&(o=!0))}}catch(g){a.e(g)}finally{a.f()}var u,d=_createForOfIteratorHelper(r);try{for(d.s();!(u=d.n()).done;){var f=_slicedToArray(u.value,2),h=f[0],p=f[1];if(!p.isDirectHost){var v=Yl(h);v&&(i.includes(v)||(p.hostElement=v,ql(t,h,p)&&(o=!0)))}}}catch(g){d.e(g)}finally{d.f()}return o}function ql(e,t,n){var r=n.text,i=n.isDirectHost,o=n.hostElement,a=!1;return o.getAttribute("data-placeholder")!==r&&(e.setAttribute("data-placeholder",r,o),a=!0),(i||1==t.childCount)&&function(e,t){if(!e.isAttached())return!1;if(Array.from(e.getChildren()).some((function(e){return!e.is("uiElement")})))return!1;if(t)return!0;var n=e.document;if(!n.isFocused)return!0;var r=n.selection.anchor;return r&&r.parent!==e}(o,n.keepOnFocus)?function(e,t){return!t.hasClass("ck-placeholder")&&(e.addClass("ck-placeholder",t),!0)}(e,o)&&(a=!0):Ul(e,o)&&(a=!0),a}function Yl(e){if(e.childCount){var t=e.getChild(0);if(t.is("element")&&!t.is("uiElement"))return t}return null}var Gl=new Map;function Jl(e,t,n){var r=Gl.get(e);r||(r=new Map,Gl.set(e,r)),r.set(t,n)}function $l(e){return[e]}function Kl(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=function(e,t){var n=Gl.get(e);return n&&n.has(t)?n.get(t):$l}(e.constructor,t.constructor);try{return r(e=e.clone(),t,n)}catch(e){throw e}}function Ql(e,t,n){e=e.slice(),t=t.slice();var r=new Zl(n.document,n.useRelations,n.forceWeakRemove);r.setOriginalOperations(e),r.setOriginalOperations(t);var i=r.originalOperations;if(0==e.length||0==t.length)return{operationsA:e,operationsB:t,originalOperations:i};var o,a=new WeakMap,s=_createForOfIteratorHelper(e);try{for(s.s();!(o=s.n()).done;){var c=o.value;a.set(c,0)}}catch(x){s.e(x)}finally{s.f()}for(var l={nextBaseVersionA:e[e.length-1].baseVersion+1,nextBaseVersionB:t[t.length-1].baseVersion+1,originalOperationsACount:e.length,originalOperationsBCount:t.length},u=0;u<e.length;){var d,f,h=e[u],p=a.get(h);if(p!=t.length){var v=t[p],g=Kl(h,v,r.getContext(h,v,!0)),m=Kl(v,h,r.getContext(v,h,!1));r.updateRelation(h,v),r.setOriginalOperations(g,h),r.setOriginalOperations(m,v);var y,k=_createForOfIteratorHelper(g);try{for(k.s();!(y=k.n()).done;){var _=y.value;a.set(_,p+m.length)}}catch(x){k.e(x)}finally{k.f()}(d=e).splice.apply(d,[u,1].concat(_toConsumableArray(g))),(f=t).splice.apply(f,[p,1].concat(_toConsumableArray(m)))}else u++}if(n.padWithNoOps){var b=e.length-l.originalOperationsACount,w=t.length-l.originalOperationsBCount;eu(e,w-b),eu(t,b-w)}return Xl(e,l.nextBaseVersionB),Xl(t,l.nextBaseVersionA),{operationsA:e,operationsB:t,originalOperations:i}}var Zl=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];_classCallCheck(this,e),this.originalOperations=new Map,this._history=t.history,this._useRelations=n,this._forceWeakRemove=!!r,this._relations=new Map}return _createClass(e,[{key:"setOriginalOperations",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=n?this.originalOperations.get(n):null,i=_createForOfIteratorHelper(e);try{for(i.s();!(t=i.n()).done;){var o=t.value;this.originalOperations.set(o,r||o)}}catch(a){i.e(a)}finally{i.f()}}},{key:"updateRelation",value:function(e,t){switch(e.constructor){case ba:switch(t.constructor){case Aa:e.targetPosition.isEqual(t.sourcePosition)||t.movedRange.containsPosition(e.targetPosition)?this._setRelation(e,t,"insertAtSource"):e.targetPosition.isEqual(t.deletionPosition)?this._setRelation(e,t,"insertBetween"):e.targetPosition.isAfter(t.sourcePosition)&&this._setRelation(e,t,"moveTargetAfter");break;case ba:e.targetPosition.isEqual(t.sourcePosition)||e.targetPosition.isBefore(t.sourcePosition)?this._setRelation(e,t,"insertBefore"):this._setRelation(e,t,"insertAfter")}break;case Sa:switch(t.constructor){case Aa:e.splitPosition.isBefore(t.sourcePosition)&&this._setRelation(e,t,"splitBefore");break;case ba:if(e.splitPosition.isEqual(t.sourcePosition)||e.splitPosition.isBefore(t.sourcePosition))this._setRelation(e,t,"splitBefore");else{var n=eo._createFromPositionAndShift(t.sourcePosition,t.howMany);e.splitPosition.hasSameParentAs(t.sourcePosition)&&n.containsPosition(e.splitPosition)&&this._setRelation(e,t,{howMany:n.end.offset-e.splitPosition.offset,offset:e.splitPosition.offset-n.start.offset})}}break;case Aa:switch(t.constructor){case Aa:e.targetPosition.isEqual(t.sourcePosition)||this._setRelation(e,t,"mergeTargetNotMoved"),e.sourcePosition.isEqual(t.targetPosition)&&this._setRelation(e,t,"mergeSourceNotMoved"),e.sourcePosition.isEqual(t.sourcePosition)&&this._setRelation(e,t,"mergeSameElement");break;case Sa:e.sourcePosition.isEqual(t.splitPosition)&&this._setRelation(e,t,"splitAtSource")}break;case xa:var r=e.newRange;if(!r)return;switch(t.constructor){case ba:var i=eo._createFromPositionAndShift(t.sourcePosition,t.howMany),o=i.containsPosition(r.start)||i.start.isEqual(r.start),a=i.containsPosition(r.end)||i.end.isEqual(r.end);!o&&!a||i.containsRange(r)||this._setRelation(e,t,{side:o?"left":"right",path:o?r.start.path.slice():r.end.path.slice()});break;case Aa:var s=r.start.isEqual(t.targetPosition),c=r.start.isEqual(t.deletionPosition),l=r.end.isEqual(t.deletionPosition),u=r.end.isEqual(t.sourcePosition);(s||c||l||u)&&this._setRelation(e,t,{wasInLeftElement:s,wasStartBeforeMergedElement:c,wasEndBeforeMergedElement:l,wasInRightElement:u})}}}},{key:"getContext",value:function(e,t,n){return{aIsStrong:n,aWasUndone:this._wasUndone(e),bWasUndone:this._wasUndone(t),abRelation:this._useRelations?this._getRelation(e,t):null,baRelation:this._useRelations?this._getRelation(t,e):null,forceWeakRemove:this._forceWeakRemove}}},{key:"_wasUndone",value:function(e){var t=this.originalOperations.get(e);return t.wasUndone||this._history.isUndoneOperation(t)}},{key:"_getRelation",value:function(e,t){var n=this.originalOperations.get(t),r=this._history.getUndoneOperation(n);if(!r)return null;var i=this.originalOperations.get(e),o=this._relations.get(i);return o&&o.get(r)||null}},{key:"_setRelation",value:function(e,t,n){var r=this.originalOperations.get(e),i=this.originalOperations.get(t),o=this._relations.get(r);o||(o=new Map,this._relations.set(r,o)),o.set(i,n)}}]),e}();function Xl(e,t){var n,r=_createForOfIteratorHelper(e);try{for(r.s();!(n=r.n()).done;){n.value.baseVersion=t++}}catch(i){r.e(i)}finally{r.f()}}function eu(e,t){for(var n=0;n<t;n++)e.push(new Ga(0))}function tu(e,t,n){var r=e.nodes.getNode(0).getAttribute(t);if(r==n)return null;var i=new eo(e.position,e.position.getShiftedBy(e.howMany));return new ka(i,t,r,n,0)}function nu(e,t){return null===e.targetPosition._getTransformedByDeletion(t.sourcePosition,t.howMany)}function ru(e,t){for(var n=[],r=0;r<e.length;r++){var i=e[r],o=new ba(i.start,i.end.offset-i.start.offset,t,0);n.push(o);for(var a=r+1;a<e.length;a++)e[a]=e[a]._getTransformedByMove(o.sourcePosition,o.targetPosition,o.howMany)[0];t=t._getTransformedByMove(o.sourcePosition,o.targetPosition,o.howMany)}return n}Jl(ka,ka,(function(e,t,n){if(e.key===t.key&&e.range.start.hasSameParentAs(t.range.start)){var r=e.range.getDifference(t.range).map((function(t){return new ka(t,e.key,e.oldValue,e.newValue,0)})),i=e.range.getIntersection(t.range);return i&&n.aIsStrong&&r.push(new ka(i,t.key,t.newValue,e.newValue,0)),0==r.length?[new Ga(0)]:r}return[e]})),Jl(ka,wa,(function(e,t){if(e.range.start.hasSameParentAs(t.position)&&e.range.containsPosition(t.position)){var n=e.range._getTransformedByInsertion(t.position,t.howMany,!t.shouldReceiveAttributes).map((function(t){return new ka(t,e.key,e.oldValue,e.newValue,e.baseVersion)}));if(t.shouldReceiveAttributes){var r=tu(t,e.key,e.oldValue);r&&n.unshift(r)}return n}return e.range=e.range._getTransformedByInsertion(t.position,t.howMany,!1)[0],[e]})),Jl(ka,Aa,(function(e,t){var n=[];e.range.start.hasSameParentAs(t.deletionPosition)&&(e.range.containsPosition(t.deletionPosition)||e.range.start.isEqual(t.deletionPosition))&&n.push(eo._createFromPositionAndShift(t.graveyardPosition,1));var r=e.range._getTransformedByMergeOperation(t);return r.isCollapsed||n.push(r),n.map((function(t){return new ka(t,e.key,e.oldValue,e.newValue,e.baseVersion)}))})),Jl(ka,ba,(function(e,t){return function(e,t){var n=eo._createFromPositionAndShift(t.sourcePosition,t.howMany),r=null,i=[];n.containsRange(e,!0)?r=e:e.start.hasSameParentAs(n.start)?(i=e.getDifference(n),r=e.getIntersection(n)):i=[e];var o,a=[],s=_createForOfIteratorHelper(i);try{for(s.s();!(o=s.n()).done;){var c=o.value;c=c._getTransformedByDeletion(t.sourcePosition,t.howMany);var l=t.getMovedRangeStart(),u=c.start.hasSameParentAs(l);c=c._getTransformedByInsertion(l,t.howMany,u),a.push.apply(a,_toConsumableArray(c))}}catch(d){s.e(d)}finally{s.f()}return r&&a.push(r._getTransformedByMove(t.sourcePosition,t.targetPosition,t.howMany,!1)[0]),a}(e.range,t).map((function(t){return new ka(t,e.key,e.oldValue,e.newValue,e.baseVersion)}))})),Jl(ka,Sa,(function(e,t){if(e.range.end.isEqual(t.insertionPosition))return t.graveyardPosition||e.range.end.offset++,[e];if(e.range.start.hasSameParentAs(t.splitPosition)&&e.range.containsPosition(t.splitPosition)){var n=e.clone();return n.range=new eo(t.moveTargetPosition.clone(),e.range.end._getCombined(t.splitPosition,t.moveTargetPosition)),e.range.end=t.splitPosition.clone(),e.range.end.stickiness="toPrevious",[e,n]}return e.range=e.range._getTransformedBySplitOperation(t),[e]})),Jl(wa,ka,(function(e,t){var n=[e];if(e.shouldReceiveAttributes&&e.position.hasSameParentAs(t.range.start)&&t.range.containsPosition(e.position)){var r=tu(e,t.key,t.newValue);r&&n.push(r)}return n})),Jl(wa,wa,(function(e,t,n){return e.position.isEqual(t.position)&&n.aIsStrong||(e.position=e.position._getTransformedByInsertOperation(t)),[e]})),Jl(wa,ba,(function(e,t){return e.position=e.position._getTransformedByMoveOperation(t),[e]})),Jl(wa,Sa,(function(e,t){return e.position=e.position._getTransformedBySplitOperation(t),[e]})),Jl(wa,Aa,(function(e,t){return e.position=e.position._getTransformedByMergeOperation(t),[e]})),Jl(xa,wa,(function(e,t){return e.oldRange&&(e.oldRange=e.oldRange._getTransformedByInsertOperation(t)[0]),e.newRange&&(e.newRange=e.newRange._getTransformedByInsertOperation(t)[0]),[e]})),Jl(xa,xa,(function(e,t,n){if(e.name==t.name){if(!n.aIsStrong)return[new Ga(0)];e.oldRange=t.newRange?t.newRange.clone():null}return[e]})),Jl(xa,Aa,(function(e,t){return e.oldRange&&(e.oldRange=e.oldRange._getTransformedByMergeOperation(t)),e.newRange&&(e.newRange=e.newRange._getTransformedByMergeOperation(t)),[e]})),Jl(xa,ba,(function(e,t,n){if(e.oldRange&&(e.oldRange=eo._createFromRanges(e.oldRange._getTransformedByMoveOperation(t))),e.newRange){if(n.abRelation){var r=eo._createFromRanges(e.newRange._getTransformedByMoveOperation(t));if("left"==n.abRelation.side&&t.targetPosition.isEqual(e.newRange.start))return e.newRange.start.path=n.abRelation.path,e.newRange.end=r.end,[e];if("right"==n.abRelation.side&&t.targetPosition.isEqual(e.newRange.end))return e.newRange.start=r.start,e.newRange.end.path=n.abRelation.path,[e]}e.newRange=eo._createFromRanges(e.newRange._getTransformedByMoveOperation(t))}return[e]})),Jl(xa,Sa,(function(e,t,n){if(e.oldRange&&(e.oldRange=e.oldRange._getTransformedBySplitOperation(t)),e.newRange){if(n.abRelation){var r=e.newRange._getTransformedBySplitOperation(t);return e.newRange.start.isEqual(t.splitPosition)&&n.abRelation.wasStartBeforeMergedElement?e.newRange.start=Ki._createAt(t.insertionPosition):e.newRange.start.isEqual(t.splitPosition)&&!n.abRelation.wasInLeftElement&&(e.newRange.start=Ki._createAt(t.moveTargetPosition)),e.newRange.end=e.newRange.end.isEqual(t.splitPosition)&&n.abRelation.wasInRightElement?Ki._createAt(t.moveTargetPosition):e.newRange.end.isEqual(t.splitPosition)&&n.abRelation.wasEndBeforeMergedElement?Ki._createAt(t.insertionPosition):r.end,[e]}e.newRange=e.newRange._getTransformedBySplitOperation(t)}return[e]})),Jl(Aa,wa,(function(e,t){return e.sourcePosition.hasSameParentAs(t.position)&&(e.howMany+=t.howMany),e.sourcePosition=e.sourcePosition._getTransformedByInsertOperation(t),e.targetPosition=e.targetPosition._getTransformedByInsertOperation(t),[e]})),Jl(Aa,Aa,(function(e,t,n){if(e.sourcePosition.isEqual(t.sourcePosition)&&e.targetPosition.isEqual(t.targetPosition)){if(n.bWasUndone){var r=t.graveyardPosition.path.slice();return r.push(0),e.sourcePosition=new Ki(t.graveyardPosition.root,r),e.howMany=0,[e]}return[new Ga(0)]}if(e.sourcePosition.isEqual(t.sourcePosition)&&!e.targetPosition.isEqual(t.targetPosition)&&!n.bWasUndone&&"splitAtSource"!=n.abRelation){var i="$graveyard"==e.targetPosition.root.rootName,o="$graveyard"==t.targetPosition.root.rootName;if(o&&!i||(!i||o)&&n.aIsStrong){var a=t.targetPosition._getTransformedByMergeOperation(t),s=e.targetPosition._getTransformedByMergeOperation(t);return[new ba(a,e.howMany,s,0)]}return[new Ga(0)]}return e.sourcePosition.hasSameParentAs(t.targetPosition)&&(e.howMany+=t.howMany),e.sourcePosition=e.sourcePosition._getTransformedByMergeOperation(t),e.targetPosition=e.targetPosition._getTransformedByMergeOperation(t),e.graveyardPosition.isEqual(t.graveyardPosition)&&n.aIsStrong||(e.graveyardPosition=e.graveyardPosition._getTransformedByMergeOperation(t)),[e]})),Jl(Aa,ba,(function(e,t,n){var r=eo._createFromPositionAndShift(t.sourcePosition,t.howMany);return"remove"==t.type&&!n.bWasUndone&&!n.forceWeakRemove&&e.deletionPosition.hasSameParentAs(t.sourcePosition)&&r.containsPosition(e.sourcePosition)?[new Ga(0)]:(e.sourcePosition.hasSameParentAs(t.targetPosition)&&(e.howMany+=t.howMany),e.sourcePosition.hasSameParentAs(t.sourcePosition)&&(e.howMany-=t.howMany),e.sourcePosition=e.sourcePosition._getTransformedByMoveOperation(t),e.targetPosition=e.targetPosition._getTransformedByMoveOperation(t),e.graveyardPosition.isEqual(t.targetPosition)||(e.graveyardPosition=e.graveyardPosition._getTransformedByMoveOperation(t)),[e])})),Jl(Aa,Sa,(function(e,t,n){if(t.graveyardPosition&&(e.graveyardPosition=e.graveyardPosition._getTransformedByDeletion(t.graveyardPosition,1),e.deletionPosition.isEqual(t.graveyardPosition)&&(e.howMany=t.howMany)),e.targetPosition.isEqual(t.splitPosition)){var r=0!=t.howMany,i=t.graveyardPosition&&e.deletionPosition.isEqual(t.graveyardPosition);if(r||i||"mergeTargetNotMoved"==n.abRelation)return e.sourcePosition=e.sourcePosition._getTransformedBySplitOperation(t),[e]}if(e.sourcePosition.isEqual(t.splitPosition)){if("mergeSourceNotMoved"==n.abRelation)return e.howMany=0,e.targetPosition=e.targetPosition._getTransformedBySplitOperation(t),[e];if("mergeSameElement"==n.abRelation||e.sourcePosition.offset>0)return e.sourcePosition=t.moveTargetPosition.clone(),e.targetPosition=e.targetPosition._getTransformedBySplitOperation(t),[e]}return e.sourcePosition.hasSameParentAs(t.splitPosition)&&(e.howMany=t.splitPosition.offset),e.sourcePosition=e.sourcePosition._getTransformedBySplitOperation(t),e.targetPosition=e.targetPosition._getTransformedBySplitOperation(t),[e]})),Jl(ba,wa,(function(e,t){var n=eo._createFromPositionAndShift(e.sourcePosition,e.howMany)._getTransformedByInsertOperation(t,!1)[0];return e.sourcePosition=n.start,e.howMany=n.end.offset-n.start.offset,e.targetPosition.isEqual(t.position)||(e.targetPosition=e.targetPosition._getTransformedByInsertOperation(t)),[e]})),Jl(ba,ba,(function(e,t,n){var r,i=eo._createFromPositionAndShift(e.sourcePosition,e.howMany),o=eo._createFromPositionAndShift(t.sourcePosition,t.howMany),a=n.aIsStrong,s=!n.aIsStrong;if("insertBefore"==n.abRelation||"insertAfter"==n.baRelation?s=!0:"insertAfter"!=n.abRelation&&"insertBefore"!=n.baRelation||(s=!1),r=e.targetPosition.isEqual(t.targetPosition)&&s?e.targetPosition._getTransformedByDeletion(t.sourcePosition,t.howMany):e.targetPosition._getTransformedByMove(t.sourcePosition,t.targetPosition,t.howMany),nu(e,t)&&nu(t,e))return[t.getReversed()];if(i.containsPosition(t.targetPosition)&&i.containsRange(o,!0))return i.start=i.start._getTransformedByMove(t.sourcePosition,t.targetPosition,t.howMany),i.end=i.end._getTransformedByMove(t.sourcePosition,t.targetPosition,t.howMany),ru([i],r);if(o.containsPosition(e.targetPosition)&&o.containsRange(i,!0))return i.start=i.start._getCombined(t.sourcePosition,t.getMovedRangeStart()),i.end=i.end._getCombined(t.sourcePosition,t.getMovedRangeStart()),ru([i],r);var c=ot(e.sourcePosition.getParentPath(),t.sourcePosition.getParentPath());if("prefix"==c||"extension"==c)return i.start=i.start._getTransformedByMove(t.sourcePosition,t.targetPosition,t.howMany),i.end=i.end._getTransformedByMove(t.sourcePosition,t.targetPosition,t.howMany),ru([i],r);"remove"!=e.type||"remove"==t.type||n.aWasUndone||n.forceWeakRemove?"remove"==e.type||"remove"!=t.type||n.bWasUndone||n.forceWeakRemove||(a=!1):a=!0;var l,u=[],d=_createForOfIteratorHelper(i.getDifference(o));try{for(d.s();!(l=d.n()).done;){var f=l.value;f.start=f.start._getTransformedByDeletion(t.sourcePosition,t.howMany),f.end=f.end._getTransformedByDeletion(t.sourcePosition,t.howMany);var h="same"==ot(f.start.getParentPath(),t.getMovedRangeStart().getParentPath()),p=f._getTransformedByInsertion(t.getMovedRangeStart(),t.howMany,h);u.push.apply(u,_toConsumableArray(p))}}catch(g){d.e(g)}finally{d.f()}var v=i.getIntersection(o);return null!==v&&a&&(v.start=v.start._getCombined(t.sourcePosition,t.getMovedRangeStart()),v.end=v.end._getCombined(t.sourcePosition,t.getMovedRangeStart()),0===u.length?u.push(v):1==u.length?o.start.isBefore(i.start)||o.start.isEqual(i.start)?u.unshift(v):u.push(v):u.splice(1,0,v)),0===u.length?[new Ga(e.baseVersion)]:ru(u,r)})),Jl(ba,Sa,(function(e,t,n){var r=e.targetPosition.clone();e.targetPosition.isEqual(t.insertionPosition)&&t.graveyardPosition&&"moveTargetAfter"!=n.abRelation||(r=e.targetPosition._getTransformedBySplitOperation(t));var i=eo._createFromPositionAndShift(e.sourcePosition,e.howMany);if(i.end.isEqual(t.insertionPosition))return t.graveyardPosition||e.howMany++,e.targetPosition=r,[e];if(i.start.hasSameParentAs(t.splitPosition)&&i.containsPosition(t.splitPosition)){var o=new eo(t.splitPosition,i.end);return o=o._getTransformedBySplitOperation(t),ru([new eo(i.start,t.splitPosition),o],r)}e.targetPosition.isEqual(t.splitPosition)&&"insertAtSource"==n.abRelation&&(r=t.moveTargetPosition),e.targetPosition.isEqual(t.insertionPosition)&&"insertBetween"==n.abRelation&&(r=e.targetPosition);var a=[i._getTransformedBySplitOperation(t)];if(t.graveyardPosition){var s=i.start.isEqual(t.graveyardPosition)||i.containsPosition(t.graveyardPosition);e.howMany>1&&s&&!n.aWasUndone&&a.push(eo._createFromPositionAndShift(t.insertionPosition,1))}return ru(a,r)})),Jl(ba,Aa,(function(e,t,n){var r=eo._createFromPositionAndShift(e.sourcePosition,e.howMany);if(t.deletionPosition.hasSameParentAs(e.sourcePosition)&&r.containsPosition(t.sourcePosition))if("remove"!=e.type||n.forceWeakRemove){if(1==e.howMany)return n.bWasUndone?(e.sourcePosition=t.graveyardPosition.clone(),e.targetPosition=e.targetPosition._getTransformedByMergeOperation(t),[e]):[new Ga(0)]}else if(!n.aWasUndone){var i=[],o=t.graveyardPosition.clone(),a=t.targetPosition._getTransformedByMergeOperation(t);e.howMany>1&&(i.push(new ba(e.sourcePosition,e.howMany-1,e.targetPosition,0)),o=o._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany-1),a=a._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany-1));var s=t.deletionPosition._getCombined(e.sourcePosition,e.targetPosition),c=new ba(o,1,s,0),l=c.getMovedRangeStart().path.slice();l.push(0);var u=new Ki(c.targetPosition.root,l);a=a._getTransformedByMove(o,s,1);var d=new ba(a,t.howMany,u,0);return i.push(c),i.push(d),i}var f=eo._createFromPositionAndShift(e.sourcePosition,e.howMany)._getTransformedByMergeOperation(t);return e.sourcePosition=f.start,e.howMany=f.end.offset-f.start.offset,e.targetPosition=e.targetPosition._getTransformedByMergeOperation(t),[e]})),Jl(Ca,wa,(function(e,t){return e.position=e.position._getTransformedByInsertOperation(t),[e]})),Jl(Ca,Aa,(function(e,t){return e.position.isEqual(t.deletionPosition)?(e.position=t.graveyardPosition.clone(),e.position.stickiness="toNext",[e]):(e.position=e.position._getTransformedByMergeOperation(t),[e])})),Jl(Ca,ba,(function(e,t){return e.position=e.position._getTransformedByMoveOperation(t),[e]})),Jl(Ca,Ca,(function(e,t,n){if(e.position.isEqual(t.position)){if(!n.aIsStrong)return[new Ga(0)];e.oldName=t.newName}return[e]})),Jl(Ca,Sa,(function(e,t){return"same"!=ot(e.position.path,t.splitPosition.getParentPath())||t.graveyardPosition?(e.position=e.position._getTransformedBySplitOperation(t),[e]):[e,new Ca(e.position.getShiftedBy(1),e.oldName,e.newName,0)]})),Jl(Ta,Ta,(function(e,t,n){if(e.root===t.root&&e.key===t.key){if(!n.aIsStrong||e.newValue===t.newValue)return[new Ga(0)];e.oldValue=t.newValue}return[e]})),Jl(Sa,wa,(function(e,t){return e.splitPosition.hasSameParentAs(t.position)&&e.splitPosition.offset<t.position.offset&&(e.howMany+=t.howMany),e.splitPosition=e.splitPosition._getTransformedByInsertOperation(t),e.insertionPosition=e.insertionPosition._getTransformedByInsertOperation(t),[e]})),Jl(Sa,Aa,(function(e,t,n){if(!e.graveyardPosition&&!n.bWasUndone&&e.splitPosition.hasSameParentAs(t.sourcePosition)){var r=t.graveyardPosition.path.slice();r.push(0);var i=new Ki(t.graveyardPosition.root,r),o=Sa.getInsertionPosition(new Ki(t.graveyardPosition.root,r)),a=new Sa(i,0,o,null,0);return e.splitPosition=e.splitPosition._getTransformedByMergeOperation(t),e.insertionPosition=Sa.getInsertionPosition(e.splitPosition),e.graveyardPosition=a.insertionPosition.clone(),e.graveyardPosition.stickiness="toNext",[a,e]}return e.splitPosition.hasSameParentAs(t.deletionPosition)&&!e.splitPosition.isAfter(t.deletionPosition)&&e.howMany--,e.splitPosition.hasSameParentAs(t.targetPosition)&&(e.howMany+=t.howMany),e.splitPosition=e.splitPosition._getTransformedByMergeOperation(t),e.insertionPosition=Sa.getInsertionPosition(e.splitPosition),e.graveyardPosition&&(e.graveyardPosition=e.graveyardPosition._getTransformedByMergeOperation(t)),[e]})),Jl(Sa,ba,(function(e,t,n){var r=eo._createFromPositionAndShift(t.sourcePosition,t.howMany);if(e.graveyardPosition){var i=r.start.isEqual(e.graveyardPosition)||r.containsPosition(e.graveyardPosition);if(!n.bWasUndone&&i){var o=e.splitPosition._getTransformedByMoveOperation(t),a=e.graveyardPosition._getTransformedByMoveOperation(t),s=a.path.slice();s.push(0);var c=new Ki(a.root,s);return[new ba(o,e.howMany,c,0)]}e.graveyardPosition=e.graveyardPosition._getTransformedByMoveOperation(t)}var l=e.splitPosition.isEqual(t.targetPosition);if(l&&("insertAtSource"==n.baRelation||"splitBefore"==n.abRelation))return e.howMany+=t.howMany,e.splitPosition=e.splitPosition._getTransformedByDeletion(t.sourcePosition,t.howMany),e.insertionPosition=Sa.getInsertionPosition(e.splitPosition),[e];if(l&&n.abRelation&&n.abRelation.howMany){var u=n.abRelation,d=u.howMany,f=u.offset;return e.howMany+=d,e.splitPosition=e.splitPosition.getShiftedBy(f),[e]}return e.splitPosition.hasSameParentAs(t.sourcePosition)&&r.containsPosition(e.splitPosition)?(e.howMany-=t.howMany-(e.splitPosition.offset-t.sourcePosition.offset),e.splitPosition.hasSameParentAs(t.targetPosition)&&e.splitPosition.offset<t.targetPosition.offset&&(e.howMany+=t.howMany),e.splitPosition=t.sourcePosition.clone(),e.insertionPosition=Sa.getInsertionPosition(e.splitPosition),[e]):(t.sourcePosition.isEqual(t.targetPosition)||(e.splitPosition.hasSameParentAs(t.sourcePosition)&&e.splitPosition.offset<=t.sourcePosition.offset&&(e.howMany-=t.howMany),e.splitPosition.hasSameParentAs(t.targetPosition)&&e.splitPosition.offset<t.targetPosition.offset&&(e.howMany+=t.howMany)),e.splitPosition.stickiness="toNone",e.splitPosition=e.splitPosition._getTransformedByMoveOperation(t),e.splitPosition.stickiness="toNext",e.insertionPosition=e.graveyardPosition?e.insertionPosition._getTransformedByMoveOperation(t):Sa.getInsertionPosition(e.splitPosition),[e])})),Jl(Sa,Sa,(function(e,t,n){if(e.splitPosition.isEqual(t.splitPosition)){if(!e.graveyardPosition&&!t.graveyardPosition)return[new Ga(0)];if(e.graveyardPosition&&t.graveyardPosition&&e.graveyardPosition.isEqual(t.graveyardPosition))return[new Ga(0)];if("splitBefore"==n.abRelation)return e.howMany=0,e.graveyardPosition=e.graveyardPosition._getTransformedBySplitOperation(t),[e]}if(e.graveyardPosition&&t.graveyardPosition&&e.graveyardPosition.isEqual(t.graveyardPosition)){var r="$graveyard"==e.splitPosition.root.rootName,i="$graveyard"==t.splitPosition.root.rootName;if(i&&!r||(!r||i)&&n.aIsStrong){var o=[];return t.howMany&&o.push(new ba(t.moveTargetPosition,t.howMany,t.splitPosition,0)),e.howMany&&o.push(new ba(e.splitPosition,e.howMany,e.moveTargetPosition,0)),o}return[new Ga(0)]}if(e.graveyardPosition&&(e.graveyardPosition=e.graveyardPosition._getTransformedBySplitOperation(t)),e.splitPosition.isEqual(t.insertionPosition)&&"splitBefore"==n.abRelation)return e.howMany++,[e];if(t.splitPosition.isEqual(e.insertionPosition)&&"splitBefore"==n.baRelation){var a=t.insertionPosition.path.slice();a.push(0);var s=new Ki(t.insertionPosition.root,a);return[e,new ba(e.insertionPosition,1,s,0)]}return e.splitPosition.hasSameParentAs(t.splitPosition)&&e.splitPosition.offset<t.splitPosition.offset&&(e.howMany-=t.howMany),e.splitPosition=e.splitPosition._getTransformedBySplitOperation(t),e.insertionPosition=Sa.getInsertionPosition(e.splitPosition),[e]}));var iu=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this,e)).domEventType="click",r}return _createClass(n,[{key:"onDomEvent",value:function(e){this.fire(e.type,e)}}]),n}(Zr),ou=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this,e)).domEventType=["mousedown","mouseup"],r}return _createClass(n,[{key:"onDomEvent",value:function(e){this.fire(e.type,e)}}]),n}(Zr),au=function(){function e(t){_classCallCheck(this,e),this.document=t}return _createClass(e,[{key:"createDocumentFragment",value:function(e){return new zn(this.document,e)}},{key:"createElement",value:function(e,t,n){return new Gt(this.document,e,t,n)}},{key:"createText",value:function(e){return new lt(this.document,e)}},{key:"clone",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e._clone(t)}},{key:"appendChild",value:function(e,t){return t._appendChild(e)}},{key:"insertChild",value:function(e,t,n){return n._insertChild(e,t)}},{key:"removeChildren",value:function(e,t,n){return n._removeChildren(e,t)}},{key:"remove",value:function(e){var t=e.parent;return t?this.removeChildren(t.getChildIndex(e),1,t):[]}},{key:"replace",value:function(e,t){var n=e.parent;if(n){var r=n.getChildIndex(e);return this.removeChildren(r,1,n),this.insertChild(r,t,n),!0}return!1}},{key:"unwrapElement",value:function(e){var t=e.parent;if(t){var n=t.getChildIndex(e);this.remove(e),this.insertChild(n,e.getChildren(),t)}}},{key:"rename",value:function(e,t){var n=new Gt(this.document,e,t.getAttributes(),t.getChildren());return this.replace(t,n)?n:null}},{key:"setAttribute",value:function(e,t,n){n._setAttribute(e,t)}},{key:"removeAttribute",value:function(e,t){t._removeAttribute(e)}},{key:"addClass",value:function(e,t){t._addClass(e)}},{key:"removeClass",value:function(e,t){t._removeClass(e)}},{key:"setStyle",value:function(e,t,n){w(e)&&void 0===n&&(n=t),n._setStyle(e,t)}},{key:"removeStyle",value:function(e,t){t._removeStyle(e)}},{key:"setCustomProperty",value:function(e,t,n){n._setCustomProperty(e,t)}},{key:"removeCustomProperty",value:function(e,t){return t._removeCustomProperty(e)}},{key:"createPositionAt",value:function(e,t){return tn._createAt(e,t)}},{key:"createPositionAfter",value:function(e){return tn._createAfter(e)}},{key:"createPositionBefore",value:function(e){return tn._createBefore(e)}},{key:"createRange",value:function(e,t){return new nn(e,t)}},{key:"createRangeOn",value:function(e){return nn._createOn(e)}},{key:"createRangeIn",value:function(e){return nn._createIn(e)}},{key:"createSelection",value:function(e,t,n){return new an(e,t,n)}}]),e}();new Set(["black","silver","gray","white","maroon","red","purple","fuchsia","green","lime","olive","yellow","navy","blue","teal","aqua","orange","aliceblue","antiquewhite","aquamarine","azure","beige","bisque","blanchedalmond","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","gainsboro","ghostwhite","gold","goldenrod","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","limegreen","linen","magenta","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","oldlace","olivedrab","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","thistle","tomato","turquoise","violet","wheat","whitesmoke","yellowgreen","rebeccapurple","currentcolor","transparent"]);var su=/^([+-]?[0-9]*([.][0-9]+)?(px|cm|mm|in|pc|pt|ch|em|ex|rem|vh|vw|vmin|vmax)|0)$/,cu=/^[+-]?[0-9]*([.][0-9]+)?%$/,lu=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var i;return _classCallCheck(this,n),(i=t.call(this,e)).view=r,i._toolbarConfig=ol(e.config.get("toolbar")),i._elementReplacer=new gi,i}return _createClass(n,[{key:"element",get:function(){return this.view.element}},{key:"init",value:function(e){var t=this.view,n=this.editor.editing.view,r=t.editable,i=n.document.getRoot();r.name=i.rootName,t.render();var o=r.element;this.setEditableElement(r.name,o),this.focusTracker.add(o),t.editable.bind("isFocused").to(this.focusTracker),n.attachDomRoot(o),e&&this._elementReplacer.replace(e,this.element),this._initPlaceholder(),this._initToolbar(),this.fire("ready")}},{key:"destroy",value:function(){var e=this.view,t=this.editor.editing.view;this._elementReplacer.restore(),t.detachDomRoot(e.editable.name),e.destroy(),_get3(_getPrototypeOf(n.prototype),"destroy",this).call(this)}},{key:"_initToolbar",value:function(){var e=this.editor,t=this.view,n=e.editing.view;t.stickyPanel.bind("isActive").to(this.focusTracker,"isFocused"),t.stickyPanel.limiterElement=t.element,this._toolbarConfig.viewportTopOffset&&(t.stickyPanel.viewportTopOffset=this._toolbarConfig.viewportTopOffset),t.toolbar.fillFromConfig(this._toolbarConfig,this.componentFactory),function(e){var t=e.origin,n=e.originKeystrokeHandler,r=e.originFocusTracker,i=e.toolbar,o=e.beforeFocus,a=e.afterBlur;r.add(i.element),n.set("Alt+F10",(function(e,t){r.isFocused&&!i.focusTracker.isFocused&&(o&&o(),i.focus(),t())})),i.keystrokes.set("Esc",(function(e,n){i.focusTracker.isFocused&&(t.focus(),a&&a(),n())}))}({origin:n,originFocusTracker:this.focusTracker,originKeystrokeHandler:e.keystrokes,toolbar:t.toolbar})}},{key:"_initPlaceholder",value:function(){var e=this.editor,t=e.editing.view,n=t.document.getRoot(),r=e.sourceElement,i=e.config.get("placeholder")||r&&"textarea"===r.tagName.toLowerCase()&&r.getAttribute("placeholder");i&&Hl({view:t,element:n,text:i,isDirectHost:!1,keepOnFocus:!0})}}]),n}(ps);n(222);var uu=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return _classCallCheck(this,n),(i=t.call(this,e)).stickyPanel=new Bl(e),i.toolbar=new al(e,{shouldGroupWhenFull:o.shouldToolbarGroupWhenFull}),i.editable=new kl(e,r),i}return _createClass(n,[{key:"render",value:function(){_get3(_getPrototypeOf(n.prototype),"render",this).call(this),this.stickyPanel.content.add(this.toolbar),this.top.add(this.stickyPanel),this.main.add(this.editable)}}]),n}(yl),du=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var i;_classCallCheck(this,n),i=t.call(this,r),qe(e)&&(i.sourceElement=e),i.model.document.createRoot();var o=!i.config.get("toolbar.shouldNotGroupWhenFull"),a=new uu(i.locale,i.editing.view,{shouldToolbarGroupWhenFull:o});return i.ui=new lu(_assertThisInitialized(i),a),function(e){if(!Object(Ft.a)(e.updateSourceElement))throw new Ke.default("attachtoform-missing-elementapi-interface",e);var t=e.sourceElement;if(t&&"textarea"===t.tagName.toLowerCase()&&t.form){var n,r=t.form,i=function(){return e.updateSourceElement()};Object(Ft.a)(r.submit)&&(n=r.submit,r.submit=function(){i(),n.apply(r)}),r.addEventListener("submit",i),e.on("destroy",(function(){r.removeEventListener("submit",i),n&&(r.submit=n)}))}}(_assertThisInitialized(i)),i}return _createClass(n,[{key:"destroy",value:function(){return this.sourceElement&&this.updateSourceElement(),this.ui.destroy(),_get3(_getPrototypeOf(n.prototype),"destroy",this).call(this)}}],[{key:"create",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((function(r){var i=new t(e,n);r(i.initPlugins().then((function(){return i.ui.init(qe(e)?e:null)})).then((function(){if(!qe(e)&&n.initialData)throw new Ke.default("editor-create-initial-data",null);var t=void 0!==n.initialData?n.initialData:function(e){return qe(e)?function(e){return e instanceof HTMLTextAreaElement?e.value:e.innerHTML}(e):e}(e);return i.data.init(t)})).then((function(){return i.fire("ready")})).then((function(){return i})))}))}}]),n}(ds);Object(u.default)(du,vs),Object(u.default)(du,gs);var fu=function(){function e(t){_classCallCheck(this,e),this.files=function(e){var t=e.files?Array.from(e.files):[],n=e.items?Array.from(e.items):[];return t.length?t:n.filter((function(e){return"file"===e.kind})).map((function(e){return e.getAsFile()}))}(t),this._native=t}return _createClass(e,[{key:"types",get:function(){return this._native.types}},{key:"getData",value:function(e){return this._native.getData(e)}},{key:"setData",value:function(e,t){this._native.setData(e,t)}},{key:"effectAllowed",get:function(){return this._native.effectAllowed},set:function(e){this._native.effectAllowed=e}},{key:"dropEffect",get:function(){return this._native.dropEffect},set:function(e){this._native.dropEffect=e}},{key:"isCanceled",get:function(){return"none"==this._native.dropEffect||!!this._native.mozUserCancelled}}]),e}(),hu=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;_classCallCheck(this,n);var i=(r=t.call(this,e)).document;function o(e){return function(t,n){n.preventDefault();var r=n.dropRange?[n.dropRange]:null,o=new cn.a(i,e);i.fire(o,{dataTransfer:n.dataTransfer,method:t.name,targetRanges:r,target:n.target}),o.stop.called&&n.stopPropagation()}}return r.domEventType=["paste","copy","cut","drop","dragover","dragstart","dragend","dragenter","dragleave"],r.listenTo(i,"paste",o("clipboardInput"),{priority:"low"}),r.listenTo(i,"drop",o("clipboardInput"),{priority:"low"}),r.listenTo(i,"dragover",o("dragging"),{priority:"low"}),r}return _createClass(n,[{key:"onDomEvent",value:function(e){var t={dataTransfer:new fu(e.clipboardData?e.clipboardData:e.dataTransfer)};"drop"!=e.type&&"dragover"!=e.type||(t.dropRange=function(e,t){var n,r=t.target.ownerDocument,i=t.clientX,o=t.clientY;return r.caretRangeFromPoint&&r.caretRangeFromPoint(i,o)?n=r.caretRangeFromPoint(i,o):t.rangeParent&&((n=r.createRange()).setStart(t.rangeParent,t.rangeOffset),n.collapse(!0)),n?e.domConverter.domRangeToView(n):null}(this.view,e)),this.fire(e.type,e,t)}}]),n}(Zr),pu=["figcaption","li"],vu=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"init",value:function(){this.editor.editing.view.addObserver(hu),this._setupPasteDrop(),this._setupCopyCut()}},{key:"_setupPasteDrop",value:function(){var e=this,t=this.editor,n=t.model,r=t.editing.view,i=r.document;this.listenTo(i,"clipboardInput",(function(e){t.isReadOnly&&e.stop()}),{priority:"highest"}),this.listenTo(i,"clipboardInput",(function(t,n){var i=n.dataTransfer,o=n.content||"";o||(i.getData("text/html")?o=function(e){return e.replace(/<span(?: class="Apple-converted-space"|)>(\s+)<\/span>/g,(function(e,t){return 1==t.length?" ":t}))}(i.getData("text/html")):i.getData("text/plain")&&(o=function(e){return((e=e.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r?\n\r?\n/g,"</p><p>").replace(/\r?\n/g,"<br>").replace(/^\s/,"&nbsp;").replace(/\s$/,"&nbsp;").replace(/\s\s/g," &nbsp;")).includes("</p><p>")||e.includes("<br>"))&&(e="<p>".concat(e,"</p>")),e}(i.getData("text/plain"))),o=e.editor.data.htmlProcessor.toView(o));var a=new cn.a(e,"inputTransformation");e.fire(a,{content:o,dataTransfer:i,targetRanges:n.targetRanges,method:n.method}),a.stop.called&&t.stop(),r.scrollToTheSelection()}),{priority:"low"}),this.listenTo(this,"inputTransformation",(function(t,r){if(!r.content.isEmpty){var i=e.editor.data.toModel(r.content,"$clipboardHolder");0!=i.childCount&&(t.stop(),n.change((function(){e.fire("contentInsertion",{content:i,method:r.method,dataTransfer:r.dataTransfer,targetRanges:r.targetRanges})})))}}),{priority:"low"}),this.listenTo(this,"contentInsertion",(function(e,t){t.resultRange=n.insertContent(t.content)}),{priority:"low"})}},{key:"_setupCopyCut",value:function(){var e=this,t=this.editor,n=t.model.document,r=t.editing.view.document;function i(e,i){var o=i.dataTransfer;i.preventDefault();var a=t.data.toView(t.model.getSelectedContent(n.selection));r.fire("clipboardOutput",{dataTransfer:o,content:a,method:e.name})}this.listenTo(r,"copy",i,{priority:"low"}),this.listenTo(r,"cut",(function(e,n){t.isReadOnly?n.preventDefault():i(e,n)}),{priority:"low"}),this.listenTo(r,"clipboardOutput",(function(r,i){i.content.isEmpty||(i.dataTransfer.setData("text/html",e.editor.data.htmlProcessor.toData(i.content)),i.dataTransfer.setData("text/plain",function e(t){var n="";if(t.is("$text")||t.is("$textProxy"))n=t.data;else if(t.is("element","img")&&t.hasAttribute("alt"))n=t.getAttribute("alt");else if(t.is("element","br"))n="\n";else{var r,i=null,o=_createForOfIteratorHelper(t.getChildren());try{for(o.s();!(r=o.n()).done;){var a=r.value,s=e(a);i&&(i.is("containerElement")||a.is("containerElement"))&&(pu.includes(i.name)||pu.includes(a.name)?n+="\n":n+="\n\n"),n+=s,i=a}}catch(c){o.e(c)}finally{o.f()}}return n}(i.content))),"cut"==i.method&&t.model.deleteContent(n.selection)}),{priority:"low"})}}],[{key:"pluginName",get:function(){return"ClipboardPipeline"}}]),n}(d);function gu(e,t){var n,r,i;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:n=_createForOfIteratorHelper(t),o.prev=1,n.s();case 3:if((r=n.n()).done){o.next=11;break}if(i=r.value,o.t0=i&&e.getAttributeProperties(i[0]).copyOnEnter,!o.t0){o.next=9;break}return o.next=9,i;case 9:o.next=3;break;case 11:o.next=16;break;case 13:o.prev=13,o.t1=o.catch(1),n.e(o.t1);case 16:return o.prev=16,n.f(),o.finish(16);case 19:case"end":return o.stop()}}),o,null,[[1,13,16,19]])}var mu=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"execute",value:function(){var e=this,t=this.editor.model,n=t.document;t.change((function(r){!function(e,t,n,r){var i=n.isCollapsed,o=n.getFirstRange(),a=o.start.parent,s=o.end.parent;if(r.isLimit(a)||r.isLimit(s))i||a!=s||e.deleteContent(n);else if(i){var c=gu(t.model.schema,n.getAttributes());yu(t,o.start),t.setSelectionAttribute(c)}else{var l=!(o.start.isAtStart&&o.end.isAtEnd),u=a==s;e.deleteContent(n,{leaveUnmerged:l}),l&&(u?yu(t,n.focus):t.setSelection(s,0))}}(e.editor.model,r,n.selection,t.schema),e.fire("afterExecute",{writer:r})}))}}]),n}(h);function yu(e,t){e.split(t),e.setSelection(t.parent.nextSibling,0)}var ku=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;_classCallCheck(this,n);var i=(r=t.call(this,e)).document;return i.on("keydown",(function(e,t){if(r.isEnabled&&t.keyCode==On.enter){var n=new ln(i,"enter",i.selection.getFirstRange());i.fire(n,new Qr(i,t.domEvent,{isSoft:t.shiftKey})),n.stop.called&&e.stop()}})),r}return _createClass(n,[{key:"observe",value:function(){}}]),n}(Mr),_u=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"init",value:function(){var e=this.editor,t=e.editing.view,n=t.document;t.addObserver(ku),e.commands.add("enter",new mu(e)),this.listenTo(n,"enter",(function(n,r){r.preventDefault(),r.isSoft||(e.execute("enter"),t.scrollToTheSelection())}),{priority:"low"})}}],[{key:"pluginName",get:function(){return"Enter"}}]),n}(d),bu=function(){function e(t){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20;_classCallCheck(this,e),this.model=t,this.size=0,this.limit=r,this.isLocked=!1,this._changeCallback=function(e,t){"transparent"!=t.type&&t!==n._batch&&n._reset(!0)},this._selectionChangeCallback=function(){n._reset()},this.model.document.on("change",this._changeCallback),this.model.document.selection.on("change:range",this._selectionChangeCallback),this.model.document.selection.on("change:attribute",this._selectionChangeCallback)}return _createClass(e,[{key:"batch",get:function(){return this._batch||(this._batch=this.model.createBatch()),this._batch}},{key:"input",value:function(e){this.size+=e,this.size>=this.limit&&this._reset(!0)}},{key:"lock",value:function(){this.isLocked=!0}},{key:"unlock",value:function(){this.isLocked=!1}},{key:"destroy",value:function(){this.model.document.off("change",this._changeCallback),this.model.document.selection.off("change:range",this._selectionChangeCallback),this.model.document.selection.off("change:attribute",this._selectionChangeCallback)}},{key:"_reset",value:function(e){this.isLocked&&!e||(this._batch=null,this.size=0)}}]),e}(),wu=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var i;return _classCallCheck(this,n),(i=t.call(this,e)).direction=r,i._buffer=new bu(e.model,e.config.get("typing.undoStep")),i}return _createClass(n,[{key:"buffer",get:function(){return this._buffer}},{key:"execute",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this.editor.model,r=n.document;n.enqueueChange(this._buffer.batch,(function(i){e._buffer.lock();var o=i.createSelection(t.selection||r.selection),a=t.sequence||1,s=o.isCollapsed;if(o.isCollapsed&&n.modifySelection(o,{direction:e.direction,unit:t.unit}),e._shouldEntireContentBeReplacedWithParagraph(a))e._replaceEntireContentWithParagraph(i);else if(e._shouldReplaceFirstBlockWithParagraph(o,a))e.editor.execute("paragraph",{selection:o});else if(!o.isCollapsed){var c=0;o.getFirstRange().getMinimalFlatRanges().forEach((function(e){c+=on(e.getWalker({singleCharacters:!0,ignoreElementEnd:!0,shallow:!0}))})),n.deleteContent(o,{doNotResetEntireContent:s,direction:e.direction}),e._buffer.input(c),i.setSelection(o),e._buffer.unlock()}}))}},{key:"_shouldEntireContentBeReplacedWithParagraph",value:function(e){if(e>1)return!1;var t=this.editor.model,n=t.document.selection,r=t.schema.getLimitElement(n);if(!n.isCollapsed||!n.containsEntireContent(r))return!1;if(!t.schema.checkChild(r,"paragraph"))return!1;var i=r.getChild(0);return!i||"paragraph"!==i.name}},{key:"_replaceEntireContentWithParagraph",value:function(e){var t=this.editor.model,n=t.schema.getLimitElement(t.document.selection),r=e.createElement("paragraph");e.remove(e.createRangeIn(n)),e.insert(r,n),e.setSelection(r,0)}},{key:"_shouldReplaceFirstBlockWithParagraph",value:function(e,t){var n=this.editor.model;if(t>1||"backward"!=this.direction)return!1;if(!e.isCollapsed)return!1;var r=e.getFirstPosition(),i=n.schema.getLimitElement(r),o=i.getChild(0);return r.parent==o&&!!e.containsEntireContent(o)&&!!n.schema.checkChild(i,"paragraph")&&"paragraph"!=o.name}}]),n}(h),xu=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;_classCallCheck(this,n),r=t.call(this,e);var i=e.document,o=0;function a(e,t,n){var r=new ln(i,"delete",i.selection.getFirstRange());i.fire(r,new Qr(i,t,n)),r.stop.called&&e.stop()}return i.on("keyup",(function(e,t){t.keyCode!=On.delete&&t.keyCode!=On.backspace||(o=0)})),i.on("keydown",(function(e,t){var n={};if(t.keyCode==On.delete)n.direction="forward",n.unit="character";else{if(t.keyCode!=On.backspace)return;n.direction="backward",n.unit="codePoint"}n.unit=(xn?t.altKey:t.ctrlKey)?"word":n.unit,n.sequence=++o,a(e,t.domEvent,n)})),An&&i.on("beforeinput",(function(t,n){if("deleteContentBackward"==n.domEvent.inputType){var r={unit:"codepoint",direction:"backward",sequence:1},i=n.domTarget.ownerDocument.defaultView.getSelection();i.anchorNode==i.focusNode&&i.anchorOffset+1!=i.focusOffset&&(r.selectionToRemove=e.domConverter.domSelectionToView(i)),a(t,n.domEvent,r)}})),r}return _createClass(n,[{key:"observe",value:function(){}}]),n}(Mr),Cu=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"init",value:function(){var e=this.editor,t=e.editing.view,n=t.document;t.addObserver(xu);var r=new wu(e,"forward");if(e.commands.add("deleteForward",r),e.commands.add("forwardDelete",r),e.commands.add("delete",new wu(e,"backward")),this.listenTo(n,"delete",(function(n,r){var i={unit:r.unit,sequence:r.sequence};if(r.selectionToRemove){var o,a=e.model.createSelection(),s=[],c=_createForOfIteratorHelper(r.selectionToRemove.getRanges());try{for(c.s();!(o=c.n()).done;){var l=o.value;s.push(e.editing.mapper.toModelRange(l))}}catch(u){c.e(u)}finally{c.f()}a.setTo(s),i.selection=a}e.execute("forward"==r.direction?"deleteForward":"delete",i),r.preventDefault(),t.scrollToTheSelection()}),{priority:"low"}),An){var i=null;this.listenTo(n,"delete",(function(e,t){var n=t.domTarget.ownerDocument.defaultView.getSelection();i={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}}),{priority:"lowest"}),this.listenTo(n,"keyup",(function(e,t){if(i){var n=t.domTarget.ownerDocument.defaultView.getSelection();n.collapse(i.anchorNode,i.anchorOffset),n.extend(i.focusNode,i.focusOffset),i=null}}))}}}],[{key:"pluginName",get:function(){return"Delete"}}]),n}(d),Tu=function(){function e(){_classCallCheck(this,e),this._stack=[]}return _createClass(e,[{key:"add",value:function(e,t){var n=this._stack,r=n[0];this._insertDescriptor(e);var i=n[0];r===i||Au(r,i)||this.fire("change:top",{oldDescriptor:r,newDescriptor:i,writer:t})}},{key:"remove",value:function(e,t){var n=this._stack,r=n[0];this._removeDescriptor(e);var i=n[0];r===i||Au(r,i)||this.fire("change:top",{oldDescriptor:r,newDescriptor:i,writer:t})}},{key:"_insertDescriptor",value:function(e){var t=this._stack,n=t.findIndex((function(t){return t.id===e.id}));if(!Au(e,t[n])){n>-1&&t.splice(n,1);for(var r=0;t[r]&&Su(t[r],e);)r++;t.splice(r,0,e)}}},{key:"_removeDescriptor",value:function(e){var t=this._stack,n=t.findIndex((function(t){return t.id===e}));n>-1&&t.splice(n,1)}}]),e}();function Au(e,t){return e&&t&&e.priority==t.priority&&Eu(e.classes)==Eu(t.classes)}function Su(e,t){return e.priority>t.priority||!(e.priority<t.priority)&&Eu(e.classes)>Eu(t.classes)}function Eu(e){return Array.isArray(e)?e.sort().join(","):e}Object(u.default)(Tu,Qe.default);var Iu=n(144),Ou=n.n(Iu),Ru="ck-widget_selected";function Pu(e){return!!e.is("element")&&!!e.getCustomProperty("widget")}function Mu(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e.is("containerElement"))throw new Ke.default("widget-to-widget-wrong-element-type",null,{element:e});return t.setAttribute("contenteditable","false",e),t.addClass("ck-widget",e),t.setCustomProperty("widget",!0,e),e.getFillerOffset=Hu,n.label&&function(e,t,n){n.setCustomProperty("widgetLabel",t,e)}(e,n.label,t),n.hasSelectionHandle&&function(e,t){var n=t.createUIElement("div",{class:"ck ck-widget__selection-handle"},(function(e){var t=this.toDomElement(e),n=new Vc;return n.set("content",Ou.a),n.render(),t.appendChild(n.element),t}));t.insert(t.createPositionAt(e,0),n),t.addClass(["ck-widget_with-selection-handle"],e)}(e,t),Fu(e,t,Nu,Du),e}function Nu(e,t,n){if(t.classes&&n.addClass(Xe(t.classes),e),t.attributes)for(var r in t.attributes)n.setAttribute(r,t.attributes[r],e)}function Du(e,t,n){if(t.classes&&n.removeClass(Xe(t.classes),e),t.attributes)for(var r in t.attributes)n.removeAttribute(r,e)}function Fu(e,t,n,r){var i=new Tu;i.on("change:top",(function(t,i){i.oldDescriptor&&r(e,i.oldDescriptor,i.writer),i.newDescriptor&&n(e,i.newDescriptor,i.writer)})),t.setCustomProperty("addHighlight",(function(e,t,n){return i.add(t,n)}),e),t.setCustomProperty("removeHighlight",(function(e,t,n){return i.remove(t,n)}),e)}function ju(e){var t=e.getCustomProperty("widgetLabel");return t?"function"==typeof t?t():t:""}function Lu(e,t){return t.addClass(["ck-editor__editable","ck-editor__nested-editable"],e),t.setAttribute("contenteditable",e.isReadOnly?"false":"true",e),e.on("change:isReadOnly",(function(n,r,i){t.setAttribute("contenteditable",i?"false":"true",e)})),e.on("change:isFocused",(function(n,r,i){i?t.addClass("ck-editor__nested-editable_focused",e):t.removeClass("ck-editor__nested-editable_focused",e)})),e}function Vu(e,t){var n=e.getSelectedElement();if(n){var r=qu(e);if(r)return t.createPositionAt(n,r);if(t.schema.isBlock(n))return t.createPositionAfter(n)}var i=e.getSelectedBlocks().next().value;if(i){if(i.isEmpty)return t.createPositionAt(i,0);var o=t.createPositionAfter(i);return e.focus.isTouching(o)?o:t.createPositionBefore(i)}return e.focus}function Bu(e,t){var n=e.getSelectedElement();return!!n&&t.isObject(n)}function zu(e,t){var n=new bi(mr.window),r=n.getIntersection(e),i=t.height+Sl.arrowVerticalOffset;if(e.top-i>n.top||e.bottom+i<n.bottom)return null;var o=r||e,a=o.left+o.width/2-t.width/2;return{top:Math.max(e.top,0)+Sl.arrowVerticalOffset,left:a,name:"arrow_n"}}function Hu(){return null}var Uu="widget-type-around";function Wu(e,t,n){return e&&Pu(e)&&!n.isInline(t)}function qu(e){return e.getAttribute(Uu)}for(var Yu=[Pn("arrowUp"),Pn("arrowRight"),Pn("arrowDown"),Pn("arrowLeft"),9,16,17,18,19,20,27,33,34,35,36,45,91,93,144,145,173,174,175,176,177,178,179,255],Gu=112;Gu<=135;Gu++)Yu.push(Gu);function Ju(e){return!(!e.ctrlKey&&!e.metaKey)||Yu.includes(e.keyCode)}var $u=n(145),Ku=n.n($u);n(224);var Qu=["before","after"],Zu=(new DOMParser).parseFromString(Ku.a,"image/svg+xml").firstChild,Xu="ck-widget__type-around_disabled",ed=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this,e))._currentFakeCaretModelElement=null,r}return _createClass(n,[{key:"init",value:function(){var e=this.editor,t=e.editing.view;this.on("change:isEnabled",(function(n,r,i){t.change((function(e){var n,r=_createForOfIteratorHelper(t.document.roots);try{for(r.s();!(n=r.n()).done;){var o=n.value;i?e.removeClass(Xu,o):e.addClass(Xu,o)}}catch(a){r.e(a)}finally{r.f()}})),i||e.model.change((function(e){e.removeSelectionAttribute(Uu)}))})),this._enableTypeAroundUIInjection(),this._enableInsertingParagraphsOnButtonClick(),this._enableInsertingParagraphsOnEnterKeypress(),this._enableInsertingParagraphsOnTypingKeystroke(),this._enableTypeAroundFakeCaretActivationUsingKeyboardArrows(),this._enableDeleteIntegration(),this._enableInsertContentIntegration()}},{key:"destroy",value:function(){this._currentFakeCaretModelElement=null}},{key:"_insertParagraph",value:function(e,t){var n=this.editor,r=n.editing.view;n.execute("insertParagraph",{position:n.model.createPositionAt(e,t)}),r.focus(),r.scrollToTheSelection()}},{key:"_listenToIfEnabled",value:function(e,t,n,r){var i=this;this.listenTo(e,t,(function(){i.isEnabled&&n.apply(void 0,arguments)}),r)}},{key:"_insertParagraphAccordingToFakeCaretPosition",value:function(){var e=this.editor.model.document.selection,t=qu(e);if(!t)return!1;var n=e.getSelectedElement();return this._insertParagraph(n,t),!0}},{key:"_enableTypeAroundUIInjection",value:function(){var e=this.editor,t=e.model.schema,n=e.locale.t,r={before:n("Insert paragraph before block"),after:n("Insert paragraph after block")};e.editing.downcastDispatcher.on("insert",(function(e,n,i){var o=i.mapper.toViewElement(n.item);Wu(o,n.item,t)&&function(e,t,n){var r=e.createUIElement("div",{class:"ck ck-reset_all ck-widget__type-around"},(function(e){var n=this.toDomElement(e);return function(e,t){var n,r=_createForOfIteratorHelper(Qu);try{for(r.s();!(n=r.n()).done;){var i=n.value,o=new _c({tag:"div",attributes:{class:["ck","ck-widget__type-around__button","ck-widget__type-around__button_"+i],title:t[i]},children:[e.ownerDocument.importNode(Zu,!0)]});e.appendChild(o.render())}}catch(a){r.e(a)}finally{r.f()}}(n,t),function(e){var t=new _c({tag:"div",attributes:{class:["ck","ck-widget__type-around__fake-caret"]}});e.appendChild(t.render())}(n),n}));e.insert(e.createPositionAt(n,"end"),r)}(i.writer,r,o)}),{priority:"low"})}},{key:"_enableTypeAroundFakeCaretActivationUsingKeyboardArrows",value:function(){var e=this,t=this.editor,n=t.model,r=n.document.selection,i=n.schema;function o(e){return"ck-widget_type-around_show-fake-caret_"+e}this._listenToIfEnabled(t.editing.view.document,"arrowKey",(function(t,n){e._handleArrowKeyPress(t,n)}),{context:[Pu,"$text"],priority:"high"}),this._listenToIfEnabled(r,"change:range",(function(e,n){n.directChange&&t.model.change((function(e){e.removeSelectionAttribute(Uu)}))})),this._listenToIfEnabled(n.document,"change:data",(function(){var e=r.getSelectedElement();e&&Wu(t.editing.mapper.toViewElement(e),e,i)||t.model.change((function(e){e.removeSelectionAttribute(Uu)}))})),this._listenToIfEnabled(t.editing.downcastDispatcher,"selection",(function(t,n,r){var a=r.writer;if(e._currentFakeCaretModelElement){var s=r.mapper.toViewElement(e._currentFakeCaretModelElement);s&&(a.removeClass(Qu.map(o),s),e._currentFakeCaretModelElement=null)}var c=n.selection.getSelectedElement();if(c){var l=r.mapper.toViewElement(c);if(Wu(l,c,i)){var u=qu(n.selection);u&&(a.addClass(o(u),l),e._currentFakeCaretModelElement=c)}}})),this._listenToIfEnabled(t.ui.focusTracker,"change:isFocused",(function(e,n,r){r||t.model.change((function(e){e.removeSelectionAttribute(Uu)}))}))}},{key:"_handleArrowKeyPress",value:function(e,t){var n,r=this.editor,i=r.model,o=i.document.selection,a=i.schema,s=r.editing.view,c=Fn(t.keyCode,r.locale.contentLanguageDirection),l=s.document.selection.getSelectedElement();Wu(l,r.editing.mapper.toModelElement(l),a)?n=this._handleArrowKeyPressOnSelectedWidget(c):o.isCollapsed&&(n=this._handleArrowKeyPressWhenSelectionNextToAWidget(c)),n&&(t.preventDefault(),e.stop())}},{key:"_handleArrowKeyPressOnSelectedWidget",value:function(e){var t=this.editor.model,n=qu(t.document.selection);return t.change((function(t){return n?n!==(e?"after":"before")&&(t.removeSelectionAttribute(Uu),!0):(t.setSelectionAttribute(Uu,e?"after":"before"),!0)}))}},{key:"_handleArrowKeyPressWhenSelectionNextToAWidget",value:function(e){var t=this.editor,n=t.model,r=n.schema,i=t.plugins.get("Widget"),o=i._getObjectElementNextToSelection(e);return!!Wu(t.editing.mapper.toViewElement(o),o,r)&&(n.change((function(t){i._setSelectionOverElement(o),t.setSelectionAttribute(Uu,e?"before":"after")})),!0)}},{key:"_enableInsertingParagraphsOnButtonClick",value:function(){var e=this,t=this.editor,n=t.editing.view;this._listenToIfEnabled(n.document,"mousedown",(function(r,i){var o=function(e){return e.closest(".ck-widget__type-around__button")}(i.domTarget);if(o){var a=function(e){return e.classList.contains("ck-widget__type-around__button_before")?"before":"after"}(o),s=function(e,t){var n=e.closest(".ck-widget");return t.mapDomToView(n)}(o,n.domConverter),c=t.editing.mapper.toModelElement(s);e._insertParagraph(c,a),i.preventDefault(),r.stop()}}))}},{key:"_enableInsertingParagraphsOnEnterKeypress",value:function(){var e=this,t=this.editor,n=t.model.document.selection;this._listenToIfEnabled(t.editing.view.document,"enter",(function(r,i){if("atTarget"==r.eventPhase){var o,a=n.getSelectedElement(),s=t.editing.mapper.toViewElement(a),c=t.model.schema;e._insertParagraphAccordingToFakeCaretPosition()?o=!0:Wu(s,a,c)&&(e._insertParagraph(a,i.isSoft?"before":"after"),o=!0),o&&(i.preventDefault(),r.stop())}}),{context:Pu})}},{key:"_enableInsertingParagraphsOnTypingKeystroke",value:function(){var e=this,t=[On.enter,On.delete,On.backspace];this._listenToIfEnabled(this.editor.editing.view.document,"keydown",(function(n,r){t.includes(r.keyCode)||Ju(r)||e._insertParagraphAccordingToFakeCaretPosition()}),{priority:"high"})}},{key:"_enableDeleteIntegration",value:function(){var e=this.editor,t=e.model,n=t.schema;this._listenToIfEnabled(e.editing.view.document,"delete",(function(r,i){if("atTarget"==r.eventPhase){var o=qu(t.document.selection);if(o){var a=i.direction,s=t.document.selection.getSelectedElement(),c="forward"==a;if("before"===o===c)e.execute("delete",{selection:t.createSelection(s,"on")});else{var l=n.getNearestSelectionRange(t.createPositionAt(s,o),a);if(l)if(l.isCollapsed){var u=t.createSelection(l.start);if(t.modifySelection(u,{direction:a}),u.focus.isEqual(l.start)){var d=function(e,t){var n,r=t,i=_createForOfIteratorHelper(t.getAncestors({parentFirst:!0}));try{for(i.s();!(n=i.n()).done;){var o=n.value;if(o.childCount>1||e.isLimit(o))break;r=o}}catch(a){i.e(a)}finally{i.f()}return r}(n,l.start.parent);t.deleteContent(t.createSelection(d,"on"),{doNotAutoparagraph:!0})}else t.change((function(t){t.setSelection(l),e.execute(c?"deleteForward":"delete")}))}else t.change((function(t){t.setSelection(l),e.execute(c?"deleteForward":"delete")}))}i.preventDefault(),r.stop()}}}),{context:Pu})}},{key:"_enableInsertContentIntegration",value:function(){var e=this.editor.model,t=e.document.selection;this._listenToIfEnabled(this.editor.model,"insertContent",(function(n,r){var i=_slicedToArray(r,2),o=i[0],a=i[1];if(!a||a.is("documentSelection")){var s=qu(t);return s?(n.stop(),e.change((function(n){var r=t.getSelectedElement(),i=e.createPositionAt(r,s),a=n.createSelection(i),c=e.insertContent(o,a);return n.setSelection(a),c}))):void 0}}),{priority:"high"})}}],[{key:"pluginName",get:function(){return"WidgetTypeAround"}},{key:"requires",get:function(){return[_u,Cu]}}]),n}(d);function td(e,t,n){var r,i=e.schema,o="forward"==n?"elementStart":"elementEnd",a=_createForOfIteratorHelper(e.createRangeIn(t.root).getWalker({startPosition:t,direction:n}));try{for(a.s();!(r=a.n()).done;){var s=r.value,c=s.previousPosition,l=s.item,u=s.type;if(i.isLimit(l)&&!i.isInline(l))return c;if(u==o&&i.isBlock(l))return null}}catch(d){a.e(d)}finally{a.f()}return null}function nd(e,t,n){var r="backward"==n?t.end:t.start;if(e.checkChild(r,"$text"))return r;var i,o=_createForOfIteratorHelper(t.getWalker({direction:n}));try{for(o.s();!(i=o.n()).done;){var a=i.value.nextPosition;if(e.checkChild(a,"$text"))return a}}catch(s){o.e(s)}finally{o.f()}}n(226);var rd=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"init",value:function(){var e=this,t=this.editor.editing.view,n=t.document;this._previouslySelected=new Set,this.editor.editing.downcastDispatcher.on("selection",(function(t,n,r){e._clearPreviouslySelectedWidgets(r.writer);var i,o=r.writer,a=o.document.selection,s=a.getSelectedElement(),c=null,l=_createForOfIteratorHelper(a.getRanges());try{for(l.s();!(i=l.n()).done;){var u,d=_createForOfIteratorHelper(i.value);try{for(d.s();!(u=d.n()).done;){var f=u.value.item;Pu(f)&&!id(f,c)&&(o.addClass(Ru,f),e._previouslySelected.add(f),c=f,f==s&&o.setSelection(a.getRanges(),{fake:!0,label:ju(s)}))}}catch(h){d.e(h)}finally{d.f()}}}catch(h){l.e(h)}finally{l.f()}}),{priority:"low"}),t.addObserver(ou),this.listenTo(n,"mousedown",(function(){return e._onMousedown.apply(e,arguments)})),this.listenTo(n,"arrowKey",(function(){e._handleSelectionChangeOnArrowKeyPress.apply(e,arguments)}),{context:[Pu,"$text"]}),this.listenTo(n,"arrowKey",(function(){e._preventDefaultOnArrowKeyPress.apply(e,arguments)}),{context:"$root"}),this.listenTo(n,"arrowKey",function(e){var t=e.model;return function(n,r){var i=r.keyCode==On.arrowdown,o=r.shiftKey,a=t.document.selection;if(r.keyCode==On.arrowup||i){var s=i;if(!o||!function(e,t){return!e.isCollapsed&&e.isBackward==t}(a,s)){var c=function(e,t,n){var r=e.model;if(n){var i=t.isCollapsed?t.focus:t.getLastPosition(),o=td(r,i,"forward");if(!o)return null;var a=r.createRange(i,o),s=nd(r.schema,a,"backward");return s&&i.isBefore(s)?r.createRange(i,s):null}var c=t.isCollapsed?t.focus:t.getFirstPosition(),l=td(r,c,"backward");if(!l)return null;var u=r.createRange(l,c),d=nd(r.schema,u,"forward");return d&&c.isAfter(d)?r.createRange(d,c):null}(e,a,s);c&&!c.isCollapsed&&function(e,t,n){var r=e.model,i=e.view.domConverter;if(n){var o=r.createSelection(t.start);r.modifySelection(o),o.focus.isAtEnd||t.start.isEqual(o.focus)||(t=r.createRange(o.focus,t.end))}var a,s,c=e.mapper.toViewRange(t),l=i.viewRangeToDom(c),u=_createForOfIteratorHelper(bi.getDomRangeRects(l));try{for(u.s();!(s=u.n()).done;){var d=s.value;if(void 0!==a){if(Math.round(d.top)>=a)return!1;a=Math.max(a,Math.round(d.bottom))}else a=Math.round(d.bottom)}}catch(f){u.e(f)}finally{u.f()}return!0}(e,c,s)&&(t.change((function(e){var n=s?c.end:c.start;if(o){var r=t.createSelection(a.anchor);r.setFocus(n),e.setSelection(r)}else e.setSelection(n)})),n.stop(),r.preventDefault(),r.stopPropagation())}}}}(this.editor.editing),{context:"$text"}),this.listenTo(n,"delete",(function(t,n){e._handleDelete("forward"==n.direction)&&(n.preventDefault(),t.stop())}),{context:"$root"})}},{key:"_onMousedown",value:function(e,t){var n=this.editor,r=n.editing.view,i=r.document,o=t.target;if(function(e){for(;e;){if(e.is("editableElement")&&!e.is("rootElement"))return!0;if(Pu(e))return!1;e=e.parent}return!1}(o)){if((Tn||Cn)&&t.domEvent.detail>=3){var a=n.editing.mapper,s=o.is("attributeElement")?o.findAncestor((function(e){return!e.is("attributeElement")})):o,c=a.toModelElement(s);t.preventDefault(),this.editor.model.change((function(e){e.setSelection(c,"in")}))}}else if(Pu(o)||(o=o.findAncestor(Pu))){An&&t.preventDefault(),i.isFocused||r.focus();var l=n.editing.mapper.toModelElement(o);this._setSelectionOverElement(l)}}},{key:"_handleSelectionChangeOnArrowKeyPress",value:function(e,t){var n=t.keyCode,r=this.editor.model,i=r.schema,o=r.document.selection,a=o.getSelectedElement(),s=Fn(n,this.editor.locale.contentLanguageDirection);if(a&&i.isObject(a)){var c=s?o.getLastPosition():o.getFirstPosition(),l=i.getNearestSelectionRange(c,s?"forward":"backward");l&&(r.change((function(e){e.setSelection(l)})),t.preventDefault(),e.stop())}else if(o.isCollapsed){var u=this._getObjectElementNextToSelection(s);u&&i.isObject(u)&&(this._setSelectionOverElement(u),t.preventDefault(),e.stop())}}},{key:"_preventDefaultOnArrowKeyPress",value:function(e,t){var n=this.editor.model,r=n.schema,i=n.document.selection.getSelectedElement();i&&r.isObject(i)&&(t.preventDefault(),e.stop())}},{key:"_handleDelete",value:function(e){var t=this;if(!this.editor.isReadOnly){var n=this.editor.model.document.selection;if(n.isCollapsed){var r=this._getObjectElementNextToSelection(e);return r?(this.editor.model.change((function(e){for(var i=n.anchor.parent;i.isEmpty;){var o=i;i=o.parent,e.remove(o)}t._setSelectionOverElement(r)})),!0):void 0}}}},{key:"_setSelectionOverElement",value:function(e){this.editor.model.change((function(t){t.setSelection(t.createRangeOn(e))}))}},{key:"_getObjectElementNextToSelection",value:function(e){var t=this.editor.model,n=t.schema,r=t.createSelection(t.document.selection);t.modifySelection(r,{direction:e?"forward":"backward"});var i=e?r.focus.nodeBefore:r.focus.nodeAfter;return i&&n.isObject(i)?i:null}},{key:"_clearPreviouslySelectedWidgets",value:function(e){var t,n=_createForOfIteratorHelper(this._previouslySelected);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.removeClass(Ru,r)}}catch(i){n.e(i)}finally{n.f()}this._previouslySelected.clear()}}],[{key:"pluginName",get:function(){return"Widget"}},{key:"requires",get:function(){return[ed,Cu]}}]),n}(d);function id(e,t){return!!t&&Array.from(e.getAncestors()).includes(t)}var od=function(e,t,n){var r=!0,i=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return Object(Ee.a)(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),ui(e,t,{leading:r,maxWait:t,trailing:i})};n(228);var ad=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"init",value:function(){var e=this,t=this.editor,n=t.editing.view;this._draggedRange=null,this._draggingUid="",this._draggableElement=null,this._updateDropMarkerThrottled=od((function(t){return e._updateDropMarker(t)}),40),this._removeDropMarkerDelayed=ld((function(){return e._removeDropMarker()}),40),this._clearDraggableAttributesDelayed=ld((function(){return e._clearDraggableAttributes()}),40),n.addObserver(hu),n.addObserver(ou),this._setupDragging(),this._setupContentInsertionIntegration(),this._setupClipboardInputIntegration(),this._setupDropMarker(),this._setupDraggableAttributeHandling(),this.listenTo(t,"change:isReadOnly",(function(t,n,r){r?e.forceDisabled("readOnlyMode"):e.clearForceDisabled("readOnlyMode")})),this.on("change:isEnabled",(function(t,n,r){r||e._finalizeDragging(!1)})),An&&this.forceDisabled("noAndroidSupport")}},{key:"destroy",value:function(){return this._draggedRange&&(this._draggedRange.detach(),this._draggedRange=null),this._updateDropMarkerThrottled.cancel(),this._removeDropMarkerDelayed.cancel(),this._clearDraggableAttributesDelayed.cancel(),_get3(_getPrototypeOf(n.prototype),"destroy",this).call(this)}},{key:"_setupDragging",value:function(){var e=this,t=this.editor,n=t.model,r=n.document,i=t.editing.view,o=i.document;this.listenTo(o,"dragstart",(function(i,a){var s=r.selection;if(a.target&&a.target.is("editableElement"))a.preventDefault();else{var c=a.target?ud(a.target):null;if(c){var l=t.editing.mapper.toModelElement(c);e._draggedRange=po.fromRange(n.createRangeOn(l))}else if(!o.selection.isCollapsed){var u=o.selection.getSelectedElement();u&&Pu(u)||(e._draggedRange=po.fromRange(s.getFirstRange()))}if(e._draggedRange){e._draggingUid=Object(Sr.a)(),a.dataTransfer.effectAllowed=e.isEnabled?"copyMove":"copy",a.dataTransfer.setData("application/ckeditor5-dragging-uid",e._draggingUid);var d=n.createSelection(e._draggedRange.toRange()),f=t.data.toView(n.getSelectedContent(d));o.fire("clipboardOutput",{dataTransfer:a.dataTransfer,content:f,method:i.name}),e.isEnabled||(e._draggedRange.detach(),e._draggedRange=null,e._draggingUid="")}else a.preventDefault()}}),{priority:"low"}),this.listenTo(o,"dragend",(function(t,n){e._finalizeDragging(!n.dataTransfer.isCanceled&&"move"==n.dataTransfer.dropEffect)}),{priority:"low"}),this.listenTo(o,"dragenter",(function(){e.isEnabled&&i.focus()})),this.listenTo(o,"dragleave",(function(){e._removeDropMarkerDelayed()})),this.listenTo(o,"dragging",(function(n,r){if(e.isEnabled){e._removeDropMarkerDelayed.cancel();var i=sd(t,r.targetRanges,r.target);e._draggedRange||(r.dataTransfer.dropEffect="copy"),Cn||("copy"==r.dataTransfer.effectAllowed?r.dataTransfer.dropEffect="copy":["all","copyMove"].includes(r.dataTransfer.effectAllowed)&&(r.dataTransfer.dropEffect="move")),i&&e._updateDropMarkerThrottled(i)}else r.dataTransfer.dropEffect="none"}),{priority:"low"})}},{key:"_setupClipboardInputIntegration",value:function(){var e=this,t=this.editor;this.listenTo(t.editing.view.document,"clipboardInput",(function(n,r){if("drop"==r.method){var i=sd(t,r.targetRanges,r.target);return e._removeDropMarker(),i?(e._draggedRange&&e._draggingUid!=r.dataTransfer.getData("application/ckeditor5-dragging-uid")&&(e._draggedRange.detach(),e._draggedRange=null,e._draggingUid=""),"move"==cd(r.dataTransfer)&&e._draggedRange&&e._draggedRange.containsRange(i,!0)?(e._finalizeDragging(!1),void n.stop()):void(r.targetRanges=[t.editing.mapper.toViewRange(i)])):(e._finalizeDragging(!1),void n.stop())}}),{priority:"high"})}},{key:"_setupContentInsertionIntegration",value:function(){var e=this,t=this.editor.plugins.get(vu);t.on("contentInsertion",(function(t,n){if(e.isEnabled&&"drop"===n.method){var r=n.targetRanges.map((function(t){return e.editor.editing.mapper.toModelRange(t)}));e.editor.model.change((function(e){return e.setSelection(r)}))}}),{priority:"high"}),t.on("contentInsertion",(function(t,n){if(e.isEnabled&&"drop"===n.method){var r="move"==cd(n.dataTransfer);e._finalizeDragging((!n.resultRange||!n.resultRange.isCollapsed)&&r)}}),{priority:"lowest"})}},{key:"_setupDraggableAttributeHandling",value:function(){var e=this,t=this.editor,n=t.editing.view,r=n.document;this.listenTo(r,"mousedown",(function(i,o){if(!An&&o){e._clearDraggableAttributesDelayed.cancel();var a=ud(o.target);if(Sn&&!t.isReadOnly&&!a&&!r.selection.isCollapsed){var s=r.selection.getSelectedElement();s&&Pu(s)||(a=r.selection.editableElement)}a&&(n.change((function(e){e.setAttribute("draggable","true",a)})),e._draggableElement=t.editing.mapper.toModelElement(a))}})),this.listenTo(r,"mouseup",(function(){An||e._clearDraggableAttributesDelayed()}))}},{key:"_clearDraggableAttributes",value:function(){var e=this,t=this.editor.editing;t.view.change((function(n){e._draggableElement&&"$graveyard"!=e._draggableElement.root.rootName&&n.removeAttribute("draggable",t.mapper.toViewElement(e._draggableElement)),e._draggableElement=null}))}},{key:"_setupDropMarker",value:function(){var e=this.editor;e.conversion.for("editingDowncast").markerToHighlight({model:"drop-target",view:{classes:["ck-clipboard-drop-target-range"]}}),e.conversion.for("editingDowncast").markerToElement({model:"drop-target",view:function(t,n){var r=n.writer;if(e.model.schema.checkChild(t.markerRange.start,"$text"))return r.createUIElement("span",{class:"ck ck-clipboard-drop-target-position"},(function(e){var t=this.toDomElement(e);return t.innerHTML="&NoBreak;<span></span>&NoBreak;",t}))}})}},{key:"_updateDropMarker",value:function(e){var t=this.editor,n=t.model.markers;t.model.change((function(t){n.has("drop-target")?n.get("drop-target").getRange().isEqual(e)||t.updateMarker("drop-target",{range:e}):t.addMarker("drop-target",{range:e,usingOperation:!1,affectsData:!1})}))}},{key:"_removeDropMarker",value:function(){var e=this.editor.model;this._removeDropMarkerDelayed.cancel(),this._updateDropMarkerThrottled.cancel(),e.markers.has("drop-target")&&e.change((function(e){e.removeMarker("drop-target")}))}},{key:"_finalizeDragging",value:function(e){var t=this.editor.model;this._removeDropMarker(),this._clearDraggableAttributes(),this._draggingUid="",this._draggedRange&&(e&&this.isEnabled&&t.deleteContent(t.createSelection(this._draggedRange),{doNotAutoparagraph:!0}),this._draggedRange.detach(),this._draggedRange=null)}}],[{key:"pluginName",get:function(){return"DragDrop"}},{key:"requires",get:function(){return[vu,rd]}}]),n}(d);function sd(e,t,n){var r=e.model,i=e.editing.mapper,o=null,a=t?t[0].start:null;if(n.is("uiElement")&&(n=n.parent),o=function(e,t){var n=e.model,r=e.editing.mapper;if(Pu(t))return n.createRangeOn(r.toModelElement(t));if(!t.is("editableElement")){var i=t.findAncestor((function(e){return Pu(e)||e.is("editableElement")}));if(Pu(i))return n.createRangeOn(r.toModelElement(i))}return null}(e,n))return o;var s=function(e,t){var n=e.editing.mapper,r=e.editing.view,i=n.toModelElement(t);if(i)return i;var o=r.createPositionBefore(t),a=n.findMappedViewAncestor(o);return n.toModelElement(a)}(e,n),c=a?i.toModelPosition(a):null;return c?(o=function(e,t,n){var r=e.model;if(!r.schema.checkChild(n,"$block"))return null;var i=r.createPositionAt(n,0),o=t.path.slice(0,i.path.length),a=r.createPositionFromPath(t.root,o).nodeAfter;return a&&r.schema.isObject(a)?r.createRangeOn(a):null}(e,c,s))?o:(o=r.schema.getNearestSelectionRange(c,Cn?"forward":"backward"))||function(e,t){for(var n=e.model;t;){if(n.schema.isObject(t))return n.createRangeOn(t);t=t.parent}}(e,c.parent):function(e,t){var n=e.model,r=n.schema,i=n.createPositionAt(t,0);return r.getNearestSelectionRange(i,"forward")}(e,s)}function cd(e){return Cn?e.dropEffect:["all","copyMove"].includes(e.effectAllowed)?"move":"copy"}function ld(e,t){var n;function r(){for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];r.cancel(),n=setTimeout((function(){return e.apply(void 0,o)}),t)}return r.cancel=function(){clearTimeout(n)},r}function ud(e){if(e.is("editableElement"))return null;if(e.hasClass("ck-widget__selection-handle"))return e.findAncestor(Pu);if(Pu(e))return e;var t=e.findAncestor((function(e){return Pu(e)||e.is("editableElement")}));return Pu(t)?t:null}var dd=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"init",value:function(){var e=this.editor,t=e.model,n=e.editing.view,r=n.document,i=t.document.selection,o=!1;n.addObserver(hu),this.listenTo(r,"keydown",(function(e,t){o=t.shiftKey})),e.plugins.get(vu).on("contentInsertion",(function(e,n){(o||function(e,t){if(e.childCount>1)return!1;var n=e.getChild(0);return!t.isObject(n)&&0==_toConsumableArray(n.getAttributeKeys()).length}(n.content,t.schema))&&t.change((function(e){var r=Array.from(i.getAttributes()).filter((function(e){var n=_slicedToArray(e,1)[0];return t.schema.getAttributeProperties(n).isFormatting}));i.isCollapsed||t.deleteContent(i,{doNotAutoparagraph:!0}),r.push.apply(r,_toConsumableArray(i.getAttributes()));var o,a=_createForOfIteratorHelper(e.createRangeIn(n.content).getItems());try{for(a.s();!(o=a.n()).done;){var s=o.value;s.is("$textProxy")&&e.setAttributes(r,s)}}catch(c){a.e(c)}finally{a.f()}}))}))}}],[{key:"pluginName",get:function(){return"PastePlainText"}},{key:"requires",get:function(){return[vu]}}]),n}(d),fd=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,null,[{key:"pluginName",get:function(){return"Clipboard"}},{key:"requires",get:function(){return[vu,ad,dd]}}]),n}(d),hd=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"execute",value:function(){var e=this,t=this.editor.model,n=t.document;t.change((function(r){!function(e,t,n){var r=n.isCollapsed,i=n.getFirstRange(),o=i.end.parent,a=i.start.parent==o;if(r){var s=gu(e.schema,n.getAttributes());pd(e,t,i.end),t.removeSelectionAttribute(n.getAttributeKeys()),t.setSelectionAttribute(s)}else{var c=!(i.start.isAtStart&&i.end.isAtEnd);e.deleteContent(n,{leaveUnmerged:c}),a?pd(e,t,n.focus):c&&t.setSelection(o,0)}}(t,r,n.selection),e.fire("afterExecute",{writer:r})}))}},{key:"refresh",value:function(){var e=this.editor.model;this.isEnabled=function(e,t){if(t.rangeCount>1)return!1;var n=t.anchor;if(!n||!e.checkChild(n,"softBreak"))return!1;var r=t.getFirstRange(),i=r.start.parent,o=r.end.parent;return!vd(i,e)&&!vd(o,e)||i===o}(e.schema,e.document.selection)}}]),n}(h);function pd(e,t,n){var r=t.createElement("softBreak");e.insertContent(r,n),t.setSelection(r,"after")}function vd(e,t){return!e.is("rootElement")&&(t.isLimit(e)||vd(e.parent,t))}var gd=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"init",value:function(){var e=this.editor,t=e.conversion,n=e.editing.view,r=n.document;e.model.schema.register("softBreak",{allowWhere:"$text",isInline:!0}),t.for("upcast").elementToElement({model:"softBreak",view:"br"}),t.for("downcast").elementToElement({model:"softBreak",view:function(e,t){return t.writer.createEmptyElement("br")}}),n.addObserver(ku),e.commands.add("shiftEnter",new hd(e)),this.listenTo(r,"enter",(function(t,r){r.preventDefault(),r.isSoft&&(e.execute("shiftEnter"),n.scrollToTheSelection())}),{priority:"low"})}}],[{key:"pluginName",get:function(){return"ShiftEnter"}}]),n}(d),md=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"execute",value:function(){var e=this.editor.model,t=e.document.selection,n=e.schema.getLimitElement(t);if(t.containsEntireContent(n)||!yd(e.schema,n))do{if(!(n=n.parent))return}while(!yd(e.schema,n));e.change((function(e){e.setSelection(n,"in")}))}}]),n}(h);function yd(e,t){return e.isLimit(t)&&(e.checkChild(t,"$text")||e.checkChild(t,"paragraph"))}var kd=Mn("Ctrl+A"),_d=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"init",value:function(){var e=this.editor,t=e.editing.view.document;e.commands.add("selectAll",new md(e)),this.listenTo(t,"keydown",(function(t,n){Pn(n)===kd&&(e.execute("selectAll"),n.preventDefault())}))}}],[{key:"pluginName",get:function(){return"SelectAllEditing"}}]),n}(d),bd=n(146),wd=n.n(bd),xd=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"init",value:function(){var e=this,t=this.editor;t.ui.componentFactory.add("selectAll",(function(n){var r=t.commands.get("selectAll"),i=new zc(n);return i.set({label:(0,n.t)("Select all"),icon:wd.a,keystroke:"Ctrl+A",tooltip:!0}),i.bind("isOn","isEnabled").to(r,"value","isEnabled"),e.listenTo(i,"execute",(function(){t.execute("selectAll"),t.editing.view.focus()})),i}))}}],[{key:"pluginName",get:function(){return"SelectAllUI"}}]),n}(d),Cd=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,null,[{key:"requires",get:function(){return[_d,xd]}},{key:"pluginName",get:function(){return"SelectAll"}}]),n}(d),Td=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var i;return _classCallCheck(this,n),(i=t.call(this,e))._buffer=new bu(e.model,r),i._batches=new WeakSet,i}return _createClass(n,[{key:"buffer",get:function(){return this._buffer}},{key:"destroy",value:function(){_get3(_getPrototypeOf(n.prototype),"destroy",this).call(this),this._buffer.destroy()}},{key:"execute",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this.editor.model,r=n.document,i=t.text||"",o=i.length,a=t.range?n.createSelection(t.range):r.selection,s=t.resultRange;n.enqueueChange(this._buffer.batch,(function(t){e._buffer.lock(),e._batches.add(e._buffer.batch),n.deleteContent(a),i&&n.insertContent(t.createText(i,r.selection.getAttributes()),a),s?t.setSelection(s):a.is("documentSelection")||t.setSelection(a),e._buffer.unlock(),e._buffer.input(o)}))}}]),n}(h);function Ad(e){if(e.newChildren.length-e.oldChildren.length==1){var t=function(e,t){var n,r=[],i=0;return e.forEach((function(e){"equal"==e?(o(),i++):"insert"==e?(a("insert")?n.values.push(t[i]):(o(),n={type:"insert",index:i,values:[t[i]]}),i++):a("delete")?n.howMany++:(o(),n={type:"delete",index:i,howMany:1})})),o(),r;function o(){n&&(r.push(n),n=null)}function a(e){return n&&n.type==e}}(ur(e.oldChildren,e.newChildren,Sd),e.newChildren);if(!(t.length>1)){var n=t[0];return n.values[0]&&n.values[0].is("$text")?n:void 0}}}function Sd(e,t){return e&&e.is("$text")&&t&&t.is("$text")?e.data===t.data:e===t}var Ed=function(){function e(t){_classCallCheck(this,e),this.editor=t,this.editing=this.editor.editing}return _createClass(e,[{key:"handle",value:function(e,t){if(function(e){if(0==e.length)return!1;var t,n=_createForOfIteratorHelper(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("children"===r.type&&!Ad(r))return!0}}catch(i){n.e(i)}finally{n.f()}return!1}(e))this._handleContainerChildrenMutations(e,t);else{var n,r=_createForOfIteratorHelper(e);try{for(r.s();!(n=r.n()).done;){var i=n.value;this._handleTextMutation(i,t),this._handleTextNodeInsertion(i)}}catch(o){r.e(o)}finally{r.f()}}}},{key:"_handleContainerChildrenMutations",value:function(e,t){var n=function(e){var t=e.map((function(e){return e.node})).reduce((function(e,t){return e.getCommonAncestor(t,{includeSelf:!0})}));if(t)return t.getAncestors({includeSelf:!0,parentFirst:!0}).find((function(e){return e.is("containerElement")||e.is("rootElement")}))}(e);if(n){var r=this.editor.editing.view.domConverter.mapViewToDom(n),i=new xr(this.editor.editing.view.document),o=this.editor.data.toModel(i.domToView(r)).getChild(0),a=this.editor.editing.mapper.toModelElement(n);if(a){var s=Array.from(o.getChildren()),c=Array.from(a.getChildren()),l=s[s.length-1],u=c[c.length-1],d=l&&l.is("element","softBreak"),f=u&&!u.is("element","softBreak");d&&f&&s.pop();var h=this.editor.model.schema;if(Id(s,h)&&Id(c,h)){var p=s.map((function(e){return e.is("$text")?e.data:"@"})).join("").replace(/\u00A0/g," "),v=c.map((function(e){return e.is("$text")?e.data:"@"})).join("").replace(/\u00A0/g," ");if(v!==p){var g=Od(ur(v,p)),m=g.firstChangeAt,y=g.insertions,k=g.deletions,_=null;t&&(_=this.editing.mapper.toModelRange(t.getFirstRange()));var b=p.substr(m,y),w=this.editor.model.createRange(this.editor.model.createPositionAt(a,m),this.editor.model.createPositionAt(a,m+k));this.editor.execute("input",{text:b,range:w,resultRange:_})}}}}}},{key:"_handleTextMutation",value:function(e,t){if("text"==e.type){var n=e.newText.replace(/\u00A0/g," "),r=e.oldText.replace(/\u00A0/g," ");if(r!==n){var i=Od(ur(r,n)),o=i.firstChangeAt,a=i.insertions,s=i.deletions,c=null;t&&(c=this.editing.mapper.toModelRange(t.getFirstRange()));var l=this.editing.view.createPositionAt(e.node,o),u=this.editing.mapper.toModelPosition(l),d=this.editor.model.createRange(u,u.getShiftedBy(s)),f=n.substr(o,a);this.editor.execute("input",{text:f,range:d,resultRange:c})}}}},{key:"_handleTextNodeInsertion",value:function(e){if("children"==e.type){var t=Ad(e),n=this.editing.view.createPositionAt(e.node,t.index),r=this.editing.mapper.toModelPosition(n);this.editor.execute("input",{text:t.values[0].data.replace(/\u00A0/g," "),range:this.editor.model.createRange(r)})}}}]),e}();function Id(e,t){return e.every((function(e){return t.isInline(e)}))}function Od(e){for(var t=null,n=null,r=0;r<e.length;r++)"equal"!=e[r]&&(t=null===t?r:t,n=r);for(var i=0,o=0,a=t;a<=n;a++)"insert"!=e[a]&&i++,"delete"!=e[a]&&o++;return{insertions:o,deletions:i,firstChangeAt:t}}var Rd=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"init",value:function(){var e=this.editor,t=new Td(e,e.config.get("typing.undoStep")||20);e.commands.add("input",t),function(e){var t=null,n=e.model,r=e.editing.view,i=e.commands.get("input");function o(e){var o=n.document,s=r.document.isComposing,c=t&&t.isEqual(o.selection);t=null,i.isEnabled&&(Ju(e)||o.selection.isCollapsed||s&&229===e.keyCode||!s&&229===e.keyCode&&c||a())}function a(){var e=i.buffer;e.lock();var t=e.batch;i._batches.add(t),n.enqueueChange(t,(function(){n.deleteContent(n.document.selection)})),e.unlock()}r.document.on(An?"beforeinput":"keydown",(function(e,t){return o(t)}),{priority:"lowest"}),r.document.on("compositionstart",(function(){var e=n.document,t=1!==e.selection.rangeCount||e.selection.getFirstRange().isFlat;e.selection.isCollapsed||t||a()}),{priority:"lowest"}),r.document.on("compositionend",(function(){t=n.createSelection(n.document.selection)}),{priority:"lowest"})}(e),function(e){e.editing.view.document.on("mutations",(function(t,n,r){new Ed(e).handle(n,r)}))}(e)}},{key:"isInput",value:function(e){return this.editor.commands.get("input")._batches.has(e)}}],[{key:"pluginName",get:function(){return"Input"}}]),n}(d),Pd=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,null,[{key:"requires",get:function(){return[Rd,Cu]}},{key:"pluginName",get:function(){return"Typing"}}]),n}(d);function Md(e,t){var n=e.start;return{text:Array.from(e.getItems()).reduce((function(e,r){return r.is("$text")||r.is("$textProxy")?e+r.data:(n=t.createPositionAfter(r),"")}),""),range:t.createRange(n,e.end)}}var Nd=function(){function e(t,n){var r=this;_classCallCheck(this,e),this.model=t,this.testCallback=n,this.hasMatch=!1,this.set("isEnabled",!0),this.on("change:isEnabled",(function(){r.isEnabled?r._startListening():(r.stopListening(t.document.selection),r.stopListening(t.document))})),this._startListening()}return _createClass(e,[{key:"_startListening",value:function(){var e=this,t=this.model.document;this.listenTo(t.selection,"change:range",(function(n,r){r.directChange&&(t.selection.isCollapsed?e._evaluateTextBeforeSelection("selection"):e.hasMatch&&(e.fire("unmatched"),e.hasMatch=!1))})),this.listenTo(t,"change:data",(function(t,n){"transparent"!=n.type&&e._evaluateTextBeforeSelection("data",{batch:n})}))}},{key:"_evaluateTextBeforeSelection",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.model,r=n.document.selection,i=n.createRange(n.createPositionAt(r.focus.parent,0),r.focus),o=Md(i,n),a=o.text,s=o.range,c=this.testCallback(a);if(!c&&this.hasMatch&&this.fire("unmatched"),this.hasMatch=!!c,c){var l=Object.assign(t,{text:a,range:s});"object"==typeof c&&Object.assign(l,c),this.fire("matched:"+e,l)}}}]),e}();Object(u.default)(Nd,l.default);var Dd=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this,e)).attributes=new Set,r._overrideUid=null,r}return _createClass(n,[{key:"init",value:function(){var e=this,t=this.editor,n=t.locale,r=t.model.document.selection;this.listenTo(t.editing.view.document,"arrowKey",(function(t,i){if(r.isCollapsed&&!(i.shiftKey||i.altKey||i.ctrlKey)){var o=i.keyCode==On.arrowright,a=i.keyCode==On.arrowleft;if(o||a){var s=n.contentLanguageDirection;!0===("ltr"===s&&o||"rtl"===s&&a?e._handleForwardMovement(i):e._handleBackwardMovement(i))&&t.stop()}}}),{context:"$text",priority:"highest"}),this._isNextGravityRestorationSkipped=!1,this.listenTo(r,"change:range",(function(t,n){e._isNextGravityRestorationSkipped?e._isNextGravityRestorationSkipped=!1:e._isGravityOverridden&&(!n.directChange&&Vd(r.getFirstPosition(),e.attributes)||e._restoreGravity())}))}},{key:"registerAttribute",value:function(e){this.attributes.add(e)}},{key:"_handleForwardMovement",value:function(e){var t=this.attributes,n=this.editor.model.document.selection,r=n.getFirstPosition();return!this._isGravityOverridden&&(!r.isAtStart||!Fd(n,t))&&(Vd(r,t)?(Ld(e),this._overrideGravity(),!0):void 0)}},{key:"_handleBackwardMovement",value:function(e){var t=this.attributes,n=this.editor.model,r=n.document.selection,i=r.getFirstPosition();return this._isGravityOverridden?(Ld(e),this._restoreGravity(),jd(n,t,i),!0):i.isAtStart?!!Fd(r,t)&&(Ld(e),jd(n,t,i),!0):function(e,t){return Vd(e.getShiftedBy(-1),t)}(i,t)?i.isAtEnd&&!Fd(r,t)&&Vd(i,t)?(Ld(e),jd(n,t,i),!0):(this._isNextGravityRestorationSkipped=!0,this._overrideGravity(),!1):void 0}},{key:"_isGravityOverridden",get:function(){return!!this._overrideUid}},{key:"_overrideGravity",value:function(){this._overrideUid=this.editor.model.change((function(e){return e.overrideSelectionGravity()}))}},{key:"_restoreGravity",value:function(){var e=this;this.editor.model.change((function(t){t.restoreSelectionGravity(e._overrideUid),e._overrideUid=null}))}}],[{key:"pluginName",get:function(){return"TwoStepCaretMovement"}}]),n}(d);function Fd(e,t){var n,r=_createForOfIteratorHelper(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(e.hasAttribute(i))return!0}}catch(o){r.e(o)}finally{r.f()}return!1}function jd(e,t,n){var r=n.nodeBefore;e.change((function(e){r?e.setSelectionAttribute(r.getAttributes()):e.removeSelectionAttribute(t)}))}function Ld(e){e.preventDefault()}function Vd(e,t){var n,r=e.nodeBefore,i=e.nodeAfter,o=_createForOfIteratorHelper(t);try{for(o.s();!(n=o.n()).done;){var a=n.value,s=r?r.getAttribute(a):void 0;if((i?i.getAttribute(a):void 0)!==s)return!0}}catch(c){o.e(c)}finally{o.f()}return!1}function Bd(e){return new RegExp("(^|\\s)(".concat(e,")([^").concat(e,"]*)(").concat(e,")$"))}function zd(e,t,n,r){return r.createRange(Hd(e,t,n,!0,r),Hd(e,t,n,!1,r))}function Hd(e,t,n,r,i){for(var o=e.textNode||(r?e.nodeBefore:e.nodeAfter),a=null;o&&o.getAttribute(t)==n;)a=o,o=r?o.previousSibling:o.nextSibling;return a?i.createPositionAt(a,r?"before":"after"):e}RegExp(/[\\^$.*+?()[\]{}|]/g.source),Bd('"'),Bd("'"),Bd("'"),Bd('"'),Bd('"'),Bd("'");var Ud=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this,e))._stack=[],r._createdBatches=new WeakSet,r.refresh(),r.listenTo(e.data,"set",(function(){return r.clearStack()})),r}return _createClass(n,[{key:"refresh",value:function(){this.isEnabled=this._stack.length>0}},{key:"addBatch",value:function(e){var t=this.editor.model.document.selection,n={ranges:t.hasOwnRange?Array.from(t.getRanges()):[],isBackward:t.isBackward};this._stack.push({batch:e,selection:n}),this.refresh()}},{key:"clearStack",value:function(){this._stack=[],this.refresh()}},{key:"_restoreSelection",value:function(e,t,n){var r,i=this.editor.model,o=i.document,a=[],s=e.map((function(e){return e.getTransformedByOperations(n)})),c=s.flat(),l=_createForOfIteratorHelper(s);try{for(l.s();!(r=l.n()).done;){var u=r.value.filter((function(e){return e.root!=o.graveyard})).filter((function(e){return!qd(e,c)}));u.length&&(Wd(u),a.push(u[0]))}}catch(d){l.e(d)}finally{l.f()}a.length&&i.change((function(e){e.setSelection(a,{backward:t})}))}},{key:"_undo",value:function(e,t){var n=this.editor.model,r=n.document;this._createdBatches.add(t);var i=e.operations.slice().filter((function(e){return e.isDocumentOperation}));i.reverse();var o,a=_createForOfIteratorHelper(i);try{for(a.s();!(o=a.n()).done;){var s,c=o.value,l=Array.from(r.history.getOperations(c.baseVersion+1)),u=_createForOfIteratorHelper(Ql([c.getReversed()],l,{useRelations:!0,document:this.editor.model.document,padWithNoOps:!1,forceWeakRemove:!0}).operationsA);try{for(u.s();!(s=u.n()).done;){var d=s.value;t.addOperation(d),n.applyOperation(d),r.history.setOperationAsUndone(c,d)}}catch(f){u.e(f)}finally{u.f()}}}catch(f){a.e(f)}finally{a.f()}}}]),n}(h);function Wd(e){e.sort((function(e,t){return e.start.isBefore(t.start)?-1:1}));for(var t=1;t<e.length;t++){var n=e[t-1].getJoined(e[t],!0);n&&(t--,e.splice(t,2,n))}}function qd(e,t){return t.some((function(t){return t!==e&&t.containsRange(e,!0)}))}var Yd=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"execute",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=t?this._stack.findIndex((function(e){return e.batch==t})):this._stack.length-1,r=this._stack.splice(n,1)[0],i=this.editor.model.createBatch("transparent");this.editor.model.enqueueChange(i,(function(){e._undo(r.batch,i);var t=e.editor.model.document.history.getOperations(r.batch.baseVersion);e._restoreSelection(r.selection.ranges,r.selection.isBackward,t),e.fire("revert",r.batch,i)})),this.refresh()}}]),n}(Ud),Gd=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"execute",value:function(){var e=this,t=this._stack.pop(),n=this.editor.model.createBatch("transparent");this.editor.model.enqueueChange(n,(function(){var r=e.editor.model.document.history.getOperations(t.batch.operations[t.batch.operations.length-1].baseVersion+1);e._restoreSelection(t.selection.ranges,t.selection.isBackward,r),e._undo(t.batch,n)})),this.refresh()}}]),n}(Ud),Jd=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this,e))._batchRegistry=new WeakSet,r}return _createClass(n,[{key:"init",value:function(){var e=this,t=this.editor;this._undoCommand=new Yd(t),this._redoCommand=new Gd(t),t.commands.add("undo",this._undoCommand),t.commands.add("redo",this._redoCommand),this.listenTo(t.model,"applyOperation",(function(t,n){var r=n[0];if(r.isDocumentOperation){var i=r.batch,o=e._redoCommand._createdBatches.has(i),a=e._undoCommand._createdBatches.has(i);e._batchRegistry.has(i)||"transparent"==i.type&&!o&&!a||(o?e._undoCommand.addBatch(i):a||(e._undoCommand.addBatch(i),e._redoCommand.clearStack()),e._batchRegistry.add(i))}}),{priority:"highest"}),this.listenTo(this._undoCommand,"revert",(function(t,n,r){e._redoCommand.addBatch(r)})),t.keystrokes.set("CTRL+Z","undo"),t.keystrokes.set("CTRL+Y","redo"),t.keystrokes.set("CTRL+SHIFT+Z","redo")}}],[{key:"pluginName",get:function(){return"UndoEditing"}}]),n}(d),$d=n(82),Kd=n.n($d),Qd=n(83),Zd=n.n(Qd),Xd=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"init",value:function(){var e=this.editor,t=e.locale,n=e.t,r="ltr"==t.uiLanguageDirection?Kd.a:Zd.a,i="ltr"==t.uiLanguageDirection?Zd.a:Kd.a;this._addButton("undo",n("Undo"),"CTRL+Z",r),this._addButton("redo",n("Redo"),"CTRL+Y",i)}},{key:"_addButton",value:function(e,t,n,r){var i=this,o=this.editor;o.ui.componentFactory.add(e,(function(a){var s=o.commands.get(e),c=new zc(a);return c.set({label:t,icon:r,keystroke:n,tooltip:!0}),c.bind("isEnabled").to(s,"isEnabled"),i.listenTo(c,"execute",(function(){o.execute(e),o.editing.view.focus()})),c}))}}],[{key:"pluginName",get:function(){return"UndoUI"}}]),n}(d),ef=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,null,[{key:"requires",get:function(){return[Jd,Xd]}},{key:"pluginName",get:function(){return"Undo"}}]),n}(d),tf=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,null,[{key:"requires",get:function(){return[fd,_u,Cd,gd,Pd,ef]}},{key:"pluginName",get:function(){return"Essentials"}}]),n}(d),nf=function(){function e(){var t=this;_classCallCheck(this,e);var n=new window.FileReader;this._reader=n,this._data=void 0,this.set("loaded",0),n.onprogress=function(e){t.loaded=e.loaded}}return _createClass(e,[{key:"error",get:function(){return this._reader.error}},{key:"data",get:function(){return this._data}},{key:"read",value:function(e){var t=this,n=this._reader;return this.total=e.size,new Promise((function(r,i){n.onload=function(){var e=n.result;t._data=e,r(e)},n.onerror=function(){i("error")},n.onabort=function(){i("aborted")},t._reader.readAsDataURL(e)}))}},{key:"abort",value:function(){this._reader.abort()}}]),e}();Object(u.default)(nf,l.default);var rf=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"init",value:function(){var e=this;this.loaders=new $e.default,this.loaders.on("add",(function(){return e._updatePendingAction()})),this.loaders.on("remove",(function(){return e._updatePendingAction()})),this._loadersMap=new Map,this._pendingAction=null,this.set("uploaded",0),this.set("uploadTotal",null),this.bind("uploadedPercent").to(this,"uploaded",this,"uploadTotal",(function(e,t){return t?e/t*100:0}))}},{key:"getLoader",value:function(e){return this._loadersMap.get(e)||null}},{key:"createLoader",value:function(e){var t=this;if(!this.createUploadAdapter)return Object(Ke.logWarning)("filerepository-no-upload-adapter"),null;var n=new of(Promise.resolve(e),this.createUploadAdapter);return this.loaders.add(n),this._loadersMap.set(e,n),e instanceof Promise&&n.file.then((function(e){t._loadersMap.set(e,n)})).catch((function(){})),n.on("change:uploaded",(function(){var e,n=0,r=_createForOfIteratorHelper(t.loaders);try{for(r.s();!(e=r.n()).done;){n+=e.value.uploaded}}catch(i){r.e(i)}finally{r.f()}t.uploaded=n})),n.on("change:uploadTotal",(function(){var e,n=0,r=_createForOfIteratorHelper(t.loaders);try{for(r.s();!(e=r.n()).done;){var i=e.value;i.uploadTotal&&(n+=i.uploadTotal)}}catch(o){r.e(o)}finally{r.f()}t.uploadTotal=n})),n}},{key:"destroyLoader",value:function(e){var t=this,n=e instanceof of?e:this.getLoader(e);n._destroy(),this.loaders.remove(n),this._loadersMap.forEach((function(e,r){e===n&&t._loadersMap.delete(r)}))}},{key:"_updatePendingAction",value:function(){var e=this.editor.plugins.get(ms);if(this.loaders.length){if(!this._pendingAction){var t=this.editor.t,n=function(e){return"".concat(t("Upload in progress")," ").concat(parseInt(e),"%.")};this._pendingAction=e.add(n(this.uploadedPercent)),this._pendingAction.bind("message").to(this,"uploadedPercent",n)}}else e.remove(this._pendingAction),this._pendingAction=null}}],[{key:"pluginName",get:function(){return"FileRepository"}},{key:"requires",get:function(){return[ms]}}]),n}(d);Object(u.default)(rf,l.default);var of=function(){function e(t,n){_classCallCheck(this,e),this.id=Object(Sr.a)(),this._filePromiseWrapper=this._createFilePromiseWrapper(t),this._adapter=n(this),this._reader=new nf,this.set("status","idle"),this.set("uploaded",0),this.set("uploadTotal",null),this.bind("uploadedPercent").to(this,"uploaded",this,"uploadTotal",(function(e,t){return t?e/t*100:0})),this.set("uploadResponse",null)}return _createClass(e,[{key:"file",get:function(){var e=this;return this._filePromiseWrapper?this._filePromiseWrapper.promise.then((function(t){return e._filePromiseWrapper?t:null})):Promise.resolve(null)}},{key:"data",get:function(){return this._reader.data}},{key:"read",value:function(){var e=this;if("idle"!=this.status)throw new Ke.default("filerepository-read-wrong-status",this);return this.status="reading",this.file.then((function(t){return e._reader.read(t)})).then((function(t){if("reading"!==e.status)throw e.status;return e.status="idle",t})).catch((function(t){if("aborted"===t)throw e.status="aborted","aborted";throw e.status="error",e._reader.error?e._reader.error:t}))}},{key:"upload",value:function(){var e=this;if("idle"!=this.status)throw new Ke.default("filerepository-upload-wrong-status",this);return this.status="uploading",this.file.then((function(){return e._adapter.upload()})).then((function(t){return e.uploadResponse=t,e.status="idle",t})).catch((function(t){if("aborted"===e.status)throw"aborted";throw e.status="error",t}))}},{key:"abort",value:function(){var e=this.status;this.status="aborted",this._filePromiseWrapper.isFulfilled?"reading"==e?this._reader.abort():"uploading"==e&&this._adapter.abort&&this._adapter.abort():(this._filePromiseWrapper.promise.catch((function(){})),this._filePromiseWrapper.rejecter("aborted")),this._destroy()}},{key:"_destroy",value:function(){this._filePromiseWrapper=void 0,this._reader=void 0,this._adapter=void 0,this.uploadResponse=void 0}},{key:"_createFilePromiseWrapper",value:function(e){var t={};return t.promise=new Promise((function(n,r){t.rejecter=r,t.isFulfilled=!1,e.then((function(e){t.isFulfilled=!0,n(e)})).catch((function(e){t.isFulfilled=!0,r(e)}))})),t}}]),e}();Object(u.default)(of,l.default);var af=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this,e)).buttonView=new zc(e),r._fileInputView=new sf(e),r._fileInputView.bind("acceptedType").to(_assertThisInitialized(r)),r._fileInputView.bind("allowMultipleFiles").to(_assertThisInitialized(r)),r._fileInputView.delegate("done").to(_assertThisInitialized(r)),r.setTemplate({tag:"span",attributes:{class:"ck-file-dialog-button"},children:[r.buttonView,r._fileInputView]}),r.buttonView.on("execute",(function(){r._fileInputView.open()})),r}return _createClass(n,[{key:"focus",value:function(){this.buttonView.focus()}}]),n}(kc),sf=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;_classCallCheck(this,n),(r=t.call(this,e)).set("acceptedType"),r.set("allowMultipleFiles",!1);var i=r.bindTemplate;return r.setTemplate({tag:"input",attributes:{class:["ck-hidden"],type:"file",tabindex:"-1",accept:i.to("acceptedType"),multiple:i.to("allowMultipleFiles")},on:{change:i.to((function(){r.element&&r.element.files&&r.element.files.length&&r.fire("done",r.element.files),r.element.value=""}))}}),r}return _createClass(n,[{key:"open",value:function(){this.element.click()}}]),n}(kc),cf="abcdefghijklmnopqrstuvwxyz0123456789",lf=function(){function e(t,n,r){_classCallCheck(this,e),this.loader=t,this.url=n,this.t=r}return _createClass(e,[{key:"upload",value:function(){var e=this;return this.loader.file.then((function(t){return new Promise((function(n,r){e._initRequest(),e._initListeners(n,r,t),e._sendRequest(t)}))}))}},{key:"abort",value:function(){this.xhr&&this.xhr.abort()}},{key:"_initRequest",value:function(){var e=this.xhr=new XMLHttpRequest;e.open("POST",this.url,!0),e.responseType="json"}},{key:"_initListeners",value:function(e,t,n){var r=this.xhr,i=this.loader,o=(0,this.t)("Cannot upload file:")+" ".concat(n.name,".");r.addEventListener("error",(function(){return t(o)})),r.addEventListener("abort",(function(){return t()})),r.addEventListener("load",(function(){var n=r.response;if(!n||!n.uploaded)return t(n&&n.error&&n.error.message?n.error.message:o);e({default:n.url})})),r.upload&&r.upload.addEventListener("progress",(function(e){e.lengthComputable&&(i.uploadTotal=e.total,i.uploaded=e.loaded)}))}},{key:"_sendRequest",value:function(e){var t=new FormData;t.append("upload",e),t.append("ckCsrfToken",function(){var e=function(e){e=e.toLowerCase();var t,n=_createForOfIteratorHelper(document.cookie.split(";"));try{for(n.s();!(t=n.n()).done;){var r=t.value.split("=");if(decodeURIComponent(r[0].trim().toLowerCase())===e)return decodeURIComponent(r[1])}}catch(i){n.e(i)}finally{n.f()}return null}("ckCsrfToken");return e&&40==e.length||function(e,t){document.cookie=encodeURIComponent("ckCsrfToken")+"="+encodeURIComponent(t)+";path=/"}(0,e=function(e){var t="",n=new Uint8Array(40);window.crypto.getRandomValues(n);for(var r=0;r<n.length;r++){var i=cf.charAt(n[r]%cf.length);t+=Math.random()>.5?i.toUpperCase():i}return t}()),e}()),this.xhr.send(t)}}]),e}();function uf(e,t,n,r){var i,o=null;"function"==typeof r?i=r:(o=e.commands.get(r),i=function(){e.execute(r)}),e.model.document.on("change:data",(function(a,s){if((!o||o.isEnabled)&&t.isEnabled){var c=Si(e.model.document.selection.getRanges());if(c.isCollapsed&&"transparent"!=s.type){var l=Array.from(e.model.document.differ.getChanges()),u=l[0];if(1==l.length&&"insert"===u.type&&"$text"==u.name&&1==u.length){var d=u.position.parent;if(!d.is("element","codeBlock")&&(!d.is("element","listItem")||"function"==typeof r||["numberedList","bulletedList","todoList"].includes(r))&&(!o||!0!==o.value)){var f=d.getChild(0),h=e.model.createRangeOn(f);if(h.containsRange(c)||c.end.isEqual(h.end)){var p=n.exec(f.data.substr(0,c.end.offset));p&&e.model.enqueueChange((function(t){var n=t.createPositionAt(d,0),r=t.createPositionAt(d,p[0].length),o=new po(n,r);if(!1!==i({match:p})){t.remove(o);var a=e.model.document.selection.getFirstRange(),s=t.createRangeIn(d);!d.isEmpty||s.isEqual(a)||s.containsRange(a,!0)||t.remove(d)}o.detach()}))}}}}}}))}function df(e,t,n,r){var i,o;n instanceof RegExp?i=n:o=n,o=o||function(e){for(var t,n=[],r=[];null!==(t=i.exec(e))&&!(t&&t.length<4);){var o=t,a=o.index,s=o[1],c=o[2],l=o[3],u=[a+=t[0].length-(s+c+l).length,a+s.length],d=[a+s.length+c.length,a+s.length+c.length+l.length];n.push(u),n.push(d),r.push([a+s.length,a+s.length+c.length])}return{remove:n,format:r}},e.model.document.on("change:data",(function(n,i){if("transparent"!=i.type&&t.isEnabled){var a=e.model,s=a.document.selection;if(s.isCollapsed){var c=Array.from(a.document.differ.getChanges()),l=c[0];if(1==c.length&&"insert"===l.type&&"$text"==l.name&&1==l.length){var u=s.focus,d=u.parent,f=function(e,t){var n=e.start;return{text:Array.from(e.getItems()).reduce((function(e,r){return!r.is("$text")&&!r.is("$textProxy")||r.getAttribute("code")?(n=t.createPositionAfter(r),""):e+r.data}),""),range:t.createRange(n,e.end)}}(a.createRange(a.createPositionAt(d,0),u),a),h=f.text,p=f.range,v=o(h),g=ff(p.start,v.format,a),m=ff(p.start,v.remove,a);g.length&&m.length&&a.enqueueChange((function(e){if(!1!==r(e,g)){var t,n=_createForOfIteratorHelper(m.reverse());try{for(n.s();!(t=n.n()).done;){var i=t.value;e.remove(i)}}catch(o){n.e(o)}finally{n.f()}}}))}}}}))}function ff(e,t,n){return t.filter((function(e){return void 0!==e[0]&&void 0!==e[1]})).map((function(t){return n.createRange(e.getShiftedBy(t[0]),e.getShiftedBy(t[1]))}))}var hf=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"afterInit",value:function(){this._addListAutoformats(),this._addBasicStylesAutoformats(),this._addHeadingAutoformats(),this._addBlockQuoteAutoformats(),this._addCodeBlockAutoformats(),this._addHorizontalLineAutoformats()}},{key:"_addListAutoformats",value:function(){var e=this,t=this.editor.commands;t.get("bulletedList")&&uf(this.editor,this,/^[*-]\s$/,"bulletedList"),t.get("numberedList")&&uf(this.editor,this,/^1[.|)]\s$/,"numberedList"),t.get("todoList")&&uf(this.editor,this,/^\[\s?\]\s$/,"todoList"),t.get("checkTodoList")&&uf(this.editor,this,/^\[\s?x\s?\]\s$/,(function(){e.editor.execute("todoList"),e.editor.execute("checkTodoList")}))}},{key:"_addBasicStylesAutoformats",value:function(){var e=this.editor.commands;if(e.get("bold")){var t=pf(this.editor,"bold");df(this.editor,this,/(?:^|\s)(\*\*)([^*]+)(\*\*)$/g,t),df(this.editor,this,/(?:^|\s)(__)([^_]+)(__)$/g,t)}if(e.get("italic")){var n=pf(this.editor,"italic");df(this.editor,this,/(?:^|\s)(\*)([^*_]+)(\*)$/g,n),df(this.editor,this,/(?:^|\s)(_)([^_]+)(_)$/g,n)}if(e.get("code")){var r=pf(this.editor,"code");df(this.editor,this,/(`)([^`]+)(`)$/g,r)}if(e.get("strikethrough")){var i=pf(this.editor,"strikethrough");df(this.editor,this,/(~~)([^~]+)(~~)$/g,i)}}},{key:"_addHeadingAutoformats",value:function(){var e=this,t=this.editor.commands.get("heading");t&&t.modelElements.filter((function(e){return e.match(/^heading[1-6]$/)})).forEach((function(n){var r=new RegExp("^(#{".concat(n[7],"})\\s$"));uf(e.editor,e,r,(function(){if(!t.isEnabled||t.value===n)return!1;e.editor.execute("heading",{value:n})}))}))}},{key:"_addBlockQuoteAutoformats",value:function(){this.editor.commands.get("blockQuote")&&uf(this.editor,this,/^>\s$/,"blockQuote")}},{key:"_addCodeBlockAutoformats",value:function(){this.editor.commands.get("codeBlock")&&uf(this.editor,this,/^```$/,"codeBlock")}},{key:"_addHorizontalLineAutoformats",value:function(){this.editor.commands.get("horizontalLine")&&uf(this.editor,this,/^---$/,"horizontalLine")}}],[{key:"pluginName",get:function(){return"Autoformat"}}]),n}(d);function pf(e,t){return function(n,r){if(!e.commands.get(t).isEnabled)return!1;var i,o=_createForOfIteratorHelper(e.model.schema.getValidRanges(r,t));try{for(o.s();!(i=o.n()).done;){var a=i.value;n.setAttribute(t,!0,a)}}catch(s){o.e(s)}finally{o.f()}n.removeSelectionAttribute(t)}}var vf=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var i;return _classCallCheck(this,n),(i=t.call(this,e)).attributeKey=r,i}return _createClass(n,[{key:"refresh",value:function(){var e=this.editor.model,t=e.document;this.value=this._getValueFromFirstAllowedNode(),this.isEnabled=e.schema.checkAttributeInSelection(t.selection,this.attributeKey)}},{key:"execute",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this.editor.model,r=n.document.selection,i=void 0===t.forceValue?!this.value:t.forceValue;n.change((function(t){if(r.isCollapsed)i?t.setSelectionAttribute(e.attributeKey,!0):t.removeSelectionAttribute(e.attributeKey);else{var o,a=_createForOfIteratorHelper(n.schema.getValidRanges(r.getRanges(),e.attributeKey));try{for(a.s();!(o=a.n()).done;){var s=o.value;i?t.setAttribute(e.attributeKey,i,s):t.removeAttribute(e.attributeKey,s)}}catch(c){a.e(c)}finally{a.f()}}}))}},{key:"_getValueFromFirstAllowedNode",value:function(){var e=this.editor.model,t=e.schema,n=e.document.selection;if(n.isCollapsed)return n.hasAttribute(this.attributeKey);var r,i=_createForOfIteratorHelper(n.getRanges());try{for(i.s();!(r=i.n()).done;){var o,a=_createForOfIteratorHelper(r.value.getItems());try{for(a.s();!(o=a.n()).done;){var s=o.value;if(t.checkAttribute(s,this.attributeKey))return s.hasAttribute(this.attributeKey)}}catch(c){a.e(c)}finally{a.f()}}}catch(c){i.e(c)}finally{i.f()}return!1}}]),n}(h),gf="bold",mf=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"init",value:function(){var e=this.editor;e.model.schema.extend("$text",{allowAttributes:gf}),e.model.schema.setAttributeProperties(gf,{isFormatting:!0,copyOnEnter:!0}),e.conversion.attributeToElement({model:gf,view:"strong",upcastAlso:["b",function(e){var t=e.getStyle("font-weight");return t?"bold"==t||Number(t)>=600?{name:!0,styles:["font-weight"]}:void 0:null}]}),e.commands.add(gf,new vf(e,gf)),e.keystrokes.set("CTRL+B",gf)}}],[{key:"pluginName",get:function(){return"BoldEditing"}}]),n}(d),yf=n(147),kf=n.n(yf),_f="bold",bf=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"init",value:function(){var e=this,t=this.editor,n=t.t;t.ui.componentFactory.add(_f,(function(r){var i=t.commands.get(_f),o=new zc(r);return o.set({label:n("Bold"),icon:kf.a,keystroke:"CTRL+B",tooltip:!0,isToggleable:!0}),o.bind("isOn","isEnabled").to(i,"value","isEnabled"),e.listenTo(o,"execute",(function(){t.execute(_f),t.editing.view.focus()})),o}))}}],[{key:"pluginName",get:function(){return"BoldUI"}}]),n}(d),wf=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,null,[{key:"requires",get:function(){return[mf,bf]}},{key:"pluginName",get:function(){return"Bold"}}]),n}(d),xf="italic",Cf=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"init",value:function(){var e=this.editor;e.model.schema.extend("$text",{allowAttributes:xf}),e.model.schema.setAttributeProperties(xf,{isFormatting:!0,copyOnEnter:!0}),e.conversion.attributeToElement({model:xf,view:"i",upcastAlso:["em",{styles:{"font-style":"italic"}}]}),e.commands.add(xf,new vf(e,xf)),e.keystrokes.set("CTRL+I",xf)}}],[{key:"pluginName",get:function(){return"ItalicEditing"}}]),n}(d),Tf=n(148),Af=n.n(Tf),Sf="italic",Ef=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"init",value:function(){var e=this,t=this.editor,n=t.t;t.ui.componentFactory.add(Sf,(function(r){var i=t.commands.get(Sf),o=new zc(r);return o.set({label:n("Italic"),icon:Af.a,keystroke:"CTRL+I",tooltip:!0,isToggleable:!0}),o.bind("isOn","isEnabled").to(i,"value","isEnabled"),e.listenTo(o,"execute",(function(){t.execute(Sf),t.editing.view.focus()})),o}))}}],[{key:"pluginName",get:function(){return"ItalicUI"}}]),n}(d),If=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,null,[{key:"requires",get:function(){return[Cf,Ef]}},{key:"pluginName",get:function(){return"Italic"}}]),n}(d),Of=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"refresh",value:function(){this.value=this._getValue(),this.isEnabled=this._checkEnabled()}},{key:"execute",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this.editor.model,r=n.schema,i=Array.from(n.document.selection.getSelectedBlocks()),o=void 0===t.forceValue?!this.value:t.forceValue;n.change((function(t){if(o){var n=i.filter((function(e){return Rf(e)||Mf(r,e)}));e._applyQuote(t,n)}else e._removeQuote(t,i.filter(Rf))}))}},{key:"_getValue",value:function(){var e=Si(this.editor.model.document.selection.getSelectedBlocks());return!(!e||!Rf(e))}},{key:"_checkEnabled",value:function(){if(this.value)return!0;var e=this.editor.model.schema,t=Si(this.editor.model.document.selection.getSelectedBlocks());return!!t&&Mf(e,t)}},{key:"_removeQuote",value:function(e,t){Pf(e,t).reverse().forEach((function(t){if(t.start.isAtStart&&t.end.isAtEnd)e.unwrap(t.start.parent);else if(t.start.isAtStart){var n=e.createPositionBefore(t.start.parent);e.move(t,n)}else{t.end.isAtEnd||e.split(t.end);var r=e.createPositionAfter(t.end.parent);e.move(t,r)}}))}},{key:"_applyQuote",value:function(e,t){var n=[];Pf(e,t).reverse().forEach((function(t){var r=Rf(t.start);r||(r=e.createElement("blockQuote"),e.wrap(t,r)),n.push(r)})),n.reverse().reduce((function(t,n){return t.nextSibling==n?(e.merge(e.createPositionAfter(t)),t):n}))}}]),n}(h);function Rf(e){return"blockQuote"==e.parent.name?e.parent:null}function Pf(e,t){for(var n,r=0,i=[];r<t.length;){var o=t[r],a=t[r+1];n||(n=e.createPositionBefore(o)),a&&o.nextSibling==a||(i.push(e.createRange(n,e.createPositionAfter(o))),n=null),r++}return i}function Mf(e,t){var n=e.checkChild(t.parent,"blockQuote"),r=e.checkChild(["$root","blockQuote"],t);return n&&r}var Nf=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"init",value:function(){var e=this.editor,t=e.model.schema;e.commands.add("blockQuote",new Of(e)),t.register("blockQuote",{allowWhere:"$block",allowContentOf:"$root"}),e.conversion.elementToElement({model:"blockQuote",view:"blockquote"}),e.model.document.registerPostFixer((function(n){var r,i=_createForOfIteratorHelper(e.model.document.differ.getChanges());try{for(i.s();!(r=i.n()).done;){var o=r.value;if("insert"==o.type){var a=o.position.nodeAfter;if(!a)continue;if(a.is("element","blockQuote")&&a.isEmpty)return n.remove(a),!0;if(a.is("element","blockQuote")&&!t.checkChild(o.position,a))return n.unwrap(a),!0;if(a.is("element")){var s,c=_createForOfIteratorHelper(n.createRangeIn(a).getItems());try{for(c.s();!(s=c.n()).done;){var l=s.value;if(l.is("element","blockQuote")&&!t.checkChild(n.createPositionBefore(l),l))return n.unwrap(l),!0}}catch(d){c.e(d)}finally{c.f()}}}else if("remove"==o.type){var u=o.position.parent;if(u.is("element","blockQuote")&&u.isEmpty)return n.remove(u),!0}}}catch(d){i.e(d)}finally{i.f()}return!1}));var n=this.editor.editing.view.document,r=e.model.document.selection,i=e.commands.get("blockQuote");this.listenTo(n,"enter",(function(t,n){r.isCollapsed&&i.value&&r.getLastPosition().parent.isEmpty&&(e.execute("blockQuote"),e.editing.view.scrollToTheSelection(),n.preventDefault(),t.stop())}),{context:"blockquote"}),this.listenTo(n,"delete",(function(t,n){if("backward"==n.direction&&r.isCollapsed&&i.value){var o=r.getLastPosition().parent;o.isEmpty&&!o.previousSibling&&(e.execute("blockQuote"),e.editing.view.scrollToTheSelection(),n.preventDefault(),t.stop())}}),{context:"blockquote"})}}],[{key:"pluginName",get:function(){return"BlockQuoteEditing"}},{key:"requires",get:function(){return[_u,Cu]}}]),n}(d);n(230);var Df=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"init",value:function(){var e=this,t=this.editor,n=t.t;t.ui.componentFactory.add("blockQuote",(function(r){var i=t.commands.get("blockQuote"),o=new zc(r);return o.set({label:n("Block quote"),icon:pc.quote,tooltip:!0,isToggleable:!0}),o.bind("isOn","isEnabled").to(i,"value","isEnabled"),e.listenTo(o,"execute",(function(){t.execute("blockQuote"),t.editing.view.focus()})),o}))}}],[{key:"pluginName",get:function(){return"BlockQuoteUI"}}]),n}(d),Ff=n(149),jf=n.n(Ff),Lf=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"init",value:function(){var e=this.editor,t=e.t;e.ui.componentFactory.add("ckfinder",(function(n){var r=e.commands.get("ckfinder"),i=new zc(n);return i.set({label:t("Insert image or file"),icon:jf.a,tooltip:!0}),i.bind("isEnabled").to(r),i.on("execute",(function(){e.execute("ckfinder"),e.editing.view.focus()})),i}))}}],[{key:"pluginName",get:function(){return"CKFinderUI"}}]),n}(d),Vf=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this,e)).stopListening(r.editor.model.document,"change"),r.listenTo(r.editor.model.document,"change",(function(){return r.refresh()}),{priority:"low"}),r}return _createClass(n,[{key:"refresh",value:function(){var e=this.editor.commands.get("insertImage"),t=this.editor.commands.get("link");this.isEnabled=e.isEnabled||t.isEnabled}},{key:"execute",value:function(){var e=this.editor,t=this.editor.config.get("ckfinder.openerMethod")||"modal";if("popup"!=t&&"modal"!=t)throw new Ke.default("ckfinder-unknown-openermethod",e);var n=this.editor.config.get("ckfinder.options")||{};n.chooseFiles=!0;var r=n.onInit;n.language||(n.language=e.locale.uiLanguage),n.onInit=function(t){r&&r(t),t.on("files:choose",(function(n){var r,i=n.data.files.toArray(),o=i.filter((function(e){return!e.isImage()})),a=i.filter((function(e){return e.isImage()})),s=_createForOfIteratorHelper(o);try{for(s.s();!(r=s.n()).done;){var c=r.value;e.execute("link",c.getUrl())}}catch(p){s.e(p)}finally{s.f()}var l,u=[],d=_createForOfIteratorHelper(a);try{for(d.s();!(l=d.n()).done;){var f=l.value,h=f.getUrl();u.push(h||t.request("file:getProxyUrl",{file:f}))}}catch(p){d.e(p)}finally{d.f()}u.length&&Bf(e,u)})),t.on("file:choose:resizedImage",(function(t){var n=t.data.resizedUrl;if(n)Bf(e,[n]);else{var r=e.plugins.get("Notification"),i=e.locale.t;r.showWarning(i("Could not obtain resized image URL."),{title:i("Selecting resized image failed"),namespace:"ckfinder"})}}))},window.CKFinder[t](n)}}]),n}(h);function Bf(e,t){if(e.commands.get("insertImage").isEnabled)e.execute("insertImage",{source:t});else{var n=e.plugins.get("Notification"),r=e.locale.t;n.showWarning(r("Could not insert image at the current position."),{title:r("Inserting image failed"),namespace:"ckfinder"})}}var zf=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"init",value:function(){var e=this.editor;e.commands.add("ckfinder",new Vf(e))}}],[{key:"pluginName",get:function(){return"CKFinderEditing"}},{key:"requires",get:function(){return[xl,"ImageEditing","LinkEditing"]}}]),n}(d),Hf=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"init",value:function(){var e=this,t=this.editor,n=t.plugins.get("CloudServices"),r=n.token,i=n.uploadUrl;r&&(this._uploadGateway=t.plugins.get("CloudServicesCore").createUploadGateway(r,i),t.plugins.get(rf).createUploadAdapter=function(t){return new Uf(e._uploadGateway,t)})}}],[{key:"pluginName",get:function(){return"CloudServicesUploadAdapter"}},{key:"requires",get:function(){return["CloudServices",rf]}}]),n}(d),Uf=function(){function e(t,n){_classCallCheck(this,e),this.uploadGateway=t,this.loader=n}return _createClass(e,[{key:"upload",value:function(){var e=this;return this.loader.file.then((function(t){return e.fileUploader=e.uploadGateway.upload(t),e.fileUploader.on("progress",(function(t,n){e.loader.uploadTotal=n.total,e.loader.uploaded=n.uploaded})),e.fileUploader.send()}))}},{key:"abort",value:function(){this.fileUploader.abort()}}]),e}(),Wf=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"refresh",value:function(){var e=this.editor.model,t=Si(e.document.selection.getSelectedBlocks());this.value=!!t&&t.is("element","paragraph"),this.isEnabled=!!t&&qf(t,e.schema)}},{key:"execute",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.editor.model,n=t.document;t.change((function(r){var i,o=_createForOfIteratorHelper((e.selection||n.selection).getSelectedBlocks());try{for(o.s();!(i=o.n()).done;){var a=i.value;!a.is("element","paragraph")&&qf(a,t.schema)&&r.rename(a,"paragraph")}}catch(s){o.e(s)}finally{o.f()}}))}}]),n}(h);function qf(e,t){return t.checkChild(e.parent,"paragraph")&&!t.isObject(e)}var Yf=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"execute",value:function(e){var t=this.editor.model,n=e.position;t.change((function(e){var r=e.createElement("paragraph");if(!t.schema.checkChild(n.parent,r)){var i=t.schema.findAllowedParent(n,r);if(!i)return;n=e.split(n,i).position}t.insertContent(r,n),e.setSelection(r,"in")}))}}]),n}(h),Gf=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"init",value:function(){var e=this.editor,t=e.model;e.commands.add("paragraph",new Wf(e)),e.commands.add("insertParagraph",new Yf(e)),t.schema.register("paragraph",{inheritAllFrom:"$block"}),e.conversion.elementToElement({model:"paragraph",view:"p"}),e.conversion.for("upcast").elementToElement({model:function(e,t){var r=t.writer;return n.paragraphLikeElements.has(e.name)?e.isEmpty?null:r.createElement("paragraph"):null},view:/.+/,converterPriority:"low"})}}],[{key:"pluginName",get:function(){return"Paragraph"}}]),n}(d);Gf.paragraphLikeElements=new Set(["blockquote","dd","div","dt","h1","h2","h3","h4","h5","h6","li","p","td","th"]),n(150);var Jf=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var i;return _classCallCheck(this,n),(i=t.call(this,e)).modelElements=r,i}return _createClass(n,[{key:"refresh",value:function(){var e=this,t=Si(this.editor.model.document.selection.getSelectedBlocks());this.value=!!t&&this.modelElements.includes(t.name)&&t.name,this.isEnabled=!!t&&this.modelElements.some((function(n){return $f(t,n,e.editor.model.schema)}))}},{key:"execute",value:function(e){var t=this.editor.model,n=t.document,r=e.value;t.change((function(e){var i,o=_createForOfIteratorHelper(Array.from(n.selection.getSelectedBlocks()).filter((function(e){return $f(e,r,t.schema)})));try{for(o.s();!(i=o.n()).done;){var a=i.value;a.is("element",r)||e.rename(a,r)}}catch(s){o.e(s)}finally{o.f()}}))}}]),n}(h);function $f(e,t,n){return n.checkChild(e.parent,t)&&!n.isObject(e)}var Kf="paragraph",Qf=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),r=t.call(this,e),e.config.define("heading",{options:[{model:"paragraph",title:"Paragraph",class:"ck-heading_paragraph"},{model:"heading1",view:"h2",title:"Heading 1",class:"ck-heading_heading1"},{model:"heading2",view:"h3",title:"Heading 2",class:"ck-heading_heading2"},{model:"heading3",view:"h4",title:"Heading 3",class:"ck-heading_heading3"}]}),r}return _createClass(n,[{key:"init",value:function(){var e,t=this.editor,n=[],r=_createForOfIteratorHelper(t.config.get("heading.options"));try{for(r.s();!(e=r.n()).done;){var i=e.value;i.model!==Kf&&(t.model.schema.register(i.model,{inheritAllFrom:"$block"}),t.conversion.elementToElement(i),n.push(i.model))}}catch(o){r.e(o)}finally{r.f()}this._addDefaultH1Conversion(t),t.commands.add("heading",new Jf(t,n))}},{key:"afterInit",value:function(){var e=this.editor,t=e.commands.get("enter"),n=e.config.get("heading.options");t&&this.listenTo(t,"afterExecute",(function(t,r){var i=e.model.document.selection.getFirstPosition().parent;n.some((function(e){return i.is("element",e.model)}))&&!i.is("element",Kf)&&0===i.childCount&&r.writer.rename(i,Kf)}))}},{key:"_addDefaultH1Conversion",value:function(e){e.conversion.for("upcast").elementToElement({model:"heading1",view:"h1",converterPriority:Oi.default.get("low")+1})}}],[{key:"pluginName",get:function(){return"HeadingEditing"}},{key:"requires",get:function(){return[Gf]}}]),n}(d);n(84);var Zf=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"init",value:function(){var e=this,t=this.editor,n=t.t,r=function(e){var t=e.t,n={Paragraph:t("Paragraph"),"Heading 1":t("Heading 1"),"Heading 2":t("Heading 2"),"Heading 3":t("Heading 3"),"Heading 4":t("Heading 4"),"Heading 5":t("Heading 5"),"Heading 6":t("Heading 6")};return e.config.get("heading.options").map((function(e){var t=n[e.title];return t&&t!=e.title&&(e.title=t),e}))}(t),i=n("Choose heading"),o=n("Heading");t.ui.componentFactory.add("heading",(function(n){var a,s={},c=new $e.default,l=t.commands.get("heading"),u=t.commands.get("paragraph"),d=[l],f=_createForOfIteratorHelper(r);try{var h=function(){var e=a.value,t={type:"button",model:new Cl({label:e.title,class:e.class,withText:!0})};"paragraph"===e.model?(t.model.bind("isOn").to(u,"value"),t.model.set("commandName","paragraph"),d.push(u)):(t.model.bind("isOn").to(l,"value",(function(t){return t===e.model})),t.model.set({commandName:"heading",commandValue:e.model})),c.add(t),s[e.model]=e.title};for(f.s();!(a=f.n()).done;)h()}catch(v){f.e(v)}finally{f.f()}var p=hl(n);return vl(p,c),p.buttonView.set({isOn:!1,withText:!0,tooltip:o}),p.extendTemplate({attributes:{class:["ck-heading-dropdown"]}}),p.bind("isEnabled").toMany(d,"isEnabled",(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.some((function(e){return e}))})),p.buttonView.bind("label").to(l,"value",u,"value",(function(e,t){var n=e||t&&"paragraph";return s[n]?s[n]:i})),e.listenTo(p,"execute",(function(e){t.execute(e.source.commandName,e.source.commandValue?{value:e.source.commandValue}:void 0),t.editing.view.focus()})),p}))}}],[{key:"pluginName",get:function(){return"HeadingUI"}}]),n}(d),Xf=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"init",value:function(){var e=this,t=this.editor;if(t.plugins.has("BalloonToolbar")){var n=t.plugins.get("BalloonToolbar");this.listenTo(n,"show",(function(e){(function(e){var t=e.getSelectedElement();return!(!t||!Pu(t))})(t.editing.view.document.selection)&&e.stop()}),{priority:"high"})}this._toolbarDefinitions=new Map,this._balloon=this.editor.plugins.get("ContextualBalloon"),this.on("change:isEnabled",(function(){e._updateToolbarsVisibility()})),this.listenTo(t.ui,"update",(function(){e._updateToolbarsVisibility()})),this.listenTo(t.ui.focusTracker,"change:isFocused",(function(){e._updateToolbarsVisibility()}),{priority:"low"})}},{key:"destroy",value:function(){_get3(_getPrototypeOf(n.prototype),"destroy",this).call(this);var e,t=_createForOfIteratorHelper(this._toolbarDefinitions.values());try{for(t.s();!(e=t.n()).done;){e.value.view.destroy()}}catch(r){t.e(r)}finally{t.f()}}},{key:"register",value:function(e,t){var n=t.ariaLabel,r=t.items,i=t.getRelatedElement,o=t.balloonClassName,a=void 0===o?"ck-toolbar-container":o;if(r.length){var s=this.editor,c=s.t,l=new al(s.locale);if(l.ariaLabel=n||c("Widget toolbar"),this._toolbarDefinitions.has(e))throw new Ke.default("widget-toolbar-duplicated",this,{toolbarId:e});l.fillFromConfig(r,s.ui.componentFactory),this._toolbarDefinitions.set(e,{view:l,getRelatedElement:i,balloonClassName:a})}else Object(Ke.logWarning)("widget-toolbar-no-items",{toolbarId:e})}},{key:"_updateToolbarsVisibility",value:function(){var e,t=0,n=null,r=null,i=_createForOfIteratorHelper(this._toolbarDefinitions.values());try{for(i.s();!(e=i.n()).done;){var o=e.value,a=o.getRelatedElement(this.editor.editing.view.document.selection);if(this.isEnabled&&a)if(this.editor.ui.focusTracker.isFocused){var s=a.getAncestors().length;s>t&&(t=s,n=a,r=o)}else this._isToolbarVisible(o)&&this._hideToolbar(o);else this._isToolbarInBalloon(o)&&this._hideToolbar(o)}}catch(c){i.e(c)}finally{i.f()}r&&this._showToolbar(r,n)}},{key:"_hideToolbar",value:function(e){this._balloon.remove(e.view),this.stopListening(this._balloon,"change:visibleView")}},{key:"_showToolbar",value:function(e,t){var n=this;this._isToolbarVisible(e)?eh(this.editor,t):this._isToolbarInBalloon(e)||(this._balloon.add({view:e.view,position:th(this.editor,t),balloonClassName:e.balloonClassName}),this.listenTo(this._balloon,"change:visibleView",(function(){var e,t=_createForOfIteratorHelper(n._toolbarDefinitions.values());try{for(t.s();!(e=t.n()).done;){var r=e.value;if(n._isToolbarVisible(r)){var i=r.getRelatedElement(n.editor.editing.view.document.selection);eh(n.editor,i)}}}catch(o){t.e(o)}finally{t.f()}})))}},{key:"_isToolbarVisible",value:function(e){return this._balloon.visibleView===e.view}},{key:"_isToolbarInBalloon",value:function(e){return this._balloon.hasView(e.view)}}],[{key:"requires",get:function(){return[Fl]}},{key:"pluginName",get:function(){return"WidgetToolbarRepository"}}]),n}(d);function eh(e,t){var n=e.plugins.get("ContextualBalloon"),r=th(e,t);n.updatePosition(r)}function th(e,t){var n=Sl.defaultPositions;return{target:e.editing.view.domConverter.mapViewToDom(t),positions:[n.northArrowSouth,n.northArrowSouthWest,n.northArrowSouthEast,n.southArrowNorth,n.southArrowNorthWest,n.southArrowNorthEast,zu]}}var nh=function(){function e(t){_classCallCheck(this,e),this.set("activeHandlePosition",null),this.set("proposedWidthPercents",null),this.set("proposedWidth",null),this.set("proposedHeight",null),this.set("proposedHandleHostWidth",null),this.set("proposedHandleHostHeight",null),this._options=t,this._referenceCoordinates=null}return _createClass(e,[{key:"begin",value:function(e,t,n){var r=new bi(t);this.activeHandlePosition=function(e){for(var t=0,n=["top-left","top-right","bottom-right","bottom-left"];t<n.length;t++){var r=n[t];if(e.classList.contains(rh(r)))return r}}(e),this._referenceCoordinates=function(e,t){var n=new bi(e),r=t.split("-"),i={x:"right"==r[1]?n.right:n.left,y:"bottom"==r[0]?n.bottom:n.top};return i.x+=e.ownerDocument.defaultView.scrollX,i.y+=e.ownerDocument.defaultView.scrollY,i}(t,function(e){var t=e.split("-"),n={top:"bottom",bottom:"top",left:"right",right:"left"};return"".concat(n[t[0]],"-").concat(n[t[1]])}(this.activeHandlePosition)),this.originalWidth=r.width,this.originalHeight=r.height,this.aspectRatio=r.width/r.height;var i=n.style.width;this.originalWidthPercents=i&&i.match(/^\d+(\.\d*)?%$/)?parseFloat(i):function(e,t){var n=e.parentElement,r=parseFloat(n.ownerDocument.defaultView.getComputedStyle(n).width);return t.width/r*100}(n,r)}},{key:"update",value:function(e){this.proposedWidth=e.width,this.proposedHeight=e.height,this.proposedWidthPercents=e.widthPercents,this.proposedHandleHostWidth=e.handleHostWidth,this.proposedHandleHostHeight=e.handleHostHeight}}]),e}();function rh(e){return"ck-widget__resizer__handle-"+e}Object(u.default)(nh,l.default);var ih=function(){function e(t){var n=this;_classCallCheck(this,e),this._options=t,this._domResizerWrapper=null,this._viewResizerWrapper=null,this.set("isEnabled",!0),this.decorate("begin"),this.decorate("cancel"),this.decorate("commit"),this.decorate("updateSize"),this.on("commit",(function(e){n.state.proposedWidth||n.state.proposedWidthPercents||(n._cleanup(),e.stop())}),{priority:"high"}),this.on("change:isEnabled",(function(){n.isEnabled&&n.redraw()}))}return _createClass(e,[{key:"attach",value:function(){var e=this,t=this,n=this._options.viewElement;this._options.editor.editing.view.change((function(r){var i=r.createUIElement("div",{class:"ck ck-reset_all ck-widget__resizer"},(function(e){var n=this.toDomElement(e);return t._appendHandles(n),t._appendSizeUI(n),t._domResizerWrapper=n,t.on("change:isEnabled",(function(e,t,r){n.style.display=r?"":"none"})),n.style.display=t.isEnabled?"":"none",n}));r.insert(r.createPositionAt(n,"end"),i),r.addClass("ck-widget_with-resizer",n),e._viewResizerWrapper=i}))}},{key:"begin",value:function(e){this.state=new nh(this._options),this._sizeUI.bindToState(this._options,this.state),this._initialViewWidth=this._options.viewElement.getStyle("width"),this.state.begin(e,this._getHandleHost(),this._getResizeHost())}},{key:"updateSize",value:function(e){var t=this,n=this._proposeNewSize(e);this._options.editor.editing.view.change((function(e){var r=t._options.unit||"%";e.setStyle("width",("%"===r?n.widthPercents:n.width)+r,t._options.viewElement)}));var r=this._getHandleHost(),i=new bi(r);n.handleHostWidth=Math.round(i.width),n.handleHostHeight=Math.round(i.height);var o=new bi(r);n.width=Math.round(o.width),n.height=Math.round(o.height),this.redraw(i),this.state.update(n)}},{key:"commit",value:function(){var e=this,t=this._options.unit||"%",n=("%"===t?this.state.proposedWidthPercents:this.state.proposedWidth)+t;this._options.editor.editing.view.change((function(){e._cleanup(),e._options.onCommit(n)}))}},{key:"cancel",value:function(){this._cleanup()}},{key:"destroy",value:function(){this.cancel()}},{key:"redraw",value:function(e){var t=this._domResizerWrapper;if(function(e){return e&&e.ownerDocument&&e.ownerDocument.contains(e)}(t)){var n,r=t.parentElement,i=this._getHandleHost(),o=this._viewResizerWrapper,a=[o.getStyle("width"),o.getStyle("height"),o.getStyle("left"),o.getStyle("top")];if(r.isSameNode(i)){var s=e||new bi(i);n=[s.width+"px",s.height+"px",void 0,void 0]}else n=[i.offsetWidth+"px",i.offsetHeight+"px",i.offsetLeft+"px",i.offsetTop+"px"];"same"!==ot(a,n)&&this._options.editor.editing.view.change((function(e){e.setStyle({width:n[0],height:n[1],left:n[2],top:n[3]},o)}))}}},{key:"containsHandle",value:function(e){return this._domResizerWrapper.contains(e)}},{key:"_cleanup",value:function(){var e=this;this._sizeUI.dismiss(),this._sizeUI.isVisible=!1,this._options.editor.editing.view.change((function(t){t.setStyle("width",e._initialViewWidth,e._options.viewElement)}))}},{key:"_proposeNewSize",value:function(e){var t=this.state,n=function(e){return{x:e.pageX,y:e.pageY}}(e),r=!this._options.isCentered||this._options.isCentered(this),i={x:t._referenceCoordinates.x-(n.x+t.originalWidth),y:n.y-t.originalHeight-t._referenceCoordinates.y};r&&t.activeHandlePosition.endsWith("-right")&&(i.x=n.x-(t._referenceCoordinates.x+t.originalWidth)),r&&(i.x*=2);var o={width:Math.abs(t.originalWidth+i.x),height:Math.abs(t.originalHeight+i.y)};o.dominant=o.width/t.aspectRatio>o.height?"width":"height",o.max=o[o.dominant];var a={width:o.width,height:o.height};return"width"==o.dominant?a.height=a.width/t.aspectRatio:a.width=a.height*t.aspectRatio,{width:Math.round(a.width),height:Math.round(a.height),widthPercents:Math.min(Math.round(t.originalWidthPercents/t.originalWidth*a.width*100)/100,100)}}},{key:"_getResizeHost",value:function(){return this._options.getResizeHost(this._domResizerWrapper.parentElement)}},{key:"_getHandleHost",value:function(){return this._options.getHandleHost(this._domResizerWrapper.parentElement)}},{key:"_appendHandles",value:function(e){for(var t=0,n=["top-left","top-right","bottom-right","bottom-left"];t<n.length;t++){var r=n[t];e.appendChild(new _c({tag:"div",attributes:{class:"ck-widget__resizer__handle "+ah(r)}}).render())}}},{key:"_appendSizeUI",value:function(e){var t=new oh;t.render(),this._sizeUI=t,e.appendChild(t.element)}}],[{key:"isResizeHandle",value:function(e){return e.classList.contains("ck-widget__resizer__handle")}}]),e}();Object(u.default)(ih,l.default);var oh=function(e){_inherits(n,e);var t=_createSuper(n);function n(){var e;_classCallCheck(this,n);var r=(e=t.call(this)).bindTemplate;return e.setTemplate({tag:"div",attributes:{class:["ck","ck-size-view",r.to("activeHandlePosition",(function(e){return e?"ck-orientation-"+e:""}))],style:{display:r.if("isVisible","none",(function(e){return!e}))}},children:[{text:r.to("label")}]}),e}return _createClass(n,[{key:"bindToState",value:function(e,t){this.bind("isVisible").to(t,"proposedWidth",t,"proposedHeight",(function(e,t){return null!==e&&null!==t})),this.bind("label").to(t,"proposedHandleHostWidth",t,"proposedHandleHostHeight",t,"proposedWidthPercents",(function(t,n,r){return"px"===e.unit?"".concat(t,"\xd7").concat(n):r+"%"})),this.bind("activeHandlePosition").to(t)}},{key:"dismiss",value:function(){this.unbind(),this.isVisible=!1}}]),n}(kc);function ah(e){return"ck-widget__resizer__handle-"+e}n(233);var sh=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"init",value:function(){var e=this;this.set("visibleResizer",null),this.set("_activeResizer",null),this._resizers=new Map;var t=mr.window.document;this.editor.model.schema.setAttributeProperties("width",{isFormatting:!0}),this.editor.editing.view.addObserver(ou),this._observer=Object.create(Or),this.listenTo(this.editor.editing.view.document,"mousedown",this._mouseDownListener.bind(this),{priority:"high"}),this._observer.listenTo(t,"mousemove",this._mouseMoveListener.bind(this)),this._observer.listenTo(t,"mouseup",this._mouseUpListener.bind(this));var n=function(){e.visibleResizer&&e.visibleResizer.redraw()},r=od(n,200);this.on("change:visibleResizer",n),this.editor.ui.on("update",r),this._observer.listenTo(mr.window,"resize",r);var i=this.editor.editing.view.document.selection;i.on("change",(function(){var t=i.getSelectedElement();e.visibleResizer=e.getResizerByViewElement(t)||null}))}},{key:"destroy",value:function(){this._observer.stopListening();var e,t=_createForOfIteratorHelper(this._resizers.values());try{for(t.s();!(e=t.n()).done;){e.value.destroy()}}catch(n){t.e(n)}finally{t.f()}}},{key:"attachTo",value:function(e){var t=new ih(e),n=this.editor.plugins;if(t.attach(),n.has("WidgetToolbarRepository")){var r=n.get("WidgetToolbarRepository");t.on("begin",(function(){r.forceDisabled("resize")}),{priority:"lowest"}),t.on("cancel",(function(){r.clearForceDisabled("resize")}),{priority:"highest"}),t.on("commit",(function(){r.clearForceDisabled("resize")}),{priority:"highest"})}this._resizers.set(e.viewElement,t);var i=this.editor.editing.view.document.selection.getSelectedElement();return this.getResizerByViewElement(i)==t&&(this.visibleResizer=t),t}},{key:"getResizerByViewElement",value:function(e){return this._resizers.get(e)}},{key:"_getResizerByHandle",value:function(e){var t,n=_createForOfIteratorHelper(this._resizers.values());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.containsHandle(e))return r}}catch(i){n.e(i)}finally{n.f()}}},{key:"_mouseDownListener",value:function(e,t){var n=t.domTarget;ih.isResizeHandle(n)&&(this._activeResizer=this._getResizerByHandle(n),this._activeResizer&&(this._activeResizer.begin(n),e.stop(),t.preventDefault()))}},{key:"_mouseMoveListener",value:function(e,t){this._activeResizer&&this._activeResizer.updateSize(t)}},{key:"_mouseUpListener",value:function(){this._activeResizer&&(this._activeResizer.commit(),this._activeResizer=null)}}],[{key:"pluginName",get:function(){return"WidgetResize"}}]),n}(d);Object(u.default)(sh,l.default);var ch=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"observe",value:function(e){var t=this;this.listenTo(e,"load",(function(e,n){var r=n.target;t.checkShouldIgnoreEventFromTarget(r)||"IMG"==r.tagName&&t._fireEvents(n)}),{useCapture:!0})}},{key:"_fireEvents",value:function(e){this.isEnabled&&(this.document.fire("layoutChanged"),this.document.fire("imageLoaded",e))}}]),n}(Mr);function lh(e){return!!e.getCustomProperty("image")&&Pu(e)}function uh(e){var t=e.getSelectedElement();return t&&lh(t)?t:null}function dh(e){return!!e&&e.is("element","image")}function fh(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.change((function(r){var i=r.createElement("image",t),o=n||Vu(e.document.selection,e);e.insertContent(i,o),i.parent&&r.setSelection(i,"on")}))}function hh(e){var t=e.schema,n=e.document.selection;return function(e,t,n){var r=function(e,t){var n=Vu(e,t).parent;return n.isEmpty&&!n.is("element","$root")?n.parent:n}(e,n);return t.checkChild(r,"image")}(n,t,e)&&!Bu(n,t)&&function(e){return _toConsumableArray(e.focus.getAncestors()).every((function(e){return!e.is("element","image")}))}(n)}function ph(e){var t,n=[],r=_createForOfIteratorHelper(e.getChildren());try{for(r.s();!(t=r.n()).done;){var i=t.value;n.push(i),i.is("element")&&n.push.apply(n,_toConsumableArray(i.getChildren()))}}catch(o){r.e(o)}finally{r.f()}return n.find((function(e){return e.is("element","img")}))}function vh(e){return function(n){n.on("attribute:".concat(e,":image"),t)};function t(e,t,n){if(n.consumable.consume(t.item,e.name)){var r=n.writer,i=ph(n.mapper.toViewElement(t.item));r.setAttribute(t.attributeKey,t.attributeNewValue||"",i)}}}var gh=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"refresh",value:function(){this.isEnabled=hh(this.editor.model)}},{key:"execute",value:function(e){var t,n=this.editor.model,r=_createForOfIteratorHelper(Xe(e.source));try{for(r.s();!(t=r.n()).done;){fh(n,{src:t.value})}}catch(i){r.e(i)}finally{r.f()}}}]),n}(h),mh=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"init",value:function(){var e=this.editor,t=e.model.schema,n=e.t,r=e.conversion;e.editing.view.addObserver(ch),t.register("image",{isObject:!0,isBlock:!0,allowWhere:"$block",allowAttributes:["alt","src","srcset"]}),r.for("dataDowncast").elementToElement({model:"image",view:function(e,t){return yh(t.writer)}}),r.for("editingDowncast").elementToElement({model:"image",view:function(e,t){var r=t.writer;return function(e,t,n){return t.setCustomProperty("image",!0,e),Mu(e,t,{label:function(){var t=ph(e).getAttribute("alt");return t?"".concat(t," ").concat(n):n}})}(yh(r),r,n("image widget"))}}),r.for("downcast").add(vh("src")).add(vh("alt")).add(function(){return function(t){t.on("attribute:srcset:image",e)};function e(e,t,n){if(n.consumable.consume(t.item,e.name)){var r=n.writer,i=ph(n.mapper.toViewElement(t.item));if(null===t.attributeNewValue){var o=t.attributeOldValue;o.data&&(r.removeAttribute("srcset",i),r.removeAttribute("sizes",i),o.width&&r.removeAttribute("width",i))}else{var a=t.attributeNewValue;a.data&&(r.setAttribute("srcset",a.data,i),r.setAttribute("sizes","100vw",i),a.width&&r.setAttribute("width",a.width,i))}}}}()),r.for("upcast").elementToElement({view:{name:"img",attributes:{src:!0}},model:function(e,t){return t.writer.createElement("image",{src:e.getAttribute("src")})}}).attributeToAttribute({view:{name:"img",key:"alt"},model:"alt"}).attributeToAttribute({view:{name:"img",key:"srcset"},model:{key:"srcset",value:function(e){var t={data:e.getAttribute("srcset")};return e.hasAttribute("width")&&(t.width=e.getAttribute("width")),t}}}).add(function(){return function(t){t.on("element:figure",e)};function e(e,t,n){if(n.consumable.test(t.viewItem,{name:!0,classes:"image"})){var r=ph(t.viewItem);if(r&&r.hasAttribute("src")&&n.consumable.test(r,{name:!0})){var i=Si(n.convertItem(r,t.modelCursor).modelRange.getItems());i&&(n.convertChildren(t.viewItem,i),n.updateConversionResult(i,t))}}}}());var i=new gh(e);e.commands.add("insertImage",i),e.commands.add("imageInsert",i)}}],[{key:"pluginName",get:function(){return"ImageEditing"}}]),n}(d);function yh(e){var t=e.createEmptyElement("img"),n=e.createContainerElement("figure",{class:"image"});return e.insert(e.createPositionAt(n,0),t),n}var kh=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"refresh",value:function(){var e=this.editor.model.document.selection.getSelectedElement();this.isEnabled=dh(e),this.value=!(!dh(e)||!e.hasAttribute("alt"))&&e.getAttribute("alt")}},{key:"execute",value:function(e){var t=this.editor.model,n=t.document.selection.getSelectedElement();t.change((function(t){t.setAttribute("alt",e.newValue,n)}))}}]),n}(h),_h=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"init",value:function(){this.editor.commands.add("imageTextAlternative",new kh(this.editor))}}],[{key:"pluginName",get:function(){return"ImageTextAlternativeEditing"}}]),n}(d);n(235),n(56);var bh=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;_classCallCheck(this,n);var i=(r=t.call(this,e)).locale.t;return r.focusTracker=new Ei,r.keystrokes=new Ii,r.labeledInput=r._createLabeledInputView(),r.saveButtonView=r._createButton(i("Save"),pc.check,"ck-button-save"),r.saveButtonView.type="submit",r.cancelButtonView=r._createButton(i("Cancel"),pc.cancel,"ck-button-cancel","cancel"),r._focusables=new yc,r._focusCycler=new qc({focusables:r._focusables,focusTracker:r.focusTracker,keystrokeHandler:r.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),r.setTemplate({tag:"form",attributes:{class:["ck","ck-text-alternative-form","ck-responsive-form"],tabindex:"-1"},children:[r.labeledInput,r.saveButtonView,r.cancelButtonView]}),gc(_assertThisInitialized(r)),r}return _createClass(n,[{key:"render",value:function(){var e=this;_get3(_getPrototypeOf(n.prototype),"render",this).call(this),this.keystrokes.listenTo(this.element),mc({view:this}),[this.labeledInput,this.saveButtonView,this.cancelButtonView].forEach((function(t){e._focusables.add(t),e.focusTracker.add(t.element)}))}},{key:"_createButton",value:function(e,t,n,r){var i=new zc(this.locale);return i.set({label:e,icon:t,tooltip:!0}),i.extendTemplate({attributes:{class:n}}),r&&i.delegate("execute").to(this,r),i}},{key:"_createLabeledInputView",value:function(){var e=this.locale.t,t=new bl(this.locale,wl);return t.label=e("Text alternative"),t}}]),n}(kc);function wh(e){var t=e.editing.view,n=Sl.defaultPositions;return{target:t.domConverter.viewToDom(t.document.selection.getSelectedElement()),positions:[n.northArrowSouth,n.northArrowSouthWest,n.northArrowSouthEast,n.southArrowNorth,n.southArrowNorthWest,n.southArrowNorthEast]}}var xh=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"init",value:function(){this._createButton(),this._createForm()}},{key:"destroy",value:function(){_get3(_getPrototypeOf(n.prototype),"destroy",this).call(this),this._form.destroy()}},{key:"_createButton",value:function(){var e=this,t=this.editor,n=t.t;t.ui.componentFactory.add("imageTextAlternative",(function(r){var i=t.commands.get("imageTextAlternative"),o=new zc(r);return o.set({label:n("Change image text alternative"),icon:pc.lowVision,tooltip:!0}),o.bind("isEnabled").to(i,"isEnabled"),e.listenTo(o,"execute",(function(){e._showForm()})),o}))}},{key:"_createForm",value:function(){var e=this,t=this.editor,n=t.editing.view.document;this._balloon=this.editor.plugins.get("ContextualBalloon"),this._form=new bh(t.locale),this._form.render(),this.listenTo(this._form,"submit",(function(){t.execute("imageTextAlternative",{newValue:e._form.labeledInput.fieldView.element.value}),e._hideForm(!0)})),this.listenTo(this._form,"cancel",(function(){e._hideForm(!0)})),this._form.keystrokes.set("Esc",(function(t,n){e._hideForm(!0),n()})),this.listenTo(t.ui,"update",(function(){uh(n.selection)?e._isVisible&&function(e){var t=e.plugins.get("ContextualBalloon");if(uh(e.editing.view.document.selection)){var n=wh(e);t.updatePosition(n)}}(t):e._hideForm(!0)})),vc({emitter:this._form,activator:function(){return e._isVisible},contextElements:[this._balloon.view.element],callback:function(){return e._hideForm()}})}},{key:"_showForm",value:function(){if(!this._isVisible){var e=this.editor,t=e.commands.get("imageTextAlternative"),n=this._form.labeledInput;this._form.disableCssTransitions(),this._isInBalloon||this._balloon.add({view:this._form,position:wh(e)}),n.fieldView.value=n.fieldView.element.value=t.value||"",this._form.labeledInput.fieldView.select(),this._form.enableCssTransitions()}}},{key:"_hideForm",value:function(e){this._isInBalloon&&(this._form.focusTracker.isFocused&&this._form.saveButtonView.focus(),this._balloon.remove(this._form),e&&this.editor.editing.view.focus())}},{key:"_isVisible",get:function(){return this._balloon.visibleView===this._form}},{key:"_isInBalloon",get:function(){return this._balloon.hasView(this._form)}}],[{key:"requires",get:function(){return[Fl]}},{key:"pluginName",get:function(){return"ImageTextAlternativeUI"}}]),n}(d),Ch=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,null,[{key:"requires",get:function(){return[_h,xh]}},{key:"pluginName",get:function(){return"ImageTextAlternative"}}]),n}(d);function Th(e){var t,n=_createForOfIteratorHelper(e.getChildren());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r&&r.is("element","caption"))return r}}catch(i){n.e(i)}finally{n.f()}return null}function Ah(e){var t=e.parent;return"figcaption"==e.name&&t&&"figure"==t.name&&t.hasClass("image")?{name:!0}:null}n(238);var Sh=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"init",value:function(){var e=this,t=this.editor,n=t.editing.view,r=t.data,i=t.editing,o=t.t;t.model.schema.register("caption",{allowIn:"image",allowContentOf:"$block",isLimit:!0}),t.model.document.registerPostFixer((function(t){return e._insertMissingModelCaptionElement(t)})),t.conversion.for("upcast").elementToElement({view:Ah,model:"caption"}),r.downcastDispatcher.on("insert:caption",Eh((function(e){return e.createContainerElement("figcaption")}),!1));var a=function(e,t){return function(n){var r=n.createEditableElement("figcaption");return n.setCustomProperty("imageCaption",!0,r),Hl({view:e,element:r,text:t}),Lu(r,n)}}(n,o("Enter image caption"));i.downcastDispatcher.on("insert:caption",Eh(a)),i.downcastDispatcher.on("insert",this._fixCaptionVisibility((function(e){return e.item})),{priority:"high"}),i.downcastDispatcher.on("remove",this._fixCaptionVisibility((function(e){return e.position.parent})),{priority:"high"}),n.document.registerPostFixer((function(t){return e._updateCaptionVisibility(t)}))}},{key:"_updateCaptionVisibility",value:function(e){var t,n=this.editor.editing.mapper,r=this._lastSelectedCaption,i=this.editor.model.document.selection,o=i.getSelectedElement();if(o&&o.is("element","image")){var a=Th(o);t=n.toViewElement(a)}var s=Ih(i.getFirstPosition().parent);if(s&&(t=n.toViewElement(s)),t&&!this.editor.isReadOnly)return r?(r===t||(Oh(r,e),this._lastSelectedCaption=t),Rh(t,e)):(this._lastSelectedCaption=t,Rh(t,e));if(r){var c=Oh(r,e);return this._lastSelectedCaption=null,c}return!1}},{key:"_fixCaptionVisibility",value:function(e){var t=this;return function(n,r,i){var o=Ih(e(r)),a=i.writer;if(o){var s=t.editor.editing.mapper.toViewElement(o);s&&(o.childCount?a.removeClass("ck-hidden",s):a.addClass("ck-hidden",s))}}}},{key:"_insertMissingModelCaptionElement",value:function(e){var t,n=this.editor.model,r=[],i=_createForOfIteratorHelper(n.document.differ.getChanges());try{for(i.s();!(t=i.n()).done;){var o=t.value;if("insert"==o.type&&"$text"!=o.name){var a=o.position.nodeAfter;if(a.is("element","image")&&!Th(a)&&r.push(a),!a.is("element","image")&&a.childCount){var s,c=_createForOfIteratorHelper(n.createRangeIn(a).getItems());try{for(c.s();!(s=c.n()).done;){var l=s.value;l.is("element","image")&&!Th(l)&&r.push(l)}}catch(h){c.e(h)}finally{c.f()}}}}}catch(h){i.e(h)}finally{i.f()}for(var u=0,d=r;u<d.length;u++){var f=d[u];e.appendElement("caption",f)}return!!r.length}}],[{key:"pluginName",get:function(){return"ImageCaptionEditing"}}]),n}(d);function Eh(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return function(n,r,i){var o=r.item;if((o.childCount||t)&&dh(o.parent)){if(!i.consumable.consume(r.item,"insert"))return;var a=i.mapper.toViewElement(r.range.start.parent),s=e(i.writer),c=i.writer;o.childCount||c.addClass("ck-hidden",s),function(e,t,n,r){var i=r.writer.createPositionAt(n,"end");r.writer.insert(i,e),r.mapper.bindElements(t,e)}(s,r.item,a,i)}}}function Ih(e){var t=e.getAncestors({includeSelf:!0}).find((function(e){return"caption"==e.name}));return t&&t.parent&&"image"==t.parent.name?t:null}function Oh(e,t){return!e.childCount&&!e.hasClass("ck-hidden")&&(t.addClass("ck-hidden",e),!0)}function Rh(e,t){return!!e.hasClass("ck-hidden")&&(t.removeClass("ck-hidden",e),!0)}n(240);var Ph=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"refresh",value:function(){var e=this.editor.model.document.selection.getSelectedElement();this.isEnabled=dh(e),this.value=e&&e.hasAttribute("width")?{width:e.getAttribute("width"),height:null}:null}},{key:"execute",value:function(e){var t=this.editor.model,n=t.document.selection.getSelectedElement();this.value={width:e.width,height:null},n&&t.change((function(t){t.setAttribute("width",e.width,n)}))}}]),n}(h),Mh=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),r=t.call(this,e),e.config.define("image",{resizeUnit:"%",resizeOptions:[{name:"resizeImage:original",value:null,icon:"original"},{name:"resizeImage:25",value:"25",icon:"small"},{name:"resizeImage:50",value:"50",icon:"medium"},{name:"resizeImage:75",value:"75",icon:"large"}]}),r}return _createClass(n,[{key:"init",value:function(){var e=this.editor,t=new Ph(e);this._registerSchema(),this._registerConverters(),e.commands.add("resizeImage",t),e.commands.add("imageResize",t)}},{key:"_registerSchema",value:function(){this.editor.model.schema.extend("image",{allowAttributes:"width"}),this.editor.model.schema.setAttributeProperties("width",{isFormatting:!0})}},{key:"_registerConverters",value:function(){var e=this.editor;e.conversion.for("downcast").add((function(e){return e.on("attribute:width:image",(function(e,t,n){if(n.consumable.consume(t.item,e.name)){var r=n.writer,i=n.mapper.toViewElement(t.item);null!==t.attributeNewValue?(r.setStyle("width",t.attributeNewValue,i),r.addClass("image_resized",i)):(r.removeStyle("width",i),r.removeClass("image_resized",i))}}))})),e.conversion.for("upcast").attributeToAttribute({view:{name:"figure",styles:{width:/.+/}},model:{key:"width",value:function(e){return e.getStyle("width")}}})}}],[{key:"pluginName",get:function(){return"ImageResizeEditing"}}]),n}(d),Nh={small:pc.objectSizeSmall,medium:pc.objectSizeMedium,large:pc.objectSizeLarge,original:pc.objectSizeFull},Dh=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this,e))._resizeUnit=e.config.get("image.resizeUnit"),r}return _createClass(n,[{key:"init",value:function(){var e=this.editor,t=e.config.get("image.resizeOptions"),n=e.commands.get("resizeImage");this.bind("isEnabled").to(n);var r,i=_createForOfIteratorHelper(t);try{for(i.s();!(r=i.n()).done;){var o=r.value;this._registerImageResizeButton(o)}}catch(a){i.e(a)}finally{i.f()}this._registerImageResizeDropdown(t)}},{key:"_registerImageResizeButton",value:function(e){var t=this,n=this.editor,r=e.name,i=e.value,o=e.icon,a=i?i+this._resizeUnit:null;n.ui.componentFactory.add(r,(function(r){var i=new zc(r),s=n.commands.get("resizeImage"),c=t._getOptionLabelValue(e,!0);if(!Nh[o])throw new Ke.default("imageresizebuttons-missing-icon",n,e);return i.set({label:c,icon:Nh[o],tooltip:c,isToggleable:!0}),i.bind("isEnabled").to(t),i.bind("isOn").to(s,"value",Fh(a)),t.listenTo(i,"execute",(function(){n.execute("resizeImage",{width:a})})),i}))}},{key:"_registerImageResizeDropdown",value:function(e){var t=this,n=this.editor,r=n.t,i=e.find((function(e){return!e.value})),o=function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(o){var a=n.commands.get("resizeImage"),s=hl(o,$c),c=s.buttonView;return c.set({tooltip:r("Resize image"),commandValue:i.value,icon:Nh.medium,isToggleable:!0,label:t._getOptionLabelValue(i),withText:!0,class:"ck-resize-image-button"}),c.bind("label").to(a,"value",(function(e){return e&&e.width?e.width:t._getOptionLabelValue(i)})),s.bind("isOn").to(a),s.bind("isEnabled").to(t),vl(s,t._getResizeDropdownListItemDefinitions(e,a)),s.listView.ariaLabel=r("Image resize list"),t.listenTo(s,"execute",(function(e){n.execute(e.source.commandName,{width:e.source.commandValue}),n.editing.view.focus()})),s}));n.ui.componentFactory.add("resizeImage",o),n.ui.componentFactory.add("imageResize",o)}},{key:"_getOptionLabelValue",value:function(e,t){var n=this.editor.t;return e.label?e.label:t?e.value?n("Resize image to %0",e.value+this._resizeUnit):n("Resize image to the original size"):e.value?e.value+this._resizeUnit:n("Original")}},{key:"_getResizeDropdownListItemDefinitions",value:function(e,t){var n=this,r=new $e.default;return e.map((function(e){var i=e.value?e.value+n._resizeUnit:null,o={type:"button",model:new Cl({commandName:"resizeImage",commandValue:i,label:n._getOptionLabelValue(e),withText:!0,icon:null})};o.model.bind("isOn").to(t,"value",Fh(i)),r.add(o)})),r}}],[{key:"requires",get:function(){return[Mh]}},{key:"pluginName",get:function(){return"ImageResizeButtons"}}]),n}(d);function Fh(e){return function(t){return null===e&&t===e||t&&t.width===e}}var jh=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"init",value:function(){var e=this.editor.commands.get("resizeImage");this.bind("isEnabled").to(e),this._setupResizerCreator()}},{key:"_setupResizerCreator",value:function(){var e=this,t=this.editor,n=t.editing.view;n.addObserver(ch),this.listenTo(n.document,"imageLoaded",(function(r,i){if(i.target.matches("figure.image.ck-widget > img, figure.image.ck-widget > a > img")){var o=t.editing.view.domConverter.domToView(i.target).findAncestor("figure"),a=e.editor.plugins.get(sh).getResizerByViewElement(o);if(a)a.redraw();else{var s=t.editing.mapper.toModelElement(o);(a=t.plugins.get(sh).attachTo({unit:t.config.get("image.resizeUnit"),modelElement:s,viewElement:o,editor:t,getHandleHost:function(e){return e.querySelector("img")},getResizeHost:function(e){return e},isCentered:function(){var e=s.getAttribute("imageStyle");return!e||"full"==e||"alignCenter"==e},onCommit:function(e){t.execute("resizeImage",{width:e})}})).on("updateSize",(function(){o.hasClass("image_resized")||n.change((function(e){e.addClass("image_resized",o)}))})),a.bind("isEnabled").to(e)}}}))}}],[{key:"requires",get:function(){return[sh]}},{key:"pluginName",get:function(){return"ImageResizeHandles"}}]),n}(d);n(242);var Lh=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var i;return _classCallCheck(this,n),(i=t.call(this,e)).defaultStyle=!1,i.styles=r.reduce((function(e,t){return e[t.name]=t,t.isDefault&&(i.defaultStyle=t.name),e}),{}),i}return _createClass(n,[{key:"refresh",value:function(){var e=this.editor.model.document.selection.getSelectedElement();if(this.isEnabled=dh(e),e)if(e.hasAttribute("imageStyle")){var t=e.getAttribute("imageStyle");this.value=!!this.styles[t]&&t}else this.value=this.defaultStyle;else this.value=!1}},{key:"execute",value:function(e){var t=this,n=e.value,r=this.editor.model,i=r.document.selection.getSelectedElement();r.change((function(e){t.styles[n].isDefault?e.removeAttribute("imageStyle",i):e.setAttribute("imageStyle",n,i)}))}}]),n}(h);function Vh(e,t){var n,r=_createForOfIteratorHelper(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.name===e)return i}}catch(o){r.e(o)}finally{r.f()}}var Bh={full:{name:"full",title:"Full size image",icon:pc.objectFullWidth,isDefault:!0},side:{name:"side",title:"Side image",icon:pc.objectRight,className:"image-style-side"},alignLeft:{name:"alignLeft",title:"Left aligned image",icon:pc.objectLeft,className:"image-style-align-left"},alignCenter:{name:"alignCenter",title:"Centered image",icon:pc.objectCenter,className:"image-style-align-center"},alignRight:{name:"alignRight",title:"Right aligned image",icon:pc.objectRight,className:"image-style-align-right"}},zh={full:pc.objectFullWidth,left:pc.objectLeft,right:pc.objectRight,center:pc.objectCenter};function Hh(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.map(Uh)}function Uh(e){if("string"==typeof e){var t=e;Bh[t]?e=Object.assign({},Bh[t]):(Object(Ke.logWarning)("image-style-not-found",{name:t}),e={name:t})}else if(Bh[e.name]){var n=Bh[e.name],r=Object.assign({},e);for(var i in n)Object.prototype.hasOwnProperty.call(e,i)||(r[i]=n[i]);e=r}return"string"==typeof e.icon&&zh[e.icon]&&(e.icon=zh[e.icon]),e}var Wh=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"init",value:function(){var e=this.editor,t=e.model.schema,n=e.data,r=e.editing;e.config.define("image.styles",["full","side"]);var i=Hh(e.config.get("image.styles"));t.extend("image",{allowAttributes:"imageStyle"});var o=function(e){return function(t,n,r){if(r.consumable.consume(n.item,t.name)){var i=Vh(n.attributeNewValue,e),o=Vh(n.attributeOldValue,e),a=r.mapper.toViewElement(n.item),s=r.writer;o&&s.removeClass(o.className,a),i&&s.addClass(i.className,a)}}}(i);r.downcastDispatcher.on("attribute:imageStyle:image",o),n.downcastDispatcher.on("attribute:imageStyle:image",o),n.upcastDispatcher.on("element:figure",function(e){var t=e.filter((function(e){return!e.isDefault}));return function(e,n,r){if(n.modelRange){var i=n.viewItem,o=Si(n.modelRange.getItems());if(!o||r.schema.checkAttribute(o,"imageStyle")){var a,s=_createForOfIteratorHelper(t);try{for(s.s();!(a=s.n()).done;){var c=a.value;r.consumable.consume(i,{classes:c.className})&&r.writer.setAttribute("imageStyle",c.name,o)}}catch(l){s.e(l)}finally{s.f()}}}}}(i),{priority:"low"}),e.commands.add("imageStyle",new Lh(e,i))}}],[{key:"pluginName",get:function(){return"ImageStyleEditing"}}]),n}(d);n(244);var qh=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"localizedDefaultStylesTitles",get:function(){var e=this.editor.t;return{"Full size image":e("Full size image"),"Side image":e("Side image"),"Left aligned image":e("Left aligned image"),"Centered image":e("Centered image"),"Right aligned image":e("Right aligned image")}}},{key:"init",value:function(){var e,t=function(e,t){var n,r=_createForOfIteratorHelper(e);try{for(r.s();!(n=r.n()).done;){var i=n.value;t[i.title]&&(i.title=t[i.title])}}catch(o){r.e(o)}finally{r.f()}return e}(Hh(this.editor.config.get("image.styles")),this.localizedDefaultStylesTitles),n=_createForOfIteratorHelper(t);try{for(n.s();!(e=n.n()).done;){var r=e.value;this._createButton(r)}}catch(i){n.e(i)}finally{n.f()}}},{key:"_createButton",value:function(e){var t=this,n=this.editor;n.ui.componentFactory.add("imageStyle:"+e.name,(function(r){var i=n.commands.get("imageStyle"),o=new zc(r);return o.set({label:e.title,icon:e.icon,tooltip:!0,isToggleable:!0}),o.bind("isEnabled").to(i,"isEnabled"),o.bind("isOn").to(i,"value",(function(t){return t===e.name})),t.listenTo(o,"execute",(function(){n.execute("imageStyle",{value:e.name}),n.editing.view.focus()})),o}))}}],[{key:"pluginName",get:function(){return"ImageStyleUI"}}]),n}(d);function Yh(e){var t=e.map((function(e){return e.replace("+","\\+")}));return new RegExp("^image\\/(".concat(t.join("|"),")$"))}function Gh(e){return new Promise((function(t,n){var r=e.getAttribute("src");fetch(r).then((function(e){return e.blob()})).then((function(e){var n=Jh(e,r),i="image."+n.replace("image/",""),o=new File([e],i,{type:n});t(o)})).catch((function(e){return e&&"TypeError"===e.name?function(e){return function(e){return new Promise((function(t,n){var r=mr.document.createElement("img");r.addEventListener("load",(function(){var e=mr.document.createElement("canvas");e.width=r.width,e.height=r.height,e.getContext("2d").drawImage(r,0,0),e.toBlob((function(e){return e?t(e):n()}))})),r.addEventListener("error",(function(){return n()})),r.src=e}))}(e).then((function(t){var n=Jh(t,e),r=n.replace("image/","");return new File([t],"image."+r,{type:n})}))}(r).then(t).catch(n):n(e)}))}))}function Jh(e,t){return e.type?e.type:t.match(/data:(image\/\w+);base64/)?t.match(/data:(image\/\w+);base64/)[1].toLowerCase():"image/jpeg"}var $h=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"init",value:function(){var e=this.editor,t=e.t,n=function(n){var r=new af(n),i=e.commands.get("uploadImage"),o=e.config.get("image.upload.types"),a=Yh(o);return r.set({acceptedType:o.map((function(e){return"image/"+e})).join(","),allowMultipleFiles:!0}),r.buttonView.set({label:t("Insert image"),icon:pc.image,tooltip:!0}),r.buttonView.bind("isEnabled").to(i),r.on("done",(function(t,n){var r=Array.from(n).filter((function(e){return a.test(e.type)}));r.length&&e.execute("uploadImage",{file:r})})),r};e.ui.componentFactory.add("uploadImage",n),e.ui.componentFactory.add("imageUpload",n)}}],[{key:"pluginName",get:function(){return"ImageUploadUI"}}]),n}(d),Kh=n(151),Qh=n.n(Kh);n(246),n(248),n(250);var Zh=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this,e)).placeholder="data:image/svg+xml;utf8,"+encodeURIComponent(Qh.a),r}return _createClass(n,[{key:"init",value:function(){var e=this;this.editor.editing.downcastDispatcher.on("attribute:uploadStatus:image",(function(){return e.uploadStatusChange.apply(e,arguments)}))}},{key:"uploadStatusChange",value:function(e,t,n){var r=this.editor,i=t.item,o=i.getAttribute("uploadId");if(n.consumable.consume(t.item,e.name)){var a=r.plugins.get(rf),s=o?t.attributeNewValue:null,c=this.placeholder,l=r.editing.mapper.toViewElement(i),u=n.writer;if("reading"==s)return Xh(l,u),void ep(c,l,u);if("uploading"==s){var d=a.loaders.get(o);return Xh(l,u),void(d?(tp(l,u),function(e,t,n,r){var i=function(e){var t=e.createUIElement("div",{class:"ck-progress-bar"});return e.setCustomProperty("progressBar",!0,t),t}(t);t.insert(t.createPositionAt(e,"end"),i),n.on("change:uploadedPercent",(function(e,t,n){r.change((function(e){e.setStyle("width",n+"%",i)}))}))}(l,u,d,r.editing.view),function(e,t,n){if(n.data){var r=ph(e);t.setAttribute("src",n.data,r)}}(l,u,d)):ep(c,l,u))}"complete"==s&&a.loaders.get(o)&&function(e,t,n){var r=t.createUIElement("div",{class:"ck-image-upload-complete-icon"});t.insert(t.createPositionAt(e,"end"),r),setTimeout((function(){n.change((function(e){return e.remove(e.createRangeOn(r))}))}),3e3)}(l,u,r.editing.view),function(e,t){rp(e,t,"progressBar")}(l,u),tp(l,u),function(e,t){t.removeClass("ck-appear",e)}(l,u)}}}],[{key:"pluginName",get:function(){return"ImageUploadProgress"}}]),n}(d);function Xh(e,t){e.hasClass("ck-appear")||t.addClass("ck-appear",e)}function ep(e,t,n){t.hasClass("ck-image-upload-placeholder")||n.addClass("ck-image-upload-placeholder",t);var r=ph(t);r.getAttribute("src")!==e&&n.setAttribute("src",e,r),np(t,"placeholder")||n.insert(n.createPositionAfter(r),function(e){var t=e.createUIElement("div",{class:"ck-upload-placeholder-loader"});return e.setCustomProperty("placeholder",!0,t),t}(n))}function tp(e,t){e.hasClass("ck-image-upload-placeholder")&&t.removeClass("ck-image-upload-placeholder",e),rp(e,t,"placeholder")}function np(e,t){var n,r=_createForOfIteratorHelper(e.getChildren());try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.getCustomProperty(t))return i}}catch(o){r.e(o)}finally{r.f()}}function rp(e,t,n){var r=np(e,n);r&&t.remove(t.createRangeOn(r))}var ip=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"refresh",value:function(){var e=this.editor.model.document.selection.getSelectedElement(),t=e&&"image"===e.name||!1;this.isEnabled=hh(this.editor.model)||t}},{key:"execute",value:function(e){var t,n=this.editor,r=n.model,i=n.plugins.get(rf),o=_createForOfIteratorHelper(Xe(e.file));try{for(o.s();!(t=o.n()).done;){op(r,i,t.value)}}catch(a){o.e(a)}finally{o.f()}}}]),n}(h);function op(e,t,n){var r=t.createLoader(n);r&&fh(e,{uploadId:r.id})}var ap=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),r=t.call(this,e),e.config.define("image",{upload:{types:["jpeg","png","gif","bmp","webp","tiff"]}}),r}return _createClass(n,[{key:"init",value:function(){var e=this,t=this.editor,n=t.model.document,r=t.model.schema,i=t.conversion,o=t.plugins.get(rf),a=Yh(t.config.get("image.upload.types"));r.extend("image",{allowAttributes:["uploadId","uploadStatus"]});var s=new ip(t);t.commands.add("uploadImage",s),t.commands.add("imageUpload",s),i.for("upcast").attributeToAttribute({view:{name:"img",key:"uploadId"},model:"uploadId"}),this.listenTo(t.editing.view.document,"clipboardInput",(function(e,n){if(!function(e){return Array.from(e.types).includes("text/html")&&""!==e.getData("text/html")}(n.dataTransfer)){var r=Array.from(n.dataTransfer.files).filter((function(e){return!!e&&a.test(e.type)}));r.length&&(e.stop(),t.model.change((function(e){n.targetRanges&&e.setSelection(n.targetRanges.map((function(e){return t.editing.mapper.toModelRange(e)}))),t.model.enqueueChange("default",(function(){t.execute("uploadImage",{file:r})}))})))}})),this.listenTo(t.plugins.get("ClipboardPipeline"),"inputTransformation",(function(e,n){var r=Array.from(t.editing.view.createRangeIn(n.content)).filter((function(e){return function(e){return!(!e.is("element","img")||!e.getAttribute("src"))&&(e.getAttribute("src").match(/^data:image\/\w+;base64,/g)||e.getAttribute("src").match(/^blob:/g))}(e.item)&&!e.item.getAttribute("uploadProcessed")})).map((function(e){return{promise:Gh(e.item),imageElement:e.item}}));if(r.length){var i,a=new au(t.editing.view.document),s=_createForOfIteratorHelper(r);try{for(s.s();!(i=s.n()).done;){var c=i.value;a.setAttribute("uploadProcessed",!0,c.imageElement);var l=o.createLoader(c.promise);l&&(a.setAttribute("src","",c.imageElement),a.setAttribute("uploadId",l.id,c.imageElement))}}catch(u){s.e(u)}finally{s.f()}}})),t.editing.view.document.on("dragover",(function(e,t){t.preventDefault()})),n.on("change",(function(){var r,i=_createForOfIteratorHelper(n.differ.getChanges({includeChangesInGraveyard:!0}));try{for(i.s();!(r=i.n()).done;){var a=r.value;if("insert"==a.type&&"$text"!=a.name){var s,c=a.position.nodeAfter,l="$graveyard"==a.position.root.rootName,u=_createForOfIteratorHelper(sp(t,c));try{for(u.s();!(s=u.n()).done;){var d=s.value,f=d.getAttribute("uploadId");if(f){var h=o.loaders.get(f);h&&(l?h.abort():"idle"==h.status&&e._readAndUpload(h,d))}}}catch(p){u.e(p)}finally{u.f()}}}}catch(p){i.e(p)}finally{i.f()}})),this.on("uploadComplete",(function(t,n){var r=n.imageElement,i=n.data,o=i.urls?i.urls:i;e.editor.model.change((function(t){t.setAttribute("src",o.default,r),e._parseAndSetSrcsetAttributeOnImage(o,r,t)}))}),{priority:"low"})}},{key:"_readAndUpload",value:function(e,t){var n=this,r=this.editor,i=r.model,o=r.locale.t,a=r.plugins.get(rf),s=r.plugins.get(xl);return i.enqueueChange("transparent",(function(e){e.setAttribute("uploadStatus","reading",t)})),e.read().then((function(){var n=e.upload();if(Tn){var o=ph(r.editing.mapper.toViewElement(t));r.editing.view.once("render",(function(){if(o.parent){var e=r.editing.view.domConverter.mapViewToDom(o.parent);if(e){var t=e.style.display;e.style.display="none",e._ckHack=e.offsetHeight,e.style.display=t}}}))}return i.enqueueChange("transparent",(function(e){e.setAttribute("uploadStatus","uploading",t)})),n})).then((function(e){i.enqueueChange("transparent",(function(r){r.setAttribute("uploadStatus","complete",t),n.fire("uploadComplete",{data:e,imageElement:t})})),c()})).catch((function(n){if("error"!==e.status&&"aborted"!==e.status)throw n;"error"==e.status&&n&&s.showWarning(n,{title:o("Upload failed"),namespace:"upload"}),c(),i.enqueueChange("transparent",(function(e){e.remove(t)}))}));function c(){i.enqueueChange("transparent",(function(e){e.removeAttribute("uploadId",t),e.removeAttribute("uploadStatus",t)})),a.destroyLoader(e)}}},{key:"_parseAndSetSrcsetAttributeOnImage",value:function(e,t,n){var r=0,i=Object.keys(e).filter((function(e){var t=parseInt(e,10);if(!isNaN(t))return r=Math.max(r,t),!0})).map((function(t){return"".concat(e[t]," ").concat(t,"w")})).join(", ");""!=i&&n.setAttribute("srcset",{data:i,width:r},t)}}],[{key:"requires",get:function(){return[rf,xl,vu]}},{key:"pluginName",get:function(){return"ImageUploadEditing"}}]),n}(d);function sp(e,t){return Array.from(e.model.createRangeOn(t)).filter((function(e){return e.item.is("element","image")})).map((function(e){return e.item}))}var cp=function(){function e(){_classCallCheck(this,e),this._definitions=new Set}return _createClass(e,[{key:"length",get:function(){return this._definitions.size}},{key:"add",value:function(e){var t=this;Array.isArray(e)?e.forEach((function(e){return t._definitions.add(e)})):this._definitions.add(e)}},{key:"getDispatcher",value:function(){var e=this;return function(t){t.on("attribute:linkHref",(function(t,n,r){if(r.consumable.test(n.item,"attribute:linkHref")){var i,o=r.writer,a=o.document.selection,s=_createForOfIteratorHelper(e._definitions);try{for(s.s();!(i=s.n()).done;){var c=i.value,l=o.createAttributeElement("a",c.attributes,{priority:5});o.setCustomProperty("link",!0,l),c.callback(n.attributeNewValue)?n.item.is("selection")?o.wrap(a.getFirstRange(),l):o.wrap(r.mapper.toViewRange(n.range),l):o.unwrap(r.mapper.toViewRange(n.range),l)}}catch(u){s.e(u)}finally{s.f()}}}),{priority:"high"})}}},{key:"getDispatcherForLinkedImage",value:function(){var e=this;return function(t){t.on("attribute:linkHref:image",(function(t,n,r){var i,o=r.mapper.toViewElement(n.item),a=Array.from(o.getChildren()).find((function(e){return"a"===e.name})),s=_createForOfIteratorHelper(e._definitions);try{for(s.s();!(i=s.n()).done;){var c=i.value,l=ft(c.attributes);if(c.callback(n.attributeNewValue)){var u,d=_createForOfIteratorHelper(l);try{for(d.s();!(u=d.n()).done;){var f=_slicedToArray(u.value,2),h=f[0],p=f[1];"class"===h?r.writer.addClass(p,a):r.writer.setAttribute(h,p,a)}}catch(_){d.e(_)}finally{d.f()}}else{var v,g=_createForOfIteratorHelper(l);try{for(g.s();!(v=g.n()).done;){var m=_slicedToArray(v.value,2),y=m[0],k=m[1];"class"===y?r.writer.removeClass(k,a):r.writer.removeAttribute(y,a)}}catch(_){g.e(_)}finally{g.f()}}}}catch(_){s.e(_)}finally{s.f()}}))}}}]),e}(),lp=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]"),up=function(e){return lp.test(e)},dp="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",fp="\\ud83c[\\udffb-\\udfff]",hp="[^\\ud800-\\udfff]",pp="(?:\\ud83c[\\udde6-\\uddff]){2}",vp="[\\ud800-\\udbff][\\udc00-\\udfff]",gp="(?:"+dp+"|"+fp+")?",mp="[\\ufe0e\\ufe0f]?"+gp+"(?:\\u200d(?:"+[hp,pp,vp].join("|")+")[\\ufe0e\\ufe0f]?"+gp+")*",yp="(?:"+[hp+dp+"?",dp,pp,vp,"[\\ud800-\\udfff]"].join("|")+")",kp=RegExp(fp+"(?="+fp+")|"+yp+mp,"g"),_p=function(e){e=Tt(e);var t=up(e)?function(e){return up(e)?function(e){return e.match(kp)||[]}(e):function(e){return e.split("")}(e)}(e):void 0,n=t?t[0]:e.charAt(0),r=t?function(e,t,n){return It(e,1,n=void 0===n?e.length:n)}(t).join(""):e.slice(1);return n.toUpperCase()+r},bp=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,wp=/^(?:(?:https?|ftps?|mailto):|[^a-z]|[a-z+.-]+(?:[^a-z+.:-]|$))/i,xp=/^[\S]+@((?![-_])(?:[-\w\u00a1-\uffff]{0,63}[^-_]\.))+(?:[a-z\u00a1-\uffff]{2,})$/i,Cp=/^((\w+:(\/{2,})?)|(\W))/i,Tp="Ctrl+K";function Ap(e,t){var n=t.writer,r=n.createAttributeElement("a",{href:e},{priority:5});return n.setCustomProperty("link",!0,r),r}function Sp(e){return function(e){return e.replace(bp,"").match(wp)}(e=String(e))?e:"#"}function Ep(e,t){return!!e&&e.is("element","image")&&t.checkAttribute("image","linkHref")}function Ip(e,t){var n=function(e){return xp.test(e)}(e)?"mailto:":t,r=!!n&&!Cp.test(e);return e&&r?n+e:e}var Op=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this,e)).manualDecorators=new $e.default,r.automaticDecorators=new cp,r}return _createClass(n,[{key:"restoreManualDecoratorStates",value:function(){var e,t=_createForOfIteratorHelper(this.manualDecorators);try{for(t.s();!(e=t.n()).done;){var n=e.value;n.value=this._getDecoratorStateFromModel(n.id)}}catch(r){t.e(r)}finally{t.f()}}},{key:"refresh",value:function(){var e=this.editor.model,t=e.document,n=Si(t.selection.getSelectedBlocks());Ep(n,e.schema)?(this.value=n.getAttribute("linkHref"),this.isEnabled=e.schema.checkAttribute(n,"linkHref")):(this.value=t.selection.getAttribute("linkHref"),this.isEnabled=e.schema.checkAttributeInSelection(t.selection,"linkHref"));var r,i=_createForOfIteratorHelper(this.manualDecorators);try{for(i.s();!(r=i.n()).done;){var o=r.value;o.value=this._getDecoratorStateFromModel(o.id)}}catch(a){i.e(a)}finally{i.f()}}},{key:"execute",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.editor.model,i=r.document.selection,o=[],a=[];for(var s in n)n[s]?o.push(s):a.push(s);r.change((function(n){if(i.isCollapsed){var s=i.getFirstPosition();if(i.hasAttribute("linkHref")){var c=zd(s,"linkHref",i.getAttribute("linkHref"),r);n.setAttribute("linkHref",e,c),o.forEach((function(e){n.setAttribute(e,!0,c)})),a.forEach((function(e){n.removeAttribute(e,c)})),n.setSelection(n.createPositionAfter(c.end.nodeBefore))}else if(""!==e){var l=ft(i.getAttributes());l.set("linkHref",e),o.forEach((function(e){l.set(e,!0)}));var u=r.insertContent(n.createText(e,l),s).end;n.setSelection(u)}["linkHref"].concat(o,a).forEach((function(e){n.removeSelectionAttribute(e)}))}else{var d,f=r.schema.getValidRanges(i.getRanges(),"linkHref"),h=[],p=_createForOfIteratorHelper(i.getSelectedBlocks());try{for(p.s();!(d=p.n()).done;){var v=d.value;r.schema.checkAttribute(v,"linkHref")&&h.push(n.createRangeOn(v))}}catch(x){p.e(x)}finally{p.f()}var g,m=h.slice(),y=_createForOfIteratorHelper(f);try{for(y.s();!(g=y.n()).done;){var k=g.value;t._isRangeToUpdate(k,h)&&m.push(k)}}catch(x){y.e(x)}finally{y.f()}var _,b=_createForOfIteratorHelper(m);try{var w=function(){var t=_.value;n.setAttribute("linkHref",e,t),o.forEach((function(e){n.setAttribute(e,!0,t)})),a.forEach((function(e){n.removeAttribute(e,t)}))};for(b.s();!(_=b.n()).done;)w()}catch(x){b.e(x)}finally{b.f()}}}))}},{key:"_getDecoratorStateFromModel",value:function(e){var t=this.editor.model,n=t.document,r=Si(n.selection.getSelectedBlocks());return Ep(r,t.schema)?r.getAttribute(e):n.selection.getAttribute(e)}},{key:"_isRangeToUpdate",value:function(e,t){var n,r=_createForOfIteratorHelper(t);try{for(r.s();!(n=r.n()).done;){if(n.value.containsRange(e))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}}]),n}(h),Rp=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"refresh",value:function(){var e=this.editor.model,t=e.document,n=Si(t.selection.getSelectedBlocks());this.isEnabled=Ep(n,e.schema)?e.schema.checkAttribute(n,"linkHref"):e.schema.checkAttributeInSelection(t.selection,"linkHref")}},{key:"execute",value:function(){var e=this.editor.model,t=e.document.selection,n=this.editor.commands.get("link");e.change((function(r){var i,o=_createForOfIteratorHelper(t.isCollapsed?[zd(t.getFirstPosition(),"linkHref",t.getAttribute("linkHref"),e)]:e.schema.getValidRanges(t.getRanges(),"linkHref"));try{for(o.s();!(i=o.n()).done;){var a=i.value;if(r.removeAttribute("linkHref",a),n){var s,c=_createForOfIteratorHelper(n.manualDecorators);try{for(c.s();!(s=c.n()).done;){var l=s.value;r.removeAttribute(l.id,a)}}catch(u){c.e(u)}finally{c.f()}}}}catch(u){o.e(u)}finally{o.f()}}))}}]),n}(h),Pp=function e(t){var n=t.id,r=t.label,i=t.attributes,o=t.defaultValue;_classCallCheck(this,e),this.id=n,this.set("value"),this.defaultValue=o,this.label=r,this.attributes=i};Object(u.default)(Pp,l.default),n(252);var Mp="automatic",Np=/^(https?:)?\/\//,Dp=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),r=t.call(this,e),e.config.define("link",{addTargetToExternalLinks:!1}),r}return _createClass(n,[{key:"init",value:function(){var e=this.editor;e.model.schema.extend("$text",{allowAttributes:"linkHref"}),e.conversion.for("dataDowncast").attributeToElement({model:"linkHref",view:Ap}),e.conversion.for("editingDowncast").attributeToElement({model:"linkHref",view:function(e,t){return Ap(Sp(e),t)}}),e.conversion.for("upcast").elementToAttribute({view:{name:"a",attributes:{href:!0}},model:{key:"linkHref",value:function(e){return e.getAttribute("href")}}}),e.commands.add("link",new Op(e)),e.commands.add("unlink",new Rp(e));var t=function(e,t){var n={"Open in a new tab":e("Open in a new tab"),Downloadable:e("Downloadable")};return t.forEach((function(e){return e.label&&n[e.label]&&(e.label=n[e.label]),e})),t}(e.t,function(e){var t=[];if(e)for(var n=0,r=Object.entries(e);n<r.length;n++){var i=_slicedToArray(r[n],2),o=i[0],a=i[1],s=Object.assign({},a,{id:"link"+_p(o)});t.push(s)}return t}(e.config.get("link.decorators")));this._enableAutomaticDecorators(t.filter((function(e){return e.mode===Mp}))),this._enableManualDecorators(t.filter((function(e){return"manual"===e.mode}))),e.plugins.get(Dd).registerAttribute("linkHref"),function(e,t,n,r){var i=e.editing.view,o=new Set;i.document.registerPostFixer((function(n){var i=e.model.document.selection,a=!1;if(i.hasAttribute(t)){var s,c=zd(i.getFirstPosition(),t,i.getAttribute(t),e.model),l=_createForOfIteratorHelper(e.editing.mapper.toViewRange(c).getItems());try{for(l.s();!(s=l.n()).done;){var u=s.value;u.is("element","a")&&!u.hasClass(r)&&(n.addClass(r,u),o.add(u),a=!0)}}catch(d){l.e(d)}finally{l.f()}}return a})),e.conversion.for("editingDowncast").add((function(e){function t(){i.change((function(e){var t,n=_createForOfIteratorHelper(o.values());try{for(n.s();!(t=n.n()).done;){var i=t.value;e.removeClass(r,i),o.delete(i)}}catch(a){n.e(a)}finally{n.f()}}))}e.on("insert",t,{priority:"highest"}),e.on("remove",t,{priority:"highest"}),e.on("attribute",t,{priority:"highest"}),e.on("selection",t,{priority:"highest"})}))}(e,"linkHref",0,"ck-link_selected"),this._enableInsertContentSelectionAttributesFixer(),this._enableClickingAfterLink(),this._enableTypingOverLink(),this._handleDeleteContentAfterLink()}},{key:"_enableAutomaticDecorators",value:function(e){var t=this.editor,n=t.commands.get("link").automaticDecorators;t.config.get("link.addTargetToExternalLinks")&&n.add({id:"linkIsExternal",mode:Mp,callback:function(e){return Np.test(e)},attributes:{target:"_blank",rel:"noopener noreferrer"}}),n.add(e),n.length&&t.conversion.for("downcast").add(n.getDispatcher())}},{key:"_enableManualDecorators",value:function(e){if(e.length){var t=this.editor,n=t.commands.get("link").manualDecorators;e.forEach((function(e){t.model.schema.extend("$text",{allowAttributes:e.id}),n.add(new Pp(e)),t.conversion.for("downcast").attributeToElement({model:e.id,view:function(t,r){var i=r.writer;if(t){var o=n.get(e.id).attributes,a=i.createAttributeElement("a",o,{priority:5});return i.setCustomProperty("link",!0,a),a}}}),t.conversion.for("upcast").elementToAttribute({view:{name:"a",attributes:n.get(e.id).attributes},model:{key:e.id}})}))}}},{key:"_enableInsertContentSelectionAttributesFixer",value:function(){var e=this.editor,t=e.model,n=t.document.selection,r=e.commands.get("link");this.listenTo(t,"insertContent",(function(){var e=n.anchor.nodeBefore,i=n.anchor.nodeAfter;n.hasAttribute("linkHref")&&e&&e.hasAttribute("linkHref")&&(i&&i.hasAttribute("linkHref")||t.change((function(e){Fp(e,r.manualDecorators)})))}),{priority:"low"})}},{key:"_enableClickingAfterLink",value:function(){var e=this.editor,t=e.commands.get("link");e.editing.view.addObserver(ou);var n=!1;this.listenTo(e.editing.view.document,"mousedown",(function(){n=!0})),this.listenTo(e.editing.view.document,"selectionChange",(function(){if(n){n=!1;var r=e.model.document.selection;if(r.isCollapsed&&r.hasAttribute("linkHref")){var i=r.getFirstPosition(),o=zd(i,"linkHref",r.getAttribute("linkHref"),e.model);(i.isTouching(o.start)||i.isTouching(o.end))&&e.model.change((function(e){Fp(e,t.manualDecorators)}))}}}))}},{key:"_enableTypingOverLink",value:function(){var e,t,n=this.editor;this.listenTo(n.editing.view.document,"delete",(function(){t=!0}),{priority:"high"}),this.listenTo(n.model,"deleteContent",(function(){var r=n.model.document.selection;r.isCollapsed||(t?t=!1:jp(n)&&function(e){var t=e.document.selection,n=t.getFirstPosition(),r=t.getLastPosition(),i=n.nodeAfter;return!!i&&!!i.is("$text")&&!!i.hasAttribute("linkHref")&&(i===(r.textNode||r.nodeBefore)||zd(n,"linkHref",i.getAttribute("linkHref"),e).containsRange(e.createRange(n,r),!0))}(n.model)&&(e=r.getAttributes()))}),{priority:"high"}),this.listenTo(n.model,"insertContent",(function(r,i){var o=_slicedToArray(i,1)[0];t=!1,jp(n)&&e&&(n.model.change((function(t){var n,r=_createForOfIteratorHelper(e);try{for(r.s();!(n=r.n()).done;){var i=_slicedToArray(n.value,2),a=i[0],s=i[1];t.setAttribute(a,s,o)}}catch(c){r.e(c)}finally{r.f()}})),e=null)}),{priority:"high"})}},{key:"_handleDeleteContentAfterLink",value:function(){var e=this.editor,t=e.model,n=t.document.selection,r=e.editing.view,i=e.commands.get("link"),o=!1,a=!1;this.listenTo(r.document,"delete",(function(e,t){a=t.domEvent.keyCode===On.backspace}),{priority:"high"}),this.listenTo(t,"deleteContent",(function(){o=!1;var e=n.getFirstPosition(),r=n.getAttribute("linkHref");if(r){var i=zd(e,"linkHref",r,t);o=i.containsPosition(e)||i.end.isEqual(e)}}),{priority:"high"}),this.listenTo(t,"deleteContent",(function(){a&&(a=!1,o||e.model.enqueueChange((function(e){Fp(e,i.manualDecorators)})))}),{priority:"low"})}}],[{key:"pluginName",get:function(){return"LinkEditing"}},{key:"requires",get:function(){return[Dd,Rd,vu]}}]),n}(d);function Fp(e,t){e.removeSelectionAttribute("linkHref");var n,r=_createForOfIteratorHelper(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;e.removeSelectionAttribute(i.id)}}catch(o){r.e(o)}finally{r.f()}}function jp(e){return e.plugins.get("Input").isInput(e.model.change((function(e){return e.batch})))}n(254);var Lp=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var i;_classCallCheck(this,n),i=t.call(this,e);var o=e.t;i.focusTracker=new Ei,i.keystrokes=new Ii,i.urlInputView=i._createUrlInput(),i.saveButtonView=i._createButton(o("Save"),pc.check,"ck-button-save"),i.saveButtonView.type="submit",i.cancelButtonView=i._createButton(o("Cancel"),pc.cancel,"ck-button-cancel","cancel"),i._manualDecoratorSwitches=i._createManualDecoratorSwitches(r),i.children=i._createFormChildren(r.manualDecorators),i._focusables=new yc,i._focusCycler=new qc({focusables:i._focusables,focusTracker:i.focusTracker,keystrokeHandler:i.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}});var a=["ck","ck-link-form","ck-responsive-form"];return r.manualDecorators.length&&a.push("ck-link-form_layout-vertical","ck-vertical-form"),i.setTemplate({tag:"form",attributes:{class:a,tabindex:"-1"},children:i.children}),gc(_assertThisInitialized(i)),i}return _createClass(n,[{key:"getDecoratorSwitchesState",value:function(){return Array.from(this._manualDecoratorSwitches).reduce((function(e,t){return e[t.name]=t.isOn,e}),{})}},{key:"render",value:function(){var e=this;_get3(_getPrototypeOf(n.prototype),"render",this).call(this),mc({view:this}),[this.urlInputView].concat(_toConsumableArray(this._manualDecoratorSwitches),[this.saveButtonView,this.cancelButtonView]).forEach((function(t){e._focusables.add(t),e.focusTracker.add(t.element)})),this.keystrokes.listenTo(this.element)}},{key:"focus",value:function(){this._focusCycler.focusFirst()}},{key:"_createUrlInput",value:function(){var e=this.locale.t,t=new bl(this.locale,wl);return t.label=e("Link URL"),t}},{key:"_createButton",value:function(e,t,n,r){var i=new zc(this.locale);return i.set({label:e,icon:t,tooltip:!0}),i.extendTemplate({attributes:{class:n}}),r&&i.delegate("execute").to(this,r),i}},{key:"_createManualDecoratorSwitches",value:function(e){var t,n=this,r=this.createCollection(),i=_createForOfIteratorHelper(e.manualDecorators);try{var o=function(){var i=t.value,o=new Hc(n.locale);o.set({name:i.id,label:i.label,withText:!0}),o.bind("isOn").toMany([i,e],"value",(function(e,t){return void 0===t&&void 0===e?i.defaultValue:e})),o.on("execute",(function(){i.set("value",!o.isOn)})),r.add(o)};for(i.s();!(t=i.n()).done;)o()}catch(a){i.e(a)}finally{i.f()}return r}},{key:"_createFormChildren",value:function(e){var t=this.createCollection();if(t.add(this.urlInputView),e.length){var n=new kc;n.setTemplate({tag:"ul",children:this._manualDecoratorSwitches.map((function(e){return{tag:"li",children:[e],attributes:{class:["ck","ck-list__item"]}}})),attributes:{class:["ck","ck-reset","ck-list"]}}),t.add(n)}return t.add(this.saveButtonView),t.add(this.cancelButtonView),t}}]),n}(kc);n(256);var Vp=n(152),Bp=n.n(Vp),zp=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;_classCallCheck(this,n),r=t.call(this,e);var i=e.t;return r.focusTracker=new Ei,r.keystrokes=new Ii,r.previewButtonView=r._createPreviewButton(),r.unlinkButtonView=r._createButton(i("Unlink"),Bp.a,"unlink"),r.editButtonView=r._createButton(i("Edit link"),pc.pencil,"edit"),r.set("href"),r._focusables=new yc,r._focusCycler=new qc({focusables:r._focusables,focusTracker:r.focusTracker,keystrokeHandler:r.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),r.setTemplate({tag:"div",attributes:{class:["ck","ck-link-actions","ck-responsive-form"],tabindex:"-1"},children:[r.previewButtonView,r.editButtonView,r.unlinkButtonView]}),r}return _createClass(n,[{key:"render",value:function(){var e=this;_get3(_getPrototypeOf(n.prototype),"render",this).call(this),[this.previewButtonView,this.editButtonView,this.unlinkButtonView].forEach((function(t){e._focusables.add(t),e.focusTracker.add(t.element)})),this.keystrokes.listenTo(this.element)}},{key:"focus",value:function(){this._focusCycler.focusFirst()}},{key:"_createButton",value:function(e,t,n){var r=new zc(this.locale);return r.set({label:e,icon:t,tooltip:!0}),r.delegate("execute").to(this,n),r}},{key:"_createPreviewButton",value:function(){var e=new zc(this.locale),t=this.bindTemplate,n=this.t;return e.set({withText:!0,tooltip:n("Open link in new tab")}),e.extendTemplate({attributes:{class:["ck","ck-link-actions__preview"],href:t.to("href",(function(e){return e&&Sp(e)})),target:"_blank",rel:"noopener noreferrer"}}),e.bind("label").to(this,"href",(function(e){return e||n("This link has no URL")})),e.bind("isEnabled").to(this,"href",(function(e){return!!e})),e.template.tag="a",e.template.eventListeners={},e}}]),n}(kc),Hp=n(153),Up=n.n(Hp),Wp="link-ui",qp=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"init",value:function(){var e=this.editor;e.editing.view.addObserver(iu),this.actionsView=this._createActionsView(),this.formView=this._createFormView(),this._balloon=e.plugins.get(Fl),this._createToolbarLinkButton(),this._enableUserBalloonInteractions(),e.conversion.for("editingDowncast").markerToHighlight({model:Wp,view:{classes:["ck-fake-link-selection"]}}),e.conversion.for("editingDowncast").markerToElement({model:Wp,view:{name:"span",classes:["ck-fake-link-selection","ck-fake-link-selection_collapsed"]}})}},{key:"destroy",value:function(){_get3(_getPrototypeOf(n.prototype),"destroy",this).call(this),this.formView.destroy()}},{key:"_createActionsView",value:function(){var e=this,t=this.editor,n=new zp(t.locale),r=t.commands.get("link"),i=t.commands.get("unlink");return n.bind("href").to(r,"value"),n.editButtonView.bind("isEnabled").to(r),n.unlinkButtonView.bind("isEnabled").to(i),this.listenTo(n,"edit",(function(){e._addFormView()})),this.listenTo(n,"unlink",(function(){t.execute("unlink"),e._hideUI()})),n.keystrokes.set("Esc",(function(t,n){e._hideUI(),n()})),n.keystrokes.set(Tp,(function(t,n){e._addFormView(),n()})),n}},{key:"_createFormView",value:function(){var e=this,t=this.editor,n=t.commands.get("link"),r=t.config.get("link.defaultProtocol"),i=new Lp(t.locale,n);return i.urlInputView.fieldView.bind("value").to(n,"value"),i.urlInputView.bind("isReadOnly").to(n,"isEnabled",(function(e){return!e})),i.saveButtonView.bind("isEnabled").to(n),this.listenTo(i,"submit",(function(){var n=Ip(i.urlInputView.fieldView.element.value,r);t.execute("link",n,i.getDecoratorSwitchesState()),e._closeFormView()})),this.listenTo(i,"cancel",(function(){e._closeFormView()})),i.keystrokes.set("Esc",(function(t,n){e._closeFormView(),n()})),i}},{key:"_createToolbarLinkButton",value:function(){var e=this,t=this.editor,n=t.commands.get("link"),r=t.t;t.keystrokes.set(Tp,(function(t,r){r(),n.isEnabled&&e._showUI(!0)})),t.ui.componentFactory.add("link",(function(t){var i=new zc(t);return i.isEnabled=!0,i.label=r("Link"),i.icon=Up.a,i.keystroke=Tp,i.tooltip=!0,i.isToggleable=!0,i.bind("isEnabled").to(n,"isEnabled"),i.bind("isOn").to(n,"value",(function(e){return!!e})),e.listenTo(i,"execute",(function(){return e._showUI(!0)})),i}))}},{key:"_enableUserBalloonInteractions",value:function(){var e=this;this.listenTo(this.editor.editing.view.document,"click",(function(){e._getSelectedLinkElement()&&e._showUI()})),this.editor.keystrokes.set("Tab",(function(t,n){e._areActionsVisible&&!e.actionsView.focusTracker.isFocused&&(e.actionsView.focus(),n())}),{priority:"high"}),this.editor.keystrokes.set("Esc",(function(t,n){e._isUIVisible&&(e._hideUI(),n())})),vc({emitter:this.formView,activator:function(){return e._isUIInPanel},contextElements:[this._balloon.view.element],callback:function(){return e._hideUI()}})}},{key:"_addActionsView",value:function(){this._areActionsInPanel||this._balloon.add({view:this.actionsView,position:this._getBalloonPositionData()})}},{key:"_addFormView",value:function(){if(!this._isFormInPanel){var e=this.editor.commands.get("link");this.formView.disableCssTransitions(),this._balloon.add({view:this.formView,position:this._getBalloonPositionData()}),this._balloon.visibleView===this.formView&&this.formView.urlInputView.fieldView.select(),this.formView.enableCssTransitions(),this.formView.urlInputView.fieldView.element.value=e.value||""}}},{key:"_closeFormView",value:function(){var e=this.editor.commands.get("link");e.restoreManualDecoratorStates(),void 0!==e.value?this._removeFormView():this._hideUI()}},{key:"_removeFormView",value:function(){this._isFormInPanel&&(this.formView.saveButtonView.focus(),this._balloon.remove(this.formView),this.editor.editing.view.focus(),this._hideFakeVisualSelection())}},{key:"_showUI",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this._getSelectedLinkElement()?(this._areActionsVisible?this._addFormView():this._addActionsView(),e&&this._balloon.showStack("main")):(this._showFakeVisualSelection(),this._addActionsView(),e&&this._balloon.showStack("main"),this._addFormView()),this._startUpdatingUI()}},{key:"_hideUI",value:function(){if(this._isUIInPanel){var e=this.editor;this.stopListening(e.ui,"update"),this.stopListening(this._balloon,"change:visibleView"),e.editing.view.focus(),this._removeFormView(),this._balloon.remove(this.actionsView),this._hideFakeVisualSelection()}}},{key:"_startUpdatingUI",value:function(){var e=this,t=this.editor,n=t.editing.view.document,r=this._getSelectedLinkElement(),i=a(),o=function(){var t=e._getSelectedLinkElement(),n=a();r&&!t||!r&&n!==i?e._hideUI():e._isUIVisible&&e._balloon.updatePosition(e._getBalloonPositionData()),r=t,i=n};function a(){return n.selection.focus.getAncestors().reverse().find((function(e){return e.is("element")}))}this.listenTo(t.ui,"update",o),this.listenTo(this._balloon,"change:visibleView",o)}},{key:"_isFormInPanel",get:function(){return this._balloon.hasView(this.formView)}},{key:"_areActionsInPanel",get:function(){return this._balloon.hasView(this.actionsView)}},{key:"_areActionsVisible",get:function(){return this._balloon.visibleView===this.actionsView}},{key:"_isUIInPanel",get:function(){return this._isFormInPanel||this._areActionsInPanel}},{key:"_isUIVisible",get:function(){return this._balloon.visibleView==this.formView||this._areActionsVisible}},{key:"_getBalloonPositionData",value:function(){var e=this.editor.editing.view,t=e.document,n=null;if(this.editor.model.markers.has(Wp)){var r=Array.from(this.editor.editing.mapper.markerNameToElements(Wp)),i=e.createRange(e.createPositionBefore(r[0]),e.createPositionAfter(r[r.length-1]));n=e.domConverter.viewRangeToDom(i)}else{var o=this._getSelectedLinkElement(),a=t.selection.getFirstRange();n=o?e.domConverter.mapViewToDom(o):e.domConverter.viewRangeToDom(a)}return{target:n}}},{key:"_getSelectedLinkElement",value:function(){var e=this.editor.editing.view,t=e.document.selection;if(t.isCollapsed)return Yp(t.getFirstPosition());var n=t.getFirstRange().getTrimmed(),r=Yp(n.start),i=Yp(n.end);return r&&r==i&&e.createRangeIn(r).getTrimmed().isEqual(n)?r:null}},{key:"_showFakeVisualSelection",value:function(){var e=this.editor.model;e.change((function(t){var n=e.document.selection.getFirstRange();if(e.markers.has(Wp))t.updateMarker(Wp,{range:n});else if(n.start.isAtEnd){var r=n.start.getLastMatchingPosition((function(t){var n=t.item;return!e.schema.isContent(n)}),{boundaries:n});t.addMarker(Wp,{usingOperation:!1,affectsData:!1,range:t.createRange(r,n.end)})}else t.addMarker(Wp,{usingOperation:!1,affectsData:!1,range:n})}))}},{key:"_hideFakeVisualSelection",value:function(){var e=this.editor.model;e.markers.has(Wp)&&e.change((function(e){e.removeMarker(Wp)}))}}],[{key:"requires",get:function(){return[Fl]}},{key:"pluginName",get:function(){return"LinkUI"}}]),n}(d);function Yp(e){return e.getAncestors().find((function(e){return function(e){return e.is("attributeElement")&&!!e.getCustomProperty("link")}(e)}))}var Gp=new RegExp("(^|\\s)(((?:(?:(?:https?|ftp):)?\\/\\/)(?:\\S+(?::\\S*)?@)?(?:(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(((?!www\\.)|(www\\.))(?![-_])(?:[-_a-z0-9\\u00a1-\\uffff]{1,63}\\.)+(?:[a-z\\u00a1-\\uffff]{2,63})))(?::\\d{2,5})?(?:[/?#]\\S*)?)|((www.|(\\S+@))((?![-_])(?:[-_a-z0-9\\u00a1-\\uffff]{1,63}\\.))+(?:[a-z\\u00a1-\\uffff]{2,63})))$","i"),Jp=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"init",value:function(){var e=this,t=this.editor.model.document.selection;t.on("change:range",(function(){e.isEnabled=!t.anchor.parent.is("element","codeBlock")})),this._enableTypingHandling()}},{key:"afterInit",value:function(){this._enableEnterHandling(),this._enableShiftEnterHandling()}},{key:"_enableTypingHandling",value:function(){var e=this,t=this.editor,n=new Nd(t.model,(function(e){if(function(e){return e.length>4&&" "===e[e.length-1]&&" "!==e[e.length-2]}(e)){var t=$p(e.substr(0,e.length-1));return t?{url:t}:void 0}})),r=t.plugins.get("Input");n.on("matched:data",(function(n,i){var o=i.batch,a=i.range,s=i.url;if(r.isInput(o)){var c=a.end.getShiftedBy(-1),l=c.getShiftedBy(-s.length),u=t.model.createRange(l,c);e._applyAutoLink(s,u)}})),n.bind("isEnabled").to(this)}},{key:"_enableEnterHandling",value:function(){var e=this,t=this.editor,n=t.model,r=t.commands.get("enter");r&&r.on("execute",(function(){var t=n.document.selection.getFirstPosition();if(t.parent.previousSibling){var r=n.createRangeIn(t.parent.previousSibling);e._checkAndApplyAutoLinkOnRange(r)}}))}},{key:"_enableShiftEnterHandling",value:function(){var e=this,t=this.editor,n=t.model,r=t.commands.get("shiftEnter");r&&r.on("execute",(function(){var t=n.document.selection.getFirstPosition(),r=n.createRange(n.createPositionAt(t.parent,0),t.getShiftedBy(-1));e._checkAndApplyAutoLinkOnRange(r)}))}},{key:"_checkAndApplyAutoLinkOnRange",value:function(e){var t=this.editor.model,n=Md(e,t),r=n.text,i=n.range,o=$p(r);if(o){var a=t.createRange(i.end.getShiftedBy(-o.length),i.end);this._applyAutoLink(o,a)}}},{key:"_applyAutoLink",value:function(e,t){var n=this,r=this.editor.model;this.isEnabled&&function(e,t){return t.schema.checkAttributeInSelection(t.createSelection(e),"linkHref")}(t,r)&&r.enqueueChange((function(r){var i=n.editor.config.get("link.defaultProtocol"),o=Ip(e,i);r.setAttribute("linkHref",o,t)}))}}],[{key:"pluginName",get:function(){return"AutoLink"}}]),n}(d);function $p(e){var t=Gp.exec(e);return t?t[2]:null}var Kp=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var i;return _classCallCheck(this,n),(i=t.call(this,e)).type=r,i}return _createClass(n,[{key:"refresh",value:function(){this.value=this._getValue(),this.isEnabled=this._checkEnabled()}},{key:"execute",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this.editor.model,r=Array.from(n.document.selection.getSelectedBlocks()).filter((function(e){return Zp(e,n.schema)})),i=void 0!==t.forceValue?!t.forceValue:this.value;n.change((function(t){if(i){for(var n=r[r.length-1].nextSibling,o=Number.POSITIVE_INFINITY,a=[];n&&"listItem"==n.name&&0!==n.getAttribute("listIndent");){var s=n.getAttribute("listIndent");s<o&&(o=s),a.push({element:n,listIndent:s-o}),n=n.nextSibling}var c,l=_createForOfIteratorHelper(a=a.reverse());try{for(l.s();!(c=l.n()).done;){var u=c.value;t.setAttribute("listIndent",u.listIndent,u.element)}}catch(y){l.e(y)}finally{l.f()}}if(!i){var d,f=Number.POSITIVE_INFINITY,h=_createForOfIteratorHelper(r);try{for(h.s();!(d=h.n()).done;){var p=d.value;p.is("element","listItem")&&p.getAttribute("listIndent")<f&&(f=p.getAttribute("listIndent"))}}catch(y){h.e(y)}finally{h.f()}Qp(r,!0,f=0===f?1:f),Qp(r,!1,f)}var v,g=_createForOfIteratorHelper(r.reverse());try{for(g.s();!(v=g.n()).done;){var m=v.value;i&&"listItem"==m.name?t.rename(m,"paragraph"):i||"listItem"==m.name?i||"listItem"!=m.name||m.getAttribute("listType")==e.type||t.setAttribute("listType",e.type,m):(t.setAttributes({listType:e.type,listIndent:0},m),t.rename(m,"listItem"))}}catch(y){g.e(y)}finally{g.f()}e.fire("_executeCleanup",r)}))}},{key:"_getValue",value:function(){var e=Si(this.editor.model.document.selection.getSelectedBlocks());return!!e&&e.is("element","listItem")&&e.getAttribute("listType")==this.type}},{key:"_checkEnabled",value:function(){if(this.value)return!0;var e=this.editor.model.schema,t=Si(this.editor.model.document.selection.getSelectedBlocks());return!!t&&Zp(t,e)}}]),n}(h);function Qp(e,t,n){var r=t?e[0]:e[e.length-1];if(r.is("element","listItem"))for(var i=r[t?"previousSibling":"nextSibling"],o=r.getAttribute("listIndent");i&&i.is("element","listItem")&&i.getAttribute("listIndent")>=n;)o>i.getAttribute("listIndent")&&(o=i.getAttribute("listIndent")),i.getAttribute("listIndent")==o&&e[t?"unshift":"push"](i),i=i[t?"previousSibling":"nextSibling"]}function Zp(e,t){return t.checkChild(e.parent,"listItem")&&!t.isObject(e)}var Xp=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var i;return _classCallCheck(this,n),(i=t.call(this,e))._indentBy="forward"==r?1:-1,i}return _createClass(n,[{key:"refresh",value:function(){this.isEnabled=this._checkEnabled()}},{key:"execute",value:function(){var e=this,t=this.editor.model,n=Array.from(t.document.selection.getSelectedBlocks());t.change((function(t){for(var r=n[n.length-1],i=r.nextSibling;i&&"listItem"==i.name&&i.getAttribute("listIndent")>r.getAttribute("listIndent");)n.push(i),i=i.nextSibling;e._indentBy<0&&(n=n.reverse());var o,a=_createForOfIteratorHelper(n);try{for(a.s();!(o=a.n()).done;){var s=o.value,c=s.getAttribute("listIndent")+e._indentBy;c<0?t.rename(s,"paragraph"):t.setAttribute("listIndent",c,s)}}catch(l){a.e(l)}finally{a.f()}e.fire("_executeCleanup",n)}))}},{key:"_checkEnabled",value:function(){var e=Si(this.editor.model.document.selection.getSelectedBlocks());if(!e||!e.is("element","listItem"))return!1;if(this._indentBy>0){for(var t=e.getAttribute("listIndent"),n=e.getAttribute("listType"),r=e.previousSibling;r&&r.is("element","listItem")&&r.getAttribute("listIndent")>=t;){if(r.getAttribute("listIndent")==t)return r.getAttribute("listType")==n;r=r.previousSibling}return!1}return!0}}]),n}(h);function ev(e,t,n,r){var i=t.parent,o=n.mapper,a=n.writer,s=o.toViewPosition(r.createPositionBefore(e)),c=rv(e.previousSibling,{sameIndent:!0,smallerIndent:!0,listIndent:e.getAttribute("listIndent")}),l=e.previousSibling;if(c&&c.getAttribute("listIndent")==e.getAttribute("listIndent")){var u=o.toViewElement(c);s=a.breakContainer(a.createPositionAfter(u))}else if(l&&"listItem"==l.name){s=o.toViewPosition(r.createPositionAt(l,"end"));var d=o.findMappedViewAncestor(s),f=function(e){var t,n=_createForOfIteratorHelper(e.getChildren());try{for(n.s();!(t=n.n()).done;){var r=t.value;if("ul"==r.name||"ol"==r.name)return r}}catch(i){n.e(i)}finally{n.f()}return null}(d);s=f?a.createPositionBefore(f):a.createPositionAt(d,"end")}else s=o.toViewPosition(r.createPositionBefore(e));if(s=nv(s),a.insert(s,i),l&&"listItem"==l.name){var h,p=o.toViewElement(l),v=a.createRange(a.createPositionAt(p,0),s).getWalker({ignoreElementEnd:!0}),g=_createForOfIteratorHelper(v);try{for(g.s();!(h=g.n()).done;){var m=h.value;if(m.item.is("element","li")){var y=a.breakContainer(a.createPositionBefore(m.item)),k=m.item.parent,_=a.createPositionAt(t,"end");tv(a,_.nodeBefore,_.nodeAfter),a.move(a.createRangeOn(k),_),v.position=y}}}catch(S){g.e(S)}finally{g.f()}}else{var b=i.nextSibling;if(b&&(b.is("element","ul")||b.is("element","ol"))){var w,x=null,C=_createForOfIteratorHelper(b.getChildren());try{for(C.s();!(w=C.n()).done;){var T=w.value,A=o.toModelElement(T);if(!(A&&A.getAttribute("listIndent")>e.getAttribute("listIndent")))break;x=T}}catch(S){C.e(S)}finally{C.f()}x&&(a.breakContainer(a.createPositionAfter(x)),a.move(a.createRangeOn(x.parent),a.createPositionAt(t,"end")))}}tv(a,i,i.nextSibling),tv(a,i.previousSibling,i)}function tv(e,t,n){return!t||!n||"ul"!=t.name&&"ol"!=t.name||t.name!=n.name||t.getAttribute("class")!==n.getAttribute("class")?null:e.mergeContainers(e.createPositionAfter(t))}function nv(e){return e.getLastMatchingPosition((function(e){return e.item.is("uiElement")}))}function rv(e,t){for(var n=!!t.sameIndent,r=!!t.smallerIndent,i=t.listIndent,o=e;o&&"listItem"==o.name;){var a=o.getAttribute("listIndent");if(n&&i==a||r&&i>a)return o;o="forward"===t.direction?o.nextSibling:o.previousSibling}return null}function iv(e,t,n,r){e.ui.componentFactory.add(t,(function(i){var o=e.commands.get(t),a=new zc(i);return a.set({label:n,icon:r,tooltip:!0,isToggleable:!0}),a.bind("isOn","isEnabled").to(o,"value","isEnabled"),a.on("execute",(function(){e.execute(t),e.editing.view.focus()})),a}))}function ov(){var e=!this.isEmpty&&("ul"==this.getChild(0).name||"ol"==this.getChild(0).name);return this.isEmpty||e?0:Kt.call(this)}function av(e){return function(t,n,r){var i=r.consumable;if(i.test(n.item,"insert")&&i.test(n.item,"attribute:listType")&&i.test(n.item,"attribute:listIndent")){i.consume(n.item,"insert"),i.consume(n.item,"attribute:listType"),i.consume(n.item,"attribute:listIndent");var o=n.item;ev(o,function(e,t){var n=t.mapper,r=t.writer,i="numbered"==e.getAttribute("listType")?"ol":"ul",o=function(e){var t=e.createContainerElement("li");return t.getFillerOffset=ov,t}(r),a=r.createContainerElement(i,null);return r.insert(r.createPositionAt(a,0),o),n.bindElements(e,o),o}(o,r),r,e)}}}function sv(e,t,n){if(n.consumable.consume(t.item,"attribute:listType")){var r=n.mapper.toViewElement(t.item),i=n.writer;i.breakContainer(i.createPositionBefore(r)),i.breakContainer(i.createPositionAfter(r)),i.rename("numbered"==t.attributeNewValue?"ol":"ul",r.parent)}}function cv(e,t,n){var r=n.mapper.toViewElement(t.item).parent,i=n.writer;tv(i,r,r.nextSibling),tv(i,r.previousSibling,r);var o,a=_createForOfIteratorHelper(t.item.getChildren());try{for(a.s();!(o=a.n()).done;){var s=o.value;n.consumable.consume(s,"insert")}}catch(c){a.e(c)}finally{a.f()}}function lv(e,t,n){if("listItem"!=t.item.name){for(var r=n.mapper.toViewPosition(t.range.start),i=n.writer,o=[];("ul"==r.parent.name||"ol"==r.parent.name)&&"li"==(r=i.breakContainer(r)).parent.name;){var a=r,s=i.createPositionAt(r.parent,"end");if(!a.isEqual(s)){var c=i.remove(i.createRange(a,s));o.push(c)}r=i.createPositionAfter(r.parent)}if(o.length>0){for(var l=0;l<o.length;l++){var u=r.nodeBefore;if(r=i.insert(r,o[l]).end,l>0){var d=tv(i,u,u.nextSibling);d&&d.parent==u&&r.offset--}}tv(i,r.nodeBefore,r.nodeAfter)}}}function uv(e,t,n){var r=n.mapper.toViewPosition(t.position);tv(n.writer,r.nodeBefore,r.nodeAfter)}function dv(e,t,n){if(n.consumable.consume(t.viewItem,{name:!0})){var r=n.writer,i=r.createElement("listItem"),o=function(e){for(var t=0,n=e.parent;n;){if(n.is("element","li"))t++;else{var r=n.previousSibling;r&&r.is("element","li")&&t++}n=n.parent}return t}(t.viewItem);if(r.setAttribute("listIndent",o,i),r.setAttribute("listType",t.viewItem.parent&&"ol"==t.viewItem.parent.name?"numbered":"bulleted",i),!n.safeInsert(i,t.modelCursor))return;var a=function(e,t,n){var r,i=n.writer,o=n.schema,a=i.createPositionAfter(e),s=_createForOfIteratorHelper(t);try{for(s.s();!(r=s.n()).done;){var c=r.value;if("ul"==c.name||"ol"==c.name)a=n.convertItem(c,a).modelCursor;else{var l=n.convertItem(c,i.createPositionAt(e,"end")),u=l.modelRange.start.nodeAfter;u&&u.is("element")&&!o.checkChild(e,u.name)&&(e=l.modelCursor.parent.is("element","listItem")?l.modelCursor.parent:gv(l.modelCursor),a=i.createPositionAfter(e))}}}catch(d){s.e(d)}finally{s.f()}return a}(i,t.viewItem.getChildren(),n);t.modelRange=r.createRange(t.modelCursor,a),n.updateConversionResult(i,t)}}function fv(e,t,n){if(n.consumable.test(t.viewItem,{name:!0}))for(var r=0,i=Array.from(t.viewItem.getChildren());r<i.length;r++){var o=i[r];!o.is("element","li")&&!yv(o)&&o._remove()}}function hv(e,t,n){if(n.consumable.test(t.viewItem,{name:!0})){if(0===t.viewItem.childCount)return;var r,i=!1,o=!0,a=_createForOfIteratorHelper(_toConsumableArray(t.viewItem.getChildren()));try{for(a.s();!(r=a.n()).done;){var s=r.value;i&&!yv(s)&&s._remove(),s.is("$text")?(o&&(s._data=s.data.trimStart()),s.nextSibling&&!yv(s.nextSibling)||(s._data=s.data.trimEnd())):yv(s)&&(i=!0),o=!1}}catch(c){a.e(c)}finally{a.f()}}}function pv(e){return function(t,n){if(!n.isPhantom){var r=n.modelPosition.nodeBefore;if(r&&r.is("element","listItem")){var i,o=n.mapper.toViewElement(r),a=o.getAncestors().find(yv),s=_createForOfIteratorHelper(e.createPositionAt(o,0).getWalker());try{for(s.s();!(i=s.n()).done;){var c=i.value;if("elementStart"==c.type&&c.item.is("element","li")){n.viewPosition=c.previousPosition;break}if("elementEnd"==c.type&&c.item==a){n.viewPosition=c.nextPosition;break}}}catch(l){s.e(l)}finally{s.f()}}}}}function vv(e,t){var n,r=_slicedToArray(t,2),i=r[0],o=r[1],a=i.is("documentFragment")?i.getChild(0):i;if(n=o?this.createSelection(o):this.document.selection,a&&a.is("element","listItem")){var s=n.getFirstPosition(),c=null;if(s.parent.is("element","listItem")?c=s.parent:s.nodeBefore&&s.nodeBefore.is("element","listItem")&&(c=s.nodeBefore),c){var l=c.getAttribute("listIndent");if(l>0)for(;a&&a.is("element","listItem");)a._setAttribute("listIndent",a.getAttribute("listIndent")+l),a=a.nextSibling}}}function gv(e){var t,n=new Ji({startPosition:e});do{t=n.next()}while(!t.value.item.is("element","listItem"));return t.value.item}function mv(e,t,n,r,i,o){var a,s=rv(t.nodeBefore,{sameIndent:!0,smallerIndent:!0,listIndent:e,foo:"b"}),c=i.mapper,l=i.writer,u=s?s.getAttribute("listIndent"):null;if(s)if(u==e){var d=c.toViewElement(s).parent;a=l.createPositionAfter(d)}else{var f=o.createPositionAt(s,"end");a=c.toViewPosition(f)}else a=n;a=nv(a);for(var h=0,p=_toConsumableArray(r.getChildren());h<p.length;h++){var v=p[h];yv(v)&&(a=l.move(l.createRangeOn(v),a).end,tv(l,v,v.nextSibling),tv(l,v.previousSibling,v))}}function yv(e){return e.is("element","ol")||e.is("element","ul")}var kv=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"init",value:function(){var e=this,t=this.editor;t.model.schema.register("listItem",{inheritAllFrom:"$block",allowAttributes:["listType","listIndent"]});var n=t.data,r=t.editing;t.model.document.registerPostFixer((function(e){return function(e,t){var n,r=e.document.differ.getChanges(),i=new Map,o=!1,a=_createForOfIteratorHelper(r);try{for(a.s();!(n=a.n()).done;){var s=n.value;if("insert"==s.type&&"listItem"==s.name)p(s.position);else if("insert"==s.type&&"listItem"!=s.name){if("$text"!=s.name){var c=s.position.nodeAfter;c.hasAttribute("listIndent")&&(t.removeAttribute("listIndent",c),o=!0),c.hasAttribute("listType")&&(t.removeAttribute("listType",c),o=!0),c.hasAttribute("listStyle")&&(t.removeAttribute("listStyle",c),o=!0);var l,u=_createForOfIteratorHelper(Array.from(e.createRangeIn(c)).filter((function(e){return e.item.is("element","listItem")})));try{for(u.s();!(l=u.n()).done;){p(l.value.previousPosition)}}catch(m){u.e(m)}finally{u.f()}}p(s.position.getShiftedBy(s.length))}else"remove"==s.type&&"listItem"==s.name?p(s.position):("attribute"==s.type&&"listIndent"==s.attributeKey||"attribute"==s.type&&"listType"==s.attributeKey)&&p(s.range.start)}}catch(m){a.e(m)}finally{a.f()}var d,f=_createForOfIteratorHelper(i.values());try{for(f.s();!(d=f.n()).done;){var h=d.value;v(h),g(h)}}catch(m){f.e(m)}finally{f.f()}return o;function p(e){var t=e.nodeBefore;if(t&&t.is("element","listItem")){var n=t;if(i.has(n))return;for(var r=n.previousSibling;r&&r.is("element","listItem");r=n.previousSibling)if(n=r,i.has(n))return;i.set(t,n)}else{var o=e.nodeAfter;o&&o.is("element","listItem")&&i.set(o,o)}}function v(e){for(var n=0,r=null;e&&e.is("element","listItem");){var i=e.getAttribute("listIndent");if(i>n){var a=void 0;null===r?(r=i-n,a=n):(r>i&&(r=i),a=i-r),t.setAttribute("listIndent",a,e),o=!0}else r=null,n=e.getAttribute("listIndent")+1;e=e.nextSibling}}function g(e){for(var n=[],r=null;e&&e.is("element","listItem");){var i=e.getAttribute("listIndent");if(r&&r.getAttribute("listIndent")>i&&(n=n.slice(0,i+1)),0!=i)if(n[i]){var a=n[i];e.getAttribute("listType")!=a&&(t.setAttribute("listType",a,e),o=!0)}else n[i]=e.getAttribute("listType");r=e,e=e.nextSibling}}}(t.model,e)})),r.mapper.registerViewToModelLength("li",_v),n.mapper.registerViewToModelLength("li",_v),r.mapper.on("modelToViewPosition",pv(r.view)),r.mapper.on("viewToModelPosition",function(e){return function(t,n){var r=n.viewPosition,i=r.parent,o=n.mapper;if("ul"==i.name||"ol"==i.name){if(r.isAtEnd){var a=o.toModelElement(r.nodeBefore),s=o.getModelLength(r.nodeBefore);n.modelPosition=e.createPositionBefore(a).getShiftedBy(s)}else{var c=o.toModelElement(r.nodeAfter);n.modelPosition=e.createPositionBefore(c)}t.stop()}else if("li"==i.name&&r.nodeBefore&&("ul"==r.nodeBefore.name||"ol"==r.nodeBefore.name)){for(var l=o.toModelElement(i),u=1,d=r.nodeBefore;d&&yv(d);)u+=o.getModelLength(d),d=d.previousSibling;n.modelPosition=e.createPositionBefore(l).getShiftedBy(u),t.stop()}}}(t.model)),n.mapper.on("modelToViewPosition",pv(r.view)),t.conversion.for("editingDowncast").add((function(e){e.on("insert",lv,{priority:"high"}),e.on("insert:listItem",av(t.model)),e.on("attribute:listType:listItem",sv,{priority:"high"}),e.on("attribute:listType:listItem",cv,{priority:"low"}),e.on("attribute:listIndent:listItem",function(e){return function(t,n,r){if(r.consumable.consume(n.item,"attribute:listIndent")){var i=r.mapper.toViewElement(n.item),o=r.writer;o.breakContainer(o.createPositionBefore(i)),o.breakContainer(o.createPositionAfter(i));var a=i.parent,s=a.previousSibling,c=o.createRangeOn(a);o.remove(c),s&&s.nextSibling&&tv(o,s,s.nextSibling),mv(n.attributeOldValue+1,n.range.start,c.start,i,r,e),ev(n.item,i,r,e);var l,u=_createForOfIteratorHelper(n.item.getChildren());try{for(u.s();!(l=u.n()).done;){var d=l.value;r.consumable.consume(d,"insert")}}catch(f){u.e(f)}finally{u.f()}}}}(t.model)),e.on("remove:listItem",function(e){return function(t,n,r){var i=r.mapper.toViewPosition(n.position).getLastMatchingPosition((function(e){return!e.item.is("element","li")})).nodeAfter,o=r.writer;o.breakContainer(o.createPositionBefore(i)),o.breakContainer(o.createPositionAfter(i));var a=i.parent,s=a.previousSibling,c=o.createRangeOn(a),l=o.remove(c);s&&s.nextSibling&&tv(o,s,s.nextSibling),mv(r.mapper.toModelElement(i).getAttribute("listIndent")+1,n.position,c.start,i,r,e);var u,d=_createForOfIteratorHelper(o.createRangeIn(l).getItems());try{for(d.s();!(u=d.n()).done;){var f=u.value;r.mapper.unbindViewElement(f)}}catch(h){d.e(h)}finally{d.f()}t.stop()}}(t.model)),e.on("remove",uv,{priority:"low"})})),t.conversion.for("dataDowncast").add((function(e){e.on("insert",lv,{priority:"high"}),e.on("insert:listItem",av(t.model))})),t.conversion.for("upcast").add((function(e){e.on("element:ul",fv,{priority:"high"}),e.on("element:ol",fv,{priority:"high"}),e.on("element:li",hv,{priority:"high"}),e.on("element:li",dv)})),t.model.on("insertContent",vv,{priority:"high"}),t.commands.add("numberedList",new Kp(t,"numbered")),t.commands.add("bulletedList",new Kp(t,"bulleted")),t.commands.add("indentList",new Xp(t,"forward")),t.commands.add("outdentList",new Xp(t,"backward"));var i=r.view.document;this.listenTo(i,"enter",(function(t,n){var r=e.editor.model.document,i=r.selection.getLastPosition().parent;r.selection.isCollapsed&&"listItem"==i.name&&i.isEmpty&&(e.editor.execute("outdentList"),n.preventDefault(),t.stop())}),{context:"li"}),this.listenTo(i,"delete",(function(t,n){if("backward"===n.direction){var r=e.editor.model.document.selection;if(r.isCollapsed){var i=r.getFirstPosition();if(i.isAtStart){var o=i.parent;"listItem"===o.name&&(o.previousSibling&&"listItem"===o.previousSibling.name||(e.editor.execute("outdentList"),n.preventDefault(),t.stop()))}}}}),{context:"li"});var o=function(t){return function(n,r){e.editor.commands.get(t).isEnabled&&(e.editor.execute(t),r())}};t.keystrokes.set("Tab",o("indentList")),t.keystrokes.set("Shift+Tab",o("outdentList"))}},{key:"afterInit",value:function(){var e=this.editor.commands,t=e.get("indent"),n=e.get("outdent");t&&t.registerChildCommand(e.get("indentList")),n&&n.registerChildCommand(e.get("outdentList"))}}],[{key:"pluginName",get:function(){return"ListEditing"}},{key:"requires",get:function(){return[_u,Cu]}}]),n}(d);function _v(e){var t,n=1,r=_createForOfIteratorHelper(e.getChildren());try{for(r.s();!(t=r.n()).done;){var i=t.value;if("ul"==i.name||"ol"==i.name){var o,a=_createForOfIteratorHelper(i.getChildren());try{for(a.s();!(o=a.n()).done;){n+=_v(o.value)}}catch(s){a.e(s)}finally{a.f()}}}}catch(s){r.e(s)}finally{r.f()}return n}var bv=n(154),wv=n.n(bv),xv=n(155),Cv=n.n(xv),Tv=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"init",value:function(){var e=this.editor.t;iv(this.editor,"numberedList",e("Numbered List"),wv.a),iv(this.editor,"bulletedList",e("Bulleted List"),Cv.a)}}],[{key:"pluginName",get:function(){return"ListUI"}}]),n}(d),Av=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,null,[{key:"requires",get:function(){return[kv,Tv]}},{key:"pluginName",get:function(){return"List"}}]),n}(d);function Sv(e,t){return function(e){e.on("attribute:url:media",n)};function n(n,r,i){if(i.consumable.consume(r.item,n.name)){var o=r.attributeNewValue,a=i.writer,s=i.mapper.toViewElement(r.item),c=_toConsumableArray(s.getChildren()).find((function(e){return e.getCustomProperty("media-content")}));a.remove(c);var l=e.getMediaViewElement(a,o,t);a.insert(a.createPositionAt(s,0),l)}}}function Ev(e,t,n,r){var i=e.createContainerElement("figure",{class:"media"});return e.insert(e.createPositionAt(i,0),t.getMediaViewElement(e,n,r)),i}function Iv(e){var t=e.getSelectedElement();return t&&t.is("element","media")?t:null}function Ov(e,t,n){e.change((function(r){var i=r.createElement("media",{url:t});e.insertContent(i,n),r.setSelection(i,"on")}))}var Rv=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"refresh",value:function(){var e=this.editor.model,t=e.document.selection,n=e.schema,r=Iv(t);this.value=r?r.getAttribute("url"):null,this.isEnabled=function(e){var t=e.getSelectedElement();return!!t&&"media"===t.name}(t)||function(e,t){var n=Vu(e,t).parent;return n.isEmpty&&!t.schema.isLimit(n)&&(n=n.parent),t.schema.checkChild(n,"media")}(t,e)&&!Bu(t,n)}},{key:"execute",value:function(e){var t=this.editor.model,n=t.document.selection,r=Iv(n);if(r)t.change((function(t){t.setAttribute("url",e,r)}));else{var i=Vu(n,t);Ov(t,e,i)}}}]),n}(h),Pv=n(156),Mv=n.n(Pv),Nv=function(){function e(t,n){_classCallCheck(this,e);var r=n.providers,i=n.extraProviders||[],o=new Set(n.removeProviders),a=r.concat(i).filter((function(e){var t=e.name;return t?!o.has(t):(Object(Ke.logWarning)("media-embed-no-provider-name",{provider:e}),!1)}));this.locale=t,this.providerDefinitions=a}return _createClass(e,[{key:"hasMedia",value:function(e){return!!this._getMedia(e)}},{key:"getMediaViewElement",value:function(e,t,n){return this._getMedia(t).getViewElement(e,n)}},{key:"_getMedia",value:function(e){if(!e)return new Dv(this.locale);e=e.trim();var t,n=_createForOfIteratorHelper(this.providerDefinitions);try{for(n.s();!(t=n.n()).done;){var r,i=t.value,o=i.html,a=_createForOfIteratorHelper(Xe(i.url));try{for(a.s();!(r=a.n()).done;){var s=r.value,c=this._getUrlMatches(e,s);if(c)return new Dv(this.locale,e,c,o)}}catch(l){a.e(l)}finally{a.f()}}}catch(l){n.e(l)}finally{n.f()}return null}},{key:"_getUrlMatches",value:function(e,t){var n=e.match(t);if(n)return n;var r=e.replace(/^https?:\/\//,"");return(n=r.match(t))?n:(n=(r=r.replace(/^www\./,"")).match(t))||null}}]),e}(),Dv=function(){function e(t,n,r,i){_classCallCheck(this,e),this.url=this._getValidUrl(n),this._t=t.t,this._match=r,this._previewRenderer=i}return _createClass(e,[{key:"getViewElement",value:function(e,t){var n,r={};if(t.renderForEditingView||t.renderMediaPreview&&this.url&&this._previewRenderer){this.url&&(r["data-oembed-url"]=this.url),t.renderForEditingView&&(r.class="ck-media__wrapper");var i=this._getPreviewHtml(t);n=e.createRawElement("div",r,(function(e){e.innerHTML=i}))}else this.url&&(r.url=this.url),n=e.createEmptyElement(t.elementName,r);return e.setCustomProperty("media-content",!0,n),n}},{key:"_getPreviewHtml",value:function(e){return this._previewRenderer?this._previewRenderer(this._match):this.url&&e.renderForEditingView?this._getPlaceholderHtml():""}},{key:"_getPlaceholderHtml",value:function(){var e=new Bc,t=new Vc;return e.text=this._t("Open media in new tab"),t.content=Mv.a,t.viewBox="0 0 64 42",new _c({tag:"div",attributes:{class:"ck ck-reset_all ck-media__placeholder"},children:[{tag:"div",attributes:{class:"ck-media__placeholder__icon"},children:[t]},{tag:"a",attributes:{class:"ck-media__placeholder__url",target:"_blank",rel:"noopener noreferrer",href:this.url},children:[{tag:"span",attributes:{class:"ck-media__placeholder__url__text"},children:[this.url]},e]}]}).render().outerHTML}},{key:"_getValidUrl",value:function(e){return e?e.match(/^https?/)?e:"https://"+e:null}}]),e}();n(258);var Fv=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),r=t.call(this,e),e.config.define("mediaEmbed",{elementName:"oembed",providers:[{name:"dailymotion",url:/^dailymotion\.com\/video\/(\w+)/,html:function(e){return'<div style="position: relative; padding-bottom: 100%; height: 0; "><iframe src="https://www.dailymotion.com/embed/video/'.concat(e[1],'" style="position: absolute; width: 100%; height: 100%; top: 0; left: 0;" frameborder="0" width="480" height="270" allowfullscreen allow="autoplay"></iframe></div>')}},{name:"spotify",url:[/^open\.spotify\.com\/(artist\/\w+)/,/^open\.spotify\.com\/(album\/\w+)/,/^open\.spotify\.com\/(track\/\w+)/],html:function(e){return'<div style="position: relative; padding-bottom: 100%; height: 0; padding-bottom: 126%;"><iframe src="https://open.spotify.com/embed/'.concat(e[1],'" style="position: absolute; width: 100%; height: 100%; top: 0; left: 0;" frameborder="0" allowtransparency="true" allow="encrypted-media"></iframe></div>')}},{name:"youtube",url:[/^(?:m\.)?youtube\.com\/watch\?v=([\w-]+)/,/^(?:m\.)?youtube\.com\/v\/([\w-]+)/,/^youtube\.com\/embed\/([\w-]+)/,/^youtu\.be\/([\w-]+)/],html:function(e){return'<div style="position: relative; padding-bottom: 100%; height: 0; padding-bottom: 56.2493%;"><iframe src="https://www.youtube.com/embed/'.concat(e[1],'" style="position: absolute; width: 100%; height: 100%; top: 0; left: 0;" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div>')}},{name:"vimeo",url:[/^vimeo\.com\/(\d+)/,/^vimeo\.com\/[^/]+\/[^/]+\/video\/(\d+)/,/^vimeo\.com\/album\/[^/]+\/video\/(\d+)/,/^vimeo\.com\/channels\/[^/]+\/(\d+)/,/^vimeo\.com\/groups\/[^/]+\/videos\/(\d+)/,/^vimeo\.com\/ondemand\/[^/]+\/(\d+)/,/^player\.vimeo\.com\/video\/(\d+)/],html:function(e){return'<div style="position: relative; padding-bottom: 100%; height: 0; padding-bottom: 56.2493%;"><iframe src="https://player.vimeo.com/video/'.concat(e[1],'" style="position: absolute; width: 100%; height: 100%; top: 0; left: 0;" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe></div>')}},{name:"instagram",url:/^instagram\.com\/p\/(\w+)/},{name:"twitter",url:/^twitter\.com/},{name:"googleMaps",url:/^google\.com\/maps/},{name:"flickr",url:/^flickr\.com/},{name:"facebook",url:/^facebook\.com/}]}),r.registry=new Nv(e.locale,e.config.get("mediaEmbed")),r}return _createClass(n,[{key:"init",value:function(){var e=this.editor,t=e.model.schema,n=e.t,r=e.conversion,i=e.config.get("mediaEmbed.previewsInData"),o=e.config.get("mediaEmbed.elementName"),a=this.registry;e.commands.add("mediaEmbed",new Rv(e)),t.register("media",{isObject:!0,isBlock:!0,allowWhere:"$block",allowAttributes:["url"]}),r.for("dataDowncast").elementToElement({model:"media",view:function(e,t){var n=t.writer,r=e.getAttribute("url");return Ev(n,a,r,{elementName:o,renderMediaPreview:r&&i})}}),r.for("dataDowncast").add(Sv(a,{elementName:o,renderMediaPreview:i})),r.for("editingDowncast").elementToElement({model:"media",view:function(e,t){var r=t.writer,i=e.getAttribute("url");return function(e,t,n){return t.setCustomProperty("media",!0,e),Mu(e,t,{label:n})}(Ev(r,a,i,{elementName:o,renderForEditingView:!0}),r,n("media widget"))}}),r.for("editingDowncast").add(Sv(a,{elementName:o,renderForEditingView:!0})),r.for("upcast").elementToElement({view:function(e){return["oembed",o].includes(e.name)&&e.getAttribute("url")?{name:!0}:null},model:function(e,t){var n=t.writer,r=e.getAttribute("url");if(a.hasMedia(r))return n.createElement("media",{url:r})}}).elementToElement({view:{name:"div",attributes:{"data-oembed-url":!0}},model:function(e,t){var n=t.writer,r=e.getAttribute("data-oembed-url");if(a.hasMedia(r))return n.createElement("media",{url:r})}})}}],[{key:"pluginName",get:function(){return"MediaEmbedEditing"}}]),n}(d),jv=/^(?:http(s)?:\/\/)?[\w-]+\.[\w-.~:/?#[\]@!$&'()*+,;=%]+$/,Lv=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this,e))._timeoutId=null,r._positionToInsert=null,r}return _createClass(n,[{key:"init",value:function(){var e=this,t=this.editor,n=t.model.document;this.listenTo(t.plugins.get("ClipboardPipeline"),"inputTransformation",(function(){var t=n.selection.getFirstRange(),r=Ka.fromPosition(t.start);r.stickiness="toPrevious";var i=Ka.fromPosition(t.end);i.stickiness="toNext",n.once("change:data",(function(){e._embedMediaBetweenPositions(r,i),r.detach(),i.detach()}),{priority:"high"})})),t.commands.get("undo").on("execute",(function(){e._timeoutId&&(mr.window.clearTimeout(e._timeoutId),e._positionToInsert.detach(),e._timeoutId=null,e._positionToInsert=null)}),{priority:"high"})}},{key:"_embedMediaBetweenPositions",value:function(e,t){var n,r=this,i=this.editor,o=i.plugins.get(Fv).registry,a=new po(e,t),s=a.getWalker({ignoreElementEnd:!0}),c="",l=_createForOfIteratorHelper(s);try{for(l.s();!(n=l.n()).done;){var u=n.value;u.item.is("$textProxy")&&(c+=u.item.data)}}catch(d){l.e(d)}finally{l.f()}(c=c.trim()).match(jv)&&o.hasMedia(c)&&i.commands.get("mediaEmbed").isEnabled?(this._positionToInsert=Ka.fromPosition(e),this._timeoutId=mr.window.setTimeout((function(){i.model.change((function(e){var t;r._timeoutId=null,e.remove(a),a.detach(),"$graveyard"!==r._positionToInsert.root.rootName&&(t=r._positionToInsert),Ov(i.model,c,t),r._positionToInsert.detach(),r._positionToInsert=null}))}),100)):a.detach()}}],[{key:"requires",get:function(){return[fd,ef]}},{key:"pluginName",get:function(){return"AutoMediaEmbed"}}]),n}(d);n(260);var Vv=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var i;_classCallCheck(this,n),i=t.call(this,r);var o=r.t;return i.focusTracker=new Ei,i.keystrokes=new Ii,i.set("mediaURLInputValue",""),i.urlInputView=i._createUrlInput(),i.saveButtonView=i._createButton(o("Save"),pc.check,"ck-button-save"),i.saveButtonView.type="submit",i.saveButtonView.bind("isEnabled").to(_assertThisInitialized(i),"mediaURLInputValue",(function(e){return!!e})),i.cancelButtonView=i._createButton(o("Cancel"),pc.cancel,"ck-button-cancel","cancel"),i._focusables=new yc,i._focusCycler=new qc({focusables:i._focusables,focusTracker:i.focusTracker,keystrokeHandler:i.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),i._validators=e,i.setTemplate({tag:"form",attributes:{class:["ck","ck-media-form","ck-responsive-form"],tabindex:"-1"},children:[i.urlInputView,i.saveButtonView,i.cancelButtonView]}),gc(_assertThisInitialized(i)),i}return _createClass(n,[{key:"render",value:function(){var e=this;_get3(_getPrototypeOf(n.prototype),"render",this).call(this),mc({view:this}),[this.urlInputView,this.saveButtonView,this.cancelButtonView].forEach((function(t){e._focusables.add(t),e.focusTracker.add(t.element)})),this.keystrokes.listenTo(this.element);var t=function(e){return e.stopPropagation()};this.keystrokes.set("arrowright",t),this.keystrokes.set("arrowleft",t),this.keystrokes.set("arrowup",t),this.keystrokes.set("arrowdown",t),this.listenTo(this.urlInputView.element,"selectstart",(function(e,t){t.stopPropagation()}),{priority:"high"})}},{key:"focus",value:function(){this._focusCycler.focusFirst()}},{key:"url",get:function(){return this.urlInputView.fieldView.element.value.trim()},set:function(e){this.urlInputView.fieldView.element.value=e.trim()}},{key:"isValid",value:function(){this.resetFormStatus();var e,t=_createForOfIteratorHelper(this._validators);try{for(t.s();!(e=t.n()).done;){var n=(0,e.value)(this);if(n)return this.urlInputView.errorText=n,!1}}catch(r){t.e(r)}finally{t.f()}return!0}},{key:"resetFormStatus",value:function(){this.urlInputView.errorText=null,this.urlInputView.infoText=this._urlInputViewInfoDefault}},{key:"_createUrlInput",value:function(){var e=this,t=this.locale.t,n=new bl(this.locale,wl),r=n.fieldView;return this._urlInputViewInfoDefault=t("Paste the media URL in the input."),this._urlInputViewInfoTip=t("Tip: Paste the URL into the content to embed faster."),n.label=t("Media URL"),n.infoText=this._urlInputViewInfoDefault,r.on("input",(function(){n.infoText=r.element.value?e._urlInputViewInfoTip:e._urlInputViewInfoDefault,e.mediaURLInputValue=r.element.value.trim()})),n}},{key:"_createButton",value:function(e,t,n,r){var i=new zc(this.locale);return i.set({label:e,icon:t,tooltip:!0}),i.extendTemplate({attributes:{class:n}}),r&&i.delegate("execute").to(this,r),i}}]),n}(kc),Bv=n(157),zv=n.n(Bv),Hv=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"init",value:function(){var e=this,t=this.editor,n=t.commands.get("mediaEmbed"),r=t.plugins.get(Fv).registry;t.ui.componentFactory.add("mediaEmbed",(function(i){var o=hl(i),a=new Vv(function(e,t){return[function(t){if(!t.url.length)return e("The URL must not be empty.")},function(n){if(!t.hasMedia(n.url))return e("This media URL is not supported.")}]}(t.t,r),t.locale);return e._setUpDropdown(o,a,n,t),e._setUpForm(o,a,n),o}))}},{key:"_setUpDropdown",value:function(e,t,n){var r=this.editor,i=r.t,o=e.buttonView;function a(){r.editing.view.focus(),e.isOpen=!1}e.bind("isEnabled").to(n),e.panelView.children.add(t),o.set({label:i("Insert media"),icon:zv.a,tooltip:!0}),o.on("open",(function(){t.disableCssTransitions(),t.url=n.value||"",t.urlInputView.fieldView.select(),t.focus(),t.enableCssTransitions()}),{priority:"low"}),e.on("submit",(function(){t.isValid()&&(r.execute("mediaEmbed",t.url),a())})),e.on("change:isOpen",(function(){return t.resetFormStatus()})),e.on("cancel",(function(){return a()}))}},{key:"_setUpForm",value:function(e,t,n){t.delegate("submit","cancel").to(e),t.urlInputView.bind("value").to(n,"value"),t.urlInputView.bind("isReadOnly").to(n,"isEnabled",(function(e){return!e}))}}],[{key:"requires",get:function(){return[Fv]}},{key:"pluginName",get:function(){return"MediaEmbedUI"}}]),n}(d);function Uv(e,t,n){var r=t.parent,i=n.createElement(e.type),o=r.getChildIndex(t)+1;return n.insertChild(o,i,r),e.style&&n.setStyle("list-style-type",e.style,i),i}function Wv(e){var t={},n=e.getStyle("mso-list");if(n){var r=n.match(/(^|\s{1,100})l(\d+)/i),i=n.match(/\s{0,100}lfo(\d+)/i),o=n.match(/\s{0,100}level(\d+)/i);r&&i&&o&&(t.id=r[2],t.order=i[1],t.indent=o[1])}return t}n(262);var qv=/id=("|')docs-internal-guid-[-0-9a-f]+("|')/i,Yv=function(){function e(t){_classCallCheck(this,e),this.document=t}return _createClass(e,[{key:"isActive",value:function(e){return qv.test(e)}},{key:"execute",value:function(e){var t=new au(this.document);!function(e,t){var n,r=_createForOfIteratorHelper(e.getChildren());try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.is("element","b")&&"normal"===i.getStyle("font-weight")){var o=e.getChildIndex(i);t.remove(i),t.insertChild(o,i.getChildren(),e)}}}catch(a){r.e(a)}finally{r.f()}}(e.content,t),function(e,t){var n,r=_createForOfIteratorHelper(t.createRangeIn(e));try{for(r.s();!(n=r.n()).done;){var i=n.value.item;if(i.is("element","li")){var o=i.getChild(0);o&&o.is("element","p")&&t.unwrapElement(o)}}}catch(a){r.e(a)}finally{r.f()}}(e.content,t)}}]),e}();function Gv(e){return e.replace(/<span(?: class="Apple-converted-space"|)>(\s+)<\/span>/g,(function(e,t){return 1===t.length?" ":Array(t.length+1).join("\xa0 ").substr(0,t.length)}))}function Jv(e){return btoa(e.match(/\w{2}/g).map((function(e){return String.fromCharCode(parseInt(e,16))})).join(""))}var $v=/<meta\s*name="?generator"?\s*content="?microsoft\s*word\s*\d+"?\/?>/i,Kv=/xmlns:o="urn:schemas-microsoft-com/i,Qv=function(){function e(t){_classCallCheck(this,e),this.document=t}return _createClass(e,[{key:"isActive",value:function(e){return $v.test(e)||Kv.test(e)}},{key:"execute",value:function(e){var t=function(e,t){var n=new DOMParser,r=function(e){return Gv(Gv(e)).replace(/(<span\s+style=['"]mso-spacerun:yes['"]>[^\S\r\n]*?)[\r\n]+([^\S\r\n]*<\/span>)/g,"$1$2").replace(/<span\s+style=['"]mso-spacerun:yes['"]><\/span>/g,"").replace(/ <\//g,"\xa0</").replace(/ <o:p><\/o:p>/g,"\xa0<o:p></o:p>").replace(/<o:p>(&nbsp;|\u00A0)<\/o:p>/g,"").replace(/>([^\S\r\n]*[\r\n]\s*)</g,"><")}(function(e){var t=e.indexOf("</body>");if(t<0)return e;var n=e.indexOf("</html>",t+"</body>".length);return e.substring(0,t+"</body>".length)+(n>=0?e.substring(n):"")}(e=e.replace(/<!--\[if gte vml 1]>/g,""))),i=n.parseFromString(r,"text/html");!function(e){e.querySelectorAll("span[style*=spacerun]").forEach((function(e){var t=e.innerText.length||0;e.innerHTML=Array(t+1).join("\xa0 ").substr(0,t)}))}(i);var o=i.body.innerHTML,a=function(e,t){for(var n=new gn(t),r=new xr(n,{blockFillerMode:"nbsp"}),i=e.createDocumentFragment(),o=e.body.childNodes;o.length>0;)i.appendChild(o[0]);return r.domToView(i)}(i,t),s=function(e){for(var t=[],n=[],r=0,i=Array.from(e.getElementsByTagName("style"));r<i.length;r++){var o=i[r];o.sheet&&o.sheet.cssRules&&o.sheet.cssRules.length&&(t.push(o.sheet),n.push(o.innerHTML))}return{styles:t,stylesString:n.join(" ")}}(i);return{body:a,bodyString:o,styles:s.styles,stylesString:s.stylesString}}(e.dataTransfer.getData("text/html"),this.document.stylesProcessor),n=t.body;(function(e,t){if(e.childCount){var n=new au(e.document),r=function(e,t){var n,r=t.createRangeIn(e),i=new ht({name:/^p|h\d+$/,styles:{"mso-list":/.*/}}),o=[],a=_createForOfIteratorHelper(r);try{for(a.s();!(n=a.n()).done;){var s=n.value;if("elementStart"===s.type&&i.match(s.item)){var c=Wv(s.item);o.push({element:s.item,id:c.id,order:c.order,indent:c.indent})}}}catch(l){a.e(l)}finally{a.f()}return o}(e,n);if(r.length){var i=null,o=1;r.forEach((function(e,a){var s=function(e,t){if(!e)return!0;if(e.id!==t.id)return t.indent-e.indent!=1;var n=t.element.previousSibling;return!n||!function(e){return e.is("element","ol")||e.is("element","ul")}(n)}(r[a-1],e),c=function(e,t){return e?t.indent-e.indent:t.indent-1}(s?null:r[a-1],e);if(s&&(i=null,o=1),!i||0!==c){var l=function(e,t){var n=new RegExp("@list l".concat(e.id,":level").concat(e.indent,"\\s*({[^}]*)"),"gi").exec(t),r="decimal",i="ol";if(n&&n[1]){var o=/mso-level-number-format:([^;]{0,100});/gi.exec(n[1]);if(o&&o[1]&&(i="bullet"!==(r=o[1].trim())&&"image"!==r?"ol":"ul"),"bullet"===r){var a=function(e){var t=function(e){if(e.getChild(0).is("$text"))return null;var t=e.getChild(0).getChild(0);return t.is("$text")?t:t.getChild(0)}(e);if(!t)return null;var n=t._data;return"o"===n?"circle":"\xb7"===n?"disc":"\xa7"===n?"square":null}(e.element);a&&(r=a)}}return{type:i,style:function(e){switch(e){case"arabic-leading-zero":return"decimal-leading-zero";case"alpha-upper":return"upper-alpha";case"alpha-lower":return"lower-alpha";case"roman-upper":return"upper-roman";case"roman-lower":return"lower-roman";case"circle":case"disc":case"square":return e;default:return null}}(r)}}(e,t);if(i)if(e.indent>o){var u=i.getChild(i.childCount-1),d=u.getChild(u.childCount-1);i=Uv(l,d,n),o+=1}else e.indent<o&&(i=function(e,t){var n,r=null,i=0,o=_createForOfIteratorHelper(e.getAncestors({parentFirst:!0}));try{for(o.s();!(n=o.n()).done;){var a=n.value;if("ul"!==a.name&&"ol"!==a.name||i++,i===t){r=a;break}}}catch(s){o.e(s)}finally{o.f()}return r}(i,o-e.indent),o=parseInt(e.indent));else i=Uv(l,e.element,n);e.indent<=o&&(i.is("element",l.type)||(i=n.rename(l.type,i)))}var f=function(e,t){return function(e,t){var n,r=new ht({name:"span",styles:{"mso-list":"Ignore"}}),i=_createForOfIteratorHelper(t.createRangeIn(e));try{for(i.s();!(n=i.n()).done;){var o=n.value;"elementStart"===o.type&&r.match(o.item)&&t.remove(o.item)}}catch(a){i.e(a)}finally{i.f()}}(e,t),t.rename("li",e)}(e.element,n);n.appendChild(f,i)}))}}})(n,t.stylesString),function(e,t){if(e.childCount){var n=new au;!function(e,t,n){var r,i=n.createRangeIn(t),o=new ht({name:"img"}),a=[],s=_createForOfIteratorHelper(i);try{for(s.s();!(r=s.n()).done;){var c=r.value;if(o.match(c.item)){var l=c.item,u=l.getAttribute("v:shapes")?l.getAttribute("v:shapes").split(" "):[];u.length&&u.every((function(t){return e.indexOf(t)>-1}))?a.push(l):l.getAttribute("src")||a.push(l)}}}catch(p){s.e(p)}finally{s.f()}for(var d=0,f=a;d<f.length;d++){var h=f[d];n.remove(h)}}(function(e,t){var n,r=t.createRangeIn(e),i=new ht({name:/v:(.+)/}),o=[],a=_createForOfIteratorHelper(r);try{for(a.s();!(n=a.n()).done;){var s=n.value,c=s.item,l=c.previousSibling&&c.previousSibling.name||null;i.match(c)&&c.getAttribute("o:gfxdata")&&"v:shapetype"!==l&&o.push(s.item.getAttribute("id"))}}catch(u){a.e(u)}finally{a.f()}return o}(e,n),e,n),function(e,t){var n,r=t.createRangeIn(e),i=new ht({name:/v:(.+)/}),o=[],a=_createForOfIteratorHelper(r);try{for(a.s();!(n=a.n()).done;){var s=n.value;i.match(s.item)&&o.push(s.item)}}catch(d){a.e(d)}finally{a.f()}for(var c=0,l=o;c<l.length;c++){var u=l[c];t.remove(u)}}(e,n);var r=function(e,t){var n,r=t.createRangeIn(e),i=new ht({name:"img"}),o=[],a=_createForOfIteratorHelper(r);try{for(a.s();!(n=a.n()).done;){var s=n.value;i.match(s.item)&&s.item.getAttribute("src").startsWith("file://")&&o.push(s.item)}}catch(c){a.e(c)}finally{a.f()}return o}(e,n);r.length&&function(e,t,n){if(e.length===t.length)for(var r=0;r<e.length;r++){var i="data:".concat(t[r].type,";base64,").concat(Jv(t[r].hex));n.setAttribute("src",i,e[r])}}(r,function(e){if(!e)return[];var t=/{\\pict[\s\S]+?\\bliptag-?\d+(\\blipupi-?\d+)?({\\\*\\blipuid\s?[\da-fA-F]+)?[\s}]*?/,n=new RegExp("(?:("+t.source+"))([\\da-fA-F\\s]+)\\}","g"),r=e.match(n),i=[];if(r){var o,a=_createForOfIteratorHelper(r);try{for(a.s();!(o=a.n()).done;){var s=o.value,c=!1;s.includes("\\pngblip")?c="image/png":s.includes("\\jpegblip")&&(c="image/jpeg"),c&&i.push({hex:s.replace(t,"").replace(/[^\da-fA-F]/g,""),type:c})}}catch(l){a.e(l)}finally{a.f()}}return i}(t),n)}}(n,e.dataTransfer.getData("text/rtf")),e.content=n}}]),e}();function Zv(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;t>i?r.setAttribute(e,t,n):r.removeAttribute(e,n)}function Xv(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=e.createElement("tableCell",n);return e.insertElement("paragraph",r),e.insert(r,t),r}function eg(e,t){var n=parseInt(t.parent.parent.getAttribute("headingColumns")||0),r=e.getCellLocation(t).column;return!!n&&r<n}function tg(e){return function(t){t.on("element:"+e,(function(e,t,n){if(t.modelRange&&t.viewItem.isEmpty){var r=n.writer.createPositionAt(t.modelRange.start.nodeAfter,0);n.writer.insertElement("paragraph",r)}}),{priority:"low"})}}function ng(e){for(var t=0,n=0,r=Array.from(e.getChildren()).filter((function(e){return"th"===e.name||"td"===e.name}));n<r.length&&"th"===r[n].name;)t+=parseInt(r[n].getAttribute("colspan")||1),n++;return t}var rg=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_classCallCheck(this,e),this._table=t,this._startRow=void 0!==n.row?n.row:n.startRow||0,this._endRow=void 0!==n.row?n.row:n.endRow,this._startColumn=void 0!==n.column?n.column:n.startColumn||0,this._endColumn=void 0!==n.column?n.column:n.endColumn,this._includeAllSlots=!!n.includeAllSlots,this._skipRows=new Set,this._row=0,this._column=0,this._cellIndex=0,this._spannedCells=new Map,this._nextCellAtColumn=-1}return _createClass(e,[{key:Symbol.iterator,value:function(){return this}},{key:"next",value:function(){var e=this._table.getChild(this._row);if(!e||this._isOverEndRow())return{done:!0};if(this._isOverEndColumn())return this._advanceToNextRow();var t=null,n=this._getSpanned();if(n)this._includeAllSlots&&!this._shouldSkipSlot()&&(t=this._formatOutValue(n.cell,n.row,n.column));else{var r=e.getChild(this._cellIndex);if(!r)return this._advanceToNextRow();var i=parseInt(r.getAttribute("colspan")||1),o=parseInt(r.getAttribute("rowspan")||1);(i>1||o>1)&&this._recordSpans(r,o,i),this._shouldSkipSlot()||(t=this._formatOutValue(r)),this._nextCellAtColumn=this._column+i}return this._column++,this._column==this._nextCellAtColumn&&this._cellIndex++,t||this.next()}},{key:"skipRow",value:function(e){this._skipRows.add(e)}},{key:"_advanceToNextRow",value:function(){return this._row++,this._column=0,this._cellIndex=0,this._nextCellAtColumn=-1,this.next()}},{key:"_isOverEndRow",value:function(){return void 0!==this._endRow&&this._row>this._endRow}},{key:"_isOverEndColumn",value:function(){return void 0!==this._endColumn&&this._column>this._endColumn}},{key:"_formatOutValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._row,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this._column;return{done:!1,value:new ig(this,e,t,n)}}},{key:"_shouldSkipSlot",value:function(){return this._skipRows.has(this._row)||this._row<this._startRow||this._column<this._startColumn||void 0!==this._endColumn&&this._column>this._endColumn}},{key:"_getSpanned",value:function(){var e=this._spannedCells.get(this._row);return e&&e.get(this._column)||null}},{key:"_recordSpans",value:function(e,t,n){for(var r={cell:e,row:this._row,column:this._column},i=this._row;i<this._row+t;i++)for(var o=this._column;o<this._column+n;o++)i==this._row&&o==this._column||this._markSpannedCell(i,o,r)}},{key:"_markSpannedCell",value:function(e,t,n){this._spannedCells.has(e)||this._spannedCells.set(e,new Map),this._spannedCells.get(e).set(t,n)}}]),e}(),ig=function(){function e(t,n,r,i){_classCallCheck(this,e),this.cell=n,this.row=t._row,this.column=t._column,this.cellAnchorRow=r,this.cellAnchorColumn=i,this._cellIndex=t._cellIndex,this._table=t._table}return _createClass(e,[{key:"isAnchor",get:function(){return this.row===this.cellAnchorRow&&this.column===this.cellAnchorColumn}},{key:"cellWidth",get:function(){return parseInt(this.cell.getAttribute("colspan")||1)}},{key:"cellHeight",get:function(){return parseInt(this.cell.getAttribute("rowspan")||1)}},{key:"getPositionBefore",value:function(){return this._table.root.document.model.createPositionAt(this._table.getChild(this.row),this._cellIndex)}}]),e}();function og(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t){return t.on("insert:table",(function(t,n,r){var i=n.item;if(r.consumable.consume(i,"insert")){r.consumable.consume(i,"attribute:headingRows:table"),r.consumable.consume(i,"attribute:headingColumns:table");var o,a=e&&e.asWidget,s=r.writer.createContainerElement("figure",{class:"table"}),c=r.writer.createContainerElement("table");r.writer.insert(r.writer.createPositionAt(s,0),c),a&&(o=function(e,t){return t.setCustomProperty("table",!0,e),Mu(e,t,{hasSelectionHandle:!0})}(s,r.writer));var l,u=new rg(i),d={headingRows:i.getAttribute("headingRows")||0,headingColumns:i.getAttribute("headingColumns")||0},f=new Map,h=_createForOfIteratorHelper(u);try{for(h.s();!(l=h.n()).done;){var p=l.value,v=p.row,g=p.cell,m=i.getChild(v),y=f.get(v)||ug(c,m,v,d,r);f.set(v,y),r.consumable.consume(g,"insert"),lg(p,d,r.writer.createPositionAt(y,"end"),r,e)}}catch(C){h.e(C)}finally{h.f()}var k,_=_createForOfIteratorHelper(i.getChildren());try{for(_.s();!(k=_.n()).done;){var b=k.value,w=b.index;f.has(w)||f.set(w,ug(c,b,w,d,r))}}catch(C){_.e(C)}finally{_.f()}var x=r.mapper.toViewPosition(n.range.start);r.mapper.bindElements(i,a?o:s),r.writer.insert(x,a?o:s)}}))}}function ag(e,t){var n=t.writer;if(e.parent.is("element","tableCell"))return sg(e)?n.createContainerElement("span",{style:"display:inline-block"}):n.createContainerElement("p")}function sg(e){return 1===e.parent.childCount&&!pg(e)}function cg(e,t,n){var r=e.cell,i=dg(e,t),o=n.mapper.toViewElement(r);o&&o.name!==i&&function(e,t,n){var r=n.writer,i=n.mapper.toViewElement(e),o=Lu(r.createEditableElement(t,i.getAttributes()),r);Fu(o,r,(function(e,t,n){return n.addClass(Xe(t.classes),e)}),(function(e,t,n){return n.removeClass(Xe(t.classes),e)})),r.insert(r.createPositionAfter(i),o),r.move(r.createRangeIn(i),r.createPositionAt(o,0)),r.remove(r.createRangeOn(i)),n.mapper.unbindViewElement(i),n.mapper.bindElements(e,o)}(r,i,n)}function lg(e,t,n,r,i){var o=i&&i.asWidget,a=dg(e,t),s=o?Lu(r.writer.createEditableElement(a),r.writer):r.writer.createContainerElement(a);o&&Fu(s,r.writer,(function(e,t,n){return n.addClass(Xe(t.classes),e)}),(function(e,t,n){return n.removeClass(Xe(t.classes),e)}));var c=e.cell,l=c.getChild(0),u=1===c.childCount&&"paragraph"===l.name;if(r.writer.insert(n,s),r.mapper.bindElements(c,s),!o&&u&&!pg(l)){var d=c.getChild(0);r.consumable.consume(d,"insert"),r.mapper.bindElements(d,s)}}function ug(e,t,n,r,i){i.consumable.consume(t,"insert");var o=t.isEmpty?i.writer.createEmptyElement("tr"):i.writer.createContainerElement("tr");i.mapper.bindElements(t,o);var a=r.headingRows,s=function(e,t,n){return fg(e,t)||function(e,t,n){var r=n.writer.createContainerElement(e),i=n.writer.createPositionAt(t,"tbody"==e?"end":0);return n.writer.insert(i,r),r}(e,t,n)}(function(e,t){return e<t.headingRows?"thead":"tbody"}(n,r),e,i),c=i.writer.createPositionAt(s,a>0&&n>=a?n-a:n);return i.writer.insert(c,o),o}function dg(e,t){var n=e.row,r=e.column,i=t.headingColumns,o=t.headingRows;return o&&o>n||i&&i>r?"th":"td"}function fg(e,t){var n,r=_createForOfIteratorHelper(t.getChildren());try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.name==e)return i}}catch(o){r.e(o)}finally{r.f()}}function hg(e,t,n){var r=fg(e,t);r&&0===r.childCount&&n.writer.remove(n.writer.createRangeOn(r))}function pg(e){return!!_toConsumableArray(e.getAttributeKeys()).length}var vg=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"refresh",value:function(){var e=this.editor.model,t=e.document.selection,n=e.schema;this.isEnabled=function(e,t){var n=e.getFirstPosition().parent;return t.checkChild(n===n.root?n:n.parent,"table")}(t,n)&&!Bu(t,n)}},{key:"execute",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.editor.model,n=t.document.selection,r=this.editor.plugins.get("TableUtils"),i=Vu(n,t);t.change((function(n){var o=r.createTable(n,e);t.insertContent(o,i),n.setSelection(n.createPositionAt(o.getNodeByPath([0,0,0]),0))}))}}]),n}(h);function gg(e){var t,n=[],r=_createForOfIteratorHelper(wg(e.getRanges()));try{for(r.s();!(t=r.n()).done;){var i=t.value.getContainedElement();i&&i.is("element","tableCell")&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}return n}function mg(e){var t,n=[],r=_createForOfIteratorHelper(e.getRanges());try{for(r.s();!(t=r.n()).done;){var i=t.value.start.findAncestor("tableCell");i&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}return n}function yg(e){var t=gg(e);return t.length?t:mg(e)}function kg(e){return xg(e.map((function(e){return e.parent.index})))}function _g(e){var t=e[0].findAncestor("table");return xg(_toConsumableArray(new rg(t)).filter((function(t){return e.includes(t.cell)})).map((function(e){return e.column})))}function bg(e,t){if(e.length<2||!function(e){var t=e[0].findAncestor("table");if(!Tg(kg(e),parseInt(t.getAttribute("headingRows")||0)))return!1;var n=parseInt(t.getAttribute("headingColumns")||0);return Tg(_g(e),n)}(e))return!1;var n,r=new Set,i=new Set,o=0,a=_createForOfIteratorHelper(e);try{for(a.s();!(n=a.n()).done;){var s=n.value,c=t.getCellLocation(s),l=c.row,u=c.column,d=parseInt(s.getAttribute("rowspan")||1),f=parseInt(s.getAttribute("colspan")||1);r.add(l),i.add(u),d>1&&r.add(l+d-1),f>1&&i.add(u+f-1),o+=d*f}}catch(h){a.e(h)}finally{a.f()}return function(e,t){var n=Array.from(e.values()),r=Array.from(t.values());return(Math.max.apply(Math,_toConsumableArray(n))-Math.min.apply(Math,_toConsumableArray(n))+1)*(Math.max.apply(Math,_toConsumableArray(r))-Math.min.apply(Math,_toConsumableArray(r))+1)}(r,i)==o}function wg(e){return Array.from(e).sort(Cg)}function xg(e){var t=e.sort((function(e,t){return e-t}));return{first:t[0],last:t[t.length-1]}}function Cg(e,t){return e.start.isBefore(t.start)?-1:1}function Tg(e,t){return e.first<t==e.last<t}var Ag=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return _classCallCheck(this,n),(r=t.call(this,e)).order=i.order||"below",r}return _createClass(n,[{key:"refresh",value:function(){var e=this.editor.model.document.selection.getFirstPosition().findAncestor("table");this.isEnabled=!!e}},{key:"execute",value:function(){var e=this.editor,t=e.model.document.selection,n=e.plugins.get("TableUtils"),r="above"===this.order,i=yg(t),o=kg(i),a=r?o.first:o.last,s=i[0].findAncestor("table");n.insertRows(s,{at:r?a:a+1,copyStructureFromAbove:!r})}}]),n}(h),Sg=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return _classCallCheck(this,n),(r=t.call(this,e)).order=i.order||"right",r}return _createClass(n,[{key:"refresh",value:function(){var e=this.editor.model.document.selection.getFirstPosition().findAncestor("table");this.isEnabled=!!e}},{key:"execute",value:function(){var e=this.editor,t=e.model.document.selection,n=e.plugins.get("TableUtils"),r="left"===this.order,i=yg(t),o=_g(i),a=r?o.first:o.last,s=i[0].findAncestor("table");n.insertColumns(s,{columns:1,at:r?a:a+1})}}]),n}(h),Eg=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return _classCallCheck(this,n),(r=t.call(this,e)).direction=i.direction||"horizontally",r}return _createClass(n,[{key:"refresh",value:function(){var e=yg(this.editor.model.document.selection);this.isEnabled=1===e.length}},{key:"execute",value:function(){var e=yg(this.editor.model.document.selection)[0],t="horizontally"===this.direction,n=this.editor.plugins.get("TableUtils");t?n.splitCellHorizontally(e,2):n.splitCellVertically(e,2)}}]),n}(h);function Ig(e,t,n){for(var r=t.startRow,i=t.startColumn,o=t.endRow,a=t.endColumn,s=n.createElement("table"),c=o-r+1,l=0;l<c;l++)n.insertElement("tableRow",s,"end");var u,d=_createForOfIteratorHelper(_toConsumableArray(new rg(e,{startRow:r,endRow:o,startColumn:i,endColumn:a,includeAllSlots:!0})));try{for(d.s();!(u=d.n()).done;){var f=u.value,h=f.row,p=f.column,v=f.cell,g=f.isAnchor,m=f.cellAnchorRow,y=f.cellAnchorColumn,k=s.getChild(h-r);if(g){var _=n.cloneElement(v);n.append(_,k),Ng(_,h,p,o,a,n)}else(m<r||y<i)&&Xv(n,n.createPositionAt(k,"end"))}}catch(b){d.e(b)}finally{d.f()}return function(e,t,n,r,i){var o=parseInt(t.getAttribute("headingRows")||0);o>0&&Zv("headingRows",o-n,e,i,0);var a=parseInt(t.getAttribute("headingColumns")||0);a>0&&Zv("headingColumns",a-r,e,i,0)}(s,e,r,i,n),s}function Og(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=[],o=new rg(e,{startRow:r,endRow:t-1}),a=_createForOfIteratorHelper(o);try{for(a.s();!(n=a.n()).done;){var s=n.value,c=s.row,l=s.cellHeight;c<t&&t<=c+l-1&&i.push(s)}}catch(u){a.e(u)}finally{a.f()}return i}function Rg(e,t,n){var r=e.parent,i=r.parent,o=r.index,a=t-o,s={},c=parseInt(e.getAttribute("rowspan"))-a;c>1&&(s.rowspan=c);var l=parseInt(e.getAttribute("colspan")||1);l>1&&(s.colspan=l);var u,d,f=o+a,h=null,p=_createForOfIteratorHelper(_toConsumableArray(new rg(i,{startRow:o,endRow:f,includeAllSlots:!0})));try{for(p.s();!(d=p.n()).done;){var v=d.value,g=v.row,m=v.column;v.cell===e&&void 0===u&&(u=m),void 0!==u&&u===m&&g===f&&(h=Xv(n,v.getPositionBefore(),s))}}catch(y){p.e(y)}finally{p.f()}return Zv("rowspan",a,e,n),h}function Pg(e,t){var n,r=[],i=_createForOfIteratorHelper(new rg(e));try{for(i.s();!(n=i.n()).done;){var o=n.value,a=o.column,s=o.cellWidth;a<t&&t<=a+s-1&&r.push(o)}}catch(c){i.e(c)}finally{i.f()}return r}function Mg(e,t,n,r){var i=n-t,o={},a=parseInt(e.getAttribute("colspan"))-i;a>1&&(o.colspan=a);var s=parseInt(e.getAttribute("rowspan")||1);s>1&&(o.rowspan=s);var c=Xv(r,r.createPositionAfter(e),o);return Zv("colspan",i,e,r),c}function Ng(e,t,n,r,i,o){var a=parseInt(e.getAttribute("colspan")||1),s=parseInt(e.getAttribute("rowspan")||1);n+a-1>i&&Zv("colspan",i-n+1,e,o,1),t+s-1>r&&Zv("rowspan",r-t+1,e,o,1)}function Dg(e,t){var n,r=t.getColumns(e),i=new Array(r).fill(0),o=_createForOfIteratorHelper(new rg(e));try{for(o.s();!(n=o.n()).done;){i[n.value.column]++}}catch(s){o.e(s)}finally{o.f()}var a=i.reduce((function(e,t,n){return t?e:[].concat(_toConsumableArray(e),[n])}),[]);return a.length>0&&(t.removeColumns(e,{at:a[a.length-1]}),!0)}function Fg(e,t){for(var n=[],r=0;r<e.childCount;r++)e.getChild(r).isEmpty&&n.push(r);return n.length>0&&(t.removeRows(e,{at:n[n.length-1]}),!0)}function jg(e,t){Dg(e,t)||Fg(e,t)}function Lg(e,t){var n=Array.from(new rg(e,{startColumn:t.firstColumn,endColumn:t.lastColumn,row:t.lastRow}));return n.every((function(e){return 1===e.cellHeight}))?t.lastRow:t.lastRow+(n[0].cellHeight-1)}function Vg(e,t){var n=Array.from(new rg(e,{startRow:t.firstRow,endRow:t.lastRow,column:t.lastColumn}));return n.every((function(e){return 1===e.cellWidth}))?t.lastColumn:t.lastColumn+(n[0].cellWidth-1)}var Bg=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var i;return _classCallCheck(this,n),(i=t.call(this,e)).direction=r.direction,i.isHorizontal="right"==i.direction||"left"==i.direction,i}return _createClass(n,[{key:"refresh",value:function(){var e=this._getMergeableCell();this.value=e,this.isEnabled=!!e}},{key:"execute",value:function(){var e=this,t=this.editor.model,n=mg(t.document.selection)[0],r=this.value,i=this.direction;t.change((function(t){var o="right"==i||"down"==i,a=o?n:r,s=o?r:n,c=s.parent;!function(e,t,n){zg(e)||(zg(t)&&n.remove(n.createRangeIn(t)),n.move(n.createRangeIn(e),n.createPositionAt(t,"end"))),n.remove(e)}(s,a,t);var l=e.isHorizontal?"colspan":"rowspan",u=parseInt(n.getAttribute(l)||1),d=parseInt(r.getAttribute(l)||1);t.setAttribute(l,u+d,a),t.setSelection(t.createRangeIn(a));var f=e.editor.plugins.get("TableUtils");jg(c.findAncestor("table"),f)}))}},{key:"_getMergeableCell",value:function(){var e=mg(this.editor.model.document.selection)[0];if(e){var t=this.editor.plugins.get("TableUtils"),n=this.isHorizontal?function(e,t,n){var r="right"==t?e.nextSibling:e.previousSibling,i=(e.parent.parent.getAttribute("headingColumns")||0)>0;if(r){var o="right"==t?e:r,a="right"==t?r:e,s=n.getCellLocation(o).column,c=n.getCellLocation(a).column,l=parseInt(o.getAttribute("colspan")||1),u=eg(n,o),d=eg(n,a);return i&&u!=d?void 0:s+l===c?r:void 0}}(e,this.direction,t):function(e,t){var n=e.parent,r=n.parent,i=r.getChildIndex(n);if(!("down"==t&&i===r.childCount-1||"up"==t&&0===i)){var o=parseInt(e.getAttribute("rowspan")||1),a=r.getAttribute("headingRows")||0;if(!a||!("down"==t&&i+o===a||"up"==t&&i===a)){var s=parseInt(e.getAttribute("rowspan")||1),c="down"==t?i+s:i,l=_toConsumableArray(new rg(r,{endRow:c})),u=l.find((function(t){return t.cell===e})).column,d=l.find((function(e){var n=e.row,r=e.cellHeight;return e.column===u&&("down"==t?n===c:c===n+r)}));return d&&d.cell}}}(e,this.direction);if(n){var r=this.isHorizontal?"rowspan":"colspan",i=parseInt(e.getAttribute(r)||1);return parseInt(n.getAttribute(r)||1)===i?n:void 0}}}}]),n}(h);function zg(e){return 1==e.childCount&&e.getChild(0).is("element","paragraph")&&e.getChild(0).isEmpty}var Hg=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"refresh",value:function(){var e=yg(this.editor.model.document.selection),t=e[0];if(t){var n=t.findAncestor("table"),r=this.editor.plugins.get("TableUtils").getRows(n)-1,i=kg(e);this.isEnabled=!(0===i.first&&i.last===r)}else this.isEnabled=!1}},{key:"execute",value:function(){var e=this,t=this.editor.model,n=yg(t.document.selection),r=kg(n),i=n[0],o=i.findAncestor("table"),a=this.editor.plugins.get("TableUtils").getCellLocation(i).column;t.change((function(t){var n=r.last-r.first+1;e.editor.plugins.get("TableUtils").removeRows(o,{at:r.first,rows:n});var i=function(e,t,n){var r,i=e.getChild(t)||e.getChild(e.childCount-1),o=i.getChild(0),a=0,s=_createForOfIteratorHelper(i.getChildren());try{for(s.s();!(r=s.n()).done;){var c=r.value;if(a>n)return o;o=c,a+=parseInt(c.getAttribute("colspan")||1)}}catch(l){s.e(l)}finally{s.f()}return o}(o,r.first,a);t.setSelection(t.createPositionAt(i,0))}))}}]),n}(h),Ug=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"refresh",value:function(){var e=yg(this.editor.model.document.selection),t=e[0];if(t){var n=t.findAncestor("table"),r=this.editor.plugins.get("TableUtils").getColumns(n),i=_g(e),o=i.first,a=i.last;this.isEnabled=a-o<r-1}else this.isEnabled=!1}},{key:"execute",value:function(){var e=this,t=_slicedToArray(function(e){var t=yg(e),n=t[0],r=t.pop(),i=[n,r];return n.isBefore(r)?i:i.reverse()}(this.editor.model.document.selection),2),n=t[0],r=t[1],i=n.parent.parent,o=_toConsumableArray(new rg(i)),a={first:o.find((function(e){return e.cell===n})).column,last:o.find((function(e){return e.cell===r})).column},s=function(e,t,n,r){return parseInt(n.getAttribute("colspan")||1)>1?n:t.previousSibling||n.nextSibling?n.nextSibling||t.previousSibling:r.first?e.reverse().find((function(e){return e.column<r.first})).cell:e.reverse().find((function(e){return e.column>r.last})).cell}(o,n,r,a);this.editor.model.change((function(t){var n=a.last-a.first+1;e.editor.plugins.get("TableUtils").removeColumns(i,{at:a.first,columns:n}),t.setSelection(t.createPositionAt(s,0))}))}}]),n}(h),Wg=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"refresh",value:function(){var e=this,t=yg(this.editor.model.document.selection),n=t.length>0;this.isEnabled=n,this.value=n&&t.every((function(t){return e._isInHeading(t,t.parent.parent)}))}},{key:"execute",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e.forceValue!==this.value){var t=this.editor.model,n=yg(t.document.selection),r=n[0].findAncestor("table"),i=kg(n),o=i.first,a=i.last,s=this.value?o:a+1,c=r.getAttribute("headingRows")||0;t.change((function(e){if(s){var t,n=_createForOfIteratorHelper(Og(r,s,s>c?c:0));try{for(n.s();!(t=n.n()).done;){Rg(t.value.cell,s,e)}}catch(i){n.e(i)}finally{n.f()}}Zv("headingRows",s,r,e,0)}))}}},{key:"_isInHeading",value:function(e,t){var n=parseInt(t.getAttribute("headingRows")||0);return!!n&&e.parent.index<n}}]),n}(h),qg=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"refresh",value:function(){var e=yg(this.editor.model.document.selection),t=this.editor.plugins.get("TableUtils"),n=e.length>0;this.isEnabled=n,this.value=n&&e.every((function(e){return eg(t,e)}))}},{key:"execute",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e.forceValue!==this.value){var t=this.editor.model,n=yg(t.document.selection),r=n[0].findAncestor("table"),i=_g(n),o=i.first,a=i.last,s=this.value?o:a+1;t.change((function(e){if(s){var t,n=_createForOfIteratorHelper(Pg(r,s));try{for(n.s();!(t=n.n()).done;){var i=t.value;Mg(i.cell,i.column,s,e)}}catch(o){n.e(o)}finally{n.f()}}Zv("headingColumns",s,r,e,0)}))}}}]),n}(h),Yg=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"init",value:function(){this.decorate("insertColumns"),this.decorate("insertRows")}},{key:"getCellLocation",value:function(e){var t,n=e.parent,r=n.parent,i=r.getChildIndex(n),o=_createForOfIteratorHelper(new rg(r,{row:i}));try{for(o.s();!(t=o.n()).done;){var a=t.value,s=a.cell,c=a.row,l=a.column;if(s===e)return{row:c,column:l}}}catch(u){o.e(u)}finally{o.f()}}},{key:"createTable",value:function(e,t){var n=e.createElement("table");return Gg(e,n,0,parseInt(t.rows)||2,parseInt(t.columns)||2),t.headingRows&&Zv("headingRows",t.headingRows,n,e,0),t.headingColumns&&Zv("headingColumns",t.headingColumns,n,e,0),n}},{key:"insertRows",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.editor.model,r=t.at||0,i=t.rows||1,o=void 0!==t.copyStructureFromAbove,a=t.copyStructureFromAbove?r-1:r,s=this.getRows(e),c=this.getColumns(e);n.change((function(t){var n=e.getAttribute("headingRows")||0;if(n>r&&Zv("headingRows",n+i,e,t,0),o||0!==r&&r!==s){var l,u=o?Math.max(r,a):r,d=new rg(e,{endRow:u}),f=new Array(c).fill(1),h=_createForOfIteratorHelper(d);try{for(h.s();!(l=h.n()).done;){var p=l.value,v=p.row,g=p.column,m=p.cellHeight,y=p.cellWidth,k=p.cell,_=v+m-1,b=v<=a&&a<=_;v<r&&r<=_?(t.setAttribute("rowspan",m+i,k),f[g]=-y):o&&b&&(f[g]=y)}}catch(S){h.e(S)}finally{h.f()}for(var w=0;w<i;w++){var x=t.createElement("tableRow");t.insert(x,e,r);for(var C=0;C<f.length;C++){var T=f[C],A=t.createPositionAt(x,"end");T>0&&Xv(t,A,T>1?{colspan:T}:null),C+=Math.abs(T)-1}}}else Gg(t,e,r,i,c)}))}},{key:"insertColumns",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.at||0,i=n.columns||1;this.editor.model.change((function(n){var o=e.getAttribute("headingColumns");r<o&&n.setAttribute("headingColumns",o+i,e);var a=t.getColumns(e);if(0!==r&&a!==r){var s,c=new rg(e,{column:r,includeAllSlots:!0}),l=_createForOfIteratorHelper(c);try{for(l.s();!(s=l.n()).done;){var u=s.value,d=u.row,f=u.cell,h=u.cellAnchorColumn,p=u.cellAnchorRow,v=u.cellWidth,g=u.cellHeight;if(h<r){n.setAttribute("colspan",v+i,f);for(var m=p+g-1,y=d;y<=m;y++)c.skipRow(y)}else Jg(i,n,u.getPositionBefore())}}catch(w){l.e(w)}finally{l.f()}}else{var k,_=_createForOfIteratorHelper(e.getChildren());try{for(_.s();!(k=_.n()).done;){var b=k.value;Jg(i,n,n.createPositionAt(b,r?"end":0))}}catch(w){_.e(w)}finally{_.f()}}}))}},{key:"removeRows",value:function(e,t){var n=this,r=t.at,i=r+(t.rows||1)-1;this.editor.model.change((function(t){var o=function(e,t,n){var r,i=new Map,o=[],a=_createForOfIteratorHelper(new rg(e,{endRow:n}));try{for(a.s();!(r=a.n()).done;){var s=r.value,c=s.row,l=s.column,u=s.cellHeight,d=s.cell,f=c+u-1;if(c>=t&&c<=n&&f>n&&i.set(l,{cell:d,rowspan:u-(n-c+1)}),c<t&&f>=t){var h;h=f>=n?n-t+1:f-t+1,o.push({cell:d,rowspan:u-h})}}}catch(p){a.e(p)}finally{a.f()}return{cellsToMove:i,cellsToTrim:o}}(e,r,i),a=o.cellsToMove,s=o.cellsToTrim;a.size&&function(e,t,n,r){var i,o,a=_toConsumableArray(new rg(e,{includeAllSlots:!0,row:t})),s=e.getChild(t),c=_createForOfIteratorHelper(a);try{for(c.s();!(o=c.n()).done;){var l=o.value,u=l.column,d=l.cell,f=l.isAnchor;if(n.has(u)){var h=n.get(u),p=h.cell,v=h.rowspan,g=i?r.createPositionAfter(i):r.createPositionAt(s,0);r.move(r.createRangeOn(p),g),Zv("rowspan",v,p,r),i=p}else f&&(i=d)}}catch(m){c.e(m)}finally{c.f()}}(e,i+1,a,t);for(var c=i;c>=r;c--)t.remove(e.getChild(c));var l,u=_createForOfIteratorHelper(s);try{for(u.s();!(l=u.n()).done;){var d=l.value;Zv("rowspan",d.rowspan,d.cell,t)}}catch(f){u.e(f)}finally{u.f()}!function(e,t,n,r){var i=e.getAttribute("headingRows")||0;t<i&&Zv("headingRows",n<i?i-(n-t+1):t,e,r,0)}(e,r,i,t),Dg(e,n)||Fg(e,n)}))}},{key:"removeColumns",value:function(e,t){var n=this,r=t.at,i=t.at+(t.columns||1)-1;this.editor.model.change((function(t){!function(e,t,n){var r=e.getAttribute("headingColumns")||0;if(r&&t.first<r){var i=Math.min(r-1,t.last)-t.first+1;n.setAttribute("headingColumns",r-i,e)}}(e,{first:r,last:i},t);for(var o=i;o>=r;o--)for(var a=0,s=_toConsumableArray(new rg(e));a<s.length;a++){var c=s[a],l=c.cell,u=c.column,d=c.cellWidth;u<=o&&d>1&&u+d>o?Zv("colspan",d-1,l,t):u===o&&t.remove(l)}Fg(e,n)||Dg(e,n)}))}},{key:"splitCellVertically",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=this.editor.model,r=e.parent.parent,i=parseInt(e.getAttribute("rowspan")||1),o=parseInt(e.getAttribute("colspan")||1);n.change((function(n){if(o>1){var a=$g(o,t),s=a.newCellsSpan;Zv("colspan",a.updatedSpan,e,n);var c={};s>1&&(c.colspan=s),i>1&&(c.rowspan=i),Jg(o>t?t-1:o-1,n,n.createPositionAfter(e),c)}if(o<t){var l,u=t-o,d=_toConsumableArray(new rg(r)),f=d.find((function(t){return t.cell===e})).column,h=_createForOfIteratorHelper(d.filter((function(t){var n=t.cell,r=t.cellWidth,i=t.column;return n!==e&&i===f||i<f&&i+r>f})));try{for(h.s();!(l=h.n()).done;){var p=l.value,v=p.cell,g=p.cellWidth;n.setAttribute("colspan",g+u,v)}}catch(k){h.e(k)}finally{h.f()}var m={};i>1&&(m.rowspan=i),Jg(u,n,n.createPositionAfter(e),m);var y=r.getAttribute("headingColumns")||0;y>f&&Zv("headingColumns",y+u,r,n)}}))}},{key:"splitCellHorizontally",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=this.editor.model,r=e.parent,i=r.parent,o=i.getChildIndex(r),a=parseInt(e.getAttribute("rowspan")||1),s=parseInt(e.getAttribute("colspan")||1);n.change((function(n){if(a>1){var r=_toConsumableArray(new rg(i,{startRow:o,endRow:o+a-1,includeAllSlots:!0})),c=$g(a,t),l=c.newCellsSpan,u=c.updatedSpan;Zv("rowspan",u,e,n);var d=r.find((function(t){return t.cell===e})).column,f={};l>1&&(f.rowspan=l),s>1&&(f.colspan=s);for(var h=0,p=r;h<p.length;h++){var v=p[h],g=v.column,m=v.row;m>=o+u&&g===d&&(m+o+u)%l==0&&Jg(1,n,v.getPositionBefore(),f)}}if(a<t){var y,k=t-a,_=_createForOfIteratorHelper(_toConsumableArray(new rg(i,{startRow:0,endRow:o})));try{for(_.s();!(y=_.n()).done;){var b=y.value,w=b.cell,x=b.cellHeight,C=b.row;w!==e&&C+x>o&&n.setAttribute("rowspan",x+k,w)}}catch(S){_.e(S)}finally{_.f()}var T={};s>1&&(T.colspan=s),Gg(n,i,o+1,k,1,T);var A=i.getAttribute("headingRows")||0;A>o&&Zv("headingRows",A+k,i,n)}}))}},{key:"getColumns",value:function(e){return _toConsumableArray(e.getChild(0).getChildren()).reduce((function(e,t){return e+parseInt(t.getAttribute("colspan")||1)}),0)}},{key:"getRows",value:function(e){return e.childCount}}],[{key:"pluginName",get:function(){return"TableUtils"}}]),n}(d);function Gg(e,t,n,r,i){for(var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},a=0;a<r;a++){var s=e.createElement("tableRow");e.insert(s,t,n),Jg(i,e,e.createPositionAt(s,"end"),o)}}function Jg(e,t,n){for(var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=0;i<e;i++)Xv(t,n,r)}function $g(e,t){if(e<t)return{newCellsSpan:1,updatedSpan:1};var n=Math.floor(e/t);return{newCellsSpan:n,updatedSpan:e-n*t+n}}var Kg=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"refresh",value:function(){var e=gg(this.editor.model.document.selection);this.isEnabled=bg(e,this.editor.plugins.get(Yg))}},{key:"execute",value:function(){var e=this.editor.model,t=this.editor.plugins.get(Yg);e.change((function(n){var r=gg(e.document.selection),i=r.shift(),o=function(e,t,n){var r,i=0,o=0,a=_createForOfIteratorHelper(t);try{for(a.s();!(r=a.n()).done;){var s=r.value,c=n.getCellLocation(s),l=c.row;i=Xg(s,c.column,i,"colspan"),o=Xg(s,l,o,"rowspan")}}catch(f){a.e(f)}finally{a.f()}var u=n.getCellLocation(e),d=u.row;return{mergeWidth:i-u.column,mergeHeight:o-d}}(i,r,t),a=o.mergeWidth,s=o.mergeHeight;Zv("colspan",a,i,n),Zv("rowspan",s,i,n);var c,l=_createForOfIteratorHelper(r);try{for(l.s();!(c=l.n()).done;){Qg(c.value,i,n)}}catch(u){l.e(u)}finally{l.f()}jg(i.findAncestor("table"),t),n.setSelection(i,"in")}))}}]),n}(h);function Qg(e,t,n){Zg(e)||(Zg(t)&&n.remove(n.createRangeIn(t)),n.move(n.createRangeIn(e),n.createPositionAt(t,"end"))),n.remove(e)}function Zg(e){return 1==e.childCount&&e.getChild(0).is("element","paragraph")&&e.getChild(0).isEmpty}function Xg(e,t,n,r){var i=parseInt(e.getAttribute(r)||1);return Math.max(n,t+i)}var em=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"refresh",value:function(){var e=yg(this.editor.model.document.selection);this.isEnabled=e.length>0}},{key:"execute",value:function(){for(var e=this.editor.model,t=yg(e.document.selection),n=kg(t),r=t[0].findAncestor("table"),i=[],o=n.first;o<=n.last;o++){var a,s=_createForOfIteratorHelper(r.getChild(o).getChildren());try{for(s.s();!(a=s.n()).done;){var c=a.value;i.push(e.createRangeOn(c))}}catch(l){s.e(l)}finally{s.f()}}e.change((function(e){e.setSelection(i)}))}}]),n}(h),tm=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"refresh",value:function(){var e=yg(this.editor.model.document.selection);this.isEnabled=e.length>0}},{key:"execute",value:function(){var e,t=this.editor.model,n=yg(t.document.selection),r=n[0],i=n.pop(),o=r.findAncestor("table"),a=this.editor.plugins.get("TableUtils"),s=a.getCellLocation(r),c=a.getCellLocation(i),l=Math.min(s.column,c.column),u=Math.max(s.column,c.column),d=[],f=_createForOfIteratorHelper(new rg(o,{startColumn:l,endColumn:u}));try{for(f.s();!(e=f.n()).done;){var h=e.value;d.push(t.createRangeOn(h.cell))}}catch(p){f.e(p)}finally{f.f()}t.change((function(e){e.setSelection(d)}))}}]),n}(h);function nm(e,t){var n=!1,r=function(e){var t,n=parseInt(e.getAttribute("headingRows")||0),r=e.childCount,i=[],o=_createForOfIteratorHelper(new rg(e));try{for(o.s();!(t=o.n()).done;){var a=t.value,s=a.row,c=a.cell,l=a.cellHeight;if(!(l<2)){var u=s<n?n:r;s+l>u&&i.push({cell:c,rowspan:u-s})}}}catch(d){o.e(d)}finally{o.f()}return i}(e);if(r.length){n=!0;var i,o=_createForOfIteratorHelper(r);try{for(o.s();!(i=o.n()).done;){var a=i.value;Zv("rowspan",a.rowspan,a.cell,t,1)}}catch(s){o.e(s)}finally{o.f()}}return n}function rm(e,t){var n,r=!1,i=function(e){var t,n=new Array(e.childCount).fill(0),r=_createForOfIteratorHelper(new rg(e,{includeAllSlots:!0}));try{for(r.s();!(t=r.n()).done;){n[t.value.row]++}}catch(i){r.e(i)}finally{r.f()}return n}(e),o=[],a=_createForOfIteratorHelper(i.entries());try{for(a.s();!(n=a.n()).done;){var s=_slicedToArray(n.value,2),c=s[0];s[1]||o.push(c)}}catch(_){a.e(_)}finally{a.f()}if(o.length){r=!0;var l,u=_createForOfIteratorHelper(o.reverse());try{for(u.s();!(l=u.n()).done;){var d=l.value;t.remove(e.getChild(d)),i.splice(d,1)}}catch(_){u.e(_)}finally{u.f()}}var f=i[0];if(!i.every((function(e){return e===f}))){var h,p=i.reduce((function(e,t){return t>e?t:e}),0),v=_createForOfIteratorHelper(i.entries());try{for(v.s();!(h=v.n()).done;){var g=_slicedToArray(h.value,2),m=g[0],y=p-g[1];if(y){for(var k=0;k<y;k++)Xv(t,t.createPositionAt(e.getChild(m),"end"));r=!0}}}catch(_){v.e(_)}finally{v.f()}}return r}function im(e){var t=e.attributeKey;return"attribute"===e.type&&("headingRows"===t||"colspan"===t||"rowspan"===t)}function om(e,t){var n,r=!1,i=_createForOfIteratorHelper(e.getChildren());try{for(i.s();!(n=i.n()).done;){r=am(n.value,t)||r}}catch(o){i.e(o)}finally{i.f()}return r}function am(e,t){var n,r=!1,i=_createForOfIteratorHelper(e.getChildren());try{for(i.s();!(n=i.n()).done;){r=sm(n.value,t)||r}}catch(o){i.e(o)}finally{i.f()}return r}function sm(e,t){if(0==e.childCount)return t.insertElement("paragraph",e),!0;var n,r=Array.from(e.getChildren()).filter((function(e){return e.is("$text")})),i=_createForOfIteratorHelper(r);try{for(i.s();!(n=i.n()).done;){var o=n.value;t.wrap(t.createRangeOn(o),"paragraph")}}catch(a){i.e(a)}finally{i.f()}return!!r.length}function cm(e){return!(!e.position||!e.position.parent.is("element","tableCell"))&&("insert"==e.type&&"$text"==e.name||"remove"==e.type)}function lm(e,t){if(!e.is("element","paragraph"))return!1;var n=t.toViewElement(e);return!!n&&sg(e)!==n.is("element","span")}n(264);var um=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"init",value:function(){var e=this.editor,t=e.model,n=t.schema,r=e.conversion;n.register("table",{allowWhere:"$block",allowAttributes:["headingRows","headingColumns"],isObject:!0,isBlock:!0}),n.register("tableRow",{allowIn:"table",isLimit:!0}),n.register("tableCell",{allowIn:"tableRow",allowAttributes:["colspan","rowspan"],isLimit:!0,isSelectable:!0}),n.extend("$block",{allowIn:"tableCell"}),r.for("upcast").add((function(e){e.on("element:table",(function(e,t,n){var r=t.viewItem;if(n.consumable.test(r,{name:!0})){var i=function(e){for(var t,n={headingRows:0,headingColumns:0},r=[],i=[],o=0,a=Array.from(e.getChildren());o<a.length;o++){var s=a[o];if("tbody"===s.name||"thead"===s.name||"tfoot"===s.name){"thead"!==s.name||t||(t=s);var c,l=_createForOfIteratorHelper(Array.from(s.getChildren()).filter((function(e){return e.is("element","tr")})));try{for(l.s();!(c=l.n()).done;){var u=c.value;if("thead"===u.parent.name&&u.parent===t)n.headingRows++,r.push(u);else{i.push(u);var d=ng(u);d>n.headingColumns&&(n.headingColumns=d)}}}catch(f){l.e(f)}finally{l.f()}}}return n.rows=[].concat(r,i),n}(r),o=i.rows,a=i.headingRows,s=i.headingColumns,c={};s&&(c.headingColumns=s),a&&(c.headingRows=a);var l=n.writer.createElement("table",c);if(n.safeInsert(l,t.modelCursor)){if(n.consumable.consume(r,{name:!0}),o.forEach((function(e){return n.convertItem(e,n.writer.createPositionAt(l,"end"))})),l.isEmpty){var u=n.writer.createElement("tableRow");n.writer.insert(u,n.writer.createPositionAt(l,"end")),Xv(n.writer,n.writer.createPositionAt(u,"end"))}n.updateConversionResult(l,t)}}}))})),r.for("editingDowncast").add(og({asWidget:!0})),r.for("dataDowncast").add(og()),r.for("upcast").elementToElement({model:"tableRow",view:"tr"}),r.for("upcast").add((function(e){e.on("element:tr",(function(e,t){t.viewItem.isEmpty&&0==t.modelCursor.index&&e.stop()}),{priority:"high"})})),r.for("editingDowncast").add((function(e){return e.on("insert:tableRow",(function(e,t,n){var r=t.item;if(n.consumable.consume(r,"insert")){var i,o=r.parent,a=function(e){var t,n=_createForOfIteratorHelper(e.getChildren());try{for(n.s();!(t=n.n()).done;){var r=t.value;if("table"===r.name)return r}}catch(i){n.e(i)}finally{n.f()}}(n.mapper.toViewElement(o)),s=o.getChildIndex(r),c=new rg(o,{row:s}),l={headingRows:o.getAttribute("headingRows")||0,headingColumns:o.getAttribute("headingColumns")||0},u=new Map,d=_createForOfIteratorHelper(c);try{for(d.s();!(i=d.n()).done;){var f=i.value,h=u.get(s)||ug(a,r,s,l,n);u.set(s,h),n.consumable.consume(f.cell,"insert"),lg(f,l,n.writer.createPositionAt(h,"end"),n,{asWidget:!0})}}catch(p){d.e(p)}finally{d.f()}}}))})),r.for("editingDowncast").add((function(e){return e.on("remove:tableRow",(function(e,t,n){e.stop();var r,i=n.writer,o=n.mapper,a=o.toViewPosition(t.position).getLastMatchingPosition((function(e){return!e.item.is("element","tr")})).nodeAfter,s=a.parent.parent,c=i.createRangeOn(a),l=i.remove(c),u=_createForOfIteratorHelper(i.createRangeIn(l).getItems());try{for(u.s();!(r=u.n()).done;){var d=r.value;o.unbindViewElement(d)}}catch(f){u.e(f)}finally{u.f()}hg("thead",s,n),hg("tbody",s,n)}),{priority:"higher"})})),r.for("upcast").elementToElement({model:"tableCell",view:"td"}),r.for("upcast").elementToElement({model:"tableCell",view:"th"}),r.for("upcast").add(tg("td")),r.for("upcast").add(tg("th")),r.for("editingDowncast").add((function(e){return e.on("insert:tableCell",(function(e,t,n){var r=t.item;if(n.consumable.consume(r,"insert")){var i,o=r.parent,a=o.parent,s=a.getChildIndex(o),c=new rg(a,{row:s}),l={headingRows:a.getAttribute("headingRows")||0,headingColumns:a.getAttribute("headingColumns")||0},u=_createForOfIteratorHelper(c);try{for(u.s();!(i=u.n()).done;){var d=i.value;if(d.cell===r){var f=n.mapper.toViewElement(o);return void lg(d,l,n.writer.createPositionAt(f,o.getChildIndex(r)),n,{asWidget:!0})}}}catch(h){u.e(h)}finally{u.f()}}}))})),e.conversion.for("editingDowncast").elementToElement({model:"paragraph",view:ag,converterPriority:"high"}),r.attributeToAttribute({model:"colspan",view:"colspan"}),r.attributeToAttribute({model:"rowspan",view:"rowspan"}),r.for("editingDowncast").add((function(e){return e.on("attribute:headingColumns:table",(function(e,t,n){var r=t.item;if(n.consumable.consume(t.item,e.name)){var i,o={headingRows:r.getAttribute("headingRows")||0,headingColumns:r.getAttribute("headingColumns")||0},a=t.attributeOldValue,s=t.attributeNewValue,c=_createForOfIteratorHelper(new rg(r,{endColumn:(a>s?a:s)-1}));try{for(c.s();!(i=c.n()).done;){cg(i.value,o,n)}}catch(l){c.e(l)}finally{c.f()}}}))})),e.commands.add("insertTable",new vg(e)),e.commands.add("insertTableRowAbove",new Ag(e,{order:"above"})),e.commands.add("insertTableRowBelow",new Ag(e,{order:"below"})),e.commands.add("insertTableColumnLeft",new Sg(e,{order:"left"})),e.commands.add("insertTableColumnRight",new Sg(e,{order:"right"})),e.commands.add("removeTableRow",new Hg(e)),e.commands.add("removeTableColumn",new Ug(e)),e.commands.add("splitTableCellVertically",new Eg(e,{direction:"vertically"})),e.commands.add("splitTableCellHorizontally",new Eg(e,{direction:"horizontally"})),e.commands.add("mergeTableCells",new Kg(e)),e.commands.add("mergeTableCellRight",new Bg(e,{direction:"right"})),e.commands.add("mergeTableCellLeft",new Bg(e,{direction:"left"})),e.commands.add("mergeTableCellDown",new Bg(e,{direction:"down"})),e.commands.add("mergeTableCellUp",new Bg(e,{direction:"up"})),e.commands.add("setTableColumnHeader",new qg(e)),e.commands.add("setTableRowHeader",new Wg(e)),e.commands.add("selectTableRow",new em(e)),e.commands.add("selectTableColumn",new tm(e)),function(e){e.document.registerPostFixer((function(){return function(e){var t,n=e.document.differ,r=new Set,i=_createForOfIteratorHelper(n.getChanges());try{for(i.s();!(t=i.n()).done;){var o=t.value;if("attribute"==o.type){var a=o.range.start.nodeAfter;a&&a.is("element","table")&&"headingRows"==o.attributeKey&&r.add(a)}}}catch(u){i.e(u)}finally{i.f()}if(r.size){var s,c=_createForOfIteratorHelper(r.values());try{for(c.s();!(s=c.n()).done;){var l=s.value;n.refreshItem(l)}}catch(u){c.e(u)}finally{c.f()}return!0}return!1}(e)}))}(t),function(e){e.document.registerPostFixer((function(t){return function(e,t){var n,r=t.document.differ.getChanges(),i=!1,o=new Set,a=_createForOfIteratorHelper(r);try{for(a.s();!(n=a.n()).done;){var s=n.value,c=void 0;"table"==s.name&&"insert"==s.type&&(c=s.position.nodeAfter),"tableRow"!=s.name&&"tableCell"!=s.name||(c=s.position.findAncestor("table")),im(s)&&(c=s.range.start.findAncestor("table")),c&&!o.has(c)&&(i=nm(c,e)||i,i=rm(c,e)||i,o.add(c))}}catch(l){a.e(l)}finally{a.f()}return i}(t,e)}))}(t),function(e,t){e.document.registerPostFixer((function(){return function(e,t){var n,r=new Set,i=_createForOfIteratorHelper(e.getChanges());try{for(i.s();!(n=i.n()).done;){var o=n.value,a="attribute"==o.type?o.range.start.parent:o.position.parent;a.is("element","tableCell")&&r.add(a)}}catch(f){i.e(f)}finally{i.f()}var s,c=_createForOfIteratorHelper(r.values());try{for(c.s();!(s=c.n()).done;){var l,u=_createForOfIteratorHelper(_toConsumableArray(s.value.getChildren()).filter((function(e){return lm(e,t)})));try{for(u.s();!(l=u.n()).done;){var d=l.value;e.refreshItem(d)}}catch(f){u.e(f)}finally{u.f()}}}catch(f){c.e(f)}finally{c.f()}return!1}(e.document.differ,t)}))}(t,e.editing.mapper),function(e){e.document.registerPostFixer((function(t){return function(e,t){var n,r=!1,i=_createForOfIteratorHelper(t.document.differ.getChanges());try{for(i.s();!(n=i.n()).done;){var o=n.value;"insert"==o.type&&"table"==o.name&&(r=om(o.position.nodeAfter,e)||r),"insert"==o.type&&"tableRow"==o.name&&(r=am(o.position.nodeAfter,e)||r),"insert"==o.type&&"tableCell"==o.name&&(r=sm(o.position.nodeAfter,e)||r),cm(o)&&(r=sm(o.position.parent,e)||r)}}catch(a){i.e(a)}finally{i.f()}return r}(t,e)}))}(t)}}],[{key:"pluginName",get:function(){return"TableEditing"}},{key:"requires",get:function(){return[Yg]}}]),n}(d);n(266);var dm=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;_classCallCheck(this,n);var i=(r=t.call(this,e)).bindTemplate;return r.items=r._createGridCollection(),r.set("rows",0),r.set("columns",0),r.bind("label").to(_assertThisInitialized(r),"columns",_assertThisInitialized(r),"rows",(function(e,t){return"".concat(t," \xd7 ").concat(e)})),r.setTemplate({tag:"div",attributes:{class:["ck"]},children:[{tag:"div",attributes:{class:["ck-insert-table-dropdown__grid"]},on:{"mouseover@.ck-insert-table-dropdown-grid-box":i.to("boxover")},children:r.items},{tag:"div",attributes:{class:["ck-insert-table-dropdown__label"]},children:[{text:i.to("label")}]}],on:{mousedown:i.to((function(e){e.preventDefault()})),click:i.to((function(){r.fire("execute")}))}}),r.on("boxover",(function(e,t){var n=t.target.dataset,i=n.row,o=n.column;r.set({rows:parseInt(i),columns:parseInt(o)})})),r.on("change:columns",(function(){r._highlightGridBoxes()})),r.on("change:rows",(function(){r._highlightGridBoxes()})),r}return _createClass(n,[{key:"focus",value:function(){}},{key:"focusLast",value:function(){}},{key:"_highlightGridBoxes",value:function(){var e=this.rows,t=this.columns;this.items.map((function(n,r){var i=Math.floor(r/10)<e&&r%10<t;n.set("isOn",i)}))}},{key:"_createGridCollection",value:function(){for(var e=[],t=0;t<100;t++){var n=Math.floor(t/10);e.push(new fm(this.locale,n+1,t%10+1))}return this.createCollection(e)}}]),n}(kc),fm=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i){var o;_classCallCheck(this,n);var a=(o=t.call(this,e)).bindTemplate;return o.set("isOn",!1),o.setTemplate({tag:"div",attributes:{class:["ck-insert-table-dropdown-grid-box",a.if("isOn","ck-on")],"data-row":r,"data-column":i}}),o}return n}(kc),hm=n(158),pm=n.n(hm),vm=n(159),gm=n.n(vm),mm=n(160),ym=n.n(mm),km=n(161),_m=n.n(km),bm=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"init",value:function(){var e=this,t=this.editor,n=this.editor.t,r="ltr"===t.locale.contentLanguageDirection;t.ui.componentFactory.add("insertTable",(function(e){var r,i=t.commands.get("insertTable"),o=hl(e);return o.bind("isEnabled").to(i),o.buttonView.set({icon:pm.a,label:n("Insert table"),tooltip:!0}),o.on("change:isOpen",(function(){r||(r=new dm(e),o.panelView.children.add(r),r.delegate("execute").to(o),o.buttonView.on("open",(function(){r.rows=0,r.columns=0})),o.on("execute",(function(){t.execute("insertTable",{rows:r.rows,columns:r.columns}),t.editing.view.focus()})))})),o})),t.ui.componentFactory.add("tableColumn",(function(t){var i=[{type:"switchbutton",model:{commandName:"setTableColumnHeader",label:n("Header column"),bindIsOn:!0}},{type:"separator"},{type:"button",model:{commandName:r?"insertTableColumnLeft":"insertTableColumnRight",label:n("Insert column left")}},{type:"button",model:{commandName:r?"insertTableColumnRight":"insertTableColumnLeft",label:n("Insert column right")}},{type:"button",model:{commandName:"removeTableColumn",label:n("Delete column")}},{type:"button",model:{commandName:"selectTableColumn",label:n("Select column")}}];return e._prepareDropdown(n("Column"),gm.a,i,t)})),t.ui.componentFactory.add("tableRow",(function(t){var r=[{type:"switchbutton",model:{commandName:"setTableRowHeader",label:n("Header row"),bindIsOn:!0}},{type:"separator"},{type:"button",model:{commandName:"insertTableRowAbove",label:n("Insert row above")}},{type:"button",model:{commandName:"insertTableRowBelow",label:n("Insert row below")}},{type:"button",model:{commandName:"removeTableRow",label:n("Delete row")}},{type:"button",model:{commandName:"selectTableRow",label:n("Select row")}}];return e._prepareDropdown(n("Row"),ym.a,r,t)})),t.ui.componentFactory.add("mergeTableCells",(function(t){var i=[{type:"button",model:{commandName:"mergeTableCellUp",label:n("Merge cell up")}},{type:"button",model:{commandName:r?"mergeTableCellRight":"mergeTableCellLeft",label:n("Merge cell right")}},{type:"button",model:{commandName:"mergeTableCellDown",label:n("Merge cell down")}},{type:"button",model:{commandName:r?"mergeTableCellLeft":"mergeTableCellRight",label:n("Merge cell left")}},{type:"separator"},{type:"button",model:{commandName:"splitTableCellVertically",label:n("Split cell vertically")}},{type:"button",model:{commandName:"splitTableCellHorizontally",label:n("Split cell horizontally")}}];return e._prepareMergeSplitButtonDropdown(n("Merge cells"),_m.a,i,t)}))}},{key:"_prepareDropdown",value:function(e,t,n,r){var i=this.editor,o=hl(r),a=this._fillDropdownWithListOptions(o,n);return o.buttonView.set({label:e,icon:t,tooltip:!0}),o.bind("isEnabled").toMany(a,"isEnabled",(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.some((function(e){return e}))})),this.listenTo(o,"execute",(function(e){i.execute(e.source.commandName),i.editing.view.focus()})),o}},{key:"_prepareMergeSplitButtonDropdown",value:function(e,t,n,r){var i=this.editor,o=hl(r,Kc);return this._fillDropdownWithListOptions(o,n),o.buttonView.set({label:e,icon:t,tooltip:!0,isEnabled:!0}),this.listenTo(o.buttonView,"execute",(function(){i.execute("mergeTableCells"),i.editing.view.focus()})),this.listenTo(o,"execute",(function(e){i.execute(e.source.commandName),i.editing.view.focus()})),o}},{key:"_fillDropdownWithListOptions",value:function(e,t){var n,r=this.editor,i=[],o=new $e.default,a=_createForOfIteratorHelper(t);try{for(a.s();!(n=a.n()).done;){wm(n.value,r,i,o)}}catch(s){a.e(s)}finally{a.f()}return vl(e,o),i}}],[{key:"pluginName",get:function(){return"TableUI"}}]),n}(d);function wm(e,t,n,r){var i=e.model=new Cl(e.model),o=e.model,a=o.commandName,s=o.bindIsOn;if("button"===e.type||"switchbutton"===e.type){var c=t.commands.get(a);n.push(c),i.set({commandName:a}),i.bind("isEnabled").to(c),s&&i.bind("isOn").to(c,"value")}i.set({withText:!0}),r.add(e)}n(268);var xm=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"init",value:function(){var e=this;this.listenTo(this.editor.model,"deleteContent",(function(t,n){return e._handleDeleteContent(t,n)}),{priority:"high"}),this._defineSelectionConverter(),this._enablePluginDisabling()}},{key:"getSelectedTableCells",value:function(){var e=gg(this.editor.model.document.selection);return 0==e.length?null:e}},{key:"getSelectionAsFragment",value:function(){var e=this,t=this.getSelectedTableCells();return t?this.editor.model.change((function(n){var r=n.createDocumentFragment(),i=e.editor.plugins.get("TableUtils"),o=_g(t),a=o.first,s=o.last,c=kg(t),l=c.first,u=c.last,d=t[0].findAncestor("table"),f=u,h=s;if(bg(t,i)){var p={firstColumn:a,lastColumn:s,firstRow:l,lastRow:u};f=Lg(d,p),h=Vg(d,p)}var v=Ig(d,{startRow:l,startColumn:a,endRow:f,endColumn:h},n);return n.insert(v,r,0),r})):null}},{key:"setCellSelection",value:function(e,t){var n=this._getCellsToSelect(e,t);this.editor.model.change((function(e){e.setSelection(n.cells.map((function(t){return e.createRangeOn(t)})),{backward:n.backward})}))}},{key:"getFocusCell",value:function(){var e=_toConsumableArray(this.editor.model.document.selection.getRanges()).pop().getContainedElement();return e&&e.is("element","tableCell")?e:null}},{key:"getAnchorCell",value:function(){var e=Si(this.editor.model.document.selection.getRanges()).getContainedElement();return e&&e.is("element","tableCell")?e:null}},{key:"_defineSelectionConverter",value:function(){var e=this,t=this.editor,n=new Set;t.conversion.for("editingDowncast").add((function(t){return t.on("selection",(function(t,r,i){var o=i.writer;!function(e){var t,r=_createForOfIteratorHelper(n);try{for(r.s();!(t=r.n()).done;){var i=t.value;e.removeClass("ck-editor__editable_selected",i)}}catch(o){r.e(o)}finally{r.f()}n.clear()}(o);var a=e.getSelectedTableCells();if(a){var s,c=_createForOfIteratorHelper(a);try{for(c.s();!(s=c.n()).done;){var l=s.value,u=i.mapper.toViewElement(l);o.addClass("ck-editor__editable_selected",u),n.add(u)}}catch(f){c.e(f)}finally{c.f()}var d=i.mapper.toViewElement(a[a.length-1]);o.setSelection(d,0)}}),{priority:"lowest"})}))}},{key:"_enablePluginDisabling",value:function(){var e=this,t=this.editor;this.on("change:isEnabled",(function(){if(!e.isEnabled){var n=e.getSelectedTableCells();if(!n)return;t.model.change((function(e){var r=e.createPositionAt(n[0],0),i=t.model.schema.getNearestSelectionRange(r);e.setSelection(i)}))}}))}},{key:"_handleDeleteContent",value:function(e,t){var n=_slicedToArray(t,2),r=n[0],i=n[1],o=this.editor.model,a=!i||"backward"==i.direction,s=gg(r);s.length&&(e.stop(),o.change((function(e){var t=s[a?s.length-1:0];o.change((function(e){var t,n=_createForOfIteratorHelper(s);try{for(n.s();!(t=n.n()).done;){var r=t.value;o.deleteContent(e.createSelection(r,"in"))}}catch(i){n.e(i)}finally{n.f()}}));var n=o.schema.getNearestSelectionRange(e.createPositionAt(t,0));r.is("documentSelection")?e.setSelection(n):r.setTo(n)})))}},{key:"_getCellsToSelect",value:function(e,t){var n,r=this.editor.plugins.get("TableUtils"),i=r.getCellLocation(e),o=r.getCellLocation(t),a=Math.min(i.row,o.row),s=Math.max(i.row,o.row),c=Math.min(i.column,o.column),l=Math.max(i.column,o.column),u=new Array(s-a+1).fill(null).map((function(){return[]})),d={startRow:a,endRow:s,startColumn:c,endColumn:l},f=_createForOfIteratorHelper(new rg(e.findAncestor("table"),d));try{for(f.s();!(n=f.n()).done;){var h=n.value,p=h.row,v=h.cell;u[p-a].push(v)}}catch(y){f.e(y)}finally{f.f()}var g=o.row<i.row,m=o.column<i.column;return g&&u.reverse(),m&&u.forEach((function(e){return e.reverse()})),{cells:u.flat(),backward:g||m}}}],[{key:"pluginName",get:function(){return"TableSelection"}},{key:"requires",get:function(){return[Yg]}}]),n}(d),Cm=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"init",value:function(){var e=this,t=this.editor,n=t.editing.view.document;this.listenTo(n,"copy",(function(t,n){return e._onCopyCut(t,n)})),this.listenTo(n,"cut",(function(t,n){return e._onCopyCut(t,n)})),this.listenTo(t.model,"insertContent",(function(t,n){return e._onInsertContent.apply(e,[t].concat(_toConsumableArray(n)))}),{priority:"high"}),this.decorate("_replaceTableSlotCell")}},{key:"_onCopyCut",value:function(e,t){var n=this.editor.plugins.get(xm);if(n.getSelectedTableCells()&&("cut"!=e.name||!this.editor.isReadOnly)){t.preventDefault(),e.stop();var r=this.editor.editing.view.document,i=this.editor.data.toView(n.getSelectionAsFragment());r.fire("clipboardOutput",{dataTransfer:t.dataTransfer,content:i,method:e.name})}}},{key:"_onInsertContent",value:function(e,t,n){var r=this;if(!n||n.is("documentSelection")){var i=this.editor.model,o=this.editor.plugins.get(Yg),a=Tm(t,i);if(a){var s=yg(i.document.selection);s.length?(e.stop(),i.change((function(e){var t={width:o.getColumns(a),height:o.getRows(a)},n=function(e,t,n,r){var i=e[0].findAncestor("table"),o=_g(e),a=kg(e),s={firstColumn:o.first,lastColumn:o.last,firstRow:a.first,lastRow:a.last},c=1===e.length;return c&&(s.lastRow+=t.height-1,s.lastColumn+=t.width-1,function(e,t,n,r){var i=r.getColumns(e),o=r.getRows(e);n>i&&r.insertColumns(e,{at:i,columns:n-i}),t>o&&r.insertRows(e,{at:o,rows:t-o})}(i,s.lastRow+1,s.lastColumn+1,r)),c||!bg(e,r)?function(e,t,n){var r=t.firstRow,i=t.lastRow,o=t.firstColumn,a=t.lastColumn,s={first:r,last:i},c={first:o,last:a};Sm(e,o,s,n),Sm(e,a+1,s,n),Am(e,r,c,n),Am(e,i+1,c,n,r)}(i,s,n):(s.lastRow=Lg(i,s),s.lastColumn=Vg(i,s)),s}(s,t,e,o),i=n.lastColumn-n.firstColumn+1,c={startRow:0,startColumn:0,endRow:Math.min(n.lastRow-n.firstRow+1,t.height)-1,endColumn:Math.min(i,t.width)-1};a=Ig(a,c,e);var l=s[0].findAncestor("table"),u=r._replaceSelectedCellsWithPasted(a,t,l,n,e);if(r.editor.plugins.get("TableSelection").isEnabled){var d=wg(u.map((function(t){return e.createRangeOn(t)})));e.setSelection(d)}else e.setSelection(u[0],0)}))):jg(a,o)}}}},{key:"_replaceSelectedCellsWithPasted",value:function(e,t,n,r,i){for(var o,a=t.width,s=t.height,c=function(e,t,n){var r,i=new Array(n).fill(null).map((function(){return new Array(t).fill(null)})),o=_createForOfIteratorHelper(new rg(e));try{for(o.s();!(r=o.n()).done;){var a=r.value,s=a.column,c=a.row,l=a.cell;i[c][s]=l}}catch(u){o.e(u)}finally{o.f()}return i}(e,a,s),l=[],u=0,d=_toConsumableArray(new rg(n,{startRow:r.firstRow,endRow:r.lastRow,startColumn:r.firstColumn,endColumn:r.lastColumn,includeAllSlots:!0}));u<d.length;u++){var f=d[u],h=f.row,p=f.column;p===r.firstColumn&&(o=f.getPositionBefore());var v=c[(h-r.firstRow)%s][(p-r.firstColumn)%a],g=v?i.cloneElement(v):null,m=this._replaceTableSlotCell(f,g,o,i);m&&(Ng(m,h,p,r.lastRow,r.lastColumn,i),l.push(m),o=i.createPositionAfter(m))}var y=parseInt(n.getAttribute("headingRows")||0),k=parseInt(n.getAttribute("headingColumns")||0),_=r.firstColumn<k&&k<=r.lastColumn;if(r.firstRow<y&&y<=r.lastRow){var b=Am(n,y,{first:r.firstColumn,last:r.lastColumn},i,r.firstRow);l.push.apply(l,_toConsumableArray(b))}if(_){var w=Sm(n,k,{first:r.firstRow,last:r.lastRow},i);l.push.apply(l,_toConsumableArray(w))}return l}},{key:"_replaceTableSlotCell",value:function(e,t,n,r){var i=e.cell;return e.isAnchor&&r.remove(i),t?(r.insert(t,n),t):null}}],[{key:"pluginName",get:function(){return"TableClipboard"}},{key:"requires",get:function(){return[xm,Yg]}}]),n}(d);function Tm(e,t){if(!e.is("documentFragment")&&!e.is("element"))return null;if(e.is("element","table"))return e;if(1==e.childCount&&e.getChild(0).is("element","table"))return e.getChild(0);var n,r=t.createRangeIn(e),i=_createForOfIteratorHelper(r.getItems());try{for(i.s();!(n=i.n()).done;){var o=n.value;if(o.is("element","table")){var a=t.createRange(r.start,t.createPositionBefore(o));if(t.hasContent(a,{ignoreWhitespaces:!0}))return null;var s=t.createRange(t.createPositionAfter(o),r.end);return t.hasContent(s,{ignoreWhitespaces:!0})?null:o}}}catch(c){i.e(c)}finally{i.f()}return null}function Am(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(!(t<1))return Og(e,t,i).filter((function(e){return Em(e.column,e.cellWidth,n)})).map((function(e){return Rg(e.cell,t,r)}))}function Sm(e,t,n,r){if(!(t<1))return Pg(e,t).filter((function(e){return Em(e.row,e.cellHeight,n)})).map((function(e){return Mg(e.cell,e.column,t,r)}))}function Em(e,t,n){var r=e+t-1,i=n.first,o=n.last;return e>=i&&e<=o||e<i&&r>=i}var Im=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"init",value:function(){var e=this,t=this.editor.editing.view.document;this.editor.keystrokes.set("Tab",(function(){return e._handleTabOnSelectedTable.apply(e,arguments)}),{priority:"low"}),this.editor.keystrokes.set("Tab",this._getTabHandler(!0),{priority:"low"}),this.editor.keystrokes.set("Shift+Tab",this._getTabHandler(!1),{priority:"low"}),this.listenTo(t,"arrowKey",(function(){return e._onArrowKey.apply(e,arguments)}),{context:"table"})}},{key:"_handleTabOnSelectedTable",value:function(e,t){var n=this.editor,r=n.model.document.selection.getSelectedElement();r&&r.is("element","table")&&(t(),n.model.change((function(e){e.setSelection(e.createRangeIn(r.getChild(0).getChild(0)))})))}},{key:"_getTabHandler",value:function(e){var t=this,n=this.editor;return function(r,i){var o=mg(n.model.document.selection)[0];if(o||(o=t.editor.plugins.get("TableSelection").getFocusCell()),o){i();var a=o.parent,s=a.parent,c=s.getChildIndex(a),l=a.getChildIndex(o),u=0===l;if(e||!u||0!==c){var d=l===a.childCount-1;if(e&&c===s.childCount-1&&d&&(n.execute("insertTableRowBelow"),c===s.childCount-1))n.model.change((function(e){e.setSelection(e.createRangeOn(s))}));else{var f;if(e&&d){var h=s.getChild(c+1);f=h.getChild(0)}else if(!e&&u){var p=s.getChild(c-1);f=p.getChild(p.childCount-1)}else f=a.getChild(l+(e?1:-1));n.model.change((function(e){e.setSelection(e.createRangeIn(f))}))}}else n.model.change((function(e){e.setSelection(e.createRangeOn(s))}))}}}},{key:"_onArrowKey",value:function(e,t){var n=Dn(t.keyCode,this.editor.locale.contentLanguageDirection);this._handleArrowKeys(n,t.shiftKey)&&(t.preventDefault(),t.stopPropagation(),e.stop())}},{key:"_handleArrowKeys",value:function(e,t){var n,r=this.editor.model.document.selection,i=["right","down"].includes(e),o=gg(r);if(o.length)return n=t?this.editor.plugins.get("TableSelection").getFocusCell():i?o[o.length-1]:o[0],this._navigateFromCellInDirection(n,e,t),!0;var a=r.focus.findAncestor("tableCell");return!(!a||t&&!r.isCollapsed&&r.isBackward==i||!this._isSelectionAtCellEdge(r,a,i)||(this._navigateFromCellInDirection(a,e,t),0))}},{key:"_isSelectionAtCellEdge",value:function(e,t,n){var r=this.editor.model,i=this.editor.model.schema,o=n?e.getLastPosition():e.getFirstPosition();if(!i.getLimitElement(o).is("element","tableCell"))return r.createPositionAt(t,n?"end":0).isTouching(o);var a=r.createSelection(o);return r.modifySelection(a,{direction:n?"forward":"backward"}),o.isEqual(a.focus)}},{key:"_navigateFromCellInDirection",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=this.editor.model,i=e.findAncestor("table"),o=_toConsumableArray(new rg(i,{includeAllSlots:!0})),a=o[o.length-1],s=a.row,c=a.column,l=o.find((function(t){return t.cell==e})),u=l.row,d=l.column;switch(t){case"left":d--;break;case"up":u--;break;case"right":d+=l.cellWidth;break;case"down":u+=l.cellHeight}if(u<0||u>s||d<0&&u<=0||d>c&&u>=s)r.change((function(e){e.setSelection(e.createRangeOn(i))}));else{d<0?(d=n?0:c,u--):d>c&&(d=n?c:0,u++);var f=o.find((function(e){return e.row==u&&e.column==d})).cell,h=["right","down"].includes(t),p=this.editor.plugins.get("TableSelection");if(n&&p.isEnabled){var v=p.getAnchorCell()||e;p.setCellSelection(v,f)}else{var g=r.createPositionAt(f,h?0:"end");r.change((function(e){e.setSelection(g)}))}}}}],[{key:"pluginName",get:function(){return"TableKeyboard"}},{key:"requires",get:function(){return[xm]}}]),n}(d),Om=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this,e)).domEventType=["mousemove","mouseleave"],r}return _createClass(n,[{key:"onDomEvent",value:function(e){this.fire(e.type,e)}}]),n}(Zr),Rm=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"init",value:function(){this.editor.editing.view.addObserver(Om),this._enableShiftClickSelection(),this._enableMouseDragSelection()}},{key:"_enableShiftClickSelection",value:function(){var e=this,t=this.editor,n=!1,r=t.plugins.get(xm);this.listenTo(t.editing.view.document,"mousedown",(function(i,o){if(e.isEnabled&&r.isEnabled&&o.domEvent.shiftKey){var a=r.getAnchorCell()||mg(t.model.document.selection)[0];if(a){var s=e._getModelTableCellFromDomEvent(o);s&&Pm(a,s)&&(n=!0,r.setCellSelection(a,s),o.preventDefault())}}})),this.listenTo(t.editing.view.document,"mouseup",(function(){n=!1})),this.listenTo(t.editing.view.document,"selectionChange",(function(e){n&&e.stop()}),{priority:"highest"})}},{key:"_enableMouseDragSelection",value:function(){var e,t,n=this,r=this.editor,i=!1,o=!1,a=r.plugins.get(xm);this.listenTo(r.editing.view.document,"mousedown",(function(t,r){n.isEnabled&&a.isEnabled&&(r.domEvent.shiftKey||r.domEvent.ctrlKey||r.domEvent.altKey||(e=n._getModelTableCellFromDomEvent(r)))})),this.listenTo(r.editing.view.document,"mousemove",(function(r,s){if(s.domEvent.buttons&&e){var c=n._getModelTableCellFromDomEvent(s);c&&Pm(e,c)&&(t=c,i||t==e||(i=!0)),i&&(o=!0,a.setCellSelection(e,t),s.preventDefault())}})),this.listenTo(r.editing.view.document,"mouseup",(function(){i=!1,o=!1,e=null,t=null})),this.listenTo(r.editing.view.document,"selectionChange",(function(e){o&&e.stop()}),{priority:"highest"})}},{key:"_getModelTableCellFromDomEvent",value:function(e){var t=this.editor.editing.view.createPositionAt(e.target,0);return this.editor.editing.mapper.toModelPosition(t).parent.findAncestor("tableCell",{includeSelf:!0})}}],[{key:"pluginName",get:function(){return"TableMouse"}},{key:"requires",get:function(){return[xm]}}]),n}(d);function Pm(e,t){return e.parent.parent==t.parent.parent}function Mm(e){var t=e.getSelectedElement();return t&&Dm(t)?t:null}function Nm(e){var t=function(e,t){for(var n=t.parent;n;){if("table"===n.name)return n;n=n.parent}}(0,e.getFirstPosition());return t&&Dm(t.parent)?t.parent:null}function Dm(e){return!!e.getCustomProperty("table")&&Pu(e)}n(270);var Fm=["left","right","center","justify"];function jm(e){return Fm.includes(e)}function Lm(e,t){return"rtl"==t.contentLanguageDirection?"right"===e:"left"===e}function Vm(e){var t=e.map((function(e){return"string"==typeof e?{name:e}:e})).filter((function(e){var t=!!Fm.includes(e.name);return t||Object(Ke.logWarning)("alignment-config-name-not-recognized",{option:e}),t})),n=t.filter((function(e){return!!e.className})).length;if(n&&n<t.length)throw new Ke.default("alignment-config-classnames-are-missing",{configuredOptions:e});return t.forEach((function(t,n,r){var i=r.slice(n+1);if(i.some((function(e){return e.name==t.name})))throw new Ke.default("alignment-config-name-already-defined",{option:t,configuredOptions:e});if(t.className&&i.some((function(e){return e.className==t.className})))throw new Ke.default("alignment-config-classname-already-defined",{option:t,configuredOptions:e})})),t}var Bm="alignment",zm=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"refresh",value:function(){var e=this.editor.locale,t=Si(this.editor.model.document.selection.getSelectedBlocks());this.isEnabled=!!t&&this._canBeAligned(t),this.value=this.isEnabled&&t.hasAttribute("alignment")?t.getAttribute("alignment"):"rtl"===e.contentLanguageDirection?"right":"left"}},{key:"execute",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this.editor,r=n.locale,i=n.model,o=i.document,a=t.value;i.change((function(t){var n=Array.from(o.selection.getSelectedBlocks()).filter((function(t){return e._canBeAligned(t)})),i=n[0].getAttribute("alignment");Lm(a,r)||i===a||!a?function(e,t){var n,r=_createForOfIteratorHelper(e);try{for(r.s();!(n=r.n()).done;){var i=n.value;t.removeAttribute(Bm,i)}}catch(o){r.e(o)}finally{r.f()}}(n,t):function(e,t,n){var r,i=_createForOfIteratorHelper(e);try{for(i.s();!(r=i.n()).done;){var o=r.value;t.setAttribute(Bm,n,o)}}catch(a){i.e(a)}finally{i.f()}}(n,t,a)}))}},{key:"_canBeAligned",value:function(e){return this.editor.model.schema.checkAttribute(e,Bm)}}]),n}(h),Hm=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),r=t.call(this,e),e.config.define("alignment",{options:_toConsumableArray(Fm.map((function(e){return{name:e}})))}),r}return _createClass(n,[{key:"init",value:function(){var e=this.editor,t=e.locale,n=e.model.schema,r=Vm(e.config.get("alignment.options")).filter((function(e){return jm(e.name)&&!Lm(e.name,t)})),i=r.some((function(e){return!!e.className}));n.extend("$block",{allowAttributes:"alignment"}),e.model.schema.setAttributeProperties("alignment",{isFormatting:!0}),i?e.conversion.attributeToAttribute(function(e){var t,n={model:{key:"alignment",values:e.map((function(e){return e.name}))},view:{}},r=_createForOfIteratorHelper(e);try{for(r.s();!(t=r.n()).done;){var i=t.value;n.view[i.name]={key:"class",value:i.className}}}catch(o){r.e(o)}finally{r.f()}return n}(r)):e.conversion.for("downcast").attributeToAttribute(function(e){var t,n={model:{key:"alignment",values:e.map((function(e){return e.name}))},view:{}},r=_createForOfIteratorHelper(e);try{for(r.s();!(t=r.n()).done;){var i=t.value.name;n.view[i]={key:"style",value:{"text-align":i}}}}catch(o){r.e(o)}finally{r.f()}return n}(r));var o,a=function(e){var t,n=[],r=_createForOfIteratorHelper(e);try{for(r.s();!(t=r.n()).done;){var i=t.value.name;n.push({view:{key:"style",value:{"text-align":i}},model:{key:"alignment",value:i}})}}catch(o){r.e(o)}finally{r.f()}return n}(r),s=_createForOfIteratorHelper(a);try{for(s.s();!(o=s.n()).done;){var c=o.value;e.conversion.for("upcast").attributeToAttribute(c)}}catch(h){s.e(h)}finally{s.f()}var l,u=function(e){var t,n=[],r=_createForOfIteratorHelper(e);try{for(r.s();!(t=r.n()).done;){var i=t.value.name;n.push({view:{key:"align",value:i},model:{key:"alignment",value:i}})}}catch(h){r.e(h)}finally{r.f()}return n}(r),d=_createForOfIteratorHelper(u);try{for(d.s();!(l=d.n()).done;){var f=l.value;e.conversion.for("upcast").attributeToAttribute(f)}}catch(h){d.e(h)}finally{d.f()}e.commands.add("alignment",new zm(e))}}],[{key:"pluginName",get:function(){return"AlignmentEditing"}}]),n}(d),Um=new Map([["left",pc.alignLeft],["right",pc.alignRight],["center",pc.alignCenter],["justify",pc.alignJustify]]),Wm=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"localizedOptionTitles",get:function(){var e=this.editor.t;return{left:e("Align left"),right:e("Align right"),center:e("Align center"),justify:e("Justify")}}},{key:"init",value:function(){var e=this,t=this.editor,n=t.ui.componentFactory,r=t.t,i=Vm(t.config.get("alignment.options"));i.map((function(e){return e.name})).filter(jm).forEach((function(t){return e._addButton(t)})),n.add("alignment",(function(e){var t=hl(e),o=i.map((function(e){return n.create("alignment:"+e.name)}));pl(t,o),t.buttonView.set({label:r("Text alignment"),tooltip:!0}),t.toolbarView.isVertical=!0,t.toolbarView.ariaLabel=r("Text alignment toolbar"),t.extendTemplate({attributes:{class:"ck-alignment-dropdown"}});var a=Um.get("rtl"===e.contentLanguageDirection?"right":"left");return t.buttonView.bind("icon").toMany(o,"isOn",(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.findIndex((function(e){return e}));return r<0?a:o[r].icon})),t.bind("isEnabled").toMany(o,"isEnabled",(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.some((function(e){return e}))})),t}))}},{key:"_addButton",value:function(e){var t=this,n=this.editor;n.ui.componentFactory.add("alignment:"+e,(function(r){var i=n.commands.get("alignment"),o=new zc(r);return o.set({label:t.localizedOptionTitles[e],icon:Um.get(e),tooltip:!0,isToggleable:!0}),o.bind("isEnabled").to(i),o.bind("isOn").to(i,"value",(function(t){return t===e})),t.listenTo(o,"execute",(function(){n.execute("alignment",{value:e}),n.editing.view.focus()})),o}))}}],[{key:"pluginName",get:function(){return"AlignmentUI"}}]),n}(d),qm=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var i;return _classCallCheck(this,n),(i=t.call(this,e)).attributeKey=r,i}return _createClass(n,[{key:"refresh",value:function(){var e=this.editor.model,t=e.document;this.value=t.selection.getAttribute(this.attributeKey),this.isEnabled=e.schema.checkAttributeInSelection(t.selection,this.attributeKey)}},{key:"execute",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this.editor.model,r=n.document.selection,i=t.value;n.change((function(t){if(r.isCollapsed)i?t.setSelectionAttribute(e.attributeKey,i):t.removeSelectionAttribute(e.attributeKey);else{var o,a=_createForOfIteratorHelper(n.schema.getValidRanges(r.getRanges(),e.attributeKey));try{for(a.s();!(o=a.n()).done;){var s=o.value;i?t.setAttribute(e.attributeKey,i,s):t.removeAttribute(e.attributeKey,s)}}catch(c){a.e(c)}finally{a.f()}}}))}}]),n}(h);Object(u.default)(function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this,e)).set("isEmpty",!0),r.on("change",(function(){r.set("isEmpty",0===r.length)})),r}return _createClass(n,[{key:"add",value:function(e,t){this.find((function(t){return t.color===e.color}))||_get3(_getPrototypeOf(n.prototype),"add",this).call(this,e,t)}},{key:"hasColor",value:function(e){return!!this.find((function(t){return t.color===e}))}}]),n}($e.default),l.default),n(272);var Ym="fontSize",Gm="fontFamily";function Jm(e,t){var n,r={model:{key:e,values:[]},view:{},upcastAlso:{}},i=_createForOfIteratorHelper(t);try{for(i.s();!(n=i.n()).done;){var o=n.value;r.model.values.push(o.model),r.view[o.model]=o.view,o.upcastAlso&&(r.upcastAlso[o.model]=o.upcastAlso)}}catch(a){i.e(a)}finally{i.f()}return r}var $m=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){return _classCallCheck(this,n),t.call(this,e,Ym)}return n}(qm);function Km(e){return e.map((function(e){return function(e){if(function(e){return"object"==typeof e&&e.title&&e.model&&e.view}(e))return Zm(e);var t=function(e){return Qm[e]||Qm[e.model]}(e);return t?Zm(t):"default"===e?{model:void 0,title:"Default"}:function(e){var t;if("object"==typeof e){if(!e.model)throw new Ke.default("font-size-invalid-definition",null,e);t=parseFloat(e.model)}else t=parseFloat(e);return isNaN(t)}(e)?void 0:function(e){return"number"!=typeof e&&"string"!=typeof e||(e={title:String(e),model:parseFloat(e)+"px"}),e.view={name:"span",styles:{"font-size":e.model}},Zm(e)}(e)}(e)})).filter((function(e){return!!e}))}var Qm={get tiny(){return{title:"Tiny",model:"tiny",view:{name:"span",classes:"text-tiny",priority:7}}},get small(){return{title:"Small",model:"small",view:{name:"span",classes:"text-small",priority:7}}},get big(){return{title:"Big",model:"big",view:{name:"span",classes:"text-big",priority:7}}},get huge(){return{title:"Huge",model:"huge",view:{name:"span",classes:"text-huge",priority:7}}}};function Zm(e){return e.view.priority||(e.view.priority=7),e}var Xm=["x-small","x-small","small","medium","large","x-large","xx-large","xxx-large"],ey=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),r=t.call(this,e),e.config.define(Ym,{options:["tiny","small","default","big","huge"],supportAllValues:!1}),r}return _createClass(n,[{key:"init",value:function(){var e=this.editor;e.model.schema.extend("$text",{allowAttributes:Ym}),e.model.schema.setAttributeProperties(Ym,{isFormatting:!0,copyOnEnter:!0});var t=e.config.get("fontSize.supportAllValues"),n=Km(this.editor.config.get("fontSize.options")).filter((function(e){return e.model})),r=Jm(Ym,n);t?(this._prepareAnyValueConverters(r),this._prepareCompatibilityConverter()):e.conversion.attributeToElement(r),e.commands.add(Ym,new $m(e))}},{key:"_prepareAnyValueConverters",value:function(e){var t=this.editor,n=e.model.values.filter((function(e){return!function(e){return su.test(e)}(String(e))&&!function(e){return cu.test(e)}(String(e))}));if(n.length)throw new Ke.default("font-size-invalid-use-of-named-presets",null,{presets:n});t.conversion.for("downcast").attributeToElement({model:Ym,view:function(e,t){var n=t.writer;if(e)return n.createAttributeElement("span",{style:"font-size:"+e},{priority:7})}}),t.conversion.for("upcast").elementToAttribute({model:{key:Ym,value:function(e){return e.getStyle("font-size")}},view:{name:"span",styles:{"font-size":/.*/}}})}},{key:"_prepareCompatibilityConverter",value:function(){this.editor.conversion.for("upcast").elementToAttribute({view:{name:"font",attributes:{size:/^[+-]?\d{1,3}$/}},model:{key:Ym,value:function(e){var t=e.getAttribute("size"),n="-"===t[0]||"+"===t[0],r=parseInt(t,10);n&&(r=3+r);var i=Xm.length-1,o=Math.min(Math.max(r,0),i);return Xm[o]}}})}}],[{key:"pluginName",get:function(){return"FontSizeEditing"}}]),n}(d),ty=n(162),ny=n.n(ty);n(274);var ry=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"init",value:function(){var e=this,t=this.editor,n=t.t,r=this._getLocalizedOptions(),i=t.commands.get(Ym);t.ui.componentFactory.add(Ym,(function(o){var a=hl(o);return vl(a,function(e,t){var n,r=new $e.default,i=_createForOfIteratorHelper(e);try{var o=function(){var e=n.value,i={type:"button",model:new Cl({commandName:Ym,commandParam:e.model,label:e.title,class:"ck-fontsize-option",withText:!0})};e.view&&e.view.styles&&i.model.set("labelStyle","font-size:"+e.view.styles["font-size"]),e.view&&e.view.classes&&i.model.set("class","".concat(i.model.class," ").concat(e.view.classes)),i.model.bind("isOn").to(t,"value",(function(t){return t===e.model})),r.add(i)};for(i.s();!(n=i.n()).done;)o()}catch(a){i.e(a)}finally{i.f()}return r}(r,i)),a.buttonView.set({label:n("Font Size"),icon:ny.a,tooltip:!0}),a.extendTemplate({attributes:{class:["ck-font-size-dropdown"]}}),a.bind("isEnabled").to(i),e.listenTo(a,"execute",(function(e){t.execute(e.source.commandName,{value:e.source.commandParam}),t.editing.view.focus()})),a}))}},{key:"_getLocalizedOptions",value:function(){var e=this.editor,t=e.t,n={Default:t("Default"),Tiny:t("Tiny"),Small:t("Small"),Big:t("Big"),Huge:t("Huge")};return Km(e.config.get(Ym).options).map((function(e){var t=n[e.title];return t&&t!=e.title&&(e=Object.assign({},e,{title:t})),e}))}}],[{key:"pluginName",get:function(){return"FontSizeUI"}}]),n}(d),iy=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){return _classCallCheck(this,n),t.call(this,e,Gm)}return n}(qm);function oy(e){return e.map(ay).filter((function(e){return!!e}))}function ay(e){return"object"==typeof e?e:"default"===e?{title:"Default",model:void 0}:"string"==typeof e?function(e){var t=e.replace(/"|'/g,"").split(","),n=t[0],r=t.map(sy).join(", ");return{title:n,model:r,view:{name:"span",styles:{"font-family":r},priority:7}}}(e):void 0}function sy(e){return(e=e.trim()).indexOf(" ")>0&&(e="'".concat(e,"'")),e}var cy=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),r=t.call(this,e),e.config.define(Gm,{options:["default","Arial, Helvetica, sans-serif","Courier New, Courier, monospace","Georgia, serif","Lucida Sans Unicode, Lucida Grande, sans-serif","Tahoma, Geneva, sans-serif","Times New Roman, Times, serif","Trebuchet MS, Helvetica, sans-serif","Verdana, Geneva, sans-serif"],supportAllValues:!1}),r}return _createClass(n,[{key:"init",value:function(){var e=this.editor;e.model.schema.extend("$text",{allowAttributes:Gm}),e.model.schema.setAttributeProperties(Gm,{isFormatting:!0,copyOnEnter:!0});var t=oy(e.config.get("fontFamily.options")).filter((function(e){return e.model})),n=Jm(Gm,t);e.config.get("fontFamily.supportAllValues")?(this._prepareAnyValueConverters(),this._prepareCompatibilityConverter()):e.conversion.attributeToElement(n),e.commands.add(Gm,new iy(e))}},{key:"_prepareAnyValueConverters",value:function(){var e=this.editor;e.conversion.for("downcast").attributeToElement({model:Gm,view:function(e,t){return t.writer.createAttributeElement("span",{style:"font-family:"+e},{priority:7})}}),e.conversion.for("upcast").elementToAttribute({model:{key:Gm,value:function(e){return e.getStyle("font-family")}},view:{name:"span",styles:{"font-family":/.*/}}})}},{key:"_prepareCompatibilityConverter",value:function(){this.editor.conversion.for("upcast").elementToAttribute({view:{name:"font",attributes:{face:/.*/}},model:{key:Gm,value:function(e){return e.getAttribute("face")}}})}}],[{key:"pluginName",get:function(){return"FontFamilyEditing"}}]),n}(d),ly=n(163),uy=n.n(ly),dy=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"init",value:function(){var e=this,t=this.editor,n=t.t,r=this._getLocalizedOptions(),i=t.commands.get(Gm);t.ui.componentFactory.add(Gm,(function(o){var a=hl(o);return vl(a,function(e,t){var n,r=new $e.default,i=_createForOfIteratorHelper(e);try{var o=function(){var e=n.value,i={type:"button",model:new Cl({commandName:Gm,commandParam:e.model,label:e.title,withText:!0})};i.model.bind("isOn").to(t,"value",(function(t){return t===e.model||!(!t||!e.model)&&t.split(",")[0].replace(/'/g,"").toLowerCase()===e.model.toLowerCase()})),e.view&&e.view.styles&&i.model.set("labelStyle","font-family: "+e.view.styles["font-family"]),r.add(i)};for(i.s();!(n=i.n()).done;)o()}catch(a){i.e(a)}finally{i.f()}return r}(r,i)),a.buttonView.set({label:n("Font Family"),icon:uy.a,tooltip:!0}),a.extendTemplate({attributes:{class:"ck-font-family-dropdown"}}),a.bind("isEnabled").to(i),e.listenTo(a,"execute",(function(e){t.execute(e.source.commandName,{value:e.source.commandParam}),t.editing.view.focus()})),a}))}},{key:"_getLocalizedOptions",value:function(){var e=this.editor,t=e.t;return oy(e.config.get(Gm).options).map((function(e){return"Default"===e.title&&(e.title=t("Default")),e}))}}],[{key:"pluginName",get:function(){return"FontFamilyUI"}}]),n}(d),fy=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"refresh",value:function(){var e=this.editor.model,t=e.document;this.value=t.selection.getAttribute("highlight"),this.isEnabled=e.schema.checkAttributeInSelection(t.selection,"highlight")}},{key:"execute",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this.editor.model,r=n.document.selection,i=t.value;n.change((function(t){var o=n.schema.getValidRanges(r.getRanges(),"highlight");if(r.isCollapsed){var a=r.getFirstPosition();if(r.hasAttribute("highlight")){var s=function(t){return t.item.hasAttribute("highlight")&&t.item.getAttribute("highlight")===e.value},c=a.getLastMatchingPosition(s,{direction:"backward"}),l=a.getLastMatchingPosition(s),u=t.createRange(c,l);i&&e.value!==i?(t.setAttribute("highlight",i,u),t.setSelectionAttribute("highlight",i)):(t.removeAttribute("highlight",u),t.removeSelectionAttribute("highlight"))}else i&&t.setSelectionAttribute("highlight",i)}else{var d,f=_createForOfIteratorHelper(o);try{for(f.s();!(d=f.n()).done;){var h=d.value;i?t.setAttribute("highlight",i,h):t.removeAttribute("highlight",h)}}catch(p){f.e(p)}finally{f.f()}}}))}}]),n}(h),hy=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),r=t.call(this,e),e.config.define("highlight",{options:[{model:"yellowMarker",class:"marker-yellow",title:"Yellow marker",color:"var(--ck-highlight-marker-yellow)",type:"marker"},{model:"greenMarker",class:"marker-green",title:"Green marker",color:"var(--ck-highlight-marker-green)",type:"marker"},{model:"pinkMarker",class:"marker-pink",title:"Pink marker",color:"var(--ck-highlight-marker-pink)",type:"marker"},{model:"blueMarker",class:"marker-blue",title:"Blue marker",color:"var(--ck-highlight-marker-blue)",type:"marker"},{model:"redPen",class:"pen-red",title:"Red pen",color:"var(--ck-highlight-pen-red)",type:"pen"},{model:"greenPen",class:"pen-green",title:"Green pen",color:"var(--ck-highlight-pen-green)",type:"pen"}]}),r}return _createClass(n,[{key:"init",value:function(){var e=this.editor;e.model.schema.extend("$text",{allowAttributes:"highlight"});var t=e.config.get("highlight.options");e.conversion.attributeToElement(function(e){var t,n={model:{key:"highlight",values:[]},view:{}},r=_createForOfIteratorHelper(e);try{for(r.s();!(t=r.n()).done;){var i=t.value;n.model.values.push(i.model),n.view[i.model]={name:"mark",classes:i.class}}}catch(o){r.e(o)}finally{r.f()}return n}(t)),e.commands.add("highlight",new fy(e))}}],[{key:"pluginName",get:function(){return"HighlightEditing"}}]),n}(d),py=n(164),vy=n.n(py),gy=n(165),my=n.n(gy);n(276);var yy=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"localizedOptionTitles",get:function(){var e=this.editor.t;return{"Yellow marker":e("Yellow marker"),"Green marker":e("Green marker"),"Pink marker":e("Pink marker"),"Blue marker":e("Blue marker"),"Red pen":e("Red pen"),"Green pen":e("Green pen")}}},{key:"init",value:function(){var e,t=this.editor.config.get("highlight.options"),n=_createForOfIteratorHelper(t);try{for(n.s();!(e=n.n()).done;){var r=e.value;this._addHighlighterButton(r)}}catch(i){n.e(i)}finally{n.f()}this._addRemoveHighlightButton(),this._addDropdown(t)}},{key:"_addRemoveHighlightButton",value:function(){var e=this.editor.t,t=this.editor.commands.get("highlight");this._addButton("removeHighlight",e("Remove highlight"),pc.eraser,null,(function(e){e.bind("isEnabled").to(t,"isEnabled")}))}},{key:"_addHighlighterButton",value:function(e){var t=this.editor.commands.get("highlight");this._addButton("highlight:"+e.model,e.title,ky(e.type),e.model,(function(n){n.bind("isEnabled").to(t,"isEnabled"),n.bind("isOn").to(t,"value",(function(t){return t===e.model})),n.iconView.fillColor=e.color,n.isToggleable=!0}))}},{key:"_addButton",value:function(e,t,n,r,i){var o=this,a=this.editor;a.ui.componentFactory.add(e,(function(e){var s=new zc(e);return s.set({label:o.localizedOptionTitles[t]?o.localizedOptionTitles[t]:t,icon:n,tooltip:!0}),s.on("execute",(function(){a.execute("highlight",{value:r}),a.editing.view.focus()})),i(s),s}))}},{key:"_addDropdown",value:function(e){var t=this,n=this.editor,r=n.t,i=n.ui.componentFactory,o=e[0],a=e.reduce((function(e,t){return e[t.model]=t,e}),{});i.add("highlight",(function(s){var c=n.commands.get("highlight"),l=hl(s,Kc),u=l.buttonView;u.set({tooltip:r("Highlight"),lastExecuted:o.model,commandValue:o.model,isToggleable:!0}),u.bind("icon").to(c,"value",(function(e){return ky(f(e,"type"))})),u.bind("color").to(c,"value",(function(e){return f(e,"color")})),u.bind("commandValue").to(c,"value",(function(e){return f(e,"model")})),u.bind("isOn").to(c,"value",(function(e){return!!e})),u.delegate("execute").to(l);var d=e.map((function(e){var n=i.create("highlight:"+e.model);return t.listenTo(n,"execute",(function(){return l.buttonView.set({lastExecuted:e.model})})),n}));function f(e,t){return a[e&&e!==u.lastExecuted?e:u.lastExecuted][t]}return l.bind("isEnabled").toMany(d,"isEnabled",(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.some((function(e){return e}))})),d.push(new rl),d.push(i.create("removeHighlight")),pl(l,d),function(e){e.buttonView.actionView.iconView.bind("fillColor").to(e.buttonView,"color")}(l),l.toolbarView.ariaLabel=r("Text highlight toolbar"),u.on("execute",(function(){n.execute("highlight",{value:u.commandValue}),n.editing.view.focus()})),l}))}}],[{key:"pluginName",get:function(){return"HighlightUI"}}]),n}(d);function ky(e){return"marker"===e?vy.a:my.a}var _y=n(166),by=n.n(_y),wy="removeFormat",xy=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"init",value:function(){var e=this,t=this.editor,n=t.t;t.ui.componentFactory.add(wy,(function(r){var i=t.commands.get(wy),o=new zc(r);return o.set({label:n("Remove Format"),icon:by.a,tooltip:!0}),o.bind("isOn","isEnabled").to(i,"value","isEnabled"),e.listenTo(o,"execute",(function(){t.execute(wy),t.editing.view.focus()})),o}))}}],[{key:"pluginName",get:function(){return"RemoveFormatUI"}}]),n}(d),Cy=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"refresh",value:function(){var e=this.editor.model;this.isEnabled=!!Si(this._getFormattingItems(e.document.selection,e.schema))}},{key:"execute",value:function(){var e=this,t=this.editor.model,n=t.schema;t.change((function(r){var i,o=_createForOfIteratorHelper(e._getFormattingItems(t.document.selection,n));try{for(o.s();!(i=o.n()).done;){var a=i.value;if(a.is("selection")){var s,c=_createForOfIteratorHelper(e._getFormattingAttributes(a,n));try{for(c.s();!(s=c.n()).done;){var l=s.value;r.removeSelectionAttribute(l)}}catch(p){c.e(p)}finally{c.f()}}else{var u,d=r.createRangeOn(a),f=_createForOfIteratorHelper(e._getFormattingAttributes(a,n));try{for(f.s();!(u=f.n()).done;){var h=u.value;r.removeAttribute(h,d)}}catch(p){f.e(p)}finally{f.f()}}}}catch(p){o.e(p)}finally{o.f()}}))}},{key:"_getFormattingItems",value:regeneratorRuntime.mark((function e(t,n){var r,i,o,a,s,c,l,u,d,f,h=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=function(e){return!!Si(h._getFormattingAttributes(e,n))},i=_createForOfIteratorHelper(t.getRanges()),e.prev=2,i.s();case 4:if((o=i.n()).done){e.next=27;break}a=o.value,s=_createForOfIteratorHelper(a.getItems()),e.prev=7,s.s();case 9:if((c=s.n()).done){e.next=17;break}if(l=c.value,e.t0=!n.isBlock(l)&&r(l),!e.t0){e.next=15;break}return e.next=15,l;case 15:e.next=9;break;case 17:e.next=22;break;case 19:e.prev=19,e.t1=e.catch(7),s.e(e.t1);case 22:return e.prev=22,s.f(),e.finish(22);case 25:e.next=4;break;case 27:e.next=32;break;case 29:e.prev=29,e.t2=e.catch(2),i.e(e.t2);case 32:return e.prev=32,i.f(),e.finish(32);case 35:u=_createForOfIteratorHelper(t.getSelectedBlocks()),e.prev=36,u.s();case 38:if((d=u.n()).done){e.next=46;break}if(f=d.value,e.t3=r(f),!e.t3){e.next=44;break}return e.next=44,f;case 44:e.next=38;break;case 46:e.next=51;break;case 48:e.prev=48,e.t4=e.catch(36),u.e(e.t4);case 51:return e.prev=51,u.f(),e.finish(51);case 54:if(e.t5=r(t),!e.t5){e.next=58;break}return e.next=58,t;case 58:case"end":return e.stop()}}),e,null,[[2,29,32,35],[7,19,22,25],[36,48,51,54]])}))},{key:"_getFormattingAttributes",value:regeneratorRuntime.mark((function e(t,n){var r,i,o,a,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=_createForOfIteratorHelper(t.getAttributes()),e.prev=1,r.s();case 3:if((i=r.n()).done){e.next=12;break}if(o=_slicedToArray(i.value,1),a=o[0],s=n.getAttributeProperties(a),e.t0=s&&s.isFormatting,!e.t0){e.next=10;break}return e.next=10,a;case 10:e.next=3;break;case 12:e.next=17;break;case 14:e.prev=14,e.t1=e.catch(1),r.e(e.t1);case 17:return e.prev=17,r.f(),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[1,14,17,20]])}))}]),n}(h),Ty=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"init",value:function(){var e=this.editor;e.commands.add("removeFormat",new Cy(e))}}],[{key:"pluginName",get:function(){return"RemoveFormatEditing"}}]),n}(d),Ay="strikethrough",Sy=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"init",value:function(){var e=this.editor;e.model.schema.extend("$text",{allowAttributes:Ay}),e.model.schema.setAttributeProperties(Ay,{isFormatting:!0,copyOnEnter:!0}),e.conversion.attributeToElement({model:Ay,view:"s",upcastAlso:["del","strike",{styles:{"text-decoration":"line-through"}}]}),e.commands.add(Ay,new vf(e,Ay)),e.keystrokes.set("CTRL+SHIFT+X","strikethrough")}}],[{key:"pluginName",get:function(){return"StrikethroughEditing"}}]),n}(d),Ey=n(167),Iy=n.n(Ey),Oy="strikethrough",Ry=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"init",value:function(){var e=this,t=this.editor,n=t.t;t.ui.componentFactory.add(Oy,(function(r){var i=t.commands.get(Oy),o=new zc(r);return o.set({label:n("Strikethrough"),icon:Iy.a,keystroke:"CTRL+SHIFT+X",tooltip:!0,isToggleable:!0}),o.bind("isOn","isEnabled").to(i,"value","isEnabled"),e.listenTo(o,"execute",(function(){t.execute(Oy),t.editing.view.focus()})),o}))}}],[{key:"pluginName",get:function(){return"StrikethroughUI"}}]),n}(d),Py="underline",My=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"init",value:function(){var e=this.editor;e.model.schema.extend("$text",{allowAttributes:Py}),e.model.schema.setAttributeProperties(Py,{isFormatting:!0,copyOnEnter:!0}),e.conversion.attributeToElement({model:Py,view:"u",upcastAlso:{styles:{"text-decoration":"underline"}}}),e.commands.add(Py,new vf(e,Py)),e.keystrokes.set("CTRL+U","underline")}}],[{key:"pluginName",get:function(){return"UnderlineEditing"}}]),n}(d),Ny=n(168),Dy=n.n(Ny),Fy="underline",jy=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"init",value:function(){var e=this,t=this.editor,n=t.t;t.ui.componentFactory.add(Fy,(function(r){var i=t.commands.get(Fy),o=new zc(r);return o.set({label:n("Underline"),icon:Dy.a,keystroke:"CTRL+U",tooltip:!0,isToggleable:!0}),o.bind("isOn","isEnabled").to(i,"value","isEnabled"),e.listenTo(o,"execute",(function(){t.execute(Fy),t.editing.view.focus()})),o}))}}],[{key:"pluginName",get:function(){return"UnderlineUI"}}]),n}(d),Ly=n(39),Vy=n.n(Ly),By={autoRefresh:!0},zy=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:By;if(_classCallCheck(this,t),!e)throw new Ke.default("token-missing-token-url",this);n.initValue&&this._validateTokenValue(n.initValue),this.set("value",n.initValue),this._refresh="function"==typeof e?e:function(){return function(e){return new Promise((function(t,n){var r=new XMLHttpRequest;r.open("GET",e),r.addEventListener("load",(function(){var e=r.status,i=r.response;return e<200||e>299?n(new Ke.default("token-cannot-download-new-token",null)):t(i)})),r.addEventListener("error",(function(){return n(new Error("Network Error"))})),r.addEventListener("abort",(function(){return n(new Error("Abort"))})),r.send()}))}(e)},this._options=Object.assign({},By,n)}return _createClass(t,[{key:"init",value:function(){var e=this;return new Promise((function(t,n){e.value?(e._options.autoRefresh&&e._registerRefreshTokenTimeout(),t(e)):e.refreshToken().then(t).catch(n)}))}},{key:"refreshToken",value:function(){var e=this;return this._refresh().then((function(t){e._validateTokenValue(t),e.set("value",t),e._options.autoRefresh&&e._registerRefreshTokenTimeout()})).then((function(){return e}))}},{key:"destroy",value:function(){clearTimeout(this._tokenRefreshTimeout)}},{key:"_validateTokenValue",value:function(e){var t="string"==typeof e,n=!/^".*"$/.test(e),r=t&&3===e.split(".").length;if(!n||!r)throw new Ke.default("token-not-in-jwt-format",this)}},{key:"_registerRefreshTokenTimeout",value:function(){var e=this,t=this._getTokenRefreshTimeoutTime();clearTimeout(this._tokenRefreshTimeout),this._tokenRefreshTimeout=setTimeout((function(){e.refreshToken()}),t)}},{key:"_getTokenRefreshTimeoutTime",value:function(){try{var t=_slicedToArray(this.value.split("."),2)[1],n=JSON.parse(atob(t)).exp;return n?Math.floor((1e3*n-Date.now())/2):36e5}catch(e){return 36e5}}}],[{key:"create",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:By;return new t(e,n).init()}}]),t}();Object(u.default)(zy,l.default);var Hy=zy,Uy=/^data:(\S*?);base64,/,Wy=function(){function e(t,n,r){if(_classCallCheck(this,e),!t)throw new Ke.default("fileuploader-missing-file",null);if(!n)throw new Ke.default("fileuploader-missing-token",null);if(!r)throw new Ke.default("fileuploader-missing-api-address",null);this.file=function(e){if("string"!=typeof e)return!1;var t=e.match(Uy);return!(!t||!t.length)}(t)?function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:512;try{for(var n=e.match(Uy)[1],r=atob(e.replace(Uy,"")),i=[],o=0;o<r.length;o+=t){for(var a=r.slice(o,o+t),s=new Array(a.length),c=0;c<a.length;c++)s[c]=a.charCodeAt(c);i.push(new Uint8Array(s))}return new Blob(i,{type:n})}catch(e){throw new Ke.default("fileuploader-decoding-image-data-error",null)}}(t):t,this._token=n,this._apiAddress=r}return _createClass(e,[{key:"onProgress",value:function(e){return this.on("progress",(function(t,n){return e(n)})),this}},{key:"onError",value:function(e){return this.once("error",(function(t,n){return e(n)})),this}},{key:"abort",value:function(){this.xhr.abort()}},{key:"send",value:function(){return this._prepareRequest(),this._attachXHRListeners(),this._sendRequest()}},{key:"_prepareRequest",value:function(){var e=new XMLHttpRequest;e.open("POST",this._apiAddress),e.setRequestHeader("Authorization",this._token.value),e.responseType="json",this.xhr=e}},{key:"_attachXHRListeners",value:function(){var e=this,t=this,n=this.xhr;function r(e){return function(){return t.fire("error",e)}}n.addEventListener("error",r("Network Error")),n.addEventListener("abort",r("Abort")),n.upload&&n.upload.addEventListener("progress",(function(t){t.lengthComputable&&e.fire("progress",{total:t.total,uploaded:t.loaded})})),n.addEventListener("load",(function(){var t=n.status,r=n.response;if(t<200||t>299)return e.fire("error",r.message||r.error)}))}},{key:"_sendRequest",value:function(){var e=this,t=new FormData,n=this.xhr;return t.append("file",this.file),new Promise((function(r,i){n.addEventListener("load",(function(){var t=n.status,o=n.response;return t<200||t>299?i(o.message?new Ke.default("fileuploader-uploading-data-failed",e,{message:o.message}):o.error):r(o)})),n.addEventListener("error",(function(){return i(new Error("Network Error"))})),n.addEventListener("abort",(function(){return i(new Error("Abort"))})),n.send(t)}))}}]),e}();Object(u.default)(Wy,Qe.default);var qy=function(){function e(t,n){if(_classCallCheck(this,e),!t)throw new Ke.default("uploadgateway-missing-token",null);if(!n)throw new Ke.default("uploadgateway-missing-api-address",null);this._token=t,this._apiAddress=n}return _createClass(e,[{key:"upload",value:function(e){return new Wy(e,this._token,this._apiAddress)}}]),e}(),Yy=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"createToken",value:function(e,t){return new Hy(e,t)}},{key:"createUploadGateway",value:function(e,t){return new qy(e,t)}}],[{key:"pluginName",get:function(){return"CloudServicesCore"}}]),n}(it),Gy=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"init",value:function(){var e=this.context.config.get("cloudServices")||{};for(var t in e)this[t]=e[t];if(this._tokens=new Map,this.tokenUrl)return this.token=this.context.plugins.get("CloudServicesCore").createToken(this.tokenUrl),this._tokens.set(this.tokenUrl,this.token),this.token.init();this.token=null}},{key:"registerTokenUrl",value:function(e){if(this._tokens.has(e))return Promise.resolve(this.getTokenFor(e));var t=this.context.plugins.get("CloudServicesCore").createToken(e);return this._tokens.set(e,t),t.init()}},{key:"getTokenFor",value:function(e){var t=this._tokens.get(e);if(!t)throw new Ke.default("cloudservices-token-not-registered",this);return t}},{key:"destroy",value:function(){_get3(_getPrototypeOf(n.prototype),"destroy",this).call(this);var e,t=_createForOfIteratorHelper(this._tokens.values());try{for(t.s();!(e=t.n()).done;){e.value.destroy()}}catch(r){t.e(r)}finally{t.f()}}}],[{key:"pluginName",get:function(){return"CloudServices"}},{key:"requires",get:function(){return[Yy]}}]),n}(it),Jy=["set","init","plugins","isInReconnectionStack","cloudservices-reconnection-error","context","destroy","initialReconnectionInterval","get","removeFromReconnectionStack","_isReconnectPlugins","connected","error","stopListening","websocketgateway-invalid-plugin-interface","_reconnectionStack","reconnect","Connected users limit exceeded","change:me","from","_isBrowserOffline","disconnect","token","websocketgateway-plugin-already-registered","_reconnect","code","WebSocketGateway","addToReconnectionStack","connection","cloudservices-init","disconnected","offline","bind","connecting","create","delete","then","catch","all","requires","pluginName","has","_domEmitter","listenTo","webSocketUrl","function","state"];!function(e,t){!function(t){for(;--t;)e.push(e.shift())}(++t)}(Jy,445);var $y=function(e,t){return Jy[e-=0]},Ky=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:$y("0x1a"),value:function(){var e=this,t=this[$y("0x1e")],r=t.plugins[$y("0x21")](Gy),i=t[$y("0x1b")][$y("0x21")](xl);if(!r[$y("0x0")])throw new Ke.default("websocketgateway-missing-token",this);if(!r[$y("0x16")])throw new Ke.default("websocketgateway-missing-websocket-url",this);return this[$y("0x19")]($y("0x18"),$y("0xb")),this[$y("0x19")]($y("0x2d"),!1),this._reconnectionStack=new Set,this[$y("0x23")]=!1,this._domEmitter=Object[$y("0xc")](Or),this[$y("0x14")][$y("0x15")](window,$y("0x9"),(function(){return e[$y("0x2d")]=!0})),this[$y("0x14")].listenTo(window,"online",(function(){return e._isBrowserOffline=!1})),n[$y("0x4")].connect(r[$y("0x0")],r.webSocketUrl,{disconnectOnUnload:!1})[$y("0xe")]((function(t){if(e[$y("0x6")]=t,e[$y("0xa")]("state").to(t,$y("0x18"),e,$y("0x2d"),(function(t,n){return $y("0x24")!==t&&(e[$y("0x23")]=!0),n||"connected"!==t?$y("0x8"):$y("0x8")==e[$y("0x18")]&&e[$y("0x23")]?(e[$y("0x23")]=!1,e[$y("0x2")](),$y("0xb")):$y("0x24")})),e[$y("0x6")].on($y("0x25"),(function(e,t){if("limitExceeded"!==t[$y("0x3")])throw console[$y("0x25")](t),new Ke.default($y("0x7"),null,{originalError:t});i.showWarning("The limit of maximum concurrent connections that the collaboration server can handle has been reached. Try opening the document again in a few minutes. Please contact your system administrator if the problem persists.",{title:$y("0x2a"),namespace:"real-time-collaboration"})})),!t.me)return new Promise((function(e){return t.on($y("0x2b"),e)}))}))[$y("0xf")]((function(e){throw console.error(e),new Ke.default($y("0x7"),null,{originalError:e})}))}},{key:$y("0x5"),value:function(e){if($y("0x17")!=typeof e[$y("0x29")])throw new Ke.default($y("0x27"),this);if(this[$y("0x1c")](e))throw new Ke.default($y("0x1"),this);this._reconnectionStack.add(e)}},{key:$y("0x22"),value:function(e){this._reconnectionStack[$y("0xd")](e)}},{key:$y("0x1c"),value:function(e){return this[$y("0x28")][$y("0x13")](e)}},{key:$y("0x2"),value:function(){var e=this;return this[$y("0x6")][$y("0x29")]()[$y("0xe")]((function(){return Promise[$y("0x10")](Array[$y("0x2c")](e[$y("0x28")],(function(e){return e[$y("0x29")]()})))})).then((function(){return e[$y("0x18")]=$y("0x24")})).catch((function(t){throw console.error(t),new Ke.default($y("0x1d"),e[$y("0x1e")])}))}},{key:"destroy",value:function(){this[$y("0x6")]&&this[$y("0x6")][$y("0x2e")](),this[$y("0x18")]=$y("0x8"),this._domEmitter[$y("0x26")](),_get3(_getPrototypeOf(n.prototype),$y("0x1f"),this).call(this)}}],[{key:$y("0x11"),get:function(){return[Gy,xl]}},{key:$y("0x12"),get:function(){return $y("0x4")}}]),n}(it);Ky[$y("0x4")]=Vy.a,Ky[$y("0x20")]=1e3,n(350);var Qy=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),r=t.call(this,e),e.config.define("users.anonymousUserId","anonymous-user"),e.config.define("users.colorsCount",8),r.users=new $e.default,r._locale=e.locale,r._licenseKeyCheckInterval=null,r._lastColor=0,r._myId=null,r.decorate("getOperationAuthor"),r}return _createClass(n,[{key:"init",value:function(){var e=this,t=this.context;this.licenseKey=t.config.get("licenseKey"),this._licenseKeyCheckInterval=setInterval((function(){var n;for(var r in t){var i=t[r];if("licenseKeyTrial"===i||"licenseKeyInvalid"===i||"licenseKeyValid"===i||"licenseKeyTrialLimit"==i){delete t[r],n=i;break}}if("licenseKeyInvalid"===n)throw clearInterval(e._licenseKeyCheckInterval),new Ke.default("invalid-license-key",null);if("licenseKeyTrial"===n&&console.info("You are using the trial version of CKEditor 5 collaboration plugin with limited usage. Make sure you will not use it in the production environment."),"licenseKeyTrialLimit"===n)throw clearInterval(e._licenseKeyCheckInterval),new Ke.default("trial-license-key-reached-limit",null);"licenseKeyValid"===n&&clearInterval(e._licenseKeyCheckInterval)}),1e3)}},{key:"me",get:function(){return null==this._myId?null:this.getUser(this._myId)}},{key:"addUser",value:function(e){if(!(e=Object.assign({},e,{color:this._getNextColor()})).id||"string"!=typeof e.id)throw new Ke.default("users-add-invalid-id");if(this.users.has(e.id))throw new Ke.default("users-add-duplicated-id",null,{id:e.id});e.name=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=e.t;return""==(t=t.trim())?n("Anonymous"):t}(this._locale,e.name);var t=new Zy(e);return this.users.add(t),t}},{key:"getUser",value:function(e){return this.users.get(e)}},{key:"useAnonymousUser",value:function(){var e=this.context.config.get("users.anonymousUserId"),t=this._locale.t;this.users.has(e)||(this.addUser({id:e,name:t("Anonymous")})._isAnonymous=!0,this.defineMe(e))}},{key:"defineMe",value:function(e){if(this._myId)throw new Ke.default("users-me-already-defined",null);if(!this.getUser(e))throw new Ke.default("users-me-missing-user",null);this._myId=e}},{key:"getOperationAuthor",value:function(){return this.me}},{key:"destroy",value:function(){_get3(_getPrototypeOf(n.prototype),"destroy",this).call(this),clearInterval(this._licenseKeyCheckInterval)}},{key:"_getNextColor",value:function(){var e=this.context.config.get("users.colorsCount");return this._lastColor>=e&&(this._lastColor=0),new Xy(this._lastColor++)}}],[{key:"pluginName",get:function(){return"Users"}}]),n}(it),Zy=function(){function e(t){_classCallCheck(this,e),this.id=t.id,this.color=t.color,this.name=t.name,this.avatar=t.avatar,this._isAnonymous=!1}return _createClass(e,[{key:"isAnonymous",get:function(){return this._isAnonymous}},{key:"initials",get:function(){return this.name.split(" ").map((function(e){return e.charAt(0)})).slice(0,2).join("").toUpperCase()}}]),e}(),Xy=function(){function e(t){_classCallCheck(this,e),this._id=t}return _createClass(e,[{key:"getBackgroundColorClass",value:function(){return"ck-user__bg-color--"+this._id}},{key:"getSelectionClass",value:function(){return"ck-user__selection--"+this._id}},{key:"getMarkerClass",value:function(){return"ck-user__marker--"+this._id}}]),e}(),ek=["_handleSessionRemove","remove","_users","channelConnectedUsers","register","plugins","context","role","unregister","_handleSessionAdd","connected","getUserRole","mySessionId","stopListening","add","user","defineMe","getUserBySessionId","getUserSessions","clear","get","sessions-unregister-not-exist","assign","values","addUser","state","_createUser","_registeredSessions","forEach","getUser","init","channelSessions","allConnectedUsers","Sessions","delete","has","size","sessionId","_uniqueUsersCount","listenTo"];!function(e,t){!function(t){for(;--t;)e.push(e.shift())}(++t)}(ek,443);var tk=function(e,t){return ek[e-=0]},nk=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:tk("0x1b"),value:function(){var e=this,t=this[tk("0x3")],n=t[tk("0x2")][tk("0x11")](Ky);this.channelSessions=new Map,this[tk("0x0")]=new Map,this.allConnectedUsers=new $e.default,this[tk("0x18")]=new Map,this[tk("0x23")]=0,this[tk("0x27")]=t[tk("0x2")][tk("0x11")](Qy),this[tk("0x24")](n,"change:state",(function(t,n,r){if(tk("0x7")!==r)e[tk("0x1c")][tk("0x19")]((function(e){return e[tk("0x10")]()})),e.channelConnectedUsers[tk("0x19")]((function(e){return e[tk("0x10")]()})),e[tk("0x1d")][tk("0x10")]();else{var i,o=_createForOfIteratorHelper(e[tk("0x18")]);try{for(o.s();!(i=o.n()).done;){var a,s=_slicedToArray(i.value,2),c=s[0],l=_createForOfIteratorHelper(s[1]);try{for(l.s();!(a=l.n()).done;){var u=a.value;e[tk("0x6")](c,u)}}catch(d){l.e(d)}finally{l.f()}}}catch(d){o.e(d)}finally{o.f()}}})),this[tk("0x17")](n.connection.me,!0)}},{key:tk("0x1"),value:function(e,t){var n=this;if(this._registeredSessions[tk("0x20")](e))throw new Ke.default("sessions-register-already-registered",null,{channelId:e});this._registeredSessions.set(e,t),this[tk("0x1c")].set(e,new $e.default),this.channelConnectedUsers.set(e,new $e.default),this[tk("0x24")](t,tk("0xb"),(function(t,r){return n[tk("0x6")](e,r)})),this[tk("0x24")](t,tk("0x26"),(function(t,r){return n[tk("0x25")](e,r)}));var r,i=_createForOfIteratorHelper(t);try{for(i.s();!(r=i.n()).done;){var o=r.value;this[tk("0x6")](e,o)}}catch(a){i.e(a)}finally{i.f()}}},{key:tk("0x5"),value:function(e){if(!this[tk("0x18")].has(e))throw new Ke.default(tk("0x12"),null,{channelId:e});var t=this[tk("0x18")][tk("0x11")](e);this[tk("0xa")](t);var n,r=_createForOfIteratorHelper(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;tk("0x7")===this[tk("0x3")][tk("0x2")].get(Ky)[tk("0x16")]&&this._handleSessionRemove(e,i)}}catch(o){r.e(o)}finally{r.f()}this[tk("0x18")].delete(e),this[tk("0x1c")].delete(e),this.channelConnectedUsers[tk("0x1f")](e)}},{key:tk("0x9"),get:function(){return this.context.plugins[tk("0x11")](Ky).connection[tk("0x22")]}},{key:tk("0xe"),value:function(e){var t,n=_createForOfIteratorHelper(this[tk("0x1c")][tk("0x14")]());try{for(n.s();!(t=n.n()).done;){var r,i=_createForOfIteratorHelper(t.value);try{for(i.s();!(r=i.n()).done;){var o=r.value;if(o.id===e)return o[tk("0xc")]}}catch(a){i.e(a)}finally{i.f()}}}catch(a){n.e(a)}finally{n.f()}}},{key:tk("0xf"),value:function(e,t){var n,r=t?[this[tk("0x1c")][tk("0x11")](t)]:this[tk("0x1c")][tk("0x14")](),i=new Set,o=_createForOfIteratorHelper(r);try{for(o.s();!(n=o.n()).done;){var a,s=_createForOfIteratorHelper(n.value);try{for(s.s();!(a=s.n()).done;){var c=a.value;c[tk("0xc")].id===e.id&&i.add(c.id)}}catch(l){s.e(l)}finally{s.f()}}}catch(l){o.e(l)}finally{o.f()}return i}},{key:tk("0x8"),value:function(e){var t,n=_createForOfIteratorHelper(this[tk("0x1c")][tk("0x14")]());try{for(n.s();!(t=n.n()).done;){var r,i=_createForOfIteratorHelper(t.value);try{for(i.s();!(r=i.n()).done;){var o=r.value;if(o[tk("0xc")]===e)return o[tk("0x4")]}}catch(a){i.e(a)}finally{i.f()}}}catch(a){n.e(a)}finally{n.f()}}},{key:tk("0x6"),value:function(e,t){if(tk("0x7")===this.context[tk("0x2")].get(Ky)[tk("0x16")]){var n=t[tk("0xc")],r=this[tk("0x27")][tk("0x1a")](n.id)||this[tk("0x17")](n),i=Object[tk("0x13")]({},t,{user:r});this[tk("0x1c")][tk("0x11")](e)[tk("0xb")](i);var o=this[tk("0x0")].get(e);o[tk("0x20")](r.id)||o[tk("0xb")](r),this[tk("0x1d")][tk("0x20")](r.id)||this.allConnectedUsers[tk("0xb")](r),this.fire("sessionAdd:"+e,{channelId:e,session:i})}}},{key:tk("0x25"),value:function(e,t){if(tk("0x7")===this[tk("0x3")][tk("0x2")][tk("0x11")](Ky).state){var n=this[tk("0x0")].get(e),r=t[tk("0xc")];this[tk("0x1c")][tk("0x11")](e)[tk("0x26")](t.id),n[tk("0x20")](r.id)&&!this.getUserSessions(r,e)[tk("0x21")]&&n[tk("0x26")](r.id),this[tk("0x1d")][tk("0x11")](r.id)&&!this[tk("0xf")](r)[tk("0x21")]&&this.allConnectedUsers[tk("0x26")](r.id)}}},{key:"_createUser",value:function(e,t){var n=this[tk("0x27")][tk("0x15")](e);return t&&this[tk("0x27")][tk("0xd")](e.id),n.orderNumber=this[tk("0x23")]++,n}}],[{key:"pluginName",get:function(){return tk("0x1e")}},{key:"requires",get:function(){return[Ky,Qy]}}]),n}(it);n(352);var rk=["change","editingDowncast","tableCell","root","span","hasDomSelection","priority","markerToElement","selection","isSimilar","render","userPositionMarker","getMarkerClass","data-session-id","clear","change:range","toDomElement","applyOperation","getNearestSelectionRange","markers","init","editor","batch","highest","getPositions","user:position","getSelectionClass","get","mySessionId","getAttribute","detach","user:range:","createRange","end","markerName","getUserBySessionId","color","setCustomProperty","type","marker","startsWith","contenteditable","has",'&#8203;<span class="ck-user__marker-line"><span class="ck-user__marker-dot"></span></span>',"addMarker","innerHTML","updateMarker","for","orderNumber","$text","fromRange","newRange","toRange","getCustomProperty","delete","checkChild","getRange","undo","name","removeMarker","deletionPosition","markerRange","view","isLimit","transparent","createUserMarkerOperations","parent","enqueueChange","getContainedElement","start","$graveyard","rootName","_createdBatches","getStart","commands","user:","UserMarkers","oldRange","split","model","plugins","user:position:","getFirstRange","schema","document","hasContent","update:user:range","set"];!function(e,t){!function(t){for(;--t;)e.push(e.shift())}(++t)}(rk,132);var ik=function(e,t){return rk[e-=0]},ok=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:ik("0x40"),value:function(){var e=this[ik("0x41")],t=e[ik("0x24")].get(nk);e.conversion[ik("0x3")]("editingDowncast")[ik("0x33")]({model:ik("0x45"),view:function(n,r){return function(e,t,n,r){var i=e.markerName[ik("0x22")](":")[2],o=n[ik("0x4f")](i);if(o&&i!==n[ik("0x48")]&&r[ik("0x23")][ik("0x27")].checkChild(e[ik("0x11")][ik("0x19")],ik("0x5"))){var a={class:"ck-user__marker "+o[ik("0x50")][ik("0x38")](),"data-name":o[ik("0xe")],"data-session-id":i},s=r[ik("0x23")][ik("0x3f")][ik("0x47")](e[ik("0x4e")])[ik("0x1d")]()[ik("0x16")];r[ik("0x23")][ik("0x27")][ik("0x13")](s)&&!r[ik("0x23")][ik("0x29")](s)&&(a[ik("0x55")]=!1);var c=function(e,t){var n=e.createUIElement(ik("0x30"),t);return e[ik("0x51")]("userPositionMarker",!0,n),n[ik("0x36")]=function(e){var t=this[ik("0x3c")](e);return t[ik("0x1")]=ik("0x57"),t},n[ik("0x35")]=function(e){return this.getCustomProperty(ik("0x37"))&&e[ik("0x9")]("userPositionMarker")&&this[ik("0x49")](ik("0x39"))==e[ik("0x49")](ik("0x39"))},n}(t,a);return c[ik("0x32")]=1e3+o[ik("0x4")],c}}(n,r.writer,t,e)}}),e.conversion[ik("0x3")](ik("0x2d")).markerToHighlight({model:"user:range",view:function(e){return function(t,n){var r=e.markerName[ik("0x22")](":")[2];if(r!==n[ik("0x48")]){var i=n[ik("0x4f")](r);return i?{id:r,classes:["ck-user__selection",i.color[ik("0x46")]()],attributes:{"data-session-id":r},priority:2e3+i[ik("0x4")]}:{id:r}}}(0,t)}}),function(e){var t=e[ik("0x23")],n=new Map,r=e[ik("0x24")][ik("0x47")](nk);t[ik("0x3f")].on(ik("0x2a"),(function(e,i,o,a){if(!a&&n[ik("0x47")](i.name))return n[ik("0x47")](i[ik("0xe")]).detach(),void n.delete(i[ik("0xe")]);i[ik("0xe")][ik("0x22")](":")[2]!==r.mySessionId&&i.on("change:range",(function(e,r,o){if("$graveyard"!=r[ik("0x2f")].rootName&&ik("0x1a")==i[ik("0xc")]()[ik("0x2f")].rootName&&!n.has(i.name)){var a=t[ik("0x27")][ik("0x3e")](o[ik("0x10")]);if(a){var s=po[ik("0x6")](a);n[ik("0x2b")](i.name,s),s.on(ik("0x3b"),(function(e,r,o){if(ik("0x1a")==s[ik("0x2f")].rootName){var a=t[ik("0x27")][ik("0x3e")](o[ik("0x10")]);a?(s[ik("0x19")]=a[ik("0x19")],s[ik("0x4d")]=a.end):(n[ik("0xa")](i[ik("0xe")]),s[ik("0x4a")]())}}))}}}))})),t.document.on(ik("0x2c"),(function(){n.size>0&&t[ik("0x17")](ik("0x14"),(function(e){var r,i=_createForOfIteratorHelper(n);try{for(i.s();!(r=i.n()).done;){var o=_slicedToArray(r.value,2),a=o[0],s=o[1];ik("0x1a")==t.markers[ik("0x47")](a)[ik("0xc")]().root[ik("0x1b")]&&(ak(a.split(":")[2],s[ik("0x8")](),t,e),s.detach())}}catch(c){i.e(c)}finally{i.f()}n[ik("0x3a")]()}))}))}(e)}},{key:"afterInit",value:function(){var e=this[ik("0x41")],t=e[ik("0x1e")][ik("0x47")](ik("0xd"));t&&e[ik("0x23")].on(ik("0x3d"),(function(n,r){var i=r[0];if(ik("0x53")==i[ik("0x52")]&&i[ik("0xe")][ik("0x54")](ik("0x1f"))){var o=i[ik("0x42")];t[ik("0x1c")][ik("0x56")](o)&&(i[ik("0x7")]=i[ik("0x21")]?e.model[ik("0x4c")](i[ik("0x21")][ik("0x19")],i[ik("0x21")].end):null)}}),{priority:ik("0x43")})}},{key:ik("0x15"),value:function(){var e=this[ik("0x41")],t=e.model[ik("0x28")],n=e[ik("0x24")][ik("0x47")](nk);e[ik("0x23")][ik("0x17")](ik("0x14"),(function(r){var i=ik("0x4b")+n[ik("0x48")],o=ik("0x25")+n.mySessionId,a=e.model[ik("0x3f")][ik("0x56")](i);e.editing[ik("0x12")][ik("0x31")]?ak(n[ik("0x48")],t[ik("0x34")][ik("0x26")](),e[ik("0x23")],r):a&&(r.removeMarker(i),r[ik("0xf")](o))}))}}],[{key:"requires",get:function(){return[nk]}},{key:"pluginName",get:function(){return ik("0x20")}}]),n}(d);function ak(e,t,n,r){var i=ik("0x4b")+e,o="user:position:"+e,a=t[ik("0x18")](),s=t[ik("0x19")];a&&a.is("element",ik("0x2e"))&&(s=function(e,t){var n,r=_createForOfIteratorHelper(e[ik("0x44")]());try{for(r.s();!(n=r.n()).done;){var i=n.value;if(t.schema[ik("0xb")](i,ik("0x5")))return i}}catch(o){r.e(o)}finally{r.f()}}(t,n),t=r[ik("0x4c")](s)),s=r.createRange(s),n[ik("0x3f")].has(i)?(r[ik("0x2")](i,{range:t}),r.updateMarker(o,{range:s})):(r[ik("0x0")](i,{range:t,usingOperation:!0}),r[ik("0x0")](o,{range:s,usingOperation:!0}))}var sk=n(81),ck=n.n(sk),lk=["verify","finish","build","decompress","compress","decode","toObject","_description","getDescriptor","Root","_protobufRoot","fromJSON","encode","registerDescriptor","_protobuf","protobuffactory-cannot-get-descriptor-before-build","nested","create","lookupType"];!function(e,t){!function(t){for(;--t;)e.push(e.shift())}(++t)}(lk,225);var uk=function(e,t){return lk[e-=0]},dk=function(){function e(){_classCallCheck(this,e),this[uk("0xa")]={nested:{}}}return _createClass(e,[{key:uk("0x10"),value:function(e,t){this[uk("0xa")][uk("0x0")][e]=_o(t)}},{key:uk("0x5"),value:function(){this._protobufRoot=ck.a[uk("0xc")][uk("0xe")](this[uk("0xa")])}},{key:uk("0xb"),value:function(e){if(!this._protobufRoot)throw new Ke.default(uk("0x12"),this);return new fk(this[uk("0xd")][uk("0x2")](e))}}]),e}(),fk=function(){function e(t){_classCallCheck(this,e),this._protobuf=t}return _createClass(e,[{key:uk("0x7"),value:function(e){var t=this[uk("0x11")][uk("0x3")](e);if(t)throw Error(t);return this._protobuf[uk("0xf")](this[uk("0x11")][uk("0x1")](e))[uk("0x4")]()}},{key:uk("0x6"),value:function(e){return this[uk("0x11")][uk("0x9")](this._protobuf[uk("0x8")](e),{oneofs:!0})}}]),e}(),hk=["Element","string","bool","Position","repeated","uint32"];!function(e,t){!function(t){for(;--t;)e.push(e.shift())}(++t)}(hk,283);var pk=function(e,t){return hk[e-=0]},vk={Position:{fields:{root:{type:pk("0x0"),id:1},rootMain:{type:pk("0x1"),id:2},rootGraveyard:{type:pk("0x1"),id:3},path:{rule:pk("0x3"),type:pk("0x4"),id:4},stickiness:{type:pk("0x0"),id:5}}},Range:{fields:{start:{type:pk("0x2"),id:1},end:{type:pk("0x2"),id:2}}},Element:{fields:{name:{type:"string",id:1},children:{rule:"repeated",type:pk("0x5"),id:2},data:{type:pk("0x0"),id:3},attributesBoolean:{keyType:pk("0x0"),type:pk("0x1"),id:4},attributesJson:{type:pk("0x0"),id:5}}}},gk=["nodes","length","rootMain","main","path","root","rootGraveyard","$graveyard"];!function(e,t){!function(t){for(;--t;)e.push(e.shift())}(++t)}(gk,335);var mk=function(e,t){return gk[e-=0]};function yk(e,t){var n=_o(e);return n[mk("0x5")][n[mk("0x5")][mk("0x2")]-1]+=t,n}function kk(e,t){return e[mk("0x6")]===t[mk("0x6")]&&ya(e[mk("0x5")],t[mk("0x5")])}function _k(e){wk(e,(function(e){return mk("0x4")==e[mk("0x6")]?(e[mk("0x3")]=!0,delete e[mk("0x6")]):mk("0x0")==e.root&&(e[mk("0x7")]=!0,delete e[mk("0x6")]),e}))}function bk(e){wk(e,(function(e){return e[mk("0x3")]?(e[mk("0x6")]=mk("0x4"),delete e[mk("0x3")]):e[mk("0x7")]&&(e[mk("0x6")]=mk("0x0"),delete e[mk("0x7")]),e}))}function wk(e,t){for(var n in e){var r=e[n];mk("0x1")!==n&&Object(Ee.a)(r)&&(r.path&&(r[mk("0x6")]||r.rootMain||r[mk("0x7")])?e[n]=t(r):wk(r,t))}return e}var xk=["compress","_protobufDescriptor","shift","push","operationName","types","buffers"];!function(e,t){!function(t){for(;--t;)e.push(e.shift())}(++t)}(xk,311);var Ck=function(e,t){return xk[e-=0]},Tk=function(){function e(t,n,r){_classCallCheck(this,e),this.id=t,this[Ck("0x1")]=n,this[Ck("0x5")]=r}return _createClass(e,[{key:Ck("0x4"),value:function(e,t){var n=t.shift();_k(n),e[Ck("0x3")][Ck("0x0")](this._protobufDescriptor.compress(n)),e.types[Ck("0x0")](this.id)}},{key:"decompress",value:function(e,t){t[Ck("0x2")][Ck("0x6")]();var n=this[Ck("0x5")].decompress(t[Ck("0x3")][Ck("0x6")]());bk(n),n.__className=this.operationName,e[Ck("0x0")](n)}}]),e}(),Ak=["string","Json","Boolean","bool","oldValue","shift","__className","stringify","description","newValue","operationName","compress","parse"];!function(e,t){!function(t){for(;--t;)e.push(e.shift())}(++t)}(Ak,451);var Sk=function(e,t){return Ak[e-=0]},Ek=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"compress",value:function(e,t){var n=t[Sk("0x9")]();Ik(Sk("0x8"),n),Ik(Sk("0x0"),n),_k(n),e.buffers.push(this._protobufDescriptor[Sk("0x2")](n)),e.types.push(this.id)}},{key:"decompress",value:function(e,t){var n=t.types,r=t.buffers,i=this._protobufDescriptor.decompress(r[Sk("0x9")]());n[Sk("0x9")](),Ok(Sk("0x8"),i),Ok(Sk("0x0"),i),bk(i),i[Sk("0xa")]=this[Sk("0x1")],e.push(i)}}],[{key:Sk("0xc"),get:function(){return{fields:{range:{type:"Range",id:1},key:{type:Sk("0x4"),id:2},oldValueBoolean:{type:Sk("0x7"),id:3},oldValueJson:{type:"string",id:4},newValueBoolean:{type:"bool",id:5},newValueJson:{type:"string",id:6},wasUndone:{type:"bool",id:7}}}}}]),n}(Tk);function Ik(e,t){var n=t[e];"boolean"==typeof n?t[e+Sk("0x6")]=n:t[e+Sk("0x5")]=JSON[Sk("0xb")](n)}function Ok(e,t){var n=e+Sk("0x5");t[n]?(t[e]=JSON[Sk("0x3")](t[n]),delete t[n]):(t[e]=t[e+Sk("0x6")],delete t[e+"Boolean"])}var Rk=["Position","__className","every","shift","Element","buffers","attributesBoolean","_protobufDescriptor","attributes","children","parse","nodes","attributesJson","push","bool","stringify","compress","boolean","keys"];!function(e,t){!function(t){for(;--t;)e.push(e.shift())}(++t)}(Rk,325);var Pk=function(e,t){return Rk[e-=0]},Mk=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:Pk("0xe"),value:function(e,t){var n=t[Pk("0x1")]();(function e(t){var n,r=_createForOfIteratorHelper(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i[Pk("0x6")]){var o=i[Pk("0x6")];Nk(o)?i.attributesBoolean=o:i[Pk("0xa")]=JSON[Pk("0xd")](o)}i[Pk("0x7")]&&e(i[Pk("0x7")])}}catch(a){r.e(a)}finally{r.f()}})(n.nodes),_k(n),e[Pk("0x3")][Pk("0xb")](this[Pk("0x5")][Pk("0xe")](n)),e.types.push(this.id)}},{key:"decompress",value:function(e,t){var n=t.types,r=t.buffers,i=this[Pk("0x5")].decompress(r[Pk("0x1")]());n[Pk("0x1")](),i.nodes||(i[Pk("0x9")]=[]),function e(t){var n,r=_createForOfIteratorHelper(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;(i[Pk("0x4")]||i[Pk("0xa")])&&(i[Pk("0x4")]?(i[Pk("0x6")]=i[Pk("0x4")],delete i.attributesBoolean):(i[Pk("0x6")]=JSON[Pk("0x8")](i[Pk("0xa")]),delete i[Pk("0xa")])),i[Pk("0x7")]&&e(i[Pk("0x7")])}}catch(o){r.e(o)}finally{r.f()}}(i[Pk("0x9")]),bk(i),i[Pk("0x12")]=this.operationName,e[Pk("0xb")](i)}}],[{key:"description",get:function(){return{fields:{position:{type:Pk("0x11"),id:1},nodes:{rule:"repeated",type:Pk("0x2"),id:2},shouldReceiveAttributes:{type:Pk("0xc"),id:3},wasUndone:{type:Pk("0xc"),id:4}}}}}]),n}(Tk);function Nk(e){return Object[Pk("0x10")](e)[Pk("0x0")]((function(t){return Pk("0xf")==typeof e[t]}))}var Dk=["decompress","description","oldRange","string","newRange","bool","length","Range"];!function(e,t){!function(t){for(;--t;)e.push(e.shift())}(++t)}(Dk,118);var Fk=function(e,t){return Dk[e-=0]},jk=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:Fk("0x2"),value:function(e,t){_get3(_getPrototypeOf(n.prototype),Fk("0x2"),this).call(this,e,t);var r=e[e[Fk("0x0")]-1];r[Fk("0x4")]||(r[Fk("0x4")]=null),r.newRange||(r[Fk("0x6")]=null)}}],[{key:Fk("0x3"),get:function(){return{fields:{name:{type:Fk("0x5"),id:1},oldRange:{type:Fk("0x1"),id:2},newRange:{type:"Range",id:3},affectsData:{type:Fk("0x7"),id:4},wasUndone:{type:Fk("0x7"),id:5}}}}}]),n}(Tk),Lk=["description","Position","uint32"];!function(e,t){!function(t){for(;--t;)e.push(e.shift())}(++t)}(Lk,221);var Vk=function(e,t){return Lk[e-=0]},Bk=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,null,[{key:Vk("0x1"),get:function(){return{fields:{sourcePosition:{type:Vk("0x2"),id:1},targetPosition:{type:"Position",id:2},graveyardPosition:{type:Vk("0x2"),id:3},howMany:{type:Vk("0x0"),id:4},wasUndone:{type:"bool",id:5}}}}}]),n}(Tk),zk=["uint32","bool","Position","description"];!function(e,t){!function(t){for(;--t;)e.push(e.shift())}(++t)}(zk,141);var Hk=function(e,t){return zk[e-=0]},Uk=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,null,[{key:Hk("0x2"),get:function(){return{fields:{sourcePosition:{type:Hk("0x1"),id:1},howMany:{type:Hk("0x3"),id:2},targetPosition:{type:Hk("0x1"),id:3},wasUndone:{type:Hk("0x0"),id:4}}}}}]),n}(Tk),Wk=["bool","string"];!function(e,t){!function(t){for(;--t;)e.push(e.shift())}(++t)}(Wk,428);var qk=function(e,t){return Wk[e-=0]},Yk=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,null,[{key:"description",get:function(){return{fields:{position:{type:"Position",id:1},oldName:{type:qk("0x1"),id:2},newName:{type:"string",id:3},wasUndone:{type:qk("0x0"),id:4}}}}}]),n}(Tk),Gk=["description","string","root","fields"];!function(e,t){!function(t){for(;--t;)e.push(e.shift())}(++t)}(Gk,123);var Jk=function(e,t){return Gk[e-=0]},$k=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,null,[{key:Jk("0x1"),get:function(){var e=Ek[Jk("0x1")];return delete e[Jk("0x0")].range,e[Jk("0x0")][Jk("0x3")]={type:Jk("0x2"),id:1},e}}]),n}(Ek),Kk=["uint32","description","bool","Position"];!function(e,t){!function(t){for(;--t;)e.push(e.shift())}(++t)}(Kk,434);var Qk=function(e,t){return Kk[e-=0]},Zk=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,null,[{key:Qk("0x3"),get:function(){return{fields:{splitPosition:{type:Qk("0x1"),id:1},graveyardPosition:{type:"Position",id:2},howMany:{type:Qk("0x2"),id:3},insertionPosition:{type:Qk("0x1"),id:4},wasUndone:{type:Qk("0x0"),id:5}}}}}]),n}(Tk),Xk=["shift","decompress","operationName","types","push"];!function(e,t){!function(t){for(;--t;)e.push(e.shift())}(++t)}(Xk,232);var e_=function(e,t){return Xk[e-=0]},t_=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"compress",value:function(e,t){t[e_("0x3")](),e[e_("0x1")][e_("0x2")](this.id)}},{key:e_("0x4"),value:function(e,t){t.types.shift(),e[e_("0x2")]({__className:this[e_("0x0")]})}}]),n}(Tk),n_=["_omittedNamespace","length","name","startsWith","MarkerOperation","__className","compress","decompress"];!function(e,t){!function(t){for(;--t;)e.push(e.shift())}(++t)}(n_,290);var r_=function(e,t){return n_[e-=0]},i_=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i,o){var a;return _classCallCheck(this,n),(a=t.call(this,e,r,i))[r_("0x6")]=o+":",a}return _createClass(n,[{key:r_("0x4"),value:function(e,t){return!(r_("0x2")!=t[0][r_("0x3")]||!t[0][r_("0x0")][r_("0x1")](this[r_("0x6")])||(t[0].name=t[0][r_("0x0")].replace(new RegExp("^"+this[r_("0x6")]),""),_get3(_getPrototypeOf(n.prototype),r_("0x4"),this).call(this,e,t),0))}},{key:r_("0x5"),value:function(e,t){_get3(_getPrototypeOf(n.prototype),r_("0x5"),this).call(this,e,t);var r=e[e[r_("0x7")]-1];r.name=this[r_("0x6")]+r.name}}]),n}(jk),o_=["_splitCurrent","shift","compress","push","_compressSingleOperation","types","_combineNext","decompress","_decompressSingleOperation","_compareOperations","buffers","length"];!function(e,t){!function(t){for(;--t;)e.push(e.shift())}(++t)}(o_,299);var a_=function(e,t){return o_[e-=0]},s_=function(){function e(t,n){_classCallCheck(this,e),this.id=t,this._context=n}return _createClass(e,[{key:a_("0x3"),value:function(e,t){for(var n;t[a_("0x0")]>1&&this[a_("0xa")](t[0],t[1]);)n?(n=this._combineNext(t[a_("0x2")](),n),e[a_("0x6")].push(0)):(n=_o(t.shift()),e[a_("0x6")][a_("0x4")](this.id));return!!n&&(n=this[a_("0x7")](t[a_("0x2")](),n),e[a_("0x6")][a_("0x4")](0),e[a_("0xb")][a_("0x4")](this[a_("0x5")](n)),!0)}},{key:a_("0x8"),value:function(e,t){for(var n=this[a_("0x9")](t);0==t[a_("0x6")][0];)t[a_("0x6")][a_("0x2")](),e.push(this[a_("0x1")](n));e.push(n)}}]),e}(),c_=["_compressSingleOperation","_combineNext","position","nodes","data","substr","wasUndone","length","from","__className","_getCompressorByName","_context","keys","attributes","InsertOperation","compress","decompress"];!function(e,t){!function(t){for(;--t;)e.push(e.shift())}(++t)}(c_,467);var l_=function(e,t){return c_[e-=0]},u_=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:l_("0xa"),value:function(e,t){return t[l_("0xc")][0][l_("0xd")]+=e.nodes[0].data,t}},{key:"_splitCurrent",value:function(e){var t=_o(e),n=t.nodes[0],r=e[l_("0xc")][0],i=Array[l_("0x0")](r[l_("0xd")])[0],o=i[l_("0x10")];return n[l_("0xd")]=i,r[l_("0xd")]=r[l_("0xd")][l_("0xe")](o),e[l_("0xb")]=yk(e[l_("0xb")],o),t}},{key:"_compareOperations",value:function(e,t){if(d_(e)&&d_(t)){var n=e.nodes[0][l_("0xd")][l_("0x10")],r=kk(yk(e[l_("0xb")],n),t.position),i=e[l_("0xc")][0],o=t[l_("0xc")][0];return r&&function(e,t){var n=Object[l_("0x4")](e[l_("0x5")]||{}),r=Object[l_("0x4")](t.attributes||{});return n[l_("0x10")]===r[l_("0x10")]&&n.every((function(n){return t[l_("0x5")][n]&&t[l_("0x5")][n]===e[l_("0x5")][n]}))}(i,o)}return!1}},{key:l_("0x9"),value:function(e){var t={types:[],buffers:[],baseVersion:0};return this[l_("0x3")][l_("0x2")]("InsertOperation")[l_("0x7")](t,[e]),t.buffers[0]}},{key:"_decompressSingleOperation",value:function(e){var t=[];return this[l_("0x3")]._getCompressorByName(l_("0x6"))[l_("0x8")](t,e),t[0]}}]),n}(s_);function d_(e){return"InsertOperation"==e[l_("0x1")]&&1==e[l_("0xc")][l_("0x10")]&&e[l_("0xc")][0][l_("0xd")]&&!e[l_("0xf")]&&1==Array[l_("0x0")](e[l_("0xc")][0][l_("0xd")])[l_("0x10")]}var f_=["$graveyard","root","_compressSingleOperation","wasUndone","_getCompressorByName","howMany","compress","sourcePosition","MoveOperation","targetPosition","_context","__className","_splitCurrent"];!function(e,t){!function(t){for(;--t;)e.push(e.shift())}(++t)}(f_,482);var h_=function(e,t){return f_[e-=0]},p_=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"_combineNext",value:function(e,t){return t.howMany++,t.sourcePosition=_o(e[h_("0x6")]),t}},{key:h_("0xb"),value:function(e){var t=_o(e);return e.howMany--,t[h_("0x4")]=1,t[h_("0x6")]=yk(t[h_("0x6")],e[h_("0x4")]),t}},{key:"_compareOperations",value:function(e,t){return!(!v_(e)||!v_(t))&&kk(yk(e[h_("0x6")],-1),t[h_("0x6")])&&kk(e[h_("0x8")],t[h_("0x8")])}},{key:h_("0x1"),value:function(e){var t={types:[],buffers:[],baseVersion:0};return this[h_("0x9")]._getCompressorByName("MoveOperation")[h_("0x5")](t,[e]),t.buffers[0]}},{key:"_decompressSingleOperation",value:function(e){var t=[];return this[h_("0x9")][h_("0x3")](h_("0x7")).decompress(t,e),t[0]}}]),n}(s_);function v_(e){return h_("0x7")==e[h_("0xa")]&&h_("0xc")==e[h_("0x8")][h_("0x0")]&&1==e[h_("0x4")]&&!e[h_("0x2")]}var g_=["wasUndone","MoveOperation","_combineNext","root","$graveyard","__className","_getCompressorByName","_compareOperations","_decompressSingleOperation","targetPosition","compress","_compressSingleOperation","howMany","_splitCurrent","sourcePosition","_context","decompress"];!function(e,t){!function(t){for(;--t;)e.push(e.shift())}(++t)}(g_,141);var m_=function(e,t){return g_[e-=0]},y_=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:m_("0xe"),value:function(e,t){return t.howMany++,t}},{key:m_("0x8"),value:function(e){var t=_o(e);return t[m_("0x7")]=1,e[m_("0x7")]--,t}},{key:m_("0x2"),value:function(e,t){return!(!k_(e)||!k_(t))&&kk(e[m_("0x9")],t[m_("0x9")])&&kk(e[m_("0x4")],t[m_("0x4")])}},{key:m_("0x6"),value:function(e){var t={types:[],buffers:[],baseVersion:0};return this[m_("0xa")][m_("0x1")](m_("0xd"))[m_("0x5")](t,[e]),t.buffers[0]}},{key:m_("0x3"),value:function(e){var t=[];return this._context[m_("0x1")](m_("0xd"))[m_("0xb")](t,e),t[0]}}]),n}(s_);function k_(e){return m_("0xd")==e[m_("0x0")]&&m_("0x10")==e[m_("0x4")][m_("0xf")]&&1==e[m_("0x7")]&&!e[m_("0xc")]}var __=["decompress","oldRange","buffers","shift","types","start","_compressSingleOperation","__className","name","compress","newRange","user:","user:position:","_decompressSingleOperation","MarkerOperation","_getCompressorByName","end","startsWith","push","split","stickiness"];!function(e,t){!function(t){for(;--t;)e.push(e.shift())}(++t)}(__,104);var b_=function(e,t){return __[e-=0]},w_=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:b_("0xa"),value:function(e,t){if(!function(e,t){return!!(e&&t&&b_("0xf")==e[b_("0x8")]&&b_("0xf")==t[b_("0x8")]&&e.name.startsWith(b_("0xc"))&&t[b_("0x9")][b_("0x12")](b_("0xc"))&&e.name!=t[b_("0x9")])}(t[0],t[1]))return!1;var n=t[b_("0x4")]();return n[b_("0x2")]=null,n.newRange&&kk(n[b_("0xb")][b_("0x6")],n.newRange[b_("0x11")])&&(n[b_("0xb")][b_("0x11")]=null),t[b_("0x4")](),e[b_("0x5")][b_("0x13")](this.id),e[b_("0x5")][b_("0x13")](0),e[b_("0x3")][b_("0x13")](this[b_("0x7")](n)),!0}},{key:b_("0x1"),value:function(e,t){var n=this[b_("0xe")](t);n[b_("0xb")]&&!n.newRange[b_("0x11")]&&(n[b_("0xb")].end=_o(n[b_("0xb")][b_("0x6")]));var r=_o(n);r[b_("0xb")]&&(r[b_("0xb")].start[b_("0x0")]="toNone",r[b_("0xb")][b_("0x11")]=_o(r[b_("0xb")][b_("0x6")])),r.name=b_("0xd")+r[b_("0x9")][b_("0x14")](":")[2],t[b_("0x5")][b_("0x4")](),e[b_("0x13")](n),e[b_("0x13")](r)}},{key:b_("0x7"),value:function(e){var t={types:[],buffers:[],baseVersion:0};return this._context[b_("0x10")](b_("0xf"))[b_("0xa")](t,[e]),t[b_("0x3")][0]}},{key:b_("0xe"),value:function(e){var t=[];return this._context[b_("0x10")](b_("0xf"))[b_("0x1")](t,e),t[0]}}]),n}(s_),x_=["Element","set","_compressorById","SplitOperation","MergeOperation","_registerOperationCompressor","length","UserSelectionAction","CommentMarkerOperation","_compressorByName","RootAttributeOperation","_protobufFactory","_registerActionCompressor","build","Position","DeletingAction","NoOperation","MoveOperation","decompress","SuggestionMarkerOperation","TypingAction","_registerCompressor","Range","MarkerOperation","baseVersion","description","forEach","registerDescriptor","types","getDescriptor","get","_getCompressorByName","compress"];!function(e,t){!function(t){for(;--t;)e.push(e.shift())}(++t)}(x_,190);var C_=function(e,t){return x_[e-=0]},T_=function(){function e(){_classCallCheck(this,e),this[C_("0xa")]=new Map,this[C_("0x11")]=new Map,this[C_("0x13")]=new dk,this[C_("0x13")][C_("0x2")](C_("0x16"),vk.Position),this[C_("0x13")].registerDescriptor(C_("0x1e"),vk[C_("0x1e")]),this._protobufFactory[C_("0x2")](C_("0x8"),vk.Element),this[C_("0x13")][C_("0x2")]("AttributeOperation",Ek[C_("0x0")]),this._protobufFactory[C_("0x2")]("InsertOperation",Mk[C_("0x0")]),this[C_("0x13")][C_("0x2")](C_("0x1f"),jk[C_("0x0")]),this._protobufFactory[C_("0x2")](C_("0xc"),Bk[C_("0x0")]),this._protobufFactory.registerDescriptor(C_("0x19"),Uk[C_("0x0")]),this[C_("0x13")][C_("0x2")]("RenameOperation",Yk.description),this[C_("0x13")][C_("0x2")](C_("0x12"),$k[C_("0x0")]),this[C_("0x13")].registerDescriptor("SplitOperation",Zk[C_("0x0")]),this[C_("0x13")][C_("0x15")](),this._registerCompressor(1,C_("0x18"),new t_(1,C_("0x18"))),this[C_("0xd")](10,"AttributeOperation",Ek),this[C_("0xd")](11,"InsertOperation",Mk),this[C_("0xd")](12,C_("0x1f"),jk),this[C_("0xd")](13,C_("0xc"),Bk),this[C_("0xd")](14,C_("0x19"),Uk),this[C_("0xd")](15,"RenameOperation",Yk),this[C_("0xd")](16,C_("0x12"),$k),this[C_("0xd")](17,C_("0xb"),Zk);var t=this._protobufFactory[C_("0x4")]("MarkerOperation");this[C_("0x1d")](18,C_("0x10"),new i_(18,C_("0x1f"),t,"comment")),this[C_("0x1d")](19,C_("0x1b"),new i_(19,C_("0x1f"),t,"suggestion")),this._registerActionCompressor(100,"TypingAction",u_),this._registerActionCompressor(101,C_("0x17"),p_),this[C_("0x14")](102,"ForwardDeletingAction",y_),this[C_("0x14")](103,C_("0xf"),w_)}return _createClass(e,[{key:C_("0xd"),value:function(e,t,n){var r=new n(e,t,this[C_("0x13")][C_("0x4")](t));this[C_("0x1d")](e,t,r)}},{key:C_("0x14"),value:function(e,t,n){var r=new n(e,this);this._registerCompressor(e,t,r)}},{key:"_registerCompressor",value:function(e,t,n){this._compressorById.set(e,n),this[C_("0x11")][C_("0x9")](t,n)}},{key:C_("0x6"),value:function(e){return this[C_("0x11")][C_("0x5")](e)}},{key:C_("0x7"),value:function(e){if(!e||!e[0])throw new Ke.default("no-operations-provided",this);for(var t={types:[],buffers:[],baseVersion:e[0].baseVersion};e.length;)this[C_("0x6")]("UserSelectionAction")[C_("0x7")](t,e)||this[C_("0x6")](C_("0x1c"))[C_("0x7")](t,e)||this[C_("0x6")]("DeletingAction").compress(t,e)||this[C_("0x6")]("ForwardDeletingAction").compress(t,e)||this[C_("0x6")](C_("0x10"))[C_("0x7")](t,e)||this[C_("0x6")]("SuggestionMarkerOperation")[C_("0x7")](t,e)||this[C_("0x6")](e[0].__className)[C_("0x7")](t,e);return t}},{key:C_("0x1a"),value:function(e){for(var t=[];e[C_("0x3")][C_("0xe")];)this._compressorById[C_("0x5")](e[C_("0x3")][0]).decompress(t,e);return t[C_("0x1")]((function(t,n){return t.baseVersion=e[C_("0x20")]+n})),t}}]),e}(),A_=n(169),S_=n.n(A_),E_=1,I_=function(e){_inherits(i,e);var t,n,r=_createSuper(i);function i(){return _classCallCheck(this,i),r.apply(this,arguments)}return _createClass(i,[{key:"cloudDocumentVersion",get:function(){return this.lastSyncVersion+this.offset}},{key:"init",value:function(){var e=this,t=this.editor,n=t.plugins.get(Qy),r=t.plugins.get(Ky);if(this.channelId=t.config.get("collaboration.channelId"),!this.channelId)throw new Ke.default("collaboration-missing-channelid",this);this.listenTo(n,"getOperationAuthor",(function(e,t){var r=t[0];r._authorId&&(e.return=n.getUser(r._authorId),e.stop()),null===r._authorId&&(e.return=null,e.stop())}),{priority:"high"});var o=t.config.get("cloudServices.bundleVersion")||st.a;this.service=new i.CollaborativeEditingService(o,this.channelId),this.lastSyncVersion=0,this.offset=0,this._document=this.editor.model.document,this._compressor=new T_,this._bufferedOperations=new Set,this._knownOperations=new WeakSet,this.set("_isPendingUpdate",!1),this._pendingAction=null,this._hasSelectionChanged=!1,this._sendBufferedOperationsDelay=null,this.listenTo(t.model.document.selection,"change:range",(function(t,n){n.directChange&&e._refreshUserSelectionMarkers()})),this.listenTo(t.editing.view,"change:hasDomSelection",(function(){e._refreshUserSelectionMarkers()})),i.CollaborativeEditingService.getConnectedSessions(r.connection,this.channelId).then((function(t){return e._initSessionsHandling(t)})).catch((function(t){e._crash("realtimecollaborationclient-init-session-connection-error",t)})),this._initThrowingOnDataSet(),this._initService(),t.plugins.get(Ky).addToReconnectionStack(this),t.model.on("applyOperation",(function(t,n){var r=n[0];r.isDocumentOperation&&(e._saveOperationInBuffer(r),e._shouldSendUpdate()&&e._sendBufferedOperationsDelayed())})),this._setUpDataInit(),this.editor.bind("isReadOnly").to(r,"state",(function(e){return"connected"!==e}))}},{key:"reconnect",value:(n=_asyncToGenerator(regeneratorRuntime.mark((function e(){var t,n,r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.editor.plugins.get(nk),n=this.editor.plugins.get(Ky),t.unregister(this.channelId),e.next=4,this.service.reconnect(n.connection,this.lastSyncVersion);case 4:return r=e.sent,this._handleServerResponse([],Object.assign({},r,{data:r.data,wereChangesApplied:!1}),"reconnect"),e.next=8,i.CollaborativeEditingService.getConnectedSessions(n.connection,this.channelId);case 8:o=e.sent,t.register(this.channelId,o),this._isPendingUpdate=!1;case 10:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"destroy",value:function(){var e=this.editor.plugins.get(Ky),t=this.editor.plugins.get(nk);this.editor.isReadOnly=!0,t.channelSessions.has(this.channelId)&&t.unregister(this.channelId),_get3(_getPrototypeOf(i.prototype),"destroy",this).call(this),e.removeFromReconnectionStack(this),clearTimeout(this._sendBufferedOperationsDelay)}},{key:"_initSessionsHandling",value:function(e){var t=this.editor,n=t.plugins.get(nk);this.listenTo(n,"sessionAdd:"+this.channelId,(function(e,r){var i=r.session;i.id===n.mySessionId&&(e.off(),"reader"===i.role?t.isReadOnly=!0:"commentator"===i.role&&t.plugins.has("CommentsOnly")&&(t.plugins.get("CommentsOnly").isEnabled=!0))})),n.register(this.channelId,e)}},{key:"_initThrowingOnDataSet",value:function(){var e=this,t=this.editor.data.set;this.editor.data.set=function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];if(!r[r.length-1].suppressErrorInCollaboration)throw new Ke.default("realtimecollaborationclient-editor-setdata-and-editor-data-set-are-forbidden-in-real-time-collaboration",e);t.apply(e.editor.data,r)}}},{key:"_initService",value:function(){var e=this;this.listenTo(this.service,"operationsReceived",(function(t,n,r,i){if(!e._isPendingUpdate&&e._document.version==n){var o=e._decompressOperations(r);e._assignOperationAuthors(o,i),e.lastSyncVersion=n+o.length,e._handleExternalOperations(o)||e._crash("realtimecollaborationclient-initservice-incorrect-server-operation")}})),this.listenTo(this.service,"error",(function(t,n){e._crash("realtimecollaborationclient-initservice-internal-error",n)}))}},{key:"_setUpDataInit",value:function(){var e=this,t=this.editor.plugins.get(Ky).connection;this.editor.data.on("init",(function(n,r){var i=_slicedToArray(r,1)[0];if(e._document.version)throw new Ke.default("realtimecollaborationclient-init-document-already-initialized",e);n.stop();var o=e._getOperationsFromInitData(i);e._setPendingAction(),n.return=e.service.connect(t,e._compressOperations(o)).then((function(t){e._clearPendingAction(),e._handleConnectionData(t,o);var n=e.editor.plugins.get(nk),r=n.channelSessions.get(e.channelId);r&&r.length>1?(e._hasSelectionChanged=!0,e._sendBufferedOperationsDelayed()):n.on("sessionAdd:"+e.channelId,(function(t){n.channelSessions.get(e.channelId).length>1&&(e._hasSelectionChanged=!0,e._sendBufferedOperationsDelayed(),t.off())})),e.editor.data.fire("ready")})).catch((function(t){return e._crash("realtimecollaborationclient-init-connection-failed",t)}))}),{priority:"high"})}},{key:"_getOperationsFromInitData",value:function(e){for(var t=this.editor.model,n=[],r=0,i="string"==typeof e?{main:e}:e,o=0,a=Object.keys(i);o<a.length;o++){var s=a[o];if(!this._document.roots.has(s))throw new Ke.default("realtimecollaborationclient-init-non-existent-root",this);var c=this.editor.data.parse(i[s]),l=this._document.getRoot(s),u=new wa(t.createPositionAt(l,0),c,r++);n.push(u);var d,f=_createForOfIteratorHelper(c.markers);try{for(f.s();!(d=f.n()).done;){var h=_slicedToArray(d.value,2),p=h[0],v=h[1],g=t.createRange(t.createPositionFromPath(l,v.start.path.slice()),t.createPositionFromPath(l,v.end.path.slice())),m=new xa(p,null,g,t.markers,!0,r++);n.push(m)}}catch(y){f.e(y)}finally{f.f()}}return n}},{key:"_handleConnectionData",value:function(e,t){var n;this.offset=e.offset;var r=e.wereChangesApplied&&!e.initData;if(r)n=t;else{if(e.initData){var i=this._getOperationsFromInitData(e.initData);this._document.version=-i.length,i.forEach((function(e){e.baseVersion-=i.length})),this._applyOperationsSet(i,!0)}this._document.version=e.data.baseVersion,n=this._decompressOperations(e.data),this._assignOperationAuthors(n,e.metadata)}this.lastSyncVersion=e.version,this._applyOperationsSet(n,r)}},{key:"_crash",value:function(e,t){throw this._isPendingUpdate=!0,t&&console.error(t),new Ke.default(e,this.editor)}},{key:"_saveOperationInBuffer",value:function(e){this._knownOperations.has(e)||(this._knownOperations.add(e),this._bufferedOperations.add(e),this._pendingAction||"marker"==e.type&&!e.affectsData||this._setPendingAction())}},{key:"_refreshUserSelectionMarkers",value:function(){this._hasSelectionChanged=!0,this._shouldSendSelectionUpdate()&&this._sendBufferedOperationsDelayed()}},{key:"_shouldSendSelectionUpdate",value:function(){var e=this.editor.plugins.get(nk).channelSessions.get(this.channelId);return!this.editor.isReadOnly&&e&&e.length>1&&this._hasSelectionChanged}},{key:"_shouldSendUpdate",value:function(){return this._bufferedOperations.size>0||this._shouldSendSelectionUpdate()}},{key:"_sendBufferedOperations",value:(t=_asyncToGenerator(regeneratorRuntime.mark((function e(){var t,n,r,i,o,a,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.editor.plugins.get(ok),this._shouldSendSelectionUpdate()&&(t.createUserMarkerOperations(),this._hasSelectionChanged=!1),this._shouldSendUpdate()){e.next=3;break}return e.abrupt("return",Promise.resolve(!0));case 3:for(n=Array.from(this._bufferedOperations),r=0,i=n;r<i.length;r++)(o=i[r]).wasUndone=this._document.history.isUndoneOperation(o);return a=E_++,e.next=8,this.service.sendOperations(this._compressOperations(n),this.lastSyncVersion);case 8:return s=e.sent,e.prev=9,e.abrupt("return",this._handleServerResponse(n,s,a));case 13:return e.prev=13,e.t0=e.catch(9),e.abrupt("return",this._crash("realtimecollaborationclient-sendbufferedoperations",e.t0));case 16:case"end":return e.stop()}}),e,this,[[9,13]])}))),function(){return t.apply(this,arguments)})},{key:"_sendBufferedOperationsDelayed",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];!t&&this._isPendingUpdate||(this._isPendingUpdate=!0,clearTimeout(this._sendBufferedOperationsDelay),this._sendBufferedOperationsDelay=setTimeout((function(){e._sendBufferedOperations().then((function(t){t&&(e._clearPendingAction(),e._isPendingUpdate=!1)})).catch((function(t){throw e._clearPendingAction(),e._isPendingUpdate=!1,t}))}),300))}},{key:"_handleServerResponse",value:function(e,t,n){if(t.error)throw t.error;var r=!1;if(t.wereChangesApplied){var i,o=_createForOfIteratorHelper(e);try{for(o.s();!(i=o.n()).done;){var a=i.value;this._bufferedOperations.delete(a),delete a.wasUndone}}catch(c){o.e(c)}finally{o.f()}r=!0}else{var s=this._decompressOperations(t.data);this._assignOperationAuthors(s,t.metadata),r=this._handleExternalOperations(s,t.version)}return r?(this.lastSyncVersion=t.version,!this._shouldSendUpdate()||(this._sendBufferedOperationsDelayed(!0),!1)):this._crash("realtimecollaborationclient-handleserverresponse")}},{key:"_handleExternalOperations",value:function(e,t){try{var n=Ql(e,Array.from(this._bufferedOperations),{document:this._document,useRelations:!1,padWithNoOps:!0}),r=n.operationsA,i=n.operationsB,o=n.originalOperations;O_(r,this._document.version),O_(i,t);var a,s=_createForOfIteratorHelper(r);try{for(s.s();!(a=s.n()).done;){var c=a.value,l=o.get(c);c._authorId=l?l._authorId:null}}catch(u){s.e(u)}finally{s.f()}this._bufferedOperations=new Set(i),this._applyOperationsSet(r)}catch(e){return console.error(e),!1}return!0}},{key:"_applyOperationsSet",value:function(e){var t=this;arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.editor.model.enqueueChange("transparent",(function(n){var r,i=_createForOfIteratorHelper(e);try{for(i.s();!(r=i.n()).done;){var o=r.value;t._knownOperations.add(o),n.batch.addOperation(o),t.editor.model.applyOperation(o)}}catch(a){i.e(a)}finally{i.f()}}))}},{key:"_setPendingAction",value:function(){var e=this.editor.locale.t;this._pendingAction=this.editor.plugins.get(ms).add(e({string:"Sending data to the server.",id:"PENDING_ACTION_SENDING_DATA"}))}},{key:"_clearPendingAction",value:function(){this._pendingAction&&(this.editor.plugins.get(ms).remove(this._pendingAction),this._pendingAction=null)}},{key:"_compressOperations",value:function(e){return this._compressor.compress(e.map((function(e){return e.toJSON()})))}},{key:"_decompressOperations",value:function(e){var t=this;return this._compressor.decompress(e).map((function(e){var n=$a.fromJSON(e,t._document);return n.wasUndone=e.wasUndone,n}))}},{key:"_assignOperationAuthors",value:function(e,t){for(var n=0;n<e.length;n++)e[n]._authorId="init"!=t[n].type?t[n].userId:null}}],[{key:"requires",get:function(){return[Ky,nk,ok,ms,Qy]}},{key:"pluginName",get:function(){return"RealTimeCollaborationClient"}}]),i}(d);function O_(e,t){var n,r=_createForOfIteratorHelper(e);try{for(r.s();!(n=r.n()).done;){n.value.baseVersion=t++}}catch(i){r.e(i)}finally{r.f()}}I_.CollaborativeEditingService=S_.a;var R_=["RealTimeCollaborativeEditing","requires","pluginName"];!function(e,t){!function(t){for(;--t;)e.push(e.shift())}(++t)}(R_,488);var P_=function(e,t){return R_[e-=0]},M_=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,null,[{key:P_("0x2"),get:function(){return[I_]}},{key:P_("0x0"),get:function(){return P_("0x1")}}]),n}(d),N_=n(170),D_=n.n(N_),F_=["listenTo","updateComment","_isAttached","addComment","removeComment","removeCommentThread","stopListening","remove","_localUser","destroy","model","view"];!function(e,t){!function(t){for(;--t;)e.push(e.shift())}(++t)}(F_,426);var j_=function(e,t){return F_[e-=0]},L_=function(){function e(t,n){var r=this;_classCallCheck(this,e),this.model=t,this.model._isAttached=!0,this[j_("0x5")]=n,this[j_("0x6")](n,j_("0xb"),(function(){return r[j_("0x1")]()})),this[j_("0x6")](n,j_("0x9"),(function(e,t){return r.addComment(t)})),this.listenTo(n,"updateComment",(function(e,t,n){return r[j_("0x7")](t,n)})),this[j_("0x6")](n,j_("0xa"),(function(e,t){return r.removeComment(t)}))}return _createClass(e,[{key:j_("0x1"),value:function(){this.model[j_("0x1")]()}},{key:"addComment",value:function(e){this[j_("0x4")].addComment({content:e,authorId:this[j_("0x5")][j_("0x2")].id})}},{key:j_("0x7"),value:function(e,t){this[j_("0x4")].getComment(e).update({content:t})}},{key:j_("0xa"),value:function(e){this[j_("0x4")].getComment(e)[j_("0x1")]()}},{key:j_("0x3"),value:function(){this[j_("0x0")](),this[j_("0x4")][j_("0x8")]=!1}}]),e}();function V_(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function B_(e){V_(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||"object"==typeof e&&"[object Date]"===t?new Date(e.getTime()):"number"==typeof e||"[object Number]"===t?new Date(e):("string"!=typeof e&&"[object String]"!==t||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule"),console.warn((new Error).stack)),new Date(NaN))}Object(u.default)(L_,l.default);var z_={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function H_(e){return function(t){var n=t||{},r=n.width?String(n.width):e.defaultWidth;return e.formats[r]||e.formats[e.defaultWidth]}}var U_={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function W_(e){return function(t,n){var r,i=n||{};if("formatting"===(i.context?String(i.context):"standalone")&&e.formattingValues){var o=e.defaultFormattingWidth||e.defaultWidth,a=i.width?String(i.width):o;r=e.formattingValues[a]||e.formattingValues[o]}else{var s=e.defaultWidth,c=i.width?String(i.width):e.defaultWidth;r=e.values[c]||e.values[s]}return r[e.argumentCallback?e.argumentCallback(t):t]}}function q_(e){return function(t,n){var r=String(t),i=n||{},o=i.width,a=r.match(o&&e.matchPatterns[o]||e.matchPatterns[e.defaultMatchWidth]);if(!a)return null;var s,c=a[0],l=o&&e.parsePatterns[o]||e.parsePatterns[e.defaultParseWidth];return s="[object Array]"===Object.prototype.toString.call(l)?function(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return n}(l,(function(e){return e.test(c)})):function(e,t){for(var n in e)if(e.hasOwnProperty(n)&&t(e[n]))return n}(l,(function(e){return e.test(c)})),s=e.valueCallback?e.valueCallback(s):s,{value:s=i.valueCallback?i.valueCallback(s):s,rest:r.slice(c.length)}}}var Y_={code:"en-US",formatDistance:function(e,t,n){var r;return n=n||{},r="string"==typeof z_[e]?z_[e]:1===t?z_[e].one:z_[e].other.replace("{{count}}",t),n.addSuffix?n.comparison>0?"in "+r:r+" ago":r},formatLong:{date:H_({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:H_({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:H_({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},formatRelative:function(e,t,n,r){return U_[e]},localize:{ordinalNumber:function(e,t){var n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},era:W_({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:W_({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:function(e){return Number(e)-1}}),month:W_({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:W_({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:W_({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:function(e){return function(t,n){var r=String(t),i=n||{},o=r.match(e.matchPattern);if(!o)return null;var a=o[0],s=r.match(e.parsePattern);if(!s)return null;var c=e.valueCallback?e.valueCallback(s[0]):s[0];return{value:c=i.valueCallback?i.valueCallback(c):c,rest:r.slice(a.length)}}}({matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:function(e){return parseInt(e,10)}}),era:q_({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:q_({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:q_({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:q_({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:q_({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}};function G_(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}function J_(e,t){return V_(2,arguments),function(e,t){V_(2,arguments);var n=B_(e).getTime(),r=G_(t);return new Date(n+r)}(e,-G_(t))}function $_(e,t){for(var n=e<0?"-":"",r=Math.abs(e).toString();r.length<t;)r="0"+r;return n+r}function K_(e){V_(1,arguments);var t=B_(e),n=t.getUTCDay(),r=(n<1?7:0)+n-1;return t.setUTCDate(t.getUTCDate()-r),t.setUTCHours(0,0,0,0),t}function Q_(e){V_(1,arguments);var t=B_(e),n=t.getUTCFullYear(),r=new Date(0);r.setUTCFullYear(n+1,0,4),r.setUTCHours(0,0,0,0);var i=K_(r),o=new Date(0);o.setUTCFullYear(n,0,4),o.setUTCHours(0,0,0,0);var a=K_(o);return t.getTime()>=i.getTime()?n+1:t.getTime()>=a.getTime()?n:n-1}function Z_(e,t){V_(1,arguments);var n=t||{},r=n.locale,i=r&&r.options&&r.options.weekStartsOn,o=null==i?0:G_(i),a=null==n.weekStartsOn?o:G_(n.weekStartsOn);if(!(a>=0&&a<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var s=B_(e),c=s.getUTCDay(),l=(c<a?7:0)+c-a;return s.setUTCDate(s.getUTCDate()-l),s.setUTCHours(0,0,0,0),s}function X_(e,t){V_(1,arguments);var n=B_(e,t),r=n.getUTCFullYear(),i=t||{},o=i.locale,a=o&&o.options&&o.options.firstWeekContainsDate,s=null==a?1:G_(a),c=null==i.firstWeekContainsDate?s:G_(i.firstWeekContainsDate);if(!(c>=1&&c<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var l=new Date(0);l.setUTCFullYear(r+1,0,c),l.setUTCHours(0,0,0,0);var u=Z_(l,t),d=new Date(0);d.setUTCFullYear(r,0,c),d.setUTCHours(0,0,0,0);var f=Z_(d,t);return n.getTime()>=u.getTime()?r+1:n.getTime()>=f.getTime()?r:r-1}function eb(e,t){var n=e>0?"-":"+",r=Math.abs(e),i=Math.floor(r/60),o=r%60;if(0===o)return n+String(i);var a=t||"";return n+String(i)+a+$_(o,2)}function tb(e,t){return e%60==0?(e>0?"-":"+")+$_(Math.abs(e)/60,2):nb(e,t)}function nb(e,t){var n=t||"",r=e>0?"-":"+",i=Math.abs(e);return r+$_(Math.floor(i/60),2)+n+$_(i%60,2)}var rb={G:function(e,t,n){var r=e.getUTCFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if("yo"===t){var r=e.getUTCFullYear();return n.ordinalNumber(r>0?r:1-r,{unit:"year"})}return function(e,t){var n=e.getUTCFullYear(),r=n>0?n:1-n;return $_("yy"===t?r%100:r,t.length)}(e,t)},Y:function(e,t,n,r){var i=X_(e,r),o=i>0?i:1-i;return"YY"===t?$_(o%100,2):"Yo"===t?n.ordinalNumber(o,{unit:"year"}):$_(o,t.length)},R:function(e,t){return $_(Q_(e),t.length)},u:function(e,t){return $_(e.getUTCFullYear(),t.length)},Q:function(e,t,n){var r=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return $_(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){var r=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return $_(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){var r=e.getUTCMonth();switch(t){case"M":case"MM":return function(e,t){var n=e.getUTCMonth();return"M"===t?String(n+1):$_(n+1,2)}(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){var r=e.getUTCMonth();switch(t){case"L":return String(r+1);case"LL":return $_(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){var i=function(e,t){V_(1,arguments);var n=B_(e),r=Z_(n,t).getTime()-function(e,t){V_(1,arguments);var n=t||{},r=n.locale,i=r&&r.options&&r.options.firstWeekContainsDate,o=null==i?1:G_(i),a=null==n.firstWeekContainsDate?o:G_(n.firstWeekContainsDate),s=X_(e,t),c=new Date(0);return c.setUTCFullYear(s,0,a),c.setUTCHours(0,0,0,0),Z_(c,t)}(n,t).getTime();return Math.round(r/6048e5)+1}(e,r);return"wo"===t?n.ordinalNumber(i,{unit:"week"}):$_(i,t.length)},I:function(e,t,n){var r=function(e){V_(1,arguments);var t=B_(e),n=K_(t).getTime()-function(e){V_(1,arguments);var t=Q_(e),n=new Date(0);return n.setUTCFullYear(t,0,4),n.setUTCHours(0,0,0,0),K_(n)}(t).getTime();return Math.round(n/6048e5)+1}(e);return"Io"===t?n.ordinalNumber(r,{unit:"week"}):$_(r,t.length)},d:function(e,t,n){return"do"===t?n.ordinalNumber(e.getUTCDate(),{unit:"date"}):function(e,t){return $_(e.getUTCDate(),t.length)}(e,t)},D:function(e,t,n){var r=function(e){V_(1,arguments);var t=B_(e),n=t.getTime();t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0);var r=n-t.getTime();return Math.floor(r/864e5)+1}(e);return"Do"===t?n.ordinalNumber(r,{unit:"dayOfYear"}):$_(r,t.length)},E:function(e,t,n){var r=e.getUTCDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){var i=e.getUTCDay(),o=(i-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(o);case"ee":return $_(o,2);case"eo":return n.ordinalNumber(o,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});case"eeee":default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){var i=e.getUTCDay(),o=(i-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(o);case"cc":return $_(o,t.length);case"co":return n.ordinalNumber(o,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});case"cccc":default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(e,t,n){var r=e.getUTCDay(),i=0===r?7:r;switch(t){case"i":return String(i);case"ii":return $_(i,t.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){var r=e.getUTCHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(r,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(e,t,n){var r,i=e.getUTCHours();switch(r=12===i?"noon":0===i?"midnight":i/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(r,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},B:function(e,t,n){var r,i=e.getUTCHours();switch(r=i>=17?"evening":i>=12?"afternoon":i>=4?"morning":"night",t){case"B":case"BB":case"BBB":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(r,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},h:function(e,t,n){if("ho"===t){var r=e.getUTCHours()%12;return 0===r&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return function(e,t){return $_(e.getUTCHours()%12||12,t.length)}(e,t)},H:function(e,t,n){return"Ho"===t?n.ordinalNumber(e.getUTCHours(),{unit:"hour"}):function(e,t){return $_(e.getUTCHours(),t.length)}(e,t)},K:function(e,t,n){var r=e.getUTCHours()%12;return"Ko"===t?n.ordinalNumber(r,{unit:"hour"}):$_(r,t.length)},k:function(e,t,n){var r=e.getUTCHours();return 0===r&&(r=24),"ko"===t?n.ordinalNumber(r,{unit:"hour"}):$_(r,t.length)},m:function(e,t,n){return"mo"===t?n.ordinalNumber(e.getUTCMinutes(),{unit:"minute"}):function(e,t){return $_(e.getUTCMinutes(),t.length)}(e,t)},s:function(e,t,n){return"so"===t?n.ordinalNumber(e.getUTCSeconds(),{unit:"second"}):function(e,t){return $_(e.getUTCSeconds(),t.length)}(e,t)},S:function(e,t){return function(e,t){var n=t.length,r=e.getUTCMilliseconds();return $_(Math.floor(r*Math.pow(10,n-3)),t.length)}(e,t)},X:function(e,t,n,r){var i=(r._originalDate||e).getTimezoneOffset();if(0===i)return"Z";switch(t){case"X":return tb(i);case"XXXX":case"XX":return nb(i);case"XXXXX":case"XXX":default:return nb(i,":")}},x:function(e,t,n,r){var i=(r._originalDate||e).getTimezoneOffset();switch(t){case"x":return tb(i);case"xxxx":case"xx":return nb(i);case"xxxxx":case"xxx":default:return nb(i,":")}},O:function(e,t,n,r){var i=(r._originalDate||e).getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+eb(i,":");case"OOOO":default:return"GMT"+nb(i,":")}},z:function(e,t,n,r){var i=(r._originalDate||e).getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+eb(i,":");case"zzzz":default:return"GMT"+nb(i,":")}},t:function(e,t,n,r){return $_(Math.floor((r._originalDate||e).getTime()/1e3),t.length)},T:function(e,t,n,r){return $_((r._originalDate||e).getTime(),t.length)}};function ib(e,t){switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}}function ob(e,t){switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}}var ab={p:ob,P:function(e,t){var n,r=e.match(/(P+)(p+)?/),i=r[1],o=r[2];if(!o)return ib(e,t);switch(i){case"P":n=t.dateTime({width:"short"});break;case"PP":n=t.dateTime({width:"medium"});break;case"PPP":n=t.dateTime({width:"long"});break;case"PPPP":default:n=t.dateTime({width:"full"})}return n.replace("{{date}}",ib(i,t)).replace("{{time}}",ob(o,t))}};function sb(e){var t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),e.getTime()-t.getTime()}var cb=["D","DD"],lb=["YY","YYYY"];function ub(e,t,n){if("YYYY"===e)throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://git.io/fxCyr"));if("YY"===e)throw new RangeError("Use `yy` instead of `YY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://git.io/fxCyr"));if("D"===e)throw new RangeError("Use `d` instead of `D` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://git.io/fxCyr"));if("DD"===e)throw new RangeError("Use `dd` instead of `DD` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://git.io/fxCyr"))}var db=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,fb=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,hb=/^'([^]*?)'?$/,pb=/''/g,vb=/[a-zA-Z]/,gb=36e5,mb=6e4,yb={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},kb=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,_b=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,bb=/^([+-])(\d{2})(?::?(\d{2}))?$/;function wb(e){return e?parseInt(e):1}function xb(e){return e&&parseFloat(e.replace(",","."))||0}var Cb=[31,null,31,30,31,30,31,31,30,31,30,31];function Tb(e){return e%400==0||e%4==0&&e%100}function Ab(e){V_(1,arguments);var t=B_(e);return t.setHours(0,0,0,0),t}var Sb=["invalid-date-time-format","'Yesterday' hh:mma","dateTimeFormat","MM-dd-yyyy hh:mma","function","'Last' EEEE hh:mma","string","'Today' hh:mma"];!function(e,t){!function(t){for(;--t;)e.push(e.shift())}(++t)}(Sb,301);var Eb=function(e,t){return Sb[e-=0]};function Ib(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(void 0!==e[Eb("0x5")]&&Eb("0x7")!=typeof e.dateTimeFormat)throw new Ke.default(Eb("0x3"));return function(t){var n=Eb("0x1")==typeof t?function(e,t){V_(1,arguments);var n=t||{},r=null==n.additionalDigits?2:G_(n.additionalDigits);if(2!==r&&1!==r&&0!==r)throw new RangeError("additionalDigits must be 0, 1 or 2");if("string"!=typeof e&&"[object String]"!==Object.prototype.toString.call(e))return new Date(NaN);var i,o=function(e){var t,n={},r=e.split(yb.dateTimeDelimiter);if(r.length>2)return n;if(/:/.test(r[0])?(n.date=null,t=r[0]):(n.date=r[0],t=r[1],yb.timeZoneDelimiter.test(n.date)&&(n.date=e.split(yb.timeZoneDelimiter)[0],t=e.substr(n.date.length,e.length))),t){var i=yb.timezone.exec(t);i?(n.time=t.replace(i[1],""),n.timezone=i[1]):n.time=t}return n}(e);if(o.date){var a=function(e,t){var n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),r=e.match(n);if(!r)return{year:null};var i=r[1]&&parseInt(r[1]),o=r[2]&&parseInt(r[2]);return{year:null==o?i:100*o,restDateString:e.slice((r[1]||r[2]).length)}}(o.date,r);i=function(e,t){if(null===t)return null;var n=e.match(kb);if(!n)return null;var r=!!n[4],i=wb(n[1]),o=wb(n[2])-1,a=wb(n[3]),s=wb(n[4]),c=wb(n[5])-1;if(r)return function(e,t,n){return t>=1&&t<=53&&n>=0&&n<=6}(0,s,c)?function(e,t,n){var r=new Date(0);r.setUTCFullYear(e,0,4);var i=7*(t-1)+n+1-(r.getUTCDay()||7);return r.setUTCDate(r.getUTCDate()+i),r}(t,s,c):new Date(NaN);var l=new Date(0);return function(e,t,n){return t>=0&&t<=11&&n>=1&&n<=(Cb[t]||(Tb(e)?29:28))}(t,o,a)&&function(e,t){return t>=1&&t<=(Tb(e)?366:365)}(t,i)?(l.setUTCFullYear(t,o,Math.max(i,a)),l):new Date(NaN)}(a.restDateString,a.year)}if(isNaN(i)||!i)return new Date(NaN);var s,c=i.getTime(),l=0;if(o.time&&(l=function(e){var t=e.match(_b);if(!t)return null;var n=xb(t[1]),r=xb(t[2]),i=xb(t[3]);return function(e,t,n){return 24===e?0===t&&0===n:n>=0&&n<60&&t>=0&&t<60&&e>=0&&e<25}(n,r,i)?n*gb+r*mb+1e3*i:NaN}(o.time),isNaN(l)||null===l))return new Date(NaN);if(!o.timezone){var u=new Date(c+l),d=new Date(0);return d.setFullYear(u.getUTCFullYear(),u.getUTCMonth(),u.getUTCDate()),d.setHours(u.getUTCHours(),u.getUTCMinutes(),u.getUTCSeconds(),u.getUTCMilliseconds()),d}return s=function(e){if("Z"===e)return 0;var t=e.match(bb);if(!t)return 0;var n="+"===t[1]?-1:1,r=parseInt(t[2]),i=t[3]&&parseInt(t[3])||0;return function(e,t){return t>=0&&t<=59}(0,i)?n*(r*gb+i*mb):NaN}(o.timezone),isNaN(s)?new Date(NaN):new Date(c+l+s)}(t):t,r=function(e,t){V_(2,arguments);var n=Ab(e),r=Ab(t),i=n.getTime()-sb(n),o=r.getTime()-sb(r);return Math.round((i-o)/864e5)}(new Date,n);return e[Eb("0x5")]?e[Eb("0x5")](n):function(e,t,n){V_(2,arguments);var r=String(t),i=n||{},o=i.locale||Y_,a=o.options&&o.options.firstWeekContainsDate,s=null==a?1:G_(a),c=null==i.firstWeekContainsDate?s:G_(i.firstWeekContainsDate);if(!(c>=1&&c<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var l=o.options&&o.options.weekStartsOn,u=null==l?0:G_(l),d=null==i.weekStartsOn?u:G_(i.weekStartsOn);if(!(d>=0&&d<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!o.localize)throw new RangeError("locale must contain localize property");if(!o.formatLong)throw new RangeError("locale must contain formatLong property");var f=B_(e);if(!function(e){V_(1,arguments);var t=B_(e);return!isNaN(t)}(f))throw new RangeError("Invalid time value");var h=J_(f,sb(f)),p={firstWeekContainsDate:c,weekStartsOn:d,locale:o,_originalDate:f};return r.match(fb).map((function(e){var t=e[0];return"p"===t||"P"===t?(0,ab[t])(e,o.formatLong,p):e})).join("").match(db).map((function(n){if("''"===n)return"'";var r=n[0];if("'"===r)return function(e){return e.match(hb)[1].replace(pb,"'")}(n);var a=rb[r];if(a)return!i.useAdditionalWeekYearTokens&&function(e){return-1!==lb.indexOf(e)}(n)&&ub(n,t,e),!i.useAdditionalDayOfYearTokens&&function(e){return-1!==cb.indexOf(e)}(n)&&ub(n,t,e),a(h,n,o.localize,p);if(r.match(vb))throw new RangeError("Format string contains an unescaped latin alphabet character `"+r+"`");return n})).join("")}(n,Eb(0===r?"0x2":1===r?"0x4":r<7?"0x0":"0x6"))}}var Ob=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var i;_classCallCheck(this,n),i=t.call(this,e);var o=Object(Sr.a)();return i.main=i.createCollection(),i.editable=new kl(e,r),i._voiceLabelView=i._createVoiceLabel(o,e),i.setTemplate({tag:"div",attributes:{class:["ck-reset","ck-editor","ck-rounded-corners","ck-comment__input"],role:"comment",dir:e.uiLanguageDirection,lang:e.uiLanguage,"aria-labelledby":"cke-editor__aria-label_"+o},children:[i._voiceLabelView,{tag:"div",attributes:{class:"ck-editor__main",role:"presentation"},children:i.main}]}),i}return _createClass(n,[{key:"render",value:function(){_get3(_getPrototypeOf(n.prototype),"render",this).call(this),this.main.add(this.editable)}},{key:"focus",value:function(){this.editable.element.focus()}},{key:"_createVoiceLabel",value:function(e,t){var n=new ml,r=t.t;return n.text=r("Comment editor"),n.extendTemplate({attributes:{id:"ck-editor__aria-label_"+e,class:"ck-voice-label"}}),n}}]),n}(gl),Rb=["add","element","init","getRoot","document","editable","view","render","bind","editing","editor","destroy","setEditableElement","attachDomRoot","rootName","isFocused","focusTracker","name","fire","locale"];!function(e,t){!function(t){for(;--t;)e.push(e.shift())}(++t)}(Rb,240);var Pb=function(e,t){return Rb[e-=0]},Mb=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this,e))[Pb("0x6")]=new Ob(e[Pb("0x13")],e.editing[Pb("0x6")]),r}return _createClass(n,[{key:Pb("0x1"),get:function(){return this[Pb("0x6")].element}},{key:Pb("0x2"),value:function(){var e=this[Pb("0xa")][Pb("0x9")][Pb("0x6")],t=this[Pb("0x6")].editable,n=e[Pb("0x4")][Pb("0x3")]();t.name=n[Pb("0xe")],this[Pb("0x6")][Pb("0x7")]();var r=t[Pb("0x1")];this[Pb("0xc")](t[Pb("0x11")],r),this[Pb("0x10")][Pb("0x0")](r),this.view[Pb("0x5")][Pb("0x8")](Pb("0xf")).to(this.focusTracker),e[Pb("0xd")](r),this[Pb("0x12")]("ready")}},{key:"destroy",value:function(){this.view.destroy(),_get3(_getPrototypeOf(n.prototype),Pb("0xb"),this).call(this)}}]),n}(ps),Nb=["change","setSelection","defaultPlugins","init","editing","getRoot","ready","getChild","view","get","model","end","create","change:placeholder","childCount","then","config","focus","placeholderElement","document","name","low","destroy","createRoot","_updatePlaceholder","placeholder","data","initPlugins","plugins"];!function(e,t){!function(t){for(;--t;)e.push(e.shift())}(++t)}(Nb,372);var Db=function(e,t){return Nb[e-=0]},Fb=function(e){_inherits(n,e);var t=_createSuper(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _classCallCheck(this,n),(r=Object.assign({},r))[Db("0x4")]||(r.plugins=n[Db("0x7")]),(e=t.call(this,r)).ui=new Mb(_assertThisInitialized(e)),e.set(Db("0x1"),""),e[Db("0xf")].document.on(Db("0x5"),(function(){return e._updatePlaceholder()}),{priority:Db("0x1a")}),e.on(Db("0x12"),(function(){return e[Db("0x0")]()})),e.model[Db("0x18")][Db("0x1c")](),e}return _createClass(n,[{key:Db("0x11"),value:function(){var e=this,t=this[Db("0x15")][Db("0xe")]("initialData")||"";return this[Db("0x3")]()[Db("0x14")]((function(){return e.ui[Db("0x8")]()})).then((function(){return e[Db("0x2")][Db("0x8")](t)})).then((function(){return e.fire(Db("0xb"))}))}},{key:Db("0x1b"),value:function(){var e=this;return _get3(_getPrototypeOf(n.prototype),Db("0x1b"),this).call(this)[Db("0x14")]((function(){return e.ui[Db("0x1b")]()}))}},{key:Db("0x16"),value:function(){var e=this;this[Db("0xf")][Db("0x5")]((function(t){var n=e[Db("0xf")][Db("0x18")][Db("0xa")](),r=n[Db("0xc")](n[Db("0x13")]-1);t[Db("0x6")](r,Db("0x10")),e[Db("0x9")].view[Db("0x16")]()}))}},{key:Db("0x0"),value:function(){var e=this[Db("0x9")][Db("0xd")],t=e[Db("0x18")][Db("0xa")](),n=t[Db("0xc")](0);t[Db("0x13")]>1||!n||"p"!=n[Db("0x19")]?this[Db("0x17")]&&(function(e,t){var n=t.document;e.change((function(e){if(zl.has(n)){var r=zl.get(n),i=r.get(t);e.removeAttribute("data-placeholder",i.hostElement),Ul(e,i.hostElement),r.delete(t)}}))}(e,this.placeholderElement),this[Db("0x17")]=void 0):(Hl({view:e,element:n,text:this.placeholder,keepOnFocus:!0}),this[Db("0x17")]=n)}}]),n}(ds);Object(u.default)(Fb,l.default),Object(u.default)(Fb,vs),Fb[Db("0x7")]=[tf,hf,Gf,wf,If,Av];var jb=function(e){_inherits(r,e);var t,n=_createSuper(r);function r(e){var t,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_classCallCheck(this,r),t=n.call(this,e);var o=e.t;return t.editor=new Fb(i),t.keystrokes=new Ii,t.focusTracker=new Ei,t.set("value",i.initialData||""),t.set("disabledSubmit",!1),t.set("showButtons",!0),t.set("placeholder",o("Reply...")),t.submitButtonView=t._createSubmitButton(),t.cancelButtonView=t._createCancelButton(),t.setTemplate({tag:"div",attributes:{class:["ck-comment__input-wrapper"]},children:[{tag:"div",attributes:{class:["ck-comment__input-actions",t.bindTemplate.if("showButtons","ck-comment__input-actions--active")]},children:[t.submitButtonView,t.cancelButtonView]}]}),t.keystrokes.set("Esc",(function(e,n){t.cancelButtonView.fire("execute"),n()})),t.on("submit",(function(e,n){n.length>4e3?(alert(o({string:"Comment content is too long. Your comment has %0 characters but the limit is %1 characters.",id:"TOO_LONG_COMMENT_ALERT"},[n.length,4e3])),e.stop()):t.editor.setData("")}),{priority:"high"}),t}return _createClass(r,[{key:"render",value:function(){var e=this;_get3(_getPrototypeOf(r.prototype),"render",this).call(this);var t=this.editor,n=this.element;this.keystrokes.listenTo(n),this.focusTracker.add(n),this._editorCreationPromise=t.create().then((function(){n.insertBefore(t.ui.element,n.firstChild),t.model.document.on("change",(function(){return e.value=t.getData()})),t.bind("placeholder").to(e),e._initializeFocusCycling(t),e.fire("editorReady")}))}},{key:"focus",value:function(){this.editor.focus()}},{key:"destroy",value:(t=_asyncToGenerator(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this._isDestroyed,e.t0){e.next=11;break}if(this._isDestroyed=!0,e.t1=this.isRendered,!e.t1){e.next=9;break}return e.next=7,this._editorCreationPromise;case 7:return e.next=9,this.editor.destroy();case 9:return e.next=11,_get3(_getPrototypeOf(r.prototype),"destroy",this).call(this);case 11:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"_createSubmitButton",value:function(){var e=this,t=new zc(this.locale),n=this.locale.t;return t.extendTemplate({attributes:{class:["ck-comment__input-actions--submit"]}}),t.label=n("Submit"),t.icon=pc.check,t.on("execute",(function(){e.fire("submit",e.value)})),t.bind("isEnabled").to(this,"value",this,"disabledSubmit",(function(e,t){return!t&&!!e.trim()})),t}},{key:"_createCancelButton",value:function(){var e=this,t=new zc(this.locale),n=this.locale.t;return t.extendTemplate({attributes:{class:["ck-comment__input-actions--cancel"]}}),t.label=n("Cancel"),t.icon=pc.cancel,t.on("execute",(function(){e.editor.setData(""),e.fire("cancel")})),t}},{key:"_initializeFocusCycling",value:function(e){var t=this.focusTracker,n=new yc;[e.ui.view,this.submitButtonView,this.cancelButtonView].forEach((function(e){n.add(e),t.add(e.element)}));var r=new qc({focusables:n,focusTracker:t});this.keystrokes.set("tab",(function(e,t){r.focusNext(),t()}),{priority:"low"}),this.keystrokes.set("shift + tab",(function(e,t){r.focusPrevious(),t()}),{priority:"low"})}}]),r}(kc);n(378);var Lb=["ck-user__anonymous","ck-user__img","push","name","div","isAnonymous","avatar","ck-user__avatar","ck-user","url('","setTemplate"];!function(e,t){!function(t){for(;--t;)e.push(e.shift())}(++t)}(Lb,494);var Vb=function(e,t){return Lb[e-=0]},Bb=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var i;_classCallCheck(this,n),(i=t.call(this,e))[Vb("0x4")]=r[Vb("0x4")];var o=["ck",Vb("0x2")];return r[Vb("0x6")]&&o[Vb("0x3")](Vb("0x1")),r[Vb("0x7")]&&o[Vb("0x3")](Vb("0x8")),i[Vb("0x0")]({tag:Vb("0x5"),attributes:{class:["ck",Vb("0x9")],"data-user-id":r.id},children:[{tag:Vb("0x5"),attributes:{class:o,style:{"background-image":r[Vb("0x7")]?Vb("0xa")+r[Vb("0x7")]+"')":""}}},{tag:Vb("0x5"),attributes:{class:r.avatar?"ck ck-user__name ck-user__name--hidden":"ck ck-user__name"},children:[{text:r.initials}]}]}),i}return n}(kc),zb=["setTemplate","ck-thread__user","commentInputView","extendTemplate","ck-comment__input-container--active","destroy","showButtons","bind","focusTracker","then","bindTemplate","div","showInput","userView","ck-comment__input-container"];!function(e,t){!function(t){for(;--t;)e.push(e.shift())}(++t)}(zb,297);var Hb=function(e,t){return zb[e-=0]},Ub=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i){var o;return _classCallCheck(this,n),(o=t.call(this,e))[Hb("0x5")]=new jb(e,i),o.commentInputView[Hb("0xa")](Hb("0x9")).to(o.commentInputView[Hb("0xb")],"isFocused",o[Hb("0x5")],"value",(function(e,t){return e||!!t})),o.set(Hb("0x0"),!1),o.userView=new Bb(e,r),o.userView[Hb("0x6")]({attributes:{class:Hb("0x4")}}),o[Hb("0x5")][Hb("0x6")]({attributes:{class:"ck-thread__input"}}),o[Hb("0x3")]({tag:Hb("0xe"),attributes:{class:[Hb("0x2"),o[Hb("0xd")].if(Hb("0x0"),Hb("0x7"))]},children:[o[Hb("0x1")],o[Hb("0x5")]]}),o}return _createClass(n,[{key:Hb("0x8"),value:function(){var e=this;return this.commentInputView[Hb("0x8")]()[Hb("0xc")]((function(){return _get3(_getPrototypeOf(n.prototype),Hb("0x8"),e).call(e)}))}}]),n}(kc),Wb=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;_classCallCheck(this,n),r=t.call(this,e);var i=e.t,o=r.bindTemplate;return r.set("count"),r.setTemplate({tag:"li",attributes:{class:"ck-thread__comment-count"},children:[{text:o.to("count",(function(e){return i({string:"%0 Comment",plural:"%0 Comments",id:"NUMBER_OF_COMMENTS"},e)}))}]}),r}return n}(kc),qb=["length","listenTo","setTemplate","_shouldCollapse","change:isActive","delete","_collapsedCommentsView","editorConfig","formatDateTime","add","change:hasDirtyComment","remove","viewUid","maxCommentsWhenCollapsed","updateComment","insert","refreshVisibleViews","set","commentViews","isActive","visibleViews","_handleRemoveCommentModel","CommentView","focus","_updateHasDirtyComment","_rearrangeExpand","from","createCollection","collapse","_handleNewCommentModel","_config","count","stopListening","change:isEditMode","removeComment","delegate","hasDirtyComment","_model","expand","weight","destroy","bind","render","maxThreadTotalWeight","comments","_rearrangeCollapse","element","isEditMode"];!function(e,t){!function(t){for(;--t;)e.push(e.shift())}(++t)}(qb,188);var Yb=function(e,t){return qb[e-=0]},Gb=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i){var o;_classCallCheck(this,n),(o=t.call(this,e))[Yb("0x15")](Yb("0x28"),!1),o.set(Yb("0x4"),r.comments[Yb("0x4")]),o[Yb("0x15")](Yb("0x17"),!1),o[Yb("0x29")]=r,o[Yb("0x22")]=i,o[Yb("0x16")]=o[Yb("0x1f")](),o[Yb("0x18")]=o.createCollection(),o[Yb("0xa")]=new Wb(e),o._collapsedCommentsView[Yb("0x2d")](Yb("0x23")).to(_assertThisInitialized(o),Yb("0x4"),(function(e){return e-o._config[Yb("0x11")]}));var a,s=_createForOfIteratorHelper(r[Yb("0x0")]);try{for(s.s();!(a=s.n()).done;){var c=a.value;o[Yb("0x21")](c)}}catch(l){s.e(l)}finally{s.f()}return o[Yb("0x5")](r.comments,Yb("0xd"),(function(e,t){o[Yb("0x4")]++,o[Yb("0x21")](t),o.refreshVisibleViews()})),o[Yb("0x5")](r.comments,Yb("0xf"),(function(e,t){o[Yb("0x4")]--,o[Yb("0x19")](t),o[Yb("0x14")]()})),o[Yb("0x5")](r,"commentUpdated",(function(){return o[Yb("0x14")]()})),o.on(Yb("0x8"),(function(){return o[Yb("0x14")]()})),o.on(Yb("0xe"),(function(){return o.refreshVisibleViews()})),o[Yb("0x6")]({tag:"ul",attributes:{class:["ck-thread__comments"]},children:o[Yb("0x18")]}),o}return _createClass(n,[{key:Yb("0x7"),get:function(){return this[Yb("0x29")][Yb("0x2b")]>this[Yb("0x22")][Yb("0x2f")]&&!this.isActive&&!this.hasDirtyComment}},{key:Yb("0x2e"),value:function(){_get3(_getPrototypeOf(n.prototype),Yb("0x2e"),this).call(this),this[Yb("0x14")]()}},{key:Yb("0x1b"),value:function(){this[Yb("0x2")][Yb("0x1b")]()}},{key:Yb("0x2c"),value:function(){this[Yb("0xa")][Yb("0x2c")]();var e,t=_createForOfIteratorHelper(this[Yb("0x16")]);try{for(t.s();!(e=t.n()).done;){e.value[Yb("0x2c")]()}}catch(r){t.e(r)}finally{t.f()}_get3(_getPrototypeOf(n.prototype),Yb("0x2c"),this).call(this)}},{key:Yb("0x14"),value:function(){this[Yb("0x7")]?this[Yb("0x1")]():this[Yb("0x1d")]()}},{key:Yb("0x21"),value:function(e){var t=this,n=new(this._config[Yb("0x1a")])(this.locale,e,{maxCommentCharsWhenCollapsed:this[Yb("0x22")].maxCommentCharsWhenCollapsed,formatDateTime:this[Yb("0x22")][Yb("0xc")],editorConfig:this[Yb("0x22")][Yb("0xb")]});n[Yb("0x10")]=e.id,n[Yb("0x27")](Yb("0x26")).to(this),n[Yb("0x27")](Yb("0x12")).to(this),this[Yb("0x5")](n,Yb("0x25"),(function(){return t[Yb("0x1c")]()})),this[Yb("0x16")].add(n)}},{key:Yb("0x19"),value:function(e){var t=this.commentViews[Yb("0xf")](e.id);this[Yb("0x24")](t),t.isEditMode&&this[Yb("0x1c")](),t[Yb("0x2c")]()}},{key:Yb("0x1c"),value:function(){this[Yb("0x28")]=Array[Yb("0x1e")](this[Yb("0x16")]).some((function(e){return e[Yb("0x3")]}))}},{key:Yb("0x1"),value:function(){for(var e=function(e){var t,n=new $e.default,r=_createForOfIteratorHelper(e);try{for(r.s();!(t=r.n()).done;){var i=t.value;n.add(i)}}catch(o){r.e(o)}finally{r.f()}return n}(this[Yb("0x16")]),t=this[Yb("0xa")][Yb("0x23")],n=1;n<=t;n++)e[Yb("0xf")](1);var r,i=_createForOfIteratorHelper(e);try{for(i.s();!(r=i.n()).done;){r.value[Yb("0x20")]()}}catch(o){i.e(o)}finally{i.f()}t>0&&e.add(this[Yb("0xa")],1),Jb(ur(Array[Yb("0x1e")](this[Yb("0x18")]),Array[Yb("0x1e")](e)),this[Yb("0x18")],e)}},{key:Yb("0x1d"),value:function(){Jb(ur(Array[Yb("0x1e")](this[Yb("0x18")]),Array[Yb("0x1e")](this[Yb("0x16")])),this.visibleViews,this[Yb("0x16")]);var e,t=_createForOfIteratorHelper(this.visibleViews);try{for(t.s();!(e=t.n()).done;){e.value[Yb("0x2a")]()}}catch(n){t.e(n)}finally{t.f()}}}]),n}(kc);function Jb(e,t,n){var r,i=0,o=_createForOfIteratorHelper(e);try{for(o.s();!(r=o.n()).done;){switch(r.value){case Yb("0x13"):t[Yb("0xd")](n.get(i),i),i++;break;case Yb("0x9"):t[Yb("0xf")](i);break;case"equal":i++}}}catch(a){o.e(a)}finally{o.f()}}var $b=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i,o){var a;return _classCallCheck(this,n),(a=t.call(this,e)).set("isActive",!1),a.set("isDirty",!1),a._model=r,a._localUser=i,a._config=o,a.commentsListView=new Gb(e,r,Object.assign({CommentView:a._config.CommentView},o)),a.commentsListView.delegate("removeComment").to(_assertThisInitialized(a)),a.commentsListView.delegate("updateComment").to(_assertThisInitialized(a)),a.commentsListView.bind("isActive").to(_assertThisInitialized(a)),a.set("length",a.commentsListView.length),a.bind("length").to(a.commentsListView,"length"),a.commentThreadInputView=a._createCommentThreadInputView(),a.on("removeComment",(function(){return a.focus()})),a.bind("isDirty").to(a.commentsListView,"hasDirtyComment",a.commentThreadInputView.commentInputView,"value",(function(e,t){return e||!!t})),a}return _createClass(n,[{key:"focus",value:function(){this.element.focus()}},{key:"destroy",value:function(){this.isDirty=!1,this.commentsListView.destroy(),this.commentThreadInputView.destroy(),_get3(_getPrototypeOf(n.prototype),"destroy",this).call(this)}},{key:"_createCommentThreadInputView",value:function(){var e=this,t=this.locale.t,n=new Ub(this.locale,this._localUser,this._config.editorConfig),r=n.commentInputView;return n.bind("showInput").to(this,"isActive",this._model,"isReadOnly",r,"value",(function(e,t,n){return!!n||e&&!t})),r.bind("placeholder").to(this,"length",(function(e){return t(e?"Reply...":"Write a comment...")})),r.on("submit",(function(t,n){e.fire("addComment",n)})),r.on("cancel",(function(){e.focus()})),r.bind("disabledSubmit").to(this._model,"isReadOnly"),r.on("cancel",(function(t){0==e.length&&(e.fire("removeCommentThread"),t.stop())})),this.on("change:isActive",(function(t,n,i){i||e.length||r.value||e.fire("removeCommentThread")})),n}}]),n}(kc),Kb=["once","locale","set","confirmView","isConfirm","submit","element","cancel","appendChild","render","registerChild","_removeConfirm","message"];!function(e,t){!function(t){for(;--t;)e.push(e.shift())}(++t)}(Kb,135);var Qb=function(e,t){return Kb[e-=0]},Zb={showConfirm:function(e,t){var n=this;return this[Qb("0xb")]=new(function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;_classCallCheck(this,n),r=t.call(this,e);var i=e.t,o=r.bindTemplate;return r.submitView=r._createButtonView(e,i("Yes"),pc.check,"submit"),r.cancelView=r._createButtonView(e,i("No"),pc.cancel,"cancel"),r.set("message",i("Are you sure?")),r.setTemplate({tag:"div",attributes:{class:["ck-thread__remove-confirm"]},children:[{tag:"div",attributes:{class:"ck-thread__remove-confirm-inner"},children:[{tag:"p",children:[{text:o.to("message")}]},{tag:"div",attributes:{class:"ck-thread__remove-confirm-actions"},children:[r.submitView,r.cancelView]}]}]}),r}return _createClass(n,[{key:"_createButtonView",value:function(e,t,n,r){var i=this,o=new zc(e);return o.label=t,o.icon=n,o.extendTemplate({attributes:{class:"ck-thread__remove-confirm-"+r}}),o.on("execute",(function(){return i.fire(r)})),o}}]),n}(kc))(this[Qb("0x9")]),this.confirmView[Qb("0x4")](),this[Qb("0xb")][Qb("0x7")]=e,this[Qb("0xb")][Qb("0x8")](Qb("0x2"),(function(){n[Qb("0x6")]()})),this[Qb("0xb")][Qb("0x8")](Qb("0x0"),(function(){n._removeConfirm()})),t[Qb("0x3")](this[Qb("0xb")][Qb("0x1")]),this[Qb("0x5")](this.confirmView),this[Qb("0xa")](Qb("0xc"),!0),new Promise((function(e){return n[Qb("0xb")].on(Qb("0x0"),e)}))},cancelConfirm:function(){this[Qb("0xc")]&&this[Qb("0xb")].fire("cancel")},_removeConfirm:function(){this.confirmView.element.remove(),this.deregisterChild(this[Qb("0xb")]),this[Qb("0xc")]=!1,this.confirmView.destroy(),delete this[Qb("0xb")]}},Xb=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i,o){var a;return _classCallCheck(this,n),(a=t.call(this,e,r,i,o)).set("actionIndicator",null),a.containerElement=null,a.locale=e,a.setTemplate(a._getTemplate()),a.on("change:isActive",(function(e,t,n){n||a._cancelAllConfirms()})),a.listenTo(a._model,"change:isReadOnly",(function(e,t,n){n&&a._cancelAllConfirms()})),a.length>0?a._bindFirstCommentView():a.listenTo(a.commentsListView.commentViews,"add",(function(e){a._bindFirstCommentView(),e.off()})),a}return _createClass(n,[{key:"_getTemplate",value:function(){var e=this.bindTemplate;return{tag:"div",attributes:{class:["ck-thread",e.if("isActive","ck-thread--active"),e.if("isConfirm","ck-thread--remove-confirmation"),e.to("actionIndicator",(function(e){return e?"ck-thread--"+e:""}))],"data-thread-id":this._model.id,tabindex:-1},children:[{tag:"div",attributes:{class:"ck-thread__container"},children:[this.commentsListView,this.commentThreadInputView]}]}}},{key:"render",value:function(){_get3(_getPrototypeOf(n.prototype),"render",this).call(this),this.containerElement=this.element.querySelector(".ck-thread__container")}},{key:"_cancelAllConfirms",value:function(){this.cancelConfirm();var e,t=_createForOfIteratorHelper(this.commentsListView.commentViews);try{for(t.s();!(e=t.n()).done;){e.value.cancelConfirm()}}catch(n){t.e(n)}finally{t.f()}}},{key:"_bindFirstCommentView",value:function(){var e=this,t=this.locale.t,n=this.commentsListView.commentViews.get(0);this.bind("actionIndicator").to(n,"actionIndicator",(function(e){return"remove"===e?"remove":null})),n.placeholder=t("Write a comment..."),n.removeButton.on("execute",(function(n){n.stop(),e.showConfirm(t("Delete comment thread?"),e.containerElement).then((function(){e.fire("removeCommentThread")}))}),{priority:"high"})}}]),n}($b);Object(u.default)(Xb,Zb);var ew=["content","element","render","ck-comment__content","setTemplate","set","change:content","div","ck-annotation__content","innerHTML"];!function(e,t){!function(t){for(;--t;)e.push(e.shift())}(++t)}(ew,298);var tw=function(e,t){return ew[e-=0]},nw=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this,e))[tw("0x7")](tw("0x2"),""),r[tw("0x6")]({tag:tw("0x9"),attributes:{class:[tw("0x5"),tw("0x0")]}}),r}return _createClass(n,[{key:"render",value:function(){var e=this;_get3(_getPrototypeOf(n.prototype),tw("0x4"),this).call(this),this.on(tw("0x8"),(function(t,n,r){e[tw("0x3")][tw("0x1")]=r})),this[tw("0x3")][tw("0x1")]=this[tw("0x2")]}}]),n}(kc),rw=["length","...","join","slice","indexOf","push","match","substring","startsWith","replace"];!function(e,t){!function(t){for(;--t;)e.push(e.shift())}(++t)}(rw,239);var iw=function(e,t){return rw[e-=0]};function ow(e,t){for(var n=t.limit,r=t.suffix,i=void 0===r?iw("0x2"):r,o=[],a=0,s=e[iw("0x0")](/</g,"\n<")[iw("0x0")](/>/g,">\n")[iw("0x0")](/^\n/g,"").replace(/\n$/g,"").split("\n"),c=0;c<s[iw("0x1")];c++){var l=s[c],u=aw(l);if(l[iw("0x9")]("<")){if(a>=n){var d=l[iw("0x7")](/[a-zA-Z]+/)[0];l[iw("0x9")]("</")?(o[iw("0x1")]&&(l=""),o.pop()):(o[iw("0x6")](d),l="")}}else if(a>=n)l="";else if(a+u.length>=n){var f=n-a;if(" "===u[f-1])f--;else{var h=u[iw("0x4")](f)[iw("0x5")](" ");-1!==h?f+=h:f=l[iw("0x1")]}l=u.slice(0,f)[iw("0x3")]("")+i,a=n}else a+=u[iw("0x1")];s[c]=l}return s.join("\n")[iw("0x0")](/\n/g,"")}function aw(e){for(var t=[],n=0;n<e[iw("0x1")];n++){var r=e[iw("0x8")](n).match(/^&[a-z0-9#]+;/);if(r){var i=r[0];t.push(i),n+=i[iw("0x1")]-1}else t.push(e[n])}return t}var sw=["add","submit","isReadOnly","maxCommentCharsWhenCollapsed","disabledSubmit","isCollapsed","createCollection","bind","editorReady","switchToDisplayMode","_createCommentContentView","cancel","visibleView","destroy","locale","isEditMode","updateComment","_config","switchToEditMode","collapse","value","editorConfig","expand","_model","focus","content","remove","element","set"];!function(e,t){!function(t){for(;--t;)e.push(e.shift())}(++t)}(sw,380);var cw=function(e,t){return sw[e-=0]},lw=function(e){_inherits(r,e);var t,n=_createSuper(r);function r(e,t,i){var o;return _classCallCheck(this,r),(o=n.call(this,e))[cw("0x14")]=t,o._config=i,o[cw("0x19")]("isEditMode",!1),o[cw("0x19")](cw("0x2"),!0),o.visibleView=o[cw("0x3")](),o[cw("0x9")][cw("0x1a")](o[cw("0x7")]()),o}return _createClass(r,[{key:cw("0x13"),value:function(){this[cw("0x2")]=!1}},{key:cw("0x10"),value:function(){this[cw("0xc")]||(this[cw("0x2")]=!0)}},{key:cw("0x15"),value:function(){this[cw("0x18")][cw("0x15")]()}},{key:cw("0xa"),value:(t=_asyncToGenerator(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this[cw("0x9")].get(0).destroy();case 2:_get3(_getPrototypeOf(r.prototype),"destroy",this).call(this);case 3:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:cw("0xf"),value:function(){this[cw("0xc")]||(this[cw("0xc")]=!0,this[cw("0x9")][cw("0x17")](0).destroy(),this[cw("0x9")][cw("0x1a")](this._createCommentInputView()))}},{key:cw("0x6"),value:function(){this[cw("0xc")]&&(this[cw("0xc")]=!1,this[cw("0x9")][cw("0x17")](0).destroy(),this[cw("0x9")][cw("0x1a")](this[cw("0x7")]()))}},{key:cw("0x7"),value:function(){var e=this,t=new nw(this[cw("0xb")]);return t[cw("0x4")]("content").to(this[cw("0x14")],cw("0x16"),this,cw("0x2"),(function(t,n){return n?ow(t,{limit:e[cw("0xe")][cw("0x0")]}):t})),t}},{key:"_createCommentInputView",value:function(){var e=this;this[cw("0xe")][cw("0x12")]||(this._config[cw("0x12")]={}),this[cw("0xe")][cw("0x12")].initialData=this[cw("0x14")][cw("0x16")];var t=new jb(this[cw("0xb")],this[cw("0xe")][cw("0x12")]);return t[cw("0x11")]=this._model[cw("0x16")],t.bind(cw("0x1")).to(this[cw("0x14")],cw("0x1c")),t.on(cw("0x1b"),(function(t,n){e.fire(cw("0xd"),e[cw("0x14")].id,n),e[cw("0x6")](),e[cw("0x15")]()})),t.on(cw("0x8"),(function(){e[cw("0x6")](),e[cw("0x15")]()})),t.once(cw("0x5"),(function(){t[cw("0x15")]()})),t}}]),r}(kc),uw=n(171),dw=n.n(uw),fw=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i){var o;_classCallCheck(this,n);var a=(o=t.call(this,e,r,i)).locale.t;return o.set("actionIndicator",null),o.set("placeholder",a("Reply...")),o.set("createdAt",null),o.bind("createdAt").to(r),o.editButton=o._createEditButton(),o.removeButton=o._createRemoveButton(),o.userView=new Bb(e,r.author),o.userView.extendTemplate({attributes:{class:["ck-comment__user","ck-annotation__user"]}}),o.listenTo(r,"change:isRemovable",(function(){return o.cancelConfirm()})),o.setTemplate(o._getTemplate()),o}return _createClass(n,[{key:"_getTemplate",value:function(){var e=this,t=this.bindTemplate;return{tag:"li",attributes:{class:["ck-comment__wrapper",t.if("isConfirm","ck-comment--remove-confirmation")],tabindex:-1},children:[{tag:"div",attributes:{class:["ck-comment","ck-annotation",t.if("isEditMode","ck-comment--edit"),t.to("actionIndicator",(function(e){return e?"ck-comment--"+e:""}))],"data-author-id":this._model.author.id,"data-comment-id":this._model.id},children:[this.userView,{tag:"div",attributes:{class:["ck-comment__main","ck-annotation__main"]},children:[{tag:"div",attributes:{class:["ck-comment__info","ck-annotation__info"]},children:[{tag:"span",children:[{text:this.userView.name}],attributes:{class:["ck-comment__info-name","ck-annotation__info-name"]}},{tag:"time",attributes:{datetime:t.to("createdAt"),class:["ck-comment__info-time","ck-annotation__info-time"]},children:[{text:t.to("createdAt",(function(t){return e._config.formatDateTime(t)}))}]}]},{tag:"div",attributes:{class:["ck-comment__actions","ck-annotation__actions",t.if("isEditMode","ck-comment__actions--hidden"),t.if("isEditMode","ck-annotation__actions--hidden")]},children:[this.editButton,this.removeButton]},{tag:"div",attributes:{class:["ck-annotation__content-wrapper"]},children:this.visibleView}]}]}]}}},{key:"_createEditButton",value:function(){var e=this,t=this.locale.t,n=new zc(this.locale);return n.label=t("Edit"),n.icon=pc.pencil,n.extendTemplate({attributes:{class:"ck-comment--edit"}}),n.bind("isEnabled").to(this._model,"isReadOnly",(function(e){return!e})),n.bind("isVisible").to(this._model,"isEditable"),n.on("execute",(function(){return e.switchToEditMode()})),n}},{key:"_createRemoveButton",value:function(){var e=this,t=this.locale.t,n=new zc(this.locale);return n.label=t("Remove"),n.icon=dw.a,n.extendTemplate({attributes:{class:"ck-comment--remove"}}),n.bind("isEnabled").to(this._model,"isReadOnly",(function(e){return!e})),n.bind("isVisible").to(this._model,"isRemovable"),n.on("execute",(function(){e.showConfirm(t("Delete comment?"),e.element).then((function(){e.fire("removeComment",e._model.id)}))})),n}},{key:"_attachActions",value:function(e,t){var n=this;this.listenTo(e,"mouseenter",(function(){return n.actionIndicator=t})),this.listenTo(e,"focus",(function(){return n.actionIndicator=t})),this.listenTo(e,"mouseleave",(function(){return n.actionIndicator=null})),this.listenTo(e,"blur",(function(){return n.actionIndicator=null}))}},{key:"_createCommentInputView",value:function(){var e=_get3(_getPrototypeOf(n.prototype),"_createCommentInputView",this).call(this);return e.bind("placeholder").to(this),e}},{key:"render",value:function(){_get3(_getPrototypeOf(n.prototype),"render",this).call(this),this._attachActions(this.editButton.element,"edit"),this._attachActions(this.removeButton.element,"remove")}}]),n}(lw);function hw(e,t){if("PENDING_ACTION_COMMENT_THREAD"==t)return(0,e.t)({string:"Unsaved change in comment thread.",id:"PENDING_ACTION_COMMENT_THREAD"})}Object(u.default)(fw,Zb),n(380),n(382),n(384);var pw=["childList","observe","disconnect","attributeName","cancel","class","attributes"];!function(e,t){!function(t){for(;--t;)e.push(e.shift())}(++t)}(pw,434);var vw=function(e,t){return pw[e-=0]};function gw(e){var t=od(e,30),n=new MutationObserver((function(e){var n,r=_createForOfIteratorHelper(e);try{for(r.s();!(n=r.n()).done;){var i=n.value;(vw("0x6")==i.type&&vw("0x5")==i[vw("0x3")]||vw("0x0")==i.type)&&t()}}catch(o){r.e(o)}finally{r.f()}}));return{attach:function(e){n[vw("0x1")](e,{attributes:!0,childList:!0,subtree:!0})},detach:function(){n[vw("0x2")](),t[vw("0x4")]()}}}n(386);var mw=["setTemplate","keystrokes","targetRect","Esc","destroy","type","fire","element","focusTracker","focus","ck-rounded-corners","createCollection","_mutationObserver","listenTo","mainView","clear","length","content","render","bindTemplate","isDirty","detach","ck-annotation-wrapper--active","_updateHeight","isActive","div","set","ck-annotation-wrapper","add","height"];!function(e,t){!function(t){for(;--t;)e.push(e.shift())}(++t)}(mw,158);var yw=function(e,t){return mw[e-=0]},kw=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var i;_classCallCheck(this,n),(i=t.call(this,e)).id=Object(Sr.a)(),i[yw("0x0")]=new Ei,i[yw("0x17")]=new Ii,i[yw("0x17")][yw("0x12")](yw("0x19"),(function(e,t){return i[yw("0x1c")](yw("0x19"),t)})),i[yw("0x12")](yw("0x18"),{top:0,right:0,bottom:0,left:0}),i.set(yw("0x15"),0),i[yw("0x12")](yw("0x10"),!1),i[yw("0x12")](yw("0xc"),!1),i[yw("0x12")](yw("0x8"),0),i[yw("0x12")](yw("0x1b"),""),i._mutationObserver=gw((function(){return i[yw("0xf")]()})),i[yw("0x9")]=i[yw("0x3")](),i.content[yw("0x14")](r),i[yw("0x6")]=r;var o=i[yw("0xb")];return i[yw("0x16")]({tag:yw("0x11"),attributes:{class:["ck",yw("0x13"),yw("0x2"),o.if(yw("0x10"),yw("0xe"))],tabindex:-1},children:i[yw("0x9")]}),i}return _createClass(n,[{key:yw("0xa"),value:function(){_get3(_getPrototypeOf(n.prototype),"render",this).call(this),this[yw("0x0")][yw("0x14")](this.element),this[yw("0x17")][yw("0x5")](this[yw("0x1d")]),this._mutationObserver.attach(this[yw("0x1d")])}},{key:yw("0x1a"),value:function(){this[yw("0x9")][yw("0x7")](),this.keystrokes[yw("0x1a")](),this[yw("0x0")].destroy(),this[yw("0x4")][yw("0xd")](),_get3(_getPrototypeOf(n.prototype),"destroy",this).call(this)}},{key:yw("0x1"),value:function(){this[yw("0x1d")][yw("0x1")]()}},{key:"_updateHeight",value:function(){var e=this.element.clientHeight;e&&(this[yw("0x15")]=e)}}]),n}(kc),_w=["_assertCorrectTarget","updateTargetRect","stopListening","mainView","view","focusableElements","_target","clear","remove","_id","_type","isActive","focusTracker","element","targetRect","render","innerView","annotation-invalid-target","type","function","target"];!function(e,t){!function(t){for(;--t;)e.push(e.shift())}(++t)}(_w,267);var bw=function(e,t){return _w[e-=0]},ww=function(){function e(t){var n=this,r=t.view,i=t.target,o=t.type;_classCallCheck(this,e),this[bw("0xa")]=r,this.view.element||this[bw("0xa")][bw("0x0")](),this[bw("0x10")]=o,this[bw("0xc")]=i,this[bw("0x6")](),this[bw("0xb")]=new $e.default([this[bw("0xa")][bw("0x13")]],{idProperty:bw("0xf")}),this[bw("0xb")].on("add",(function(e,t){n[bw("0xa")][bw("0x12")].add(t)})),this[bw("0xb")].on(bw("0xe"),(function(e,t){n.view.focusTracker[bw("0xe")](t)}))}return _createClass(e,[{key:bw("0x3"),get:function(){return bw("0x4")==typeof this[bw("0x10")]?this[bw("0x10")]():this[bw("0x10")]}},{key:bw("0x1"),get:function(){return this[bw("0xa")][bw("0x9")]}},{key:bw("0x5"),get:function(){return bw("0x4")==typeof this[bw("0xc")]?this[bw("0xc")]():this._target}},{key:"targetRect",get:function(){var e=this[bw("0x5")];return this[bw("0x6")](),null===e?null:new bi(e)}},{key:bw("0x11"),get:function(){return this[bw("0xa")][bw("0x11")]}},{key:bw("0x11"),set:function(e){this[bw("0xa")][bw("0x11")]=e,this[bw("0xa")].mainView[bw("0x11")]=e}},{key:bw("0x7"),value:function(){this[bw("0xa")][bw("0x14")]=this.targetRect}},{key:"destroy",value:function(){this[bw("0xb")][bw("0x8")](),this[bw("0xb")][bw("0xd")]()}},{key:bw("0x6"),value:function(){var e=this[bw("0x5")];if(!(null===e||e instanceof bi||qe(e)))throw new Ke.default(bw("0x2"),null,{target:e})}}]),e}(),xw=["innerView","fire","top","view","add","has","refreshPositioning","clear","getByView","listenTo","focusTracker","annotationcollection-not-existing-item","_focusTracker","length","stopListening","max","from","remove","sort","targetRect","_sort","annotationcollection-duplicated-item","focusableElements","getIndex","updateTargetRect","focus","blur","destroy","isFocused","_getOrderInContent","_viewToAnnotation","get","left","delete","target","change:isFocused","_innerViewToAnnotation","set"];!function(e,t){!function(t){for(;--t;)e.push(e.shift())}(++t)}(xw,156);var Cw=function(e,t){return xw[e-=0]},Tw=function(e){_inherits(n,e);var t=_createSuper(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];_classCallCheck(this,n),(e=t.call(this))[Cw("0x20")]=new Map,e._viewToAnnotation=new Map,e[Cw("0x8")]=new Ei,e[Cw("0x8")].on(Cw("0x1f"),(function(t,n,r){r||e[Cw("0x23")](Cw("0x16"))}));var i,o=_createForOfIteratorHelper(r);try{for(o.s();!(i=o.n()).done;){var a=i.value;e.add(a)}}catch(s){o.e(s)}finally{o.f()}return e}return _createClass(n,[{key:Cw("0x18"),get:function(){return this[Cw("0x8")][Cw("0x18")]}},{key:"add",value:function(e){var t=this;if(this[Cw("0x1")](e))throw new Ke.default(Cw("0x11"),null);this._innerViewToAnnotation[Cw("0x21")](e[Cw("0x22")],e),this._viewToAnnotation.set(e[Cw("0x25")],e);var r,i=_createForOfIteratorHelper(e[Cw("0x12")]);try{for(i.s();!(r=i.n()).done;){var o=r.value;this._focusTracker[Cw("0x0")](o)}}catch(s){i.e(s)}finally{i.f()}this[Cw("0x5")](e[Cw("0x12")],"add",(function(e,n){t._focusTracker[Cw("0x0")](n)})),this[Cw("0x5")](e.focusableElements,Cw("0xd"),(function(e,n){t[Cw("0x8")][Cw("0xd")](n)})),this[Cw("0x5")](e[Cw("0x25")][Cw("0x6")],"change:isFocused",(function(n,r,i){i&&t[Cw("0x23")](Cw("0x15"),e)}));var a=this[Cw("0x19")](e);_get3(_getPrototypeOf(n.prototype),"add",this).call(this,e,a),e[Cw("0x14")]()}},{key:Cw("0xd"),value:function(e){if(!this.has(e))throw new Ke.default(Cw("0x7"),null);this[Cw("0xa")](e[Cw("0x25")][Cw("0x6")]),this[Cw("0xa")](e[Cw("0x12")]);var t,r=_createForOfIteratorHelper(e[Cw("0x12")]);try{for(r.s();!(t=r.n()).done;){var i=t.value;this[Cw("0x8")].remove(i)}}catch(o){r.e(o)}finally{r.f()}this[Cw("0x1a")][Cw("0x1d")](e[Cw("0x25")]),this[Cw("0x20")][Cw("0x1d")](e.innerView),_get3(_getPrototypeOf(n.prototype),Cw("0xd"),this).call(this,e)}},{key:"getByInnerView",value:function(e){return this[Cw("0x20")][Cw("0x1b")](e)}},{key:Cw("0x4"),value:function(e){return this[Cw("0x1a")][Cw("0x1b")](e)}},{key:Cw("0x17"),value:function(){_get3(_getPrototypeOf(n.prototype),Cw("0x3"),this).call(this),this[Cw("0xa")](),this[Cw("0x20")]=null,this[Cw("0x1a")]=null,this._focusTracker[Cw("0x17")]()}},{key:Cw("0x2"),value:function(){var e,t=_createForOfIteratorHelper(this);try{for(t.s();!(e=t.n()).done;){e.value[Cw("0x14")]()}}catch(n){t.e(n)}finally{t.f()}this[Cw("0x10")]()}},{key:Cw("0x10"),value:function(){for(var e=Array[Cw("0xc")](this)[Cw("0xe")]((function(e,t){return Aw(e[Cw("0xf")],t[Cw("0xf")])})),t=e[Cw("0x9")]-1;t>0;t--){var n=e[t];t!==this[Cw("0x13")](n)&&(this.remove(n),this[Cw("0x0")](n,t))}}},{key:Cw("0x19"),value:function(e){var t,n=0,r=_createForOfIteratorHelper(this);try{for(r.s();!(t=r.n()).done;){var i=t.value[Cw("0x1e")];if(i){if(Aw(e.targetRect,new bi(i))<0)return n;n++}}}catch(o){r.e(o)}finally{r.f()}return Math[Cw("0xb")](0,n)}}]),n}($e.default);function Aw(e,t){var n=e[Cw("0x24")]-t[Cw("0x24")];return 0==n?e[Cw("0x1c")]-t[Cw("0x1c")]:n}var Sw=["remove","delete","activeAnnotations","_removeActiveAnnotation","fire","activate","_activateAnnotation","_deactivateAllAnnotations","Annotations","add","_addActiveAnnotation","collection","getByInnerView","destroy","pluginName"];!function(e,t){!function(t){for(;--t;)e.push(e.shift())}(++t)}(Sw,433);var Ew=function(e,t){return Sw[e-=0]},Iw=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this,e)).collection=new Tw,r.set("activeAnnotations",new Set),r}return _createClass(n,[{key:"add",value:function(e){this[Ew("0xd")][Ew("0xb")](e)}},{key:Ew("0x2"),value:function(e){this[Ew("0xd")][Ew("0x2")](e),e[Ew("0x0")]()}},{key:Ew("0xe"),value:function(e){return this[Ew("0xd")][Ew("0xe")](e)}},{key:"deactivateAll",value:function(){this.fire(Ew("0x9"))}},{key:"destroy",value:function(){var e,t=_createForOfIteratorHelper(this[Ew("0xd")]);try{for(t.s();!(e=t.n()).done;){e.value[Ew("0x0")]()}}catch(r){t.e(r)}finally{t.f()}_get3(_getPrototypeOf(n.prototype),"destroy",this).call(this)}},{key:Ew("0x7"),value:function(e){this[Ew("0x6")](Ew("0x8"),e)}},{key:Ew("0xc"),value:function(e){var t=new Set(this[Ew("0x4")]);t[Ew("0xb")](e),this[Ew("0x4")]=t}},{key:Ew("0x5"),value:function(e){var t=new Set(this.activeAnnotations);t[Ew("0x3")](e),this[Ew("0x4")]=t}}],[{key:Ew("0x1"),get:function(){return Ew("0xa")}}]),n}(it),Ow=["PendingActions","commentsrepository-add-comment-user-not-exists","values","then","CommentsRepository","comments","resolve","deactivateAll","change:isDirty","activate","_addCommentThread","commentsrepository-fetch-comment-thread","Users","isRemovable","isEditable","getIndex","commentsrepository-update-comment-invalid-content","commentsrepository-invalid-comment-thread-id","commentsrepository-active-missing-comment-thread","commentsrepository-invalid-comment-authorid","innerView","commentsrepository-missing-thread-and-adapter-method","commentsrepository-remove-comment-missing-comment-thread","join","commentsrepository-missing-thread-and-adapter","init","_threadToController","commentsrepository-remove-missing-comment","threadId","_findOptimalIndex","now","plugins","_threads","commentsrepository-update-comment-internal-error","commentsrepository-get-comment-invalid-id","performance","_removeComment","charCodeAt","noChannel","change:activeAnnotations","getTime","error","licenseKey","destroy","from","commentsrepository-remove-comment-thread-internal-error","removeComment","reduce","indexOf","createdAt","commentsrepository-adapter-already-set","removeAttribute","commentsrepository-invalid-comment-content","isAttached","getUser","CommentThreadView","content","_addComment","updateComment","attachTo","attributes","_remove","comments.CommentThreadView","_detachCommentThread","activeCommentThread","comments.maxCommentsWhenCollapsed","add","commentsrepository-remove-comment-internal-error","_createCommentThreadView","commentThreadInputView","focus","delete","commentsrepository-invalid-commentid","setActiveCommentThread","pop","commentsrepository-add-comment-internal-error","locale","_attachCommentThread","_add","commentsrepository-missing-target","channelId","author","isFromAdapter","get","fromCharCode","openNewCommentThread","addCommentThread","removeCommentThread","find","hasCommentThread","fire","slice","set","has","_readOnlyChannels","stopListening","function","length","isDirty","replace","filter","string","charAt","weight","commentsrepository-active-not-attached","commentInputView","_updateComment","define","_removeCommentThread","comments.maxCommentCharsWhenCollapsed","adapter","commentsrepository-attach-missing-comment-thread","innerHTML","isActive","getByInnerView","max","assign","view","update","config","createElement","comments.maxThreadTotalWeight","pluginName","addComment","_repository","catch","_viewToController","commentsrepository-duplicated-comment-thread-id","once","comment","context","listenTo","getCommentThread","textContent","commentsrepository-remove-missing-comment-thread","change:createdAt","toJSON","bind","commentUpdated","getComment","map","PENDING_ACTION_COMMENT_THREAD","parse","isReadOnly","lowest","push","div","_adapter","getCommentThreads","model","_isAttached","remove"];!function(e,t){!function(t){for(;--t;)e.push(e.shift())}(++t)}(Ow,345);var Rw=function(e,t){return Ow[e-=0]},Pw=Symbol(Rw("0x95")),Mw=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;_classCallCheck(this,n),(r=t.call(this,e))._threads=new Map,r[Rw("0x89")]=new Map,r[Rw("0x55")]=new Map,r[Rw("0x35")]=new Set,r.licenseKey=r.context[Rw("0x4e")][Rw("0x2a")](Rw("0x1"));var i=r[Rw("0x59")].config;return i.define(Rw("0x18"),2),i[Rw("0x42")](Rw("0x50"),500),i.define(Rw("0x44"),140),i.define(Rw("0x15"),Xb),i[Rw("0x42")]("comments.CommentView",fw),r}return _createClass(n,[{key:Rw("0x88"),value:function(){var e=this,t=this[Rw("0x59")][Rw("0x8e")][Rw("0x2a")](Iw);this.set("activeCommentThread",null),this.on(Rw("0x2d"),(function(t,n){return e[Rw("0x79")](n)})),this.on(Rw("0x2e"),(function(t,n){return e[Rw("0x43")](n)})),this.on(Rw("0x52"),(function(t,n){return e[Rw("0x10")](n)})),this.on(Rw("0x11"),(function(t,n){return e[Rw("0x41")](n)})),this.on(Rw("0x5"),(function(t,n){return e._removeComment(n)})),this.on("addComment",(function(t,n){var r=n.threadId;if(!n.isFromAdapter){var i=e[Rw("0x5b")](r),o=e[Rw("0x89")][Rw("0x2a")](i);o&&o[Rw("0x4c")][Rw("0x1d")]()}}),{priority:Rw("0x67")}),this[Rw("0x5a")](t,Rw("0x96"),(function(t,n,r){var i=Array[Rw("0x3")](r).map((function(t){return e[Rw("0x55")].get(t[Rw("0x83")])}))[Rw("0x3b")](Boolean)[0];e[Rw("0x17")]=i?i[Rw("0x6c")]:null}))}},{key:"afterInit",value:function(){!function(e){var t=e instanceof rt,n=[1,85,78,115,198,255,50,112,83,87,161],r=d([52,48,52,50,48,56,52,50]),i=[127,34,6,211,167,86,146,199,132,160,18],o=d([65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,48,49,50,51,52,53,54,55,56,57]),a=function(t){if(e[d([112,108,117,103,105,110,115])][d([104,97,115])](d([87,101,98,83,111,99,107,101,116,71,97,116,101,119,97,121]))&&e[d([112,108,117,103,105,110,115])][d([103,101,116])](d([87,101,98,83,111,99,107,101,116,71,97,116,101,119,97,121]))[d([115,116,97,116,101])]==d([99,111,110,110,101,99,116,101,100]))return s(d([108,105,99,101,110,115,101,75,101,121,86,97,108,105,100]));if(e[d([112,108,117,103,105,110,115])][d([104,97,115])](d([84,114,97,99,107,67,104,97,110,103,101,115,68,97,116,97,71,101,116,116,101,114]))&&e[d([112,108,117,103,105,110,115])][d([103,101,116])](d([84,114,97,99,107,67,104,97,110,103,101,115,68,97,116,97,71,101,116,116,101,114]))[d([114,101,115,117,108,116])]==d([101,110,100]))return s(d([108,105,99,101,110,115,101,75,101,121,86,97,108,105,100]));try{var a=function(e){return function(e,t){var n=function(e){var t=o+d([43,47,61]);if(e=String(e)[Rw("0x3a")](/[\t\n\f\r ]+/g,""),!/^(?:[A-Za-z\d+/]{4})*?(?:[A-Za-z\d+/]{2}(?:==)?|[A-Za-z\d+/]{3}=?)?$/.test(e))throw new TypeError(d([70,97,105,108,101,100,32,116,111,32,112,97,114,115,101,32,98,97,115,101,54,52,32,116,111,32,115,116,114,105,110,103,46]));e+=d([61,61])[Rw("0x32")](2-(3&e[Rw("0x38")]));for(var n,r,i,a="",s=0;s<e[Rw("0x38")];)n=t[Rw("0x7")](e[Rw("0x3d")](s++))<<18|t.indexOf(e.charAt(s++))<<12|(r=t.indexOf(e[Rw("0x3d")](s++)))<<6|(i=t[Rw("0x7")](e[Rw("0x3d")](s++))),a+=64===r?String[Rw("0x2b")](n>>16&255):64===i?String[Rw("0x2b")](n>>16&255,n>>8&255):String[Rw("0x2b")](n>>16&255,n>>8&255,255&n);return a}(e),r=Array.from(function(e){for(var t=new Uint8Array(e[Rw("0x38")]),n=0;n<e[Rw("0x38")];n++)t[n]=e[Rw("0x94")](n);return t}(n)),i=r[Rw("0x21")](),a=r.pop();return function(e){var t,n="",r=_createForOfIteratorHelper(e);try{for(r.s();!(t=r.n()).done;){var i=t.value;n+=String[Rw("0x2b")](i)}}catch(o){r.e(o)}finally{r.f()}return n}(function(e,t,n){var r={};r[d([110,117,109,98,101,114,79,102,82,111,117,110,100,115])]={16:10,24:12,32:14},r[d([114,99,111,110])]=[1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145],r[d([83])]=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],r[d([84,49])]=[3328402341,4168907908,4000806809,4135287693,4294111757,3597364157,3731845041,2445657428,1613770832,33620227,3462883241,1445669757,3892248089,3050821474,1303096294,3967186586,2412431941,528646813,2311702848,4202528135,4026202645,2992200171,2387036105,4226871307,1101901292,3017069671,1604494077,1169141738,597466303,1403299063,3832705686,2613100635,1974974402,3791519004,1033081774,1277568618,1815492186,2118074177,4126668546,2211236943,1748251740,1369810420,3521504564,4193382664,3799085459,2883115123,1647391059,706024767,134480908,2512897874,1176707941,2646852446,806885416,932615841,168101135,798661301,235341577,605164086,461406363,3756188221,3454790438,1311188841,2142417613,3933566367,302582043,495158174,1479289972,874125870,907746093,3698224818,3025820398,1537253627,2756858614,1983593293,3084310113,2108928974,1378429307,3722699582,1580150641,327451799,2790478837,3117535592,0,3253595436,1075847264,3825007647,2041688520,3059440621,3563743934,2378943302,1740553945,1916352843,2487896798,2555137236,2958579944,2244988746,3151024235,3320835882,1336584933,3992714006,2252555205,2588757463,1714631509,293963156,2319795663,3925473552,67240454,4269768577,2689618160,2017213508,631218106,1269344483,2723238387,1571005438,2151694528,93294474,1066570413,563977660,1882732616,4059428100,1673313503,2008463041,2950355573,1109467491,537923632,3858759450,4260623118,3218264685,2177748300,403442708,638784309,3287084079,3193921505,899127202,2286175436,773265209,2479146071,1437050866,4236148354,2050833735,3362022572,3126681063,840505643,3866325909,3227541664,427917720,2655997905,2749160575,1143087718,1412049534,999329963,193497219,2353415882,3354324521,1807268051,672404540,2816401017,3160301282,369822493,2916866934,3688947771,1681011286,1949973070,336202270,2454276571,201721354,1210328172,3093060836,2680341085,3184776046,1135389935,3294782118,965841320,831886756,3554993207,4068047243,3588745010,2345191491,1849112409,3664604599,26054028,2983581028,2622377682,1235855840,3630984372,2891339514,4092916743,3488279077,3395642799,4101667470,1202630377,268961816,1874508501,4034427016,1243948399,1546530418,941366308,1470539505,1941222599,2546386513,3421038627,2715671932,3899946140,1042226977,2521517021,1639824860,227249030,260737669,3765465232,2084453954,1907733956,3429263018,2420656344,100860677,4160157185,470683154,3261161891,1781871967,2924959737,1773779408,394692241,2579611992,974986535,664706745,3655459128,3958962195,731420851,571543859,3530123707,2849626480,126783113,865375399,765172662,1008606754,361203602,3387549984,2278477385,2857719295,1344809080,2782912378,59542671,1503764984,160008576,437062935,1707065306,3622233649,2218934982,3496503480,2185314755,697932208,1512910199,504303377,2075177163,2824099068,1841019862,739644986],r[d([84,50])]=[2781242211,2230877308,2582542199,2381740923,234877682,3184946027,2984144751,1418839493,1348481072,50462977,2848876391,2102799147,434634494,1656084439,3863849899,2599188086,1167051466,2636087938,1082771913,2281340285,368048890,3954334041,3381544775,201060592,3963727277,1739838676,4250903202,3930435503,3206782108,4149453988,2531553906,1536934080,3262494647,484572669,2923271059,1783375398,1517041206,1098792767,49674231,1334037708,1550332980,4098991525,886171109,150598129,2481090929,1940642008,1398944049,1059722517,201851908,1385547719,1699095331,1587397571,674240536,2704774806,252314885,3039795866,151914247,908333586,2602270848,1038082786,651029483,1766729511,3447698098,2682942837,454166793,2652734339,1951935532,775166490,758520603,3000790638,4004797018,4217086112,4137964114,1299594043,1639438038,3464344499,2068982057,1054729187,1901997871,2534638724,4121318227,1757008337,0,750906861,1614815264,535035132,3363418545,3988151131,3201591914,1183697867,3647454910,1265776953,3734260298,3566750796,3903871064,1250283471,1807470800,717615087,3847203498,384695291,3313910595,3617213773,1432761139,2484176261,3481945413,283769337,100925954,2180939647,4037038160,1148730428,3123027871,3813386408,4087501137,4267549603,3229630528,2315620239,2906624658,3156319645,1215313976,82966005,3747855548,3245848246,1974459098,1665278241,807407632,451280895,251524083,1841287890,1283575245,337120268,891687699,801369324,3787349855,2721421207,3431482436,959321879,1469301956,4065699751,2197585534,1199193405,2898814052,3887750493,724703513,2514908019,2696962144,2551808385,3516813135,2141445340,1715741218,2119445034,2872807568,2198571144,3398190662,700968686,3547052216,1009259540,2041044702,3803995742,487983883,1991105499,1004265696,1449407026,1316239930,504629770,3683797321,168560134,1816667172,3837287516,1570751170,1857934291,4014189740,2797888098,2822345105,2754712981,936633572,2347923833,852879335,1133234376,1500395319,3084545389,2348912013,1689376213,3533459022,3762923945,3034082412,4205598294,133428468,634383082,2949277029,2398386810,3913789102,403703816,3580869306,2297460856,1867130149,1918643758,607656988,4049053350,3346248884,1368901318,600565992,2090982877,2632479860,557719327,3717614411,3697393085,2249034635,2232388234,2430627952,1115438654,3295786421,2865522278,3633334344,84280067,33027830,303828494,2747425121,1600795957,4188952407,3496589753,2434238086,1486471617,658119965,3106381470,953803233,334231800,3005978776,857870609,3151128937,1890179545,2298973838,2805175444,3056442267,574365214,2450884487,550103529,1233637070,4289353045,2018519080,2057691103,2399374476,4166623649,2148108681,387583245,3664101311,836232934,3330556482,3100665960,3280093505,2955516313,2002398509,287182607,3413881008,4238890068,3597515707,975967766],r[d([84,51])]=[1671808611,2089089148,2006576759,2072901243,4061003762,1807603307,1873927791,3310653893,810573872,16974337,1739181671,729634347,4263110654,3613570519,2883997099,1989864566,3393556426,2191335298,3376449993,2106063485,4195741690,1508618841,1204391495,4027317232,2917941677,3563566036,2734514082,2951366063,2629772188,2767672228,1922491506,3227229120,3082974647,4246528509,2477669779,644500518,911895606,1061256767,4144166391,3427763148,878471220,2784252325,3845444069,4043897329,1905517169,3631459288,827548209,356461077,67897348,3344078279,593839651,3277757891,405286936,2527147926,84871685,2595565466,118033927,305538066,2157648768,3795705826,3945188843,661212711,2999812018,1973414517,152769033,2208177539,745822252,439235610,455947803,1857215598,1525593178,2700827552,1391895634,994932283,3596728278,3016654259,695947817,3812548067,795958831,2224493444,1408607827,3513301457,0,3979133421,543178784,4229948412,2982705585,1542305371,1790891114,3410398667,3201918910,961245753,1256100938,1289001036,1491644504,3477767631,3496721360,4012557807,2867154858,4212583931,1137018435,1305975373,861234739,2241073541,1171229253,4178635257,33948674,2139225727,1357946960,1011120188,2679776671,2833468328,1374921297,2751356323,1086357568,2408187279,2460827538,2646352285,944271416,4110742005,3168756668,3066132406,3665145818,560153121,271589392,4279952895,4077846003,3530407890,3444343245,202643468,322250259,3962553324,1608629855,2543990167,1154254916,389623319,3294073796,2817676711,2122513534,1028094525,1689045092,1575467613,422261273,1939203699,1621147744,2174228865,1339137615,3699352540,577127458,712922154,2427141008,2290289544,1187679302,3995715566,3100863416,339486740,3732514782,1591917662,186455563,3681988059,3762019296,844522546,978220090,169743370,1239126601,101321734,611076132,1558493276,3260915650,3547250131,2901361580,1655096418,2443721105,2510565781,3828863972,2039214713,3878868455,3359869896,928607799,1840765549,2374762893,3580146133,1322425422,2850048425,1823791212,1459268694,4094161908,3928346602,1706019429,2056189050,2934523822,135794696,3134549946,2022240376,628050469,779246638,472135708,2800834470,3032970164,3327236038,3894660072,3715932637,1956440180,522272287,1272813131,3185336765,2340818315,2323976074,1888542832,1044544574,3049550261,1722469478,1222152264,50660867,4127324150,236067854,1638122081,895445557,1475980887,3117443513,2257655686,3243809217,489110045,2662934430,3778599393,4162055160,2561878936,288563729,1773916777,3648039385,2391345038,2493985684,2612407707,505560094,2274497927,3911240169,3460925390,1442818645,678973480,3749357023,2358182796,2717407649,2306869641,219617805,3218761151,3862026214,1120306242,1756942440,1103331905,2578459033,762796589,252780047,2966125488,1425844308,3151392187,372911126],r[d([84,52])]=[1667474886,2088535288,2004326894,2071694838,4075949567,1802223062,1869591006,3318043793,808472672,16843522,1734846926,724270422,4278065639,3621216949,2880169549,1987484396,3402253711,2189597983,3385409673,2105378810,4210693615,1499065266,1195886990,4042263547,2913856577,3570689971,2728590687,2947541573,2627518243,2762274643,1920112356,3233831835,3082273397,4261223649,2475929149,640051788,909531756,1061110142,4160160501,3435941763,875846760,2779116625,3857003729,4059105529,1903268834,3638064043,825316194,353713962,67374088,3351728789,589522246,3284360861,404236336,2526454071,84217610,2593830191,117901582,303183396,2155911963,3806477791,3958056653,656894286,2998062463,1970642922,151591698,2206440989,741110872,437923380,454765878,1852748508,1515908788,2694904667,1381168804,993742198,3604373943,3014905469,690584402,3823320797,791638366,2223281939,1398011302,3520161977,0,3991743681,538992704,4244381667,2981218425,1532751286,1785380564,3419096717,3200178535,960056178,1246420628,1280103576,1482221744,3486468741,3503319995,4025428677,2863326543,4227536621,1128514950,1296947098,859002214,2240123921,1162203018,4193849577,33687044,2139062782,1347481760,1010582648,2678045221,2829640523,1364325282,2745433693,1077985408,2408548869,2459086143,2644360225,943212656,4126475505,3166494563,3065430391,3671750063,555836226,269496352,4294908645,4092792573,3537006015,3452783745,202118168,320025894,3974901699,1600119230,2543297077,1145359496,387397934,3301201811,2812801621,2122220284,1027426170,1684319432,1566435258,421079858,1936954854,1616945344,2172753945,1330631070,3705438115,572679748,707427924,2425400123,2290647819,1179044492,4008585671,3099120491,336870440,3739122087,1583276732,185277718,3688593069,3772791771,842159716,976899700,168435220,1229577106,101059084,606366792,1549591736,3267517855,3553849021,2897014595,1650632388,2442242105,2509612081,3840161747,2038008818,3890688725,3368567691,926374254,1835907034,2374863873,3587531953,1313788572,2846482505,1819063512,1448540844,4109633523,3941213647,1701162954,2054852340,2930698567,134748176,3132806511,2021165296,623210314,774795868,471606328,2795958615,3031746419,3334885783,3907527627,3722280097,1953799400,522133822,1263263126,3183336545,2341176845,2324333839,1886425312,1044267644,3048588401,1718004428,1212733584,50529542,4143317495,235803164,1633788866,892690282,1465383342,3115962473,2256965911,3250673817,488449850,2661202215,3789633753,4177007595,2560144171,286339874,1768537042,3654906025,2391705863,2492770099,2610673197,505291324,2273808917,3924369609,3469625735,1431699370,673740880,3755965093,2358021891,2711746649,2307489801,218961690,3217021541,3873845719,1111672452,1751693520,1094828930,2576986153,757954394,252645662,2964376443,1414855848,3149649517,370555436],r[d([85,49])]=[0,235474187,470948374,303765277,941896748,908933415,607530554,708780849,1883793496,2118214995,1817866830,1649639237,1215061108,1181045119,1417561698,1517767529,3767586992,4003061179,4236429990,4069246893,3635733660,3602770327,3299278474,3400528769,2430122216,2664543715,2362090238,2193862645,2835123396,2801107407,3035535058,3135740889,3678124923,3576870512,3341394285,3374361702,3810496343,3977675356,4279080257,4043610186,2876494627,2776292904,3076639029,3110650942,2472011535,2640243204,2403728665,2169303058,1001089995,899835584,666464733,699432150,59727847,226906860,530400753,294930682,1273168787,1172967064,1475418501,1509430414,1942435775,2110667444,1876241833,1641816226,2910219766,2743034109,2976151520,3211623147,2505202138,2606453969,2302690252,2269728455,3711829422,3543599269,3240894392,3475313331,3843699074,3943906441,4178062228,4144047775,1306967366,1139781709,1374988112,1610459739,1975683434,2076935265,1775276924,1742315127,1034867998,866637845,566021896,800440835,92987698,193195065,429456164,395441711,1984812685,2017778566,1784663195,1683407248,1315562145,1080094634,1383856311,1551037884,101039829,135050206,437757123,337553864,1042385657,807962610,573804783,742039012,2531067453,2564033334,2328828971,2227573024,2935566865,2700099354,3001755655,3168937228,3868552805,3902563182,4203181171,4102977912,3736164937,3501741890,3265478751,3433712980,1106041591,1340463100,1576976609,1408749034,2043211483,2009195472,1708848333,1809054150,832877231,1068351396,766945465,599762354,159417987,126454664,361929877,463180190,2709260871,2943682380,3178106961,3009879386,2572697195,2538681184,2236228733,2336434550,3509871135,3745345300,3441850377,3274667266,3910161971,3877198648,4110568485,4211818798,2597806476,2497604743,2261089178,2295101073,2733856160,2902087851,3202437046,2968011453,3936291284,3835036895,4136440770,4169408201,3535486456,3702665459,3467192302,3231722213,2051518780,1951317047,1716890410,1750902305,1113818384,1282050075,1584504582,1350078989,168810852,67556463,371049330,404016761,841739592,1008918595,775550814,540080725,3969562369,3801332234,4035489047,4269907996,3569255213,3669462566,3366754619,3332740144,2631065433,2463879762,2160117071,2395588676,2767645557,2868897406,3102011747,3069049960,202008497,33778362,270040487,504459436,875451293,975658646,675039627,641025152,2084704233,1917518562,1615861247,1851332852,1147550661,1248802510,1484005843,1451044056,933301370,967311729,733156972,632953703,260388950,25965917,328671808,496906059,1206477858,1239443753,1543208500,1441952575,2144161806,1908694277,1675577880,1842759443,3610369226,3644379585,3408119516,3307916247,4011190502,3776767469,4077384432,4245618683,2809771154,2842737049,3144396420,3043140495,2673705150,2438237621,2203032232,2370213795],r[d([85,50])]=[0,185469197,370938394,487725847,741876788,657861945,975451694,824852259,1483753576,1400783205,1315723890,1164071807,1950903388,2135319889,1649704518,1767536459,2967507152,3152976349,2801566410,2918353863,2631447780,2547432937,2328143614,2177544179,3901806776,3818836405,4270639778,4118987695,3299409036,3483825537,3535072918,3652904859,2077965243,1893020342,1841768865,1724457132,1474502543,1559041666,1107234197,1257309336,598438867,681933534,901210569,1052338372,261314535,77422314,428819965,310463728,3409685355,3224740454,3710368113,3593056380,3875770207,3960309330,4045380933,4195456072,2471224067,2554718734,2237133081,2388260884,3212035895,3028143674,2842678573,2724322336,4138563181,4255350624,3769721975,3955191162,3667219033,3516619604,3431546947,3347532110,2933734917,2782082824,3099667487,3016697106,2196052529,2313884476,2499348523,2683765030,1179510461,1296297904,1347548327,1533017514,1786102409,1635502980,2087309459,2003294622,507358933,355706840,136428751,53458370,839224033,957055980,605657339,790073846,2373340630,2256028891,2607439820,2422494913,2706270690,2856345839,3075636216,3160175349,3573941694,3725069491,3273267108,3356761769,4181598602,4063242375,4011996048,3828103837,1033297158,915985419,730517276,545572369,296679730,446754879,129166120,213705253,1709610350,1860738147,1945798516,2029293177,1239331162,1120974935,1606591296,1422699085,4148292826,4233094615,3781033664,3931371469,3682191598,3497509347,3446004468,3328955385,2939266226,2755636671,3106780840,2988687269,2198438022,2282195339,2501218972,2652609425,1201765386,1286567175,1371368976,1521706781,1805211710,1620529459,2105887268,1988838185,533804130,350174575,164439672,46346101,870912086,954669403,636813900,788204353,2358957921,2274680428,2592523643,2441661558,2695033685,2880240216,3065962831,3182487618,3572145929,3756299780,3270937875,3388507166,4174560061,4091327024,4006521127,3854606378,1014646705,930369212,711349675,560487590,272786309,457992840,106852767,223377554,1678381017,1862534868,1914052035,2031621326,1211247597,1128014560,1580087799,1428173050,32283319,182621114,401639597,486441376,768917123,651868046,1003007129,818324884,1503449823,1385356242,1333838021,1150208456,1973745387,2125135846,1673061617,1756818940,2970356327,3120694122,2802849917,2887651696,2637442643,2520393566,2334669897,2149987652,3917234703,3799141122,4284502037,4100872472,3309594171,3460984630,3545789473,3629546796,2050466060,1899603969,1814803222,1730525723,1443857720,1560382517,1075025698,1260232239,575138148,692707433,878443390,1062597235,243256656,91341917,409198410,325965383,3403100636,3252238545,3704300486,3620022987,3874428392,3990953189,4042459122,4227665663,2460449204,2578018489,2226875310,2411029155,3198115200,3046200461,2827177882,2743944855],r[d([85,51])]=[0,218828297,437656594,387781147,875313188,958871085,775562294,590424639,1750626376,1699970625,1917742170,2135253587,1551124588,1367295589,1180849278,1265195639,3501252752,3720081049,3399941250,3350065803,3835484340,3919042237,4270507174,4085369519,3102249176,3051593425,2734591178,2952102595,2361698556,2177869557,2530391278,2614737639,3145456443,3060847922,2708326185,2892417312,2404901663,2187128086,2504130317,2555048196,3542330227,3727205754,3375740769,3292445032,3876557655,3926170974,4246310725,4027744588,1808481195,1723872674,1910319033,2094410160,1608975247,1391201670,1173430173,1224348052,59984867,244860394,428169201,344873464,935293895,984907214,766078933,547512796,1844882806,1627235199,2011214180,2062270317,1507497298,1423022939,1137477952,1321699145,95345982,145085239,532201772,313773861,830661914,1015671571,731183368,648017665,3175501286,2957853679,2807058932,2858115069,2305455554,2220981195,2474404304,2658625497,3575528878,3625268135,3473416636,3254988725,3778151818,3963161475,4213447064,4130281361,3599595085,3683022916,3432737375,3247465558,3802222185,4020912224,4172763771,4122762354,3201631749,3017672716,2764249623,2848461854,2331590177,2280796200,2431590963,2648976442,104699613,188127444,472615631,287343814,840019705,1058709744,671593195,621591778,1852171925,1668212892,1953757831,2037970062,1514790577,1463996600,1080017571,1297403050,3673637356,3623636965,3235995134,3454686199,4007360968,3822090177,4107101658,4190530515,2997825956,3215212461,2830708150,2779915199,2256734592,2340947849,2627016082,2443058075,172466556,122466165,273792366,492483431,1047239e3,861968209,612205898,695634755,1646252340,1863638845,2013908262,1963115311,1446242576,1530455833,1277555970,1093597963,1636604631,1820824798,2073724613,1989249228,1436590835,1487645946,1337376481,1119727848,164948639,81781910,331544205,516552836,1039717051,821288114,669961897,719700128,2973530695,3157750862,2871682645,2787207260,2232435299,2283490410,2667994737,2450346104,3647212047,3564045318,3279033885,3464042516,3980931627,3762502690,4150144569,4199882800,3070356634,3121275539,2904027272,2686254721,2200818878,2384911031,2570832044,2486224549,3747192018,3528626907,3310321856,3359936201,3950355702,3867060991,4049844452,4234721005,1739656202,1790575107,2108100632,1890328081,1402811438,1586903591,1233856572,1149249077,266959938,48394827,369057872,418672217,1002783846,919489135,567498868,752375421,209336225,24197544,376187827,459744698,945164165,895287692,574624663,793451934,1679968233,1764313568,2117360635,1933530610,1343127501,1560637892,1243112415,1192455638,3704280881,3519142200,3336358691,3419915562,3907448597,3857572124,4075877127,4294704398,3029510009,3113855344,2927934315,2744104290,2159976285,2377486676,2594734927,2544078150],r[d([85,52])]=[0,151849742,303699484,454499602,607398968,758720310,908999204,1059270954,1214797936,1097159550,1517440620,1400849762,1817998408,1699839814,2118541908,2001430874,2429595872,2581445614,2194319100,2345119218,3034881240,3186202582,2801699524,2951971274,3635996816,3518358430,3399679628,3283088770,4237083816,4118925222,4002861748,3885750714,1002142683,850817237,698445255,548169417,529487843,377642221,227885567,77089521,1943217067,2061379749,1640576439,1757691577,1474760595,1592394909,1174215055,1290801793,2875968315,2724642869,3111247143,2960971305,2405426947,2253581325,2638606623,2487810577,3808662347,3926825029,4044981591,4162096729,3342319475,3459953789,3576539503,3693126241,1986918061,2137062819,1685577905,1836772287,1381620373,1532285339,1078185097,1229899655,1040559837,923313619,740276417,621982671,439452389,322734571,137073913,19308535,3871163981,4021308739,4104605777,4255800159,3263785589,3414450555,3499326569,3651041127,2933202493,2815956275,3167684641,3049390895,2330014213,2213296395,2566595609,2448830231,1305906550,1155237496,1607244650,1455525988,1776460110,1626319424,2079897426,1928707164,96392454,213114376,396673818,514443284,562755902,679998e3,865136418,983426092,3708173718,3557504664,3474729866,3323011204,4180808110,4030667424,3945269170,3794078908,2507040230,2623762152,2272556026,2390325492,2975484382,3092726480,2738905026,2857194700,3973773121,3856137295,4274053469,4157467219,3371096953,3252932727,3673476453,3556361835,2763173681,2915017791,3064510765,3215307299,2156299017,2307622919,2459735317,2610011675,2081048481,1963412655,1846563261,1729977011,1480485785,1362321559,1243905413,1126790795,878845905,1030690015,645401037,796197571,274084841,425408743,38544885,188821243,3613494426,3731654548,3313212038,3430322568,4082475170,4200115116,3780097726,3896688048,2668221674,2516901860,2366882550,2216610296,3141400786,2989552604,2837966542,2687165888,1202797690,1320957812,1437280870,1554391400,1669664834,1787304780,1906247262,2022837584,265905162,114585348,499347990,349075736,736970802,585122620,972512814,821712160,2595684844,2478443234,2293045232,2174754046,3196267988,3079546586,2895723464,2777952454,3537852828,3687994002,3234156416,3385345166,4142626212,4293295786,3841024952,3992742070,174567692,57326082,410887952,292596766,777231668,660510266,1011452712,893681702,1108339068,1258480242,1343618912,1494807662,1715193156,1865862730,1948373848,2100090966,2701949495,2818666809,3004591147,3122358053,2235061775,2352307457,2535604243,2653899549,3915653703,3764988233,4219352155,4067639125,3444575871,3294430577,3746175075,3594982253,836553431,953270745,600235211,718002117,367585007,484830689,133361907,251657213,2041877159,1891211689,1806599355,1654886325,1568718495,1418573201,1335535747,1184342925];for(var i=new Uint8Array(16),o=15;o>=0;--o)i[o]=n%256,n=parseInt(n/256);var a=null,s=16,c=new Uint8Array(t),l=[],u=[];!function(){for(var e=r[d([110,117,109,98,101,114,79,102,82,111,117,110,100,115])][c.length],t=0;t<=e;t++)l[Rw("0x68")]([0,0,0,0]),u[Rw("0x68")]([0,0,0,0]);for(var n,i=4*(e+1),o=c[Rw("0x38")]/4,a=h(c),s=0;s<o;s++)l[n=s>>2][s%4]=a[s],u[e-n][s%4]=a[s];for(var f,p=0,v=o;v<i;){f=a[o-1],a[0]^=r[d([83])][f>>16&255]<<24^r[d([83])][f>>8&255]<<16^r[d([83])][255&f]<<8^r[d([83])][f>>24&255]^r[d([114,99,111,110])][p]<<24,p+=1;for(var g=1;g<o/2;g++)a[g]^=a[g-1];f=a[o/2-1],a[o/2]^=r[d([83])][255&f]^r[d([83])][f>>8&255]<<8^r[d([83])][f>>16&255]<<16^r[d([83])][f>>24&255]<<24;for(var m=o/2+1;m<o;m++)a[m]^=a[m-1];for(var y=void 0,k=void 0,_=0;_<o&&v<i;)k=v%4,l[y=v>>2][k]=a[_],u[e-y][k]=a[_++],v++}for(var b=1;b<e;b++)for(var w=0;w<4;w++)f=u[b][w],u[b][w]=r[d([85,49])][f>>24&255]^r[d([85,50])][f>>16&255]^r[d([85,51])][f>>8&255]^r[d([85,52])][255&f]}();for(var f=0;f<e.length;f++)16===s&&(a=v(i),s=0,p(i)),e[f]^=a[s++];return e;function h(e){for(var t=[],n=0;n<e[Rw("0x38")];n+=4)t[Rw("0x68")](e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3]);return t}function p(e){for(var t=15;t>=0;t--){if(255!==e[t]){e[t]++;break}e[t]=0}}function v(e){for(var t=l[Rw("0x38")]-1,n=[0,0,0,0],i=h(e),o=0;o<4;o++)i[o]^=l[0][o];for(var a=1;a<t;a++){for(var s=0;s<4;s++)n[s]=r[d([84,49])][i[s]>>24&255]^r[d([84,50])][i[(s+1)%4]>>16&255]^r[d([84,51])][i[(s+2)%4]>>8&255]^r[d([84,52])][255&i[(s+3)%4]]^l[a][s];i=n[Rw("0x32")]()}for(var c,u=new Uint8Array(16),f=0;f<4;f++)c=l[t][f],u[4*f]=255&(r[d([83])][i[f]>>24&255]^c>>24),u[4*f+1]=255&(r[d([83])][i[(f+1)%4]>>16&255]^c>>16),u[4*f+2]=255&(r[d([83])][i[(f+2)%4]>>8&255]^c>>8),u[4*f+3]=255&(r[d([83])][255&i[(f+3)%4]]^c);return u}}(r,t,a+256*i))}(e,new(window[d([85,105,110,116,56,65,114,114,97,121])])([].concat(n,[29,221,175,90,231,133,239,240,75,180],i)))}(t),c=JSON[Rw("0x65")](a),l=parseInt(c[d([49])]),u=parseInt(c[d([51])]),f=parseInt(c[d([52])])||0,h=parseInt(c[d([53])])||0;if(!(1&f)||e[d([112,108,117,103,105,110,115])][d([104,97,115])](d([84,114,97,99,107,67,104,97,110,103,101,115,69,100,105,116,105,110,103]))&&!(2&f))return s(d([108,105,99,101,110,115,101,75,101,121,73,110,118,97,108,105,100]));if(h&&!window[d([111,112,101,110])][d([99,108,111,115,101,100])])return s(d([108,105,99,101,110,115,101,75,101,121,73,110,118,97,108,105,100]));if(parseInt(r)/2>l)return s(d([108,105,99,101,110,115,101,75,101,121,73,110,118,97,108,105,100]));if(e[d([112,108,117,103,105,110,115])][d([104,97,115])](d([84,114,97,99,107,67,104,97,110,103,101,115,69,100,105,116,105,110,103]))){var p=e[d([112,108,117,103,105,110,115])][d([103,101,116])](d([84,114,97,99,107,67,104,97,110,103,101,115,69,100,105,116,105,110,103]));if(parseInt(p[d([95,101,120,101,99,117,116,101,83,117,103,103,101,115,116,105,111,110])])/2>l)return s(d([108,105,99,101,110,115,101,75,101,121,73,110,118,97,108,105,100]))}return s(d(u?[108,105,99,101,110,115,101,75,101,121,84,114,105,97,108]:[108,105,99,101,110,115,101,75,101,121,86,97,108,105,100]))}catch(e){return s(d([108,105,99,101,110,115,101,75,101,121,73,110,118,97,108,105,100]))}}(e[Rw("0x4e")][Rw("0x2a")](d([108,105,99,101,110,115,101,75,101,121])));function s(t){var n=function(){for(var e=String(window[Rw("0x92")][Rw("0x8d")]()).replace(d([46]),""),t="",n=0;n<e[Rw("0x38")];n+=2){var r=parseInt(e.substring(n,n+2));r>=o[Rw("0x38")]&&(r-=o.length),t+=o[r]}return t}();return e[n]=t,t}function c(e){var t,n=_createForOfIteratorHelper(e[d([101,100,105,116,111,114,115])]);try{for(n.s();!(t=n.n()).done;){l(t.value)}}catch(r){n.e(r)}finally{n.f()}e[d([112,108,117,103,105,110,115])][d([103,101,116])](d([67,111,109,109,101,110,116,115,82,101,112,111,115,105,116,111,114,121]))[d([115,119,105,116,99,104,82,101,97,100,79,110,108,121])](!0),e[d([112,108,117,103,105,110,115])][d([103,101,116])](d([67,111,109,109,101,110,116,115,82,101,112,111,115,105,116,111,114,121]))[d([115,119,105,116,99,104,82,101,97,100,79,110,108,121])]=u}function l(e){function t(){e[d([109,111,100,101,108])][d([99,104,97,110,103,101])]=u,e[d([109,111,100,101,108])][d([101,110,113,117,101,117,101,67,104,97,110,103,101])]=u,e[d([105,115,82,101,97,100,79,110,108,121])]=!0}e[d([115,116,97,116,101])]==d([114,101,97,100,121])?t():e[d([111,110,99,101])](d([114,101,97,100,121]),(function(){return t()}))}function u(){return null}function d(e){return e[Rw("0x63")]((function(e){return String[Rw("0x2b")](e)}))[Rw("0x86")]("")}t?(a==d([108,105,99,101,110,115,101,75,101,121,73,110,118,97,108,105,100])?c(e):a==d([108,105,99,101,110,115,101,75,101,121,84,114,105,97,108])&&window[d([115,101,116,84,105,109,101,111,117,116])]((function(){c(e),s(d([108,105,99,101,110,115,101,75,101,121,84,114,105,97,108,76,105,109,105,116]))}),i[6]*n[8]*n[6]),e[d([101,100,105,116,111,114,115])][d([111,110])](d([97,100,100]),(function(e,t){a!=d([108,105,99,101,110,115,101,75,101,121,73,110,118,97,108,105,100])&&a!=d([108,105,99,101,110,115,101,75,101,121,84,114,105,97,108,76,105,109,105,116])||l(t)}))):a==d([108,105,99,101,110,115,101,75,101,121,73,110,118,97,108,105,100])?l(e):a==d([108,105,99,101,110,115,101,75,101,121,84,114,105,97,108])&&e[d([111,110])](d([114,101,97,100,121]),(function(){var t=0;e[d([109,111,100,101,108])][d([111,110])](d([97,112,112,108,121,79,112,101,114,97,116,105,111,110]),(function(n,r){r[0][d([105,115,68,111,99,117,109,101,110,116,79,112,101,114,97,116,105,111,110])]&&t++,504===t&&(l(e),s(d([108,105,99,101,110,115,101,75,101,121,84,114,105,97,108,76,105,109,105,116])),n[d([111,102,102])]())}),{priority:d([104,105,103,104,101,115,116])})}))}(this.context)}},{key:Rw("0x45"),set:function(e){if(this[Rw("0x6a")])throw new Ke.default(Rw("0x9"));this._adapter=e}},{key:Rw("0x45"),get:function(){return this[Rw("0x6a")]}},{key:Rw("0x2d"),value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.channelId,n=void 0===t?Pw:t,r=e.threadId,i=void 0===r?Object(Sr.a)():r,o=e.comments,a=void 0===o?[]:o,s=e.target,c=e.isFromAdapter;return this[Rw("0x31")](Fw(Rw("0x2d"),n),{channelId:n,threadId:i,comments:a,target:s,isFromAdapter:c}),this[Rw("0x5b")](i)}},{key:Rw("0x2c"),value:function(e){var t=e.channelId,n=void 0===t?Pw:t,r=e.threadId,i=void 0===r?Object(Sr.a)():r,o=e.target;if(!this._readOnlyChannels.has(n)&&!this[Rw("0x35")][Rw("0x34")](void 0)){if(!o)throw new Ke.default(Rw("0x26"));var a=this.addCommentThread({channelId:n,threadId:i,target:o});if(!a)return null;var s=this[Rw("0x89")].get(a),c=s.view[Rw("0x1c")][Rw("0x40")],l=this[Rw("0x59")][Rw("0x8e")][Rw("0x2a")](Iw),u=l[Rw("0x49")](s.view);return l[Rw("0x78")](u),c[Rw("0x57")]("editorReady",(function(){return c.focus()})),a}}},{key:Rw("0x30"),value:function(e){if("string"!=typeof e)throw new Ke.default("commentsrepository-invalid-comment-thread-id");return this[Rw("0x8f")][Rw("0x34")](e)}},{key:Rw("0x5b"),value:function(e){if("string"!=typeof e)throw new Ke.default(Rw("0x80"));return this._threads[Rw("0x2a")](e)}},{key:"fetchCommentThread",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.channelId,r=t.threadId,i=this[Rw("0x5b")](r);if(i)return Promise[Rw("0x75")](i);if(!this.adapter)throw new Ke.default(Rw("0x87"),this[Rw("0x59")]);if("function"!=typeof this[Rw("0x45")][Rw("0x5b")])throw new Ke.default(Rw("0x84"),this[Rw("0x59")]);return this.adapter[Rw("0x5b")]({channelId:n,threadId:r})[Rw("0x72")]((function(t){return e[Rw("0x30")](r)?e.getCommentThread(r):t?e[Rw("0x2d")](Object[Rw("0x4b")]({isFromAdapter:!0,channelId:n},t)):void 0}))[Rw("0x54")]((function(t){throw console[Rw("0x0")](t),new Ke.default(Rw("0x7a"),e[Rw("0x59")])}))}},{key:Rw("0x6b"),value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.channelId,r=t.skipNotAttached,i=void 0!==r&&r,o=t.skipEmpty,a=void 0!==o&&o,s=t.toJSON,c=void 0!==s&&s,l=[],u=_createForOfIteratorHelper(this._threads[Rw("0x71")]());try{for(u.s();!(e=u.n()).done;){var d=e.value;n&&d.channelId!==n||i&&!d[Rw("0xc")]||a&&0===d[Rw("0x38")]||l[Rw("0x68")](d)}}catch(f){u.e(f)}finally{u.f()}return c?l[Rw("0x63")]((function(e){return e[Rw("0x5f")]()})):l}},{key:Rw("0x20"),value:function(e){var t=this.context.plugins.get(Iw);if(e){var n=this.getCommentThread(e);if(!n)throw new Ke.default(Rw("0x81"),null,{threadId:e});if(!this[Rw("0x89")][Rw("0x34")](n))throw new Ke.default(Rw("0x3f"),null,{threadId:e});var r=t[Rw("0x49")](this._threadToController[Rw("0x2a")](n)[Rw("0x4c")]);t[Rw("0x78")](r)}else this[Rw("0x17")]&&t[Rw("0x76")]()}},{key:"switchReadOnly",value:function(e,t){e?this[Rw("0x35")][Rw("0x19")](t):this[Rw("0x35")][Rw("0x1e")](t);var n,r=_createForOfIteratorHelper(this[Rw("0x6b")]({channelId:t}));try{for(r.s();!(n=r.n()).done;){n.value.isReadOnly=!!e}}catch(i){r.e(i)}finally{r.f()}}},{key:Rw("0x79"),value:function(e){var t=e.channelId,n=e.threadId,r=e.comments,i=e.target,o=e.isFromAdapter;if(Rw("0x3c")!=typeof n)throw new Ke.default("commentsrepository-invalid-comment-thread-id",null,{threadId:n});if(this.hasCommentThread(n))throw new Ke.default(Rw("0x56"),null,{threadId:n});var a=new Nw(this,{channelId:t,id:n});(this._readOnlyChannels[Rw("0x34")](t)||this[Rw("0x35")][Rw("0x34")](void 0))&&(a.isReadOnly=!0),this[Rw("0x8f")].set(n,a);var s,c=_createForOfIteratorHelper(r);try{for(c.s();!(s=c.n()).done;){var l=s.value;a[Rw("0x52")](Object[Rw("0x4b")]({isFromAdapter:o},l))}}catch(u){c.e(u)}finally{c.f()}i&&a[Rw("0x12")](i)}},{key:Rw("0x24"),value:function(e){var t=this,n=e.threadId,r=e.target,i=this.getCommentThread(n);if(!i)throw new Ke.default(Rw("0x46"),this);var o=this[Rw("0x59")].plugins[Rw("0x2a")](Rw("0x6f")),a=this[Rw("0x59")][Rw("0x8e")][Rw("0x2a")](Iw),s=this[Rw("0x1b")](i),c=new L_(i,s),l=null;s.on(Rw("0x77"),(function(e,n,r){r?l=o[Rw("0x19")](hw(t[Rw("0x59")][Rw("0x23")],Rw("0x64"))):(o[Rw("0x6e")](l),l=null)})),this._threadToController.set(i,c),this[Rw("0x55")][Rw("0x33")](s,c);var u=new kw(this[Rw("0x59")][Rw("0x23")],s);u[Rw("0x60")](Rw("0x38")).to(s),u[Rw("0x60")](Rw("0x39")).to(s,Rw("0x39"),s,Rw("0x38"),(function(e,t){return e||!t})),u.bind(Rw("0x48")).to(s),u.type=Rw("0x58");var d=new ww({view:u,target:r,type:Rw("0x58")});a.add(d)}},{key:"_createCommentThreadView",value:function(e){var t=this[Rw("0x59")][Rw("0x8e")][Rw("0x2a")](Rw("0x7b")),n=this[Rw("0x59")],r=n.config,i=n.locale,o=Ib(r.get(Rw("0x23")));return new(0,r[Rw("0x2a")](Rw("0x74"))[Rw("0xe")])(i,e,t.me,{editorConfig:r[Rw("0x2a")]("comments.editorConfig"),maxCommentsWhenCollapsed:r.get(Rw("0x18")),maxThreadTotalWeight:r[Rw("0x2a")](Rw("0x50")),maxCommentCharsWhenCollapsed:r[Rw("0x2a")](Rw("0x44")),formatDateTime:o,CommentView:r[Rw("0x2a")](Rw("0x74")).CommentView})}},{key:Rw("0x43"),value:function(e){var t=this,n=e.threadId,r=e.isFromAdapter,i=this[Rw("0x5b")](n);if(!i)throw new Ke.default(Rw("0x5d"),this);if(this[Rw("0x16")](n),this[Rw("0x8f")][Rw("0x1e")](n),!i[Rw("0x38")]||r||!this.adapter||Rw("0x37")!=typeof this[Rw("0x45")][Rw("0x2e")])return Promise[Rw("0x75")]();var o=this.context[Rw("0x8e")][Rw("0x2a")](Rw("0x6f")),a=i.channelId,s=o[Rw("0x19")](hw(this.context[Rw("0x23")],"PENDING_ACTION_COMMENT_THREAD"));return this[Rw("0x45")][Rw("0x2e")]({channelId:a,threadId:n})[Rw("0x72")]((function(){return o[Rw("0x6e")](s)}))[Rw("0x54")]((function(e){throw console[Rw("0x0")](e),new Ke.default(Rw("0x4"),t)}))}},{key:Rw("0x16"),value:function(e){var t=this.context[Rw("0x8e")][Rw("0x2a")](Iw),n=this[Rw("0x5b")](e);if(this[Rw("0x89")][Rw("0x34")](n)){var r=this[Rw("0x89")][Rw("0x2a")](n),i=r[Rw("0x4c")],o=t[Rw("0x49")](i);this[Rw("0x89")][Rw("0x1e")](n),this[Rw("0x55")].delete(i),t[Rw("0x6e")](o),r[Rw("0x2")](),i.destroy()}}},{key:Rw("0x10"),value:function(e){var t=this,n=e.threadId,r=e.commentId,i=void 0===r?Object(Sr.a)():r,o=e.content,a=e.authorId,s=e.createdAt,c=e.attributes,l=e.isFromAdapter;if(Rw("0x3c")!=typeof i)throw new Ke.default(Rw("0x1f"));if(Rw("0x3c")!=typeof a)throw new Ke.default(Rw("0x82"));if(Rw("0x3c")!=typeof o||!o.trim())throw new Ke.default(Rw("0xb"));var u=this[Rw("0x5b")](n);if(!u)throw new Ke.default("commentsrepository-add-comment-to-missing-comment-thread",this);var d=this[Rw("0x59")][Rw("0x8e")][Rw("0x2a")](Qy)[Rw("0xd")](a);if(!d)throw new Ke.default(Rw("0x70"),null,{authorId:a});var f=new Dw(this,{threadId:n,id:i,author:d,content:o,createdAt:s,attributes:c});if(u[Rw("0x25")](f),l||!this[Rw("0x45")]||"function"!=typeof this[Rw("0x45")].addComment)return Promise.resolve();var h=this[Rw("0x59")][Rw("0x8e")][Rw("0x2a")](Rw("0x6f")),p=u.channelId,v=h[Rw("0x19")](hw(this[Rw("0x59")].locale,Rw("0x64")));return c||(c={}),this[Rw("0x45")][Rw("0x52")]({channelId:p,threadId:n,commentId:i,content:o,attributes:c}).then((function(e){if(h.remove(v),t[Rw("0x30")](n))e&&e.createdAt&&t[Rw("0x41")]({threadId:n,commentId:i,createdAt:e.createdAt,isFromAdapter:!0});else{var r={threadId:n,commentId:i,content:o,attributes:c,createdAt:e&&e[Rw("0x8")]?e.createdAt:s,authorId:d.id};t[Rw("0x2d")]({channelId:p,threadId:n,comments:[r],isFromAdapter:!0})}}))[Rw("0x54")]((function(e){throw console.error(e),new Ke.default(Rw("0x22"),t)}))}},{key:Rw("0x41"),value:function(e){var t=this,n=e.threadId,r=e.commentId,i=e.content,o=e.createdAt,a=e.attributes,s=e.isFromAdapter;if(void 0!==i&&(Rw("0x3c")!=typeof i||!i.trim()[Rw("0x38")]))throw new Ke.default(Rw("0x7f"));var c=this.getCommentThread(n),l=c[Rw("0x62")](r);if(!l)throw new Ke.default("commentsrepository-update-missing-comment",this);var u=!1;if(i&&i!==l[Rw("0xf")]&&(l.content=i,u=!0),o&&o!==l[Rw("0x8")]&&(l[Rw("0x8")]=o,u=!0),a&&!ya(a,l[Rw("0x13")])&&(l[Rw("0x13")]=a,u=!0),!u)return Promise[Rw("0x75")]();if(c[Rw("0x31")](Rw("0x61")),s||!this.adapter||Rw("0x37")!=typeof this[Rw("0x45")][Rw("0x11")])return Promise[Rw("0x75")]();var d=this[Rw("0x59")][Rw("0x8e")][Rw("0x2a")](Rw("0x6f")),f=this[Rw("0x5b")](l[Rw("0x8b")]).channelId,h=d[Rw("0x19")](hw(this.context[Rw("0x23")],Rw("0x64")));return this[Rw("0x45")][Rw("0x11")]({channelId:f,threadId:n,commentId:r,content:i,attributes:a})[Rw("0x72")]((function(){return d[Rw("0x6e")](h)}))[Rw("0x54")]((function(e){throw console[Rw("0x0")](e),new Ke.default(Rw("0x90"),t)}))}},{key:Rw("0x93"),value:function(e){var t=this,n=e.threadId,r=e.commentId,i=e.isFromAdapter,o=this[Rw("0x5b")](n),a=o[Rw("0x62")](r);if(!a)throw new Ke.default(Rw("0x8a"),this);if(o[Rw("0x14")](a),i||!this[Rw("0x45")]||Rw("0x37")!=typeof this.adapter.removeComment)return Promise[Rw("0x75")]();var s=this[Rw("0x59")][Rw("0x8e")][Rw("0x2a")](Rw("0x6f")),c=o.channelId,l=s[Rw("0x19")](hw(this[Rw("0x59")][Rw("0x23")],Rw("0x64")));return this[Rw("0x45")][Rw("0x5")]({channelId:c,threadId:n,commentId:r})[Rw("0x72")]((function(){return s[Rw("0x6e")](l)}))[Rw("0x54")]((function(e){throw console[Rw("0x0")](e),new Ke.default(Rw("0x1a"),t)}))}}],[{key:"requires",get:function(){return[Iw,Qy,ms]}},{key:Rw("0x51"),get:function(){return Rw("0x73")}}]),n}(it),Nw=function(){function e(t,n){_classCallCheck(this,e),this.channelId=n[Rw("0x27")],this.id=n.id,this.set("isReadOnly",!1),this[Rw("0x74")]=new $e.default,this._repository=t,this[Rw("0x6d")]=!1}return _createClass(e,[{key:Rw("0x3e"),get:function(){return Array.from(this[Rw("0x74")])[Rw("0x6")]((function(e,t){return e+t.weight}),0)}},{key:Rw("0x38"),get:function(){return this[Rw("0x74")][Rw("0x38")]}},{key:Rw("0xc"),get:function(){return this[Rw("0x6d")]}},{key:"remove",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.isFromAdapter,n=void 0!==t&&t,r=this.channelId,i=this.id;this[Rw("0x53")].fire(Fw(Rw("0x2e"),r),{channelId:r,threadId:i,isFromAdapter:n})}},{key:Rw("0x12"),value:function(e){this._repository._attachCommentThread({threadId:this.id,target:e})}},{key:Rw("0x52"),value:function(e){var t=this.channelId,n=this.id;this._repository[Rw("0x31")](Fw(Rw("0x52"),t,n),Object[Rw("0x4b")]({channelId:t,threadId:n},e))}},{key:Rw("0x62"),value:function(e){if("string"!=typeof e)throw new Ke.default(Rw("0x91"),null,{commentId:e});return this[Rw("0x74")].get(e)}},{key:Rw("0x5f"),value:function(){return{threadId:this.id,comments:this[Rw("0x74")][Rw("0x63")]((function(e){return e.toJSON()}))}}},{key:Rw("0x25"),value:function(e){var t=this;return this[Rw("0x5a")](e,Rw("0x5e"),(function(){var n=t._findOptimalIndex(e),r=t[Rw("0x74")];n-1!=r.getIndex(e)&&n+1!=r[Rw("0x7e")](e)&&(t[Rw("0x14")](e),t[Rw("0x25")](e))})),e[Rw("0x8")]?this[Rw("0x74")][Rw("0x19")](e,this[Rw("0x8c")](e)):this[Rw("0x74")][Rw("0x19")](e)}},{key:Rw("0x14"),value:function(e){return this[Rw("0x36")](e),e[Rw("0x2")](),this[Rw("0x74")][Rw("0x6e")](e)}},{key:Rw("0x8c"),value:function(e){var t=this[Rw("0x74")][Rw("0x2f")]((function(t){return new Date(t[Rw("0x8")]).getTime()>new Date(e[Rw("0x8")])[Rw("0x97")]()}));return t?this.comments[Rw("0x7e")](t):this.length}}]),e}();Object(u.default)(Nw,l.default);var Dw=function(){function e(t,n){_classCallCheck(this,e);var r=t.context[Rw("0x8e")][Rw("0x2a")](Rw("0x7b")).me,i=t[Rw("0x5b")](n[Rw("0x8b")]);this.id=n.id,this.threadId=n[Rw("0x8b")],this.author=n.author,this[Rw("0x33")]("content",n[Rw("0xf")]),this[Rw("0x33")](Rw("0x8"),n[Rw("0x8")]||new Date),this.set(Rw("0x13"),n[Rw("0x13")]||{}),this.set(Rw("0x7d"),r===n[Rw("0x28")]),this[Rw("0x33")](Rw("0x7c"),r===n[Rw("0x28")]),this[Rw("0x60")](Rw("0x66")).to(i,Rw("0x66")),this[Rw("0x53")]=t}return _createClass(e,[{key:"weight",get:function(){return Math[Rw("0x4a")](function(e){var t=document[Rw("0x4f")](Rw("0x69"));return t[Rw("0x47")]=e,t[Rw("0x5c")][Rw("0x38")]}(this[Rw("0xf")]),200)}},{key:Rw("0x4d"),value:function(e){if(e[Rw("0x29")]||this[Rw("0x7d")]){var t=this.threadId,n=this.id;if(!this[Rw("0x53")][Rw("0x30")](t))throw new Ke.default("commentsrepository-update-comment-missing-comment-thread",this);var r=this[Rw("0x53")].getCommentThread(t).channelId;this._repository[Rw("0x31")](Fw("updateComment",r,t),Object.assign({channelId:r,threadId:t,commentId:n},e))}}},{key:"setAttribute",value:function(e,t){var n=_o(this[Rw("0x13")]);Ht(n,e,t),this.update({attributes:n})}},{key:Rw("0xa"),value:function(e){var t=_o(this.attributes);Ot(t,e),this[Rw("0x4d")]({attributes:t})}},{key:Rw("0x6e"),value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e[Rw("0x29")]||this[Rw("0x7c")]){var t=this.threadId,n=this.id;if(!this[Rw("0x53")][Rw("0x30")](t))throw new Ke.default(Rw("0x85"),this);var r=this[Rw("0x53")][Rw("0x5b")](t),i=r.channelId;this[Rw("0x53")][Rw("0x31")](Fw(Rw("0x5"),i,t),Object.assign({channelId:i,threadId:t,commentId:n},e))}}},{key:Rw("0x5f"),value:function(){return{commentId:this.id,content:this[Rw("0xf")],createdAt:this[Rw("0x8")],authorId:this.author.id,attributes:this[Rw("0x13")]}}},{key:Rw("0x2"),value:function(){this[Rw("0x36")]()}}]),e}();function Fw(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=0,o=n;i<o.length;i++){var a=o[i];Rw("0x3c")==typeof a&&(e+=":"+a)}return e}Object(u.default)(Dw,l.default);var jw=n(40),Lw=n.n(jw),Vw=["mySessionId","plugins","assign","remove","requires","setUpService","hasCommentThread","getUser","createdAt","catch","unregister","addCommentThread","register","addComment","context","content","init","listenTo","map","reconnect","_connectService","commentThreadRemoved","has","_services","addToReconnectionStack","removeCommentThread","getCommentThreads","collaboration.channelId","switchReadOnly","404","role","CommentsService","commentRemoved","_getService","commentThreadId","_fetchMissingUsersForThreads","add","cloudservicescommentsadapter-disconnect-not-exist","keys","updateComment","attributes","set","cloudservicescommentsadapter-connect-already-connected","sessionAdd:","userId","delete","getCommentThread","terminateService","commentId","getComment","get","disconnect","adapter","commentUpdated","update","config","getConnectedSessions","comments","from","removeComment","off"];!function(e,t){!function(t){for(;--t;)e.push(e.shift())}(++t)}(Vw,368);var Bw=function(e,t){return Vw[e-=0]},zw=function(e){_inherits(a,e);var t,n,r,i,o=_createSuper(a);function a(e){var t;return _classCallCheck(this,a),(t=o.call(this,e))[Bw("0x15")]=new Map,t}return _createClass(a,[{key:Bw("0xe"),value:(i=_asyncToGenerator(regeneratorRuntime.mark((function e(){var t,n,r,i,o,a=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.context,n=t[Bw("0x3c")][Bw("0x30")](Mw),t[Bw("0x3c")].get(Ky)[Bw("0x16")](this),n[Bw("0x32")]={getCommentThread:function(){var e=_asyncToGenerator(regeneratorRuntime.mark((function e(t){var n,r,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.channelId,r=t.threadId,e.next=3,a[Bw("0x1f")](n).getCommentThread(r);case 3:return i=e.sent,e.next=6,a[Bw("0x21")]([i]);case 6:return e.abrupt("return",{threadId:i.commentThreadId,comments:i[Bw("0x37")][Bw("0x10")](Ww)});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),removeCommentThread:function(e){var t=e.channelId,n=e.threadId;return a._getService(t)[Bw("0x17")](n).catch(Hw)},addComment:function(e){var t=e.channelId,n=e.threadId,r=e.commentId,i=e.content,o=e.attributes;return a[Bw("0x1f")](t).addComment(n,r,i,o)},updateComment:function(e){var t=e.channelId,n=e.threadId,r=e.commentId,i=e.content,o=e.attributes;return a[Bw("0x1f")](t)[Bw("0x25")](n,r,i,o)[Bw("0x7")](Hw)},removeComment:function(e){var t=e.channelId,n=e.threadId,r=e.commentId;return a[Bw("0x1f")](t)[Bw("0x39")](n,r)[Bw("0x7")](Hw)}},!(t instanceof rt)){e.next=9;break}return r=t[Bw("0x35")][Bw("0x30")]("collaboration.channelId"),i=t[Bw("0x3c")][Bw("0x30")](nk),e.next=5,this.setUpService(r);case 5:return e.next=7,this._services[Bw("0x30")](r)[Bw("0x36")]();case 7:o=e.sent,this.listenTo(i,Bw("0x29")+r,(function(e,t){var o=t.session;o.id===i[Bw("0x3b")]&&(e[Bw("0x3a")](),"reader"===o[Bw("0x1c")]&&n[Bw("0x1a")](!0,r))})),i.register(r,o);case 9:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:Bw("0x3"),value:(r=_asyncToGenerator(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this[Bw("0x15")].has(t)){e.next=2;break}throw new Ke.default(Bw("0x28"),null,{channelId:t});case 2:return n=this[Bw("0xc")][Bw("0x3c")][Bw("0x30")](Mw),r=new(a[Bw("0x1d")])(t),this[Bw("0x15")][Bw("0x27")](t,r),this[Bw("0xf")](r,Bw("0x13"),(function(e,t){var r=t.commentThreadId,i=n[Bw("0x2c")](r);i&&i.remove({isFromAdapter:!0})})),this[Bw("0xf")](r,"commentAdded",(function(e,r){var i=r.commentThreadId;n[Bw("0x4")](i)||n[Bw("0x9")]({channelId:t,threadId:i,isFromAdapter:!0});var o=n[Bw("0x2c")](i);o&&o[Bw("0xb")](Object[Bw("0x0")](Ww(r),{isFromAdapter:!0}))})),this[Bw("0xf")](r,Bw("0x33"),(function(e,t){var r=t.commentThreadId,i=t.commentId,o=t.content,a=t.attributes,s=n[Bw("0x2c")](r);if(s){var c=s[Bw("0x2f")](i);c&&c[Bw("0x34")]({content:o,attributes:a,isFromAdapter:!0})}})),this.listenTo(r,Bw("0x1e"),(function(e,t){var r=t.commentThreadId,i=t.commentId,o=n[Bw("0x2c")](r);if(o){var a=o.getComment(i);a&&a[Bw("0x1")]({isFromAdapter:!0})}})),e.next=10,this[Bw("0x12")](t);case 10:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"destroy",value:function(){if(this[Bw("0xc")]instanceof rt){var e=this.context[Bw("0x35")][Bw("0x30")](Bw("0x19"));this.terminateService(e)}}},{key:Bw("0x2d"),value:function(e){if(!this[Bw("0x15")][Bw("0x14")](e))throw new Ke.default(Bw("0x23"),null,{channelId:e});this[Bw("0x1f")](e)[Bw("0x31")](),this._services.delete(e)}},{key:Bw("0x11"),value:(n=_asyncToGenerator(regeneratorRuntime.mark((function e(){var t,n,r,i,o,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=_createForOfIteratorHelper(this._services[Bw("0x24")]()),e.prev=1,t.s();case 3:if((n=t.n()).done){e.next=9;break}return r=n.value,e.next=7,this[Bw("0x12")](r);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),t.e(e.t0);case 14:return e.prev=14,t.f(),e.finish(14);case 17:if(!(this[Bw("0xc")]instanceof rt)){e.next=24;break}return i=this.context.config[Bw("0x30")](Bw("0x19")),(o=this[Bw("0xc")][Bw("0x3c")][Bw("0x30")](nk))[Bw("0x8")](i),e.next=22,this[Bw("0x15")][Bw("0x30")](i)[Bw("0x36")]();case 22:a=e.sent,o[Bw("0xa")](i,a);case 24:case"end":return e.stop()}}),e,this,[[1,11,14,17]])}))),function(){return n.apply(this,arguments)})},{key:Bw("0x12"),value:(t=_asyncToGenerator(regeneratorRuntime.mark((function e(t){var n,r,i,o,a,s,c,l,u,d,f,h,p,v,g,m,y,k,_,b,w,x,C,T,A,S,E;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this[Bw("0xc")][Bw("0x3c")][Bw("0x30")](Ky),r=n.connection,i=this[Bw("0xc")][Bw("0x3c")].get(Mw),o=this[Bw("0x15")][Bw("0x30")](t),e.next=6,o.connect(r);case 6:return a=e.sent,e.next=9,this[Bw("0x21")](a);case 9:s=new Set(Array.from(i[Bw("0x18")]({channelId:t}),(function(e){return e.id}))),c=_createForOfIteratorHelper(a);try{for(c.s();!(l=c.n()).done;)u=l.value,s[Bw("0x2b")](u[Bw("0x20")])}catch(I){c.e(I)}finally{c.f()}d=_createForOfIteratorHelper(s);try{for(d.s();!(f=d.n()).done;)h=f.value,i[Bw("0x2c")](h)[Bw("0x1")]({isFromAdapter:!0})}catch(I){d.e(I)}finally{d.f()}p=_createForOfIteratorHelper(a);try{for(p.s();!(v=p.n()).done;){g=v.value,(m=i[Bw("0x2c")](g[Bw("0x20")]))||(m=i[Bw("0x9")]({channelId:t,threadId:g[Bw("0x20")],isFromAdapter:!0})),y=new Set(Array[Bw("0x38")](m[Bw("0x37")],(function(e){return e.id}))),k=_createForOfIteratorHelper(g[Bw("0x37")]);try{for(k.s();!(_=k.n()).done;)b=_.value,y[Bw("0x2b")](b[Bw("0x2e")])}catch(I){k.e(I)}finally{k.f()}w=_createForOfIteratorHelper(y);try{for(w.s();!(x=w.n()).done;)C=x.value,m[Bw("0x2f")](C)[Bw("0x1")]({isFromAdapter:!0})}catch(I){w.e(I)}finally{w.f()}T=_createForOfIteratorHelper(g[Bw("0x37")]);try{for(T.s();!(A=T.n()).done;)S=A.value,(E=m[Bw("0x2f")](S[Bw("0x2e")]))?E[Bw("0xd")]!==S[Bw("0xd")]&&E.update({content:S[Bw("0xd")],isFromAdapter:!0}):m[Bw("0xb")](Object[Bw("0x0")](Ww(S),{isFromAdapter:!0}))}catch(I){T.e(I)}finally{T.f()}}}catch(I){p.e(I)}finally{p.f()}case 16:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:Bw("0x1f"),value:function(e){if(!this._services.has(e))throw new Ke.default("cloudservicescommentsadapter-service-not-exist",null,{channelId:e});return this[Bw("0x15")][Bw("0x30")](e)}},{key:Bw("0x21"),value:function(e){var t,n=this.context[Bw("0x3c")][Bw("0x30")](Qy),r=this[Bw("0xc")][Bw("0x3c")][Bw("0x30")](Ky).connection,i=new Set,o=_createForOfIteratorHelper(e);try{for(o.s();!(t=o.n()).done;){var a,s=_createForOfIteratorHelper(t.value.comments);try{for(s.s();!(a=s.n()).done;){var c=a.value.userId;n[Bw("0x5")](c)||i[Bw("0x22")](c)}}catch(l){s.e(l)}finally{s.f()}}}catch(l){o.e(l)}finally{o.f()}return Promise.all(Array[Bw("0x38")](i,function(){var e=_asyncToGenerator(regeneratorRuntime.mark((function e(t){var i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Lw.a[Bw("0x30")](r,t);case 2:i=e.sent,n[Bw("0x5")](t)||n.addUser(i);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))}}],[{key:Bw("0x2"),get:function(){return[Ky,Mw,nk,Qy]}}]),a}(it);function Hw(e){return Uw.apply(this,arguments)}function Uw(){return(Uw=_asyncToGenerator(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Bw("0x1b")===t.code){e.next=2;break}throw t;case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ww(e){return{threadId:e.commentThreadId,commentId:e[Bw("0x2e")],content:e[Bw("0xd")],createdAt:e[Bw("0x6")],authorId:e[Bw("0x2a")],attributes:e[Bw("0x26")]}}zw[Bw("0x1d")]=D_.a;var qw=["_itemIsContent","_trimToContent","createRange","item","textProxy","substr","change","editor","addMarker","isObject","push","getRanges","tableCell","start","element","schema","_hasContent","comment:","document","selection","execute","getLastMatchingPosition","model"];!function(e,t){!function(t){for(;--t;)e.push(e.shift())}(++t)}(qw,227);var Yw=function(e,t){return qw[e-=0]},Gw=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"refresh",value:function(){var e,t=_createForOfIteratorHelper(this[Yw("0xa")][Yw("0x2")].document[Yw("0x16")].getRanges());try{for(t.s();!(e=t.n()).done;){var n=e.value;if(this[Yw("0x13")](n))return void(this.isEnabled=!0)}}catch(r){t.e(r)}finally{t.f()}this.isEnabled=!1}},{key:Yw("0x0"),value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.threadId,r=void 0===n?Object(Sr.a)():n,i=this.editor[Yw("0x2")],o=[],a=_createForOfIteratorHelper(i[Yw("0x15")].selection[Yw("0xe")]());try{for(a.s();!(e=a.n()).done;){var s=e.value;this._hasContent(s)&&o[Yw("0xd")](this[Yw("0x4")](s))}}catch(c){a.e(c)}finally{a.f()}i[Yw("0x9")]((function(e){var t,n=_createForOfIteratorHelper(o);try{for(n.s();!(t=n.n()).done;){var i=t.value,a=Object(Sr.a)()[Yw("0x8")](1,5),s=Yw("0x14")+r+":"+a;e[Yw("0xb")](s,{range:i,usingOperation:!1,affectData:!1})}}catch(c){n.e(c)}finally{n.f()}}))}},{key:Yw("0x13"),value:function(e){var t,n=_createForOfIteratorHelper(e.getItems());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(this._itemIsContent(r))return!0}}catch(i){n.e(i)}finally{n.f()}return!1}},{key:Yw("0x3"),value:function(e){return e.is(Yw("0x7"))||this.editor[Yw("0x2")][Yw("0x12")][Yw("0xc")](e)&&!e.is(Yw("0x11"),Yw("0xf"))}},{key:Yw("0x4"),value:function(e){var t=this,n=function(e){return!t[Yw("0x3")](e[Yw("0x6")])},r=e[Yw("0x10")][Yw("0x1")](n),i=e.end[Yw("0x1")](n,{direction:"backward"});return this.editor[Yw("0x2")][Yw("0x5")](r,i)}}]),n}(h),Jw=["mapViewToDom","name","domConverter"];!function(e,t){!function(t){for(;--t;)e.push(e.shift())}(++t)}(Jw,465);var $w=function(e,t){return Jw[e-=0]};function Kw(e,t){var n=Si(e.mapper.markerNameToElements(t[$w("0x1")]).values());return e.view[$w("0x2")][$w("0x0")](n)}var Qw=["RestrictedEditingModeEditing","addCommentThread","has","enableCommand","plugins","get"];!function(e,t){!function(t){for(;--t;)e.push(e.shift())}(++t)}(Qw,324);var Zw=function(e,t){return Qw[e-=0]},Xw=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"afterInit",value:function(){var e=this.editor;e[Zw("0x4")][Zw("0x2")]("RestrictedEditingModeEditing")&&e[Zw("0x4")][Zw("0x5")](Zw("0x0"))[Zw("0x3")](Zw("0x1"))}}]),n}(d);n(388);var ex=["low","markerToData","push","change:isThreadsLoadingPaused","_handleMarkerAddAndRemove","_detachCommentThread","has","editor","length","registerPostFixer","schema","commands","delete","editing","_attachedThreads","change","conversion","then","change:isReadOnly","upcast","CommentsEditing","model","end","map","removeCommentThread","$graveyard","CommentsRepository","isEqual","listenTo","config","isCollapsed","activeMarker","document","text","createPositionBefore","getWalker","stop","init","isThreadsLoadingPaused","markers","createRange","destroyed","getCommentThread","high","updateMarker","differ","_changedMarkers","change:activeMarker","_threads","pluginName","update:comment","getMarkersGroup","get","getAllMarkersForId","hasMarkerForId","getCommentThreads","add","split","rootName","_attachThreadToMarker","comment:","openNewCommentThread","createElement","start","dataDowncast","set","data","removeMarker","ck-comment-marker","destroy","top","dataToMarker","ck-comment-marker--active","elementToElement","for","markerToHighlight","$marker","attachTo","name","_initializeMarkerConverters","newRange","plugins","state","once","addCommentThread","collaboration.channelId","hasCommentThread","editingDowncast","managedUsingOperations","comment"];!function(e,t){!function(t){for(;--t;)e.push(e.shift())}(++t)}(ex,101);var tx=function(e,t){return ex[e-=0]},nx=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this,e))[tx("0x36")]("isThreadsLoadingPaused",!0),e[tx("0x37")][tx("0x48")]("ready",(function(){return r[tx("0x1b")]=!1})),r.set(tx("0x14"),null),r.on(tx("0x24"),(function(t,n,i,o){e[tx("0xa")].change((function(e){if(i){var t,n=ix(i).id,a=_createForOfIteratorHelper(r[tx("0x2a")](n));try{for(a.s();!(t=a.n()).done;){var s=t.value;e[tx("0x21")](s)}}catch(f){a.e(f)}finally{a.f()}}if(o){var c,l=ix(o).id,u=_createForOfIteratorHelper(r[tx("0x2a")](l));try{for(u.s();!(c=u.n()).done;){var d=c.value;e[tx("0x21")](d)}}catch(f){u.e(f)}finally{u.f()}}}))})),r[tx("0x3")]=new Set,r}return _createClass(n,[{key:tx("0x1a"),value:function(){var e=this,t=this[tx("0x56")],n=t[tx("0x46")][tx("0x29")](tx("0xf")),r=t.config[tx("0x29")](tx("0x4a"));t[tx("0x0")][tx("0x2d")](tx("0x49"),new Gw(t)),this.listenTo(t,tx("0x7"),(function(e,r,i){n.switchReadOnly(i,t[tx("0x12")][tx("0x29")]("collaboration.channelId"))})),this[tx("0x11")](n,rx(tx("0xd"),r),(function(r,i){var o=i.threadId;t[tx("0xa")][tx("0x4")]((function(t){var n,r=_createForOfIteratorHelper(e.getAllMarkersForId(o));try{for(r.s();!(n=r.n()).done;){var i=n.value;t[tx("0x38")](i)}}catch(a){r.e(a)}finally{r.f()}}));var a=n[tx("0x1f")](o);n[tx("0x4b")](o)&&!a.length||r[tx("0x19")]()}),{priority:tx("0x20")}),this[tx("0x11")](n,rx("addComment",r),(function(r,i){var o=i.threadId,a=i.isFromAdapter,s=e[tx("0x2a")](o);!a&&0!=s.length&&n.hasCommentThread(o)&&1===n[tx("0x1f")](o)[tx("0x57")]&&t.model[tx("0x4")]((function(e){var t,n=_createForOfIteratorHelper(s);try{for(n.s();!(t=n.n()).done;){var r=t.value;e[tx("0x21")](r,{usingOperation:!0,affectsData:!0})}}catch(i){n.e(i)}finally{n.f()}}))}),{priority:tx("0x4f")}),this[tx("0x44")](),this[tx("0x53")]()}},{key:tx("0x3a"),value:function(){var e,t=this[tx("0x56")][tx("0x46")][tx("0x29")](tx("0xf")),r=this[tx("0x56")][tx("0x12")][tx("0x29")](tx("0x4a")),i=_createForOfIteratorHelper(t[tx("0x2c")]({channelId:r}));try{for(i.s();!(e=i.n()).done;){var o=e.value;t[tx("0x54")](o.id),t[tx("0x25")][tx("0x1")](o.id)}}catch(a){i.e(a)}finally{i.f()}_get3(_getPrototypeOf(n.prototype),"destroy",this).call(this)}},{key:tx("0x2b"),value:function(e){return this[tx("0x2a")](e)[tx("0x57")]>0}},{key:tx("0x2a"),value:function(e){var t=this[tx("0x56")][tx("0xa")][tx("0x1c")][tx("0x29")](tx("0x31")+e);return t?[t]:Array.from(this[tx("0x56")][tx("0xa")][tx("0x1c")][tx("0x28")](tx("0x31")+e))}},{key:tx("0x44"),value:function(){var e=this,t=this[tx("0x56")];t[tx("0x5")].for(tx("0x4c"))[tx("0x40")]({model:tx("0x4e"),view:function(t){var n=ix(t.markerName).id,r=[tx("0x39")];return e[tx("0x14")]&&ix(e[tx("0x14")]).id===n&&r[tx("0x51")](tx("0x3d")),{classes:r,attributes:{"data-comment":n}}}}),t[tx("0x5")].for(tx("0x35"))[tx("0x50")]({model:tx("0x4e"),view:function(e){var n=t.model[tx("0x1c")][tx("0x29")](e),r=ix(e),i=r.id,o=r.part;return n.affectsData?{group:tx("0x4e"),name:o?i+":"+o:i}:null}}),t[tx("0x5")][tx("0x3f")](tx("0x8"))[tx("0x3e")]({view:{name:tx("0x4e"),attribute:{id:/^\w/}},model:function(e,t){return t.writer[tx("0x33")](tx("0x41"),{"data-name":tx("0x31")+e.getAttribute("id")})}}),t[tx("0x5")][tx("0x3f")](tx("0x8"))[tx("0x3c")]({view:tx("0x4e")})}},{key:"_handleMarkerAddAndRemove",value:function(){var e=this,t=this.editor,n=t[tx("0x46")][tx("0x29")](tx("0xf")),r=new Set;t.model.document[tx("0x58")]((function(n){var i,o=!1,a=_createForOfIteratorHelper(t.model[tx("0x15")][tx("0x22")][tx("0x23")]);try{for(a.s();!(i=a.n()).done;){var s=_slicedToArray(i.value,2),c=s[0],l=s[1],u=ix(c),d=u.group,f=u.id,h=l[tx("0x45")];if(tx("0x4e")===d&&h){var p=tx("0xe")===h.root[tx("0x2f")];p||!(h=ox(h,t.model))||h[tx("0x10")](l[tx("0x45")])?!h||!t[tx("0xa")].hasContent(h)||e[tx("0x3")][tx("0x55")](f)&&p?(n[tx("0x38")](c),o=!0):p||(e[tx("0x1b")]?r[tx("0x2d")](f):e._attachThreadToMarker(f)):(n[tx("0x21")](c,{range:h}),o=!0)}}}catch(v){a.e(v)}finally{a.f()}return o})),this.on(tx("0x52"),(function(t,n,i){if(!i&&r.size){var o,a=_createForOfIteratorHelper(r);try{for(a.s();!(o=a.n()).done;){var s=o.value;e[tx("0x30")](s),r[tx("0x1")](s)}}catch(c){a.e(c)}finally{a.f()}}})),this[tx("0x11")](t[tx("0xa")][tx("0x1c")],tx("0x27"),(function(i,o,a,s){if(!s){var c=ix(o[tx("0x43")]).id,l=t[tx("0x46")][tx("0x29")]("CommentsRepository").getCommentThread(c);r[tx("0x1")](c),l&&!e[tx("0x2b")](c)&&(e[tx("0x3")].delete(c),n[tx("0x54")](c))}}))}},{key:"_attachThreadToMarker",value:function(e){var t=this;if(!this[tx("0x3")][tx("0x55")](e)){this[tx("0x3")].add(e);var n=this.editor,r=n.plugins.get(tx("0xf")),i=n[tx("0x12")][tx("0x29")](tx("0x4a")),o=function(){var r=t[tx("0x2a")](e);if(0==r[tx("0x57")])return null;var i=r[tx("0xc")]((function(e){return Kw(n.editing,e)}));return i.sort((function(e,t){var n=new bi(e),r=new bi(t),i=n.top-r[tx("0x3b")];return 0==i?n.left-r.left:i})),i[0]};this[tx("0x2a")](e)[0][tx("0x4d")]?r.fetchCommentThread({channelId:i,threadId:e})[tx("0x6")]((function(r){if(tx("0x1e")!==n[tx("0x47")])if(r)r[tx("0x42")](o);else{var i=t[tx("0x2a")](e);n[tx("0xa")][tx("0x4")]((function(e){var t,n=_createForOfIteratorHelper(i);try{for(n.s();!(t=n.n()).done;){var r=t.value;e[tx("0x38")](r)}}catch(o){n.e(o)}finally{n.f()}}))}})):n[tx("0x2")].view[tx("0x48")]("render",(function(){r[tx("0x32")]({channelId:i,threadId:e,target:o})}),{priority:"low"})}}}],[{key:"requires",get:function(){return[Mw,Xw]}},{key:tx("0x26"),get:function(){return tx("0x9")}}]),n}(d);function rx(e,t){return t?e+":"+t:e}function ix(e){var t=e[tx("0x2e")](":");return{group:t[0],id:t[1],part:t[2]}}function ox(e,t){var n,r=t[tx("0x59")],i=t[tx("0x1d")](e[tx("0x34")]),o=_createForOfIteratorHelper(e[tx("0x18")]());try{for(o.s();!(n=o.n()).done;){var a=n.value,s=a.type,c=a.item,l=a.nextPosition;if(tx("0x16")===s||r.isObject(c)){var u=t[tx("0x17")](c);i.isCollapsed&&(i[tx("0x34")]=u),i[tx("0xb")]=l}}}catch(d){o.e(d)}finally{o.f()}return i[tx("0x13")]?null:i}var ax=["selection","innerView","function","pluginName","EditorAnnotations","focusTracker","keys","map","blur","fire","annotation","update","cancel","addSourceCollector","isEqual","add","element","editing","isReadOnly","collection","remove","getRanges","init","sort","change:range","containsRange","delete","view","range","set","hasDomSelection","model","isCollapsed","from","_editorAnnotationsData","document","change:isFocused","push","getOrderedSelectedAnnotations","listenTo","has","requires","plugins","_dataCollectors","refreshSelectedViews","uiUpdate","editor"];!function(e,t){!function(t){for(;--t;)e.push(e.shift())}(++t)}(ax,272);var sx=function(e,t){return ax[e-=0]},cx=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this,e))[sx("0x6")]=new Set,r}return _createClass(n,[{key:sx("0x20"),value:function(){var e=this,t=this[sx("0x9")],n=t[sx("0x5")].get(Iw),r=t.model[sx("0x2d")][sx("0xa")],i=ui((function(){return e[sx("0x7")]()}),10);r.on(sx("0x22"),(function(t,n){n.directChange&&(i[sx("0x16")](),e[sx("0x7")]())})),this[sx("0x2")](t.editing[sx("0x25")][sx("0x2d")],sx("0x2e"),(function(e,t,n){n&&i()})),this[sx("0x2")](t.ui[sx("0xf")],sx("0x2e"),(function(n,r,i){i||t[sx("0x1c")]||e[sx("0x13")](sx("0x12"),{isAnnotationTracked:function(t){return e[sx("0x2c")][sx("0x3")](t[sx("0xb")])}})})),this[sx("0x2")](this[sx("0x9")].ui,sx("0x15"),(function(){return e.fire(sx("0x8"))}));var o=new Set;this[sx("0x2")](n[sx("0x1d")],sx("0x19"),(function(n,r){var i,a=_createForOfIteratorHelper(e._editorAnnotationsData[sx("0x10")]());try{for(a.s();!(i=a.n()).done;){if(i.value===r[sx("0xb")]){t.ui[sx("0xf")][sx("0x19")](r[sx("0x25")][sx("0x1a")]),o[sx("0x19")](r.view);break}}}catch(s){a.e(s)}finally{a.f()}})),this[sx("0x2")](n.collection,sx("0x1e"),(function(e,n){o.has(n[sx("0x25")])&&(t.ui[sx("0xf")][sx("0x1e")](n[sx("0x25")][sx("0x1a")]),o[sx("0x24")](n[sx("0x25")]))}))}},{key:sx("0x28"),value:function(){return this[sx("0x9")][sx("0x1b")][sx("0x25")].hasDomSelection}},{key:sx("0x17"),value:function(e){if(sx("0xc")!=typeof e)throw new Ke.default("editorannotations-invalid-source-callback");this[sx("0x6")][sx("0x19")](e)}},{key:sx("0x7"),value:function(){this.fire("refresh")}},{key:sx("0x1"),value:function(e){var t,n=e.activeAnnotation,r=e.annotations,i=[],o=this[sx("0x9")][sx("0x29")][sx("0x2d")][sx("0xa")],a=Array[sx("0x2b")](o[sx("0x1f")]()),s=_createForOfIteratorHelper(this._editorAnnotationsData);try{for(s.s();!(t=s.n()).done;){var c=_slicedToArray(t.value,2),l=c[0],u=f(c[1]),d=r.getByInnerView(l);u&&d&&i[sx("0x0")]({annotation:d,range:u})}}catch(h){s.e(h)}finally{s.f()}function f(e){var t,n=_createForOfIteratorHelper(e);try{for(n.s();!(t=n.n()).done;){var r,i=t.value,s=_createForOfIteratorHelper(a);try{for(s.s();!(r=s.n()).done;){var c=r.value;if(i[sx("0x23")](c,!o[sx("0x2a")]))return i}}catch(h){s.e(h)}finally{s.f()}}}catch(h){n.e(h)}finally{n.f()}return null}return i[sx("0x21")]((function(e,t){var r=e[sx("0x26")],i=t.range;if(!r[sx("0x18")](i)){if(r[sx("0x23")](i,!0))return 1;if(i.containsRange(r,!0))return-1}return e[sx("0x14")]==n?-1:t[sx("0x14")]==n?1:0}))[sx("0x11")]((function(e){return e.annotation}))}},{key:sx("0x2c"),get:function(){var e,t=new Map,n=_createForOfIteratorHelper(Array[sx("0x2b")](this[sx("0x6")]));try{for(n.s();!(e=n.n()).done;){var r,i=_createForOfIteratorHelper((0,e.value)());try{for(i.s();!(r=i.n()).done;){var o=_slicedToArray(r.value,2),a=o[0],s=o[1];t[sx("0x27")](a,s)}}catch(c){i.e(c)}finally{i.f()}}}catch(c){n.e(c)}finally{n.f()}return t}}],[{key:sx("0x4"),get:function(){return[Iw]}},{key:sx("0xd"),get:function(){return sx("0xe")}}]),n}(d),lx=n(172),ux=n.n(lx),dx=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"init",value:function(){var e=this,t=this.editor,n=t.plugins.get(Mw),r=t.plugins.get(nx),i=t.plugins.get(Iw),o=t.plugins.get(cx);t.ui.componentFactory.add("comment",(function(){return e._createUIButton()})),o.addSourceCollector((function(){var e,t=[],i=_createForOfIteratorHelper(n._threadToController);try{for(i.s();!(e=i.n()).done;){var o=_slicedToArray(e.value,2),a=o[0],s=o[1],c=r.getAllMarkersForId(a.id),l=c.map((function(e){return e.getRange()}));c.length>0&&t.push([s.view,l])}}catch(u){i.e(u)}finally{i.f()}return t})),this.listenTo(i,"change:activeAnnotations",(function(e,t,i){var o=Array.from(i).map((function(e){return e.innerView})).find((function(e){return n._viewToController.has(e)}));if(o){var a=n._viewToController.get(o).model.id,s="comment:"+a;r.hasMarkerForId(a)?r.activeMarker=s:r.activeMarker&&(r.activeMarker=null)}else r.activeMarker=null})),this.listenTo(n,"removeCommentThread",(function(e,n){var i=n.threadId;!n.isFromAdapter&&t.ui.focusTracker.isFocused&&r.hasMarkerForId(i)&&t.editing.view.focus()}),{priority:"highest"}),this.listenTo(n,"addComment",(function(e,i){var o=i.threadId;!i.isFromAdapter&&r.hasMarkerForId(o)&&n.hasCommentThread(o)&&1===n.getCommentThread(o).length&&(t.editing.view.focus(),e.stop())}),{priority:"low"})}},{key:"_createUIButton",value:function(){var e=this.editor,t=new zc(e.locale),n=e.commands.get("addCommentThread"),r=this.editor.locale.t;return t.label=r("Comment"),t.tooltip=r("Comment"),t.icon=ux.a,t.bind("isEnabled").to(n),this.listenTo(t,"execute",(function(){return n.execute()})),t}}],[{key:"pluginName",get:function(){return"CommentsUI"}},{key:"requires",get:function(){return[Mw,nx,cx,Iw]}}]),n}(d),fx=["forceDisabled","_enableCommentsOnlyMode","get","exportPdf","commands","editor","cut","_allowedCommands","pluginName","clipboardInput","has","addCommentThread","highest","DragDrop","isEnabled","document","config","editing","commentsOnly","view","plugins","_disableCommentsOnlyMode","CommentsOnly","commentsOnlyMode","change:isEnabled","stop","selectAll"];!function(e,t){!function(t){for(;--t;)e.push(e.shift())}(++t)}(fx,115);var hx=function(e,t){return fx[e-=0]},px=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this,e)).set(hx("0x7"),null),r.on(hx("0x11"),(function(e,t,n){n?r[hx("0x15")]():r[hx("0xe")]()})),r[hx("0x0")]=new Set([hx("0x4"),hx("0x13"),hx("0x17")]),r}return _createClass(n,[{key:"afterInit",value:function(){null===this[hx("0x7")]&&(this[hx("0x7")]=!!this.editor[hx("0x9")].get(hx("0xb")))}},{key:"_enableCommentsOnlyMode",value:function(){var e,t=_createForOfIteratorHelper(this[hx("0x19")][hx("0x18")]);try{for(t.s();!(e=t.n()).done;){var n=_slicedToArray(e.value,2),r=n[0],i=n[1];this[hx("0x0")].has(r)||i[hx("0x14")](hx("0x10"))}}catch(a){t.e(a)}finally{t.f()}this[hx("0x19")][hx("0xd")][hx("0x3")](hx("0x6"))&&this.editor[hx("0xd")][hx("0x16")]("DragDrop")[hx("0x14")]("commentsOnlyMode");var o=this.editor[hx("0xa")][hx("0xc")].document;this.listenTo(o,hx("0x1a"),(function(e){return e[hx("0x12")]()}),{priority:hx("0x5")}),this.listenTo(o,hx("0x2"),(function(e){return e[hx("0x12")]()}),{priority:hx("0x5")}),this.listenTo(o,"delete",(function(e){return e[hx("0x12")]()}),{priority:"highest"})}},{key:hx("0xe"),value:function(){var e,t=_createForOfIteratorHelper(this[hx("0x19")][hx("0x18")]);try{for(t.s();!(e=t.n()).done;){var n=_slicedToArray(e.value,2),r=n[0],i=n[1];this[hx("0x0")][hx("0x3")](r)||i.clearForceDisabled(hx("0x10"))}}catch(o){t.e(o)}finally{t.f()}this.stopListening(this.editor[hx("0xa")].view[hx("0x8")])}}],[{key:hx("0x1"),get:function(){return hx("0xf")}},{key:"requires",get:function(){return[nx]}}]),n}(d),vx=["from","isActive","delete","function","has","filter","activate","collection","setActiveAnnotation","deactivateAll","context","activeAnnotations","deactivate","annotationsuis-activate-missing-ui","init","_addActiveAnnotation","get","set","attach","requires","_activateAnnotation","listenTo","add","switchTo","hasActive","push","annotationsuis-register-invalid-interface","length","register","_deactivateAllAnnotations","activeUIs","_uis","plugins","AnnotationsUIs","size","_setSelectedAnnotations","detach","destroy","_removeActiveAnnotation","change:activeAnnotation","annotationsuis-annotation-mismatch","_assertAnnotationBelongsToSingleUI","_uisData"];!function(e,t){!function(t){for(;--t;)e.push(e.shift())}(++t)}(vx,131);var gx=function(e,t){return vx[e-=0]},mx=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this,e))[gx("0x1c")]=new Set,r._uis=new Map,r[gx("0x28")]=new Map,r}return _createClass(n,[{key:gx("0xc"),value:function(){var e=this,t=this[gx("0x8")][gx("0x1e")].get(Iw);this.listenTo(t,gx("0x12"),(function(t,n){var r,i=_createForOfIteratorHelper(e[gx("0x1c")]);try{for(i.s();!(r=i.n()).done;){var o=r.value,a=e[gx("0x1d")].get(o);(0,e._uisData.get(o)[gx("0x3")])(n)&&a.setActiveAnnotation(n)}}catch(s){i.e(s)}finally{i.f()}})),this.listenTo(t,gx("0x1b"),(function(){var t,n=_createForOfIteratorHelper(e[gx("0x1c")]);try{for(n.s();!(t=n.n()).done;){var r=t.value;e[gx("0x1d")][gx("0xe")](r)[gx("0x6")](null)}}catch(i){n.e(i)}finally{n.f()}})),this[gx("0x13")](t[gx("0x5")],"add",(function(t,n){e[gx("0x27")](n)}))}},{key:gx("0x16"),value:function(){return this.activeUIs[gx("0x20")]>0}},{key:gx("0x2a"),value:function(e){return this[gx("0x1c")][gx("0x2")](e)}},{key:"activate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return!0},n=this[gx("0x8")][gx("0x1e")][gx("0xe")](Iw);if(!this[gx("0x1d")].has(e))throw new Ke.default(gx("0xb"),this,{uiName:e});this.isActive(e)&&this[gx("0xa")](e),this.activeUIs[gx("0x14")](e);var r=new Tw;(function(e){var t,n=e.source,r=e.target,i=e.filter,o=_createForOfIteratorHelper(n);try{for(o.s();!(t=o.n()).done;){var a=t.value;i(a)&&r[Cw("0x0")](a)}}catch(s){o.e(s)}finally{o.f()}r.listenTo(n,Cw("0x0"),(function(e,t){i(t)&&r[Cw("0x0")](t)})),r[Cw("0x5")](n,"remove",(function(e,t){i(t)&&r[Cw("0xd")](t)}))})({source:n[gx("0x5")],target:r,filter:t}),this[gx("0x28")][gx("0xf")](e,{collection:r,filter:t});var i=this[gx("0x1d")].get(e);i[gx("0x10")](r),this.listenTo(i,gx("0x25"),(function(e,t,r,i){i&&n[gx("0x24")](i),r&&n[gx("0xd")](r)}))}},{key:"deactivate",value:function(e){this.activeUIs[gx("0x0")](e);var t=this[gx("0x1d")][gx("0xe")](e);t[gx("0x22")](),this.stopListening(t),this[gx("0x28")][gx("0xe")](e)[gx("0x5")].destroy(),this[gx("0x28")].delete(e)}},{key:gx("0x15"),value:function(e){var t=this[gx("0x8")].plugins[gx("0xe")](Iw),n=Array[gx("0x29")](t[gx("0x9")])[0]||null;this[gx("0x7")](),this[gx("0x4")](e);var r=this[gx("0x1d")].get(e);r[gx("0x6")](n),r[gx("0x21")]&&n&&r[gx("0x21")]([n])}},{key:gx("0x7"),value:function(){var e,t=_createForOfIteratorHelper(this.activeUIs);try{for(t.s();!(e=t.n()).done;){var n=e.value;this.deactivate(n)}}catch(r){t.e(r)}finally{t.f()}}},{key:gx("0x1a"),value:function(e,t){if(this[gx("0x1d")].has(e))throw new Ke.default("annotationsuis-register-already-registered");if("function"!=typeof t[gx("0x10")]||gx("0x1")!=typeof t[gx("0x22")]||gx("0x1")!=typeof t[gx("0x6")])throw new Ke.default(gx("0x18"),null);this[gx("0x1d")][gx("0xf")](e,t)}},{key:gx("0x23"),value:function(){this[gx("0x7")](),_get3(_getPrototypeOf(n.prototype),gx("0x23"),this).call(this)}},{key:"_assertAnnotationBelongsToSingleUI",value:function(e){var t,n=[],r=_createForOfIteratorHelper(this[gx("0x1c")]);try{for(r.s();!(t=r.n()).done;){var i=t.value;(0,this[gx("0x28")].get(i)[gx("0x3")])(e)&&n[gx("0x17")](i)}}catch(o){r.e(o)}finally{r.f()}if(1!==n[gx("0x19")])throw new Ke.default(gx("0x26"),null,{matchedUIs:n})}}],[{key:gx("0x11"),get:function(){return[Iw]}},{key:"pluginName",get:function(){return gx("0x1f")}}]),n}(it);n(390);var yx=["ck-reset","minHeight","setTemplate","set","bindTemplate","class","div","ck-sidebar"];!function(e,t){!function(t){for(;--t;)e.push(e.shift())}(++t)}(yx,206);var kx=function(e,t){return yx[e-=0]},_x=Ai("px"),bx=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;_classCallCheck(this,n);var i=(r=t.call(this,e))[kx("0x6")];return r[kx("0x5")](kx("0x3"),0),r[kx("0x5")](kx("0x7"),""),r.list=r.createCollection(),r[kx("0x4")]({tag:kx("0x0"),attributes:{class:["ck",kx("0x1"),kx("0x2"),i.to(kx("0x7"))],style:{minHeight:i.to(kx("0x3"),(function(e){return e?_x(e+10):null}))}},children:r.list}),r}return n}(kc),wx=["clientHeight","ck-sidebar-item--no-animation","content","bind","updateHeight","render","clear","detach","_targetTop","destroy","element","height","set","setTemplate","bottom","_mutationObserver","isAnimationDisabled","top"];!function(e,t){!function(t){for(;--t;)e.push(e.shift())}(++t)}(wx,327);var xx=function(e,t){return wx[e-=0]},Cx=Ai("px"),Tx=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;_classCallCheck(this,n),(r=t.call(this,e))[xx("0x9")](xx("0xe")),r[xx("0x9")]("height",0),r[xx("0x0")](xx("0xb")).to(_assertThisInitialized(r),xx("0xe"),_assertThisInitialized(r),xx("0x8"),(function(e,t){return(e||0)+t})),r[xx("0x9")](xx("0xd"),!1),r._mutationObserver=gw((function(){return r.updateHeight()})),r[xx("0x5")]=null,r[xx("0x11")]=r.createCollection();var i=r.bindTemplate;return r[xx("0xa")]({tag:"div",attributes:{class:["ck-sidebar-item",i.to("isAnimationDisabled",(function(e){return e?xx("0x10"):""}))],style:{top:i.to(xx("0xe"),Cx)}},children:r.content}),r}return _createClass(n,[{key:xx("0x2"),value:function(){_get3(_getPrototypeOf(n.prototype),xx("0x2"),this).call(this),this[xx("0xc")].attach(this[xx("0x7")])}},{key:xx("0x1"),value:function(){var e=this.element[xx("0xf")];e&&(this[xx("0x8")]=e)}},{key:xx("0x6"),value:function(){this.content[xx("0x3")](),this[xx("0xc")][xx("0x4")](),_get3(_getPrototypeOf(n.prototype),"destroy",this).call(this)}}]),n}(kc),Ax=["refresh","_updateLastItem","config","getSidebarItemView","listenTo","_alignBeforeItem","locale","destroy","context","change:bottom","max","_annotations","_getTargetTop","bottom","length","_sidebarItemViewToAnnotation","targetRect","_attachToContainer","setContainer","class","set","appendChild","minHeight","add","getIndex","list","_activeAnnotation","init","_getItemAfter","view","change:targetRect","_setItemTop","content","updateHeight","addAnnotation","_annotationToSidebarItemView","render","isAnimationDisabled","_targetTop","_createSidebarView","last","target","stopListening","remove","delete","change:_lastItem","unbind","sidebar-attachtocontainer-missing-container","rearrange","_destroySidebarItemView","_lastItem","sidebar-setcontainer-invalid-element","_detachFromContainer","element","isActive","change:top","top","_alignAfterItem","container","define","_alignToTargetRect","height","_spaceBetweenItems","Sidebar","_getItemBefore","get"];!function(e,t){!function(t){for(;--t;)e.push(e.shift())}(++t)}(Ax,342);var Sx=function(e,t){return Ax[e-=0]},Ex=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this,e))[Sx("0x8")](Sx("0x26")),r[Sx("0x11")]=r[Sx("0x1b")](),r[Sx("0x8")](Sx("0x2e"),null),r[Sx("0x32")]=25,r[Sx("0x3")]=new Map,r._annotationToSidebarItemView=new Map,r[Sx("0x3e")][Sx("0x38")][Sx("0x2f")]("sidebar.preventScrollOutOfView",!1),r[Sx("0x41")]=null,r._activeAnnotation=null,r}return _createClass(n,[{key:Sx("0xf"),value:function(){var e=this.context[Sx("0x38")].get("sidebar.container");e&&this[Sx("0x6")](e)}},{key:Sx("0x6"),value:function(e){if(!qe(e))throw new Ke.default(Sx("0x27"));this[Sx("0x2e")]=e}},{key:Sx("0x5"),value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.viewClass,n=void 0===t?"":t,r=e.spaceBetweenItems,i=void 0===r?25:r;if(!qe(this[Sx("0x2e")]))throw new Ke.default(Sx("0x23"),this);this[Sx("0x2e")][Sx("0x9")](this[Sx("0x11")][Sx("0x29")]),this[Sx("0x11")].class=n,this[Sx("0x32")]=i}},{key:Sx("0x24"),value:function(e){var t=e.removedAnnotation,n=e.previousAnnotation,r=e.nextAnnotation,i=this.getSidebarItemView(t);this.view[Sx("0xd")][Sx("0x1f")](i),this[Sx("0x25")](t),n&&this[Sx("0x30")](this[Sx("0x39")](n)),r&&this[Sx("0x30")](this[Sx("0x39")](r)),this[Sx("0x37")]()}},{key:Sx("0x36"),value:function(e){var t=e.blurredAnnotation,n=e.activatedAnnotation,r=e.disableAnimationOnActivatedAnnotation;if(this[Sx("0xe")]=n,t){t[Sx("0x2a")]=!1;var i=this[Sx("0x39")](t);i&&r&&(i[Sx("0x19")]=!1)}if(n){var o=this.getSidebarItemView(n);o&&(n[Sx("0x2a")]=!0,r&&(o.isAnimationDisabled=!0,o[Sx("0x2c")]+=1),this[Sx("0x30")](o))}}},{key:Sx("0x28"),value:function(e){this[Sx("0x1e")](),this.view[Sx("0x29")][Sx("0x1f")]();var t,n=_createForOfIteratorHelper(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;this._destroySidebarItemView(r)}}catch(i){n.e(i)}finally{n.f()}this[Sx("0x11")][Sx("0xd")].clear(),this[Sx("0x11")][Sx("0x7")]="",this[Sx("0x26")]=null}},{key:Sx("0x16"),value:function(e,t){var n=this;t||(t=e[Sx("0x11")]);var r=new Tx(this.context[Sx("0x3c")]);this[Sx("0x3")][Sx("0x8")](r,e),this[Sx("0x17")][Sx("0x8")](e,r),r[Sx("0x14")][Sx("0xb")](t),this[Sx("0x30")](r),this[Sx("0x3a")](e[Sx("0x11")],Sx("0x12"),(function(){var e=n[Sx("0x0")](r);r[Sx("0x1a")]!=e&&(r._targetTop=e,n[Sx("0x13")](r,e))})),this[Sx("0x3a")](r,Sx("0x2b"),od((function(){if(r[Sx("0x14")][Sx("0x2")]){var e=n._getItemBefore(r);if(e){var t=n[Sx("0x3")].get(e),i=n[Sx("0xe")];i&&i===t?n[Sx("0x2d")](e,r):n[Sx("0x3b")](r,e)}}}),10,{leading:!1})),this.listenTo(r,Sx("0x3f"),od((function(){if(r.content.length){var e=n[Sx("0x10")](r);if(e){var t=n[Sx("0x3")][Sx("0x35")](e),i=n.context[Sx("0x38")][Sx("0x35")]("sidebar.preventScrollOutOfView"),o=n._activeAnnotation;o&&o===t&&i?(n[Sx("0x3b")](e,r),n._alignAfterItem(r,e)):o&&o===t?n[Sx("0x3b")](e,r):n[Sx("0x2d")](r,e)}}}),10,{leading:!1}));var i=this[Sx("0x34")](r);return i&&this._alignAfterItem(i,r)||this[Sx("0x30")](r),this[Sx("0x37")](),this[Sx("0x11")][Sx("0xd")][Sx("0xb")](r),r}},{key:Sx("0x39"),value:function(e){return this[Sx("0x17")].get(e)}},{key:Sx("0x3d"),value:function(){this[Sx("0x11")][Sx("0x3d")]()}},{key:Sx("0x25"),value:function(e){var t=this[Sx("0x39")](e);this.stopListening(t),this[Sx("0x1e")](e[Sx("0x11")]),t[Sx("0x3d")](),this[Sx("0x17")][Sx("0x20")](e),this[Sx("0x3")][Sx("0x20")](t)}},{key:"_createSidebarView",value:function(){var e=new bx(this[Sx("0x3e")][Sx("0x3c")]);return e[Sx("0x18")](),this.on(Sx("0x21"),(function(t,n,r,i){i&&e[Sx("0x22")](Sx("0xa")),r?e.bind(Sx("0xa")).to(r,"bottom"):e[Sx("0xa")]=null})),e}},{key:Sx("0x37"),value:function(){this._lastItem=this[Sx("0x39")](this[Sx("0x41")][Sx("0x1c")])}},{key:Sx("0x34"),value:function(e){var t=this[Sx("0x3")][Sx("0x35")](e),n=this[Sx("0x41")].get(this[Sx("0x41")][Sx("0xc")](t)-1);return n&&this.getSidebarItemView(n)}},{key:Sx("0x10"),value:function(e){var t=this[Sx("0x3")][Sx("0x35")](e),n=this[Sx("0x41")][Sx("0x35")](this[Sx("0x41")][Sx("0xc")](t)+1);return n&&this[Sx("0x39")](n)}},{key:Sx("0x3b"),value:function(e,t){e[Sx("0x15")]();var n=Ix(t[Sx("0x1")]+this._spaceBetweenItems,e[Sx("0x2c")]);return!!n&&(this._setItemTop(t,t[Sx("0x2c")]-n),!0)}},{key:"_alignAfterItem",value:function(e,t){e[Sx("0x15")]();var n=Ix(e[Sx("0x1")]+this._spaceBetweenItems,t[Sx("0x2c")]);return!!n&&(this[Sx("0x13")](t,t[Sx("0x2c")]+n,!1),!0)}},{key:Sx("0x30"),value:function(e){var t=this[Sx("0x3")].get(e);if(t&&t[Sx("0x1d")]){var n=this[Sx("0x0")](e);this._setItemTop(e,n)}}},{key:"_getTargetTop",value:function(e){var t=this[Sx("0x3")].get(e);if(t[Sx("0x1d")]instanceof bi)return t[Sx("0x4")][Sx("0x2c")];var n=new bi(this[Sx("0x11")][Sx("0x29")])[Sx("0x2c")];return t[Sx("0x4")][Sx("0x2c")]-n}},{key:"_setItemTop",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this[Sx("0x3e")][Sx("0x38")][Sx("0x35")]("sidebar.preventScrollOutOfView");n&&(t=Math[Sx("0x40")](t,this._getMaxAvailableTop(e))),e.top=t}},{key:"_getMaxAvailableTop",value:function(e){for(var t=this[Sx("0x34")](e),n=0;t;)t[Sx("0x15")](),n+=this[Sx("0x32")]+t[Sx("0x31")],t=this._getItemBefore(t);return n}}],[{key:"pluginName",get:function(){return Sx("0x33")}}]),n}(it);function Ix(e,t){return Math[Sx("0x40")](e-t,0)}var Ox=["_detachFromContainer","editors","uiUpdate","resize","high","EditorAnnotations","get","rearrange","setActiveAnnotation","switchTo","_activeAnnotation","focus","plugins","cancel","register","init","_destroyEditorAnnotationsIntegration","_annotations","updateTargetRect","stopListening","context","_editorAnnotations","attach","removeEventListener","activeAnnotation","stop","detach","listenTo","widesidebar-attach-already-attached","off","set","refreshPositioning","getOrderedSelectedAnnotations","ck-sidebar--wide","widesidebar-detach-not-attached","wideSidebar","container","WideSidebar","has","_integrateWithEditorAnnotations","addAnnotation","isAttached","add","pluginName","refresh","_throttledPositioningRefresh","remove","Sidebar","blur"];!function(e,t){!function(t){for(;--t;)e.push(e.shift())}(++t)}(Ox,296);var Rx=function(e,t){return Ox[e-=0]},Px=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this,e))[Rx("0x27")]=!1,r[Rx("0x1c")](Rx("0x16"),null),r._annotations=null,r._editorAnnotations=new $e.default,r[Rx("0x2b")]=od((function(){r[Rx("0xf")][Rx("0x1d")]()}),400,{leading:!1}),r}return _createClass(n,[{key:Rx("0xd"),value:function(){var e=this.context.plugins[Rx("0x4")](mx),t=this[Rx("0x12")][Rx("0xa")][Rx("0x4")](Ex);e[Rx("0xc")](Rx("0x21"),this),t[Rx("0x22")]&&e[Rx("0x7")](Rx("0x21"))}},{key:Rx("0x6"),value:function(e){if(e!==this[Rx("0x16")]){var t=this[Rx("0x12")][Rx("0xa")][Rx("0x4")](Ex);t[Rx("0x8")]=e;var n=this[Rx("0x16")];this[Rx("0x16")]=e,t[Rx("0x2a")]({blurredAnnotation:n,activatedAnnotation:this[Rx("0x16")]})}}},{key:Rx("0x14"),value:function(e){var t=this;this[Rx("0xf")]=e;var n=this.context[Rx("0xa")][Rx("0x4")](Rx("0x2d"));if(n[Rx("0xf")]=e,this[Rx("0x27")])throw new Ke.default(Rx("0x1a"),this);this.isAttached=!0,this[Rx("0x19")](n,"set:container",(function(){t[Rx("0x18")](),t.listenTo(n,"change:container",(function(n){n[Rx("0x1b")](),t[Rx("0x14")](e)}))})),n._attachToContainer({viewClass:Rx("0x1f")});var r,i=function(e){e[Rx("0x10")](),n[Rx("0x26")](e)},o=_createForOfIteratorHelper(e);try{for(o.s();!(r=o.n()).done;){var a=r.value;i(a)}}catch(d){o.e(d)}finally{o.f()}this[Rx("0x19")](e,Rx("0x28"),(function(e,t){i(t)})),this.listenTo(e,Rx("0x2c"),(function(r,i,o){n[Rx("0x5")]({removedAnnotation:i,previousAnnotation:e[Rx("0x4")](o-1),nextAnnotation:e[Rx("0x4")](o+1)}),i===t[Rx("0x16")]&&t[Rx("0x6")](null)}),{priority:Rx("0x2")}),this[Rx("0x19")](e,Rx("0x9"),(function(e,n){t.setActiveAnnotation(n)})),this[Rx("0x19")](e,Rx("0x2e"),(function(){t.setActiveAnnotation(null)}));var s,c=this[Rx("0x12")][Rx("0x30")]?this.context[Rx("0x30")]:new $e.default([this.context]),l=_createForOfIteratorHelper(c);try{for(l.s();!(s=l.n()).done;){var u=s.value;this[Rx("0x25")](u)}}catch(d){l.e(d)}finally{l.f()}this[Rx("0x19")](c,Rx("0x28"),(function(e,n){t[Rx("0x19")](n,"ready",(function(){t[Rx("0x25")](n)}))})),this[Rx("0x19")](c,"remove",(function(e,n){n[Rx("0xa")][Rx("0x24")](Rx("0x3"))&&t._destroyEditorAnnotationsIntegration(n[Rx("0xa")][Rx("0x4")](Rx("0x3")))})),window.addEventListener("resize",this[Rx("0x2b")]),this[Rx("0xf")][Rx("0x1d")]()}},{key:Rx("0x18"),value:function(){if(!this[Rx("0x27")])throw new Ke.default(Rx("0x20"),this);this[Rx("0x6")](null);var e=this[Rx("0x12")].plugins.get(Ex);e[Rx("0x2f")](this[Rx("0xf")]),this[Rx("0x11")](e),this[Rx("0x11")](this[Rx("0xf")]),this.stopListening(this.context[Rx("0x30")]);for(var t=0,n=Array.from(this[Rx("0x13")]);t<n.length;t++){var r=n[t];this[Rx("0xe")](r)}window[Rx("0x15")](Rx("0x1"),this._throttledPositioningRefresh),this._throttledPositioningRefresh[Rx("0xb")](),this[Rx("0x16")]=null,this[Rx("0x27")]=!1}},{key:"destroy",value:function(){this[Rx("0x27")]&&this[Rx("0x18")]()}},{key:Rx("0x25"),value:function(e){var t=this,n=e[Rx("0xa")].get(Rx("0x3"));if(n){var r=function(){var e=n[Rx("0x1e")]({annotations:t[Rx("0xf")],activeAnnotation:t.activeAnnotation});t.setActiveAnnotation(e[0]||null)};this[Rx("0x19")](n,Rx("0x2a"),r),this[Rx("0x19")](n,Rx("0x2e"),(function(e,n){var r=n.isAnnotationTracked;t[Rx("0x16")]&&r(t[Rx("0x16")])&&t[Rx("0x6")](null)})),this[Rx("0x19")](n,Rx("0x0"),(function(){t._annotations[Rx("0x1d")]()})),this[Rx("0x19")](this[Rx("0xf")],Rx("0x2e"),(function(e){n.hasDomSelection()&&(r(),e[Rx("0x17")]())}),{priority:"high"}),this[Rx("0x13")][Rx("0x28")](n)}}},{key:"_destroyEditorAnnotationsIntegration",value:function(e){e&&(this[Rx("0x11")](e),this[Rx("0x13")][Rx("0x2c")](e))}}],[{key:"requires",get:function(){return[Ex,mx]}},{key:Rx("0x29"),get:function(){return Rx("0x23")}}]),n}(it),Mx=n(173),Nx=n.n(Mx),Dx=["annotationType","counterView","_badge","icon","ck-annotation-counter__badge--","bindTemplate","isDirty","span","set","ck-annotation-counter__badge--edit-mode","setTemplate","...","bind"];!function(e,t){!function(t){for(;--t;)e.push(e.shift())}(++t)}(Dx,295);var Fx=function(e,t){return Dx[e-=0]},jx=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;_classCallCheck(this,n);var i=(r=t.call(this,e))[Fx("0x9")];return r.set(Fx("0xa"),!1),r.set("number",0),r[Fx("0x3")](Fx("0x6")).to(_assertThisInitialized(r),Fx("0xa"),_assertThisInitialized(r),"number",(function(e,t){return e?Fx("0x2"):t})),r[Fx("0xc")]("annotationType",""),r[Fx("0x7")]=Nx.a,r.extendTemplate({attributes:{class:["ck-annotation-counter"]}}),r[Fx("0x5")]=new kc,r[Fx("0x5")][Fx("0x1")]({tag:Fx("0xb"),attributes:{class:["ck-annotation-counter__badge",i.to(Fx("0x4"),(function(e){return Fx("0x8")+e})),i.if(Fx("0xa"),Fx("0x0"))]},children:[{text:i.to(Fx("0x6"))}]}),r.children.add(r.counterView),r}return n}(zc);n(392);var Lx=["narrowsidebar-attach-already-attached","_manuallyClosedAnnotationViews","destroy","values","setActiveAnnotation","stop","Esc","from","_detachFromContainer","_showBalloon","ready","refresh","set:container","contains","isDirty","_annotationToNarrowView","_refreshPositioning","hasDomSelection","plugins","low","refreshPositioning","uiUpdate","add","_selectedAnnotations","_domEmitter","_attachListeners","number","get","element","target","content","_hideBalloon","esc","view","keydown","high","_throttledRefreshPositioning","_editorAnnotations","remove","addAnnotation","set","_integrateWithEditorAnnotations","create","southArrowNorthWest","narrowsidebar-detach-not-attached","resize","init","balloonPanelView","context","change:height","activeAnnotation","listenTo","bodyCollection","delete","editors","NarrowSidebar","has","includes","getByView","unpin","rearrange","northArrowSouthWest","isVisible","isAttached","EditorAnnotations","_updateBalloonPosition","_annotations","blur","getOrderedSelectedAnnotations","clear","addEventListener","first","Sidebar","focus","length","attachToDom","ck-sidebar--narrow","stopListening","_destroyEditorAnnotationsIntegration","locale","defaultPositions","attach","mousedown","_setSelectedAnnotations","detach","narrowSidebar","cancel","keyCode","_detachListeners","preventDefault","off","preventClosingBalloon","_attachToContainer"];!function(e,t){!function(t){for(;--t;)e.push(e.shift())}(++t)}(Lx,199);var Vx=function(e,t){return Lx[e-=0]},Bx=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this,e))[Vx("0x32")]=!1,r[Vx("0x51")]=new Set,r[Vx("0xb")]=Object[Vx("0x1d")](Or),r[Vx("0x2")]=new Map,r[Vx("0x1b")](Vx("0x25"),null),r._annotations=null,r[Vx("0xa")]=[],r[Vx("0x18")]=new $e.default,r[Vx("0x17")]=od((function(){r[Vx("0x3")]()}),400,{leading:!1}),r}return _createClass(n,[{key:Vx("0x21"),value:function(){this[Vx("0x23")][Vx("0x5")][Vx("0xe")](mx).register(Vx("0x48"),this),this[Vx("0x27")]=new Lc(this.context.locale),this[Vx("0x22")]=new Sl(this[Vx("0x23")][Vx("0x42")]),this[Vx("0x27")][Vx("0x3e")](),this[Vx("0x27")][Vx("0x9")](this[Vx("0x22")])}},{key:Vx("0x44"),value:function(e){var t=this;this[Vx("0x35")]=e;var n=this[Vx("0x23")][Vx("0x5")].get(Ex),r=this.balloonPanelView;if(n[Vx("0x35")]=e,this[Vx("0x32")])throw new Ke.default(Vx("0x50"),this);this[Vx("0x32")]=!0,this.listenTo(n,Vx("0x5c"),(function(){t[Vx("0x47")](),t[Vx("0x26")](n,"change:container",(function(n){n[Vx("0x4d")](),t[Vx("0x44")](e)}))})),n[Vx("0x4f")]({viewClass:Vx("0x3f"),spaceBetweenItems:5});var i,o=function(e){var i=new jx(t[Vx("0x23")][Vx("0x42")]);n[Vx("0x1a")](e,i),t[Vx("0x2")].set(e,i),i.bind(Vx("0x1"),"annotationType",Vx("0xd")).to(e.view,Vx("0x1"),"type",Vx("0x3d")),i.on("execute",(function(){t[Vx("0x51")].clear(),r[Vx("0x11")][Vx("0x3a")]!==e.view?(t[Vx("0x59")](e),e[Vx("0x14")][Vx("0xf")][Vx("0x3c")](),t[Vx("0x54")](e)):t.setActiveAnnotation(null)}))},a=_createForOfIteratorHelper(e);try{for(a.s();!(i=a.n()).done;){var s=i.value;o(s)}}catch(f){a.e(f)}finally{a.f()}this[Vx("0x26")](e,Vx("0x9"),(function(e,t){o(t)})),this[Vx("0x26")](e,"remove",(function(r,i,o){t._annotationToNarrowView.get(i)[Vx("0x52")](),t[Vx("0x2")][Vx("0x28")](i),n[Vx("0x2f")]({removedAnnotation:i,previousAnnotation:e[Vx("0xe")](o-1),nextAnnotation:e[Vx("0xe")](o+1)}),i===t[Vx("0x25")]&&t[Vx("0x54")](null)}),{priority:Vx("0x6")}),this[Vx("0x26")](e,Vx("0x3c"),(function(e,n){t[Vx("0x54")](n)})),this[Vx("0x26")](e,Vx("0x36"),(function(){t[Vx("0x54")](null)})),this[Vx("0xb")][Vx("0x26")](document,Vx("0x15"),(function(e,n){n[Vx("0x4a")]===On[Vx("0x13")]&&r[Vx("0x31")]&&(t[Vx("0x51")][Vx("0x9")](r[Vx("0x11")][Vx("0x3a")]),t[Vx("0x12")](),n.stopPropagation(),n[Vx("0x4c")]())})),this[Vx("0xb")][Vx("0x26")](document,Vx("0x45"),(function(e,i){var o=i[Vx("0x10")];r[Vx("0x31")]&&r.element[Vx("0x0")](o)||n[Vx("0x14")][Vx("0xf")][Vx("0x0")](o)||e[Vx("0x4e")]||(t[Vx("0x51")].clear(),t._hideBalloon(),t[Vx("0x54")](null))}));var c,l=this[Vx("0x23")][Vx("0x29")]?this[Vx("0x23")][Vx("0x29")]:new $e.default([this[Vx("0x23")]]),u=_createForOfIteratorHelper(l);try{for(u.s();!(c=u.n()).done;){var d=c.value;this[Vx("0x1c")](d)}}catch(f){u.e(f)}finally{u.f()}this[Vx("0x26")](l,Vx("0x9"),(function(e,n){t[Vx("0x26")](n,Vx("0x5a"),(function(){t[Vx("0x1c")](n)}))})),this[Vx("0x26")](l,Vx("0x19"),(function(e,n){n[Vx("0x5")][Vx("0x2b")](Vx("0x33"))&&t[Vx("0x41")](n[Vx("0x5")][Vx("0xe")](Vx("0x33")))})),window[Vx("0x39")]("resize",this._throttledRefreshPositioning),this[Vx("0x3")]()}},{key:Vx("0x54"),value:function(e){if(e!==this.activeAnnotation){var t=this.context[Vx("0x5")][Vx("0xe")](Vx("0x3b"));t[Vx("0x5b")]({blurredAnnotation:this.activeAnnotation,activatedAnnotation:e,disableAnimationOnActivatedAnnotation:!0}),e&&t.getSidebarItemView(e)?this._showBalloon(e):this[Vx("0x12")](),this[Vx("0x25")]=e}}},{key:"detach",value:function(){if(!this[Vx("0x32")])throw new Ke.default(Vx("0x1f"),this);this[Vx("0x54")](null);var e=this[Vx("0x23")][Vx("0x5")].get("Sidebar");this[Vx("0x12")](),Array[Vx("0x57")](this[Vx("0x2")][Vx("0x53")](),(function(e){return e.destroy()})),this[Vx("0x2")][Vx("0x38")](),e[Vx("0x58")](this[Vx("0x35")]),this[Vx("0x40")](),this._domEmitter[Vx("0x40")](),this[Vx("0x40")](this.context[Vx("0x29")]);var t,n=_createForOfIteratorHelper(Array[Vx("0x57")](this._editorAnnotations));try{for(n.s();!(t=n.n()).done;){var r=t.value;this[Vx("0x41")](r)}}catch(i){n.e(i)}finally{n.f()}window.removeEventListener(Vx("0x20"),this[Vx("0x17")]),this[Vx("0x17")][Vx("0x49")](),this[Vx("0xa")]=[],this[Vx("0x32")]=!1,this._annotations=null}},{key:Vx("0x52"),value:function(){this[Vx("0x32")]&&this[Vx("0x47")](),this[Vx("0x27")].detachFromDom()}},{key:"_integrateWithEditorAnnotations",value:function(e){var t=this,n=e[Vx("0x5")][Vx("0xe")](Vx("0x33")),r=this[Vx("0x23")][Vx("0x5")][Vx("0xe")](Ex),i=this[Vx("0x35")],o=this[Vx("0x22")],a=function(){var e=n[Vx("0x37")]({activeAnnotation:t.activeAnnotation,annotations:t[Vx("0x35")]});t._setSelectedAnnotations(e),t[Vx("0x54")](e[0]||null)};this[Vx("0x26")](n,Vx("0x5b"),a),this[Vx("0x26")](n,Vx("0x36"),(function(e,n){var r=n.isAnnotationTracked;t[Vx("0x25")]&&r(t[Vx("0x25")])&&(t._setSelectedAnnotations([]),t[Vx("0x54")](null))})),this[Vx("0x26")](n,Vx("0x8"),(function(){t._throttledRefreshPositioning()})),this[Vx("0x26")](i,Vx("0x36"),(function(e){n[Vx("0x4")]()&&e[Vx("0x55")]()}),{priority:Vx("0x16")}),this[Vx("0xb")][Vx("0x26")](document,Vx("0x45"),(function(e,i){var s=i[Vx("0x10")];o[Vx("0x31")]&&o[Vx("0xf")][Vx("0x0")](s)||r[Vx("0x14")].element.contains(s)||t[Vx("0x25")]&&n.hasDomSelection()&&(a(),e[Vx("0x4e")]=!0)}),{priority:"high"}),this[Vx("0x18")][Vx("0x9")](n)}},{key:Vx("0x41"),value:function(e){e&&(this.stopListening(e),this[Vx("0x18")][Vx("0x19")](e))}},{key:Vx("0x46"),value:function(e){var t,n=_createForOfIteratorHelper(this[Vx("0xa")]);try{for(n.s();!(t=n.n()).done;){var r=t.value;e[Vx("0x2c")](r)||this[Vx("0x51")].delete(r[Vx("0x14")])}}catch(i){n.e(i)}finally{n.f()}this._selectedAnnotations=e}},{key:Vx("0x3"),value:function(){var e=this[Vx("0x22")];this[Vx("0x35")][Vx("0x7")](),e.isVisible&&this[Vx("0x34")]()}},{key:Vx("0x59"),value:function(e){if(!this[Vx("0x51")][Vx("0x2b")](e[Vx("0x14")])){var t=this[Vx("0x22")].content[Vx("0x3a")];t!==e[Vx("0x14")]?(t&&this[Vx("0x4b")](t),this[Vx("0xc")](e[Vx("0x14")]),this[Vx("0x22")][Vx("0x11")][Vx("0x38")](),this[Vx("0x22")][Vx("0x11")][Vx("0x9")](e.view),this[Vx("0x34")]()):this[Vx("0x34")]()}}},{key:Vx("0x34"),value:function(){var e=this.balloonPanelView.content[Vx("0x3a")],t=this._annotations[Vx("0x2d")](e);if(this._annotationToNarrowView.has(t)){var n=this[Vx("0x2")].get(t)[Vx("0xf")],r=function(){var e=Sl[Vx("0x43")];return[e.southArrowNorthEast,e.northArrowSouthEast,e.southArrowNorth,e.northArrowSouth,e[Vx("0x1e")],e[Vx("0x30")]]}();this[Vx("0x22")].pin({target:n,positions:r})}}},{key:Vx("0x12"),value:function(){var e=this.balloonPanelView,t=e[Vx("0x11")][Vx("0x3a")];t&&(this[Vx("0x4b")](t),e[Vx("0x2e")](),e[Vx("0x11")][Vx("0x38")]())}},{key:Vx("0xc"),value:function(e){var t=this;this[Vx("0x26")](e,Vx("0x24"),(function(){return t[Vx("0x34")]()})),this[Vx("0x26")](e,Vx("0x56"),(function(n,r){t[Vx("0x51")][Vx("0x9")](e),t[Vx("0x12")](),r()}))}},{key:"_detachListeners",value:function(e){this.stopListening(e)}}],[{key:"requires",get:function(){return[Ex,mx]}},{key:"pluginName",get:function(){return Vx("0x2a")}}]),n}(it);n(394);var zx=["_balloon","init","includes","_selectedAnnotations","updatePosition","listenTo","activeAnnotation","destroy","detach","editing","hasActive","pluginName","get","document","context","change:isFocused","inlineannotations-attach-already-attached","_removeAnnotationFromBalloon","Esc","targetRect","hasView","_addedAnnotations","set","selection","plugins","attach","setActiveAnnotation","stopListening","visibleView","inlineannotations-detach-not-attached","requires","view","_manuallyClosed","isActive","_annotations","change:height","focusTracker","editor","keystrokes","editableElement","has","getByView","inlineannotations-not-allowed-with-context","_setSelectedAnnotations","bind","EditorAnnotations","focus","delete","_addAnnotationToBalloon","isAttached","add","refresh","addObserver","remove","update"];!function(e,t){!function(t){for(;--t;)e.push(e.shift())}(++t)}(zx,167);var Hx=function(e,t){return zx[e-=0]},Ux=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),r=t.call(this,e),e[Hx("0x7")][Hx("0x1d")][Hx("0x32")](ou),r[Hx("0x2f")]=!1,r[Hx("0x14")](Hx("0x4"),null),r[Hx("0x20")]=null,r[Hx("0x1e")]=new Set,r[Hx("0x35")]=e.plugins[Hx("0xa")](Fl),r._addedAnnotations=new Set,r[Hx("0x1")]=[],r}return _createClass(n,[{key:Hx("0x36"),value:function(){var e=this,t=this[Hx("0x23")][Hx("0x16")][Hx("0xa")](mx);t[Hx("0xc")]===this[Hx("0x23")]&&(t.register("inline",this),this[Hx("0x23")][Hx("0x24")][Hx("0x14")]("Esc",(function(t,n){var r=e[Hx("0x35")];if(e[Hx("0x2f")]&&r[Hx("0x1a")]){var i=e._annotations[Hx("0x27")](r[Hx("0x1a")]);e._manuallyClosed.add(i),e[Hx("0xf")](i),n()}})))}},{key:"afterInit",value:function(){var e=this[Hx("0x23")].plugins.get(mx);e[Hx("0xc")]===this[Hx("0x23")]&&(e[Hx("0x8")]()||e.switchTo("inline"))}},{key:Hx("0x18"),value:function(e){e!==this.activeAnnotation&&(this[Hx("0x4")]&&(this[Hx("0x4")][Hx("0x1f")]=!1),e&&this.editor.ui[Hx("0x22")].isFocused&&(this[Hx("0x2e")](e,!0),e[Hx("0x1f")]=!0),e||this[Hx("0x29")]([]),this[Hx("0x4")]=e)}},{key:Hx("0x17"),value:function(e){var t=this;this[Hx("0x20")]=e;var n=this[Hx("0x23")][Hx("0x16")][Hx("0xa")](mx),r=this[Hx("0x35")];if(this.isAttached)throw new Ke.default(Hx("0xe"),this);if(n[Hx("0xc")]!==this[Hx("0x23")])throw new Ke.default(Hx("0x28"),this);var i=this[Hx("0x23")][Hx("0x16")][Hx("0xa")](Hx("0x2b"));this[Hx("0x3")](i,Hx("0x31"),(function(){var e=i.getOrderedSelectedAnnotations({activeAnnotation:this[Hx("0x4")],annotations:this._annotations});this._setSelectedAnnotations(e),this[Hx("0x18")](e[0]||null)})[Hx("0x2a")](this)),this.listenTo(i,"blur",(function(e,n){var r=n.isAnnotationTracked;t.activeAnnotation&&r(t.activeAnnotation)&&(t[Hx("0x29")]([]),t.setActiveAnnotation(null))})),this.listenTo(this[Hx("0x23")].ui[Hx("0x22")],Hx("0xd"),(function(e,n,r){r||t[Hx("0x18")](null)})),this[Hx("0x3")](e,Hx("0x33"),(function(e,n){t[Hx("0xf")](n),n===t[Hx("0x4")]&&t[Hx("0x18")](null)})),this[Hx("0x3")](r,"change:visibleView",(function(n,i,o,a){if(a&&t[Hx("0x19")](a),o&&e.getByView(o)){var s=e[Hx("0x27")](o);t[Hx("0x3")](o,Hx("0x21"),(function(){r[Hx("0x2")]()})),t[Hx("0x3")](o,Hx("0x10"),(function(){t._manuallyClosed[Hx("0x30")](s),t[Hx("0xf")](s),t[Hx("0x23")][Hx("0x7")][Hx("0x1d")].focus()})),t[Hx("0x4")]!==s&&t[Hx("0x18")](s)}})),this.listenTo(this[Hx("0x23")].ui,Hx("0x34"),(function(){r[Hx("0x1a")]&&e[Hx("0x27")](r[Hx("0x1a")])&&r[Hx("0x2")]()})),this[Hx("0x3")](this.editor[Hx("0x7")][Hx("0x1d")].document,"mousedown",(function(){t._manuallyClosed.clear()})),this[Hx("0x23")][Hx("0x7")][Hx("0x1d")][Hx("0xb")][Hx("0x15")][Hx("0x25")]&&this[Hx("0x23")][Hx("0x7")][Hx("0x1d")][Hx("0x2c")](),this[Hx("0x2f")]=!0}},{key:"detach",value:function(){if(!this[Hx("0x2f")])throw new Ke.default(Hx("0x1b"),this);this[Hx("0x18")](null);var e,t=_createForOfIteratorHelper(this._addedAnnotations);try{for(t.s();!(e=t.n()).done;){var n=e.value;this[Hx("0xf")](n)}}catch(r){t.e(r)}finally{t.f()}this[Hx("0x19")](),this.isAttached=!1}},{key:Hx("0x5"),value:function(){this[Hx("0x2f")]&&this[Hx("0x6")]()}},{key:"_setSelectedAnnotations",value:function(e){var t,n=_createForOfIteratorHelper(this._selectedAnnotations);try{for(n.s();!(t=n.n()).done;){var r=t.value;e[Hx("0x0")](r)||this[Hx("0x1e")][Hx("0x2d")](r)}}catch(u){n.e(u)}finally{n.f()}var i,o=_createForOfIteratorHelper(this._annotations);try{for(o.s();!(i=o.n()).done;){var a=i.value;e[Hx("0x0")](a)||this._removeAnnotationFromBalloon(a)}}catch(u){o.e(u)}finally{o.f()}if(this[Hx("0x23")].ui[Hx("0x22")].isFocused){var s,c=_createForOfIteratorHelper(e);try{for(c.s();!(s=c.n()).done;){var l=s.value;this[Hx("0x2e")](l)}}catch(u){c.e(u)}finally{c.f()}}this[Hx("0x1")]=e}},{key:Hx("0x2e"),value:function(e,t){this[Hx("0x1e")][Hx("0x26")](e)||(this._addedAnnotations[Hx("0x26")](e)||this[Hx("0x35")][Hx("0x12")](e[Hx("0x1d")])||(this[Hx("0x13")][Hx("0x30")](e),this[Hx("0x35")][Hx("0x30")]({stackId:e[Hx("0x1d")].id,view:e[Hx("0x1d")],position:{target:function(){return e.target||e[Hx("0x11")]||document.getSelection().getRangeAt(0)}}})),t&&this[Hx("0x35")].showStack(e.view.id))}},{key:Hx("0xf"),value:function(e){this[Hx("0x13")][Hx("0x26")](e)&&this[Hx("0x35")][Hx("0x12")](e[Hx("0x1d")])&&(this[Hx("0x13")][Hx("0x2d")](e),this[Hx("0x35")][Hx("0x33")](e[Hx("0x1d")]))}}],[{key:Hx("0x1c"),get:function(){return[cx,Fl,mx]}},{key:Hx("0x9"),get:function(){return"InlineAnnotations"}}]),n}(d),Wx=["pluginName"];!function(e,t){!function(t){for(;--t;)e.push(e.shift())}(++t)}(Wx,488);var qx=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,null,[{key:"requires",get:function(){return[Mw,nx,dx,px,Px,Bx,Ux]}},{key:function(e,t){return Wx[e-=0]}("0x0"),get:function(){return"Comments"}}]),n}(d),Yx=["get","data","editor","destroy","change:state","connected","isThreadsLoadingPaused","plugins","config","switchReadOnly","RealTimeCollaborativeComments","collaboration.channelId","init","listenTo","setUpService","terminateService"];!function(e,t){!function(t){for(;--t;)e.push(e.shift())}(++t)}(Yx,128);var Gx=function(e,t){return Yx[e-=0]},Jx=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:Gx("0xc"),value:function(){var e=this,t=this[Gx("0x2")][Gx("0x7")][Gx("0x0")](Ky),n=this[Gx("0x2")][Gx("0x7")][Gx("0x0")](nx),r=this.editor.plugins[Gx("0x0")](zw);return this[Gx("0x2")][Gx("0x1")].once("ready",(function(){e.listenTo(t,Gx("0x4"),(function(e,t,r){n[Gx("0x6")]=Gx("0x5")!==r}))})),this[Gx("0xd")](t,Gx("0x4"),(function(t,n,r){e.editor[Gx("0x7")][Gx("0x0")](Mw)[Gx("0x9")](Gx("0x5")!==r)})),r[Gx("0xe")](this.editor[Gx("0x8")][Gx("0x0")]("collaboration.channelId"))}},{key:"destroy",value:function(){this[Gx("0x2")][Gx("0x7")][Gx("0x0")](zw)[Gx("0xf")](this[Gx("0x2")][Gx("0x8")][Gx("0x0")](Gx("0xb"))),_get3(_getPrototypeOf(n.prototype),Gx("0x3"),this).call(this)}}],[{key:"requires",get:function(){return[qx,nx,zw,M_,Ky]}},{key:"pluginName",get:function(){return Gx("0xa")}}]),n}(d),$x=n(174),Kx=n.n($x),Qx=["_disableUnsupportedCommands","has","clearForceDisabled","_enableCommands","editor","TrackChangesCommand","execute","isEnabled","refresh","_enabledCommands","value","commands"];!function(e,t){!function(t){for(;--t;)e.push(e.shift())}(++t)}(Qx,240);var Zx=function(e,t){return Qx[e-=0]},Xx=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var i;return _classCallCheck(this,n),(i=t.call(this,e))[Zx("0x9")]=r,i[Zx("0xa")]=!1,i[Zx("0x8")](),i}return _createClass(n,[{key:Zx("0x8"),value:function(){this[Zx("0x7")]=!0}},{key:Zx("0x6"),value:function(){this[Zx("0xa")]=!this.value,this[Zx("0xa")]?this._disableUnsupportedCommands():this._enableCommands()}},{key:Zx("0x0"),value:function(){var e,t=_createForOfIteratorHelper(this[Zx("0x4")][Zx("0xb")].commands());try{for(t.s();!(e=t.n()).done;){var n=e.value;this[Zx("0x9")].has(n)||n.forceDisabled(Zx("0x5"))}}catch(r){t.e(r)}finally{t.f()}}},{key:Zx("0x3"),value:function(){var e,t=_createForOfIteratorHelper(this[Zx("0x4")].commands[Zx("0xb")]());try{for(t.s();!(e=t.n()).done;){var n=e.value;this._enabledCommands[Zx("0x1")](n)||n[Zx("0x2")](Zx("0x5"))}}catch(r){t.e(r)}finally{t.f()}}}]),n}(h),eC=["refresh","getAllAdjacentSuggestions","change","_suggestions","isEnabled","editor","get","track-changes-accept-suggestion-not-found","model","accept"];!function(e,t){!function(t){for(;--t;)e.push(e.shift())}(++t)}(eC,197);var tC=function(e,t){return eC[e-=0]},nC=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var i;return _classCallCheck(this,n),(i=t.call(this,e))[tC("0x6")]=r,i.refresh(),i}return _createClass(n,[{key:tC("0x3"),value:function(){this[tC("0x7")]=!0}},{key:"execute",value:function(e){var t=this[tC("0x6")][tC("0x9")](e);if(!t)throw new Ke.default(tC("0x0"),this);this[tC("0x8")][tC("0x1")][tC("0x5")]((function(){var e,n=_createForOfIteratorHelper(t[tC("0x4")]());try{for(n.s();!(e=n.n()).done;){e.value[tC("0x2")]()}}catch(r){n.e(r)}finally{n.f()}}))}}]),n}(h),rC=["execute","change","_suggestions","model","refresh","track-changes-discard-suggestion-not-found","get","discard","isEnabled"];!function(e,t){!function(t){for(;--t;)e.push(e.shift())}(++t)}(rC,378);var iC=function(e,t){return rC[e-=0]},oC=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var i;return _classCallCheck(this,n),(i=t.call(this,e))._suggestions=r,i[iC("0x4")](),i}return _createClass(n,[{key:"refresh",value:function(){this[iC("0x8")]=!0}},{key:iC("0x0"),value:function(e){var t=this[iC("0x2")][iC("0x6")](e);if(!t)throw new Ke.default(iC("0x5"),this);this.editor[iC("0x3")][iC("0x1")]((function(){var e,n=_createForOfIteratorHelper(t.getAllAdjacentSuggestions());try{for(n.s();!(e=n.n()).done;){e.value[iC("0x7")]()}}catch(r){n.e(r)}finally{n.f()}}))}}]),n}(h),aC=["deletion","sort","type"];!function(e,t){!function(t){for(;--t;)e.push(e.shift())}(++t)}(aC,148);var sC=function(e,t){return aC[e-=0]};function cC(e){return e[sC("0x0")]((function(e,t){return sC("0x2")==e[sC("0x1")]&&"deletion"!=t[sC("0x1")]?-1:"deletion"!=e[sC("0x1")]&&sC("0x2")==t[sC("0x1")]?1:0}))}var lC=["change","model","isInContent","execute","isEnabled","_acceptSuggestionCommand","editor","refresh","some","_suggestions","from"];!function(e,t){!function(t){for(;--t;)e.push(e.shift())}(++t)}(lC,294);var uC=function(e,t){return lC[e-=0]},dC=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i){var o;return _classCallCheck(this,n),(o=t.call(this,e))[uC("0x8")]=r,o._suggestions=i,o[uC("0xa")](),o}return _createClass(n,[{key:"refresh",value:function(){var e=this[uC("0x8")];this[uC("0x7")]=e[uC("0x7")]&&Array[uC("0x2")](this[uC("0x1")].values())[uC("0x0")]((function(e){return e[uC("0x5")]}))}},{key:uC("0x6"),value:function(){var e=this;this[uC("0x9")][uC("0x4")][uC("0x3")]((function(){var t,n=_createForOfIteratorHelper(cC(Array[uC("0x2")](e[uC("0x1")].values())));try{for(n.s();!(t=n.n()).done;){var r=t.value;r[uC("0x5")]&&e[uC("0x8")].execute(r.id)}}catch(i){n.e(i)}finally{n.f()}}))}}]),n}(h),fC=["isTouching","isMultiRange","getMarkers","next","isInContent","end","getRange","from","start","isCollapsed","add"];!function(e,t){!function(t){for(;--t;)e.push(e.shift())}(++t)}(fC,303);var hC=function(e,t){return fC[e-=0]};function pC(e,t){var n,r=Array[hC("0x1")](e.getRanges()),i=new Set,o=_createForOfIteratorHelper(t);try{for(o.s();!(n=o.n()).done;){var a=n.value;if(a[hC("0x9")]){var s,c=_createForOfIteratorHelper(r);try{for(c.s();!(s=c.n()).done;){var l,u=s.value,d=_createForOfIteratorHelper(a[hC("0x7")]());try{for(d.s();!(l=d.n()).done;){var f=l.value[hC("0x0")]();(u.isIntersecting(f)||e[hC("0x3")]&&!a[hC("0x6")]&&a[hC("0x8")]&&f[hC("0xa")][hC("0x5")](u[hC("0x2")]))&&i[hC("0x4")](a)}}catch(h){d.e(h)}finally{d.f()}}}catch(h){c.e(h)}finally{c.f()}}}}catch(h){o.e(h)}finally{o.f()}return i}var vC=["_selectedSuggestions","_acceptSuggestionCommand","size","model","values","refresh","editor","_suggestions","change","from","execute","selection","isEnabled","document"];!function(e,t){!function(t){for(;--t;)e.push(e.shift())}(++t)}(vC,474);var gC=function(e,t){return vC[e-=0]},mC=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i){var o;return _classCallCheck(this,n),(o=t.call(this,e))._acceptSuggestionCommand=r,o[gC("0x9")]=i,o[gC("0x2")]=new Set,o[gC("0x7")](),o}return _createClass(n,[{key:"refresh",value:function(){var e=this[gC("0x3")],t=this[gC("0x8")][gC("0x5")][gC("0x1")][gC("0xd")],n=Array[gC("0xb")](this[gC("0x9")][gC("0x6")]());this[gC("0x2")]=pC(t,n),this[gC("0x0")]=e[gC("0x0")]&&!!this[gC("0x2")][gC("0x4")]}},{key:"execute",value:function(){var e=this;this.editor[gC("0x5")][gC("0xa")]((function(){var t,n=_createForOfIteratorHelper(cC(Array.from(e[gC("0x2")])));try{for(n.s();!(t=n.n()).done;){var r=t.value;e[gC("0x3")][gC("0xc")](r.id)}}catch(i){n.e(i)}finally{n.f()}}))}}]),n}(h),yC=["from","isInContent","isEnabled","execute","_discardSuggestionCommand","editor","some","values","refresh","_suggestions"];!function(e,t){!function(t){for(;--t;)e.push(e.shift())}(++t)}(yC,209);var kC=function(e,t){return yC[e-=0]},_C=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i){var o;return _classCallCheck(this,n),(o=t.call(this,e))[kC("0x5")]=r,o[kC("0x0")]=i,o.refresh(),o}return _createClass(n,[{key:kC("0x9"),value:function(){var e=this[kC("0x5")];this[kC("0x3")]=e[kC("0x3")]&&Array[kC("0x1")](this[kC("0x0")][kC("0x8")]())[kC("0x7")]((function(e){return e[kC("0x2")]}))}},{key:kC("0x4"),value:function(){var e=this;this[kC("0x6")].model.change((function(){var t,n=_createForOfIteratorHelper(e._suggestions[kC("0x8")]());try{for(n.s();!(t=n.n()).done;){var r=t.value;r[kC("0x2")]&&e[kC("0x5")][kC("0x4")](r.id)}}catch(i){n.e(i)}finally{n.f()}}))}}]),n}(h),bC=["size","_selectedSuggestions","values","_discardSuggestionCommand","_suggestions","isEnabled","from","change","editor","model","document"];!function(e,t){!function(t){for(;--t;)e.push(e.shift())}(++t)}(bC,178);var wC=function(e,t){return bC[e-=0]},xC=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i){var o;return _classCallCheck(this,n),(o=t.call(this,e))[wC("0x1")]=r,o._suggestions=i,o[wC("0xa")]=new Set,o.refresh(),o}return _createClass(n,[{key:"refresh",value:function(){var e=this[wC("0x1")],t=this[wC("0x6")][wC("0x7")][wC("0x8")].selection,n=Array[wC("0x4")](this[wC("0x2")][wC("0x0")]());this[wC("0xa")]=pC(t,n),this[wC("0x3")]=e[wC("0x3")]&&!!this[wC("0xa")][wC("0x9")]}},{key:"execute",value:function(){var e=this;this.editor[wC("0x7")][wC("0x5")]((function(){var t,n=_createForOfIteratorHelper(e[wC("0xa")]);try{for(n.s();!(t=n.n()).done;){var r=t.value;e._discardSuggestionCommand.execute(r.id)}}catch(i){n.e(i)}finally{n.f()}}))}}]),n}(h),CC=["substr","removeMarkers","filter","hasComments","_onAccept","getFirstRange","accept","getRanges","decorate","setAttribute","type","markers","getAllAdjacentSuggestions","data","length","head","change","toJSON","_model","split","set","reduce","map","getItems","onDiscard","getMarkerNames","isIntersecting","clear","commentThread","next","isIntersectingWithRange","addMarker","start","from","nodeAfter","addRange","removeMarker","discard","isInContent","addMarkerName","getRange","onAccept","getFirstMarker","isMultiRange","getMultiRangeId","end","_markerNames","_onAttributesChange","nodeBefore","suggestion:","_onDiscard","size","author","delete","getMarkers","subType","getContainedElement","onAttributesChange","attributes","_saved"];!function(e,t){!function(t){for(;--t;)e.push(e.shift())}(++t)}(CC,498);var TC=function(e,t){return CC[e-=0]},AC=function(){function e(t,n){_classCallCheck(this,e),this.id=n.id,this[TC("0x34")]=n[TC("0x34")],this[TC("0x25")]=n[TC("0x25")]||null,this[TC("0x22")]=n[TC("0x22")],this[TC("0x37")]=null,this[TC("0x0")]=t,this[TC("0x2e")]=n[TC("0x17")],this[TC("0x20")]=n[TC("0x6")],this._onAttributesChange=n[TC("0x27")],this._markerNames=new Set,this.set("createdAt",null),this[TC("0x2")]("attributes",n.attributes||{}),this[TC("0x2")]("previous",null),this[TC("0x2")]("next",null),this[TC("0x2")](TC("0xa"),null),this[TC("0x2")](TC("0x29"),!1),this[TC("0x32")](TC("0x30")),this[TC("0x32")](TC("0x13"))}return _createClass(e,[{key:TC("0x39"),get:function(){for(var e=this;e.previous;)e=e.previous;return e}},{key:"hasComments",get:function(){return!!this[TC("0xa")]&&this[TC("0xa")][TC("0x38")]>0}},{key:TC("0x19"),get:function(){return 0!=this[TC("0x1c")][TC("0x21")]&&6==Array[TC("0xf")](this._markerNames)[0][TC("0x1")](":").length}},{key:TC("0x14"),get:function(){return null!==this[TC("0x18")]()}},{key:TC("0x15"),value:function(e){this._markerNames.add(e)}},{key:TC("0x7"),value:function(){return Array[TC("0xf")](this[TC("0x1c")])}},{key:"getMarkers",value:function(){var e=this;return this[TC("0x7")]()[TC("0x4")]((function(t){return e[TC("0x0")][TC("0x35")].get(t)}))[TC("0x2c")]((function(e){return e}))}},{key:TC("0x18"),value:function(){return this[TC("0x24")]()[0]||null}},{key:TC("0x2b"),value:function(){var e=this;this._model[TC("0x3a")]((function(t){var n,r=_createForOfIteratorHelper(e.getMarkers());try{for(r.s();!(n=r.n()).done;){var i=n.value;t[TC("0x12")](i)}}catch(o){r.e(o)}finally{r.f()}})),this._markerNames[TC("0x9")]()}},{key:"removeMarker",value:function(e){this[TC("0x0")].change((function(t){t[TC("0x12")](e)})),this._markerNames[TC("0x23")](e)}},{key:TC("0x11"),value:function(t){var n=TC("0x1f")+this.type+":"+this[TC("0x25")]+":"+this.id+":"+this[TC("0x22")].id+":"+e[TC("0x1a")]();this[TC("0x15")](n),this[TC("0x0")][TC("0x3a")]((function(e){e[TC("0xd")](n,{range:t,usingOperation:!0,affectsData:!0})}))}},{key:TC("0xc"),value:function(e){var t,n=_createForOfIteratorHelper(this[TC("0x31")]());try{for(n.s();!(t=n.n()).done;){if(t.value[TC("0x8")](e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"getRanges",value:function(){return this[TC("0x24")]()[TC("0x4")]((function(e){return e[TC("0x16")]()}))}},{key:TC("0x5"),value:function(){return this[TC("0x31")]()[TC("0x3")]((function(e,t){return[].concat(_toConsumableArray(e),_toConsumableArray(t[TC("0x5")]()))}),[])}},{key:TC("0x2f"),value:function(){return this.getFirstMarker()[TC("0x16")]()}},{key:TC("0x26"),value:function(){var e=this[TC("0x31")]();if(1!=e[TC("0x38")])return null;var t=e[0],n=t[TC("0xe")][TC("0x10")],r=t[TC("0x1b")][TC("0x1e")];return n instanceof Gi?n!=r?null:n:null}},{key:TC("0x30"),value:function(){this._onAccept(this[TC("0x31")](),this[TC("0x37")],this[TC("0x28")]),this.removeMarkers()}},{key:TC("0x13"),value:function(){this[TC("0x20")](this[TC("0x31")](),this[TC("0x37")],this[TC("0x28")]),this[TC("0x2b")]()}},{key:TC("0x36"),value:function(){for(var e=[],t=this.head;t;)e.push(t),t=t[TC("0xb")];return e}},{key:TC("0x33"),value:function(e,t){var n=_o(this.attributes);Ht(n,e,t),ya(n,this[TC("0x28")])||(this[TC("0x28")]=n,this[TC("0x1d")](n))}},{key:"removeAttribute",value:function(e){var t=_o(this[TC("0x28")]);Ot(t,e),ya(t,this.attributes)||(this[TC("0x28")]=t,this._onAttributesChange(this[TC("0x28")]))}},{key:TC("0x3b"),value:function(){return{id:this.id,type:this[TC("0x25")]?this.type+":"+this.subType:this[TC("0x34")],authorId:this[TC("0x22")].id,createdAt:this.createdAt,hasComments:this[TC("0x2d")],data:this[TC("0x37")],attributes:this.attributes}}}],[{key:TC("0x1a"),value:function(){return Object(Sr.a)()[TC("0x2a")](1,5)}}]),e}();Object(u.default)(AC,l.default);var SC=function(){function e(t,n){_classCallCheck(this,e),this._customCallbacks=[],this._itemLabels=new Map,this._schema=t,this._locale=n}return _createClass(e,[{key:"getDescriptions",value:function(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];if(r.isInContent){var i,o=!1,a=_createForOfIteratorHelper(this._customCallbacks);try{for(a.s();!(i=a.n()).done;){var s=(0,i.value)(r);if(s){s.type&&t.push(s),o=!0;break}}}catch(d){a.e(d)}finally{a.f()}if(!o){this._addDescriptionItems(t,r);var c=e[n+1];if(c&&!r.getFirstRange().end.isEqual(c.getFirstRange().start)){var l=t[t.length-1],u="insertion"==r.type?"add":"remove";l&&"text"==l.type&&(l[u]+="\n")}}}}return this._resolveDescriptionItems(t)}},{key:"registerDescriptionCallback",value:function(e){this._customCallbacks.push(e)}},{key:"registerElementLabel",value:function(e,t){this._itemLabels.set(e,t)}},{key:"getItemLabel",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=this._itemLabels.get(e)||e;return"function"==typeof n?n(t):1!==t?t+" "+n+"s":""+n}},{key:"_addDescriptionItems",value:function(e,t){var n,r=this,i=t.getFirstRange().getWalker(),o="insertion"==t.type?"add":"remove",a=_createForOfIteratorHelper(i);try{var s=function(){var t=n.value,a=t.item,s=e[e.length-1];if(a.is("textProxy"))s&&s.type.indexOf("Container")>-1&&e.pop(),s&&"text"==s.type?s[o]+=a.data:e.push({type:"text",add:"add"==o?a.data:"",remove:"remove"==o?a.data:""});else if(r._schema.isObject(a)){if(s&&s.type.indexOf("Container")>-1&&e.pop(),"elementEnd"==t.type)return"continue";s&&s.type==o+"Object"&&s.name==a.name?s.quantity++:e.push({type:o+"Object",name:a.name,quantity:1}),i.skip((function(e){return!("elementEnd"==e.type&&e.item==a)}))}else if(r._schema.checkChild(a,"$text")||a.is("element","softBreak")){if("add"==o&&"elementStart"==t.type||"remove"==o&&"elementEnd"==t.type)return"continue";if(s&&-1==s.type.indexOf("Container"))return"text"==s.type&&(s[o]+="\n"),"continue";var c;if(c="add"==o?a.nextSibling&&!r._schema.isObject(a.nextSibling)?a.nextSibling:null:a.previousSibling&&!r._schema.isObject(a.previousSibling)?a.previousSibling:null,a.isEmpty||c&&c.isEmpty){var l=c&&c.isEmpty?c.name:a.name;s&&s.type==o+"EmptyContainer"&&s.name==l?s.quantity++:e.push({type:o+"EmptyContainer",name:l,quantity:1})}else e.push({type:o+"Container",name:a.name})}};for(a.s();!(n=a.n()).done;)s()}catch(c){a.e(c)}finally{a.f()}}},{key:"_resolveDescriptionItems",value:function(e){var t,n=this._locale.t,r=[],i=_createForOfIteratorHelper(e);try{for(i.s();!(t=i.n()).done;){var o=t.value;switch(o.type){case"text":if(o.add=o.add.replace(/(\S)\u000A+(\S)/g,"$1 $2").replace(/\u000A/g,""),o.remove=o.remove.replace(/(\S)\u000A+(\S)/g,"$1 $2").replace(/\u000A/g,""),""!=o.add&&""!=o.remove){r.push({type:"replace",content:n({string:"*Replace:* %0 *with* %1",id:"REPLACE_TEXT"},['"'+o.remove+'"','"'+o.add+'"'])});continue}if(null!=o.add.match(/^ +$/)){r.push({type:"insertion",content:n("*Insert:* %0",n({string:"space",plural:"%0 spaces",id:"ELEMENT_SPACE"},o.add.length))});continue}if(null!=o.remove.match(/^ +$/)){r.push({type:"deletion",content:n("*Remove:* %0",n({string:"space",plural:"%0 spaces",id:"ELEMENT_SPACE"},o.remove.length))});continue}if(""!=o.add){r.push({type:"insertion",content:n("*Insert:* %0",'"'+o.add+'"')});continue}r.push({type:"deletion",content:n("*Remove:* %0",'"'+o.remove+'"')});continue;case"addEmptyContainer":case"addObject":r.push({type:"insertion",content:n("*Insert:* %0",this.getItemLabel(o.name,o.quantity))});continue;case"removeEmptyContainer":case"removeObject":r.push({type:"deletion",content:n("*Remove:* %0",this.getItemLabel(o.name,o.quantity))});continue;case"addContainer":r.push({type:"insertion",content:n("*Split:* %0",this.getItemLabel(o.name,o.quantity))});continue;case"removeContainer":r.push({type:"deletion",content:n("*Merge:* %0",this.getItemLabel(o.name,o.quantity))});continue}r.push(o)}}catch(a){i.e(a)}finally{i.f()}return r}}]),e}();n(113),n(114);var EC=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"afterInit",value:function(){var e=this,t=this.editor,n=t.locale.t;if(t.plugins.has("AlignmentEditing")){var r=t.plugins.get("TrackChangesEditing");r.enableCommand("alignment",(function(n){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=i.value;i.value||(o="ltr"===t.locale.contentLanguageDirection?"left":"right");var a=Array.from(e.editor.model.document.selection.getSelectedBlocks()).filter((function(t){return function(e,t,n){var r=e.getAttribute("alignment")||null;return t.checkAttribute(e,"alignment")&&n!=r}(t,e.editor.model.schema,o)}));t.model.change((function(){var e,t=_createForOfIteratorHelper(a);try{for(t.s();!(e=t.n()).done;){var n=e.value;r.markBlockFormat(n,{commandName:"alignment",commandParams:[{value:o}]})}}catch(i){t.e(i)}finally{t.f()}}))})),r._descriptionFactory.registerDescriptionCallback((function(e){var t=e.data;if(t&&"alignment"==t.commandName){var r=t.commandParams[0].value;return{type:"format",content:n("*Format:* %0",function(e){switch(r){case"left":return n({string:"align to left",id:"FORMAT_ALIGN_TO_LEFT"});case"right":return n({string:"align to right",id:"FORMAT_ALIGN_TO_RIGHT"});case"center":return n({string:"align to center",id:"FORMAT_ALIGN_TO_CENTER"});case"justify":return n({string:"justify",id:"FORMAT_JUSTIFY_TEXT"})}}())}}}))}}}]),n}(d),IC=["parent","bindElementToMarker","model","addClass","writer","schema","nextSibling","type","markerName","consumable","hasAttribute","getAttribute","plugins","TrackChangesEditing","markerRange","listItem","toViewPosition","insert","test","get","includes","getItems","createRangeOn","push","name","isAtEnd","span","toViewElement","item","element","previousPosition","mapper","elementEnd","ck-suggestion-marker--active","getWalker","ck-suggestion-marker-","createUIElement"];!function(e,t){!function(t){for(;--t;)e.push(e.shift())}(++t)}(IC,231);var OC=function(e,t){return IC[e-=0]};function RC(e,t,n){var r,i=[],o=_createForOfIteratorHelper(t[OC("0xc")]());try{for(o.s();!(r=o.n()).done;){var a=r.value;a[OC("0x1")](e)&&i.push(n[OC("0xd")](a))}}catch(s){o.e(s)}finally{o.f()}return i}function PC(e){var t=[];if(e.is(OC("0x14"),"listItem"))for(var n=e[OC("0x22")];n&&n.is(OC("0x14"),OC("0x6"))&&n[OC("0x2")]("listIndent")>0;)t[OC("0xe")](n),n=n[OC("0x22")];return t}function MC(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.showActiveMarker,i=void 0===r||r,o=e[OC("0x3")][OC("0xa")](OC("0x4"));return function(n,r,a){if(a[OC("0x0")][OC("0x9")](r[OC("0x5")],n[OC("0xf")])){var s,c=r[OC("0x5")][OC("0x19")](),l=r[OC("0x5")].start,u=e[OC("0x1e")][OC("0x21")],d=null,f=null,h=!1,p=!1,v=_createForOfIteratorHelper(c);try{for(v.s();!(s=v.n()).done;){var g=s.value,m=g[OC("0x13")];h=h||u.isContent(m);var y=a.mapper[OC("0x12")](m);if(y&&y.getCustomProperty("addHighlight"))return;OC("0x17")==g[OC("0x23")]&&u.isBlock(m)&&!u.isLimit(m)&&(m[OC("0x22")]||l[OC("0x10")]?d&&d[OC("0x1c")]==m||(d=m,k(g[OC("0x15")]),p=!0):f=f||g[OC("0x15")])}}catch(_){v.e(_)}finally{v.f()}h||p||!f||k(f)}function k(e){var n=a.writer[OC("0x1b")](OC("0x11"),{class:OC("0x1a")+t}),s=a.mapper[OC("0x7")](e);i&&o.activeMarkers[OC("0xb")](r[OC("0x24")])&&a.writer[OC("0x1f")](OC("0x18"),n),a[OC("0x20")][OC("0x8")](s,n),a[OC("0x16")][OC("0x1d")](n,r[OC("0x24")])}}}var NC=["BoldEditing","ItalicEditing","UnderlineEditing","CodeEditing","StrikethroughEditing","SubscriptEditing","SuperscriptEditing"],DC=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"afterInit",value:function(){var e,t=this.editor,n=t.model,r=t.plugins.get("TrackChangesEditing"),i=t.locale.t,o=_createForOfIteratorHelper(NC);try{var a=function(){var i=e.value;if(!t.plugins.has(i))return"continue";var o=i.slice(0,-7).toLowerCase(),a=t.commands.get(o);r.enableCommand(o,(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.document.selection;if(i.isCollapsed)e(t);else{var s=void 0!==t.forceValue?t.forceValue:!a.value;n.change((function(){for(var e=0,t=Array.from(i.getRanges());e<t.length;e++){var a,c=t[e],l=_createForOfIteratorHelper(s?[c]:RC(o,c,n));try{for(l.s();!(a=l.n()).done;){var u=a.value;r.markInlineFormat(u,{commandName:o,commandParams:[{forceValue:s}]})}}catch(d){l.e(d)}finally{l.f()}}}))}}))};for(o.s();!(e=o.n()).done;)a()}catch(c){o.e(c)}finally{o.f()}function s(e,t){r._descriptionFactory.registerDescriptionCallback((function(n){var r=n.data;if(r&&r.commandName===e)return r.commandParams[0].forceValue?{type:"format",content:i("*Format:* %0",t)}:{type:"format",content:i("*Remove format:* %0",t)}}))}s("bold",i({string:"bold",id:"FORMAT_BOLD"})),s("italic",i({string:"italic",id:"FORMAT_ITALIC"})),s("underline",i({string:"underline",id:"FORMAT_UNDERLINE"})),s("code",i({string:"code",id:"FORMAT_CODE"})),s("strikethrough",i({string:"strikethrough",id:"FORMAT_STRIKETHROUGH"})),s("subscript",i({string:"subscript",id:"FORMAT_SUBSCRIPT"})),s("superscript",i({string:"superscript",id:"FORMAT_SUPERSCRIPT"}))}}]),n}(d),FC=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"afterInit",value:function(){var e=this,t=this.editor,n=t.locale.t;if(t.plugins.has("BlockQuoteEditing")){var r=t.plugins.get("TrackChangesEditing"),i=this.editor.commands.get("blockQuote");r.enableCommand("blockQuote",(function(n){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=e.editor.model.document.selection,s=o&&void 0!==o.forceValue?o.forceValue:!i.value,c=[];if(s){var l=Array.from(a.getSelectedBlocks()).filter((function(t){return jC(t)||function(e,t){var n=t.checkChild(e.parent,"blockQuote"),r=t.checkChild(["$root","blockQuote"],e);return n&&r}(t,e.editor.model.schema)}));c=LC(l,t.model)}else{var u=Array.from(a.getSelectedBlocks()).filter((function(e){return jC(e)}));c=LC(u,t.model)}t.model.change((function(){var e,t=_createForOfIteratorHelper(c);try{for(t.s();!(e=t.n()).done;){var n=e.value;r.markBlockFormat(n,{commandName:"blockQuote",commandParams:[{forceValue:s}]})}}catch(i){t.e(i)}finally{t.f()}}))})),r._descriptionFactory.registerDescriptionCallback((function(e){var t=e.data;if(t&&"blockQuote"==t.commandName){var r=n({string:"block quote",id:"ELEMENT_BLOCK_QUOTE"});return t.commandParams[0].forceValue?{type:"format",content:n("*Format:* %0",r)}:{type:"format",content:n("*Remove format:* %0",r)}}}))}}}]),n}(d);function jC(e){return"blockQuote"==e.parent.name}function LC(e,t){for(var n,r=0,i=[],o=t.schema;r<e.length;){var a=e[r],s=e[r+1];n||(n=t.createPositionBefore(a)),VC(t,a,s)||(i.push(t.createRange(n,o.isObject(a)?t.createPositionAfter(a):t.createPositionAt(a,"end"))),n=null),r++}return i}function VC(e,t,n){if(!n)return!1;var r,i=e.createPositionAfter(t),o=e.createPositionBefore(n),a=_createForOfIteratorHelper(new Ji({boundaries:e.createRange(i,o)}));try{for(a.s();!(r=a.n()).done;){var s=r.value;if("text"==s.type||e.schema.isLimit(s.item))return!1}}catch(c){a.e(c)}finally{a.f()}return!0}var BC=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"afterInit",value:function(){var e=this.editor,t=e.locale.t;e.plugins.has("CodeBlock")&&e.plugins.get("TrackChangesEditing")._descriptionFactory.registerElementLabel("codeBlock",(function(e){return t({string:"code block",plural:"%0 code blocks",id:"ELEMENT_CODE_BLOCK"},e)}))}}]),n}(d),zC=["requires","enableCommand","TrackChangesEditing","plugins","editor","init"];!function(e,t){!function(t){for(;--t;)e.push(e.shift())}(++t)}(zC,291);var HC=function(e,t){return zC[e-=0]},UC=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:HC("0x2"),value:function(){this[HC("0x1")][HC("0x0")].get(HC("0x5"))[HC("0x4")]("addCommentThread")}}],[{key:HC("0x3"),get:function(){return[nx]}}]),n}(d),WC=["markerNameToElements","mapper","TrackChangesEditing","remove","showSuggestionHighlights","data","document","high","createRange","downcastDispatcher","start","commands","batch","enableCommand","merge","unbindElementFromMarkerName","lock","get","editing","detach","uiElement","editor","writer","buffer","getFirstRange","delete","addMarker:suggestion:deletion","model","end","init","root","plugins","setSelection","markerName","rootName","removeMarker:suggestion:deletion","fromRange","deleteForward","forward","selection"];!function(e,t){!function(t){for(;--t;)e.push(e.shift())}(++t)}(WC,394);var qC=function(e,t){return WC[e-=0]},YC=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:qC("0x23"),value:function(){var e=this[qC("0x1b")],t=e[qC("0x25")][qC("0x17")](qC("0x8"));t[qC("0x13")](qC("0x1f"));var n=e[qC("0x11")][qC("0x17")](qC("0x3"));t[qC("0x13")](qC("0x3"),(function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=e.model.createSelection(e.model[qC("0xc")][qC("0x5")]);i.isCollapsed&&e[qC("0x21")].modifySelection(i,{direction:qC("0x4"),unit:r.unit});var o,a=i[qC("0x1e")](),s=po[qC("0x2")](a);t(r),o="$graveyard"==s[qC("0x24")][qC("0x0")]?e[qC("0x21")][qC("0xe")](a[qC("0x10")]):e[qC("0x21")][qC("0xe")](s[qC("0x10")],s[qC("0x22")]),s[qC("0x19")](),e[qC("0x21")].enqueueChange(n[qC("0x1d")][qC("0x12")],(function(e){n[qC("0x1d")][qC("0x16")](),e[qC("0x26")](e[qC("0xe")](o.end)),n[qC("0x1d")].unlock()}))})),e[qC("0x18")].downcastDispatcher.on("addMarker:suggestion:deletion",MC(e,qC("0x14")),{priority:qC("0xd")}),e[qC("0xb")].downcastDispatcher.on(qC("0x20"),(function(t,n,r){r.options[qC("0xa")]&&MC(e,"merge",{showActiveMarker:!1})(t,n,r)}),{priority:"high"}),e[qC("0x18")][qC("0xf")].on(qC("0x1"),(function(e,t,n){var r=n[qC("0x7")][qC("0x6")](t[qC("0x27")]);if(r){var i,o=_createForOfIteratorHelper(r);try{for(o.s();!(i=o.n()).done;){var a=i.value;a.is(qC("0x1a"))&&(n[qC("0x7")][qC("0x15")](a,t[qC("0x27")]),n[qC("0x1c")][qC("0x9")](a))}}catch(s){o.e(s)}finally{o.f()}}}),{priority:"high"})}}],[{key:"requires",get:function(){return[Cu]}}]),n}(d),GC=["isCollapsed","markInsertion","setSelection","selection","isLimit","editor","enter","getFirstRange","change","end","editing","enableCommand","high","parent","writer","downcastDispatcher","options","split","markerName","nextSibling","start","requires","schema","init","createPositionAt","model","isAtStart","mapper","getFirstPosition"];!function(e,t){!function(t){for(;--t;)e.push(e.shift())}(++t)}(GC,299);var JC=function(e,t){return GC[e-=0]},$C=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:JC("0xe"),value:function(){var e=this[JC("0x19")],t=e.plugins.get("TrackChangesEditing");t[JC("0x2")](JC("0x1a"),(function(n){e.model[JC("0x1c")]((function(r){var i=e.model.document[JC("0x17")],o=i[JC("0x13")](),a=i[JC("0x14")],s=po.fromRange(i[JC("0x1b")]()),c=s[JC("0xb")][JC("0x4")],l=s[JC("0x0")][JC("0x4")],u=!(s[JC("0xb")][JC("0x11")]&&s[JC("0x0")].isAtEnd),d=c==l,f=!(e[JC("0x10")][JC("0xd")][JC("0x18")](c)||e[JC("0x10")].schema[JC("0x18")](l))&&(a||u&&d);if(n(),f){var h=e[JC("0x10")][JC("0xf")](o[JC("0x4")][JC("0xa")],0),p=r.createRange(o,h);t[JC("0x15")](p)}else r[JC("0x16")](r.createRange(s[JC("0x0")]));s.detach()}))})),e[JC("0x1")][JC("0x6")].on("addMarker:suggestion:insertion",MC(e,JC("0x8")),{priority:JC("0x3")}),e.editing[JC("0x6")].on("removeMarker:suggestion:insertion",(function(e,t,n){var r=n[JC("0x12")].markerNameToElements(t[JC("0x9")]);if(r){var i,o=_createForOfIteratorHelper(r);try{for(o.s();!(i=o.n()).done;){var a=i.value;a.hasClass("ck-suggestion-marker-split")&&(n[JC("0x12")].unbindElementFromMarkerName(a,t[JC("0x9")]),n[JC("0x5")].remove(a))}}catch(s){o.e(s)}finally{o.f()}}}),{priority:JC("0x3")}),e.data[JC("0x6")].on("addMarker:suggestion:insertion",(function(t,n,r){r[JC("0x7")].showSuggestionHighlights&&MC(e,"split",{showActiveMarker:!1})(t,n,r)}),{priority:JC("0x3")})}}],[{key:JC("0xc"),get:function(){return[_u]}}]),n}(d),KC=["editor","ExportPdf","exportPdf","enableCommand","plugins","has","get","afterInit"];!function(e,t){!function(t){for(;--t;)e.push(e.shift())}(++t)}(KC,212);var QC=function(e,t){return KC[e-=0]},ZC=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:QC("0x3"),value:function(){var e=this[QC("0x4")];e[QC("0x0")][QC("0x1")](QC("0x5"))&&e[QC("0x0")][QC("0x2")]("TrackChangesEditing")[QC("0x7")](QC("0x6"))}}]),n}(d),XC=[{pluginName:"FontSizeEditing",commandName:"fontSize"},{pluginName:"FontFamilyEditing",commandName:"fontFamily"},{pluginName:"FontColorEditing",commandName:"fontColor"},{pluginName:"FontBackgroundColorEditing",commandName:"fontBackgroundColor"}],eT=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"afterInit",value:function(){var e,t=this,n=this.editor.locale.t,r=_createForOfIteratorHelper(XC);try{for(r.s();!(e=r.n()).done;){var i=e.value,o=i.pluginName,a=i.commandName;this.editor.plugins.has(o)&&this._enableCommand(a)}}catch(s){r.e(s)}finally{r.f()}this.editor.plugins.get("TrackChangesEditing")._descriptionFactory.registerDescriptionCallback((function(e){var r=e.data;if(null!=r){if("fontSize"==r.commandName){var i=r.commandParams[0].value;if(i){var o=Km(t.editor.config.get("fontSize.options")).find((function(e){return e.model==i})).title,a=t.editor.locale._t(o).toLowerCase();return{type:"format",content:n("*Set font size:* %0",a)}}return{type:"format",content:n("*Reset font size*")}}if("fontFamily"==r.commandName){var s=r.commandParams[0].value;return s?{type:"format",content:n("*Set font family:* %0",s)}:{type:"format",content:n("*Reset font family*")}}if("fontColor"==r.commandName){var c=r.commandParams[0].value;if(c){var l=Uc(t.editor.config.get("fontColor.colors")).find((function(e){return e.model==c})).label,u=t.editor.locale._t(l).toLowerCase();return{type:"format",content:n("*Set font color:* %0",u)}}return{type:"format",content:n("*Reset font color*")}}if("fontBackgroundColor"==r.commandName){var d=r.commandParams[0].value;if(d){var f=Uc(t.editor.config.get("fontBackgroundColor.colors")).find((function(e){return e.model==d})).label,h=t.editor.locale._t(f).toLowerCase();return{type:"format",content:n("*Set font background color:* %0",h)}}return{type:"format",content:n("*Reset font background color*")}}}}))}},{key:"_enableCommand",value:function(e){var t=this.editor;t.plugins.get("TrackChangesEditing").enableCommand(e,(function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=t.model.document.selection,o=r.value;i.isCollapsed?n(r):t.model.change((function(){for(var n=0,r=Array.from(i.getRanges());n<r.length;n++){var a,s=r[n],c=_createForOfIteratorHelper(o?[s]:RC(e,s,t.model));try{for(c.s();!(a=c.n()).done;){var l=a.value;t.plugins.get("TrackChangesEditing").markInlineFormat(l,{commandName:e,commandParams:[{value:o}]})}}catch(u){c.e(u)}finally{c.f()}}}))}))}}]),n}(d),tT=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"afterInit",value:function(){var e=this,t=this.editor,n=t.locale.t,r=t.config.get("heading.options");if(t.plugins.has("HeadingEditing")){var i=t.plugins.get("TrackChangesEditing");i.enableCommand("heading",(function(n,r){var o=r.value,a=Array.from(e.editor.model.document.selection.getSelectedBlocks()).filter((function(t){return function(e,t,n){return n.checkChild(e.parent,t)&&!n.isObject(e)&&e.name!=t}(t,o,e.editor.model.schema)}));t.model.change((function(){var e,t=_createForOfIteratorHelper(a);try{for(t.s();!(e=t.n()).done;){var n=e.value;i.markBlockFormat(n,{commandName:"heading",commandParams:[r],formatGroupId:"blockName"},PC(n))}}catch(o){t.e(o)}finally{t.f()}}))}));var o,a=_createForOfIteratorHelper(r);try{var s=function(){var e=o.value;"paragraph"!=e.model&&i._descriptionFactory.registerElementLabel(e.model,(function(t){var n=nT(e.model);return null!==n?c(t,n):l(t,e.title)}))};for(a.s();!(o=a.n()).done;)s()}catch(u){a.e(u)}finally{a.f()}i._descriptionFactory.registerDescriptionCallback((function(e){var t=e.type,i=e.data;if("formatBlock"==t&&i&&"heading"==i.commandName){var o=i.commandParams[0].value,a=nT(o);if(null!==a)return{type:"format",content:n("*Change to:* %0",c(1,a))};var s=r.find((function(e){return e.model===o})).title;return{type:"format",content:n("*Change to:* %0",l(1,s))}}}))}function c(e,t){return n({string:"heading (level %1)",plural:"%0 headings (level %1)",id:"ELEMENT_HEADING"},[e,t])}function l(e,t){return n({string:"heading (%1)",plural:"%0 headings (%1)",id:"ELEMENT_HEADING_CUSTOM"},[e,t])}}}]),n}(d);function nT(e){var t=e.match(/^heading(\d+)$/);return t?t[1]:null}var rT=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"afterInit",value:function(){var e=this.editor;if(e.plugins.has("HighlightEditing")){var t=e.plugins.get("TrackChangesEditing");t.enableCommand("highlight",(function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=e.model.document.selection,o=i.getAttribute("highlight"),a=r.value,s=[];if(i.isCollapsed){var c=i.getFirstPosition();if(!i.hasAttribute("highlight"))return void n(r);var l=function(e){return e.item.getAttribute("highlight")===o},u=c.getLastMatchingPosition(l,{direction:"backward"}),d=c.getLastMatchingPosition(l);s=[e.model.createRange(u,d)],a==o&&(a=null)}else{var f,h=_createForOfIteratorHelper(i.getRanges());try{for(h.s();!(f=h.n()).done;){var p,v=f.value;a?s.push(v):(p=s).push.apply(p,_toConsumableArray(RC("highlight",v,e.model)))}}catch(g){h.e(g)}finally{h.f()}}e.model.change((function(){var e,n=_createForOfIteratorHelper(s);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.markInlineFormat(r,{commandName:"highlight",commandParams:[{value:a}]})}}catch(g){n.e(g)}finally{n.f()}}))}));var n=e.locale.t;t._descriptionFactory.registerDescriptionCallback((function(t){var r=t.type,i=t.data;if("formatInline"==r&&i&&"highlight"==i.commandName){var o=i.commandParams[0].value;if(o){var a=e.config.get("highlight.options").find((function(e){return e.model==o})).title,s=e.locale._t(a).toLowerCase();return{type:"format",content:n("*Format:* %0",n({string:"%0 highlight",id:"FORMAT_CUSTOM_HIGHLIGHT"},s))}}return{type:"format",content:n("*Remove format:* %0",n({string:"highlight",id:"FORMAT_HIGHLIGHT"}))}}}))}}}]),n}(d);n(407);var iT=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"afterInit",value:function(){var e=this.editor;if(e.plugins.has("HorizontalLineEditing")){e.plugins.get("TrackChangesEditing").enableCommand("horizontalLine");var t=e.plugins.get("TrackChangesEditing"),n=e.locale.t;t._descriptionFactory.registerElementLabel("horizontalLine",(function(e){return n({string:"horizontal line",plural:"%0 horizontal lines",id:"ELEMENT_HORIZONTAL_LINE"},e)})),e.conversion.for("dataDowncast").elementToElement({model:"horizontalLine",view:function(e,t){var n=t.writer;if(t.options.showSuggestionHighlights){var r=n.createContainerElement("div"),i=n.createEmptyElement("hr");return n.addClass("ck-horizontal-line",r),n.insert(n.createPositionAt(r,0),i),r}},converterPriority:"high"})}}}]),n}(d);n(409);var oT=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"afterInit",value:function(){var e=this.editor;if(e.plugins.has("ImageEditing")){var t=e.plugins.get("TrackChangesEditing"),n=e.locale.t;t.enableCommand("insertImage"),t._descriptionFactory.registerElementLabel("image",(function(e){return n({string:"image",plural:"%0 images",id:"ELEMENT_IMAGE"},e)})),e.plugins.has("ImageUploadEditing")&&t.enableCommand("uploadImage"),e.plugins.has("ImageStyleEditing")&&t.enableCommand("imageStyle",(function(n,r){var i=e.commands.get("imageStyle"),o=e.model.document.selection.getFirstRange().start.nodeAfter;(o.hasAttribute("imageStyle")?o.getAttribute("imageStyle"):i.defaultStyle)!=r.value&&e.model.change((function(){t.markBlockFormat(o,{commandName:"imageStyle",commandParams:[r]})}))})),e.plugins.has("ImageResize")&&t.enableCommand("resizeImage",(function(n,r){var i=e.model.document.selection.getFirstRange().start.nodeAfter;i.getAttribute("width")!=r.width&&e.model.change((function(){t.markBlockFormat(i,{commandName:"resizeImage",commandParams:[r]})}))})),e.plugins.has("ImageTextAlternativeEditing")&&t.enableCommand("imageTextAlternative",(function(n,r){var i=e.model.document.selection.getFirstRange().start.nodeAfter;(i.hasAttribute("alt")?i.getAttribute("alt"):"")!=r.newValue&&e.model.change((function(){t.markBlockFormat(i,{commandName:"imageTextAlternative",commandParams:[r]})}))}));var r,i={},o=_createForOfIteratorHelper(Hh(this.editor.config.get("image.styles")));try{for(o.s();!(r=o.n()).done;){var a=r.value;i[a.name]=a.title.toLowerCase()}}catch(s){o.e(s)}finally{o.f()}t._descriptionFactory.registerDescriptionCallback((function(e){var t=e.data;if(t)if("imageStyle"==t.commandName){var r=t.commandParams[0].value;switch(r){case"full":return s(n({string:"full width image",id:"FORMAT_FULL_WIDTH_IMAGE"}));case"side":return s(n({string:"side image",id:"FORMAT_SIDE_IMAGE"}));default:return s(i[r]||r)}}else{if("imageTextAlternative"==t.commandName){var o=t.commandParams[0].newValue;return o?{type:"format",content:n("*Set image text alternative:* %0",'"'+o+'"')}:{type:"format",content:n("*Remove image text alternative*")}}if("resizeImage"==t.commandName){var a=t.commandParams[0].width;return a?{type:"format",content:n("*Set image width:* %0",a)}:{type:"format",content:n("*Reset image width*")}}}function s(e){return{type:"format",content:n("*Format:* %0",e)}}}))}}}]),n}(d),aT=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"afterInit",value:function(){var e=this,t=this.editor,n=t.plugins.get("TrackChangesEditing");t.plugins.has("IndentEditing")&&(n.enableCommand("indent"),n.enableCommand("outdent"));var r=t.locale.t;if(t.plugins.has("IndentBlock")){for(var i=function(){var r=a[o];n.enableCommand(r,(function(){var i=Array.from(e.editor.model.document.selection.getSelectedBlocks()).filter((function(t){return e.editor.model.schema.checkAttribute(t,"blockIndent")}));t.model.change((function(){var e,t=_createForOfIteratorHelper(i);try{for(t.s();!(e=t.n()).done;){var o=e.value;n.markBlockFormat(o,{commandName:r,commandParams:[{value:""}],formatGroupId:"indentBlock"})}}catch(a){t.e(a)}finally{t.f()}}))}))},o=0,a=["indentBlock","outdentBlock"];o<a.length;o++)i();n._descriptionFactory.registerDescriptionCallback((function(e){var t=e.data;if(t&&("indentBlock"==t.commandName||"outdentBlock"==t.commandName)){var i=e.getItems()[0],o=n._descriptionFactory.getItemLabel(i.name);return"indentBlock"==t.commandName?{type:"format",content:r("*Indent:* %0",o)}:"outdentBlock"==t.commandName?{type:"format",content:r("*Outdent:* %0",o)}:void 0}}))}}}]),n}(d),sT=["enableCommand","get","plugins","init","TrackChangesEditing"];!function(e,t){!function(t){for(;--t;)e.push(e.shift())}(++t)}(sT,440);var cT=function(e,t){return sT[e-=0]},lT=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:cT("0x3"),value:function(){this.editor[cT("0x2")][cT("0x1")](cT("0x4"))[cT("0x0")]("input")}}],[{key:"requires",get:function(){return[Rd]}}]),n}(d),uT=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"afterInit",value:function(){var e=this,t=this.editor;if(t.plugins.has("LinkEditing")){var n=t.plugins.get("TrackChangesEditing");n.enableCommand("link",(function(e,r){var i=t.model.document.selection,o=[];if(i.isCollapsed){if(!i.hasAttribute("linkHref"))return void e(r);var a=zd(i.getFirstPosition(),"linkHref",i.getAttribute("linkHref"),t.model);o=[a]}else o=Array.from(i.getRanges());t.model.change((function(){var e,t=_createForOfIteratorHelper(o);try{for(t.s();!(e=t.n()).done;){var i=e.value;n.markInlineFormat(i,{commandName:"link",commandParams:[r]})}}catch(a){t.e(a)}finally{t.f()}}))})),n.enableCommand("unlink",(function(){var r=e.editor.model,i=r.document.selection;r.change((function(){var e,r=_createForOfIteratorHelper(i.isCollapsed?[zd(i.getFirstPosition(),"linkHref",i.getAttribute("linkHref"),t.model)]:RC("linkHref",i.getFirstRange(),t.model));try{for(r.s();!(e=r.n()).done;){var o=e.value;n.markInlineFormat(o,{commandName:"unlink",commandParams:[]})}}catch(a){r.e(a)}finally{r.f()}}))})),n._descriptionFactory.registerDescriptionCallback((function(e){var n=e.data,r=t.locale.t;if(n)return"link"==n.commandName?{type:"format",content:r("*Set link:* %0",'"'+n.commandParams[0]+'"')}:"unlink"==n.commandName?{type:"format",content:r("*Remove link*")}:void 0}))}}}]),n}(d),dT=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"afterInit",value:function(){var e=this.editor;if(e.plugins.has("ListEditing")){var t=e.plugins.get("TrackChangesEditing"),n=e.plugins.has("TodoListEditing");t.enableCommand("numberedList",i("numberedList")),t.enableCommand("bulletedList",i("bulletedList")),n&&t.enableCommand("todoList",i("todoList")),t.enableCommand("indentList",o("indentList")),t.enableCommand("outdentList",o("outdentList")),n&&t.enableCommand("checkTodoList",(function(){var n=e.commands.get("checkTodoList"),r=Array.from(n._selectedElements);r.filter((function(e){return e.getAttribute("todoListChecked")!=n.value})),e.model.change((function(){var e,i=_createForOfIteratorHelper(r);try{for(i.s();!(e=i.n()).done;){var o=e.value;t.markBlockFormat(o,{commandName:"checkTodoList",commandParams:[{forceValue:!n.value}]})}}catch(a){i.e(a)}finally{i.f()}}))}));var r=e.locale.t;t._descriptionFactory.registerElementLabel("listItem",(function(e){return r({string:"list item",plural:"%0 list items",id:"ELEMENT_LIST_ITEM"},e)})),t._descriptionFactory.registerDescriptionCallback((function(e){var t=e.data;if(t){if("numberedList"==t.commandName||"bulletedList"==t.commandName||"todoList"==t.commandName)switch(t.commandName.replace("List","")){case"bulleted":return n(r({string:"bulleted list",id:"ELEMENT_BULLETED_LIST"}));case"numbered":return n(r({string:"numbered list",id:"ELEMENT_NUMBERED_LIST"}));case"todo":return n(r({string:"to-do list",id:"ELEMENT_TODO_LIST"}))}if("indentList"==t.commandName)return{type:"format",content:r("*Indent:* %0",r({string:"list item",id:"ELEMENT_LIST_ITEM"}))};if("outdentList"==t.commandName)return{type:"format",content:r("*Outdent:* %0",r({string:"list item",id:"ELEMENT_LIST_ITEM"}))};if("checkTodoList"==t.commandName)return t.commandParams[0].forceValue?{type:"format",content:r("*Check item*")}:{type:"format",content:r("*Uncheck item*")}}function n(e){return{type:"format",content:r("*Change to:* %0",e)}}}))}function i(n){return function(){var r=e.model.document.selection,i=e.commands.get(n);if(i.value)e.execute("paragraph",{});else{var o=n.slice(0,-4),a=function(e,t,n){var r=Array.from(e).filter((function(e){return function(e,t){return t.checkChild(e.parent,"listItem")&&!t.isObject(e)}(e,n)}));r=r.filter((function(e){return!e.is("element","listItem")||e.getAttribute("listType")!=t}));var i,o=new Set,a=_createForOfIteratorHelper(r);try{for(a.s();!(i=a.n()).done;){var s=i.value;s.is("element","listItem")?o.add(fT(s)):o.add(s)}}catch(c){a.e(c)}finally{a.f()}return Array.from(o)}(r.getSelectedBlocks(),o,e.model.schema);e.model.change((function(){var e,r=_createForOfIteratorHelper(a);try{for(r.s();!(e=r.n()).done;){var o=e.value;t.markBlockFormat(o,{commandName:n,commandParams:[{forceValue:!i.value}],formatGroupId:"blockName"},hT(o))}}catch(s){r.e(s)}finally{r.f()}}))}}}function o(n){return function(){var r=function(e){var t=(e=Array.from(e)).findIndex((function(e){return"listItem"!=e.name}));return t>-1&&(e=e.slice(0,t)),e}(e.model.document.selection.getSelectedBlocks()),i=e.model.createRange(e.model.createPositionAt(r[0],"before"),e.model.createPositionAt(r[r.length-1],"end"));e.model.change((function(){t.markBlockFormat(i,{commandName:n,commandParams:[],formatGroupId:"listIndent"},function(e){var t,n=new Set,r=_createForOfIteratorHelper(e);try{for(r.s();!(t=r.n()).done;)for(var i=t.value,o=i.nextSibling;o&&o.getAttribute("listIndent")>i.getAttribute("listIndent");)n.add(o),o=o.nextSibling}catch(a){r.e(a)}finally{r.f()}return Array.from(n)}(r))}))}}}}]),n}(d);function fT(e){var t=e.getAttribute("listIndent");if(0==t)return e;for(var n=e;e.previousSibling&&e.previousSibling.is("element","listItem");){var r=e.previousSibling.getAttribute("listIndent");if(r==t)n=e.previousSibling;else if(r<t)break;e=e.previousSibling}return n}function hT(e){var t=[];if(e.is("element","listItem")&&e.getAttribute("listIndent")>0)for(var n=e.nextSibling;n&&"listItem"==n.name&&n.getAttribute("listIndent")==e.getAttribute("listIndent");)t.push(n),n=n.nextSibling;return t}n(411);var pT=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"afterInit",value:function(){var e=this.editor;if(e.plugins.has("MediaEmbedEditing")){var t=e.plugins.get("TrackChangesEditing"),n=e.locale.t;t.enableCommand("mediaEmbed"),t._descriptionFactory.registerElementLabel("media",(function(e){return n({string:"media item",plural:"%0 media items",id:"ELEMENT_MEDIA"},e)})),e.conversion.for("dataDowncast").elementToElement({model:"media",view:function(e,t){var n=t.writer;if(t.options.showSuggestionHighlights)return n.createEmptyElement("div")},converterPriority:"high"}),e.data.downcastDispatcher.on("attribute:url:media",(function(e,t,n){n.options.showSuggestionHighlights&&e.stop()}),{priority:"high"})}}}]),n}(d),vT=["MentionEditing","plugins","mention","afterInit"];!function(e,t){!function(t){for(;--t;)e.push(e.shift())}(++t)}(vT,412);var gT=function(e,t){return vT[e-=0]},mT=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:gT("0x3"),value:function(){var e=this.editor;e[gT("0x1")].has(gT("0x0"))&&e[gT("0x1")].get("TrackChangesEditing").enableCommand(gT("0x2"))}}]),n}(d);n(413);var yT=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"afterInit",value:function(){var e=this.editor;if(e.plugins.has("PageBreakEditing")){e.plugins.get("TrackChangesEditing").enableCommand("pageBreak");var t=e.plugins.get("TrackChangesEditing"),n=e.locale.t;t._descriptionFactory.registerElementLabel("pageBreak",(function(e){return n({string:"page break",plural:"%0 page breaks",id:"ELEMENT_PAGE_BREAK"},e)}))}}}]),n}(d),kT=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"afterInit",value:function(){var e=this,t=this.editor;if(t.plugins.has("Paragraph")){var n=t.locale.t,r=t.plugins.get("TrackChangesEditing");r._descriptionFactory.registerElementLabel("paragraph",(function(e){return n({string:"paragraph",plural:"%0 paragraphs",id:"ELEMENT_PARAGRAPH"},e)})),r.enableCommand("paragraph",(function(n){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=Array.from((i.selection||t.model.document.selection).getSelectedBlocks()).filter((function(t){return function(e,t){return t.checkChild(e.parent,"paragraph")&&!t.isObject(e)&&"paragraph"!=e.name}(t,e.editor.model.schema)}));t.model.change((function(){var e,t=_createForOfIteratorHelper(o);try{for(t.s();!(e=t.n()).done;){var n=e.value;r.markBlockFormat(n,{commandName:"paragraph",commandParams:[],formatGroupId:"blockName"},PC(n))}}catch(i){t.e(i)}finally{t.f()}}))})),r._descriptionFactory.registerDescriptionCallback((function(e){var t=e.data;if(t&&"paragraph"==t.commandName)return{type:"format",content:n("*Change to:* %0",n({string:"paragraph",plural:"%0 paragraphs",id:"ELEMENT_PARAGRAPH"}))}})),r.enableCommand("insertParagraph"),t.editing.downcastDispatcher.on("addMarker:suggestion:insertion",_T(t),{priority:"highest"}),t.data.downcastDispatcher.on("addMarker:suggestion:insertion",(function(e,n,r){r.options.showSuggestionHighlights&&_T(t,{showActiveMarker:!1})(e,n,r)}),{priority:"highest"});var i=r._descriptionFactory;i.registerDescriptionCallback((function(e){var t=e.getFirstRange(),r=t.start,o=t.end;if(r.isTouching(o)&&r.nodeAfter&&r.nodeAfter.is("element","paragraph")&&"insertion"==e.type)return{type:"insertion",content:n("*Insert:* %0",i.getItemLabel("paragraph",1))}}))}}}]),n}(d);function _T(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.showActiveMarker,r=void 0===n||n;return function(t,n,i){var o=e.plugins.get("TrackChangesEditing"),a=n.markerRange.start,s=n.markerRange.end;if(a.isTouching(s)&&a.nodeAfter&&a.nodeAfter.is("element","paragraph")){if(!i.consumable.consume(n.markerRange,t.name))return;var c=i.writer.createUIElement("span",{class:"ck-suggestion-marker-split"}),l=i.mapper.toViewPosition(s);r&&o.activeMarkers.includes(n.markerName)&&i.writer.addClass("ck-suggestion-marker--active",c),i.writer.insert(l,c),i.mapper.bindElementToMarker(c,n.markerName)}}}var bT=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"afterInit",value:function(){var e=this.editor;if(e.plugins.has("RemoveFormatEditing")){var t=e.plugins.get("TrackChangesEditing");t.enableCommand("removeFormat",(function(n){var r=e.model.document.selection;r.isCollapsed?n():e.model.change((function(){for(var n=0,i=Array.from(r.getRanges());n<i.length;n++){var o,a=_createForOfIteratorHelper(i[n].getItems());try{for(a.s();!(o=a.n()).done;){var s=o.value;wT(s,e.model.schema)&&t.markInlineFormat(e.model.createRangeOn(s),{commandName:"removeFormat",commandParams:[]})}}catch(c){a.e(c)}finally{a.f()}}}))}));var n=e.locale.t;t._descriptionFactory.registerDescriptionCallback((function(e){var t=e.data;if(t&&"removeFormat"==t.commandName)return{type:"format",content:n("*Remove all formatting*")}}))}}}]),n}(d);function wT(e,t){var n,r=_createForOfIteratorHelper(e.getAttributes());try{for(r.s();!(n=r.n()).done;){var i=_slicedToArray(n.value,1)[0],o=t.getAttributeProperties(i);if(o&&o.isFormatting)return!0}}catch(a){r.e(a)}finally{r.f()}return!1}var xT=["discardAllSuggestions","TrackChangesEditing","goToNextRestrictedEditingException","get","discardSelectedSuggestions","acceptSuggestion","afterInit","acceptSelectedSuggestions","discardSuggestion","goToPreviousRestrictedEditingException","plugins","RestrictedEditingModeEditing","trackChanges","editor","enableCommand","has"];!function(e,t){!function(t){for(;--t;)e.push(e.shift())}(++t)}(xT,465);var CT=function(e,t){return xT[e-=0]},TT=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:CT("0x5"),value:function(){var e=this[CT("0xc")];if(e[CT("0x9")][CT("0xe")]("RestrictedEditingModeEditing")){var t=e[CT("0x9")][CT("0x2")](CT("0x0"));t[CT("0xd")](CT("0x8")),t.enableCommand(CT("0x1"));var n=e[CT("0x9")][CT("0x2")](CT("0xa"));n.enableCommand(CT("0xb")),n[CT("0xd")](CT("0x4")),n[CT("0xd")](CT("0x7")),n.enableCommand("acceptAllSuggestions"),n.enableCommand(CT("0xf")),n[CT("0xd")](CT("0x6")),n[CT("0xd")](CT("0x3"))}}}]),n}(d),AT=["selectAll","plugins","SelectAll","editor","TrackChangesEditing","enableCommand"];!function(e,t){!function(t){for(;--t;)e.push(e.shift())}(++t)}(AT,308);var ST=function(e,t){return AT[e-=0]},ET=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"afterInit",value:function(){var e=this[ST("0x1")];e[ST("0x5")].has(ST("0x0"))&&e[ST("0x5")].get(ST("0x2"))[ST("0x3")](ST("0x4"))}}]),n}(d),IT=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"init",value:function(){var e=this.editor,t=e.plugins.get("TrackChangesEditing"),n=e.t;t.enableCommand("shiftEnter"),e.editing.downcastDispatcher.on("addMarker:suggestion",OT(e),{priority:"high"}),e.data.downcastDispatcher.on("addMarker:suggestion",(function(t,n,r){r.options.showSuggestionHighlights&&OT(e,{showActiveMarker:!1})(t,n,r)})),t._descriptionFactory.registerElementLabel("softBreak",(function(e){return n({id:"ELEMENT_LINE_BREAK",string:"line break",plural:"%0 line breaks"},e)}))}}],[{key:"requires",get:function(){return[gd]}}]),n}(d);function OT(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.showActiveMarker,r=void 0===n||n;return function(t,n,i){var o=e.plugins.get("TrackChangesEditing");if(i.consumable.test(n.markerRange,t.name)){var a,s=e.model,c=_createForOfIteratorHelper(n.markerRange.getItems());try{for(c.s();!(a=c.n()).done;){var l=a.value;if(l.is("element","softBreak")){var u="deletion"==n.markerName.split(":")[1]?"merge":"split",d=i.writer.createUIElement("span",{class:"ck-suggestion-marker-"+u}),f=i.mapper.toViewPosition(s.createPositionBefore(l));r&&o.activeMarkers.includes(n.markerName)&&i.writer.addClass("ck-suggestion-marker--active",d),i.writer.insert(f,d),i.mapper.bindElementToMarker(d,n.markerName)}}}catch(h){c.e(h)}finally{c.f()}}}}var RT=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"afterInit",value:function(){var e=this.editor,t=e.model;if(e.plugins.has("StandardEditingModeEditing")){var n=e.plugins.get("TrackChangesEditing"),r="restrictedEditingException",i=e.commands.get(r);n.enableCommand(r,(function(e){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.document.selection;if(a.isCollapsed)e(o);else{var s=void 0!==o.forceValue?o.forceValue:!i.value;t.change((function(){for(var e=0,i=Array.from(a.getRanges());e<i.length;e++){var o,c=i[e],l=_createForOfIteratorHelper(s?[c]:RC(r,c,t));try{for(l.s();!(o=l.n()).done;){var u=o.value;n.markInlineFormat(u,{commandName:r,commandParams:[{forceValue:s}]})}}catch(d){l.e(d)}finally{l.f()}}}))}}));var o=e.t;n._descriptionFactory.registerDescriptionCallback((function(e){var t=e.data;if(t&&t.commandName==r)return t.commandParams[0].forceValue?{type:"format",content:o({string:"*Enable in restricted editing mode*",id:"FORMAT_RESTRICTED_ENABLED"})}:{type:"format",content:o({string:"*Disable in restricted editing mode*",id:"FORMAT_RESTRICTED_DISABLED"})}}))}}}]),n}(d);n(415);var PT=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this,e))._tablePostFixingSubtypes=["tableRow","tableColumn"],r}return _createClass(n,[{key:"afterInit",value:function(){var e=this,t=this.editor,n=t.model.document.selection;if(t.plugins.has("TableEditing")){var r=t.locale.t,i=t.plugins.get("TrackChangesEditing"),o=t.plugins.get("TableUtils");i._descriptionFactory.registerElementLabel("table",(function(e){return r({string:"table",plural:"%0 tables",id:"ELEMENT_TABLE"},e)})),this._setupColumnsRowsFixing(),i.enableCommand("insertTable"),i.enableCommand("selectTableRow"),i.enableCommand("selectTableColumn");for(var a=function(){var e=c[s],r=t.commands.get(e);i.enableCommand(e,(function(e){t.model.change((function(t){e();var o="above"===r.order,a=yg(n),s=kg(a),c=o?s.first-1:s.last+1,l=a[0].findAncestor("table"),u=new rg(l,{startRow:c,endRow:c}),d=Array.from(u).map((function(e){return t.createRangeOn(e.cell)}));i.markMultiRangeInsertion(d,"tableRow")}))}))},s=0,c=["insertTableRowAbove","insertTableRowBelow"];s<c.length;s++)a();for(var l=function(){var e=d[u],r=t.commands.get(e);i.enableCommand(e,(function(e){t.model.change((function(t){e();var o="left"===r.order,a=yg(n),s=_g(a),c=o?s.first-1:s.last+1,l=a[0].findAncestor("table"),u=new rg(l,{startRow:0,column:c,includeAllSlots:!1}),d=Array.from(u).map((function(e){return t.createRangeOn(e.cell)}));i.markMultiRangeInsertion(d,"tableColumn")}))}))},u=0,d=["insertTableColumnLeft","insertTableColumnRight"];u<d.length;u++)l();for(var f=function(){var r=p[h],a=r.substr(11),s=a.toLowerCase(),c=s.substr(0,3)+"span",l="table"+a,u="min"+a,d="max"+a;i.enableCommand(r,(function(){t.model.change((function(t){var a,f=yg(n),h=f[0].findAncestor("table");if("removeTableRow"==r){var p=kg(f);a={startRow:p.first,endRow:p.last,includeAllSlots:!0}}else{var v=_g(f);a={startColumn:v.first,endColumn:v.last,includeAllSlots:!0}}var g=new rg(h,a),m=Array.from(g).map((function(e){return e.cell})),y=MT(m.filter((function(e){return e.hasAttribute(c)}))),k=MT(m.filter((function(e){return!e.hasAttribute(c)}))).map((function(e){return t.createRangeOn(e)})),_=i.markMultiRangeDeletion(k,l);if(_&&("tableRow"==_.subType||"tableColumn"==_.subType)){var b,w=e._getSuggestionCoords(_),x=_createForOfIteratorHelper(y);try{for(x.s();!(b=x.n()).done;){var C=b.value,T=t.createRangeOn(C),A=o.getCellLocation(C),S=C.getAttribute(c)-1,E=w[d];w[u]<=A[s]&&A[s]+S<=E&&_.addRange(T)}}catch(I){x.e(I)}finally{x.f()}}}))}))},h=0,p=["removeTableRow","removeTableColumn"];h<p.length;h++)f();t.data.downcastDispatcher.on("addMarker:suggestion",(function(e,t,n){if(n.options.showSuggestionHighlights){var r=t.item;if(r){var i=n.mapper.toViewElement(r);i&&"tableCell"===r.name&&Fu(i,n.writer,(function(e,t,n){return n.addClass(o(t.classes),e)}),(function(e,t,n){return n.removeClass(o(t.classes),e)}))}}function o(e){return Array.isArray(e)?e:[e]}}),{priority:"highest"}),i._descriptionFactory.registerDescriptionCallback((function(e){if("insertion"==e.type||"deletion"==e.type){var t=e.getContainedElement();if(null!=t&&t.is("element","table")){if("insertion"==e.type){var n=e.getItems().filter((function(e){return e.is("textProxy")})).map((function(e){return e.data}));if(n.length)return{type:"insertion",content:r("*Insert:* %0",r({string:"table *with text* %0",id:"ELEMENT_TABLE_WITH_TEXT"},'"'+n.join(" ")+'"'))}}if("deletion"==e.type){var i=e.getItems().filter((function(e){return e.is("textProxy")})).map((function(e){return e.data}));if(i.length)return{type:"deletion",content:r("*Remove:* %0",r({string:"table *with text* %0",id:"ELEMENT_TABLE_WITH_TEXT"},'"'+i.join(" ")+'"'))}}}}})),i._descriptionFactory.registerDescriptionCallback((function(t){if("tableRow"==t.subType){var n=t.getItems().filter((function(e){return e.is("textProxy")})).map((function(e){return e.data})),i=e._getSuggestionCoords(t),o=i.maxRow-i.minRow+1;if("insertion"==t.type)return n.length?{type:"insertion",content:r("*Insert:* %0",r({string:"table row *with text* %1",plural:"%0 table rows *with text* %1",id:"ELEMENT_TABLE_ROW_WITH_TEXT"},[o,'"'+n.join(" ")+'"']))}:{type:"insertion",content:r("*Insert:* %0",r({string:"table row",plural:"%0 table rows",id:"ELEMENT_TABLE_ROW"},o))};if("deletion"==t.type)return n.length?{type:"deletion",content:r("*Remove:* %0",r({string:"table row *with text* %1",plural:"%0 table rows *with text* %1",id:"ELEMENT_TABLE_ROW_WITH_TEXT"},[o,'"'+n.join(" ")+'"']))}:{type:"deletion",content:r("*Remove:* %0",r({string:"table row",plural:"%0 table rows",id:"ELEMENT_TABLE_ROW"},o))}}if("tableColumn"==t.subType){var a=t.getItems().filter((function(e){return e.is("textProxy")})).map((function(e){return e.data})),s=e._getSuggestionCoords(t),c=s.maxColumn-s.minColumn+1;if("insertion"==t.type)return a.length?{type:"insertion",content:r("*Insert:* %0",r({string:"table column *with text* %1",plural:"%0 table columns *with text* %1",id:"ELEMENT_TABLE_COLUMN_WITH_TEXT"},[c,'"'+a.join(" ")+'"']))}:{type:"insertion",content:r("*Insert:* %0",r({string:"table column",plural:"%0 table columns",id:"ELEMENT_TABLE_COLUMN"},c))};if("deletion"==t.type)return a.length?{type:"deletion",content:r("*Remove:* %0",r({string:"table column *with text* %1",plural:"%0 table columns *with text* %1",id:"ELEMENT_TABLE_COLUMN_WITH_TEXT"},[c,'"'+a.join(" ")+'"']))}:{type:"deletion",content:r("*Remove:* %0",r({string:"table column",plural:"%0 table columns",id:"ELEMENT_TABLE_COLUMN"},c))}}})),i._suggestionFactory.registerCustomCallback("insertion","tableRow","discard",v),i._suggestionFactory.registerCustomCallback("deletion","tableRow","accept",v),i._suggestionFactory.registerCustomCallback("insertion","tableColumn","discard",g),i._suggestionFactory.registerCustomCallback("deletion","tableColumn","accept",g),i._suggestionFactory.registerCustomCallback("insertion","tableColumn","join",m),i._suggestionFactory.registerCustomCallback("deletion","tableColumn","join",m),i._suggestionFactory.registerCustomCallback("insertion","tableRow","join",y),i._suggestionFactory.registerCustomCallback("deletion","tableRow","join",y)}function v(e){var r=Array.from(n.getRanges()).map((function(e){return po.fromRange(e)}));t.model.change((function(n){var i=n.batch;e=e.filter((function(e){return"$graveyard"!=e.root.rootName})),n.setSelection(e),t.commands.get("removeTableRow").refresh(),t.execute("removeTableRow",{forceDefaultExecution:!0}),t.model.enqueueChange((function(){t.model.enqueueChange(i,(function(e){var t=r.filter((function(e){return"$graveyard"!=e.root.rootName}));t.length>0&&e.setSelection(t);var n,i=_createForOfIteratorHelper(r);try{for(i.s();!(n=i.n()).done;){n.value.detach()}}catch(o){i.e(o)}finally{i.f()}}))}))}))}function g(e){t.model.change((function(r){var i,o=Array.from(n.getRanges()).map((function(e){return po.fromRange(e)})),a=[],s=_createForOfIteratorHelper(e);try{for(s.s();!(i=s.n()).done;){var c,l=_createForOfIteratorHelper(i.value.getItems({shallow:!0}));try{for(l.s();!(c=l.n()).done;){var u=c.value;a.push(u)}}catch(m){l.e(m)}finally{l.f()}}}catch(m){s.e(m)}finally{s.f()}for(var d=0,f=a;d<f.length;d++){var h=f[d];"$graveyard"!=h.root.rootName&&(r.setSelection(r.createPositionAt(h,0)),t.commands.get("removeTableColumn").refresh(),t.execute("removeTableColumn",{forceDefaultExecution:!0}))}var p=o.filter((function(e){return"$graveyard"!=e.root.rootName}));p.length>0&&r.setSelection(p);var v,g=_createForOfIteratorHelper(o);try{for(g.s();!(v=g.n()).done;){v.value.detach()}}catch(m){g.e(m)}finally{g.f()}}))}function m(e,t){return t.every((function(t){return e.some((function(e){return e.end.isEqual(t.start)||t.end.isEqual(e.start)}))}))}function y(e,t){return e.some((function(e){return t.some((function(t){return e.end.isTouching(t.start)}))}))}}},{key:"_acceptFormatSuggestionCallbackFactory",value:function(){var e=this.editor,t=e.model.document.selection;return function(n,r){e.model.change((function(i){var o=r.commandName,a=r.commandParams,s=n[0].end.nodeBefore;a&&a[0]&&!1===a[0].forceValue&&(s=n[0].start.nodeAfter);var c=i.createRangeIn(s);if("$graveyard"!=c.root.rootName){var l=Array.from(t.getRanges()).map((function(e){return po.fromRange(e)}));i.setSelection(c),e.commands.get(o).refresh(),a.push({forceDefaultExecution:!0}),e.execute.apply(e,[o].concat(_toConsumableArray(a)));var u=l.filter((function(e){return"$graveyard"!=e.root.rootName}));u.length>0&&i.setSelection(u);var d,f=_createForOfIteratorHelper(l);try{for(f.s();!(d=f.n()).done;){d.value.detach()}}catch(h){f.e(h)}finally{f.f()}}}))}}},{key:"_getCoordsForCells",value:function(e){var t,n=this.editor.plugins.get("TableUtils"),r=Number.MAX_SAFE_INTEGER,i=Number.MIN_SAFE_INTEGER,o=Number.MAX_SAFE_INTEGER,a=Number.MIN_SAFE_INTEGER,s=_createForOfIteratorHelper(e);try{for(s.s();!(t=s.n()).done;){var c=t.value;if("$graveyard"!=c.root.rootName){var l=n.getCellLocation(c),u=l.row,d=l.column,f=c.hasAttribute("rowspan")?c.getAttribute("rowspan")-1:0,h=c.hasAttribute("colspan")?c.getAttribute("colspan")-1:0;r=u<r?u:r,i=u+f>i?u+f:i,o=d<o?d:o,a=d+h>a?d+h:a}}}catch(p){s.e(p)}finally{s.f()}return{minRow:r,maxRow:i,minColumn:o,maxColumn:a}}},{key:"_setupColumnsRowsFixing",value:function(){var e=this,t=this.editor,n=t.plugins.get("TrackChangesEditing"),r=t.plugins.get("TableUtils");this._tableSuggestions=new Set,t.model.document.on("change:data",(function(){for(var r=0,i=Array.from(t.model.document.differ.getChangedMarkers());r<i.length;r++){var o=i[r],a=o.name,s=o.data,c=n._splitMarkerName(a),l=c.group,u=c.id,d=c.subType;if("suggestion"==l&&null==s.oldRange){var f=n.getSuggestion(u);e._tablePostFixingSubtypes.includes(d)&&e._tableSuggestions.add(f)}}}),{priority:"low"});var i=function(t,n){var i,o=!1,a=n.createRangeOn(t),s=t.findAncestor("table"),c=r.getCellLocation(t),l=_createForOfIteratorHelper(e._tableSuggestions);try{for(l.s();!(i=l.n()).done;){var u=i.value,d=u.subType,f=d.startsWith("tablePaste"),h=d.substr(f?10:5),p=h.toLowerCase(),v=p.substr(0,3)+"span",g="min"+h,m="max"+h;if(u.isInContent&&(s==u.getFirstRange().start.findAncestor("table")&&!u.isIntersectingWithRange(a))){var y=t.hasAttribute(v)?t.getAttribute(v)-1:0,k=e._getSuggestionCoords(u),_=k[m];k[g]<=c[p]&&c[p]+y<=_&&(u.addRange(a),o=!0)}}}catch(b){l.e(b)}finally{l.f()}return o};t.model.document.registerPostFixer((function(e){var n,r=!1,o=_createForOfIteratorHelper(t.model.document.differ.getChanges());try{for(o.s();!(n=o.n()).done;){var a=n.value;if("insert"==a.type)if("tableRow"==a.name){var s,c=_createForOfIteratorHelper(a.position.nodeAfter.getChildren());try{for(c.s();!(s=c.n()).done;){var l=s.value;r=r||i(l,e)}}catch(u){c.e(u)}finally{c.f()}}else"tableCell"==a.name&&(r=r||i(a.position.nodeAfter,e))}}catch(u){o.e(u)}finally{o.f()}return r}))}},{key:"_getSuggestionCoords",value:function(e){return this._getCoordsForCells(e.getRanges().map((function(e){return e.start.nodeAfter})))}}]),n}(d);function MT(e){return Array.from(new Set(e).values())}var NT=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"afterInit",value:function(){var e=this,t=this.editor,n=t.model.document.selection;if(t.plugins.has("TableEditing")){var r=t.locale.t,i=t.plugins.get("TrackChangesEditing"),o=t.plugins.get("TableUtils"),a=t.plugins.get(PT);a._tablePostFixingSubtypes.push("mergeTableCells"),i.enableCommand("mergeTableCells",(function(){var e=yg(t.model.document.selection);t.model.change((function(){i.markMultiRangeBlockFormat(e,{commandName:"mergeTableCells",commandParams:[]},[],"mergeTableCells")}))})),t.commands.get("mergeTableCells").on("execute",(function(n,r){t.commands.get("trackChanges").value&&(r.length>0&&r[r.length-1]&&r[r.length-1].forceDefaultExecution||e._areSelectedCellsMergable()||n.stop())}),{priority:"highest"});for(var s=function(){var e=l[c],n=t.commands.get(e);i.enableCommand(e,(function(){var e=t.model.document.selection.getFirstPosition().getAncestors().find((function(e){return e.is("element","tableCell")})),r=n.value;t.model.change((function(){i.markMultiRangeBlockFormat([e,r],{commandName:"mergeTableCells",commandParams:[]},[],"mergeTableCells")}))}))},c=0,l=["mergeTableCellUp","mergeTableCellRight","mergeTableCellDown","mergeTableCellLeft"];c<l.length;c++)s();for(var u=function(){var e=f[d],n=t.commands.get(e);i.enableCommand(e,(function(){var r=yg(t.model.document.selection)[0],a=r.findAncestor("table"),s=o.getCellLocation(r),c=s.column,l=s.row,u=[];if("horizontally"==n.direction){var d=new rg(a,{startRow:l,endRow:l,includeAllSlots:!0});u=Array.from(d).map((function(e){return e.cell}))}else{var f=new rg(a,{column:c,includeAllSlots:!0});u=Array.from(f).map((function(e){return e.cell}))}t.model.change((function(t){i.markBlockFormat(t.createRangeOn(r),{commandName:e,commandParams:[]},u,e)}))}))},d=0,f=["splitTableCellVertically","splitTableCellHorizontally"];d<f.length;d++)u();i._descriptionFactory.registerDescriptionCallback((function(e){var t=e.data;if(t)return"mergeTableCells"==t.commandName?{type:"format",content:r("*Merge cells*")}:void 0})),i._descriptionFactory.registerDescriptionCallback((function(e){var t=e.data;if(t)return"splitTableCellVertically"==t.commandName?{type:"format",content:r("*Split cell:* vertically")}:"splitTableCellHorizontally"==t.commandName?{type:"format",content:r("*Split cell:* horizontally")}:void 0}));for(var h=a._acceptFormatSuggestionCallbackFactory(),p=0,v=["mergeTableCellUp","mergeTableCellRight","mergeTableCellDown","mergeTableCellLeft"];p<v.length;p++){var g=v[p];i._suggestionFactory.registerCustomCallback("formatBlock",g,"accept",h)}for(var m=0,y=["splitTableCellVertically","splitTableCellHorizontally"];m<y.length;m++){var k=y[m];i._suggestionFactory.registerCustomCallback("formatBlock",k,"accept",h)}i._suggestionFactory.registerCustomCallback("formatBlock","mergeTableCells","accept",(function(e){t.model.change((function(r){var i=Array.from(n.getRanges()).map((function(e){return po.fromRange(e)}));r.setSelection(e),t.commands.get("mergeTableCells").refresh(),t.execute("mergeTableCells",{forceDefaultExecution:!0});var o=i.filter((function(e){return"$graveyard"!=e.root.rootName}));o.length>0&&r.setSelection(o);var a,s=_createForOfIteratorHelper(i);try{for(s.s();!(a=s.n()).done;){a.value.detach()}}catch(c){s.e(c)}finally{s.f()}}))}));for(var _=function(){var n=w[b],r=t.commands.get(n);r.on("set:isEnabled",(function(n,i,o){if(o){var a=t.model.document.selection.getFirstPosition().getAncestors().find((function(e){return e.is("element","tableCell")}));e._areMergableCells(r.value,a)||(n.return=!1,n.stop())}}),{priority:"low"})},b=0,w=["mergeTableCellUp","mergeTableCellDown","mergeTableCellLeft","mergeTableCellRight"];b<w.length;b++)_()}}},{key:"_areSelectedCellsMergable",value:function(){if(!this.editor.commands.get("mergeTableCells").isEnabled)return!1;var e,t=yg(this.editor.model.document.selection),n=_createForOfIteratorHelper(t);try{for(n.s();!(e=n.n()).done;){var r,i=e.value,o=_createForOfIteratorHelper(t);try{for(o.s();!(r=o.n()).done;){var a=r.value;if(i!=a&&!this._areMergableCells(i,a))return!1}}catch(s){o.e(s)}finally{o.f()}}}catch(s){n.e(s)}finally{n.f()}return!0}},{key:"_areMergableCells",value:function(e,t){var n,r=this.editor.plugins.get("TrackChangesEditing"),i=this.editor.model.createRangeOn(e),o=this.editor.model.createRangeOn(t),a=new Set,s=new Set,c=_createForOfIteratorHelper(r.getSuggestions());try{for(c.s();!(n=c.n()).done;){var l=n.value;if(("insertion"==l.type||"deletion"==l.type||"mergeTableCells"==l.subType)&&l.isInContent){var u,d=_createForOfIteratorHelper(l.getRanges());try{for(d.s();!(u=d.n()).done;){var f=u.value;f.containsRange(i,!0)&&a.add(l.type+":"+l.author.id),f.containsRange(o,!0)&&s.add(l.type+":"+l.author.id)}}catch(g){d.e(g)}finally{d.f()}}}}catch(g){c.e(g)}finally{c.f()}if(a.size!=s.size)return!1;var h,p=_createForOfIteratorHelper(a);try{for(p.s();!(h=p.n()).done;){var v=h.value;if(!s.has(v))return!1}}catch(g){p.e(g)}finally{p.f()}return!0}}],[{key:"requires",get:function(){return[PT]}}]),n}(d),DT=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"afterInit",value:function(){var e=this.editor;if(e.plugins.has("TableEditing")){var t=e.locale.t,n=e.plugins.get("TrackChangesEditing"),r=e.plugins.get("TableUtils"),i=e.plugins.get(PT);n.enableCommand("setTableRowHeader",(function(t,r){var i,o=yg(e.model.document.selection),a=kg(o),s=o[0].findAncestor("table"),c=s.getAttribute("headingRows")||0,l=r&&null!==r.forceValue?r.forceValue:!e.commands.get("setTableRowHeader").value,u=s.getChild(l?a.last:a.first);if(l){var d=s.getChild(c);if(u.index<d.index)return;i=e.model.createRange(e.model.createPositionBefore(d.getChild(0)),e.model.createPositionAfter(u.getChild(u.childCount-1)))}else{var f=s.getChild(c-1);if(!f)return;i=e.model.createRange(e.model.createPositionBefore(u.getChild(0)),e.model.createPositionAfter(f.getChild(f.childCount-1)))}e.model.change((function(){n.markBlockFormat(i,{commandName:"setTableRowHeader",commandParams:[{forceValue:l}]},[],"setTableRowHeader")}))})),n.enableCommand("setTableColumnHeader",(function(t,r){var i,o=yg(e.model.document.selection),a=_g(o),s=o[0].findAncestor("table"),c=s.getAttribute("headingColumns")||0,l=r&&null!==r.forceValue?r.forceValue:!e.commands.get("setTableColumnHeader").value,u=s.getChild(0),d=new rg(s,{startRow:0,column:l?a.last:a.first,includeAllSlots:!1}),f=Array.from(d)[0].cell;if(l){var h=u.getChild(c);if(f.isBefore(h))return;i=e.model.createRange(e.model.createPositionBefore(h),e.model.createPositionAfter(f))}else{var p=u.getChild(c-1);if(!p)return;i=e.model.createRange(e.model.createPositionBefore(f),e.model.createPositionAfter(p))}e.model.change((function(){n.markBlockFormat(i,{commandName:"setTableColumnHeader",commandParams:[{forceValue:l}]},[],"setTableColumnHeader")}))})),e.editing.downcastDispatcher.on("addMarker:suggestion",a(),{priority:"highest"}),e.data.downcastDispatcher.on("addMarker:suggestion",(function(e,t,n){n.options.showSuggestionHighlights&&a({showActiveMarker:!1})(e,t,n)}),{priority:"highest"}),e.editing.downcastDispatcher.on("removeMarker:suggestion",(function(e,t,r){var i=n._splitMarkerName(t.markerName),o=i.type,a=i.id,s=n.getSuggestion(a);if(s.data&&"setTableColumnHeader"==s.data.commandName){var c=r.mapper.markerNameToElements(t.markerName);if(c){var l,u=_createForOfIteratorHelper(c);try{for(u.s();!(l=u.n()).done;){var d=l.value;r.writer.removeClass("ck-suggestion-marker-"+o,d),r.writer.removeClass("ck-suggestion-marker--active",d),r.mapper.unbindElementFromMarkerName(d,t.markerName)}}catch(f){u.e(f)}finally{u.f()}}}}),{priority:"highest"}),n._descriptionFactory.registerDescriptionCallback((function(e){var n=e.data;if(n){if("setTableRowHeader"==n.commandName)return r(t(n.commandParams[0].forceValue?{string:"header row",id:"FORMAT_HEADER_ROW"}:{string:"regular row",id:"FORMAT_REGULAR_ROW"}));if("setTableColumnHeader"==n.commandName)return r(t(n.commandParams[0].forceValue?{string:"header column",id:"FORMAT_HEADER_COLUMN"}:{string:"regular column",id:"FORMAT_REGULAR_COLUMN"}))}function r(e){return{type:"format",content:t("*Format:* %0",e)}}}));var o=i._acceptFormatSuggestionCallbackFactory();n._suggestionFactory.registerCustomCallback("formatBlock","setTableRowHeader","accept",o),n._suggestionFactory.registerCustomCallback("formatBlock","setTableColumnHeader","accept",o)}function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.showActiveMarker,i=void 0===t||t;return function(e,t,o){var a=n._splitMarkerName(t.markerName),s=a.type,c=a.id,l=n.getSuggestion(c);if(l.data&&"setTableColumnHeader"==l.data.commandName)if(t.item)e.stop();else if(o.consumable.consume(t.markerRange,e.name))for(var u=t.markerRange.start.nodeAfter,d=t.markerRange.end.nodeBefore,f=u.parent.parent,h=r.getCellLocation(u).column,p=r.getCellLocation(d).column,v=h;v<=p;v++){var g,m=_createForOfIteratorHelper(new rg(f,{column:v,includeAllSlots:!1}));try{for(m.s();!(g=m.n()).done;){var y=g.value,k=o.mapper.toViewElement(y.cell);o.writer.addClass("ck-suggestion-marker-"+s,k),o.mapper.bindElementToMarker(k,t.markerName),i&&(n.activeMarkers.includes(t.markerName)?o.writer.addClass("ck-suggestion-marker--active",k):o.writer.removeClass("ck-suggestion-marker--active",k))}}catch(_){m.e(_)}finally{m.f()}}}}}}],[{key:"requires",get:function(){return[PT]}}]),n}(d),FT=["borderWidth","borderColor","borderStyle","horizontalAlignment","verticalAlignment","backgroundColor","padding"],jT=Object.fromEntries(FT.map((function(e){return[e,null]}))),LT=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"afterInit",value:function(){var e=this,t=this.editor;if(t.plugins.has("TableClipboard")){var n=t.locale.t,r=t.plugins.get("TrackChangesEditing"),i=t.plugins.get("TableUtils"),o=t.plugins.get(PT);o._tablePostFixingSubtypes.push("tablePasteRow","tablePasteColumn"),t.model.schema.register("tableCellSuggestion",{allowIn:"tableCell",allowContentOf:"tableCell",isLimit:!0}),t.conversion.elementToElement({model:"tableCellSuggestion",view:"suggestion-td"});var a=null;t.model.on("insertContent",(function(n,o){var s=_slicedToArray(o,2),c=s[0],l=s[1],u=o[o.length-1];u&&u.forceDefaultExecution||e.editor.commands.get("trackChanges").value&&function(e,t,n,r){if(t&&!t.is("documentSelection"))return!1;var i=Tm(e,n);if(!i||!BT(i))return!1;var o=yg(n.document.selection);if(!o.length)return!1;var a=o[0].findAncestor("table"),s=kg(o),c=_g(o),l={startRow:s.first,endRow:s.last,startColumn:c.first,endColumn:c.last};return 1==o.length&&(l.endRow+=r.getRows(i)-1,l.endColumn+=r.getColumns(i)-1),BT(a,l)}(c,l,t.model,i)&&(n.stop(),a={cells:[],insertionRanges:[],deletionRanges:[],rowInsertionRanges:[],rowInsertionIndexes:[],columnInsertionRanges:[],columnInsertionIndexes:[]},t.model.change((function(){t.model.insertContent(o[0],o[1],o[2],o[3],{forceDefaultExecution:!0});var e=Object(Sr.a)(),n=a,i=n.rowInsertionRanges,s=n.columnInsertionRanges,c=n.insertionRanges,l=n.deletionRanges,u=n.cells;i.length&&r.markMultiRangeInsertion(i,"tablePasteRow",{tablePasteChainId:e}),s.length&&r.markMultiRangeInsertion(s,"tablePasteColumn",{tablePasteChainId:e}),c.length&&r.markMultiRangeInsertion(c,"tablePaste",{tablePasteChainId:e,skipNestingCheck:!0}),l.length&&r.markMultiRangeDeletion(l,"tablePaste",{tablePasteChainId:e,skipNestingCheck:!0});var d=r.markMultiRangeBlockFormat(u.map((function(e){return e.element})),{formatGroupId:Object(Sr.a)()},[],"tablePasteCell",{tablePasteChainId:e});if(d){var f,h=d.getMarkers(),p=[],v=_createForOfIteratorHelper(u);try{var g=function(){var e=f.value,n=e.element,r=e.attributes;if(!r)return"continue";var i=t.model.createRangeOn(n),o=h.find((function(e){return e.getRange().isEqual(i)}));o&&p.push([o.name,r])};for(v.s();!(f=v.n()).done;)g()}catch(m){v.e(m)}finally{v.f()}p.length&&d.setAttribute("markerAttributes",Object.fromEntries(p))}a=null})))}),{priority:Oi.default.high+10}),t.plugins.get("TableClipboard").on("_replaceTableSlotCell",(function(e,t){var n=_slicedToArray(t,4),r=n[0],i=n[1],o=n[3];if(a){e.stop();var s=r.cell,c=i,l=VT(s),u=VT(c);e.return=s;var d=null,f=null;if(u||l)if(l&&!u){o.remove(s.getChild(0));for(var h=0,p=Array.from(c.getChildren());h<p.length;h++){var v=p[h];o.insert(v,s,"end")}var g=a.rowInsertionIndexes.includes(r.row),m=a.columnInsertionIndexes.includes(r.column);g||m||(d=o.createRangeIn(s))}else u&&!l&&(f=o.createRangeIn(s));else{var y=o.createElement("tableCellSuggestion"),k=o.createElement("tableCellSuggestion");o.wrap(o.createRangeIn(s),k),o.insert(y,s,0);for(var _=0,b=Array.from(c.getChildren());_<b.length;_++){var w=b[_];o.insert(w,y,"end")}d=o.createRangeOn(y),f=o.createRangeOn(k)}var x=Array.from(c.getAttributes()).filter((function(e){var t=_slicedToArray(e,1)[0];return FT.includes(t)}));a.cells.push({element:s,attributes:x.length?Object.fromEntries(x):null}),d&&a.insertionRanges.push(d),f&&a.deletionRanges.push(f)}}),{priority:"high"}),i.on("insertColumns",(function(e,n){var r=_slicedToArray(n,2),i=r[0],o=r[1],s=void 0===o?{}:o;if(a){var c=s.at||0,l=s.columns||1;a.columnInsertionIndexes=new Array(l).fill(c).map((function(e,t){return e+t}));var u,d=_createForOfIteratorHelper(new rg(i,{startColumn:c,endColumn:c+l-1}));try{for(d.s();!(u=d.n()).done;){var f=u.value.cell;a.columnInsertionRanges.push(t.model.createRangeOn(f))}}catch(h){d.e(h)}finally{d.f()}}}),{priority:"low"}),i.on("insertRows",(function(e,n){var r=_slicedToArray(n,2),i=r[0],o=r[1],s=void 0===o?{}:o;if(a){var c=s.at||0,l=s.rows||1;a.rowInsertionIndexes=new Array(l).fill(c).map((function(e,t){return e+t}));var u,d=_createForOfIteratorHelper(new rg(i,{startRow:c,endRow:c+l-1}));try{for(d.s();!(u=d.n()).done;){var f=u.value.cell;a.rowInsertionRanges.push(t.model.createRangeOn(f))}}catch(h){d.e(h)}finally{d.f()}}}),{priority:"low"}),r._descriptionFactory.registerDescriptionCallback((function(e){if(e.subType&&e.subType.startsWith("tablePaste"))return e.previous?{}:{type:"insertion",content:n("*Replace table cells*")}}));for(var s=function(){},c=0,l=["tablePaste","tablePasteColumn","tablePasteRow","tablePasteCell"];c<l.length;c++){var u=l[c];r._suggestionFactory.registerCustomCallback("insertion",u,"join",s),r._suggestionFactory.registerCustomCallback("deletion",u,"join",s)}r._suggestionFactory.registerCustomCallback("formatBlock","tablePasteCell","discard",s),r._suggestionFactory.registerCustomCallback("formatBlock","tablePasteCell","accept",(function(e,n,r){var i=e.map((function(e){return e.getContainedElement()})).filter((function(e){return e})),o=new Map(i.map((function(e){return[e,null]})));if(a){var s,c=_createForOfIteratorHelper(a.cells);try{for(c.s();!(s=c.n()).done;){var l=s.value,u=l.element,d=l.attributes;d&&o.set(u,d)}}catch(k){c.e(k)}finally{c.f()}}else if(r&&r.markerAttributes)for(var f=0,h=Object.entries(r.markerAttributes);f<h.length;f++){var p=_slicedToArray(h[f],2),v=p[0],g=p[1],m=t.model.markers.get(v),y=m?m.getRange().getContainedElement():null;y&&o.set(y,g)}t.model.change((function(e){var t,n=_createForOfIteratorHelper(o);try{for(n.s();!(t=n.n()).done;){var r=_slicedToArray(t.value,2),i=r[0],a=r[1];e.setAttributes(_objectSpread(_objectSpread({},jT),a),i)}}catch(k){n.e(k)}finally{n.f()}}))}));var d=function(e,n){r._suggestionFactory.registerCustomCallback(e,"tablePaste",n,(function(i,o,a){t.model.change((function(t){var s,c=[],l=_createForOfIteratorHelper(i);try{for(l.s();!(s=l.n()).done;){var u=s.value.start.nodeAfter;u.is("element","tableCellSuggestion")&&c.push(u)}}catch(p){l.e(p)}finally{l.f()}r._suggestionFactory.getSuggestionCallback(e,null,n)(i,o,a);for(var d=0,f=c;d<f.length;d++){var h=f[d];"$graveyard"!=h.root.rootName&&t.unwrap(h)}}))}))};d("insertion","accept"),d("insertion","discard"),d("deletion","accept"),d("deletion","discard"),r._suggestionFactory.registerCustomCallback("insertion","tablePasteRow","discard",(function(e){var t=e.map((function(e){return e.getContainedElement()})),n=t[0].findAncestor("table"),r=o._getCoordsForCells(t),a=r.minRow,s=r.maxRow;i.removeRows(n,{at:a,rows:s-a+1})})),r._suggestionFactory.registerCustomCallback("insertion","tablePasteColumn","discard",(function(e){var t=e.map((function(e){return e.getContainedElement()})),n=t[0].findAncestor("table"),r=o._getCoordsForCells(t),a=r.minColumn,s=r.maxColumn;i.removeColumns(n,{at:a,columns:s-a+1})}));var f=function(e,t){if(t.subType&&t.subType.startsWith("tablePaste")){var n=t.attributes.tablePasteChainId,i=r.getSuggestions().filter((function(e){return e.isInContent&&e.attributes&&e.attributes.tablePasteChainId==n}));i.length&&t.getAllAdjacentSuggestions().length!=i.length&&i.reduce((function(e,t){return e.next=t,t.previous=e,t}))}};r.on("suggestionLoaded",f,{priority:"high"}),r.on("suggestionUnloaded",f,{priority:"high"}),t.model.document.registerPostFixer((function(){for(var e=!1,n=Array.from(t.model.document.differ.getChangedMarkers()),i=function(){var n=a[o],i=n.name,s=n.data,c=r._splitMarkerName(i),l=c.group,u=c.type,d=c.id;if("suggestion"!=l||"deletion"!=u||s.oldRange)return"continue";if(!r.hasSuggestion(d))return"continue";var f,h=r.getSuggestion(d).getRanges(),p=t.plugins.get("Users").me,v=_createForOfIteratorHelper(r.getSuggestions());try{for(v.s();!(f=v.n()).done;){var g=f.value;if(g.isInContent&&g.author==p&&"formatBlock"==g.type&&"tablePasteCell"==g.subType&&g.getRanges().every((function(e){return h.some((function(t){return t.containsRange(e,!0)}))}))){var m,y=_createForOfIteratorHelper(g.getAllAdjacentSuggestions());try{for(y.s();!(m=y.n()).done;){var k=m.value;k.isInContent&&(k.discard(),e=!0)}}catch(_){y.e(_)}finally{y.f()}}}}catch(_){v.e(_)}finally{v.f()}},o=0,a=n;o<a.length;o++)i();return e})),t.model.document.registerPostFixer((function(e){var n=t.commands.get("redo");if(!n||!n._createdBatches.has(e.batch))return!1;var i,o=!1,a=t.plugins.get("Users").me,s=t.model.document.differ.getChanges(),c=Array.from(t.model.document.differ.getChangedMarkers()).filter((function(e){var t=e.name,n=e.data,i=r._splitMarkerName(t),o=i.group,s=i.subType,c=i.authorId;return"suggestion"==o&&"tablePaste"==s&&c==a.id&&!n.oldRange})),l=_createForOfIteratorHelper(s);try{var u=function(){var t=i.value;if("insert"!=t.type||"tableCellSuggestion"!=t.name||1!=t.length)return"continue";var n=e.createRange(t.position,t.position.getShiftedBy(1));if(!c.find((function(e){return e.data.newRange.isEqual(n)}))){var r,a=_createForOfIteratorHelper(c);try{for(a.s();!(r=a.n()).done;){var s=r.value,l=s.name,u=s.data;if(n.containsRange(u.newRange)){e.updateMarker(l,{range:n}),o=!0;break}}}catch(d){a.e(d)}finally{a.f()}}};for(l.s();!(i=l.n()).done;)u()}catch(d){l.e(d)}finally{l.f()}return o})),t.model.document.registerPostFixer((function(e){var n,i=!1,o=t.plugins.get("Users").me,a=r.getSuggestions().filter((function(e){return e.isInContent&&e.author==o})),s=new Set,c=new Set,l=_createForOfIteratorHelper(a);try{for(l.s();!(n=l.n()).done;){var u=n.value;if("tablePaste"==u.subType){var d,f=_createForOfIteratorHelper(u.getMarkers());try{for(f.s();!(d=f.n()).done;){var h=d.value,p=h.getRange().getContainedElement();if(p)if(p.is("element","tableCellSuggestion")&&VT(p)){u.removeMarker(h.name),s.add(p),i=!0;var v=p.nextSibling,g=p.previousSibling,m=v&&v.is("element","tableCellSuggestion"),y=g&&g.is("element","tableCellSuggestion");m&&!s.has(v)&&c.add(v),y&&!s.has(g)&&c.add(g)}else p.is("element","paragraph")&&p.isEmpty&&(u.removeMarker(h.name),i=!0)}}catch(P){f.e(P)}finally{f.f()}}else if("tablePasteCell"==u.subType){if(!u.attributes||!u.attributes.tablePasteChainId)continue;var k=u.attributes.markerAttributes;if(k&&Object.keys(k).length)continue;var _,b=u.attributes.tablePasteChainId,w=!0,x=!0,C=_createForOfIteratorHelper(a);try{for(C.s();!(_=C.n()).done;){var T=_.value;if(T.subType&&T.subType.startsWith("tablePaste")){if(!T.attributes.tablePasteChainId){x=!1;break}if(T.id!=u.id&&T.attributes.tablePasteChainId==b){w=!1;break}}}}catch(P){C.e(P)}finally{C.f()}x&&w&&(u.removeMarkers(),i=!0)}}}catch(P){l.e(P)}finally{l.f()}var A,S=_createForOfIteratorHelper(s);try{for(S.s();!(A=S.n()).done;){var E=A.value;e.remove(E)}}catch(P){S.e(P)}finally{S.f()}var I,O=_createForOfIteratorHelper(c);try{for(O.s();!(I=O.n()).done;){var R=I.value;e.unwrap(R)}}catch(P){O.e(P)}finally{O.f()}return i})),t.conversion.for("editingDowncast").markerToHighlight({model:"suggestion:formatBlock:tablePasteCell",view:p,converterPriority:"high"}),t.conversion.for("dataDowncast").markerToHighlight({model:"suggestion:formatBlock:tablePasteCell",view:function(e,t){if(t.options.showSuggestionHighlights)return p(e,{showActiveMarker:!1})},converterPriority:"high"});var h=t.editing.view;this.listenTo(h.document,"clipboardOutput",(function(e,t){var n,r=[],i=_createForOfIteratorHelper(h.createRangeIn(t.content).getItems());try{for(i.s();!(n=i.n()).done;){var o=n.value;o.is("element","suggestion-td")&&r.push(o)}}catch(a){i.e(a)}finally{i.f()}h.change((function(e){var t,n=_createForOfIteratorHelper(r);try{for(n.s();!(t=n.n()).done;){var i=t.value;e.move(e.createRangeIn(i),e.createPositionBefore(i)),e.remove(i)}}catch(a){n.e(a)}finally{n.f()}}))}))}function p(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.showActiveMarker,i=void 0===n||n,o=r._splitMarkerName(e.markerName),a=o.id,s=["ck-suggestion-marker","ck-suggestion-marker-insertion"],c=r.activeMarkers.includes(e.markerName);return c&&s.push("ck-suggestion-marker--active"),{classes:s,attributes:{"data-suggestion":a},priority:c&&i?3010:3e3}}}}],[{key:"requires",get:function(){return[PT]}}]),n}(d);function VT(e){if(e.isEmpty)return!0;var t=e.getChild(0);return t.is("element","paragraph")&&t.isEmpty}function BT(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=_createForOfIteratorHelper(new rg(e,_objectSpread({includeAllSlots:!0},n)));try{for(r.s();!(t=r.n()).done;){var i=t.value,o=i.isAnchor,a=i.cellHeight,s=i.cellWidth;if(!o||1!=a||1!=s)return!1}}catch(c){r.e(c)}finally{r.f()}return!0}var zT=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"afterInit",value:function(){var e=this.editor,t=e.t;if(e.plugins.has("Title")){var n=e.plugins.get("TrackChangesEditing");n._descriptionFactory.registerElementLabel("title-content",(function(){return t({id:"ELEMENT_TITLE",string:"title"})})),e.model.document.registerPostFixer((function(t){for(var r=!1,i=0,o=Array.from(e.model.document.differ.getChangedMarkers());i<o.length;i++){var a=o[i],s=a.name,c=a.data;if("suggestion"===n._splitMarkerName(s).group&&c.newRange){var l=c.newRange,u=l.end.nodeBefore;if(u&&u.is("element","title-content")&&l.start.isTouching(l.end)){var d=e.model.schema.getNearestSelectionRange(l.end,"forward");if(d&&d.isCollapsed){var f=t.createRange(l.start,d.start);f.isEqual(l)||(t.updateMarker(s,{range:f}),r=!0)}r||(t.removeMarker(s),r=!0)}}}return r}))}}}]),n}(d),HT=["enableCommand","get","has","TrackChangesEditing","UndoEditing","undo","plugins"];!function(e,t){!function(t){for(;--t;)e.push(e.shift())}(++t)}(HT,450);var UT=function(e,t){return HT[e-=0]},WT=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"afterInit",value:function(){var e=this.editor,t=e[UT("0x4")][UT("0x6")](UT("0x1"));e[UT("0x4")][UT("0x0")](UT("0x2"))&&(t[UT("0x5")](UT("0x3")),t[UT("0x5")]("redo"))}}]),n}(d),qT=["boolean","charCodeAt","keys","sort","object","number","string","sign","toString"];!function(e,t){!function(t){for(;--t;)e.push(e.shift())}(++t)}(qT,453);var YT=function(e,t){return qT[e-=0]};function GT(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=24;break}if(YT("0x6")!=typeof e){t.next=6;break}return t.next=4,1;case 4:t.next=22;break;case 6:if(!Array.isArray(e)){t.next=10;break}return t.delegateYield(regeneratorRuntime.mark((function e(t){var n,r,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=_createForOfIteratorHelper(t),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=8;break}return i=r.value,e.delegateYield(GT(i),"t0",6);case 6:e.next=3;break;case 8:e.next=13;break;case 10:e.prev=10,e.t1=e.catch(1),n.e(e.t1);case 13:return e.prev=13,n.f(),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[1,10,13,16]])}))(e),"t0",8);case 8:t.next=22;break;case 10:if(YT("0x1")!=typeof e){t.next=14;break}return t.delegateYield(JT(e),"t1",12);case 12:t.next=22;break;case 14:if(YT("0x3")!=typeof e){t.next=18;break}return t.delegateYield($T(e),"t2",16);case 16:t.next=22;break;case 18:if(t.t3=YT("0x2")==typeof e,!t.t3){t.next=22;break}return t.next=22,e;case 22:t.next=26;break;case 24:return t.next=26,0;case 26:case"end":return t.stop()}}),a)}function JT(e){var t,n,r,i;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,KT("{");case 2:if(!e){o.next=23;break}t=Object[YT("0x8")](e)[YT("0x0")](),n=_createForOfIteratorHelper(t),o.prev=5,n.s();case 7:if((r=n.n()).done){o.next=15;break}return i=r.value,o.delegateYield($T(i),"t0",10);case 10:return o.next=12,KT(":");case 12:return o.delegateYield(GT(e[i]),"t1",13);case 13:o.next=7;break;case 15:o.next=20;break;case 17:o.prev=17,o.t2=o.catch(5),n.e(o.t2);case 20:return o.prev=20,n.f(),o.finish(20);case 23:return o.next=25,KT("}");case 25:case"end":return o.stop()}}),s,null,[[5,17,20,23]])}function $T(e){var t,n,r;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,KT('"');case 2:t=_createForOfIteratorHelper(e),i.prev=3,t.s();case 5:if((n=t.n()).done){i.next=11;break}return r=n.value,i.next=9,KT(r);case 9:i.next=5;break;case 11:i.next=16;break;case 13:i.prev=13,i.t0=i.catch(3),t.e(i.t0);case 16:return i.prev=16,t.f(),i.finish(16);case 19:return i.next=21,KT('"');case 21:case"end":return i.stop()}}),c,null,[[3,13,16,19]])}function KT(e){return e[YT("0x7")](0)}function QT(e){return(e*=Math[YT("0x4")](e))[YT("0x5")](36)}var ZT=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;function i(e){return e.map((function(e){return String.fromCharCode(e)})).join("")}return _classCallCheck(this,n),(r=t.call(this,e)).set("activeMarkers",[]),r.on("change:activeMarkers",(function(e,t,n,i){r._model.change((function(e){for(var t=0,o=[].concat(_toConsumableArray(i),_toConsumableArray(n));t<o.length;t++){var a=o[t];r._model.markers.has(a)&&e.updateMarker(a)}}))})),r._descriptionFactory=new SC(r.editor.model.schema,r.editor.locale),r._adapter=null,r._suggestionFactory=new XT(r.editor),r._suggestions=new Map,r._commentsRepository=e.plugins.get(Mw),r._enabledCommands=new Set,r._model=r.editor.model,r._suggestionState=new WeakMap,r[i([95,101,120,101,99,117,116,101,83,117,103,103,101,115,116,105,111,110])]=i([52,48,52,50,48,56,52,50]),r}return _createClass(n,[{key:"init",value:function(){var e=this,t=this.editor;t.conversion.for("editingDowncast").markerToHighlight({model:"suggestion",view:function(t){var n=e._splitMarkerName(t.markerName),r=n.id,i=["ck-suggestion-marker","ck-suggestion-marker-"+n.type],o=e.activeMarkers.includes(t.markerName);return o&&i.push("ck-suggestion-marker--active"),{classes:i,attributes:{"data-suggestion":r},priority:o?3010:3e3}}}),t.conversion.for("dataDowncast").add((function(e){e.on("addMarker:suggestion",(function(e,n,r){if(r.options.showSuggestionHighlights){var i=n.item;if(i){var o=r.mapper.toViewElement(i);t.model.schema.isObject(i)&&o&&!o.getCustomProperty("widget")&&o.is("containerElement")&&Mu(o,r.writer)}}}),{priority:"high"})})),t.conversion.for("dataDowncast").markerToHighlight({model:"suggestion",view:function(t,n){return n.options.showSuggestionHighlights?{classes:["ck-suggestion-marker","ck-suggestion-marker-"+e._splitMarkerName(t.markerName).type],priority:3e3}:null}});var n=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.showActiveMarkers,i=void 0===r||r;return function(n,r,o){if(r.item)if(r.item.is("selection"))o.consumable.consume(r.item,n.name);else{var a=o.mapper.toViewElement(r.item);if(r.item.is("element")&&t.model.schema.isBlock(r.item)&&!a.getCustomProperty("addHighlight")){var s=e._splitMarkerName(r.markerName).id;o.writer.addClass(["ck-suggestion-marker","ck-suggestion-marker-formatBlock"],a),o.writer.setAttribute("data-suggestion",s,a),o.mapper.bindElementToMarker(a,r.markerName),i&&(e.activeMarkers.includes(r.markerName)?o.writer.addClass("ck-suggestion-marker--active",a):o.writer.removeClass("ck-suggestion-marker--active",a));var c,l=_createForOfIteratorHelper(t.model.createRangeIn(r.item).getItems());try{for(l.s();!(c=l.n()).done;){var u=c.value;o.consumable.consume(u,n.name)}}catch(d){l.e(d)}finally{l.f()}o.consumable.consume(r.item,n.name)}}}};t.conversion.for("dataDowncast").add((function(e){e.on("addMarker:suggestion:formatBlock",(function(e,t,r){r.options.showSuggestionHighlights&&n({showActiveMarkers:!1})(e,t,r)}),{priority:"highest"})})),t.conversion.for("dataDowncast").markerToData({model:"suggestion",view:function(e,t){return t.options.showSuggestionHighlights?null:{group:"suggestion",name:e.substr("suggestion".length+1)}}}),t.conversion.for("upcast").elementToElement({view:{name:"suggestion",attribute:{id:/^\w/,suggestionType:/^\w/}},model:function(e,t){var n=t.writer,r="suggestion:"+e.getAttribute("suggestion-type")+":"+e.getAttribute("id");return e.getAttribute("marker-count")&&(r+=":"+e.getAttribute("marker-count")),n.createElement("$marker",{"data-name":r})}}),t.conversion.for("upcast").dataToMarker({view:"suggestion"}),t.conversion.for("editingDowncast").add((function(e){e.on("addMarker:suggestion:formatBlock",n(),{priority:"high"})})),t.conversion.for("editingDowncast").add((function(e){e.on("removeMarker:suggestion:formatBlock",(function(e,t,n){var r=n.mapper.markerNameToElements(t.markerName);if(r){var i,o=_createForOfIteratorHelper(r);try{for(o.s();!(i=o.n()).done;){var a=i.value;a.getCustomProperty("addHighlight")||(n.writer.removeClass(["ck-suggestion-marker","ck-suggestion-marker-formatBlock","ck-suggestion-marker--active"],a),n.writer.removeAttribute("data-suggestion",a),n.mapper.unbindElementFromMarkerName(a,t.markerName))}}catch(s){o.e(s)}finally{o.f()}}}),{priority:"high"})})),t.model.document.registerPostFixer((function(n){for(var r=!1,i=0,o=Array.from(t.model.document.differ.getChangedMarkers());i<o.length;i++){var a=o[i],s=a.name,c=a.data,l=e._splitMarkerName(s),u=l.group,d=l.type,f=l.id;if("suggestion"===u){var h=e._suggestions.get(f);if(null!=c.newRange)if("formatInline"==d&&(r=r||tA(c.newRange,s,n,t.model.schema)),c.newRange.isCollapsed||"$graveyard"==c.newRange.root.rootName||"formatBlock"==d&&!rA(c.newRange))n.removeMarker(s),r=!0;else{if(!h||!h.isInContent)continue;r=!!e._joinWithAdjacentSuggestions(h)||r}}}return r})),t.model.document.registerPostFixer((function(n){var r,i=!1,o=_createForOfIteratorHelper(t.model.document.differ.getChanges());try{for(o.s();!(r=o.n()).done;){var a=r.value;if("insert"==a.type){var s=a.position.getShiftedBy(a.length);if(s.isAtEnd){var c,l=_createForOfIteratorHelper(e._suggestions.values());try{for(l.s();!(c=l.n()).done;){var u=c.value;if(!u.isMultiRange&&u.isInContent&&"formatBlock"==u.type){var d=u.getFirstRange();if(d.start.parent!=d.end.parent&&d.end.isEqual(a.position)){var f=t.model.createRange(d.start,s);n.updateMarker(u.getFirstMarker(),{range:f}),i=!0}}}}catch(h){l.e(h)}finally{l.f()}}}}}catch(h){o.e(h)}finally{o.f()}return i})),t.model.markers.on("update:suggestion",(function(t,n,r){if(null==r){var i=e._splitMarkerName(n.name).id,o=e._suggestions.get(i);o&&o.addMarkerName(n.name)}})),t.model.document.on("change:data",(function(){var n=Array.from(t.model.document.differ.getChangedMarkers());n.sort((function(e,t){var n=e.data.oldRange,r=t.data.oldRange;return null===n&&null===r?0:null===n&&null!==r?-1:null!==n&&null===r?1:n.start.isBefore(r.start)?-1:1}));for(var r=new Set,i=0,o=n;i<o.length;i++){var a=o[i],s=a.name,c=a.data,l=e._splitMarkerName(s),u=l.group,d=l.id;if("suggestion"===u&&(null===c.oldRange&&e._handleNewSuggestionMarker(s),null===c.newRange)){var f=e._suggestions.get(d);f.isInContent?r.add(f):e._removeSuggestion(f)}}for(var h=0,p=n;h<p.length;h++){var v=p[h],g=v.name,m=v.data,y=e._splitMarkerName(g),k=y.group,_=y.id;if("suggestion"===k){var b=e._suggestions.get(_);null!=m.newRange&&null!=m.oldRange&&(e._refreshSuggestionsChain(b),r.add(b.head))}}var w,x=_createForOfIteratorHelper(r);try{for(x.s();!(w=x.n()).done;){var C=w.value;e.fire("suggestionChanged",C)}}catch(T){x.e(T)}finally{x.f()}r.clear()})),t.model.on("applyOperation",(function(n,r){var i=r[0];if(e._suggestions.size&&i.isDocumentOperation&&"transparent"!=i.batch.type){var o,a;switch(i.type){case"insert":o=t.model.createPositionAt(i.position),a=o.getShiftedBy(i.howMany);break;case"split":o=t.model.createPositionAt(i.splitPosition),a=t.model.createPositionAt(i.moveTargetPosition);break;case"move":o=t.model.createPositionAt(i.targetPosition),a=o.getShiftedBy(i.howMany);break;default:return}var s=t.model.createRange(o,a);t.model.change((function(){var t,n=_createForOfIteratorHelper(e._findSuggestions(s));try{for(n.s();!(t=n.n()).done;){var r=t.value,c=r.suggestion,l=r.meta;if(!c.isMultiRange&&"formatInline"!=c.type){var u=c.data&&c.data.multipleBlocks;("formatBlock"!=c.type||"split"==i.type&&!u)&&(l.containsRangeInObject||"insertion"==c.type&&l.isOwn||c.getFirstRange().containsRange(s)&&e._breakSuggestionMarker(c,o,a))}}}catch(d){n.e(d)}finally{n.f()}}))}}),{priority:"lowest"}),t.model.on("deleteContent",(function(n,r){var i=r[0],o=r[1];if((!o||!o.forceDefaultExecution)&&e.trackChangesCommand.value&&!i.isCollapsed){var a=t.model.schema,s=i.getFirstRange(),c=s.start,l=s.end,u=c.nodeAfter&&a.isObject(c.nodeAfter)?null:a.getNearestSelectionRange(c,"forward"),d=l.nodeBefore&&a.isObject(l.nodeBefore)?null:a.getNearestSelectionRange(l,"backward"),f=t.model.createRange(u?u.start:c,d?d.end:l);t.model.change((function(n){e.markDeletion(f);var r=t.model.schema.getNearestSelectionRange(f.start);i instanceof go?n.setSelection(r):i.setTo(r)})),n.stop()}}),{priority:Oi.default.normal+10}),t.model.on("insertContent",(function(n,r){var i=r[r.length-1];i&&i.forceDefaultExecution||e.trackChangesCommand.value&&(t.model.change((function(){var i=t.model.insertContent(r[0],r[1],r[2],r[3],{forceDefaultExecution:!0});if(i){n.return=i.clone();var o=i.end.nodeBefore,a=t.model.schema;o&&a.isBlock(o)&&!a.isObject(o)&&(i=t.model.createRange(i.start,t.model.createPositionAt(o,"end"))),e.markInsertion(i)}})),n.stop())}),{priority:"high"}),this.trackChangesCommand=new Xx(t,this._enabledCommands),this.editor.commands.add("trackChanges",this.trackChangesCommand),this.enableCommand("trackChanges");var r=new nC(t,this._suggestions);t.commands.add("acceptSuggestion",r),this.enableCommand("acceptSuggestion");var i=new oC(t,this._suggestions);t.commands.add("discardSuggestion",i),this.enableCommand("discardSuggestion"),t.commands.add("acceptAllSuggestions",new dC(t,r,this._suggestions)),this.enableCommand("acceptAllSuggestions"),t.commands.add("discardAllSuggestions",new _C(t,i,this._suggestions)),this.enableCommand("discardAllSuggestions"),t.commands.add("acceptSelectedSuggestions",new mC(t,r,this._suggestions)),this.enableCommand("acceptSelectedSuggestions"),t.commands.add("discardSelectedSuggestions",new xC(t,i,this._suggestions)),this.enableCommand("discardSelectedSuggestions");var o=t.plugins.get(Mw);this.listenTo(o,"addComment",(function(t,n){var r=n.threadId,i=e._suggestions.get(r);i&&i.commentThread&&1===i.commentThread.length&&e._updateSuggestionData(r,{hasComments:!0})}),{priority:"low"}),this.listenTo(o,"removeComment",(function(t,n){var r=n.threadId,i=e._suggestions.get(r);i&&i.commentThread&&!i.commentThread.length&&e._updateSuggestionData(r,{hasComments:!1})}),{priority:"low"})}},{key:"adapter",get:function(){return this._adapter},set:function(e){if(this._adapter)throw new Ke.default("track-changes-adapter-already-set",this);this._adapter=e}},{key:"getSuggestions",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.skipNotAttached,r=void 0!==n&&n,i=t.toJSON,o=void 0!==i&&i,a=[],s=_createForOfIteratorHelper(this._suggestions.values());try{for(s.s();!(e=s.n()).done;){var c=e.value;r&&!c.isInContent||a.push(c)}}catch(l){s.e(l)}finally{s.f()}return o?a.map((function(e){return e.toJSON()})):a}},{key:"getSuggestion",value:function(e){var t=this._suggestions.get(e);if(!t)throw new Ke.default("track-changes-suggestion-not-found",this);return t}},{key:"hasSuggestion",value:function(e){return this._suggestions.has(e)}},{key:"addSuggestionData",value:function(e){var t=e.id,n=e.authorId,r=_slicedToArray(e.type.split(":"),2),i=r[0],o=r[1],a=this._suggestions.get(t)||this._createSuggestion(i,o,t,n);switch(this._addThreadToSuggestion(a),this._checkSuggestionCorrectness(a,i,o||null,n),a.createdAt=e.createdAt,e.data&&(a.data=e.data),e.attributes&&(a.attributes=e.attributes),this._adapter&&this._adapter.addSuggestion||(a._saved=!0),this._suggestionState.get(a)){case"notReady":this._suggestionState.set(a,"dataReady");break;case"markerReady":a.isInContent?(this._suggestionState.set(a,"ready"),this.fire("suggestionLoaded",a)):this._suggestionState.set(a,"removed")}return a}},{key:"enableCommand",value:function(e,t){var n=this,r=this.editor.commands.get(e);if(!r)throw new Ke.default("track-changes-command-not-found",this);this._enabledCommands.add(r),t&&r.on("execute",(function(e,i){n.trackChangesCommand.value&&(i.length>0&&i[i.length-1]&&i[i.length-1].forceDefaultExecution||(t.apply(void 0,[function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r.execute.apply(r,t.concat([{forceDefaultExecution:!0}]))}].concat(_toConsumableArray(i))),e.stop()))}),{priority:"high"})}},{key:"markInsertion",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e.isCollapsed)return null;var r,i=this.editor.plugins.get("Users").me,o=_createForOfIteratorHelper(this._findSuggestions(e,"insertion"));try{for(o.s();!(r=o.n()).done;){var a=r.value,s=a.suggestion,c=a.meta;if(c.isOwn){if(c.isNextTo&&t==s.subType){var l=s.getFirstRange();l.start.isEqual(e.end)?this._setSuggestionRange(s,this._model.createRange(e.start,l.end)):this._setSuggestionRange(s,this._model.createRange(l.start,e.end))}return s}}}catch(p){o.e(p)}finally{o.f()}var u=Object(Sr.a)(),d=i.id,f=t?"insertion:"+t:"insertion",h=this._setSuggestionData({id:u,type:f,createdAt:new Date,authorId:d,attributes:n});return this._addSuggestionMarker(f,u,d,e),h}},{key:"markMultiRangeInsertion",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"multi",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=this.editor.plugins.get("Users").me,o=this._suggestionFactory.getSuggestionCallback("insertion",n,"join"),a=_createForOfIteratorHelper(this.getSuggestions());try{for(a.s();!(t=a.n()).done;){var s=t.value;if(s.author.id==i.id&&"insertion"==s.type&&s.subType==n&&(o(s.getRanges(),e)||o(e,s.getRanges()))){var c,l=_createForOfIteratorHelper(e);try{for(l.s();!(c=l.n()).done;){var u=c.value;s.addRange(u)}}catch(M){l.e(M)}finally{l.f()}return s}}}catch(M){a.e(M)}finally{a.f()}var d,f=_createForOfIteratorHelper(e);try{for(f.s();!(d=f.n()).done;){var h,p=d.value,v=_createForOfIteratorHelper(this._findSuggestions(p,"insertion"));try{for(v.s();!(h=v.n()).done;){var g=h.value,m=g.suggestion,y=g.meta;if(y.isOwn){var k,_=!0,b=_createForOfIteratorHelper(m.getRanges());try{for(b.s();!(k=b.n()).done;){var w,x=k.value,C=_createForOfIteratorHelper(e);try{for(C.s();!(w=C.n()).done;){var T=w.value;if(!x.containsRange(T)){_=!1;break}}}catch(M){C.e(M)}finally{C.f()}}}catch(M){b.e(M)}finally{b.f()}if(_)return m}}}catch(M){v.e(M)}finally{v.f()}}}catch(M){f.e(M)}finally{f.f()}var A,S=Object(Sr.a)(),E=i.id,I="insertion:"+n,O=this._setSuggestionData({id:S,type:I,createdAt:new Date,authorId:E,attributes:r}),R=_createForOfIteratorHelper(e);try{for(R.s();!(A=R.n()).done;){var P=A.value;this._addSuggestionMarker(I,S,E,P,AC.getMultiRangeId())}}catch(M){R.e(M)}finally{R.f()}return O}},{key:"markInlineFormat",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(r=r||nA(t),!e.isCollapsed){var o,a=this.editor.plugins.get("Users").me,s=[],c=_createForOfIteratorHelper(this._findSuggestions(e,"insertion"));try{for(c.s();!(o=c.n()).done;){var l=o.value,u=l.suggestion,d=l.meta;d.isOwn&&!d.isInsideObject&&s.push.apply(s,_toConsumableArray(u.getRanges()))}}catch(I){c.e(I)}finally{c.f()}var f=function(e,t){var n,r=[],i=_createForOfIteratorHelper(t);try{for(i.s();!(n=i.n()).done;){var o=n.value,a=e.getIntersection(o);a&&r.push(a)}}catch(I){i.e(I)}finally{i.f()}return r}(e,s),h=function(t,n){var r,i=[e],o=_createForOfIteratorHelper(n);try{for(o.s();!(r=o.n()).done;)for(var a=r.value,s=0;s<i.length;){var c=i[s].getDifference(a);i.splice.apply(i,[s,1].concat(_toConsumableArray(c))),s+=c.length}}catch(I){o.e(I)}finally{o.f()}return i}(0,s);f.length&&this._model.change((function(){var e,o=_createForOfIteratorHelper(f);try{for(o.s();!(e=o.n()).done;){var a=e.value;n._suggestionFactory.getSuggestionCallback("formatInline",r,"accept")([a],t,i)}}catch(I){o.e(I)}finally{o.f()}}));var p,v=_createForOfIteratorHelper(h);try{for(v.s();!(p=v.n()).done;){var g,m=p.value,y=null,k=m.start,_=m.end,b=_createForOfIteratorHelper(this._findSuggestions(m,"formatInline"));try{for(b.s();!(g=b.n()).done;){var w=g.value,x=w.suggestion,C=w.meta;if(C.isOwn&&x.subType==r){var T=x.getFirstRange();if(T.containsRange(m,!0))return;k=k.isBefore(T.start)?k:T.start,_=_.isAfter(T.end)?_:T.end,y?T.start.isBefore(y.getFirstRange().start)?(y.removeMarkers(),y=x):x.removeMarkers():y=x}}}catch(I){b.e(I)}finally{b.f()}var A=this._model.createRange(k,_);if(y)this._setSuggestionRange(y,A);else{var S=Object(Sr.a)(),E=a.id;this._setSuggestionData({id:S,type:"formatInline:"+r,data:t,createdAt:new Date,authorId:E,attributes:i}),this._addSuggestionMarker("formatInline:"+r,S,E,A)}}}catch(I){v.e(I)}finally{v.f()}}}},{key:"markBlockFormat",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};t.formatGroupId||(t.formatGroupId=t.commandName),t.multipleBlocks=e instanceof eo,i=i||nA(t);var a=r.map((function(e){return iA(e,n._model)})),s=e instanceof eo?e:iA(e,this._model);a.push(s);var c,l=!0,u=_createForOfIteratorHelper(a);try{for(u.s();!(c=u.n()).done;){var d=c.value;if(!this._rangeIsInLocalUserInsertion(d)){l=!1;break}}}catch(T){u.e(T)}finally{u.f()}if(l)this._suggestionFactory.getSuggestionCallback("formatBlock",i,"accept")([s],t,o);else{var f,h=null,p=s.start,v=s.end,g=_createForOfIteratorHelper(this._findSuggestions(s,"formatBlock"));try{for(g.s();!(f=g.n()).done;){var m=f.value,y=m.suggestion,k=m.meta;if(k.isOwn&&!k.isNextTo&&!k.containsRangeInObject&&!k.isInsideObject&&y.data.formatGroupId==t.formatGroupId){var _=y.getFirstRange();if(y.subType==i){if(_.containsRange(s,!0))return;p=p.isBefore(_.start)?p:_.start,v=v.isAfter(_.end)?v:_.end,h?_.start.isBefore(h.getFirstRange().start)?(h.removeMarkers(),h=y):y.removeMarkers():h=y}else{var b=s.getIntersection(_);this._cutOutSuggestionMarker(y,b)}}}}catch(T){g.e(T)}finally{g.f()}var w=this.editor.plugins.get("Users").me,x=Object(Sr.a)(),C=w.id;h?this._setSuggestionRange(h,this._model.createRange(p,v)):(this._setSuggestionData({id:x,type:"formatBlock:"+i,data:t,createdAt:new Date,authorId:C,attributes:o}),this._addSuggestionMarker("formatBlock:"+i,x,C,this._model.createRange(p,v)))}}},{key:"markMultiRangeBlockFormat",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};t.formatGroupId||(t.formatGroupId=t.commandName),t.multipleBlocks=!1,i=i||nA(t);var a=r.map((function(e){return iA(e,n._model)})),s=e.map((function(e){return iA(e,n._model)}));a.push.apply(a,_toConsumableArray(s));var c,l=!0,u=_createForOfIteratorHelper(a);try{for(u.s();!(c=u.n()).done;){var d=c.value;if(!this._rangeIsInLocalUserInsertion(d)){l=!1;break}}}catch(j){u.e(j)}finally{u.f()}if(l)this._suggestionFactory.getSuggestionCallback("formatBlock",i,"accept")(s,t,o);else{var f,h=this.editor.plugins.get("Users").me,p=_createForOfIteratorHelper(this.getSuggestions());try{for(p.s();!(f=p.n()).done;){var v=f.value;if(v.author.id==h.id&&("formatBlock"==v.type&&v.data.formatGroupId==t.formatGroupId))for(var g=v.subType==i,m=0;m<s.length;m++){var y,k=s[m],_=_createForOfIteratorHelper(v.getMarkers());try{for(_.s();!(y=_.n()).done;){var b=y.value,w=b.getRange();if(k.isEqual(w)){g?(s.splice(m,1),m--):v.removeMarker(b.name);break}}}catch(j){_.e(j)}finally{_.f()}}}}catch(j){p.e(j)}finally{p.f()}if(0!=s.length){var x,C=this._suggestionFactory.getSuggestionCallback("formatBlock",i,"join"),T=_createForOfIteratorHelper(this.getSuggestions());try{for(T.s();!(x=T.n()).done;){var A=x.value;if(A.author.id==h.id&&"formatBlock"==A.type&&A.data.formatGroupId==t.formatGroupId&&A.subType==i&&(C(A.getRanges(),s)||C(s,A.getRanges()))){var S,E=_createForOfIteratorHelper(s);try{for(E.s();!(S=E.n()).done;){var I=S.value;A.addRange(I)}}catch(j){E.e(j)}finally{E.f()}return A}}}catch(j){T.e(j)}finally{T.f()}var O,R=Object(Sr.a)(),P=h.id,M="formatBlock:"+i,N=this._setSuggestionData({id:R,type:M,data:t,createdAt:new Date,authorId:P,attributes:o}),D=_createForOfIteratorHelper(s);try{for(D.s();!(O=D.n()).done;){var F=O.value;this._addSuggestionMarker(M,R,P,F,AC.getMultiRangeId())}}catch(j){D.e(j)}finally{D.f()}return N}}}},{key:"markDeletion",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e.isCollapsed)return null;var r,i=this.editor.plugins.get("Users").me,o=new po(e.start,e.end),a=_createForOfIteratorHelper(this._findSuggestions(o,"insertion"));try{for(a.s();!(r=a.n()).done;){var s=r.value,c=s.suggestion,l=s.meta;if(l.isOwn&&!l.isNextTo)if(c.isMultiRange){var u=c.getRanges().filter((function(e){return"$graveyard"!=e.root.rootName}));if(u.every((function(e){return o.containsRange(e,!0)}))&&c.discard(),u.some((function(e){return e.containsRange(o,!0)})))return this._suggestionFactory.getSuggestionCallback("deletion",t,"accept")([o],null,n),null}else{var d=o.getIntersection(c.getFirstRange());c._onDiscard([d],null,n)}}}catch(O){a.e(O)}finally{a.f()}if(o.detach(),o.isCollapsed||"$graveyard"==o.root.rootName)return null;var f,h=null,p=o.start,v=o.end,g=_createForOfIteratorHelper(this._findSuggestions(o,"deletion"));try{for(g.s();!(f=g.n()).done;){var m=f.value,y=m.suggestion,k=m.meta;if(k.isOwn)if(y.isMultiRange){var _,b=!0,w=_createForOfIteratorHelper(y.getRanges());try{for(w.s();!(_=w.n()).done;){var x=_.value;if(x.containsRange(o,!0))return y;o.containsRange(x)||(b=!1)}}catch(O){w.e(O)}finally{w.f()}b&&y.discard()}else{var C=y.getFirstRange();if(C.containsRange(o,!0))return y;p=p.isBefore(C.start)?p:C.start,v=v.isAfter(C.end)?v:C.end,h?C.start.isBefore(h.getFirstRange().start)?(h.removeMarkers(),h=y):y.removeMarkers():h=y}}}catch(O){g.e(O)}finally{g.f()}if(h)return this._setSuggestionRange(h,this._model.createRange(p,v)),h;var T=Object(Sr.a)(),A=this._model.createRange(p,v),S=i.id,E=t?"deletion:"+t:"deletion",I=this._setSuggestionData({id:T,type:E,createdAt:new Date,authorId:S,attributes:n});return this._addSuggestionMarker(E,T,S,A),I}},{key:"markMultiRangeDeletion",value:function(e){var t,n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"multi",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=this.editor.plugins.get("Users").me,a=e.map((function(e){return new po(e.start,e.end)})),s=new Set,c=_createForOfIteratorHelper(a);try{for(c.s();!(t=c.n()).done;){var l,u=t.value,d=_createForOfIteratorHelper(this._findSuggestions(u,"insertion"));try{for(d.s();!(l=d.n()).done;){var f=l.value,h=f.suggestion,p=f.meta;p.isOwn&&!p.isNextTo&&s.add(h)}}catch(K){d.e(K)}finally{d.f()}}}catch(K){c.e(K)}finally{c.f()}var v,g=_createForOfIteratorHelper(s);try{for(g.s();!(v=g.n()).done;){var m=v.value;if(m.isMultiRange){var y=function(){var t=m.getRanges();if((!m.attributes||!m.attributes.skipNestingCheck)&&t.every((function(e){return a.some((function(t){return t.containsRange(e,!0)}))}))&&m.discard(),a.every((function(e){return t.some((function(t){return t.containsRange(e,!0)}))})))return{v:(n._suggestionFactory.getSuggestionCallback("deletion",r,"accept")(e,null,i),null)}}();if("object"==typeof y)return y.v}else{var k=function(){var e=m.getFirstRange();if(a.some((function(t){return t.containsRange(e,!0)}))&&m.discard(),a.every((function(t){return e.containsRange(t,!0)})))return{v:(n._suggestionFactory.getSuggestionCallback("deletion",r,"accept")(a,null,i),null)}}();if("object"==typeof k)return k.v}}}catch(K){g.e(K)}finally{g.f()}var _,b=this._suggestionFactory.getSuggestionCallback("deletion",r,"join"),w=null,x=_createForOfIteratorHelper(this.getSuggestions());try{for(x.s();!(_=x.n()).done;){var C=_.value;if(C.author.id==o.id&&C.isInContent&&"deletion"==C.type&&C.subType==r&&(b(C.getRanges(),a)||b(a,C.getRanges())))if(w){if(C.commentThread&&C.commentThread.length)continue;var T,A=_createForOfIteratorHelper(C.getRanges());try{for(A.s();!(T=A.n()).done;){var S=T.value;w.isIntersectingWithRange(S)||w.addRange(S)}}catch(K){A.e(K)}finally{A.f()}C.removeMarkers()}else{w=C;var E,I=_createForOfIteratorHelper(a);try{for(I.s();!(E=I.n()).done;){var O=E.value;C.isIntersectingWithRange(O)||C.addRange(O)}}catch(K){I.e(K)}finally{I.f()}}}}catch(K){x.e(K)}finally{x.f()}if(w)return w;s.clear();var R,P=_createForOfIteratorHelper(a);try{for(P.s();!(R=P.n()).done;){var M,N=R.value,D=_createForOfIteratorHelper(this._findSuggestions(N,"deletion"));try{for(D.s();!(M=D.n()).done;){var F=M.value,j=F.suggestion,L=F.meta;L.isOwn&&s.add(j)}}catch(K){D.e(K)}finally{D.f()}}}catch(K){P.e(K)}finally{P.f()}var V,B=_createForOfIteratorHelper(s);try{var z=function(){var e=V.value,t=e.getRanges();if((!i||!i.skipNestingCheck)&&a.every((function(e){return t.some((function(t){return t.containsRange(e,!0)}))})))return{v:e};(!e.attributes||!e.attributes.skipNestingCheck)&&t.every((function(e){return a.some((function(t){return t.containsRange(e,!0)}))}))&&e.discard()};for(B.s();!(V=B.n()).done;){var H=z();if("object"==typeof H)return H.v}}catch(K){B.e(K)}finally{B.f()}var U,W=Object(Sr.a)(),q=o.id,Y="deletion:"+r,G=this._setSuggestionData({id:W,type:Y,createdAt:new Date,authorId:q,attributes:i}),J=_createForOfIteratorHelper(a);try{for(J.s();!(U=J.n()).done;){var $=U.value;$.detach(),$.isCollapsed||"$graveyard"==$.root.rootName||this._addSuggestionMarker(Y,W,q,$,AC.getMultiRangeId())}}catch(K){J.e(K)}finally{J.f()}return G}},{key:"_setSuggestionRange",value:function(e,t){var n=e.getFirstMarker();this._model.change((function(e){e.updateMarker(n,{range:t})}))}},{key:"_addThreadToSuggestion",value:function(e){var t=e.id,n=this.editor.config.get("collaboration.channelId");this._commentsRepository.hasCommentThread(t)||this._commentsRepository.addCommentThread({channelId:n,threadId:t}),e.commentThread=this._commentsRepository.getCommentThread(t)}},{key:"_checkSuggestionCorrectness",value:function(e,t,n,r){if(e.type!=t||e.subType!=n||e.author.id!=r)throw this.editor.isReadOnly=!0,new Ke.default("track-changes-suggestion-data-mismatch",this)}},{key:"_cutOutSuggestionMarker",value:function(e,t){var n=e.getFirstRange();if(t.isEqual(n))e.removeMarkers();else if(n.containsRange(t)){var r=this._model.createPositionAt(t.start.nodeBefore,"end");this._setSuggestionRange(e,this._model.createRange(n.start,r));var i=Object(Sr.a)(),o=e.author.id,a=e.type+":"+e.subType;this._setSuggestionData({id:i,type:a,createdAt:new Date,authorId:o,data:e.data,attributes:e.attributes});var s=this._model.createPositionAt(t.end.parent,"after"),c=this._model.createRange(s,n.end);this._addSuggestionMarker(a,i,o,c)}else if(n.containsPosition(t.start)){var l=this._model.createPositionAt(t.start.nodeBefore,"end");this._setSuggestionRange(e,this._model.createRange(n.start,l))}else{var u=this._model.createPositionAt(t.end.parent,"after");this._setSuggestionRange(e,this._model.createRange(u,n.end))}}},{key:"_rangeIsInLocalUserInsertion",value:function(e){var t,n=_createForOfIteratorHelper(this._findSuggestions(e,"insertion"));try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.suggestion;if(r.meta.isOwn){var o,a=_createForOfIteratorHelper(i.getRanges());try{for(a.s();!(o=a.n()).done;){var s=o.value;if(!e.getDifference(s).length)return!0}}catch(c){a.e(c)}finally{a.f()}}}}catch(c){n.e(c)}finally{n.f()}return!1}},{key:"_getAuthorFromId",value:function(e){var t=this.editor.plugins.get("Users").getUser(e);if(!t)throw new Ke.default("track-changes-user-not-found",this);return t}},{key:"_createSuggestion",value:function(e,t,n,r){var i=this,o=this._getAuthorFromId(r),a=this._suggestionFactory.buildSuggestion(e,t,n,o,(function(e){return i._updateSuggestionData(n,{attributes:e})}));return this.listenTo(a,"accept",(function(){i._updateSuggestionData(n,{state:"accepted"})}),{priority:"high"}),this.listenTo(a,"discard",(function(){i._updateSuggestionData(n,{state:"rejected"})}),{priority:"high"}),this._suggestions.set(n,a),this._suggestionState.set(a,"notReady"),a}},{key:"_splitMarkerName",value:function(e){var t=e.split(":");return{group:t[0],type:t[1],subType:t.length>=5?t[2]:null,id:t.length<5?t[2]:t[3],authorId:t.length<5?t[3]:t[4],markerCount:6==t.length?t[5]:null}}},{key:"_breakSuggestionMarker",value:function(e,t,n){var r=e.getFirstRange(),i=r.end;this._setSuggestionRange(e,this._model.createRange(r.start,t));var o=Object(Sr.a)(),a=e.author.id,s=e.type+(e.subType?":"+e.subType:"");this._setSuggestionData({id:o,type:s,createdAt:new Date,authorId:a,originalSuggestionId:e.id,data:e.data}),"formatBlock"==e.type&&(n=this._model.createPositionBefore(n.parent)),this._addSuggestionMarker(s,o,a,this._model.createRange(n,i))}},{key:"_findSuggestions",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=[],i=this._model.schema,o=this.editor.plugins.get("Users").me,a=_createForOfIteratorHelper(this.getSuggestions());try{for(a.s();!(t=a.n()).done;){var s=t.value;if(s.isInContent&&(!n||s.type==n)){var c,l=_createForOfIteratorHelper(s.getRanges());try{for(l.s();!(c=l.n()).done;){var u=c.value,d=e.start.isEqual(u.end)||e.end.isEqual(u.start);if(d||e.getIntersection(u)){var f=e.containsRange(u)&&eA(i,u.start,e),h=u.containsRange(e)&&eA(i,e.start,u);r.push({suggestion:s,meta:{isOwn:o==s.author,isNextTo:d,isInsideObject:f,containsRangeInObject:h}});break}}}catch(p){l.e(p)}finally{l.f()}}}}catch(p){a.e(p)}finally{a.f()}return r}},{key:"_addSuggestionMarker",value:function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;this._model.change((function(o){var a="suggestion:"+e+":"+t+":"+n;i&&(a=a+":"+i),o.addMarker(a,{range:r,usingOperation:!0,affectsData:!0})}))}},{key:"_removeSuggestion",value:function(e){var t=e.previous,n=e.next;e.previous=null,null!=t&&(t.next=null),e.next=null,null!=n&&(n.previous=null),"ready"==this._suggestionState.get(e)&&(this._suggestionState.set(e,"removed"),this.fire("suggestionUnloaded",e,t,n))}},{key:"_setSuggestionData",value:function(e){var t=this,n=e.id,r=this.addSuggestionData(e);if(this._adapter&&this._adapter.addSuggestion){var i=this.editor.plugins.get("PendingActions"),o=r.hasComments,a=r.subType?r.type+":"+r.subType:r.type,s=i.add((0,this.editor.locale.t)({string:"Unsaved change in suggestion.",id:"PENDING_ACTION_SUGGESTION"}));this._adapter.addSuggestion({id:n,type:a,hasComments:o,data:e.data||null,originalSuggestionId:e.originalSuggestionId||null,attributes:r.attributes}).then((function(e){r._saved=!0,i.remove(s),e&&e.createdAt&&(t._suggestions.get(n).createdAt=e.createdAt)}))}return r}},{key:"_updateSuggestionData",value:function(e,t){var n=this,r=this.editor.plugins.get("PendingActions"),i=this._suggestions.get(e);if(this._adapter&&this._adapter.updateSuggestion)if(i._saved){var o=r.add((0,this.editor.locale.t)({string:"Unsaved change in suggestion.",id:"PENDING_ACTION_SUGGESTION"}));this._adapter.updateSuggestion(e,t).then((function(){r.remove(o)}))}else i.on("change:_saved",(function(){n._updateSuggestionData(e,t)}))}},{key:"_getSuggestionData",value:function(e){if(!this._adapter||!this._adapter.getSuggestion)throw new Ke.default("track-changes-adapter-missing-getsuggestion",this);return this._adapter.getSuggestion(e)}},{key:"_handleNewSuggestionMarker",value:function(e){var t=this,n=this._splitMarkerName(e),r=n.id,i=n.type,o=n.subType,a=n.authorId,s=this._suggestions.get(r)||this._createSuggestion(i,o,r,a);switch(this._checkSuggestionCorrectness(s,i,o,a),this._suggestionState.get(s)){case"notReady":this._getSuggestionData(r).then((function(e){var n=Promise.resolve();e.hasComments&&(n=t._commentsRepository.fetchCommentThread({channelId:t.editor.config.get("collaboration.channelId"),threadId:r})),n.then((function(){t.addSuggestionData(e)._saved=!0}))})),this._suggestionState.set(s,"markerReady");break;case"removed":this._updateSuggestionData(r,{state:"open"});case"dataReady":this._suggestionState.set(s,"ready"),this.fire("suggestionLoaded",s);break;case"ready":this.fire("suggestionChanged",s)}s.addMarkerName(e),this._refreshSuggestionsChain(s)}},{key:"_refreshSuggestionsChain",value:function(e){if("formatInline"!=e.type&&"formatBlock"!=e.type&&!e.isMultiRange){var t,n=!0,r=!0,i=_createForOfIteratorHelper(this.getSuggestions());try{for(i.s();!(t=i.n()).done;){var o=t.value;if(!o.isMultiRange&&o!=e&&o.isInContent&&"formatInline"!=o.type&&"formatBlock"!=o.type&&o.author.id==e.author.id){if(this._canChainSuggestions(o,e)){if(e.commentThread&&e.commentThread.length)continue;o.next=e,e.previous=o,n=!1}if(this._canChainSuggestions(e,o)){if(o.commentThread&&o.commentThread.length)continue;e.next=o,o.previous=e,r=!1}}}}catch(a){i.e(a)}finally{i.f()}e.previous&&n&&(e.previous.next=null,e.previous=null),e.next&&r&&(e.next.previous=null,e.next=null)}}},{key:"_canChainSuggestions",value:function(e,t){var n=e.getFirstRange(),r=t.getFirstRange();if(n.end.isEqual(r.start))return!0;if(e.type!=t.type)return!1;if(!n.end.isTouching(r.start))return!1;var i,o=_createForOfIteratorHelper(new Ji({boundaries:this.editor.model.createRange(n.end,r.start)}));try{for(o.s();!(i=o.n()).done;){var a=i.value;if("elementEnd"==a.type&&this.editor.model.schema.isLimit(a.item))return!1}}catch(s){o.e(s)}finally{o.f()}return!0}},{key:"_joinWithAdjacentSuggestions",value:function(e){var t,n=_createForOfIteratorHelper(this._suggestions.values());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r!=e&&r.isInContent&&(r.type==e.type&&r.author.id==e.author.id&&r.subType==e.subType)){var i=this._suggestionFactory.getSuggestionCallback(e.type,e.subType,"join");if(i(r.getRanges(),e.getRanges())){if(e.commentThread&&e.commentThread.length)continue;return this._joinSuggestions(r,e),!0}if(i(e.getRanges(),r.getRanges())){if(r.commentThread&&r.commentThread.length)continue;return this._joinSuggestions(e,r),!0}}}}catch(o){n.e(o)}finally{n.f()}return!1}},{key:"_joinSuggestions",value:function(e,t){if(e.isMultiRange){var n,r=_createForOfIteratorHelper(t.getRanges());try{for(r.s();!(n=r.n()).done;){var i=n.value;e.addRange(i)}}catch(a){r.e(a)}finally{r.f()}}else{var o=t.getFirstRange().end;this._setSuggestionRange(e,this._model.createRange(e.getFirstRange().start,o))}t.removeMarkers()}}],[{key:"requires",get:function(){return[Qy,ms,Mw,EC,DC,FC,BC,UC,YC,$C,ZC,eT,tT,rT,iT,oT,aT,lT,uT,dT,pT,mT,yT,kT,bT,TT,ET,IT,RT,PT,NT,DT,LT,zT,WT]}},{key:"pluginName",get:function(){return"TrackChangesEditing"}}]),n}(d);Object(u.default)(ZT,Qe.default);var XT=function(){function e(t){_classCallCheck(this,e),this._editor=t,this._model=t.model,this._customCallbacks=new Map,this._defaultCallbacks=new Map,this._registerDefaultCallbacks()}return _createClass(e,[{key:"buildSuggestion",value:function(e,t,n,r,i){var o=this;return new AC(this._model,{type:e,subType:t,id:n,author:r,onAttributesChange:i,onAccept:function(){return o.getSuggestionCallback(e,t,"accept").apply(void 0,arguments)},onDiscard:function(){return o.getSuggestionCallback(e,t,"discard").apply(void 0,arguments)}})}},{key:"registerCustomCallback",value:function(e,t,n,r){this._customCallbacks.set(e+":"+t+":"+n,r)}},{key:"getSuggestionCallback",value:function(e,t,n){return this._customCallbacks.get(e+":"+t+":"+n)||this._defaultCallbacks.get(e+":"+n)}},{key:"_registerDefaultCallbacks",value:function(){var e=this,t=function(){},n=function(t){t.sort((function(e,t){return e.start.isBefore(t.start)?1:-1})),e._model.change((function(n){var r,i=_createForOfIteratorHelper(t);try{for(i.s();!(r=i.n()).done;){var o,a=r.value;o=a.end.isAtEnd&&a.end.parent==a.start.nodeAfter?n.createSelection(a.start.nodeAfter,"on"):n.createSelection(a),e._model.deleteContent(o,{forceDefaultExecution:!0,doNotAutoparagraph:!0})}}catch(s){i.e(s)}finally{i.f()}}))},r=function(t,n){e._model.change((function(r){var i,o=n.commandName,a=n.commandParams,s=t[0];if("$graveyard"!=s.root.rootName){var c,l=Array.from(e._model.document.selection.getRanges()).map((function(e){return po.fromRange(e)}));(c=s).end.parent==c.start.nodeAfter&&0==c.end.offset?r.setSelection(e._model.createRange(s.end)):r.setSelection(s),e._editor.commands.get(o).refresh(),a.push({forceDefaultExecution:!0}),(i=e._editor).execute.apply(i,[o].concat(_toConsumableArray(a)));var u=l.filter((function(e){return"$graveyard"!=e.root.rootName}));u.length>0&&r.setSelection(u);var d,f=_createForOfIteratorHelper(l);try{for(f.s();!(d=f.n()).done;){d.value.detach()}}catch(h){f.e(h)}finally{f.f()}}}))},i=function(e,t){return 1==e.length&&1==t.length&&e[0].end.isEqual(t[0].start)};this._defaultCallbacks.set("insertion:accept",t),this._defaultCallbacks.set("insertion:discard",n),this._defaultCallbacks.set("insertion:join",i),this._defaultCallbacks.set("deletion:accept",n),this._defaultCallbacks.set("deletion:discard",t),this._defaultCallbacks.set("deletion:join",i),this._defaultCallbacks.set("formatInline:accept",r),this._defaultCallbacks.set("formatInline:discard",t),this._defaultCallbacks.set("formatInline:join",i),this._defaultCallbacks.set("formatBlock:accept",r),this._defaultCallbacks.set("formatBlock:discard",t),this._defaultCallbacks.set("formatBlock:join",i)}}]),e}();function eA(e,t,n){var r,i=_createForOfIteratorHelper(t.parent.getAncestors({includeSelf:!0,parentFirst:!0}));try{for(i.s();!(r=i.n()).done;){var o=r.value;if(o.root==o)return!1;if(!n.containsItem(o))return!1;if(e.isObject(o)||e.isLimit(o))return!0}}catch(a){i.e(a)}finally{i.f()}}function tA(e,t,n,r){var i=function(e){return!e.item.is("textProxy")&&!r.isObject(e.item)},o=e.start.getLastMatchingPosition(i),a=e.end.getLastMatchingPosition(i,{direction:"backward"});return!(e.start.isEqual(o)&&e.end.isEqual(a)||(o.isBefore(a)?n.updateMarker(t,{range:n.createRange(o,a)}):n.removeMarker(t),0))}function nA(e){return function(e){var t,n=0,r=0,i=_createForOfIteratorHelper(JT(e));try{for(i.s();!(t=i.n()).done;){var o;n=(n<<5)-n+t.value,n=(o=[r,n&=n])[0],r=o[1]}}catch(a){i.e(a)}finally{i.f()}return QT(n)+QT(r)}(e)}function rA(e){var t=e.start.nodeAfter;return t&&t.is("element")}function iA(e,t){var n=t.schema.isObject(e)||t.schema.isSelectable(e);return t.createRange(t.createPositionAt(e,"before"),n?t.createPositionAfter(e):t.createPositionAt(e,"end"))}var oA=["adapter","hasSuggestion","reconnect","get","find","add","all","originalSuggestionId","plugins","config","TrackChangesService","attributes","_trackChangesService","then","addToReconnectionStack","resolve","_saved","state","type","_bufferedRequests","update","race","connect","getUser","connection","addUser","map","collaboration.channelId","data","values","addSuggestionData","requires","_fetchMissingUsersForThreads","suggestionUpdated","editor"];!function(e,t){!function(t){for(;--t;)e.push(e.shift())}(++t)}(oA,497);var aA=function(e,t){return oA[e-=0]},sA=function(e){_inherits(r,e);var t,n=_createSuper(r);function r(e){var t;return _classCallCheck(this,r),(t=n.call(this,e))._bufferedRequests=new Map,t}return _createClass(r,[{key:"init",value:function(){var e,t,n=this,i=this[aA("0x1b")][aA("0x1")][aA("0x1f")](Ky),o=this[aA("0x1b")].plugins.get(ZT),a=this.editor[aA("0x2")][aA("0x1f")](aA("0x14"));return i[aA("0x7")](this),this[aA("0x5")]=new(r[aA("0x3")])(a),o[aA("0x1c")]={getSuggestion:(t=_asyncToGenerator(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n[aA("0x5")][aA("0x1f")](t);case 2:return r=e.sent,e.next=5,n[aA("0x19")]([r]);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)}),addSuggestion:(e=_asyncToGenerator(regeneratorRuntime.mark((function e(t){var r,i,o,a,s,c,l,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.id,i=t.type,o=t.data,a=t.originalSuggestionId,s=t.attributes,c={id:r,type:i,data:o,originalSuggestionId:a,attributes:s},l=new Promise((function(e){n[aA("0xc")].set(r,{resolve:e,suggestionData:c})})),e.next=5,Promise[aA("0xe")]([n[aA("0x5")][aA("0x21")](r,i,o,a,s),l]);case 5:return u=e.sent,e.abrupt("return",(n[aA("0xc")].delete(r),u));case 7:case"end":return e.stop()}}),e)}))),function(t){return e.apply(this,arguments)}),updateSuggestion:function(e,t){return"open"!==t[aA("0xa")]?n._trackChangesService[aA("0xd")](e,t):Promise[aA("0x8")]()}},this.listenTo(this[aA("0x5")],aA("0x1a"),(function(e,t){o[aA("0x1d")](t.id)&&(o.getSuggestion(t.id).attributes=t[aA("0x4")])})),this[aA("0x5")].connect(i[aA("0x11")])[aA("0x6")]((function(e){return n[aA("0x19")](e)[aA("0x6")]((function(){var t,n=_createForOfIteratorHelper(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;o[aA("0x17")](r)[aA("0x9")]=!0}}catch(i){n.e(i)}finally{n.f()}}))}))}},{key:aA("0x1e"),value:(t=_asyncToGenerator(regeneratorRuntime.mark((function e(){var t,n,r,i,o,a,s,c,l,u,d=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this[aA("0x1b")].plugins[aA("0x1f")](ZT),n=this[aA("0x1b")][aA("0x1")][aA("0x1f")](Ky),r=n.connection,e.next=5,this[aA("0x5")][aA("0xf")](r);case 5:i=e.sent,o=_createForOfIteratorHelper(this[aA("0xc")][aA("0x16")]()),e.prev=7,s=regeneratorRuntime.mark((function e(){var t,n,r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.value,n=t.suggestionData,r=t.resolve,o=i[aA("0x20")]((function(e){return e.id===n.id})),e.t0=o,e.t0){e.next=7;break}return e.next=6,d._trackChangesService[aA("0x21")](n.id,n[aA("0xb")],n[aA("0x15")],n[aA("0x0")]);case 6:o=e.sent;case 7:r(o);case 8:case"end":return e.stop()}}),e)})),o.s();case 10:if((a=o.n()).done){e.next=14;break}return e.delegateYield(s(),"t0",12);case 12:e.next=10;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(7),o.e(e.t1);case 19:return e.prev=19,o.f(),e.finish(19);case 22:c=_createForOfIteratorHelper(i);try{for(c.s();!(l=c.n()).done;)u=l.value,t[aA("0x1d")](u.id)||t[aA("0x17")](u)}catch(f){c.e(f)}finally{c.f()}case 24:case"end":return e.stop()}}),e,this,[[7,16,19,22]])}))),function(){return t.apply(this,arguments)})},{key:aA("0x19"),value:function(e){var t,n=this[aA("0x1b")][aA("0x1")][aA("0x1f")](Qy),r=this[aA("0x1b")].plugins[aA("0x1f")](Ky).connection,i=new Set,o=_createForOfIteratorHelper(e);try{for(o.s();!(t=o.n()).done;){var a=t.value.authorId;n[aA("0x10")](a)||i[aA("0x21")](a)}}catch(s){o.e(s)}finally{o.f()}return Promise[aA("0x22")](Array.from(i)[aA("0x13")]((function(e){return Lw.a[aA("0x1f")](r,e)[aA("0x6")]((function(t){n[aA("0x10")](e)||n[aA("0x12")](t)}))})))}}],[{key:aA("0x18"),get:function(){return[zw,ZT,Ky]}}]),r}(d);sA[aA("0x3")]=Kx.a;var cA=["stopListening","view","discardSuggestion","_discardCommand","model","isEnabled","unbind","execute","bind","commentThread","destroy","_acceptCommand","acceptSuggestion","commentThreadController"];!function(e,t){!function(t){for(;--t;)e.push(e.shift())}(++t)}(cA,221);var lA=function(e,t){return cA[e-=0]},uA=function(){function e(t,n,r,i){var o=this;_classCallCheck(this,e),this[lA("0x7")]=t,this[lA("0x4")]=n,this[lA("0x2")]=new L_(t[lA("0xc")],n),this[lA("0x0")]=r,this[lA("0x6")]=i,this[lA("0x4")][lA("0xb")]("isEnabled").to(this[lA("0x0")]),this.listenTo(n,lA("0x1"),(function(){return o.acceptSuggestion()})),this.listenTo(n,"discardSuggestion",(function(){return o[lA("0x5")]()}))}return _createClass(e,[{key:lA("0x1"),value:function(){this[lA("0x0")][lA("0xa")](this[lA("0x7")].id)}},{key:lA("0x5"),value:function(){this[lA("0x6")][lA("0xa")](this[lA("0x7")].id)}},{key:lA("0xd"),value:function(){this[lA("0x4")][lA("0x9")](lA("0x8")),this[lA("0x3")](),this.commentThreadController.destroy()}}]),e}();Object(u.default)(uA,l.default);var dA=["editorConfig","commentThread","fire","_localUser","isDirty","element","disabledSubmit","commentInputView","value","commentThreadInputView","length","set","_config","CommentView","createdAt","removeComment","descriptionParts","setData","hasDirtyComment","commentsListView","bind","focus","destroy","isEnabled","submit","locale","delegate","_model","disableComments","updateComment","assign","isActive","_createCommentThreadInputView","isReadOnly","addComment"];!function(e,t){!function(t){for(;--t;)e.push(e.shift())}(++t)}(dA,204);var fA=function(e,t){return dA[e-=0]},hA=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i,o){var a;_classCallCheck(this,n),a=t.call(this,e,r,i,o);var s=e.t;return a.set("type",""),a.bind("type").to(_assertThisInitialized(a),"descriptionParts",(function(e){return e&&e[0]?e[0].type:""})),a.bind("description").to(_assertThisInitialized(a),"descriptionParts",_assertThisInitialized(a),"isActive",(function(e,t){var n,r="",i=_createForOfIteratorHelper(e);try{for(i.s();!(n=i.n()).done;){r+="<p>"+pA(n.value.content)+"</p>"}}catch(o){i.e(o)}finally{i.f()}return t?r:ow(r,{limit:140})})),a._descriptionElement=null,a.acceptButton=a._createButton(s("Accept suggestion"),pc.check,"ck-suggestion--accept","acceptSuggestion"),a.discardButton=a._createButton(s("Discard suggestion"),pc.cancel,"ck-suggestion--discard","discardSuggestion"),a.userView=new Bb(e,a._model.author),a.userView.extendTemplate({attributes:{class:["ck-suggestion__user","ck-annotation__user"]}}),a.setTemplate(a._getTemplate()),a}return _createClass(n,[{key:"_getTemplate",value:function(){var e=this,t=this.bindTemplate,n={tag:"div",attributes:{class:["ck-suggestion-wrapper",t.if("isActive","ck-suggestion-wrapper--active"),t.to("type",(function(e){return"ck-suggestion-"+e})),this._config.disableComments&&"ck-suggestion--disabled-comments"],"data-suggestion-id":this._model.id,"data-thread-id":this._model.commentThread.id,"data-author-id":this._model.author.id,tabindex:-1},children:[{tag:"div",attributes:{class:["ck-suggestion","ck-annotation"]},children:[this.userView,{tag:"div",attributes:{class:["ck-suggestion__main","ck-annotation__main"]},children:[{tag:"div",attributes:{class:["ck-suggestion__info","ck-annotation__info"]},children:[{tag:"span",children:[{text:this.userView.name}],attributes:{class:["ck-suggestion__info-name","ck-annotation__info-name"]}},{tag:"time",attributes:{datetime:t.to("createdAt"),class:["ck-comment__info-time","ck-annotation__info-time"]},children:[{text:t.to("createdAt",(function(t){return e._config.formatDateTime(t)}))}]}]},{tag:"div",attributes:{class:["ck-suggestion__actions","ck-annotation__actions"]},children:[this.acceptButton,this.discardButton]},{tag:"div",attributes:{class:["ck-annotation__content-wrapper"]}}]}]}]};return this.commentsListView&&this.commentThreadInputView&&n.children.push(this.commentsListView,this.commentThreadInputView),n}},{key:"render",value:function(){var e=this;_get3(_getPrototypeOf(n.prototype),"render",this).call(this),this._descriptionElement=this.element.querySelector(".ck-annotation__content-wrapper"),this._descriptionElement.innerHTML=this.description,this.on("change:description",(function(t,n,r){e._descriptionElement.innerHTML=r}))}},{key:"_createButton",value:function(e,t,n,r){var i=this,o=new zc(this.locale);return o.set({label:e,icon:t,tooltip:!0}),o.extendTemplate({attributes:{class:n}}),o.on("execute",(function(){i.fire(r,i._model.id)})),o.bind("isEnabled").to(this),o}}]),n}(function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i,o){var a;return _classCallCheck(this,n),(a=t.call(this,e))[fA("0x19")]=null,a.commentThreadInputView=null,a.set(fA("0x2"),!1),a[fA("0x11")](fA("0x14"),r.createdAt),a[fA("0x1a")](fA("0x14")).to(r),a.set(fA("0x16"),[]),a[fA("0x11")](fA("0xa"),!1),a[fA("0x11")](fA("0x1d"),!1),a[fA("0x21")]=r,a[fA("0x9")]=i,a[fA("0x12")]=o,o[fA("0x22")]?a[fA("0x11")](fA("0x10"),1):a._createCommentViews(),a}return _createClass(n,[{key:fA("0x1b"),value:function(){this[fA("0xb")].focus()}},{key:fA("0x1c"),value:function(){this[fA("0xa")]=!1,this[fA("0x19")]&&this[fA("0x19")].destroy(),this[fA("0xf")]&&this[fA("0xf")][fA("0x1c")](),_get3(_getPrototypeOf(n.prototype),fA("0x1c"),this).call(this)}},{key:"_createCommentViews",value:function(){var e=this;this[fA("0x19")]=new Gb(this[fA("0x1f")],this[fA("0x21")][fA("0x7")],Object[fA("0x1")]({CommentView:this[fA("0x12")][fA("0x13")]},this[fA("0x12")])),this[fA("0x19")][fA("0x20")](fA("0x15")).to(this),this[fA("0x19")].delegate(fA("0x0")).to(this),this[fA("0x19")][fA("0x1a")](fA("0x2")).to(this),this[fA("0x11")](fA("0x10"),this[fA("0x19")].length+1),this[fA("0x1a")](fA("0x10")).to(this[fA("0x19")],fA("0x10"),(function(e){return e+1})),this.commentThreadInputView=this._createCommentThreadInputView(),this.on(fA("0x15"),(function(){return e[fA("0x1b")]()})),this[fA("0x1a")](fA("0xa")).to(this.commentsListView,fA("0x18"),this.commentThreadInputView[fA("0xd")],fA("0xe"),(function(e,t){return e||!!t}))}},{key:fA("0x3"),value:function(){var e=this,t=new Ub(this[fA("0x1f")],this._localUser,this[fA("0x12")][fA("0x6")]),n=t[fA("0xd")];return t[fA("0x1a")]("showInput").to(this,fA("0x2"),this._model.commentThread,fA("0x4"),n,fA("0xe"),(function(e,t,n){return!!n||e&&!t})),n.on(fA("0x1e"),(function(t,r){e[fA("0x8")](fA("0x5"),r),n.editor[fA("0x17")]("")})),n.on("cancel",(function(){return e[fA("0x1b")]()})),n[fA("0x1a")](fA("0xc")).to(this[fA("0x21")][fA("0x7")],fA("0x4")),t}}]),n}(kc));function pA(e){return""+e.split("*").map((function(e,t){return t%2!=0?'<span class="ck-suggestion-type">'+vA(e)+"</span>":vA(e)})).join("")}function vA(e){var t=document.createElement("span");return t.innerText=e,t.innerHTML}var gA=n(175),mA=n.n(gA),yA=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;_classCallCheck(this,n),(r=t.call(this,e))._suggestionToController=new Map,r._viewToController=new Map,r._debouncedHandlers=new Map;var i=r.editor.config;return i.define("trackChanges.SuggestionThreadView",hA),i.define("trackChanges.disableComments",!1),r._disableComments=i.get("trackChanges.disableComments"),r}return _createClass(n,[{key:"init",value:function(){var e=this,t=this.editor,n=t.plugins.get(ZT),r=t.plugins.get(Iw),i=t.plugins.get(cx),o=t.plugins.get(Mw);t.ui.componentFactory.add("trackChanges",(function(t){return e._createUIButton(t)})),i.addSourceCollector((function(){for(var t=[],n=0,r=Array.from(e._suggestionToController);n<r.length;n++){var i,o=_slicedToArray(r[n],2),a=o[0],s=o[1],c=[],l=_createForOfIteratorHelper(a.getAllAdjacentSuggestions());try{for(l.s();!(i=l.n()).done;){var u=i.value;if(u.isInContent)if(u.isMultiRange)c.push.apply(c,_toConsumableArray(u.getRanges()));else{var d=u.getFirstRange();if(c.length>0){var f=c[0].getJoined(d);if(f){c[0]=f;continue}}c.push(d)}}}catch(h){l.e(h)}finally{l.f()}t.push([s.view,c])}return t})),this.listenTo(n,"suggestionLoaded",(function(t,n){var r=!1,o=ui((function(t){r||t?r&&t&&(e._destroyController(n),i.refreshSelectedViews(),r=!1):(e._initializeController(n),i.refreshSelectedViews(),r=!0)}),10);e._debouncedHandlers.set(n,o),e.listenTo(n,"change:previous",(function(t,r,i,a){n.isInContent&&(null==i?(e._updateController(a.head),o(!1)):(e._updateController(i.head),o(!0)))})),null===n.previous?o(!1):e._updateController(n.head)})),this.listenTo(n,"suggestionUnloaded",(function(t,n,r){e.stopListening(n,"change:previous"),e._debouncedHandlers.get(n).cancel(),e._debouncedHandlers.delete(n);var i=r?r.head:n,o=e._suggestionToController.get(i);null!==r&&e._updateController(i),null===r&&o&&e._destroyController(n)})),this.listenTo(n,"suggestionChanged",(function(t,n){e._updateController(n)})),this.listenTo(r,"change:activeAnnotations",(function(t,r,i){var o,a=[],s=_createForOfIteratorHelper(Array.from(i,(function(e){return e.innerView})).filter((function(t){return e._viewToController.has(t)})));try{for(s.s();!(o=s.n()).done;){var c=o.value,l=e._viewToController.get(c).model.getAllAdjacentSuggestions();a.push.apply(a,_toConsumableArray(l.reduce((function(e,t){return[].concat(_toConsumableArray(e),_toConsumableArray(t.getMarkerNames()))}),[])))}}catch(u){s.e(u)}finally{s.f()}n.activeMarkers=a})),this.listenTo(o,"addComment",(function(t,r){var i=r.threadId;if(!r.isFromAdapter&&n.hasSuggestion(i)){var o=n.getSuggestion(i);e._suggestionToController.get(o).view.focus()}}),{priority:"lowest"})}},{key:"_createUIButton",value:function(e){var t=this,n=hl(e,Kc),r=this.editor.commands.get("trackChanges"),i=this.editor.t;n.buttonView.set({tooltip:i("Track changes"),label:i("Track changes"),icon:mA.a}),n.buttonView.bind("isOn").to(r,"value"),n.buttonView.on("execute",(function(){return r.execute()}));for(var o=new $e.default,a=[{type:"switchbutton",model:{withText:!0,label:i("Track changes"),commandName:"trackChanges"}},{type:"separator"},{type:"button",model:{withText:!0,label:i("Accept all suggestions"),commandName:"acceptAllSuggestions"}},{type:"button",model:{withText:!0,label:i("Accept all selected suggestions"),commandName:"acceptSelectedSuggestions"}},{type:"button",model:{withText:!0,label:i("Discard all suggestions"),commandName:"discardAllSuggestions"}},{type:"button",model:{withText:!0,label:i("Discard all selected suggestions"),commandName:"discardSelectedSuggestions"}}],s=0,c=a;s<c.length;s++){var l=c[s],u={type:l.type};if(l.model){var d=new Cl(l.model),f=this.editor.commands.get(d.commandName);d.bind("isOn","isEnabled").to(f,"value","isEnabled"),u.model=d}o.add(u)}vl(n,o);var h=a.filter((function(e){return null!=e.model})).map((function(e){return t.editor.commands.get(e.model.commandName)}));return n.buttonView.actionView.unbind("isEnabled"),n.buttonView.arrowView.unbind("isEnabled"),n.buttonView.actionView.bind("isEnabled").to(r,"isEnabled"),n.buttonView.arrowView.bind("isEnabled").toMany(h,"isEnabled",(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.some((function(e){return e}))})),n.on("execute",(function(e){return t.editor.execute(e.source.commandName)})),n}},{key:"_initializeController",value:function(e){var t=this,n=this.editor,r=n.config,i=n.plugins.get(Iw),o=e.getAllAdjacentSuggestions().filter((function(e){return e.isInContent})),a=n.plugins.get("Users").me,s=n.commands.get("acceptSuggestion"),c=n.commands.get("discardSuggestion"),l=new(0,r.get("trackChanges").SuggestionThreadView)(n.locale,e,a,{disableComments:this._disableComments,editorConfig:r.get("comments.editorConfig"),maxCommentsWhenCollapsed:r.get("comments.maxCommentsWhenCollapsed"),maxThreadTotalWeight:r.get("comments.maxThreadTotalWeight"),maxCommentCharsWhenCollapsed:r.get("comments.maxCommentCharsWhenCollapsed"),formatDateTime:Ib(r.get("locale")),CommentView:r.get("comments").CommentView}),u=new uA(e,l,s,c);l.descriptionParts=n.plugins.get("TrackChangesEditing")._descriptionFactory.getDescriptions(o),this._suggestionToController.set(e,u),this._viewToController.set(l,u);var d=new kw(this.editor.locale,l);d.bind("isDirty").to(l,"isDirty"),d.bind("length").to(l),d.bind("type").to(l,"type",(function(e){return"suggestion-"+e}));var f=new ww({view:d,target:function(){var e=o[0].getFirstMarker();if(!e)return null;var t=e.getRange().getContainedElement();return t&&!n.editing.mapper.toViewElement(t)?null:Kw(n.editing,e)||null},type:function(){return"suggestion-"+u.view.type}});i.add(f);var h,p=n.plugins.get("PendingActions");l.on("change:isDirty",(function(e,n,r){r?h=p.add((0,t.editor.locale.t)({string:"Unsaved change in suggestion.",id:"PENDING_ACTION_SUGGESTION"})):(p.remove(h),h=null)}))}},{key:"_destroyController",value:function(e){var t=this.editor.plugins.get("Annotations"),n=this._suggestionToController.get(e),r=n.view,i=t.getByInnerView(r);t.remove(i),this._suggestionToController.delete(e),this._viewToController.delete(r),n.destroy(),r.destroy()}},{key:"_updateController",value:function(e){if(e.isInContent&&this._suggestionToController.has(e)){var t=this.editor.plugins.get("TrackChangesEditing"),n=this._suggestionToController.get(e),r=e.getAllAdjacentSuggestions();n.view.descriptionParts=t._descriptionFactory.getDescriptions(r)}}},{key:"destroy",value:function(){_get3(_getPrototypeOf(n.prototype),"destroy",this).call(this);var e,t=_createForOfIteratorHelper(this._suggestionToController.keys());try{for(t.s();!(e=t.n()).done;){var r=e.value;this._destroyController(r)}}catch(a){t.e(a)}finally{t.f()}var i,o=_createForOfIteratorHelper(this._debouncedHandlers.values());try{for(o.s();!(i=o.n()).done;){i.value.cancel()}}catch(a){o.e(a)}finally{o.f()}this._debouncedHandlers.clear()}}],[{key:"requires",get:function(){return[Iw,cx,ZT,Mw,Qy]}},{key:"pluginName",get:function(){return"TrackChangesUI"}}]),n}(d),kA=["pluginName","adapter","editor","get","plugins","requires","TrackChanges","addSuggestionData","addSuggestion","getSuggestion"];!function(e,t){!function(t){for(;--t;)e.push(e.shift())}(++t)}(kA,319);var _A=function(e,t){return kA[e-=0]},bA=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:_A("0x2"),set:function(e){this[_A("0x3")][_A("0x5")][_A("0x4")](ZT).adapter=e}},{key:_A("0x2"),get:function(){return this[_A("0x3")][_A("0x5")][_A("0x4")](ZT)[_A("0x2")]}},{key:_A("0x9"),value:function(e){return this[_A("0x3")][_A("0x5")][_A("0x4")](ZT)[_A("0x8")](e)}},{key:"getSuggestions",value:function(e){return this.editor[_A("0x5")][_A("0x4")](ZT).getSuggestions(e)}},{key:"getSuggestion",value:function(e){return this.editor[_A("0x5")][_A("0x4")](ZT)[_A("0x0")](e)}}],[{key:_A("0x6"),get:function(){return[ZT,yA,qx,Px,Bx,Ux]}},{key:_A("0x1"),get:function(){return _A("0x7")}}]),n}(d),wA=["pluginName","RealTimeCollaborativeTrackChanges"];!function(e,t){!function(t){for(;--t;)e.push(e.shift())}(++t)}(wA,289);var xA=function(e,t){return wA[e-=0]},CA=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;_classCallCheck(this,n),r=t.call(this,e);var i=e.t,o=r.bindTemplate;return r.set("usersCount",0),r.set("isHidden",!0),r.setTemplate({tag:"div",attributes:{class:["ck","ck-presence-list__counter",o.if("isHidden","ck-presence-list__counter--hidden")]},children:[{text:o.to("usersCount",(function(e){return i({string:"1 connected user (me)",plural:"%0 connected users",id:"CONNECTED_USERS"},e)}))}]}),r}return n}(kc),TA=["fire","div","execute","bindTemplate","createCollection","setTemplate","items"];!function(e,t){!function(t){for(;--t;)e.push(e.shift())}(++t)}(TA,397);var AA=function(e,t){return TA[e-=0]},SA=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;_classCallCheck(this,n),(r=t.call(this,e))[AA("0x1")]=r[AA("0x6")]();var i=r[AA("0x5")];return r[AA("0x0")]({tag:AA("0x3"),attributes:{class:["ck","ck-presence-list__list"]},children:r[AA("0x1")],on:{click:i.to((function(){return r[AA("0x2")](AA("0x4"))}))}}),r}return n}(kc);n(417);var EA=["set","inlineListView","setTemplate","ck-rounded-corners","ck-reset","isCollapsed","div","counterView","locale"];!function(e,t){!function(t){for(;--t;)e.push(e.shift())}(++t)}(EA,304);var IA=function(e,t){return EA[e-=0]},OA=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;_classCallCheck(this,n);var i=(r=t.call(this,e)).bindTemplate;return r[IA("0x2")](IA("0x7"),!0),r[IA("0x0")]=new CA(r[IA("0x1")]),r.inlineListView=new SA(e),r[IA("0x4")]({tag:IA("0x8"),attributes:{class:["ck","ck-presence-list",IA("0x6"),IA("0x5"),i.if(IA("0x7"),"ck-presence-list--collapsed")]},children:[r[IA("0x0")],r[IA("0x3")]]}),r}return n}(kc),RA=["items","setTemplate","div","createCollection"];!function(e,t){!function(t){for(;--t;)e.push(e.shift())}(++t)}(RA,131);var PA=function(e,t){return RA[e-=0]},MA=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this,e)).items=r[PA("0x0")](),r[PA("0x2")]({tag:"div",attributes:{class:["ck","ck-presence-list__dropdown-list"]},children:[{tag:PA("0x3"),attributes:{class:["ck","ck-presence-list__dropdown-list-wrapper"]},children:r[PA("0x1")]}]}),r}return n}(kc),NA=["ck-presence-list__marker","tag","setTemplate","bindTemplate","execute","color","userView","button","name","div","fire"];!function(e,t){!function(t){for(;--t;)e.push(e.shift())}(++t)}(NA,443);var DA=function(e,t){return NA[e-=0]},FA=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i){var o;_classCallCheck(this,n);var a=(o=t.call(this,e))[DA("0x0")];o[DA("0x3")]=new Bb(e,r);var s={tag:DA("0x6"),attributes:{class:["ck","ck-presence-list__dropdown-list-item"]},children:[o.userView,{tag:"span",attributes:{class:["ck","ck-user__full-name"]},children:[{text:r[DA("0x5")]}]},{tag:"span",attributes:{class:["ck",DA("0x8"),r[DA("0x2")].getBackgroundColorClass(1)],"aria-hidden":"true"}}]};return i&&(s[DA("0x9")]=DA("0x4"),s.on={click:a.to((function(){return o[DA("0x7")](DA("0x1"))}))}),o[DA("0xa")](s),o}return n}(kc),jA=["ck-tooltip_","position","text","ck-tooltip__text","setTemplate","span","bindTemplate","ck-tooltip__text__inner"];!function(e,t){!function(t){for(;--t;)e.push(e.shift())}(++t)}(jA,487);var LA=function(e,t){return jA[e-=0]},VA=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;_classCallCheck(this,n);var i=(r=t.call(this,e))[LA("0x7")];return r[LA("0x5")]({tag:LA("0x6"),attributes:{class:["ck","ck-tooltip",i.to(LA("0x2"),(function(e){return LA("0x1")+e}))]},children:[{tag:"span",attributes:{class:[LA("0x4")]},children:[{tag:"span",class:[LA("0x0")],children:[{text:i.to(LA("0x3"))}]}]}]}),r}return n}(Bc),BA=["div","userView","button","text","color","markerView","setTemplate","bindTemplate","ck-presence-list__marker","name","getBackgroundColorClass","tooltipView","true"];!function(e,t){!function(t){for(;--t;)e.push(e.shift())}(++t)}(BA,178);var zA=function(e,t){return BA[e-=0]},HA=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i){var o;_classCallCheck(this,n);var a=(o=t.call(this,e))[zA("0xb")];o[zA("0x5")]=new Bb(e,r),o[zA("0x9")]=new UA(e,r),o[zA("0x2")]=new VA(e),o[zA("0x2")][zA("0x7")]=o.userView[zA("0x0")];var s={tag:zA("0x4"),attributes:{class:["ck","ck-presence-list__list-item"]},children:[o[zA("0x5")],o[zA("0x9")],o.tooltipView]};return i&&(s.tag=zA("0x6"),s.on={click:a.to((function(){return o.fire("execute")}))}),o[zA("0xa")](s),o}return n}(kc),UA=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var i;return _classCallCheck(this,n),(i=t.call(this,e))[zA("0xa")]({tag:"span",attributes:{class:["ck",zA("0xc"),r[zA("0x8")][zA("0x1")]()],"aria-hidden":zA("0x3")}}),i}return n}(kc),WA=["presenceList","content","get","bind","isHidden","view","length","init","_handleUserAdd","define","attachToDom","balloonPanelView","remove","hideDropdown","presenceDropdownView","_handleUserRemove","render","isRendered","showDropdown","detachFromDom","pin","items","config","context","bindTo","add","isCollapsed","usersCount","locale","presencelist-collapseat-invalid-format","listenTo","onClick","presencelist-missing-container","execute","_createView","appendChild","class","using","presenceList.collapseAt","plugins","allConnectedUsers","destroy","lastConnectedUsers","presenceList.container","element","bodyCollection","_allConnectedUsers","inlineListView","requires","counterView"];!function(e,t){!function(t){for(;--t;)e.push(e.shift())}(++t)}(WA,317);var qA=function(e,t){return WA[e-=0]},YA=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;_classCallCheck(this,n),r=t.call(this,e),e[qA("0x5")][qA("0x2a")](qA("0x21"),{collapseAt:6});var i=e.config.get(qA("0x15"));if("number"!=typeof i)throw new Ke.default("presencelist-collapseat-invalid-format",_assertThisInitialized(r));if(i<1)throw new Ke.default(qA("0xc"),_assertThisInitialized(r));return r}return _createClass(n,[{key:qA("0x28"),value:function(){var e=this,t=this[qA("0x6")];this[qA("0x1d")]=t[qA("0x16")][qA("0x23")](nk)[qA("0x17")],this.set(qA("0xa"),0),this[qA("0x19")]=new $e.default,this[qA("0x2c")]=new Sl,this[qA("0x2c")][qA("0x13")]="ck ck-presence-list__balloon",this[qA("0x26")]=this[qA("0x11")](),this.presenceDropdownView=void 0;var n,r=_createForOfIteratorHelper(this[qA("0x1d")]);try{for(r.s();!(n=r.n()).done;){var i=n.value;this[qA("0x29")](i)}}catch(o){r.e(o)}finally{r.f()}this[qA("0xd")](this._allConnectedUsers,qA("0x8"),(function(t,n){e[qA("0x29")](n)})),this[qA("0xd")](this[qA("0x1d")],qA("0x2d"),(function(t,n){e[qA("0x30")](n)}))}},{key:qA("0x11"),value:function(){var e=this,t=this[qA("0x6")],n=new OA(this[qA("0x6")][qA("0xb")]),r=this[qA("0x2c")];if(!qe(t.config[qA("0x23")](qA("0x1a"))))throw new Ke.default(qA("0xf"),this);return n[qA("0x20")][qA("0x24")](qA("0xa")).to(this),n[qA("0x24")](qA("0x9")).to(this,qA("0xa"),(function(r){var i=r>=t[qA("0x5")][qA("0x23")](qA("0x15"));return n.counterView[qA("0x25")]=!(1==r||i),i||e[qA("0x2e")](),i})),n[qA("0x1e")][qA("0x4")][qA("0x7")](this[qA("0x19")])[qA("0x14")]((function(n){var r=t[qA("0x5")][qA("0x23")](qA("0x21")),i=new HA(t[qA("0xb")],n,r[qA("0xe")]);return r[qA("0xe")]&&e.listenTo(i,qA("0x10"),(function(){e.view[qA("0x9")]||r[qA("0xe")](n,i.element)})),i})),this[qA("0xd")](n.inlineListView,qA("0x10"),(function(){e[qA("0x2f")]?e[qA("0x2e")]():e.view[qA("0x9")]&&e[qA("0x1")]()})),n.render(),r[qA("0x31")](),vc({emitter:n,activator:function(){return r.isVisible},contextElements:[r[qA("0x1b")],n[qA("0x1e")][qA("0x1b")]],callback:function(){return e[qA("0x2e")]()}}),t[qA("0x5")].get(qA("0x1a"))[qA("0x12")](n[qA("0x1b")]),this[qA("0x1c")]=new Lc(this[qA("0x6")].locale),this[qA("0x1c")][qA("0x2b")](),this[qA("0x1c")][qA("0x8")](r),n}},{key:"_handleUserAdd",value:function(e){this.usersCount++,5==this[qA("0x19")][qA("0x27")]&&this.lastConnectedUsers.remove(0),this[qA("0x19")].add(e)}},{key:"_handleUserRemove",value:function(e){if(this[qA("0xa")]--,this[qA("0x19")][qA("0x23")](e.id)&&(this[qA("0x19")][qA("0x2d")](e.id),this.lastConnectedUsers[qA("0x27")]<this[qA("0xa")])){var t,n=_createForOfIteratorHelper(Array.from(this[qA("0x1d")]).reverse());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(!this[qA("0x19")][qA("0x23")](r.id))return void this.lastConnectedUsers.add(r,0)}}catch(i){n.e(i)}finally{n.f()}}}},{key:"showDropdown",value:function(){var e=this;if(!this.presenceDropdownView){this[qA("0x2f")]=new MA;var t=this[qA("0x6")][qA("0x5")][qA("0x23")](qA("0x21"));this.presenceDropdownView[qA("0x4")][qA("0x7")](this[qA("0x1d")])[qA("0x14")]((function(n){var r=new FA(e[qA("0x6")].locale,n,!!t[qA("0xe")]);return t[qA("0xe")]&&e.listenTo(r,qA("0x10"),(function(){t.onClick(n,r[qA("0x1b")])})),r})),this[qA("0x2c")][qA("0x22")].add(this[qA("0x2f")]),this[qA("0x2c")][qA("0x3")]({target:this[qA("0x26")].inlineListView.element})}}},{key:qA("0x2e"),value:function(){this[qA("0x2f")]&&(this[qA("0x2c")].unpin(),this[qA("0x2c")][qA("0x22")][qA("0x2d")](this[qA("0x2f")]),this[qA("0x2f")][qA("0x18")](),this[qA("0x2f")]=void 0)}},{key:qA("0x18"),value:function(){_get3(_getPrototypeOf(n.prototype),qA("0x18"),this).call(this),this[qA("0x26")]&&this[qA("0x26")][qA("0x0")]&&this[qA("0x26")][qA("0x18")](),this[qA("0x1c")]&&this[qA("0x1c")][qA("0x2")]()}}],[{key:qA("0x1f"),get:function(){return[nk]}}]),n}(it),GA=["pluginName","requires","PresenceList"];!function(e,t){!function(t){for(;--t;)e.push(e.shift())}(++t)}(GA,144);var JA=function(e,t){return GA[e-=0]},$A=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return n}(du);$A.builtinPlugins=[function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,null,[{key:"requires",get:function(){return[Hm,Wm]}},{key:"pluginName",get:function(){return"Alignment"}}]),n}(d),hf,function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,null,[{key:"requires",get:function(){return[Nf,Df]}},{key:"pluginName",get:function(){return"BlockQuote"}}]),n}(d),wf,function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,null,[{key:"pluginName",get:function(){return"CKFinder"}},{key:"requires",get:function(){return["Image","Link","CKFinderUploadAdapter",zf,Lf]}}]),n}(d),function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,null,[{key:"requires",get:function(){return[Hf,"Image","ImageUpload"]}},{key:"pluginName",get:function(){return"EasyImage"}}]),n}(d),tf,function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,null,[{key:"requires",get:function(){return[cy,dy]}},{key:"pluginName",get:function(){return"FontFamily"}}]),n}(d),function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,null,[{key:"requires",get:function(){return[ey,ry]}},{key:"pluginName",get:function(){return"FontSize"}}]),n}(d),function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,null,[{key:"requires",get:function(){return[Qf,Zf]}},{key:"pluginName",get:function(){return"Heading"}}]),n}(d),function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,null,[{key:"requires",get:function(){return[hy,yy]}},{key:"pluginName",get:function(){return"Highlight"}}]),n}(d),function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"isImageWidget",value:function(e){return lh(e)}}],[{key:"requires",get:function(){return[mh,rd,Ch]}},{key:"pluginName",get:function(){return"Image"}}]),n}(d),function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,null,[{key:"requires",get:function(){return[Sh]}},{key:"pluginName",get:function(){return"ImageCaption"}}]),n}(d),function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,null,[{key:"requires",get:function(){return[Mh,jh,Dh]}},{key:"pluginName",get:function(){return"ImageResize"}}]),n}(d),function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,null,[{key:"requires",get:function(){return[Wh,qh]}},{key:"pluginName",get:function(){return"ImageStyle"}}]),n}(d),function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"afterInit",value:function(){var e=this.editor,t=e.t;e.plugins.get(Xf).register("image",{ariaLabel:t("Image toolbar"),items:e.config.get("image.toolbar")||[],getRelatedElement:uh})}}],[{key:"requires",get:function(){return[Xf]}},{key:"pluginName",get:function(){return"ImageToolbar"}}]),n}(d),function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,null,[{key:"pluginName",get:function(){return"ImageUpload"}},{key:"requires",get:function(){return[ap,$h,Zh]}}]),n}(d),If,function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,null,[{key:"requires",get:function(){return[Dp,qp,Jp]}},{key:"pluginName",get:function(){return"Link"}}]),n}(d),Av,function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,null,[{key:"requires",get:function(){return[Fv,Hv,Lv,rd]}},{key:"pluginName",get:function(){return"MediaEmbed"}}]),n}(d),Gf,function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"init",value:function(){var e=this.editor,t=e.editing.view.document,n=[];n.push(new Qv(t)),n.push(new Yv(t)),e.plugins.get("ClipboardPipeline").on("inputTransformation",(function(e,t){if(!t.isTransformedWithPasteFromOffice){var r=t.dataTransfer.getData("text/html"),i=n.find((function(e){return e.isActive(r)}));i&&(i.execute(t),t.isTransformedWithPasteFromOffice=!0)}}),{priority:"high"})}}],[{key:"pluginName",get:function(){return"PasteFromOffice"}},{key:"requires",get:function(){return[vu]}}]),n}(d),function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,null,[{key:JA("0x1"),get:function(){return[nk,YA]}},{key:JA("0x0"),get:function(){return JA("0x2")}}]),n}(it),M_,Jx,function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,null,[{key:"requires",get:function(){return[Jx,sA,bA]}},{key:xA("0x1"),get:function(){return xA("0x0")}}]),n}(d),function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,null,[{key:"requires",get:function(){return[Ty,xy]}},{key:"pluginName",get:function(){return"RemoveFormat"}}]),n}(d),function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,null,[{key:"requires",get:function(){return[Sy,Ry]}},{key:"pluginName",get:function(){return"Strikethrough"}}]),n}(d),function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,null,[{key:"requires",get:function(){return[um,bm,xm,Rm,Im,Cm,rd]}},{key:"pluginName",get:function(){return"Table"}}]),n}(d),function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"afterInit",value:function(){var e=this.editor,t=e.t,n=e.plugins.get(Xf),r=e.config.get("table.contentToolbar"),i=e.config.get("table.tableToolbar");r&&n.register("tableContent",{ariaLabel:t("Table toolbar"),items:r,getRelatedElement:Nm}),i&&n.register("table",{ariaLabel:t("Table toolbar"),items:i,getRelatedElement:Mm})}}],[{key:"requires",get:function(){return[Xf]}},{key:"pluginName",get:function(){return"TableToolbar"}}]),n}(d),function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,null,[{key:"requires",get:function(){return[My,jy]}},{key:"pluginName",get:function(){return"Underline"}}]),n}(d),function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"init",value:function(){var e=this,t=this.editor.config.get("ckfinder.uploadUrl");t&&(this.editor.plugins.get(rf).createUploadAdapter=function(n){return new lf(n,t,e.editor.t)})}}],[{key:"requires",get:function(){return[rf]}},{key:"pluginName",get:function(){return"CKFinderUploadAdapter"}}]),n}(d)],$A.defaultConfig={toolbar:["heading","|","fontsize","fontfamily","|","bold","italic","underline","strikethrough","removeFormat","highlight","|","alignment","|","numberedList","bulletedList","|","link","blockquote","imageUpload","insertTable","mediaEmbed","|","undo","redo","|","comment","|","trackChanges"],image:{toolbar:["imageStyle:full","imageStyle:side","|","imageTextAlternative","|","comment"]},table:{contentToolbar:["tableColumn","tableRow","mergeTableCells"],tableToolbar:["comment"]},mediaEmbed:{toolbar:["comment"]}}},function(e,t,n){"use strict";var r=n(20),i=n(63),o=n(21),a=Object(i.a)((function(e,t){Object(r.a)(t,Object(o.a)(t),e)}));t.a=a}]).default},module.exports=e()},"Ju5/":function(e,t,n){"use strict";var r=n("XqMk"),i="object"==typeof self&&self&&self.Object===Object&&self,o=r.a||i||Function("return this")();t.a=o},L3Qv:function(e,t,n){"use strict";t.a=function(){return!1}},WOAq:function(e,t,n){"use strict";(function(e){var r=n("Ju5/"),i=n("L3Qv"),o="object"==typeof exports&&exports&&!exports.nodeType&&exports,a=o&&"object"==typeof e&&e&&!e.nodeType&&e,s=a&&a.exports===o?r.a.Buffer:void 0;t.a=(s?s.isBuffer:void 0)||i.a}).call(this,n("3UD+")(e))},XqMk:function(e,t,n){"use strict";var r="object"==typeof global&&global&&global.Object===Object&&global;t.a=r},crnd:function(e,t){function n(e){return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}))}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id="crnd"},xutz:function(e,t,n){"use strict";(function(e){var r=n("XqMk"),i="object"==typeof exports&&exports&&!exports.nodeType&&exports,o=i&&"object"==typeof e&&e&&!e.nodeType&&e,a=o&&o.exports===i&&r.a.process,s=function(){try{return o&&o.require&&o.require("util").types||a&&a.binding&&a.binding("util")}catch(e){}}();t.a=s}).call(this,n("3UD+")(e))},zUnb:function(e,t,n){"use strict";function r(e){return"function"==typeof e}n.r(t);var i=!1,o={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){if(e){var t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else i&&console.log("RxJS: Back to a better error behavior. Thank you. <3");i=e},get useDeprecatedSynchronousErrorHandling(){return i}};function a(e){setTimeout((function(){throw e}))}var s={closed:!0,next:function(e){},error:function(e){if(o.useDeprecatedSynchronousErrorHandling)throw e;a(e)},complete:function(){}},c=Array.isArray||function(e){return e&&"number"==typeof e.length};function l(e){return null!==e&&"object"==typeof e}function u(e){return Error.call(this),this.message=e?"".concat(e.length," errors occurred during unsubscription:\n").concat(e.map((function(e,t){return"".concat(t+1,") ").concat(e.toString())})).join("\n  ")):"",this.name="UnsubscriptionError",this.errors=e,this}u.prototype=Object.create(Error.prototype);var d,f=u,h=((d=function(){function e(t){_classCallCheck(this,e),this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,t&&(this._unsubscribe=t)}return _createClass(e,[{key:"unsubscribe",value:function(){var e,t=!1;if(!this.closed){var n=this._parent,i=this._parents,o=this._unsubscribe,a=this._subscriptions;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;for(var s=-1,u=i?i.length:0;n;)n.remove(this),n=++s<u&&i[s]||null;if(r(o))try{o.call(this)}catch(h){t=!0,e=h instanceof f?p(h.errors):[h]}if(c(a))for(s=-1,u=a.length;++s<u;){var d=a[s];if(l(d))try{d.unsubscribe()}catch(h){t=!0,e=e||[],h instanceof f?e=e.concat(p(h.errors)):e.push(h)}}if(t)throw new f(e)}}},{key:"add",value:function(t){var n=t;switch(typeof t){case"function":n=new e(t);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof e)){var r=n;(n=new e)._subscriptions=[r]}break;default:if(!t)return e.EMPTY;throw new Error("unrecognized teardown "+t+" added to Subscription.")}if(n._addParent(this)){var i=this._subscriptions;i?i.push(n):this._subscriptions=[n]}return n}},{key:"remove",value:function(e){var t=this._subscriptions;if(t){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}}},{key:"_addParent",value:function(e){var t=this._parent,n=this._parents;return t!==e&&(t?n?-1===n.indexOf(e)&&(n.push(e),!0):(this._parents=[e],!0):(this._parent=e,!0))}}]),e}()).EMPTY=function(e){return e.closed=!0,e}(new d),d);function p(e){return e.reduce((function(e,t){return e.concat(t instanceof f?t.errors:t)}),[])}var v="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random(),g=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i){var o;switch(_classCallCheck(this,n),(o=t.call(this)).syncErrorValue=null,o.syncErrorThrown=!1,o.syncErrorThrowable=!1,o.isStopped=!1,arguments.length){case 0:o.destination=s;break;case 1:if(!e){o.destination=s;break}if("object"==typeof e){e instanceof n?(o.syncErrorThrowable=e.syncErrorThrowable,o.destination=e,e.add(_assertThisInitialized(o))):(o.syncErrorThrowable=!0,o.destination=new m(_assertThisInitialized(o),e));break}default:o.syncErrorThrowable=!0,o.destination=new m(_assertThisInitialized(o),e,r,i)}return o}return _createClass(n,[{key:v,value:function(){return this}},{key:"next",value:function(e){this.isStopped||this._next(e)}},{key:"error",value:function(e){this.isStopped||(this.isStopped=!0,this._error(e))}},{key:"complete",value:function(){this.isStopped||(this.isStopped=!0,this._complete())}},{key:"unsubscribe",value:function(){this.closed||(this.isStopped=!0,_get3(_getPrototypeOf(n.prototype),"unsubscribe",this).call(this))}},{key:"_next",value:function(e){this.destination.next(e)}},{key:"_error",value:function(e){this.destination.error(e),this.unsubscribe()}},{key:"_complete",value:function(){this.destination.complete(),this.unsubscribe()}},{key:"_unsubscribeAndRecycle",value:function(){var e=this._parent,t=this._parents;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=e,this._parents=t,this}}],[{key:"create",value:function(e,t,r){var i=new n(e,t,r);return i.syncErrorThrowable=!1,i}}]),n}(h),m=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,o,a){var c,l;_classCallCheck(this,n),(c=t.call(this))._parentSubscriber=e;var u=_assertThisInitialized(c);return r(i)?l=i:i&&(l=i.next,o=i.error,a=i.complete,i!==s&&(r((u=Object.create(i)).unsubscribe)&&c.add(u.unsubscribe.bind(u)),u.unsubscribe=c.unsubscribe.bind(_assertThisInitialized(c)))),c._context=u,c._next=l,c._error=o,c._complete=a,c}return _createClass(n,[{key:"next",value:function(e){if(!this.isStopped&&this._next){var t=this._parentSubscriber;o.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}}},{key:"error",value:function(e){if(!this.isStopped){var t=this._parentSubscriber,n=o.useDeprecatedSynchronousErrorHandling;if(this._error)n&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(t.syncErrorThrowable)n?(t.syncErrorValue=e,t.syncErrorThrown=!0):a(e),this.unsubscribe();else{if(this.unsubscribe(),n)throw e;a(e)}}}},{key:"complete",value:function(){var e=this;if(!this.isStopped){var t=this._parentSubscriber;if(this._complete){var n=function(){return e._complete.call(e._context)};o.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}}},{key:"__tryOrUnsub",value:function(e,t){try{e.call(this._context,t)}catch(n){if(this.unsubscribe(),o.useDeprecatedSynchronousErrorHandling)throw n;a(n)}}},{key:"__tryOrSetError",value:function(e,t,n){if(!o.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,n)}catch(r){return o.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=r,e.syncErrorThrown=!0,!0):(a(r),!0)}return!1}},{key:"_unsubscribe",value:function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()}}]),n}(g),y="function"==typeof Symbol&&Symbol.observable||"@@observable";function k(){}var _,b=((_=function(){function e(t){_classCallCheck(this,e),this._isScalar=!1,t&&(this._subscribe=t)}return _createClass(e,[{key:"lift",value:function(t){var n=new e;return n.source=this,n.operator=t,n}},{key:"subscribe",value:function(e,t,n){var r=this.operator,i=function(e,t,n){if(e){if(e instanceof g)return e;if(e[v])return e[v]()}return e||t||n?new g(e,t,n):new g(s)}(e,t,n);if(i.add(r?r.call(i,this.source):this.source||o.useDeprecatedSynchronousErrorHandling&&!i.syncErrorThrowable?this._subscribe(i):this._trySubscribe(i)),o.useDeprecatedSynchronousErrorHandling&&i.syncErrorThrowable&&(i.syncErrorThrowable=!1,i.syncErrorThrown))throw i.syncErrorValue;return i}},{key:"_trySubscribe",value:function(e){try{return this._subscribe(e)}catch(t){o.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=t),function(e){for(;e;){var t=e,n=t.closed,r=t.destination,i=t.isStopped;if(n||i)return!1;e=r&&r instanceof g?r:null}return!0}(e)?e.error(t):console.warn(t)}}},{key:"forEach",value:function(e,t){var n=this;return new(t=w(t))((function(t,r){var i;i=n.subscribe((function(t){try{e(t)}catch(n){r(n),i&&i.unsubscribe()}}),r,t)}))}},{key:"_subscribe",value:function(e){var t=this.source;return t&&t.subscribe(e)}},{key:y,value:function(){return this}},{key:"pipe",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?this:((r=t)?1===r.length?r[0]:function(e){return r.reduce((function(e,t){return t(e)}),e)}:k)(this);var r}},{key:"toPromise",value:function(e){var t=this;return new(e=w(e))((function(e,n){var r;t.subscribe((function(e){return r=e}),(function(e){return n(e)}),(function(){return e(r)}))}))}}]),e}()).create=function(e){return new _(e)},_);function w(e){if(e||(e=o.Promise||Promise),!e)throw new Error("no Promise impl found");return e}function x(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}x.prototype=Object.create(Error.prototype);var C,T=x,A=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var i;return _classCallCheck(this,n),(i=t.call(this)).subject=e,i.subscriber=r,i.closed=!1,i}return _createClass(n,[{key:"unsubscribe",value:function(){if(!this.closed){this.closed=!0;var e=this.subject,t=e.observers;if(this.subject=null,t&&0!==t.length&&!e.isStopped&&!e.closed){var n=t.indexOf(this.subscriber);-1!==n&&t.splice(n,1)}}}}]),n}(h),S=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this,e)).destination=e,r}return n}(g),E=((C=function(e){_inherits(n,e);var t=_createSuper(n);function n(){var e;return _classCallCheck(this,n),(e=t.call(this)).observers=[],e.closed=!1,e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}return _createClass(n,[{key:v,value:function(){return new S(this)}},{key:"lift",value:function(e){var t=new I(this,this);return t.operator=e,t}},{key:"next",value:function(e){if(this.closed)throw new T;if(!this.isStopped)for(var t=this.observers,n=t.length,r=t.slice(),i=0;i<n;i++)r[i].next(e)}},{key:"error",value:function(e){if(this.closed)throw new T;this.hasError=!0,this.thrownError=e,this.isStopped=!0;for(var t=this.observers,n=t.length,r=t.slice(),i=0;i<n;i++)r[i].error(e);this.observers.length=0}},{key:"complete",value:function(){if(this.closed)throw new T;this.isStopped=!0;for(var e=this.observers,t=e.length,n=e.slice(),r=0;r<t;r++)n[r].complete();this.observers.length=0}},{key:"unsubscribe",value:function(){this.isStopped=!0,this.closed=!0,this.observers=null}},{key:"_trySubscribe",value:function(e){if(this.closed)throw new T;return _get3(_getPrototypeOf(n.prototype),"_trySubscribe",this).call(this,e)}},{key:"_subscribe",value:function(e){if(this.closed)throw new T;return this.hasError?(e.error(this.thrownError),h.EMPTY):this.isStopped?(e.complete(),h.EMPTY):(this.observers.push(e),new A(this,e))}},{key:"asObservable",value:function(){var e=new b;return e.source=this,e}}]),n}(b)).create=function(e,t){return new I(e,t)},C),I=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var i;return _classCallCheck(this,n),(i=t.call(this)).destination=e,i.source=r,i}return _createClass(n,[{key:"next",value:function(e){var t=this.destination;t&&t.next&&t.next(e)}},{key:"error",value:function(e){var t=this.destination;t&&t.error&&this.destination.error(e)}},{key:"complete",value:function(){var e=this.destination;e&&e.complete&&this.destination.complete()}},{key:"_subscribe",value:function(e){return this.source?this.source.subscribe(e):h.EMPTY}}]),n}(E),O=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i){var o;return _classCallCheck(this,n),(o=t.call(this)).parent=e,o.outerValue=r,o.outerIndex=i,o.index=0,o}return _createClass(n,[{key:"_next",value:function(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)}},{key:"_error",value:function(e){this.parent.notifyError(e,this),this.unsubscribe()}},{key:"_complete",value:function(){this.parent.notifyComplete(this),this.unsubscribe()}}]),n}(g),R=function(e){return function(t){for(var n=0,r=e.length;n<r&&!t.closed;n++)t.next(e[n]);t.closed||t.complete()}};var P="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator";var M=function(e){if(e instanceof b)return function(t){return e._isScalar?(t.next(e.value),void t.complete()):e.subscribe(t)};if(e&&"function"==typeof e[y])return t=e,function(e){var n=t[y]();if("function"!=typeof n.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return n.subscribe(e)};var t,n,r,i,o;if((n=e)&&"number"==typeof n.length&&"function"!=typeof n)return R(e);if((i=e)&&"function"!=typeof i.subscribe&&"function"==typeof i.then)return r=e,function(e){return r.then((function(t){e.closed||(e.next(t),e.complete())}),(function(t){return e.error(t)})).then(null,a),e};if(e&&"function"==typeof e[P])return o=e,function(e){for(var t=o[P]();;){var n=t.next();if(n.done){e.complete();break}if(e.next(n.value),e.closed)break}return"function"==typeof t.return&&e.add((function(){t.return&&t.return()})),e};var s=l(e)?"an invalid object":"'".concat(e,"'");throw new TypeError("You provided ".concat(s," where a stream was expected. You can provide an Observable, Promise, Array, or Iterable."))},N=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"notifyNext",value:function(e,t,n,r,i){this.destination.next(t)}},{key:"notifyError",value:function(e,t){this.destination.error(e)}},{key:"notifyComplete",value:function(e){this.destination.complete()}}]),n}(g),D=function(){function e(t,n){_classCallCheck(this,e),this.project=t,this.thisArg=n}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new F(e,this.project,this.thisArg))}}]),e}(),F=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i){var o;return _classCallCheck(this,n),(o=t.call(this,e)).project=r,o.count=0,o.thisArg=i||_assertThisInitialized(o),o}return _createClass(n,[{key:"_next",value:function(e){var t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(t)}}]),n}(g);function j(e,t){return new b(t?function(n){var r=new h,i=0;return r.add(t.schedule((function(){i!==e.length?(n.next(e[i++]),n.closed||r.add(this.schedule())):n.complete()}))),r}:R(e))}var L=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.POSITIVE_INFINITY;_classCallCheck(this,e),this.project=t,this.concurrent=n}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new V(e,this.project,this.concurrent))}}]),e}(),V=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.POSITIVE_INFINITY;return _classCallCheck(this,n),(i=t.call(this,e)).project=r,i.concurrent=o,i.hasCompleted=!1,i.buffer=[],i.active=0,i.index=0,i}return _createClass(n,[{key:"_next",value:function(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)}},{key:"_tryNext",value:function(e){var t,n=this.index++;try{t=this.project(e,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(t,e,n)}},{key:"_innerSub",value:function(e,t,n){var r=new O(this,void 0,void 0);this.destination.add(r),function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new O(e,n,r);i.closed||M(t)(i)}(this,e,t,n,r)}},{key:"_complete",value:function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}},{key:"notifyNext",value:function(e,t,n,r,i){this.destination.next(t)}},{key:"notifyComplete",value:function(e){var t=this.buffer;this.remove(e),this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}]),n}(N);function B(e){return e}function z(){return function(e){return e.lift(new H(e))}}var H=function(){function e(t){_classCallCheck(this,e),this.connectable=t}return _createClass(e,[{key:"call",value:function(e,t){var n=this.connectable;n._refCount++;var r=new U(e,n),i=t.subscribe(r);return r.closed||(r.connection=n.connect()),i}}]),e}(),U=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var i;return _classCallCheck(this,n),(i=t.call(this,e)).connectable=r,i}return _createClass(n,[{key:"_unsubscribe",value:function(){var e=this.connectable;if(e){this.connectable=null;var t=e._refCount;if(t<=0)this.connection=null;else if(e._refCount=t-1,t>1)this.connection=null;else{var n=this.connection,r=e._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}else this.connection=null}}]),n}(g),W=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var i;return _classCallCheck(this,n),(i=t.call(this)).source=e,i.subjectFactory=r,i._refCount=0,i._isComplete=!1,i}return _createClass(n,[{key:"_subscribe",value:function(e){return this.getSubject().subscribe(e)}},{key:"getSubject",value:function(){var e=this._subject;return e&&!e.isStopped||(this._subject=this.subjectFactory()),this._subject}},{key:"connect",value:function(){var e=this._connection;return e||(this._isComplete=!1,(e=this._connection=new h).add(this.source.subscribe(new Y(this.getSubject(),this))),e.closed?(this._connection=null,e=h.EMPTY):this._connection=e),e}},{key:"refCount",value:function(){return z()(this)}}]),n}(b).prototype,q={operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:W._subscribe},_isComplete:{value:W._isComplete,writable:!0},getSubject:{value:W.getSubject},connect:{value:W.connect},refCount:{value:W.refCount}},Y=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var i;return _classCallCheck(this,n),(i=t.call(this,e)).connectable=r,i}return _createClass(n,[{key:"_error",value:function(e){this._unsubscribe(),_get3(_getPrototypeOf(n.prototype),"_error",this).call(this,e)}},{key:"_complete",value:function(){this.connectable._isComplete=!0,this._unsubscribe(),_get3(_getPrototypeOf(n.prototype),"_complete",this).call(this)}},{key:"_unsubscribe",value:function(){var e=this.connectable;if(e){this.connectable=null;var t=e._connection;e._refCount=0,e._subject=null,e._connection=null,t&&t.unsubscribe()}}}]),n}(S);function G(){return new E}function J(e,t,n){var r=function(e){return function(){if(e){var t=e.apply(void 0,arguments);for(var n in t)this[n]=t[n]}}}(t);function i(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(this instanceof i)return r.apply(this,t),this;var o=_construct(i,t);return a.annotation=o,a;function a(e,t,n){for(var r=e.hasOwnProperty("__parameters__")?e.__parameters__:Object.defineProperty(e,"__parameters__",{value:[]}).__parameters__;r.length<=n;)r.push(null);return(r[n]=r[n]||[]).push(o),e}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=e,i.annotationCls=i,i}var $=J("Inject",(function(e){return{token:e}})),K=J("Optional"),Q=J("Self"),Z=J("SkipSelf"),X=function(e){return e[e.Default=0]="Default",e[e.Host=1]="Host",e[e.Self=2]="Self",e[e.SkipSelf=4]="SkipSelf",e[e.Optional=8]="Optional",e}({});function ee(e){for(var t in e)if(e[t]===ee)return t;throw Error("Could not find renamed property on target object.")}function te(e){return{providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function ne(e){return e&&e.hasOwnProperty(re)?e[re]:null}var re=ee({ngInjectableDef:ee});function ie(e){if("string"==typeof e)return e;if(e instanceof Array)return"["+e.map(ie).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return""+e.overriddenName;if(e.name)return""+e.name;var t=e.toString();if(null==t)return""+t;var n=t.indexOf("\n");return-1===n?t:t.substring(0,n)}var oe=ee({__forward_ref__:ee});function ae(e){return e.__forward_ref__=ae,e.toString=function(){return ie(this())},e}function se(e){var t=e;return"function"==typeof t&&t.hasOwnProperty(oe)&&t.__forward_ref__===ae?t():e}var ce,le,ue,de,fe=(ce="undefined"!=typeof globalThis&&globalThis,le="undefined"!=typeof window&&window,ue="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,de="undefined"!=typeof global&&global,ce||de||le||ue),he=void 0;function pe(e){var t=he;return he=e,t}var ve=function(){function e(t,n){_classCallCheck(this,e),this._desc=t,this.ngMetadataName="InjectionToken",this.ngInjectableDef=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.ngInjectableDef=te({providedIn:n.providedIn||"root",factory:n.factory}))}return _createClass(e,[{key:"toString",value:function(){return"InjectionToken "+this._desc}}]),e}(),ge=new Object,me=new ve("INJECTOR",-1),ye=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ge;if(t===ge){var n=new Error("NullInjectorError: No provider for ".concat(ie(e),"!"));throw n.name="NullInjectorError",n}return t}}]),e}(),ke=function(){var e=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"create",value:function(e,t){return Array.isArray(e)?new Ae(e,t):new Ae(e.providers,e.parent,e.name||null)}}]),e}();return e.THROW_IF_NOT_FOUND=ge,e.NULL=new ye,e.ngInjectableDef=te({providedIn:"any",factory:function(){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:X.Default;return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:X.Default;if(void 0===he)throw new Error("inject() must be called from an injection context");return null===he?function(e,t,n){var r=ne(e);if(r&&"root"==r.providedIn)return void 0===r.value?r.value=r.factory():r.value;if(n&X.Optional)return null;throw new Error("Injector: NOT_FOUND [".concat(ie(e),"]"))}(e,0,t):he.get(e,t&X.Optional?null:void 0,t)}(e,t)}(me)}}),e.__NG_ELEMENT_ID__=-1,e}(),_e=function(e){return e},be=[],we=_e,xe=function(){return Array.prototype.slice.call(arguments)},Ce=ee({provide:String,useValue:ee}),Te=/\n/gm,Ae=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ke.NULL,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;_classCallCheck(this,e),this.parent=n,this.source=r;var i=this._records=new Map;i.set(ke,{token:ke,fn:_e,deps:be,value:this,useNew:!1}),i.set(me,{token:me,fn:_e,deps:be,value:this,useNew:!1}),function e(t,n){if(n)if((n=se(n))instanceof Array)for(var r=0;r<n.length;r++)e(t,n[r]);else{if("function"==typeof n)throw Ie("Function/Class not supported",n);if(!n||"object"!=typeof n||!n.provide)throw Ie("Unexpected provider",n);var i=se(n.provide),o=function(e){var t=function(e){var t=be,n=e.deps;if(n&&n.length){t=[];for(var r=0;r<n.length;r++){var i=6,o=se(n[r]);if(o instanceof Array)for(var a=0,s=o;a<s.length;a++){var c=s[a];c instanceof K||c==K?i|=1:c instanceof Z||c==Z?i&=-3:c instanceof Q||c==Q?i&=-5:o=c instanceof $?c.token:se(c)}t.push({token:o,options:i})}}else if(e.useExisting)t=[{token:se(e.useExisting),options:6}];else if(!(n||Ce in e))throw Ie("'deps' required",e);return t}(e),n=_e,r=be,i=!1,o=se(e.provide);if(Ce in e)r=e.useValue;else if(e.useFactory)n=e.useFactory;else if(e.useExisting);else if(e.useClass)i=!0,n=se(e.useClass);else{if("function"!=typeof o)throw Ie("StaticProvider does not have [useValue|useFactory|useExisting|useClass] or [provide] is not newable",e);i=!0,n=o}return{deps:t,fn:n,useNew:i,value:r}}(n);if(!0===n.multi){var a=t.get(i);if(a){if(a.fn!==xe)throw Se(i)}else t.set(i,a={token:n.provide,deps:[],useNew:!1,fn:xe,value:be});i=n,a.deps.push({token:i,options:6})}var s=t.get(i);if(s&&s.fn==xe)throw Se(i);t.set(i,o)}}(i,t)}return _createClass(e,[{key:"get",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:X.Default,r=this._records.get(e);try{return function e(t,n,r,i,o,a){try{return function(t,n,r,i,o,a){var s;if(!n||a&X.SkipSelf)a&X.Self||(s=i.get(t,o,X.Default));else{if((s=n.value)==we)throw Error("\u0275Circular dependency");if(s===be){n.value=we;var c=n.useNew,l=n.fn,u=n.deps,d=be;if(u.length){d=[];for(var f=0;f<u.length;f++){var h=u[f],p=h.options,v=2&p?r.get(h.token):void 0;d.push(e(h.token,v,r,v||4&p?i:ke.NULL,1&p?null:ke.THROW_IF_NOT_FOUND,X.Default))}}n.value=s=c?_construct(l,_toConsumableArray(d)):l.apply(void 0,d)}}return s}(t,n,r,i,o,a)}catch(s){throw s instanceof Error||(s=new Error(s)),(s.ngTempTokenPath=s.ngTempTokenPath||[]).unshift(t),n&&n.value==we&&(n.value=be),s}}(e,r,this._records,this.parent,t,n)}catch(i){return function(e,t,n,r){var i=e.ngTempTokenPath;throw t.__source&&i.unshift(t.__source),e.message=Ee("\n"+e.message,i,"StaticInjectorError",r),e.ngTokenPath=i,e.ngTempTokenPath=null,e}(i,e,0,this.source)}}},{key:"toString",value:function(){var e=[];return this._records.forEach((function(t,n){return e.push(ie(n))})),"StaticInjector[".concat(e.join(", "),"]")}}]),e}();function Se(e){return Ie("Cannot mix multi providers and regular providers",e)}function Ee(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;e=e&&"\n"===e.charAt(0)&&"\u0275"==e.charAt(1)?e.substr(2):e;var i=ie(t);if(t instanceof Array)i=t.map(ie).join(" -> ");else if("object"==typeof t){var o=[];for(var a in t)if(t.hasOwnProperty(a)){var s=t[a];o.push(a+":"+("string"==typeof s?JSON.stringify(s):ie(s)))}i="{".concat(o.join(", "),"}")}return"".concat(n).concat(r?"("+r+")":"","[").concat(i,"]: ").concat(e.replace(Te,"\n  "))}function Ie(e,t){return new Error(Ee(e,t,"StaticInjectorError"))}var Oe=function(){var e={Emulated:0,Native:1,None:2,ShadowDom:3};return e[e.Emulated]="Emulated",e[e.Native]="Native",e[e.None]="None",e[e.ShadowDom]="ShadowDom",e}(),Re=("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(fe);function Pe(e){return e.ngDebugContext}function Me(e){return e.ngOriginalError}function Ne(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e.error.apply(e,n)}var De=function(){function e(){_classCallCheck(this,e),this._console=console}return _createClass(e,[{key:"handleError",value:function(e){var t=this._findOriginalError(e),n=this._findContext(e),r=function(e){return e.ngErrorLogger||Ne}(e);r(this._console,"ERROR",e),t&&r(this._console,"ORIGINAL ERROR",t),n&&r(this._console,"ERROR CONTEXT",n)}},{key:"_findContext",value:function(e){return e?Pe(e)?Pe(e):this._findContext(Me(e)):null}},{key:"_findOriginalError",value:function(e){for(var t=Me(e);t&&Me(t);)t=Me(t);return t}}]),e}(),Fe=!0,je=!1;function Le(){return je=!0,Fe}var Ve=function(){function e(t){if(_classCallCheck(this,e),this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),this.inertBodyElement=this.inertDocument.body,null==this.inertBodyElement){var n=this.inertDocument.createElement("html");this.inertDocument.appendChild(n),this.inertBodyElement=this.inertDocument.createElement("body"),n.appendChild(this.inertBodyElement)}this.inertBodyElement.innerHTML='<svg><g onload="this.parentNode.remove()"></g></svg>',!this.inertBodyElement.querySelector||this.inertBodyElement.querySelector("svg")?(this.inertBodyElement.innerHTML='<svg><p><style><img src="</style><img src=x onerror=alert(1)//">',this.getInertBodyElement=this.inertBodyElement.querySelector&&this.inertBodyElement.querySelector("svg img")&&function(){try{return!!window.DOMParser}catch(e){return!1}}()?this.getInertBodyElement_DOMParser:this.getInertBodyElement_InertDocument):this.getInertBodyElement=this.getInertBodyElement_XHR}return _createClass(e,[{key:"getInertBodyElement_XHR",value:function(e){e="<body><remove></remove>"+e+"</body>";try{e=encodeURI(e)}catch(r){return null}var t=new XMLHttpRequest;t.responseType="document",t.open("GET","data:text/html;charset=utf-8,"+e,!1),t.send(void 0);var n=t.response.body;return n.removeChild(n.firstChild),n}},{key:"getInertBodyElement_DOMParser",value:function(e){e="<body><remove></remove>"+e+"</body>";try{var t=(new window.DOMParser).parseFromString(e,"text/html").body;return t.removeChild(t.firstChild),t}catch(n){return null}}},{key:"getInertBodyElement_InertDocument",value:function(e){var t=this.inertDocument.createElement("template");return"content"in t?(t.innerHTML=e,t):(this.inertBodyElement.innerHTML=e,this.defaultDoc.documentMode&&this.stripCustomNsAttrs(this.inertBodyElement),this.inertBodyElement)}},{key:"stripCustomNsAttrs",value:function(e){for(var t=e.attributes,n=t.length-1;0<n;n--){var r=t.item(n).name;"xmlns:ns1"!==r&&0!==r.indexOf("ns1:")||e.removeAttribute(r)}for(var i=e.firstChild;i;)i.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(i),i=i.nextSibling}}]),e}(),Be=/^(?:(?:https?|mailto|ftp|tel|file):|[^&:/?#]*(?:[/?#]|$))/gi,ze=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function He(e){return(e=String(e)).match(Be)||e.match(ze)?e:(Le()&&console.warn("WARNING: sanitizing unsafe URL value ".concat(e," (see http://g.co/ng/security#xss)")),"unsafe:"+e)}function Ue(e){var t,n={},r=_createForOfIteratorHelper(e.split(","));try{for(r.s();!(t=r.n()).done;){n[t.value]=!0}}catch(i){r.e(i)}finally{r.f()}return n}function We(){for(var e={},t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,o=n;i<o.length;i++){var a=o[i];for(var s in a)a.hasOwnProperty(s)&&(e[s]=!0)}return e}var qe,Ye=Ue("area,br,col,hr,img,wbr"),Ge=Ue("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Je=Ue("rp,rt"),$e=We(Je,Ge),Ke=We(Ye,We(Ge,Ue("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),We(Je,Ue("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),$e),Qe=Ue("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Ze=Ue("srcset"),Xe=We(Qe,Ze,Ue("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Ue("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),et=Ue("script,style,template"),tt=function(){function e(){_classCallCheck(this,e),this.sanitizedSomething=!1,this.buf=[]}return _createClass(e,[{key:"sanitizeChildren",value:function(e){for(var t=e.firstChild,n=!0;t;)if(t.nodeType===Node.ELEMENT_NODE?n=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,n&&t.firstChild)t=t.firstChild;else for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);var r=this.checkClobberedElement(t,t.nextSibling);if(r){t=r;break}t=this.checkClobberedElement(t,t.parentNode)}return this.buf.join("")}},{key:"startElement",value:function(e){var t=e.nodeName.toLowerCase();if(!Ke.hasOwnProperty(t))return this.sanitizedSomething=!0,!et.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);for(var n,r=e.attributes,i=0;i<r.length;i++){var o=r.item(i),a=o.name,s=a.toLowerCase();if(Xe.hasOwnProperty(s)){var c=o.value;Qe[s]&&(c=He(c)),Ze[s]&&(n=c,c=(n=String(n)).split(",").map((function(e){return He(e.trim())})).join(", ")),this.buf.push(" ",a,'="',it(c),'"')}else this.sanitizedSomething=!0}return this.buf.push(">"),!0}},{key:"endElement",value:function(e){var t=e.nodeName.toLowerCase();Ke.hasOwnProperty(t)&&!Ye.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}},{key:"chars",value:function(e){this.buf.push(it(e))}},{key:"checkClobberedElement",value:function(e,t){if(t&&(e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error("Failed to sanitize html because the element is clobbered: "+e.outerHTML);return t}}]),e}(),nt=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,rt=/([^\#-~ |!])/g;function it(e){return e.replace(/&/g,"&amp;").replace(nt,(function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"})).replace(rt,(function(e){return"&#"+e.charCodeAt(0)+";"})).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function ot(e){return"content"in e&&function(e){return e.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===e.nodeName}(e)?e.content:null}var at=function(){var e={NONE:0,HTML:1,STYLE:2,SCRIPT:3,URL:4,RESOURCE_URL:5};return e[e.NONE]="NONE",e[e.HTML]="HTML",e[e.STYLE]="STYLE",e[e.SCRIPT]="SCRIPT",e[e.URL]="URL",e[e.RESOURCE_URL]="RESOURCE_URL",e}(),st=function e(){_classCallCheck(this,e)},ct=new RegExp("^([-,.\"'%_!# a-zA-Z0-9]+|(?:(?:matrix|translate|scale|rotate|skew|perspective)(?:X|Y|3d)?|(?:rgb|hsl)a?|(?:repeating-)?(?:linear|radial)-gradient|(?:calc|attr))\\([-0-9.%, #a-zA-Z]+\\))$","g"),lt=/^url\(([^)]+)\)$/,ut=/([A-Z])/g;function dt(e){try{return null!=e?e.toString().slice(0,30):e}catch(t){return"[ERROR] Exception while trying to serialize the value"}}function ft(e){return!!e&&"function"==typeof e.then}var ht=null;function pt(){if(!ht){var e=fe.Symbol;if(e&&e.iterator)ht=e.iterator;else for(var t=Object.getOwnPropertyNames(Map.prototype),n=0;n<t.length;++n){var r=t[n];"entries"!==r&&"size"!==r&&Map.prototype[r]===Map.prototype.entries&&(ht=r)}}return ht}function vt(e,t){return e===t||"number"==typeof e&&"number"==typeof t&&isNaN(e)&&isNaN(t)}function gt(e,t){var n=yt(e),r=yt(t);return n&&r?function(e,t,n){for(var r=e[pt()](),i=t[pt()]();;){var o=r.next(),a=i.next();if(o.done&&a.done)return!0;if(o.done||a.done)return!1;if(!n(o.value,a.value))return!1}}(e,t,gt):!(n||!(e&&("object"==typeof e||"function"==typeof e))||r||!(t&&("object"==typeof t||"function"==typeof t)))||vt(e,t)}var mt=function(){function e(t){_classCallCheck(this,e),this.wrapped=t}return _createClass(e,null,[{key:"wrap",value:function(t){return new e(t)}},{key:"unwrap",value:function(t){return e.isWrapped(t)?t.wrapped:t}},{key:"isWrapped",value:function(t){return t instanceof e}}]),e}();function yt(e){return!!kt(e)&&(Array.isArray(e)||!(e instanceof Map)&&pt()in e)}function kt(e){return null!==e&&("function"==typeof e||"object"==typeof e)}var _t=function(){function e(t,n,r){_classCallCheck(this,e),this.previousValue=t,this.currentValue=n,this.firstChange=r}return _createClass(e,[{key:"isFirstChange",value:function(){return this.firstChange}}]),e}(),bt=new ve("The presence of this token marks an injector as being the root injector."),wt=function e(){_classCallCheck(this,e)};function xt(e){var t=Error("No component factory found for ".concat(ie(e),". Did you add it to @NgModule.entryComponents?"));return t[Ct]=e,t}var Ct="ngComponent",Tt=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"resolveComponentFactory",value:function(e){throw xt(e)}}]),e}(),At=function(){var e=function e(){_classCallCheck(this,e)};return e.NULL=new Tt,e}(),St=function(){function e(t,n,r){_classCallCheck(this,e),this._parent=n,this._ngModule=r,this._factories=new Map;for(var i=0;i<t.length;i++){var o=t[i];this._factories.set(o.componentType,o)}}return _createClass(e,[{key:"resolveComponentFactory",value:function(e){var t=this._factories.get(e);if(!t&&this._parent&&(t=this._parent.resolveComponentFactory(e)),!t)throw xt(e);return new Et(t,this._ngModule)}}]),e}(),Et=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var i;return _classCallCheck(this,n),(i=t.call(this)).factory=e,i.ngModule=r,i.selector=e.selector,i.componentType=e.componentType,i.ngContentSelectors=e.ngContentSelectors,i.inputs=e.inputs,i.outputs=e.outputs,i}return _createClass(n,[{key:"create",value:function(e,t,n,r){return this.factory.create(e,t,n,r||this.ngModule)}}]),n}(wt),It=function e(){_classCallCheck(this,e)};function Ot(){}var Rt=function(){var e=function e(t){_classCallCheck(this,e),this.nativeElement=t};return e.__NG_ELEMENT_ID__=function(){return Pt(e)},e}(),Pt=Ot,Mt=function e(){_classCallCheck(this,e)},Nt=function(){var e={Important:1,DashCase:2};return e[e.Important]="Important",e[e.DashCase]="DashCase",e}(),Dt=function(){var e=function e(){_classCallCheck(this,e)};return e.__NG_ELEMENT_ID__=function(){return Ft()},e}(),Ft=Ot,jt=new function e(t){_classCallCheck(this,e),this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}("8.0.3"),Lt=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"supports",value:function(e){return yt(e)}},{key:"create",value:function(e){return new Bt(e)}}]),e}(),Vt=function(e,t){return t},Bt=function(){function e(t){_classCallCheck(this,e),this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||Vt}return _createClass(e,[{key:"forEachItem",value:function(e){var t;for(t=this._itHead;null!==t;t=t._next)e(t)}},{key:"forEachOperation",value:function(e){for(var t=this._itHead,n=this._removalsHead,r=0,i=null;t||n;){var o=!n||t&&t.currentIndex<Wt(n,r,i)?t:n,a=Wt(o,r,i),s=o.currentIndex;if(o===n)r--,n=n._nextRemoved;else if(t=t._next,null==o.previousIndex)r++;else{i||(i=[]);var c=a-r,l=s-r;if(c!=l){for(var u=0;u<c;u++){var d=u<i.length?i[u]:i[u]=0,f=d+u;l<=f&&f<c&&(i[u]=d+1)}i[o.previousIndex]=l-c}}a!==s&&e(o,a,s)}}},{key:"forEachPreviousItem",value:function(e){var t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}},{key:"forEachAddedItem",value:function(e){var t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}},{key:"forEachMovedItem",value:function(e){var t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}},{key:"forEachRemovedItem",value:function(e){var t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}},{key:"forEachIdentityChange",value:function(e){var t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}},{key:"diff",value:function(e){if(null==e&&(e=[]),!yt(e))throw new Error("Error trying to diff '".concat(ie(e),"'. Only arrays and iterables are allowed"));return this.check(e)?this:null}},{key:"onDestroy",value:function(){}},{key:"check",value:function(e){var t=this;this._reset();var n,r,i,o=this._itHead,a=!1;if(Array.isArray(e)){this.length=e.length;for(var s=0;s<this.length;s++)r=e[s],i=this._trackByFn(s,r),null!==o&&vt(o.trackById,i)?(a&&(o=this._verifyReinsertion(o,r,i,s)),vt(o.item,r)||this._addIdentityChange(o,r)):(o=this._mismatch(o,r,i,s),a=!0),o=o._next}else n=0,function(e,t){if(Array.isArray(e))for(var n=0;n<e.length;n++)t(e[n]);else for(var r,i=e[pt()]();!(r=i.next()).done;)t(r.value)}(e,(function(e){i=t._trackByFn(n,e),null!==o&&vt(o.trackById,i)?(a&&(o=t._verifyReinsertion(o,e,i,n)),vt(o.item,e)||t._addIdentityChange(o,e)):(o=t._mismatch(o,e,i,n),a=!0),o=o._next,n++})),this.length=n;return this._truncate(o),this.collection=e,this.isDirty}},{key:"isDirty",get:function(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}},{key:"_reset",value:function(){if(this.isDirty){var e,t;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=t)e.previousIndex=e.currentIndex,t=e._nextMoved;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}},{key:"_mismatch",value:function(e,t,n,r){var i;return null===e?i=this._itTail:(i=e._prev,this._remove(e)),null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(vt(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,i,r)):null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(vt(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,i,r)):e=this._addAfter(new zt(t,n),i,r),e}},{key:"_verifyReinsertion",value:function(e,t,n,r){var i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?e=this._reinsertAfter(i,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}},{key:"_truncate",value:function(e){for(;null!==e;){var t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}},{key:"_reinsertAfter",value:function(e,t,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);var r=e._prevRemoved,i=e._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(e,t,n),this._addToMoves(e,n),e}},{key:"_moveAfter",value:function(e,t,n){return this._unlink(e),this._insertAfter(e,t,n),this._addToMoves(e,n),e}},{key:"_addAfter",value:function(e,t,n){return this._insertAfter(e,t,n),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}},{key:"_insertAfter",value:function(e,t,n){var r=null===t?this._itHead:t._next;return e._next=r,e._prev=t,null===r?this._itTail=e:r._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new Ut),this._linkedRecords.put(e),e.currentIndex=n,e}},{key:"_remove",value:function(e){return this._addToRemovals(this._unlink(e))}},{key:"_unlink",value:function(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);var t=e._prev,n=e._next;return null===t?this._itHead=n:t._next=n,null===n?this._itTail=t:n._prev=t,e}},{key:"_addToMoves",value:function(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}},{key:"_addToRemovals",value:function(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Ut),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}},{key:"_addIdentityChange",value:function(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}]),e}(),zt=function e(t,n){_classCallCheck(this,e),this.item=t,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null},Ht=function(){function e(){_classCallCheck(this,e),this._head=null,this._tail=null}return _createClass(e,[{key:"add",value:function(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}},{key:"get",value:function(e,t){var n;for(n=this._head;null!==n;n=n._nextDup)if((null===t||t<=n.currentIndex)&&vt(n.trackById,e))return n;return null}},{key:"remove",value:function(e){var t=e._prevDup,n=e._nextDup;return null===t?this._head=n:t._nextDup=n,null===n?this._tail=t:n._prevDup=t,null===this._head}}]),e}(),Ut=function(){function e(){_classCallCheck(this,e),this.map=new Map}return _createClass(e,[{key:"put",value:function(e){var t=e.trackById,n=this.map.get(t);n||(n=new Ht,this.map.set(t,n)),n.add(e)}},{key:"get",value:function(e,t){var n=this.map.get(e);return n?n.get(e,t):null}},{key:"remove",value:function(e){var t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}},{key:"isEmpty",get:function(){return 0===this.map.size}},{key:"clear",value:function(){this.map.clear()}}]),e}();function Wt(e,t,n){var r=e.previousIndex;if(null===r)return r;var i=0;return n&&r<n.length&&(i=n[r]),r+t+i}var qt=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"supports",value:function(e){return e instanceof Map||kt(e)}},{key:"create",value:function(){return new Yt}}]),e}(),Yt=function(){function e(){_classCallCheck(this,e),this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}return _createClass(e,[{key:"isDirty",get:function(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}},{key:"forEachItem",value:function(e){var t;for(t=this._mapHead;null!==t;t=t._next)e(t)}},{key:"forEachPreviousItem",value:function(e){var t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}},{key:"forEachChangedItem",value:function(e){var t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}},{key:"forEachAddedItem",value:function(e){var t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}},{key:"forEachRemovedItem",value:function(e){var t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}},{key:"diff",value:function(e){if(e){if(!(e instanceof Map||kt(e)))throw new Error("Error trying to diff '".concat(ie(e),"'. Only maps and objects are allowed"))}else e=new Map;return this.check(e)?this:null}},{key:"onDestroy",value:function(){}},{key:"check",value:function(e){var t=this;this._reset();var n=this._mapHead;if(this._appendAfter=null,this._forEach(e,(function(e,r){if(n&&n.key===r)t._maybeAddToChanges(n,e),t._appendAfter=n,n=n._next;else{var i=t._getOrCreateRecordForKey(r,e);n=t._insertBeforeOrAppend(n,i)}})),n){n._prev&&(n._prev._next=null),this._removalsHead=n;for(var r=n;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}},{key:"_insertBeforeOrAppend",value:function(e,t){if(e){var n=e._prev;return t._next=e,t._prev=n,e._prev=t,n&&(n._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}},{key:"_getOrCreateRecordForKey",value:function(e,t){if(this._records.has(e)){var n=this._records.get(e);this._maybeAddToChanges(n,t);var r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}var o=new Gt(e);return this._records.set(e,o),o.currentValue=t,this._addToAdditions(o),o}},{key:"_reset",value:function(){if(this.isDirty){var e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}},{key:"_maybeAddToChanges",value:function(e,t){vt(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}},{key:"_addToAdditions",value:function(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}},{key:"_addToChanges",value:function(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}},{key:"_forEach",value:function(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach((function(n){return t(e[n],n)}))}}]),e}(),Gt=function e(t){_classCallCheck(this,e),this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null},Jt=function(){var e=function(){function e(t){_classCallCheck(this,e),this.factories=t}return _createClass(e,[{key:"find",value:function(e){var t,n=this.factories.find((function(t){return t.supports(e)}));if(null!=n)return n;throw new Error("Cannot find a differ supporting object '".concat(e,"' of type '").concat((t=e).name||typeof t,"'"))}}],[{key:"create",value:function(t,n){if(null!=n){var r=n.factories.slice();t=t.concat(r)}return new e(t)}},{key:"extend",value:function(t){return{provide:e,useFactory:function(n){if(!n)throw new Error("Cannot extend IterableDiffers without a parent injector");return e.create(t,n)},deps:[[e,new Z,new K]]}}}]),e}();return e.ngInjectableDef=te({providedIn:"root",factory:function(){return new e([new Lt])}}),e}(),$t=function(){var e=function(){function e(t){_classCallCheck(this,e),this.factories=t}return _createClass(e,[{key:"find",value:function(e){var t=this.factories.find((function(t){return t.supports(e)}));if(t)return t;throw new Error("Cannot find a differ supporting object '".concat(e,"'"))}}],[{key:"create",value:function(t,n){if(n){var r=n.factories.slice();t=t.concat(r)}return new e(t)}},{key:"extend",value:function(t){return{provide:e,useFactory:function(n){if(!n)throw new Error("Cannot extend KeyValueDiffers without a parent injector");return e.create(t,n)},deps:[[e,new Z,new K]]}}}]),e}();return e.ngInjectableDef=te({providedIn:"root",factory:function(){return new e([new qt])}}),e}(),Kt=function(){var e=function e(){_classCallCheck(this,e)};return e.__NG_ELEMENT_ID__=function(){return Qt()},e}(),Qt=function(){},Zt=[new qt],Xt=new Jt([new Lt]),en=new $t(Zt),tn=function(){var e=function e(){_classCallCheck(this,e)};return e.__NG_ELEMENT_ID__=function(){return nn(e,Rt)},e}(),nn=Ot,rn=function(){var e=function e(){_classCallCheck(this,e)};return e.__NG_ELEMENT_ID__=function(){return on(e,Rt)},e}(),on=Ot;function an(e,t,n,r){var i="ExpressionChangedAfterItHasBeenCheckedError: Expression has changed after it was checked. Previous value: '".concat(t,"'. Current value: '").concat(n,"'.");return r&&(i+=" It seems like the view has been created after its parent and its children have been dirty checked. Has it been created in a change detection hook ?"),function(e,t){var n=new Error(e);return sn(n,t),n}(i,e)}function sn(e,t){e.ngDebugContext=t,e.ngErrorLogger=t.logError.bind(t)}function cn(e){return new Error("ViewDestroyedError: Attempt to use a destroyed view: "+e)}function ln(e,t,n){var r=e.state,i=1792&r;return i===t?(e.state=-1793&r|n,e.initIndex=-1,!0):i===n}function un(e,t,n){return(1792&e.state)===t&&e.initIndex<=n&&(e.initIndex=n+1,!0)}function dn(e,t){return e.nodes[t]}function fn(e,t){return e.nodes[t]}function hn(e,t){return e.nodes[t]}function pn(e,t){return e.nodes[t]}function vn(e,t){return e.nodes[t]}var gn={setCurrentNode:void 0,createRootView:void 0,createEmbeddedView:void 0,createComponentView:void 0,createNgModuleRef:void 0,overrideProvider:void 0,overrideComponentView:void 0,clearOverrides:void 0,checkAndUpdateView:void 0,checkNoChangesView:void 0,destroyView:void 0,resolveDep:void 0,createDebugContext:void 0,handleEvent:void 0,updateDirectives:void 0,updateRenderer:void 0,dirtyParentQueries:void 0},mn=function(){},yn=new Map;function kn(e){var t=yn.get(e);return t||(t=ie(e)+"_"+yn.size,yn.set(e,t)),t}function _n(e){return{id:"$$undefined",styles:e.styles,encapsulation:e.encapsulation,data:e.data}}var bn=0;function wn(e,t,n,r){return!(!(2&e.state)&&vt(e.oldValues[t.bindingIndex+n],r))}function xn(e,t,n,r){return!!wn(e,t,n,r)&&(e.oldValues[t.bindingIndex+n]=r,!0)}function Cn(e,t,n,r){var i=e.oldValues[t.bindingIndex+n];if(1&e.state||!gt(i,r)){var o=t.bindings[n].name;throw an(gn.createDebugContext(e,t.nodeIndex),"".concat(o,": ").concat(i),"".concat(o,": ").concat(r),0!=(1&e.state))}}function Tn(e){for(var t=e;t;)2&t.def.flags&&(t.state|=8),t=t.viewContainerParent||t.parent}function An(e,t){for(var n=e;n&&n!==t;)n.state|=64,n=n.viewContainerParent||n.parent}function Sn(e,t,n,r){try{return Tn(33554432&e.def.nodes[t].flags?fn(e,t).componentView:e),gn.handleEvent(e,t,n,r)}catch(i){e.root.errorHandler.handleError(i)}}function En(e){return e.parent?fn(e.parent,e.parentNodeDef.nodeIndex):null}function In(e){return e.parent?e.parentNodeDef.parent:null}function On(e,t){switch(201347067&t.flags){case 1:return fn(e,t.nodeIndex).renderElement;case 2:return dn(e,t.nodeIndex).renderText}}function Rn(e){return!!e.parent&&!!(32768&e.parentNodeDef.flags)}function Pn(e){return!(!e.parent||32768&e.parentNodeDef.flags)}function Mn(e){return 1<<e%32}function Nn(e){var t={},n=0,r={};return e&&e.forEach((function(e){var i=_slicedToArray(e,2),o=i[0],a=i[1];"number"==typeof o?(t[o]=a,n|=Mn(o)):r[o]=a})),{matchedQueries:t,references:r,matchedQueryIds:n}}function Dn(e,t){return e.map((function(e){var n,r,i;return Array.isArray(e)?(i=(n=_slicedToArray(e,2))[0],r=n[1]):(i=0,r=e),r&&("function"==typeof r||"object"==typeof r)&&t&&Object.defineProperty(r,"__source",{value:t,configurable:!0}),{flags:i,token:r,tokenKey:kn(r)}}))}function Fn(e,t,n){var r=n.renderParent;return r?0==(1&r.flags)||0==(33554432&r.flags)||r.element.componentRendererType&&r.element.componentRendererType.encapsulation===Oe.Native?fn(e,n.renderParent.nodeIndex).renderElement:void 0:t}var jn=new WeakMap;function Ln(e){var t=jn.get(e);return t||((t=e((function(){return mn}))).factory=e,jn.set(e,t)),t}function Vn(e,t,n,r,i){3===t&&(n=e.renderer.parentNode(On(e,e.def.lastRenderRootNode))),Bn(e,t,0,e.def.nodes.length-1,n,r,i)}function Bn(e,t,n,r,i,o,a){for(var s=n;s<=r;s++){var c=e.def.nodes[s];11&c.flags&&Hn(e,c,t,i,o,a),s+=c.childCount}}function zn(e,t,n,r,i,o){for(var a=e;a&&!Rn(a);)a=a.parent;for(var s=a.parent,c=In(a),l=c.nodeIndex+c.childCount,u=c.nodeIndex+1;u<=l;u++){var d=s.def.nodes[u];d.ngContentIndex===t&&Hn(s,d,n,r,i,o),u+=d.childCount}if(!s.parent){var f=e.root.projectableNodes[t];if(f)for(var h=0;h<f.length;h++)Un(e,f[h],n,r,i,o)}}function Hn(e,t,n,r,i,o){if(8&t.flags)zn(e,t.ngContent.index,n,r,i,o);else{var a=On(e,t);if(3===n&&33554432&t.flags&&48&t.bindingFlags?(16&t.bindingFlags&&Un(e,a,n,r,i,o),32&t.bindingFlags&&Un(fn(e,t.nodeIndex).componentView,a,n,r,i,o)):Un(e,a,n,r,i,o),16777216&t.flags)for(var s=fn(e,t.nodeIndex).viewContainer._embeddedViews,c=0;c<s.length;c++)Vn(s[c],n,r,i,o);1&t.flags&&!t.element.name&&Bn(e,n,t.nodeIndex+1,t.nodeIndex+t.childCount,r,i,o)}}function Un(e,t,n,r,i,o){var a=e.renderer;switch(n){case 1:a.appendChild(r,t);break;case 2:a.insertBefore(r,t,i);break;case 3:a.removeChild(r,t);break;case 0:o.push(t)}}var Wn=/^:([^:]+):(.+)$/;function qn(e){if(":"===e[0]){var t=e.match(Wn);return[t[1],t[2]]}return["",e]}function Yn(e){for(var t=0,n=0;n<e.length;n++)t|=e[n].flags;return t}var Gn=new Object,Jn=kn(ke),$n=kn(me),Kn=kn(It);function Qn(e,t,n,r){return n=se(n),{index:-1,deps:Dn(r,ie(t)),flags:e,token:t,value:n}}function Zn(e,t){var n,r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ke.THROW_IF_NOT_FOUND,o=pe(e);try{if(8&t.flags)return t.token;if(2&t.flags&&(i=null),1&t.flags)return e._parent.get(t.token,i);var a=t.tokenKey;switch(a){case Jn:case $n:case Kn:return e}var s,c=e._def.providersByKey[a];if(c){var l=e._providers[c.index];return void 0===l&&(l=e._providers[c.index]=Xn(e,c)),l===Gn?void 0:l}if((s=ne(t.token))&&(n=e,null!=(r=s).providedIn&&(function(e,t){return e._def.modules.indexOf(t)>-1}(n,r.providedIn)||"root"===r.providedIn&&n._def.isRoot))){var u=e._providers.length;return e._def.providers[u]=e._def.providersByKey[t.tokenKey]={flags:5120,value:s.factory,deps:[],index:u,token:t.token},e._providers[u]=Gn,e._providers[u]=Xn(e,e._def.providersByKey[t.tokenKey])}return 4&t.flags?i:e._parent.get(t.token,i)}finally{pe(o)}}function Xn(e,t){var n;switch(201347067&t.flags){case 512:n=function(e,t,n){var r=n.length;switch(r){case 0:return new t;case 1:return new t(Zn(e,n[0]));case 2:return new t(Zn(e,n[0]),Zn(e,n[1]));case 3:return new t(Zn(e,n[0]),Zn(e,n[1]),Zn(e,n[2]));default:for(var i=new Array(r),o=0;o<r;o++)i[o]=Zn(e,n[o]);return _construct(t,i)}}(e,t.value,t.deps);break;case 1024:n=function(e,t,n){var r=n.length;switch(r){case 0:return t();case 1:return t(Zn(e,n[0]));case 2:return t(Zn(e,n[0]),Zn(e,n[1]));case 3:return t(Zn(e,n[0]),Zn(e,n[1]),Zn(e,n[2]));default:for(var i=Array(r),o=0;o<r;o++)i[o]=Zn(e,n[o]);return t.apply(void 0,i)}}(e,t.value,t.deps);break;case 2048:n=Zn(e,t.deps[0]);break;case 256:n=t.value}return n===Gn||null===n||"object"!=typeof n||131072&t.flags||"function"!=typeof n.ngOnDestroy||(t.flags|=131072),void 0===n?Gn:n}function er(e,t){var n=e.viewContainer._embeddedViews;if((null==t||t>=n.length)&&(t=n.length-1),t<0)return null;var r=n[t];return r.viewContainerParent=null,ir(n,t),gn.dirtyParentQueries(r),nr(r),r}function tr(e,t,n){var r=t?On(t,t.def.lastRenderRootNode):e.renderElement,i=n.renderer.parentNode(r),o=n.renderer.nextSibling(r);Vn(n,2,i,o,void 0)}function nr(e){Vn(e,3,null,null,void 0)}function rr(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function ir(e,t){t>=e.length-1?e.pop():e.splice(t,1)}var or=new Object;function ar(e,t,n,r,i,o){return new sr(e,t,n,r,i,o)}var sr=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i,o,a,s){var c;return _classCallCheck(this,n),(c=t.call(this)).selector=e,c.componentType=r,c._inputs=o,c._outputs=a,c.ngContentSelectors=s,c.viewDefFactory=i,c}return _createClass(n,[{key:"inputs",get:function(){var e=[],t=this._inputs;for(var n in t)e.push({propName:n,templateName:t[n]});return e}},{key:"outputs",get:function(){var e=[];for(var t in this._outputs)e.push({propName:t,templateName:this._outputs[t]});return e}},{key:"create",value:function(e,t,n,r){if(!r)throw new Error("ngModule should be provided");var i=Ln(this.viewDefFactory),o=i.nodes[0].element.componentProvider.nodeIndex,a=gn.createRootView(e,t||[],n,i,r,or),s=hn(a,o).instance;return n&&a.renderer.setAttribute(fn(a,0).renderElement,"ng-version",jt.full),new cr(a,new fr(a),s)}}]),n}(wt),cr=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i){var o;return _classCallCheck(this,n),(o=t.call(this))._view=e,o._viewRef=r,o._component=i,o._elDef=o._view.def.nodes[0],o.hostView=r,o.changeDetectorRef=r,o.instance=i,o}return _createClass(n,[{key:"location",get:function(){return new Rt(fn(this._view,this._elDef.nodeIndex).renderElement)}},{key:"injector",get:function(){return new gr(this._view,this._elDef)}},{key:"componentType",get:function(){return this._component.constructor}},{key:"destroy",value:function(){this._viewRef.destroy()}},{key:"onDestroy",value:function(e){this._viewRef.onDestroy(e)}}]),n}(function(){return function e(){_classCallCheck(this,e)}}());function lr(e,t,n){return new ur(e,t,n)}var ur=function(){function e(t,n,r){_classCallCheck(this,e),this._view=t,this._elDef=n,this._data=r,this._embeddedViews=[]}return _createClass(e,[{key:"element",get:function(){return new Rt(this._data.renderElement)}},{key:"injector",get:function(){return new gr(this._view,this._elDef)}},{key:"parentInjector",get:function(){for(var e=this._view,t=this._elDef.parent;!t&&e;)t=In(e),e=e.parent;return e?new gr(e,t):new gr(this._view,null)}},{key:"clear",value:function(){for(var e=this._embeddedViews.length-1;e>=0;e--){var t=er(this._data,e);gn.destroyView(t)}}},{key:"get",value:function(e){var t=this._embeddedViews[e];if(t){var n=new fr(t);return n.attachToViewContainerRef(this),n}return null}},{key:"length",get:function(){return this._embeddedViews.length}},{key:"createEmbeddedView",value:function(e,t,n){var r=e.createEmbeddedView(t||{});return this.insert(r,n),r}},{key:"createComponent",value:function(e,t,n,r,i){var o=n||this.parentInjector;i||e instanceof Et||(i=o.get(It));var a=e.create(o,r,void 0,i);return this.insert(a.hostView,t),a}},{key:"insert",value:function(e,t){if(e.destroyed)throw new Error("Cannot insert a destroyed View in a ViewContainer!");var n,r,i,o,a,s=e;return n=this._view,r=this._data,i=t,o=s._view,a=r.viewContainer._embeddedViews,null==i&&(i=a.length),o.viewContainerParent=n,rr(a,i,o),function(e,t){var n=En(t);if(n&&n!==e&&!(16&t.state)){t.state|=16;var r=n.template._projectedViews;r||(r=n.template._projectedViews=[]),r.push(t),function(e,t){if(!(4&t.flags)){e.nodeFlags|=4,t.flags|=4;for(var n=t.parent;n;)n.childFlags|=4,n=n.parent}}(t.parent.def,t.parentNodeDef)}}(r,o),gn.dirtyParentQueries(o),tr(r,i>0?a[i-1]:null,o),s.attachToViewContainerRef(this),e}},{key:"move",value:function(e,t){if(e.destroyed)throw new Error("Cannot move a destroyed View in a ViewContainer!");var n,r,i,o,a,s=this._embeddedViews.indexOf(e._view);return n=this._data,r=s,i=t,o=n.viewContainer._embeddedViews,a=o[r],ir(o,r),null==i&&(i=o.length),rr(o,i,a),gn.dirtyParentQueries(a),nr(a),tr(n,i>0?o[i-1]:null,a),e}},{key:"indexOf",value:function(e){return this._embeddedViews.indexOf(e._view)}},{key:"remove",value:function(e){var t=er(this._data,e);t&&gn.destroyView(t)}},{key:"detach",value:function(e){var t=er(this._data,e);return t?new fr(t):null}}]),e}();function dr(e){return new fr(e)}var fr=function(){function e(t){_classCallCheck(this,e),this._view=t,this._viewContainerRef=null,this._appRef=null}return _createClass(e,[{key:"rootNodes",get:function(){return Vn(this._view,0,void 0,void 0,e=[]),e;var e}},{key:"context",get:function(){return this._view.context}},{key:"destroyed",get:function(){return 0!=(128&this._view.state)}},{key:"markForCheck",value:function(){Tn(this._view)}},{key:"detach",value:function(){this._view.state&=-5}},{key:"detectChanges",value:function(){var e=this._view.root.rendererFactory;e.begin&&e.begin();try{gn.checkAndUpdateView(this._view)}finally{e.end&&e.end()}}},{key:"checkNoChanges",value:function(){gn.checkNoChangesView(this._view)}},{key:"reattach",value:function(){this._view.state|=4}},{key:"onDestroy",value:function(e){this._view.disposables||(this._view.disposables=[]),this._view.disposables.push(e)}},{key:"destroy",value:function(){this._appRef?this._appRef.detachView(this):this._viewContainerRef&&this._viewContainerRef.detach(this._viewContainerRef.indexOf(this)),gn.destroyView(this._view)}},{key:"detachFromAppRef",value:function(){this._appRef=null,nr(this._view),gn.dirtyParentQueries(this._view)}},{key:"attachToAppRef",value:function(e){if(this._viewContainerRef)throw new Error("This view is already attached to a ViewContainer!");this._appRef=e}},{key:"attachToViewContainerRef",value:function(e){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._viewContainerRef=e}}]),e}();function hr(e,t){return new pr(e,t)}var pr=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var i;return _classCallCheck(this,n),(i=t.call(this))._parentView=e,i._def=r,i}return _createClass(n,[{key:"createEmbeddedView",value:function(e){return new fr(gn.createEmbeddedView(this._parentView,this._def,this._def.element.template,e))}},{key:"elementRef",get:function(){return new Rt(fn(this._parentView,this._def.nodeIndex).renderElement)}}]),n}(tn);function vr(e,t){return new gr(e,t)}var gr=function(){function e(t,n){_classCallCheck(this,e),this.view=t,this.elDef=n}return _createClass(e,[{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ke.THROW_IF_NOT_FOUND;return gn.resolveDep(this.view,this.elDef,!!this.elDef&&0!=(33554432&this.elDef.flags),{flags:0,token:e,tokenKey:kn(e)},t)}}]),e}();function mr(e){return new yr(e.renderer)}var yr=function(){function e(t){_classCallCheck(this,e),this.delegate=t}return _createClass(e,[{key:"selectRootElement",value:function(e){return this.delegate.selectRootElement(e)}},{key:"createElement",value:function(e,t){var n=_slicedToArray(qn(t),2),r=n[0],i=n[1],o=this.delegate.createElement(i,r);return e&&this.delegate.appendChild(e,o),o}},{key:"createViewRoot",value:function(e){return e}},{key:"createTemplateAnchor",value:function(e){var t=this.delegate.createComment("");return e&&this.delegate.appendChild(e,t),t}},{key:"createText",value:function(e,t){var n=this.delegate.createText(t);return e&&this.delegate.appendChild(e,n),n}},{key:"projectNodes",value:function(e,t){for(var n=0;n<t.length;n++)this.delegate.appendChild(e,t[n])}},{key:"attachViewAfter",value:function(e,t){for(var n=this.delegate.parentNode(e),r=this.delegate.nextSibling(e),i=0;i<t.length;i++)this.delegate.insertBefore(n,t[i],r)}},{key:"detachView",value:function(e){for(var t=0;t<e.length;t++){var n=e[t],r=this.delegate.parentNode(n);this.delegate.removeChild(r,n)}}},{key:"destroyView",value:function(e,t){for(var n=0;n<t.length;n++)this.delegate.destroyNode(t[n])}},{key:"listen",value:function(e,t,n){return this.delegate.listen(e,t,n)}},{key:"listenGlobal",value:function(e,t,n){return this.delegate.listen(e,t,n)}},{key:"setElementProperty",value:function(e,t,n){this.delegate.setProperty(e,t,n)}},{key:"setElementAttribute",value:function(e,t,n){var r=_slicedToArray(qn(t),2),i=r[0],o=r[1];null!=n?this.delegate.setAttribute(e,o,n,i):this.delegate.removeAttribute(e,o,i)}},{key:"setBindingDebugInfo",value:function(e,t,n){}},{key:"setElementClass",value:function(e,t,n){n?this.delegate.addClass(e,t):this.delegate.removeClass(e,t)}},{key:"setElementStyle",value:function(e,t,n){null!=n?this.delegate.setStyle(e,t,n):this.delegate.removeStyle(e,t)}},{key:"invokeElementMethod",value:function(e,t,n){e[t].apply(e,n)}},{key:"setText",value:function(e,t){this.delegate.setValue(e,t)}},{key:"animate",value:function(){throw new Error("Renderer.animate is no longer supported!")}}]),e}();function kr(e,t,n,r){return new _r(e,t,n,r)}var _r=function(){function e(t,n,r,i){_classCallCheck(this,e),this._moduleType=t,this._parent=n,this._bootstrapComponents=r,this._def=i,this._destroyListeners=[],this._destroyed=!1,this.injector=this,function(e){for(var t=e._def,n=e._providers=new Array(t.providers.length),r=0;r<t.providers.length;r++){var i=t.providers[r];4096&i.flags||void 0===n[r]&&(n[r]=Xn(e,i))}}(this)}return _createClass(e,[{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ke.THROW_IF_NOT_FOUND,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:X.Default,r=0;return n&X.SkipSelf?r|=1:n&X.Self&&(r|=4),Zn(this,{token:e,tokenKey:kn(e),flags:r},t)}},{key:"instance",get:function(){return this.get(this._moduleType)}},{key:"componentFactoryResolver",get:function(){return this.get(At)}},{key:"destroy",value:function(){if(this._destroyed)throw new Error("The ng module ".concat(ie(this.instance.constructor)," has already been destroyed."));this._destroyed=!0,function(e,t){for(var n=e._def,r=new Set,i=0;i<n.providers.length;i++)if(131072&n.providers[i].flags){var o=e._providers[i];if(o&&o!==Gn){var a=o.ngOnDestroy;"function"!=typeof a||r.has(o)||(a.apply(o),r.add(o))}}}(this),this._destroyListeners.forEach((function(e){return e()}))}},{key:"onDestroy",value:function(e){this._destroyListeners.push(e)}}]),e}(),br=kn((function e(){_classCallCheck(this,e)})),wr=kn(Dt),xr=kn(Rt),Cr=kn(rn),Tr=kn(tn),Ar=kn(Kt),Sr=kn(ke),Er=kn(me);function Ir(e,t,n,r,i,o,a,s){var c=[];if(a)for(var l in a){var u=_slicedToArray(a[l],2),d=u[0],f=u[1];c[d]={flags:8,name:l,nonMinifiedName:f,ns:null,securityContext:null,suffix:null}}var h=[];if(s)for(var p in s)h.push({type:1,propName:p,target:null,eventName:s[p]});return Or(e,t|=16384,n,r,i,i,o,c,h)}function Or(e,t,n,r,i,o,a,s,c){var l=Nn(n),u=l.matchedQueries,d=l.references,f=l.matchedQueryIds;c||(c=[]),s||(s=[]),o=se(o);var h=Dn(a,ie(i));return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:e,flags:t,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:u,matchedQueryIds:f,references:d,ngContentIndex:-1,childCount:r,bindings:s,bindingFlags:Yn(s),outputs:c,element:null,provider:{token:i,value:o,deps:h},text:null,query:null,ngContent:null}}function Rr(e,t){return Dr(e,t)}function Pr(e,t){for(var n=e;n.parent&&!Rn(n);)n=n.parent;return Fr(n.parent,In(n),!0,t.provider.value,t.provider.deps)}function Mr(e,t){var n,r=Fr(e,t.parent,(32768&t.flags)>0,t.provider.value,t.provider.deps);if(t.outputs.length)for(var i=0;i<t.outputs.length;i++){var o=t.outputs[i],a=r[o.propName];if(!(n=a)||"function"!=typeof n.subscribe)throw new Error("@Output ".concat(o.propName," not initialized in '").concat(r.constructor.name,"'."));var s=a.subscribe(Nr(e,t.parent.nodeIndex,o.eventName));e.disposables[t.outputIndex+i]=s.unsubscribe.bind(s)}return r}function Nr(e,t,n){return function(r){return Sn(e,t,n,r)}}function Dr(e,t){var n=(8192&t.flags)>0,r=t.provider;switch(201347067&t.flags){case 512:return Fr(e,t.parent,n,r.value,r.deps);case 1024:return function(e,t,n,r,i){var o=i.length;switch(o){case 0:return r();case 1:return r(Lr(e,t,n,i[0]));case 2:return r(Lr(e,t,n,i[0]),Lr(e,t,n,i[1]));case 3:return r(Lr(e,t,n,i[0]),Lr(e,t,n,i[1]),Lr(e,t,n,i[2]));default:for(var a=Array(o),s=0;s<o;s++)a[s]=Lr(e,t,n,i[s]);return r.apply(void 0,a)}}(e,t.parent,n,r.value,r.deps);case 2048:return Lr(e,t.parent,n,r.deps[0]);case 256:return r.value}}function Fr(e,t,n,r,i){var o=i.length;switch(o){case 0:return new r;case 1:return new r(Lr(e,t,n,i[0]));case 2:return new r(Lr(e,t,n,i[0]),Lr(e,t,n,i[1]));case 3:return new r(Lr(e,t,n,i[0]),Lr(e,t,n,i[1]),Lr(e,t,n,i[2]));default:for(var a=new Array(o),s=0;s<o;s++)a[s]=Lr(e,t,n,i[s]);return _construct(r,a)}}var jr={};function Lr(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:ke.THROW_IF_NOT_FOUND;if(8&r.flags)return r.token;var o=e;2&r.flags&&(i=null);var a=r.tokenKey;a===Ar&&(n=!(!t||!t.element.componentView)),t&&1&r.flags&&(n=!1,t=t.parent);for(var s=e;s;){if(t)switch(a){case br:return mr(Vr(s,t,n));case wr:return Vr(s,t,n).renderer;case xr:return new Rt(fn(s,t.nodeIndex).renderElement);case Cr:return fn(s,t.nodeIndex).viewContainer;case Tr:if(t.element.template)return fn(s,t.nodeIndex).template;break;case Ar:return dr(Vr(s,t,n));case Sr:case Er:return vr(s,t);default:var c=(n?t.element.allProviders:t.element.publicProviders)[a];if(c){var l=hn(s,c.nodeIndex);return l||(l={instance:Dr(s,c)},s.nodes[c.nodeIndex]=l),l.instance}}n=Rn(s),t=In(s),s=s.parent,4&r.flags&&(s=null)}var u=o.root.injector.get(r.token,jr);return u!==jr||i===jr?u:o.root.ngModule.injector.get(r.token,i)}function Vr(e,t,n){var r;if(n)r=fn(e,t.nodeIndex).componentView;else for(r=e;r.parent&&!Rn(r);)r=r.parent;return r}function Br(e,t,n,r,i,o){if(32768&n.flags){var a=fn(e,n.parent.nodeIndex).componentView;2&a.def.flags&&(a.state|=8)}if(t.instance[n.bindings[r].name]=i,524288&n.flags){o=o||{};var s=mt.unwrap(e.oldValues[n.bindingIndex+r]);o[n.bindings[r].nonMinifiedName]=new _t(s,i,0!=(2&e.state))}return e.oldValues[n.bindingIndex+r]=i,o}function zr(e,t){if(e.def.nodeFlags&t)for(var n=e.def.nodes,r=0,i=0;i<n.length;i++){var o=n[i],a=o.parent;for(!a&&o.flags&t&&Ur(e,i,o.flags&t,r++),0==(o.childFlags&t)&&(i+=o.childCount);a&&1&a.flags&&i===a.nodeIndex+a.childCount;)a.directChildFlags&t&&(r=Hr(e,a,t,r)),a=a.parent}}function Hr(e,t,n,r){for(var i=t.nodeIndex+1;i<=t.nodeIndex+t.childCount;i++){var o=e.def.nodes[i];o.flags&n&&Ur(e,i,o.flags&n,r++),i+=o.childCount}return r}function Ur(e,t,n,r){var i=hn(e,t);if(i){var o=i.instance;o&&(gn.setCurrentNode(e,t),1048576&n&&un(e,512,r)&&o.ngAfterContentInit(),2097152&n&&o.ngAfterContentChecked(),4194304&n&&un(e,768,r)&&o.ngAfterViewInit(),8388608&n&&o.ngAfterViewChecked(),131072&n&&o.ngOnDestroy())}}var Wr=new ve("SCHEDULER_TOKEN",{providedIn:"root",factory:function(){return Re}}),qr=function(e){_inherits(n,e);var t=_createSuper(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return _classCallCheck(this,n),(e=t.call(this)).__isAsync=r,e}return _createClass(n,[{key:"emit",value:function(e){_get3(_getPrototypeOf(n.prototype),"next",this).call(this,e)}},{key:"subscribe",value:function(e,t,r){var i,o=function(e){return null},a=function(){return null};e&&"object"==typeof e?(i=this.__isAsync?function(t){setTimeout((function(){return e.next(t)}))}:function(t){e.next(t)},e.error&&(o=this.__isAsync?function(t){setTimeout((function(){return e.error(t)}))}:function(t){e.error(t)}),e.complete&&(a=this.__isAsync?function(){setTimeout((function(){return e.complete()}))}:function(){e.complete()})):(i=this.__isAsync?function(t){setTimeout((function(){return e(t)}))}:function(t){e(t)},t&&(o=this.__isAsync?function(e){setTimeout((function(){return t(e)}))}:function(e){t(e)}),r&&(a=this.__isAsync?function(){setTimeout((function(){return r()}))}:function(){r()}));var s=_get3(_getPrototypeOf(n.prototype),"subscribe",this).call(this,i,o,a);return e instanceof h&&e.add(s),s}}]),n}(E),Yr=function(){function e(){_classCallCheck(this,e),this.dirty=!0,this._results=[],this.changes=new qr,this.length=0}return _createClass(e,[{key:"map",value:function(e){return this._results.map(e)}},{key:"filter",value:function(e){return this._results.filter(e)}},{key:"find",value:function(e){return this._results.find(e)}},{key:"reduce",value:function(e,t){return this._results.reduce(e,t)}},{key:"forEach",value:function(e){this._results.forEach(e)}},{key:"some",value:function(e){return this._results.some(e)}},{key:"toArray",value:function(){return this._results.slice()}},{key:pt(),value:function(){return this._results[pt()]()}},{key:"toString",value:function(){return this._results.toString()}},{key:"reset",value:function(e){this._results=function e(t,n){void 0===n&&(n=t);for(var r=0;r<t.length;r++){var i=t[r];Array.isArray(i)?(n===t&&(n=t.slice(0,r)),e(i,n)):n!==t&&n.push(i)}return n}(e),this.dirty=!1,this.length=this._results.length,this.last=this._results[this.length-1],this.first=this._results[0]}},{key:"notifyOnChanges",value:function(){this.changes.emit(this)}},{key:"setDirty",value:function(){this.dirty=!0}},{key:"destroy",value:function(){this.changes.complete(),this.changes.unsubscribe()}}]),e}(),Gr=new ve("Application Initializer"),Jr=function(){function e(t){var n=this;_classCallCheck(this,e),this.appInits=t,this.initialized=!1,this.done=!1,this.donePromise=new Promise((function(e,t){n.resolve=e,n.reject=t}))}return _createClass(e,[{key:"runInitializers",value:function(){var e=this;if(!this.initialized){var t=[],n=function(){e.done=!0,e.resolve()};if(this.appInits)for(var r=0;r<this.appInits.length;r++){var i=this.appInits[r]();ft(i)&&t.push(i)}Promise.all(t).then((function(){n()})).catch((function(t){e.reject(t)})),0===t.length&&n(),this.initialized=!0}}}]),e}(),$r=new ve("AppId");function Kr(){return"".concat(Qr()).concat(Qr()).concat(Qr())}function Qr(){return String.fromCharCode(97+Math.floor(25*Math.random()))}var Zr=new ve("Platform Initializer"),Xr=new ve("Platform ID"),ei=new ve("appBootstrapListener"),ti=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"log",value:function(e){console.log(e)}},{key:"warn",value:function(e){console.warn(e)}}]),e}();function ni(){throw new Error("Runtime compiler is not loaded")}var ri,ii,oi=ni,ai=ni,si=ni,ci=ni,li=function(){function e(){_classCallCheck(this,e),this.compileModuleSync=oi,this.compileModuleAsync=ai,this.compileModuleAndAllComponentsSync=si,this.compileModuleAndAllComponentsAsync=ci}return _createClass(e,[{key:"clearCache",value:function(){}},{key:"clearCacheFor",value:function(e){}},{key:"getModuleId",value:function(e){}}]),e}(),ui=function e(){_classCallCheck(this,e)};var di,fi=!(!(di=fe.wtf)||(ri=di.trace,!ri)||(ii=ri.events,0));function hi(e,t){return null}var pi=fi?function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return ii.createScope(e,t)}:function(e,t){return hi},vi=fi?function(e,t){return ri.leaveScope(e,t),t}:function(e,t){return t},gi=Promise.resolve(0);function mi(e){"undefined"==typeof Zone?gi.then((function(){e&&e.apply(null,null)})):Zone.current.scheduleMicroTask("scheduleMicrotask",e)}var yi=function(){function e(t){var n,r=t.enableLongStackTrace,i=void 0!==r&&r;if(_classCallCheck(this,e),this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new qr(!1),this.onMicrotaskEmpty=new qr(!1),this.onStable=new qr(!1),this.onError=new qr(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched(),this._nesting=0,this._outer=this._inner=Zone.current,Zone.wtfZoneSpec&&(this._inner=this._inner.fork(Zone.wtfZoneSpec)),Zone.TaskTrackingZoneSpec&&(this._inner=this._inner.fork(new Zone.TaskTrackingZoneSpec)),i&&Zone.longStackTraceZoneSpec&&(this._inner=this._inner.fork(Zone.longStackTraceZoneSpec)),(n=this)._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:function(e,t,r,i,o,a){try{return wi(n),e.invokeTask(r,i,o,a)}finally{xi(n)}},onInvoke:function(e,t,r,i,o,a,s){try{return wi(n),e.invoke(r,i,o,a,s)}finally{xi(n)}},onHasTask:function(e,t,r,i){e.hasTask(r,i),t===r&&("microTask"==i.change?(n.hasPendingMicrotasks=i.microTask,bi(n)):"macroTask"==i.change&&(n.hasPendingMacrotasks=i.macroTask))},onHandleError:function(e,t,r,i){return e.handleError(r,i),n.runOutsideAngular((function(){return n.onError.emit(i)})),!1}})}return _createClass(e,[{key:"run",value:function(e,t,n){return this._inner.run(e,t,n)}},{key:"runTask",value:function(e,t,n,r){var i=this._inner,o=i.scheduleEventTask("NgZoneEvent: "+r,e,_i,ki,ki);try{return i.runTask(o,t,n)}finally{i.cancelTask(o)}}},{key:"runGuarded",value:function(e,t,n){return this._inner.runGuarded(e,t,n)}},{key:"runOutsideAngular",value:function(e){return this._outer.run(e)}}],[{key:"isInAngularZone",value:function(){return!0===Zone.current.get("isAngularZone")}},{key:"assertInAngularZone",value:function(){if(!e.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}},{key:"assertNotInAngularZone",value:function(){if(e.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}}]),e}();function ki(){}var _i={};function bi(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular((function(){return e.onStable.emit(null)}))}finally{e.isStable=!0}}}function wi(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function xi(e){e._nesting--,bi(e)}var Ci,Ti=function(){function e(){_classCallCheck(this,e),this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new qr,this.onMicrotaskEmpty=new qr,this.onStable=new qr,this.onError=new qr}return _createClass(e,[{key:"run",value:function(e){return e()}},{key:"runGuarded",value:function(e){return e()}},{key:"runOutsideAngular",value:function(e){return e()}},{key:"runTask",value:function(e){return e()}}]),e}(),Ai=function(){function e(t){var n=this;_classCallCheck(this,e),this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run((function(){n.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")}))}return _createClass(e,[{key:"_watchAngularEvents",value:function(){var e=this;this._ngZone.onUnstable.subscribe({next:function(){e._didWork=!0,e._isZoneStable=!1}}),this._ngZone.runOutsideAngular((function(){e._ngZone.onStable.subscribe({next:function(){yi.assertNotInAngularZone(),mi((function(){e._isZoneStable=!0,e._runCallbacksIfReady()}))}})}))}},{key:"increasePendingRequestCount",value:function(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}},{key:"decreasePendingRequestCount",value:function(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}},{key:"isStable",value:function(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}},{key:"_runCallbacksIfReady",value:function(){var e=this;if(this.isStable())mi((function(){for(;0!==e._callbacks.length;){var t=e._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(e._didWork)}e._didWork=!1}));else{var t=this.getPendingTasks();this._callbacks=this._callbacks.filter((function(e){return!e.updateCb||!e.updateCb(t)||(clearTimeout(e.timeoutId),!1)})),this._didWork=!0}}},{key:"getPendingTasks",value:function(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map((function(e){return{source:e.source,creationLocation:e.creationLocation,data:e.data}})):[]}},{key:"addCallback",value:function(e,t,n){var r=this,i=-1;t&&t>0&&(i=setTimeout((function(){r._callbacks=r._callbacks.filter((function(e){return e.timeoutId!==i})),e(r._didWork,r.getPendingTasks())}),t)),this._callbacks.push({doneCb:e,timeoutId:i,updateCb:n})}},{key:"whenStable",value:function(e,t,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/dist/task-tracking.js" loaded?');this.addCallback(e,t,n),this._runCallbacksIfReady()}},{key:"getPendingRequestCount",value:function(){return this._pendingCount}},{key:"findProviders",value:function(e,t,n){return[]}}]),e}(),Si=function(){function e(){_classCallCheck(this,e),this._applications=new Map,Ei.addToWindow(this)}return _createClass(e,[{key:"registerApplication",value:function(e,t){this._applications.set(e,t)}},{key:"unregisterApplication",value:function(e){this._applications.delete(e)}},{key:"unregisterAllApplications",value:function(){this._applications.clear()}},{key:"getTestability",value:function(e){return this._applications.get(e)||null}},{key:"getAllTestabilities",value:function(){return Array.from(this._applications.values())}},{key:"getAllRootElements",value:function(){return Array.from(this._applications.keys())}},{key:"findTestabilityInTree",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return Ei.findTestabilityInTree(this,e,t)}}]),e}(),Ei=new(function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"addToWindow",value:function(e){}},{key:"findTestabilityInTree",value:function(e,t,n){return null}}]),e}()),Ii=new ve("AllowMultipleToken"),Oi=function e(t,n){_classCallCheck(this,e),this.name=t,this.token=n};function Ri(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r="Platform: "+t,i=new ve(r);return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],o=Pi();if(!o||o.injector.get(Ii,!1))if(e)e(n.concat(t).concat({provide:i,useValue:!0}));else{var a=n.concat(t).concat({provide:i,useValue:!0});!function(e){if(Ci&&!Ci.destroyed&&!Ci.injector.get(Ii,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");Ci=e.get(Mi);var t=e.get(Zr,null);t&&t.forEach((function(e){return e()}))}(ke.create({providers:a,name:r}))}return function(e){var t=Pi();if(!t)throw new Error("No platform exists!");if(!t.injector.get(e,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return t}(i)}}function Pi(){return Ci&&!Ci.destroyed?Ci:null}var Mi=function(){function e(t){_classCallCheck(this,e),this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}return _createClass(e,[{key:"bootstrapModuleFactory",value:function(e,t){var n,r=this,i="noop"===(n=t?t.ngZone:void 0)?new Ti:("zone.js"===n?void 0:n)||new yi({enableLongStackTrace:Le()}),o=[{provide:yi,useValue:i}];return i.run((function(){var t=ke.create({providers:o,parent:r.injector,name:e.moduleType.name}),n=e.create(t),a=n.injector.get(De,null);if(!a)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return n.onDestroy((function(){return ji(r._modules,n)})),i.runOutsideAngular((function(){return i.onError.subscribe({next:function(e){a.handleError(e)}})})),function(e,t,i){try{var o=((a=n.injector.get(Jr)).runInitializers(),a.donePromise.then((function(){return r._moduleDoBootstrap(n),n})));return ft(o)?o.catch((function(n){throw t.runOutsideAngular((function(){return e.handleError(n)})),n})):o}catch(s){throw t.runOutsideAngular((function(){return e.handleError(s)})),s}var a}(a,i)}))}},{key:"bootstrapModule",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=Ni({},n);return function(e,t,n){return e.get(ui).createCompiler([t]).compileModuleAsync(n)}(this.injector,r,e).then((function(e){return t.bootstrapModuleFactory(e,r)}))}},{key:"_moduleDoBootstrap",value:function(e){var t=e.injector.get(Fi);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach((function(e){return t.bootstrap(e)}));else{if(!e.instance.ngDoBootstrap)throw new Error("The module ".concat(ie(e.instance.constructor),' was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.'));e.instance.ngDoBootstrap(t)}this._modules.push(e)}},{key:"onDestroy",value:function(e){this._destroyListeners.push(e)}},{key:"injector",get:function(){return this._injector}},{key:"destroy",value:function(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach((function(e){return e.destroy()})),this._destroyListeners.forEach((function(e){return e()})),this._destroyed=!0}},{key:"destroyed",get:function(){return this._destroyed}}]),e}();function Ni(e,t){return Array.isArray(t)?t.reduce(Ni,e):Object.assign({},e,t)}var Di,Fi=((Di=function(){function e(t,n,r,i,o,a){var s=this;_classCallCheck(this,e),this._zone=t,this._console=n,this._injector=r,this._exceptionHandler=i,this._componentFactoryResolver=o,this._initStatus=a,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._enforceNoNewChanges=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._enforceNoNewChanges=Le(),this._zone.onMicrotaskEmpty.subscribe({next:function(){s._zone.run((function(){s.tick()}))}});var c=new b((function(e){s._stable=s._zone.isStable&&!s._zone.hasPendingMacrotasks&&!s._zone.hasPendingMicrotasks,s._zone.runOutsideAngular((function(){e.next(s._stable),e.complete()}))})),l=new b((function(e){var t;s._zone.runOutsideAngular((function(){t=s._zone.onStable.subscribe((function(){yi.assertNotInAngularZone(),mi((function(){s._stable||s._zone.hasPendingMacrotasks||s._zone.hasPendingMicrotasks||(s._stable=!0,e.next(!0))}))}))}));var n=s._zone.onUnstable.subscribe((function(){yi.assertInAngularZone(),s._stable&&(s._stable=!1,s._zone.runOutsideAngular((function(){e.next(!1)})))}));return function(){t.unsubscribe(),n.unsubscribe()}}));this.isStable=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r,i=Number.POSITIVE_INFINITY,o=null,a=t[t.length-1];return(r=a)&&"function"==typeof r.schedule?(o=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(i=t.pop())):"number"==typeof a&&(i=t.pop()),null===o&&1===t.length&&t[0]instanceof b?t[0]:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Number.POSITIVE_INFINITY;return function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.POSITIVE_INFINITY;return"function"==typeof n?function(i){return i.pipe(e((function(e,r){return(i=t(e,r),i instanceof b?i:new b(M(i))).pipe(function(e,t){return function(t){return t.lift(new D(e,void 0))}}((function(t,i){return n(e,t,r,i)})));var i}),r))}:("number"==typeof n&&(r=n),function(e){return e.lift(new L(t,r))})}(B,e)}(i)(j(t,o))}(c,l.pipe((function(e){return z()((t=G,function(e){var n;n="function"==typeof t?t:function(){return t};var r=Object.create(e,q);return r.source=e,r.subjectFactory=n,r})(e));var t})))}return _createClass(e,[{key:"bootstrap",value:function(e,t){var n,r=this;if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");n=e instanceof wt?e:this._componentFactoryResolver.resolveComponentFactory(e),this.componentTypes.push(n.componentType);var i=n instanceof Et?null:this._injector.get(It),o=n.create(ke.NULL,[],t||n.selector,i);o.onDestroy((function(){r._unloadComponent(o)}));var a=o.injector.get(Ai,null);return a&&o.injector.get(Si).registerApplication(o.location.nativeElement,a),this._loadComponent(o),Le()&&this._console.log("Angular is running in the development mode. Call enableProdMode() to enable the production mode."),o}},{key:"tick",value:function(){var t=this;if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");var n=e._tickScope();try{this._runningTick=!0;var r,i=_createForOfIteratorHelper(this._views);try{for(i.s();!(r=i.n()).done;)r.value.detectChanges()}catch(s){i.e(s)}finally{i.f()}if(this._enforceNoNewChanges){var o,a=_createForOfIteratorHelper(this._views);try{for(a.s();!(o=a.n()).done;)o.value.checkNoChanges()}catch(s){a.e(s)}finally{a.f()}}}catch(c){this._zone.runOutsideAngular((function(){return t._exceptionHandler.handleError(c)}))}finally{this._runningTick=!1,vi(n)}}},{key:"attachView",value:function(e){var t=e;this._views.push(t),t.attachToAppRef(this)}},{key:"detachView",value:function(e){var t=e;ji(this._views,t),t.detachFromAppRef()}},{key:"_loadComponent",value:function(e){this.attachView(e.hostView),this.tick(),this.components.push(e),this._injector.get(ei,[]).concat(this._bootstrapListeners).forEach((function(t){return t(e)}))}},{key:"_unloadComponent",value:function(e){this.detachView(e.hostView),ji(this.components,e)}},{key:"ngOnDestroy",value:function(){this._views.slice().forEach((function(e){return e.destroy()}))}},{key:"viewCount",get:function(){return this._views.length}}]),e}())._tickScope=pi("ApplicationRef#tick()"),Di);function ji(e,t){var n=e.indexOf(t);n>-1&&e.splice(n,1)}var Li=function e(t,n){_classCallCheck(this,e),this.name=t,this.callback=n},Vi=function(){function e(t,n,r){_classCallCheck(this,e),this.listeners=[],this.parent=null,this._debugContext=r,this.nativeNode=t,n&&n instanceof Bi&&n.addChild(this)}return _createClass(e,[{key:"injector",get:function(){return this._debugContext.injector}},{key:"componentInstance",get:function(){return this._debugContext.component}},{key:"context",get:function(){return this._debugContext.context}},{key:"references",get:function(){return this._debugContext.references}},{key:"providerTokens",get:function(){return this._debugContext.providerTokens}}]),e}(),Bi=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i){var o;return _classCallCheck(this,n),(o=t.call(this,e,r,i)).properties={},o.attributes={},o.classes={},o.styles={},o.childNodes=[],o.nativeElement=e,o}return _createClass(n,[{key:"addChild",value:function(e){e&&(this.childNodes.push(e),e.parent=this)}},{key:"removeChild",value:function(e){var t=this.childNodes.indexOf(e);-1!==t&&(e.parent=null,this.childNodes.splice(t,1))}},{key:"insertChildrenAfter",value:function(e,t){var n,r=this,i=this.childNodes.indexOf(e);-1!==i&&((n=this.childNodes).splice.apply(n,[i+1,0].concat(_toConsumableArray(t))),t.forEach((function(t){t.parent&&t.parent.removeChild(t),e.parent=r})))}},{key:"insertBefore",value:function(e,t){var n=this.childNodes.indexOf(e);-1===n?this.addChild(t):(t.parent&&t.parent.removeChild(t),t.parent=this,this.childNodes.splice(n,0,t))}},{key:"query",value:function(e){return this.queryAll(e)[0]||null}},{key:"queryAll",value:function(e){var t=[];return function e(t,r,i){t.childNodes.forEach((function(t){t instanceof n&&(r(t)&&i.push(t),e(t,r,i))}))}(this,e,t),t}},{key:"queryAllNodes",value:function(e){var t=[];return function e(t,r,i){t instanceof n&&t.childNodes.forEach((function(t){r(t)&&i.push(t),t instanceof n&&e(t,r,i)}))}(this,e,t),t}},{key:"children",get:function(){return this.childNodes.filter((function(e){return e instanceof n}))}},{key:"triggerEventHandler",value:function(e,t){this.listeners.forEach((function(n){n.name==e&&n.callback(t)}))}}]),n}(Vi),zi=new Map,Hi=function(e){return zi.get(e)||null};function Ui(e){zi.set(e.nativeNode,e)}var Wi=Ri(null,"core",[{provide:Xr,useValue:"unknown"},{provide:Mi,deps:[ke]},{provide:Si,deps:[]},{provide:ti,deps:[]}]),qi=new ve("LocaleId");function Yi(){return Xt}function Gi(){return en}function Ji(e){return e||"en-US"}function $i(e){var t=[];return e.onStable.subscribe((function(){for(;t.length;)t.pop()()})),function(e){t.push(e)}}var Ki=function e(t){_classCallCheck(this,e)};function Qi(e,t,n,r,i,o){e|=1;var a=Nn(t),s=a.matchedQueries,c=a.references;return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,flags:e,checkIndex:-1,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:s,matchedQueryIds:a.matchedQueryIds,references:c,ngContentIndex:n,childCount:r,bindings:[],bindingFlags:0,outputs:[],element:{ns:null,name:null,attrs:null,template:o?Ln(o):null,componentProvider:null,componentView:null,componentRendererType:null,publicProviders:null,allProviders:null,handleEvent:i||mn},provider:null,text:null,query:null,ngContent:null}}function Zi(e,t,n,r,i,o){var a,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:[],c=arguments.length>7?arguments[7]:void 0,l=arguments.length>8?arguments[8]:void 0,u=arguments.length>9?arguments[9]:void 0,d=arguments.length>10?arguments[10]:void 0,f=arguments.length>11?arguments[11]:void 0;u||(u=mn);var h=Nn(n),p=h.matchedQueries,v=h.references,g=h.matchedQueryIds,m=null,y=null;o&&(m=(a=_slicedToArray(qn(o),2))[0],y=a[1]),c=c||[];for(var k=new Array(c.length),_=0;_<c.length;_++){var b=_slicedToArray(c[_],3),w=b[0],x=b[1],C=b[2],T=qn(x),A=_slicedToArray(T,2),S=A[0],E=A[1],I=void 0,O=void 0;switch(15&w){case 4:O=C;break;case 1:case 8:I=C}k[_]={flags:w,ns:S,name:E,nonMinifiedName:E,securityContext:I,suffix:O}}l=l||[];for(var R=new Array(l.length),P=0;P<l.length;P++){var M=_slicedToArray(l[P],2),N=M[0],D=M[1];R[P]={type:0,target:N,eventName:D,propName:null}}var F=(s=s||[]).map((function(e){var t=_slicedToArray(e,2),n=t[0],r=t[1],i=_slicedToArray(qn(n),2);return[i[0],i[1],r]}));return f=function(e){if(e&&"$$undefined"===e.id){var t=null!=e.encapsulation&&e.encapsulation!==Oe.None||e.styles.length||Object.keys(e.data).length;e.id=t?"c"+bn++:"$$empty"}return e&&"$$empty"===e.id&&(e=null),e||null}(f),d&&(t|=33554432),{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:e,flags:t|=1,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:p,matchedQueryIds:g,references:v,ngContentIndex:r,childCount:i,bindings:k,bindingFlags:Yn(k),outputs:R,element:{ns:m,name:y,attrs:F,template:null,componentProvider:null,componentView:d||null,componentRendererType:f,publicProviders:null,allProviders:null,handleEvent:u||mn},provider:null,text:null,query:null,ngContent:null}}function Xi(e,t,n){var r,i=n.element,o=e.root.selectorOrNode,a=e.renderer;if(e.parent||!o){r=i.name?a.createElement(i.name,i.ns):a.createComment("");var s=Fn(e,t,n);s&&a.appendChild(s,r)}else r=a.selectRootElement(o,!!i.componentRendererType&&i.componentRendererType.encapsulation===Oe.ShadowDom);if(i.attrs)for(var c=0;c<i.attrs.length;c++){var l=_slicedToArray(i.attrs[c],3),u=l[0],d=l[1],f=l[2];a.setAttribute(r,d,f,u)}return r}function eo(e,t,n,r){for(var i=0;i<n.outputs.length;i++){var o=n.outputs[i],a=to(e,n.nodeIndex,(d=o.eventName,(u=o.target)?"".concat(u,":").concat(d):d)),s=o.target,c=e;"component"===o.target&&(s=null,c=t);var l=c.renderer.listen(s||r,o.eventName,a);e.disposables[n.outputIndex+i]=l}var u,d}function to(e,t,n){return function(r){return Sn(e,t,n,r)}}function no(e,t,n,r){if(!xn(e,t,n,r))return!1;var i=t.bindings[n],o=fn(e,t.nodeIndex),a=o.renderElement,s=i.name;switch(15&i.flags){case 1:!function(e,t,n,r,i,o){var a=t.securityContext,s=a?e.root.sanitizer.sanitize(a,o):o;s=null!=s?s.toString():null;var c=e.renderer;null!=o?c.setAttribute(n,i,s,r):c.removeAttribute(n,i,r)}(e,i,a,i.ns,s,r);break;case 2:!function(e,t,n,r){var i=e.renderer;r?i.addClass(t,n):i.removeClass(t,n)}(e,a,s,r);break;case 4:!function(e,t,n,r,i){var o=e.root.sanitizer.sanitize(at.STYLE,i);if(null!=o){o=o.toString();var a=t.suffix;null!=a&&(o+=a)}else o=null;var s=e.renderer;null!=o?s.setStyle(n,r,o):s.removeStyle(n,r)}(e,i,a,s,r);break;case 8:!function(e,t,n,r,i){var o=t.securityContext,a=o?e.root.sanitizer.sanitize(o,i):i;e.renderer.setProperty(n,r,a)}(33554432&t.flags&&32&i.flags?o.componentView:e,i,a,s,r)}return!0}function ro(e,t,n){var r=[];for(var i in n)r.push({propName:i,bindingType:n[i]});return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:-1,flags:e,childFlags:0,directChildFlags:0,childMatchedQueries:0,ngContentIndex:-1,matchedQueries:{},matchedQueryIds:0,references:{},childCount:0,bindings:[],bindingFlags:0,outputs:[],element:null,provider:null,text:null,query:{id:t,filterId:Mn(t),bindings:r},ngContent:null}}function io(e){for(var t=e.def.nodeMatchedQueries;e.parent&&Pn(e);){var n=e.parentNodeDef;e=e.parent;for(var r=n.nodeIndex+n.childCount,i=0;i<=r;i++){var o=e.def.nodes[i];67108864&o.flags&&536870912&o.flags&&(o.query.filterId&t)===o.query.filterId&&vn(e,i).setDirty(),!(1&o.flags&&i+o.childCount<n.nodeIndex)&&67108864&o.childFlags&&536870912&o.childFlags||(i+=o.childCount)}}if(134217728&e.def.nodeFlags)for(var a=0;a<e.def.nodes.length;a++){var s=e.def.nodes[a];134217728&s.flags&&536870912&s.flags&&vn(e,a).setDirty(),a+=s.childCount}}function oo(e,t){var n=vn(e,t.nodeIndex);if(n.dirty){var r,i=void 0;if(67108864&t.flags){var o=t.parent.parent;i=ao(e,o.nodeIndex,o.nodeIndex+o.childCount,t.query,[]),r=hn(e,t.parent.nodeIndex).instance}else 134217728&t.flags&&(i=ao(e,0,e.def.nodes.length-1,t.query,[]),r=e.component);n.reset(i);for(var a=t.query.bindings,s=!1,c=0;c<a.length;c++){var l=a[c],u=void 0;switch(l.bindingType){case 0:u=n.first;break;case 1:u=n,s=!0}r[l.propName]=u}s&&n.notifyOnChanges()}}function ao(e,t,n,r,i){for(var o=t;o<=n;o++){var a=e.def.nodes[o],s=a.matchedQueries[r.id];if(null!=s&&i.push(so(e,a,s)),1&a.flags&&a.element.template&&(a.element.template.nodeMatchedQueries&r.filterId)===r.filterId){var c=fn(e,o);if((a.childMatchedQueries&r.filterId)===r.filterId&&(ao(e,o+1,o+a.childCount,r,i),o+=a.childCount),16777216&a.flags)for(var l=c.viewContainer._embeddedViews,u=0;u<l.length;u++){var d=l[u],f=En(d);f&&f===c&&ao(d,0,d.def.nodes.length-1,r,i)}var h=c.template._projectedViews;if(h)for(var p=0;p<h.length;p++){var v=h[p];ao(v,0,v.def.nodes.length-1,r,i)}}(a.childMatchedQueries&r.filterId)!==r.filterId&&(o+=a.childCount)}return i}function so(e,t,n){if(null!=n)switch(n){case 1:return fn(e,t.nodeIndex).renderElement;case 0:return new Rt(fn(e,t.nodeIndex).renderElement);case 2:return fn(e,t.nodeIndex).template;case 3:return fn(e,t.nodeIndex).viewContainer;case 4:return hn(e,t.nodeIndex).instance}}function co(e,t,n){var r=Fn(e,t,n);r&&zn(e,n.ngContent.index,1,r,null,void 0)}function lo(e,t,n){for(var r=new Array(n.length-1),i=1;i<n.length;i++)r[i-1]={flags:8,name:null,ns:null,nonMinifiedName:null,securityContext:null,suffix:n[i]};return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:e,flags:2,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:{},matchedQueryIds:0,references:{},ngContentIndex:t,childCount:0,bindings:r,bindingFlags:8,outputs:[],element:null,provider:null,text:{prefix:n[0]},query:null,ngContent:null}}function uo(e,t,n){var r,i=e.renderer;r=i.createText(n.text.prefix);var o=Fn(e,t,n);return o&&i.appendChild(o,r),{renderText:r}}function fo(e,t){return(null!=e?e.toString():"")+t.suffix}function ho(e,t,n,r){for(var i=0,o=0,a=0,s=0,c=0,l=null,u=null,d=!1,f=!1,h=null,p=0;p<t.length;p++){var v=t[p];if(v.nodeIndex=p,v.parent=l,v.bindingIndex=i,v.outputIndex=o,v.renderParent=u,a|=v.flags,c|=v.matchedQueryIds,v.element){var g=v.element;g.publicProviders=l?l.element.publicProviders:Object.create(null),g.allProviders=g.publicProviders,d=!1,f=!1,v.element.template&&(c|=v.element.template.nodeMatchedQueries)}if(vo(l,v,t.length),i+=v.bindings.length,o+=v.outputs.length,!u&&3&v.flags&&(h=v),20224&v.flags){d||(d=!0,l.element.publicProviders=Object.create(l.element.publicProviders),l.element.allProviders=l.element.publicProviders);var m=0!=(32768&v.flags);0==(8192&v.flags)||m?l.element.publicProviders[kn(v.provider.token)]=v:(f||(f=!0,l.element.allProviders=Object.create(l.element.publicProviders)),l.element.allProviders[kn(v.provider.token)]=v),m&&(l.element.componentProvider=v)}if(l?(l.childFlags|=v.flags,l.directChildFlags|=v.flags,l.childMatchedQueries|=v.matchedQueryIds,v.element&&v.element.template&&(l.childMatchedQueries|=v.element.template.nodeMatchedQueries)):s|=v.flags,v.childCount>0)l=v,po(v)||(u=v);else for(;l&&p===l.nodeIndex+l.childCount;){var y=l.parent;y&&(y.childFlags|=l.childFlags,y.childMatchedQueries|=l.childMatchedQueries),u=(l=y)&&po(l)?l.renderParent:l}}return{factory:null,nodeFlags:a,rootNodeFlags:s,nodeMatchedQueries:c,flags:e,nodes:t,updateDirectives:n||mn,updateRenderer:r||mn,handleEvent:function(e,n,r,i){return t[n].element.handleEvent(e,r,i)},bindingCount:i,outputCount:o,lastRenderRootNode:h}}function po(e){return 0!=(1&e.flags)&&null===e.element.name}function vo(e,t,n){var r=t.element&&t.element.template;if(r){if(!r.lastRenderRootNode)throw new Error("Illegal State: Embedded templates without nodes are not allowed!");if(r.lastRenderRootNode&&16777216&r.lastRenderRootNode.flags)throw new Error("Illegal State: Last root node of a template can't have embedded views, at index ".concat(t.nodeIndex,"!"))}if(20224&t.flags&&0==(1&(e?e.flags:0)))throw new Error("Illegal State: StaticProvider/Directive nodes need to be children of elements or anchors, at index ".concat(t.nodeIndex,"!"));if(t.query){if(67108864&t.flags&&(!e||0==(16384&e.flags)))throw new Error("Illegal State: Content Query nodes need to be children of directives, at index ".concat(t.nodeIndex,"!"));if(134217728&t.flags&&e)throw new Error("Illegal State: View Query nodes have to be top level nodes, at index ".concat(t.nodeIndex,"!"))}if(t.childCount){var i=e?e.nodeIndex+e.childCount:n-1;if(t.nodeIndex<=i&&t.nodeIndex+t.childCount>i)throw new Error("Illegal State: childCount of node leads outside of parent, at index ".concat(t.nodeIndex,"!"))}}function go(e,t,n,r){var i=ko(e.root,e.renderer,e,t,n);return _o(i,e.component,r),bo(i),i}function mo(e,t,n){var r=ko(e,e.renderer,null,null,t);return _o(r,n,n),bo(r),r}function yo(e,t,n,r){var i,o=t.element.componentRendererType;return i=o?e.root.rendererFactory.createRenderer(r,o):e.root.renderer,ko(e.root,i,e,t.element.componentProvider,n)}function ko(e,t,n,r,i){var o=new Array(i.nodes.length),a=i.outputCount?new Array(i.outputCount):null;return{def:i,parent:n,viewContainerParent:null,parentNodeDef:r,context:null,component:null,nodes:o,state:13,root:e,renderer:t,oldValues:new Array(i.bindingCount),disposables:a,initIndex:-1}}function _o(e,t,n){e.component=t,e.context=n}function bo(e){var t;Rn(e)&&(t=fn(e.parent,e.parentNodeDef.parent.nodeIndex).renderElement);for(var n=e.def,r=e.nodes,i=0;i<n.nodes.length;i++){var o=n.nodes[i],a=void 0;switch(gn.setCurrentNode(e,i),201347067&o.flags){case 1:var s=Xi(e,t,o),c=void 0;if(33554432&o.flags){var l=Ln(o.element.componentView);c=gn.createComponentView(e,o,l,s)}eo(e,c,o,s),a={renderElement:s,componentView:c,viewContainer:null,template:o.element.template?hr(e,o):void 0},16777216&o.flags&&(a.viewContainer=lr(e,o,a));break;case 2:a=uo(e,t,o);break;case 512:case 1024:case 2048:case 256:(a=r[i])||4096&o.flags||(a={instance:Rr(e,o)});break;case 16:a={instance:Pr(e,o)};break;case 16384:(a=r[i])||(a={instance:Mr(e,o)}),32768&o.flags&&_o(fn(e,o.parent.nodeIndex).componentView,a.instance,a.instance);break;case 32:case 64:case 128:a={value:void 0};break;case 67108864:case 134217728:a=new Yr;break;case 8:co(e,t,o),a=void 0}r[i]=a}Oo(e,Io.CreateViewNodes),No(e,201326592,268435456,0)}function wo(e){To(e),gn.updateDirectives(e,1),Ro(e,Io.CheckNoChanges),gn.updateRenderer(e,1),Oo(e,Io.CheckNoChanges),e.state&=-97}function xo(e){1&e.state?(e.state&=-2,e.state|=2):e.state&=-3,ln(e,0,256),To(e),gn.updateDirectives(e,0),Ro(e,Io.CheckAndUpdate),No(e,67108864,536870912,0);var t=ln(e,256,512);zr(e,2097152|(t?1048576:0)),gn.updateRenderer(e,0),Oo(e,Io.CheckAndUpdate),No(e,134217728,536870912,0),zr(e,8388608|((t=ln(e,512,768))?4194304:0)),2&e.def.flags&&(e.state&=-9),e.state&=-97,ln(e,768,1024)}function Co(e,t,n,r,i,o,a,s,c,l,u,d,f){return 0===n?function(e,t,n,r,i,o,a,s,c,l,u,d){switch(201347067&t.flags){case 1:return function(e,t,n,r,i,o,a,s,c,l,u,d){var f=t.bindings.length,h=!1;return f>0&&no(e,t,0,n)&&(h=!0),f>1&&no(e,t,1,r)&&(h=!0),f>2&&no(e,t,2,i)&&(h=!0),f>3&&no(e,t,3,o)&&(h=!0),f>4&&no(e,t,4,a)&&(h=!0),f>5&&no(e,t,5,s)&&(h=!0),f>6&&no(e,t,6,c)&&(h=!0),f>7&&no(e,t,7,l)&&(h=!0),f>8&&no(e,t,8,u)&&(h=!0),f>9&&no(e,t,9,d)&&(h=!0),h}(e,t,n,r,i,o,a,s,c,l,u,d);case 2:return function(e,t,n,r,i,o,a,s,c,l,u,d){var f=!1,h=t.bindings,p=h.length;if(p>0&&xn(e,t,0,n)&&(f=!0),p>1&&xn(e,t,1,r)&&(f=!0),p>2&&xn(e,t,2,i)&&(f=!0),p>3&&xn(e,t,3,o)&&(f=!0),p>4&&xn(e,t,4,a)&&(f=!0),p>5&&xn(e,t,5,s)&&(f=!0),p>6&&xn(e,t,6,c)&&(f=!0),p>7&&xn(e,t,7,l)&&(f=!0),p>8&&xn(e,t,8,u)&&(f=!0),p>9&&xn(e,t,9,d)&&(f=!0),f){var v=t.text.prefix;p>0&&(v+=fo(n,h[0])),p>1&&(v+=fo(r,h[1])),p>2&&(v+=fo(i,h[2])),p>3&&(v+=fo(o,h[3])),p>4&&(v+=fo(a,h[4])),p>5&&(v+=fo(s,h[5])),p>6&&(v+=fo(c,h[6])),p>7&&(v+=fo(l,h[7])),p>8&&(v+=fo(u,h[8])),p>9&&(v+=fo(d,h[9]));var g=dn(e,t.nodeIndex).renderText;e.renderer.setValue(g,v)}return f}(e,t,n,r,i,o,a,s,c,l,u,d);case 16384:return function(e,t,n,r,i,o,a,s,c,l,u,d){var f=hn(e,t.nodeIndex),h=f.instance,p=!1,v=void 0,g=t.bindings.length;return g>0&&wn(e,t,0,n)&&(p=!0,v=Br(e,f,t,0,n,v)),g>1&&wn(e,t,1,r)&&(p=!0,v=Br(e,f,t,1,r,v)),g>2&&wn(e,t,2,i)&&(p=!0,v=Br(e,f,t,2,i,v)),g>3&&wn(e,t,3,o)&&(p=!0,v=Br(e,f,t,3,o,v)),g>4&&wn(e,t,4,a)&&(p=!0,v=Br(e,f,t,4,a,v)),g>5&&wn(e,t,5,s)&&(p=!0,v=Br(e,f,t,5,s,v)),g>6&&wn(e,t,6,c)&&(p=!0,v=Br(e,f,t,6,c,v)),g>7&&wn(e,t,7,l)&&(p=!0,v=Br(e,f,t,7,l,v)),g>8&&wn(e,t,8,u)&&(p=!0,v=Br(e,f,t,8,u,v)),g>9&&wn(e,t,9,d)&&(p=!0,v=Br(e,f,t,9,d,v)),v&&h.ngOnChanges(v),65536&t.flags&&un(e,256,t.nodeIndex)&&h.ngOnInit(),262144&t.flags&&h.ngDoCheck(),p}(e,t,n,r,i,o,a,s,c,l,u,d);case 32:case 64:case 128:return function(e,t,n,r,i,o,a,s,c,l,u,d){var f=t.bindings,h=!1,p=f.length;if(p>0&&xn(e,t,0,n)&&(h=!0),p>1&&xn(e,t,1,r)&&(h=!0),p>2&&xn(e,t,2,i)&&(h=!0),p>3&&xn(e,t,3,o)&&(h=!0),p>4&&xn(e,t,4,a)&&(h=!0),p>5&&xn(e,t,5,s)&&(h=!0),p>6&&xn(e,t,6,c)&&(h=!0),p>7&&xn(e,t,7,l)&&(h=!0),p>8&&xn(e,t,8,u)&&(h=!0),p>9&&xn(e,t,9,d)&&(h=!0),h){var v,g=pn(e,t.nodeIndex);switch(201347067&t.flags){case 32:v=new Array(f.length),p>0&&(v[0]=n),p>1&&(v[1]=r),p>2&&(v[2]=i),p>3&&(v[3]=o),p>4&&(v[4]=a),p>5&&(v[5]=s),p>6&&(v[6]=c),p>7&&(v[7]=l),p>8&&(v[8]=u),p>9&&(v[9]=d);break;case 64:v={},p>0&&(v[f[0].name]=n),p>1&&(v[f[1].name]=r),p>2&&(v[f[2].name]=i),p>3&&(v[f[3].name]=o),p>4&&(v[f[4].name]=a),p>5&&(v[f[5].name]=s),p>6&&(v[f[6].name]=c),p>7&&(v[f[7].name]=l),p>8&&(v[f[8].name]=u),p>9&&(v[f[9].name]=d);break;case 128:var m=n;switch(p){case 1:v=m.transform(n);break;case 2:v=m.transform(r);break;case 3:v=m.transform(r,i);break;case 4:v=m.transform(r,i,o);break;case 5:v=m.transform(r,i,o,a);break;case 6:v=m.transform(r,i,o,a,s);break;case 7:v=m.transform(r,i,o,a,s,c);break;case 8:v=m.transform(r,i,o,a,s,c,l);break;case 9:v=m.transform(r,i,o,a,s,c,l,u);break;case 10:v=m.transform(r,i,o,a,s,c,l,u,d)}}g.value=v}return h}(e,t,n,r,i,o,a,s,c,l,u,d);default:throw"unreachable"}}(e,t,r,i,o,a,s,c,l,u,d,f):function(e,t,n){switch(201347067&t.flags){case 1:return function(e,t,n){for(var r=!1,i=0;i<n.length;i++)no(e,t,i,n[i])&&(r=!0);return r}(e,t,n);case 2:return function(e,t,n){for(var r=t.bindings,i=!1,o=0;o<n.length;o++)xn(e,t,o,n[o])&&(i=!0);if(i){for(var a="",s=0;s<n.length;s++)a+=fo(n[s],r[s]);a=t.text.prefix+a;var c=dn(e,t.nodeIndex).renderText;e.renderer.setValue(c,a)}return i}(e,t,n);case 16384:return function(e,t,n){for(var r=hn(e,t.nodeIndex),i=r.instance,o=!1,a=void 0,s=0;s<n.length;s++)wn(e,t,s,n[s])&&(o=!0,a=Br(e,r,t,s,n[s],a));return a&&i.ngOnChanges(a),65536&t.flags&&un(e,256,t.nodeIndex)&&i.ngOnInit(),262144&t.flags&&i.ngDoCheck(),o}(e,t,n);case 32:case 64:case 128:return function(e,t,n){for(var r=t.bindings,i=!1,o=0;o<n.length;o++)xn(e,t,o,n[o])&&(i=!0);if(i){var a,s=pn(e,t.nodeIndex);switch(201347067&t.flags){case 32:a=n;break;case 64:a={};for(var c=0;c<n.length;c++)a[r[c].name]=n[c];break;case 128:var l=n[0],u=n.slice(1);a=l.transform.apply(l,_toConsumableArray(u))}s.value=a}return i}(e,t,n);default:throw"unreachable"}}(e,t,r)}function To(e){var t=e.def;if(4&t.nodeFlags)for(var n=0;n<t.nodes.length;n++){var r=t.nodes[n];if(4&r.flags){var i=fn(e,n).template._projectedViews;if(i)for(var o=0;o<i.length;o++){var a=i[o];a.state|=32,An(a,e)}}else 0==(4&r.childFlags)&&(n+=r.childCount)}}function Ao(e,t,n,r,i,o,a,s,c,l,u,d,f){return 0===n?function(e,t,n,r,i,o,a,s,c,l,u,d){var f=t.bindings.length;f>0&&Cn(e,t,0,n),f>1&&Cn(e,t,1,r),f>2&&Cn(e,t,2,i),f>3&&Cn(e,t,3,o),f>4&&Cn(e,t,4,a),f>5&&Cn(e,t,5,s),f>6&&Cn(e,t,6,c),f>7&&Cn(e,t,7,l),f>8&&Cn(e,t,8,u),f>9&&Cn(e,t,9,d)}(e,t,r,i,o,a,s,c,l,u,d,f):function(e,t,n){for(var r=0;r<n.length;r++)Cn(e,t,r,n[r])}(e,t,r),!1}function So(e,t){if(vn(e,t.nodeIndex).dirty)throw an(gn.createDebugContext(e,t.nodeIndex),"Query ".concat(t.query.id," not dirty"),"Query ".concat(t.query.id," dirty"),0!=(1&e.state))}function Eo(e){if(!(128&e.state)){if(Ro(e,Io.Destroy),Oo(e,Io.Destroy),zr(e,131072),e.disposables)for(var t=0;t<e.disposables.length;t++)e.disposables[t]();!function(e){if(16&e.state){var t=En(e);if(t){var n=t.template._projectedViews;n&&(ir(n,n.indexOf(e)),gn.dirtyParentQueries(e))}}}(e),e.renderer.destroyNode&&function(e){for(var t=e.def.nodes.length,n=0;n<t;n++){var r=e.def.nodes[n];1&r.flags?e.renderer.destroyNode(fn(e,n).renderElement):2&r.flags?e.renderer.destroyNode(dn(e,n).renderText):(67108864&r.flags||134217728&r.flags)&&vn(e,n).destroy()}}(e),Rn(e)&&e.renderer.destroy(),e.state|=128}}var Io=function(){var e={CreateViewNodes:0,CheckNoChanges:1,CheckNoChangesProjectedViews:2,CheckAndUpdate:3,CheckAndUpdateProjectedViews:4,Destroy:5};return e[e.CreateViewNodes]="CreateViewNodes",e[e.CheckNoChanges]="CheckNoChanges",e[e.CheckNoChangesProjectedViews]="CheckNoChangesProjectedViews",e[e.CheckAndUpdate]="CheckAndUpdate",e[e.CheckAndUpdateProjectedViews]="CheckAndUpdateProjectedViews",e[e.Destroy]="Destroy",e}();function Oo(e,t){var n=e.def;if(33554432&n.nodeFlags)for(var r=0;r<n.nodes.length;r++){var i=n.nodes[r];33554432&i.flags?Po(fn(e,r).componentView,t):0==(33554432&i.childFlags)&&(r+=i.childCount)}}function Ro(e,t){var n=e.def;if(16777216&n.nodeFlags)for(var r=0;r<n.nodes.length;r++){var i=n.nodes[r];if(16777216&i.flags)for(var o=fn(e,r).viewContainer._embeddedViews,a=0;a<o.length;a++)Po(o[a],t);else 0==(16777216&i.childFlags)&&(r+=i.childCount)}}function Po(e,t){var n=e.state;switch(t){case Io.CheckNoChanges:0==(128&n)&&(12==(12&n)?wo(e):64&n&&Mo(e,Io.CheckNoChangesProjectedViews));break;case Io.CheckNoChangesProjectedViews:0==(128&n)&&(32&n?wo(e):64&n&&Mo(e,t));break;case Io.CheckAndUpdate:0==(128&n)&&(12==(12&n)?xo(e):64&n&&Mo(e,Io.CheckAndUpdateProjectedViews));break;case Io.CheckAndUpdateProjectedViews:0==(128&n)&&(32&n?xo(e):64&n&&Mo(e,t));break;case Io.Destroy:Eo(e);break;case Io.CreateViewNodes:bo(e)}}function Mo(e,t){Ro(e,t),Oo(e,t)}function No(e,t,n,r){if(e.def.nodeFlags&t&&e.def.nodeFlags&n)for(var i=e.def.nodes.length,o=0;o<i;o++){var a=e.def.nodes[o];if(a.flags&t&&a.flags&n)switch(gn.setCurrentNode(e,a.nodeIndex),r){case 0:oo(e,a);break;case 1:So(e,a)}a.childFlags&t&&a.childFlags&n||(o+=a.childCount)}}var Do=!1;function Fo(e,t,n,r,i,o){var a=i.injector.get(Mt);return mo(Lo(e,i,a,t,n),r,o)}function jo(e,t,n,r,i,o){var a=i.injector.get(Mt),s=Lo(e,i,new ga(a),t,n),c=Jo(r);return pa(ra.create,mo,null,[s,c,o])}function Lo(e,t,n,r,i){var o=t.injector.get(st),a=t.injector.get(De),s=n.createRenderer(null,null);return{ngModule:t,injector:e,projectableNodes:r,selectorOrNode:i,sanitizer:o,rendererFactory:n,renderer:s,errorHandler:a}}function Vo(e,t,n,r){var i=Jo(n);return pa(ra.create,go,null,[e,t,i,r])}function Bo(e,t,n,r){return n=Wo.get(t.element.componentProvider.provider.token)||Jo(n),pa(ra.create,yo,null,[e,t,n,r])}function zo(e,t,n,r){return kr(e,t,n,function(e){var t=function(e){var t=!1,n=!1;return 0===Ho.size||(e.providers.forEach((function(e){var r=Ho.get(e.token);3840&e.flags&&r&&(t=!0,n=n||r.deprecatedBehavior)})),e.modules.forEach((function(e){Uo.forEach((function(r,i){ne(i).providedIn===e&&(t=!0,n=n||r.deprecatedBehavior)}))}))),{hasOverrides:t,hasDeprecatedOverrides:n}}(e),n=t.hasOverrides,r=t.hasDeprecatedOverrides;return n?(function(e){for(var t=0;t<e.providers.length;t++){var n=e.providers[t];r&&(n.flags|=4096);var i=Ho.get(n.token);i&&(n.flags=-3841&n.flags|i.flags,n.deps=Dn(i.deps),n.value=i.value)}if(Uo.size>0){var o=new Set(e.modules);Uo.forEach((function(t,n){if(o.has(ne(n).providedIn)){var i={token:n,flags:t.flags|(r?4096:0),deps:Dn(t.deps),value:t.value,index:e.providers.length};e.providers.push(i),e.providersByKey[kn(n)]=i}}))}}(e=e.factory((function(){return mn}))),e):e}(r))}var Ho=new Map,Uo=new Map,Wo=new Map;function qo(e){var t;Ho.set(e.token,e),"function"==typeof e.token&&(t=ne(e.token))&&"function"==typeof t.providedIn&&Uo.set(e.token,e)}function Yo(e,t){var n=Ln(t.viewDefFactory),r=Ln(n.nodes[0].element.componentView);Wo.set(e,r)}function Go(){Ho.clear(),Uo.clear(),Wo.clear()}function Jo(e){if(0===Ho.size)return e;var t=function(e){for(var t=[],n=null,r=0;r<e.nodes.length;r++){var i=e.nodes[r];1&i.flags&&(n=i),n&&3840&i.flags&&Ho.has(i.provider.token)&&(t.push(n.nodeIndex),n=null)}return t}(e);if(0===t.length)return e;e=e.factory((function(){return mn}));for(var n=0;n<t.length;n++)r(e,t[n]);return e;function r(e,t){for(var n=t+1;n<e.nodes.length;n++){var r=e.nodes[n];if(1&r.flags)return;if(3840&r.flags){var i=r.provider,o=Ho.get(i.token);o&&(r.flags=-3841&r.flags|o.flags,i.deps=Dn(o.deps),i.value=o.value)}}}}function $o(e,t,n,r,i,o,a,s,c,l,u,d,f){var h=e.def.nodes[t];return Co(e,h,n,r,i,o,a,s,c,l,u,d,f),224&h.flags?pn(e,t).value:void 0}function Ko(e,t,n,r,i,o,a,s,c,l,u,d,f){var h=e.def.nodes[t];return Ao(e,h,n,r,i,o,a,s,c,l,u,d,f),224&h.flags?pn(e,t).value:void 0}function Qo(e){return pa(ra.detectChanges,xo,null,[e])}function Zo(e){return pa(ra.checkNoChanges,wo,null,[e])}function Xo(e){return pa(ra.destroy,Eo,null,[e])}var ea,ta,na,ra=function(){var e={create:0,detectChanges:1,checkNoChanges:2,destroy:3,handleEvent:4};return e[e.create]="create",e[e.detectChanges]="detectChanges",e[e.checkNoChanges]="checkNoChanges",e[e.destroy]="destroy",e[e.handleEvent]="handleEvent",e}();function ia(e,t){ta=e,na=t}function oa(e,t,n,r){return ia(e,t),pa(ra.handleEvent,e.def.handleEvent,null,[e,t,n,r])}function aa(e,t){if(128&e.state)throw cn(ra[ea]);return ia(e,ua(e,0)),e.def.updateDirectives((function(e,n,r){for(var i=e.def.nodes[n],o=arguments.length,a=new Array(o>3?o-3:0),s=3;s<o;s++)a[s-3]=arguments[s];return 0===t?ca(e,i,r,a):la(e,i,r,a),16384&i.flags&&ia(e,ua(e,n)),224&i.flags?pn(e,i.nodeIndex).value:void 0}),e)}function sa(e,t){if(128&e.state)throw cn(ra[ea]);return ia(e,da(e,0)),e.def.updateRenderer((function(e,n,r){for(var i=e.def.nodes[n],o=arguments.length,a=new Array(o>3?o-3:0),s=3;s<o;s++)a[s-3]=arguments[s];return 0===t?ca(e,i,r,a):la(e,i,r,a),3&i.flags&&ia(e,da(e,n)),224&i.flags?pn(e,i.nodeIndex).value:void 0}),e)}function ca(e,t,n,r){if(Co.apply(void 0,[e,t,n].concat(_toConsumableArray(r)))){var i=1===n?r[0]:r;if(16384&t.flags){for(var o={},a=0;a<t.bindings.length;a++){var s=t.bindings[a],c=i[a];8&s.flags&&(o[(h=s.nonMinifiedName,"ng-reflect-"+h.replace(/[$@]/g,"_").replace(ut,(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return"-"+t[1].toLowerCase()})))]=dt(c))}var l=t.parent,u=fn(e,l.nodeIndex).renderElement;if(l.element.name)for(var d in o){var f=o[d];null!=f?e.renderer.setAttribute(u,d,f):e.renderer.removeAttribute(u,d)}else e.renderer.setValue(u,"bindings="+JSON.stringify(o,null,2))}}var h}function la(e,t,n,r){Ao.apply(void 0,[e,t,n].concat(_toConsumableArray(r)))}function ua(e,t){for(var n=t;n<e.def.nodes.length;n++){var r=e.def.nodes[n];if(16384&r.flags&&r.bindings&&r.bindings.length)return n}return null}function da(e,t){for(var n=t;n<e.def.nodes.length;n++){var r=e.def.nodes[n];if(3&r.flags&&r.bindings&&r.bindings.length)return n}return null}var fa=function(){function e(t,n){_classCallCheck(this,e),this.view=t,this.nodeIndex=n,null==n&&(this.nodeIndex=n=0),this.nodeDef=t.def.nodes[n];for(var r=this.nodeDef,i=t;r&&0==(1&r.flags);)r=r.parent;if(!r)for(;!r&&i;)r=In(i),i=i.parent;this.elDef=r,this.elView=i}return _createClass(e,[{key:"elOrCompView",get:function(){return fn(this.elView,this.elDef.nodeIndex).componentView||this.view}},{key:"injector",get:function(){return vr(this.elView,this.elDef)}},{key:"component",get:function(){return this.elOrCompView.component}},{key:"context",get:function(){return this.elOrCompView.context}},{key:"providerTokens",get:function(){var e=[];if(this.elDef)for(var t=this.elDef.nodeIndex+1;t<=this.elDef.nodeIndex+this.elDef.childCount;t++){var n=this.elView.def.nodes[t];20224&n.flags&&e.push(n.provider.token),t+=n.childCount}return e}},{key:"references",get:function(){var e={};if(this.elDef){ha(this.elView,this.elDef,e);for(var t=this.elDef.nodeIndex+1;t<=this.elDef.nodeIndex+this.elDef.childCount;t++){var n=this.elView.def.nodes[t];20224&n.flags&&ha(this.elView,n,e),t+=n.childCount}}return e}},{key:"componentRenderElement",get:function(){var e=function(e){for(;e&&!Rn(e);)e=e.parent;return e.parent?fn(e.parent,In(e).nodeIndex):null}(this.elOrCompView);return e?e.renderElement:void 0}},{key:"renderNode",get:function(){return 2&this.nodeDef.flags?On(this.view,this.nodeDef):On(this.elView,this.elDef)}},{key:"logError",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,o;2&this.nodeDef.flags?(i=this.view.def,o=this.nodeDef.nodeIndex):(i=this.elView.def,o=this.elDef.nodeIndex);var a=function(e,t){for(var n=-1,r=0;r<=t;r++)3&e.nodes[r].flags&&n++;return n}(i,o),s=-1;i.factory((function(){var t;return++s===a?(t=e.error).bind.apply(t,[e].concat(n)):mn})),s<a&&(e.error("Illegal state: the ViewDefinitionFactory did not call the logger!"),e.error.apply(e,n))}}]),e}();function ha(e,t,n){for(var r in t.references)n[r]=so(e,t,t.references[r])}function pa(e,t,n,r){var i,o,a=ea,s=ta,c=na;try{ea=e;var l=t.apply(n,r);return ta=s,na=c,ea=a,l}catch(u){if(Pe(u)||!ta)throw u;throw i=u,o=va(),i instanceof Error||(i=new Error(i.toString())),sn(i,o),i}}function va(){return ta?new fa(ta,na):null}var ga=function(){function e(t){_classCallCheck(this,e),this.delegate=t}return _createClass(e,[{key:"createRenderer",value:function(e,t){return new ma(this.delegate.createRenderer(e,t))}},{key:"begin",value:function(){this.delegate.begin&&this.delegate.begin()}},{key:"end",value:function(){this.delegate.end&&this.delegate.end()}},{key:"whenRenderingDone",value:function(){return this.delegate.whenRenderingDone?this.delegate.whenRenderingDone():Promise.resolve(null)}}]),e}(),ma=function(){function e(t){_classCallCheck(this,e),this.delegate=t,this.debugContextFactory=va,this.data=this.delegate.data}return _createClass(e,[{key:"createDebugContext",value:function(e){return this.debugContextFactory(e)}},{key:"destroyNode",value:function(e){!function(e){zi.delete(e.nativeNode)}(Hi(e)),this.delegate.destroyNode&&this.delegate.destroyNode(e)}},{key:"destroy",value:function(){this.delegate.destroy()}},{key:"createElement",value:function(e,t){var n=this.delegate.createElement(e,t),r=this.createDebugContext(n);if(r){var i=new Bi(n,null,r);i.name=e,Ui(i)}return n}},{key:"createComment",value:function(e){var t=this.delegate.createComment(e),n=this.createDebugContext(t);return n&&Ui(new Vi(t,null,n)),t}},{key:"createText",value:function(e){var t=this.delegate.createText(e),n=this.createDebugContext(t);return n&&Ui(new Vi(t,null,n)),t}},{key:"appendChild",value:function(e,t){var n=Hi(e),r=Hi(t);n&&r&&n instanceof Bi&&n.addChild(r),this.delegate.appendChild(e,t)}},{key:"insertBefore",value:function(e,t,n){var r=Hi(e),i=Hi(t),o=Hi(n);r&&i&&r instanceof Bi&&r.insertBefore(o,i),this.delegate.insertBefore(e,t,n)}},{key:"removeChild",value:function(e,t){var n=Hi(e),r=Hi(t);n&&r&&n instanceof Bi&&n.removeChild(r),this.delegate.removeChild(e,t)}},{key:"selectRootElement",value:function(e,t){var n=this.delegate.selectRootElement(e,t),r=va();return r&&Ui(new Bi(n,null,r)),n}},{key:"setAttribute",value:function(e,t,n,r){var i=Hi(e);i&&i instanceof Bi&&(i.attributes[r?r+":"+t:t]=n),this.delegate.setAttribute(e,t,n,r)}},{key:"removeAttribute",value:function(e,t,n){var r=Hi(e);r&&r instanceof Bi&&(r.attributes[n?n+":"+t:t]=null),this.delegate.removeAttribute(e,t,n)}},{key:"addClass",value:function(e,t){var n=Hi(e);n&&n instanceof Bi&&(n.classes[t]=!0),this.delegate.addClass(e,t)}},{key:"removeClass",value:function(e,t){var n=Hi(e);n&&n instanceof Bi&&(n.classes[t]=!1),this.delegate.removeClass(e,t)}},{key:"setStyle",value:function(e,t,n,r){var i=Hi(e);i&&i instanceof Bi&&(i.styles[t]=n),this.delegate.setStyle(e,t,n,r)}},{key:"removeStyle",value:function(e,t,n){var r=Hi(e);r&&r instanceof Bi&&(r.styles[t]=null),this.delegate.removeStyle(e,t,n)}},{key:"setProperty",value:function(e,t,n){var r=Hi(e);r&&r instanceof Bi&&(r.properties[t]=n),this.delegate.setProperty(e,t,n)}},{key:"listen",value:function(e,t,n){if("string"!=typeof e){var r=Hi(e);r&&r.listeners.push(new Li(t,n))}return this.delegate.listen(e,t,n)}},{key:"parentNode",value:function(e){return this.delegate.parentNode(e)}},{key:"nextSibling",value:function(e){return this.delegate.nextSibling(e)}},{key:"setValue",value:function(e,t){return this.delegate.setValue(e,t)}}]),e}();var ya=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i){var o;return _classCallCheck(this,n),(o=t.call(this)).moduleType=e,o._bootstrapComponents=r,o._ngModuleDefFactory=i,o}return _createClass(n,[{key:"create",value:function(e){!function(){if(!Do){Do=!0;var e=Le()?{setCurrentNode:ia,createRootView:jo,createEmbeddedView:Vo,createComponentView:Bo,createNgModuleRef:zo,overrideProvider:qo,overrideComponentView:Yo,clearOverrides:Go,checkAndUpdateView:Qo,checkNoChangesView:Zo,destroyView:Xo,createDebugContext:function(e,t){return new fa(e,t)},handleEvent:oa,updateDirectives:aa,updateRenderer:sa}:{setCurrentNode:function(){},createRootView:Fo,createEmbeddedView:go,createComponentView:yo,createNgModuleRef:kr,overrideProvider:mn,overrideComponentView:mn,clearOverrides:mn,checkAndUpdateView:xo,checkNoChangesView:wo,destroyView:Eo,createDebugContext:function(e,t){return new fa(e,t)},handleEvent:function(e,t,n,r){return e.def.handleEvent(e,t,n,r)},updateDirectives:function(e,t){return e.def.updateDirectives(0===t?$o:Ko,e)},updateRenderer:function(e,t){return e.def.updateRenderer(0===t?$o:Ko,e)}};gn.setCurrentNode=e.setCurrentNode,gn.createRootView=e.createRootView,gn.createEmbeddedView=e.createEmbeddedView,gn.createComponentView=e.createComponentView,gn.createNgModuleRef=e.createNgModuleRef,gn.overrideProvider=e.overrideProvider,gn.overrideComponentView=e.overrideComponentView,gn.clearOverrides=e.clearOverrides,gn.checkAndUpdateView=e.checkAndUpdateView,gn.checkNoChangesView=e.checkNoChangesView,gn.destroyView=e.destroyView,gn.resolveDep=Lr,gn.createDebugContext=e.createDebugContext,gn.handleEvent=e.handleEvent,gn.updateDirectives=e.updateDirectives,gn.updateRenderer=e.updateRenderer,gn.dirtyParentQueries=io}}();var t=function(e){var t=Array.from(e.providers),n=Array.from(e.modules),r={};for(var i in e.providersByKey)r[i]=e.providersByKey[i];return{factory:e.factory,isRoot:e.isRoot,providers:t,modules:n,providersByKey:r}}(Ln(this._ngModuleDefFactory));return gn.createNgModuleRef(this.moduleType,e||ke.NULL,this._bootstrapComponents,t)}}]),n}(function(){return function e(){_classCallCheck(this,e)}}()),ka=function e(){_classCallCheck(this,e)},_a=function(){function e(){var t,n,r;_classCallCheck(this,e),this.configurationSet=!1,this.users=[{id:"e1",name:"Tom Rowling",avatar:"https://randomuser.me/api/portraits/men/30.jpg",role:"writer"},{id:"e2",name:"Wei Hong",avatar:"https://randomuser.me/api/portraits/women/51.jpg",role:"writer"},{id:"e3",name:"Rani Patel",role:"writer"},{id:"e4",name:"Henrik Jensen",role:"commentator"},{id:ba(),role:"writer"},{id:ba(),role:"reader"}],this.channelId=((r=(n=location.search.match(/channelId=(.+)$/))?decodeURIComponent(n[1]):null)||wa(r=ba()),r),this.config={tokenUrl:(t=JSON.parse(localStorage.getItem("CKEDITOR_CS_CONFIG")||"{}")).tokenUrl||"",uploadUrl:t.uploadUrl||"",webSocketUrl:t.webSocketUrl||""},this.isWarning=!1}return _createClass(e,[{key:"ngOnInit",value:function(){var e="https://80315.cke-cs.com/easyimage/upload";console.log("uploadUrl ",e),console.log(" Web Socket Url ","wss://80315.cke-cs.com/ws");var t,n="http://localhost:3000/users/";console.log("token Url ",n),this.config={tokenUrl:n,webSocketUrl:"wss://80315.cke-cs.com/ws",uploadUrl:e},t={tokenUrl:xa(this.config.tokenUrl),uploadUrl:this.config.uploadUrl,webSocketUrl:this.config.webSocketUrl},localStorage.setItem("CKEDITOR_CS_CONFIG",JSON.stringify(t)),wa(this.channelId),this.configurationSet=!0}},{key:"handleTokenUrlChange",value:function(){this.isWarning=!1,this.selectedUser=void 0}},{key:"selectUser",value:function(e){this.selectedUser=e.id,this.isWarning=!1;var t=Object.keys(e);this.config.tokenUrl=xa(this.config.tokenUrl)+"?"+t.filter((function(t){return e[t]})).map((function(t){return"role"===t?"".concat(t,"=").concat(e[t]):"user.".concat(t,"=").concat(e[t])})).join("&")}},{key:"isCloudServicesTokenEndpoint",value:function(){return Ca(this.config.tokenUrl)}},{key:"getUserInitials",value:function(e){return e.split(" ",2).map((function(e){return e.charAt(0)})).join("").toUpperCase()}},{key:"onEditorReady",value:function(e){console.log("Editor is ready to use!",e)}}]),e}();function ba(){return Math.floor(Math.random()*Math.pow(2,52)).toString(32)}function wa(e){window.history.replaceState({},document.title,function(e){return"".concat(window.location.href.split("?")[0],"?channelId=").concat(e)}(e))}function xa(e){return Ca(e)?e.split("?")[0]:e}function Ca(e){return/cke-cs[\w-]*\.com\/token\/dev/.test(e)}function Ta(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(t){o(t)}}function s(e){try{c(r.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))}var Aa=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)},Sa=n("Ju5/"),Ea=function(){return Sa.a.Date.now()},Ia=/\s/,Oa=/^\s+/,Ra=Sa.a.Symbol,Pa=Object.prototype,Ma=Pa.hasOwnProperty,Na=Pa.toString,Da=Ra?Ra.toStringTag:void 0,Fa=Object.prototype.toString,ja=Ra?Ra.toStringTag:void 0,La=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":ja&&ja in Object(e)?function(e){var t=Ma.call(e,Da),n=e[Da];try{e[Da]=void 0;var r=!0}catch(o){}var i=Na.call(e);return r&&(t?e[Da]=n:delete e[Da]),i}(e):function(e){return Fa.call(e)}(e)},Va=function(e){return null!=e&&"object"==typeof e},Ba=/^[-+]0x[0-9a-f]+$/i,za=/^0b[01]+$/i,Ha=/^0o[0-7]+$/i,Ua=parseInt,Wa=function(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||Va(e)&&"[object Symbol]"==La(e)}(e))return NaN;if(Aa(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Aa(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;var n;e=(n=e)?n.slice(0,function(e){for(var t=e.length;t--&&Ia.test(e.charAt(t)););return t}(n)+1).replace(Oa,""):n;var r=za.test(e);return r||Ha.test(e)?Ua(e.slice(2),r?2:8):Ba.test(e)?NaN:+e},qa=Math.max,Ya=Math.min,Ga=function(e,t){return e===t||e!=e&&t!=t},Ja=function(e,t){for(var n=e.length;n--;)if(Ga(e[n][0],t))return n;return-1},$a=Array.prototype.splice;function Ka(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Ka.prototype.clear=function(){this.__data__=[],this.size=0},Ka.prototype.delete=function(e){var t=this.__data__,n=Ja(t,e);return!(n<0||(n==t.length-1?t.pop():$a.call(t,n,1),--this.size,0))},Ka.prototype.get=function(e){var t=this.__data__,n=Ja(t,e);return n<0?void 0:t[n][1]},Ka.prototype.has=function(e){return Ja(this.__data__,e)>-1},Ka.prototype.set=function(e,t){var n=this.__data__,r=Ja(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this};var Qa,Za=Ka,Xa=function(e){if(!Aa(e))return!1;var t=La(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t},es=Sa.a["__core-js_shared__"],ts=(Qa=/[^.]+$/.exec(es&&es.keys&&es.keys.IE_PROTO||""))?"Symbol(src)_1."+Qa:"",ns=Function.prototype.toString,rs=function(e){if(null!=e){try{return ns.call(e)}catch(t){}try{return e+""}catch(t){}}return""},is=/^\[object .+?Constructor\]$/,os=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),as=function(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return function(e){return!(!Aa(e)||(t=e,ts&&ts in t))&&(Xa(e)?os:is).test(rs(e));var t}(n)?n:void 0},ss=as(Sa.a,"Map"),cs=as(Object,"create"),ls=Object.prototype.hasOwnProperty,us=Object.prototype.hasOwnProperty;function ds(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}ds.prototype.clear=function(){this.__data__=cs?cs(null):{},this.size=0},ds.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},ds.prototype.get=function(e){var t=this.__data__;if(cs){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return ls.call(t,e)?t[e]:void 0},ds.prototype.has=function(e){var t=this.__data__;return cs?void 0!==t[e]:us.call(t,e)},ds.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=cs&&void 0===t?"__lodash_hash_undefined__":t,this};var fs=ds,hs=function(e,t){var n,r,i=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof t?"string":"hash"]:i.map};function ps(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}ps.prototype.clear=function(){this.size=0,this.__data__={hash:new fs,map:new(ss||Za),string:new fs}},ps.prototype.delete=function(e){var t=hs(this,e).delete(e);return this.size-=t?1:0,t},ps.prototype.get=function(e){return hs(this,e).get(e)},ps.prototype.has=function(e){return hs(this,e).has(e)},ps.prototype.set=function(e,t){var n=hs(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this};var vs=ps;function gs(e){var t=this.__data__=new Za(e);this.size=t.size}gs.prototype.clear=function(){this.__data__=new Za,this.size=0},gs.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},gs.prototype.get=function(e){return this.__data__.get(e)},gs.prototype.has=function(e){return this.__data__.has(e)},gs.prototype.set=function(e,t){var n=this.__data__;if(n instanceof Za){var r=n.__data__;if(!ss||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new vs(r)}return n.set(e,t),this.size=n.size,this};var ms=gs,ys=function(){try{var e=as(Object,"defineProperty");return e({},"",{}),e}catch(t){}}(),ks=function(e,t,n){"__proto__"==t&&ys?ys(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n},_s=Object.prototype.hasOwnProperty,bs=function(e,t,n){var r=e[t];_s.call(e,t)&&Ga(r,n)&&(void 0!==n||t in e)||ks(e,t,n)},ws=function(e,t,n,r){var i=!n;n||(n={});for(var o=-1,a=t.length;++o<a;){var s=t[o],c=r?r(n[s],e[s],s,n,e):void 0;void 0===c&&(c=e[s]),i?ks(n,s,c):bs(n,s,c)}return n},xs=function(e){return Va(e)&&"[object Arguments]"==La(e)},Cs=Object.prototype,Ts=Cs.hasOwnProperty,As=Cs.propertyIsEnumerable,Ss=xs(function(){return arguments}())?xs:function(e){return Va(e)&&Ts.call(e,"callee")&&!As.call(e,"callee")},Es=Array.isArray,Is=n("WOAq"),Os=/^(?:0|[1-9]\d*)$/,Rs=function(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&Os.test(e))&&e>-1&&e%1==0&&e<t},Ps=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991},Ms={};Ms["[object Float32Array]"]=Ms["[object Float64Array]"]=Ms["[object Int8Array]"]=Ms["[object Int16Array]"]=Ms["[object Int32Array]"]=Ms["[object Uint8Array]"]=Ms["[object Uint8ClampedArray]"]=Ms["[object Uint16Array]"]=Ms["[object Uint32Array]"]=!0,Ms["[object Arguments]"]=Ms["[object Array]"]=Ms["[object ArrayBuffer]"]=Ms["[object Boolean]"]=Ms["[object DataView]"]=Ms["[object Date]"]=Ms["[object Error]"]=Ms["[object Function]"]=Ms["[object Map]"]=Ms["[object Number]"]=Ms["[object Object]"]=Ms["[object RegExp]"]=Ms["[object Set]"]=Ms["[object String]"]=Ms["[object WeakMap]"]=!1;var Ns=function(e){return function(t){return e(t)}},Ds=n("xutz"),Fs=Ds.a&&Ds.a.isTypedArray,js=Fs?Ns(Fs):function(e){return Va(e)&&Ps(e.length)&&!!Ms[La(e)]},Ls=Object.prototype.hasOwnProperty,Vs=function(e,t){var n=Es(e),r=!n&&Ss(e),i=!n&&!r&&Object(Is.a)(e),o=!n&&!r&&!i&&js(e),a=n||r||i||o,s=a?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],c=s.length;for(var l in e)!t&&!Ls.call(e,l)||a&&("length"==l||i&&("offset"==l||"parent"==l)||o&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||Rs(l,c))||s.push(l);return s},Bs=Object.prototype,zs=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Bs)},Hs=function(e,t){return function(n){return e(t(n))}},Us=Hs(Object.keys,Object),Ws=Object.prototype.hasOwnProperty,qs=function(e){return null!=e&&Ps(e.length)&&!Xa(e)},Ys=function(e){return qs(e)?Vs(e):function(e){if(!zs(e))return Us(e);var t=[];for(var n in Object(e))Ws.call(e,n)&&"constructor"!=n&&t.push(n);return t}(e)},Gs=Object.prototype.hasOwnProperty,Js=function(e){return qs(e)?Vs(e,!0):function(e){if(!Aa(e))return function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}(e);var t=zs(e),n=[];for(var r in e)("constructor"!=r||!t&&Gs.call(e,r))&&n.push(r);return n}(e)},$s=n("3/ER"),Ks=function(){return[]},Qs=Object.prototype.propertyIsEnumerable,Zs=Object.getOwnPropertySymbols,Xs=Zs?function(e){return null==e?[]:(e=Object(e),function(t,n){for(var r=-1,i=null==t?0:t.length,o=0,a=[];++r<i;){var s=t[r];Qs.call(e,s)&&(a[o++]=s)}return a}(Zs(e)))}:Ks,ec=function(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e},tc=Hs(Object.getPrototypeOf,Object),nc=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)ec(t,Xs(e)),e=tc(e);return t}:Ks,rc=function(e,t,n){var r=t(e);return Es(e)?r:ec(r,n(e))},ic=function(e){return rc(e,Ys,Xs)},oc=function(e){return rc(e,Js,nc)},ac=as(Sa.a,"DataView"),sc=as(Sa.a,"Promise"),cc=as(Sa.a,"Set"),lc=as(Sa.a,"WeakMap"),uc=rs(ac),dc=rs(ss),fc=rs(sc),hc=rs(cc),pc=rs(lc),vc=La;(ac&&"[object DataView]"!=vc(new ac(new ArrayBuffer(1)))||ss&&"[object Map]"!=vc(new ss)||sc&&"[object Promise]"!=vc(sc.resolve())||cc&&"[object Set]"!=vc(new cc)||lc&&"[object WeakMap]"!=vc(new lc))&&(vc=function(e){var t=La(e),n="[object Object]"==t?e.constructor:void 0,r=n?rs(n):"";if(r)switch(r){case uc:return"[object DataView]";case dc:return"[object Map]";case fc:return"[object Promise]";case hc:return"[object Set]";case pc:return"[object WeakMap]"}return t});var gc=vc,mc=Object.prototype.hasOwnProperty,yc=Sa.a.Uint8Array,kc=function(e){var t=new e.constructor(e.byteLength);return new yc(t).set(new yc(e)),t},_c=/\w*$/,bc=Ra?Ra.prototype:void 0,wc=bc?bc.valueOf:void 0,xc=Object.create,Cc=function(){function e(){}return function(t){if(!Aa(t))return{};if(xc)return xc(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}(),Tc=Ds.a&&Ds.a.isMap,Ac=Tc?Ns(Tc):function(e){return Va(e)&&"[object Map]"==gc(e)},Sc=Ds.a&&Ds.a.isSet,Ec=Sc?Ns(Sc):function(e){return Va(e)&&"[object Set]"==gc(e)},Ic={};Ic["[object Arguments]"]=Ic["[object Array]"]=Ic["[object ArrayBuffer]"]=Ic["[object DataView]"]=Ic["[object Boolean]"]=Ic["[object Date]"]=Ic["[object Float32Array]"]=Ic["[object Float64Array]"]=Ic["[object Int8Array]"]=Ic["[object Int16Array]"]=Ic["[object Int32Array]"]=Ic["[object Map]"]=Ic["[object Number]"]=Ic["[object Object]"]=Ic["[object RegExp]"]=Ic["[object Set]"]=Ic["[object String]"]=Ic["[object Symbol]"]=Ic["[object Uint8Array]"]=Ic["[object Uint8ClampedArray]"]=Ic["[object Uint16Array]"]=Ic["[object Uint32Array]"]=!0,Ic["[object Error]"]=Ic["[object Function]"]=Ic["[object WeakMap]"]=!1;var Oc=function e(t,n,r,i,o,a){var s,c=1&n,l=2&n,u=4&n;if(r&&(s=o?r(t,i,o,a):r(t)),void 0!==s)return s;if(!Aa(t))return t;var d=Es(t);if(d){if(s=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&mc.call(e,"index")&&(n.index=e.index,n.input=e.input),n}(t),!c)return function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}(t,s)}else{var f=gc(t),h="[object Function]"==f||"[object GeneratorFunction]"==f;if(Object(Is.a)(t))return Object($s.a)(t,c);if("[object Object]"==f||"[object Arguments]"==f||h&&!o){if(s=l||h?{}:function(e){return"function"!=typeof e.constructor||zs(e)?{}:Cc(tc(e))}(t),!c)return l?function(e,t){return ws(e,nc(e),t)}(t,function(e,t){return e&&ws(t,Js(t),e)}(s,t)):function(e,t){return ws(e,Xs(e),t)}(t,function(e,t){return e&&ws(t,Ys(t),e)}(s,t))}else{if(!Ic[f])return o?t:{};s=function(e,t,n){var r,i,o=e.constructor;switch(t){case"[object ArrayBuffer]":return kc(e);case"[object Boolean]":case"[object Date]":return new o(+e);case"[object DataView]":return function(e,t){var n=t?kc(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return function(e,t){var n=t?kc(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}(e,n);case"[object Map]":return new o;case"[object Number]":case"[object String]":return new o(e);case"[object RegExp]":return(i=new(r=e).constructor(r.source,_c.exec(r))).lastIndex=r.lastIndex,i;case"[object Set]":return new o;case"[object Symbol]":return wc?Object(wc.call(e)):{}}}(t,f,c)}}a||(a=new ms);var p=a.get(t);if(p)return p;a.set(t,s),Ec(t)?t.forEach((function(i){s.add(e(i,n,r,i,t,a))})):Ac(t)&&t.forEach((function(i,o){s.set(o,e(i,n,r,o,t,a))}));var v=d?void 0:(u?l?oc:ic:l?Js:Ys)(t);return function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n););}(v||t,(function(i,o){v&&(i=t[o=i]),bs(s,o,e(i,n,r,o,t,a))})),s},Rc=Function.prototype.toString,Pc=Object.prototype.hasOwnProperty,Mc=Rc.call(Object);function Nc(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Set,n=[e],r=new Set;n.length>0;){var i=n.shift();if(!(r.has(i)||Dc(i)||t.has(i)))if(r.add(i),i[Symbol.iterator])try{var o,a=_createForOfIteratorHelper(i);try{for(a.s();!(o=a.n()).done;){var s=o.value;n.push(s)}}catch(l){a.e(l)}finally{a.f()}}catch(l){}else for(var c in i)"defaultValue"!==c&&n.push(i[c])}return r}function Dc(e){var t=Object.prototype.toString.call(e),n=typeof e;return"number"===n||"boolean"===n||"string"===n||"symbol"===n||"function"===n||"[object Date]"===t||"[object RegExp]"===t||"[object Module]"===t||null==e||e instanceof EventTarget||e instanceof Event}var Fc,jc=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return _classCallCheck(this,n),(r=t.call(this,i))._editor=null,r._throttledSave=function(e,t,n){var r=!0,i=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return Aa(void 0)&&(r="leading"in void 0?!!(void 0).leading:r,i="trailing"in void 0?!!(void 0).trailing:i),function(e,t,n){var r,i,o,a,s,c,l=0,u=!1,d=!1,f=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function h(t){var n=r,o=i;return r=i=void 0,l=t,a=e.apply(o,n)}function p(e){return l=e,s=setTimeout(g,t),u?h(e):a}function v(e){var n=e-c;return void 0===c||n>=t||n<0||d&&e-l>=o}function g(){var e=Ea();if(v(e))return m(e);s=setTimeout(g,function(e){var n=t-(e-c);return d?Ya(n,o-(e-l)):n}(e))}function m(e){return s=void 0,f&&r?h(e):(r=i=void 0,a)}function y(){var e=Ea(),n=v(e);if(r=arguments,i=this,c=e,n){if(void 0===s)return p(c);if(d)return clearTimeout(s),s=setTimeout(g,t),h(c)}return void 0===s&&(s=setTimeout(g,t)),a}return t=Wa(t)||0,Aa(n)&&(u=!!n.leading,o=(d="maxWait"in n)?qa(Wa(n.maxWait)||0,t):o,f="trailing"in n?!!n.trailing:f),y.cancel=function(){void 0!==s&&clearTimeout(s),l=0,r=c=i=s=void 0},y.flush=function(){return void 0===s?a:m(Ea())},y}(e,t,{leading:r,maxWait:t,trailing:i})}(r._save.bind(_assertThisInitialized(r)),"number"==typeof i.saveInterval?i.saveInterval:5e3),r._creator=function(t,n){return e.create(t,n)},r._destructor=function(e){return e.destroy()},r}return _createClass(n,[{key:"editor",get:function(){return this._editor}},{key:"_item",get:function(){return this._editor}},{key:"_restart",value:function(){var e=this;return Promise.resolve().then((function(){return e.state="initializing",e._fire("stateChange"),e._destroy()})).catch((function(e){console.error("An error happened during the editor destroying.",e)})).then((function(){if("string"==typeof e._elementOrData)return e.create(e._data,e._config,e._config.context);var t=Object.assign({},e._config,{initialData:e._data});return e.create(e._elementOrData,t,t.context)})).then((function(){e._fire("restart")}))}},{key:"create",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._elementOrData,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._config,i=arguments.length>2?arguments[2]:void 0;return Promise.resolve().then((function(){return _get3(_getPrototypeOf(n.prototype),"_startErrorHandling",e).call(e),e._elementOrData=t,e._config=e._cloneEditorConfiguration(r)||{},e._config.context=i,e._creator(t,e._config)})).then((function(t){e._editor=t,t.model.document.on("change:data",e._throttledSave),e._lastDocumentVersion=t.model.document.version,e._data=e._getData(),e.state="ready",e._fire("stateChange")}))}},{key:"destroy",value:function(){var e=this;return Promise.resolve().then((function(){return e.state="destroyed",e._fire("stateChange"),_get3(_getPrototypeOf(n.prototype),"destroy",e).call(e),e._destroy()}))}},{key:"_destroy",value:function(){var e=this;return Promise.resolve().then((function(){e._stopErrorHandling(),e._throttledSave.flush();var t=e._editor;return e._editor=null,e._destructor(t)}))}},{key:"_save",value:function(){var e=this._editor.model.document.version;if(e!==this._lastDocumentVersion)try{this._data=this._getData(),this._lastDocumentVersion=e}catch(t){console.error(t,"An error happened during restoring editor data. Editor will be restored from the previously saved data.")}}},{key:"_setExcludedProperties",value:function(e){this._excludedProps=e}},{key:"_getData",value:function(){var e,t={},n=_createForOfIteratorHelper(this._editor.model.document.getRootNames());try{for(n.s();!(e=n.n()).done;){var r=e.value;t[r]=this._editor.data.get({rootName:r})}}catch(i){n.e(i)}finally{n.f()}return t}},{key:"_isErrorComingFromThisItem",value:function(e){return function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Set;if(e===t&&"object"==typeof(n=e)&&null!==n)return!0;var i,o=Nc(e,r),a=Nc(t,r),s=_createForOfIteratorHelper(o);try{for(s.s();!(i=s.n()).done;){var c=i.value;if(a.has(c))return!0}}catch(l){s.e(l)}finally{s.f()}return!1}(this._editor,e.context,this._excludedProps)}},{key:"_cloneEditorConfiguration",value:function(e){return function(e,t){return Oc(e,5,t="function"==typeof t?t:void 0)}(e,(function(e,t){return function(e){return Va(e)&&1===e.nodeType&&!function(e){if(!Va(e)||"[object Object]"!=La(e))return!1;var t=tc(e);if(null===t)return!0;var n=Pc.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&Rc.call(n)==Mc}(e)}(e)||"context"===t?e:void 0}))}}]),n}(function(){function e(t){var n=this;if(_classCallCheck(this,e),this.crashes=[],this.state="initializing",this._crashNumberLimit="number"==typeof t.crashNumberLimit?t.crashNumberLimit:3,this._now=Date.now,this._minimumNonErrorTimePeriod="number"==typeof t.minimumNonErrorTimePeriod?t.minimumNonErrorTimePeriod:5e3,this._boundErrorHandler=function(e){var t=e.error||e.reason;t instanceof Error&&n._handleError(t,e)},this._listeners={},!this._restart)throw new Error("The Watchdog class was split into the abstract `Watchdog` class and the `EditorWatchdog` class. Please, use `EditorWatchdog` if you have used the `Watchdog` class previously.")}return _createClass(e,[{key:"setCreator",value:function(e){this._creator=e}},{key:"setDestructor",value:function(e){this._destructor=e}},{key:"destroy",value:function(){this._stopErrorHandling(),this._listeners={}}},{key:"on",value:function(e,t){this._listeners[e]||(this._listeners[e]=[]),this._listeners[e].push(t)}},{key:"off",value:function(e,t){this._listeners[e]=this._listeners[e].filter((function(e){return e!==t}))}},{key:"_fire",value:function(e){for(var t=this._listeners[e]||[],n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var o,a=_createForOfIteratorHelper(t);try{for(a.s();!(o=a.n()).done;){var s=o.value;s.apply(this,[null].concat(r))}}catch(c){a.e(c)}finally{a.f()}}},{key:"_startErrorHandling",value:function(){window.addEventListener("error",this._boundErrorHandler),window.addEventListener("unhandledrejection",this._boundErrorHandler)}},{key:"_stopErrorHandling",value:function(){window.removeEventListener("error",this._boundErrorHandler),window.removeEventListener("unhandledrejection",this._boundErrorHandler)}},{key:"_handleError",value:function(e,t){if(this._shouldReactToError(e)){this.crashes.push({message:e.message,stack:e.stack,filename:t.filename,lineno:t.lineno,colno:t.colno,date:this._now()});var n=this._shouldRestart();this.state="crashed",this._fire("stateChange"),this._fire("error",{error:e,causesRestart:n}),n?this._restart():(this.state="crashedPermanently",this._fire("stateChange"))}}},{key:"_shouldReactToError",value:function(e){return e.is&&e.is("CKEditorError")&&null!=e.context&&"ready"===this.state&&this._isErrorComingFromThisItem(e)}},{key:"_shouldRestart",value:function(){return this.crashes.length<=this._crashNumberLimit||(this.crashes[this.crashes.length-1].date-this.crashes[this.crashes.length-1-this._crashNumberLimit].date)/this._crashNumberLimit>this._minimumNonErrorTimePeriod}}]),e}()),Lc=new Array(256).fill(0).map((function(e,t){return("0"+t.toString(16)).slice(-2)})),Vc=function(){function e(t,n){var r,i,o,a;_classCallCheck(this,e),this.config={},this.data="",this.tagName="div",this.ready=new qr,this.change=new qr,this.blur=new qr,this.focus=new qr,this.error=new qr,this.initiallyDisabled=!1,this.isEditorSettingData=!1,this.id=(r=4294967296*Math.random()>>>0,i=4294967296*Math.random()>>>0,o=4294967296*Math.random()>>>0,a=4294967296*Math.random()>>>0,"e"+Lc[r>>0&255]+Lc[r>>8&255]+Lc[r>>16&255]+Lc[r>>24&255]+Lc[i>>0&255]+Lc[i>>8&255]+Lc[i>>16&255]+Lc[i>>24&255]+Lc[o>>0&255]+Lc[o>>8&255]+Lc[o>>16&255]+Lc[o>>24&255]+Lc[a>>0&255]+Lc[a>>8&255]+Lc[a>>16&255]+Lc[a>>24&255]),this.ngZone=n,this.elementRef=t}return _createClass(e,[{key:"disabled",get:function(){return this.editorInstance?this.editorInstance.isReadOnly:this.initiallyDisabled},set:function(e){this.setDisabledState(e)}},{key:"editorInstance",get:function(){var e=this.editorWatchdog;return this.watchdog&&(e=this.watchdog._watchdogs.get(this.id)),e?e.editor:null}},{key:"ngAfterViewInit",value:function(){this.attachToWatchdog()}},{key:"ngOnDestroy",value:function(){return Ta(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.watchdog){e.next=5;break}return e.next=3,this.watchdog.remove(this.id);case 3:e.next=10;break;case 5:if(e.t0=this.editorWatchdog&&this.editorWatchdog.editor,!e.t0){e.next=10;break}return e.next=9,this.editorWatchdog.destroy();case 9:this.editorWatchdog=void 0;case 10:case"end":return e.stop()}}),e,this)})))}},{key:"writeValue",value:function(e){null===e&&(e=""),this.editorInstance?(this.isEditorSettingData=!0,this.editorInstance.setData(e),this.isEditorSettingData=!1):(this.data=e,this.editorElement&&(this.editorElement.innerHTML=this.data))}},{key:"registerOnChange",value:function(e){this.cvaOnChange=e}},{key:"registerOnTouched",value:function(e){this.cvaOnTouched=e}},{key:"setDisabledState",value:function(e){this.editorInstance&&(this.editorInstance.isReadOnly=e),this.initiallyDisabled=e}},{key:"attachToWatchdog",value:function(){var e=this,t=function(t,n){return Ta(e,void 0,void 0,regeneratorRuntime.mark((function e(){var r=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.ngZone.runOutsideAngular((function(){return Ta(r,void 0,void 0,regeneratorRuntime.mark((function e(){var r,i=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.elementRef.nativeElement.appendChild(t),e.next=3,this.editor.create(t,n);case 3:return r=e.sent,e.abrupt("return",(this.initiallyDisabled&&(r.isReadOnly=this.initiallyDisabled),this.ngZone.run((function(){i.ready.emit(r)})),this.setUpEditorEvents(r),r));case 5:case"end":return e.stop()}}),e,this)})))})));case 1:case"end":return e.stop()}}),e,this)})))},n=function(t){return Ta(e,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.destroy();case 2:this.elementRef.nativeElement.removeChild(this.editorElement);case 3:case"end":return e.stop()}}),e,this)})))},r=function(){e.ngZone.run((function(){e.error.emit()}))},i=document.createElement(this.tagName),o=this.getConfig();if(this.editorElement=i,this.watchdog)this.watchdog.add({id:this.id,type:"editor",creator:t,destructor:n,sourceElementOrData:i,config:o}),this.watchdog.on("itemError",(function(t,n){n.itemId===e.id&&r()}));else{var a=new jc(this.editor);a.setCreator(t),a.setDestructor(n),a.on("error",r),this.editorWatchdog=a,this.editorWatchdog.create(i,o)}}},{key:"getConfig",value:function(){if(this.data&&this.config.initialData)throw new Error("Editor data should be provided either using `config.initialData` or `data` properties.");return Object.assign(Object.assign({},this.config),{initialData:this.config.initialData||this.data||""})}},{key:"setUpEditorEvents",value:function(e){var t=this,n=e.editing.view.document;e.model.document.on("change:data",(function(n){t.ngZone.run((function(){if(t.cvaOnChange&&!t.isEditorSettingData){var r=e.getData();t.cvaOnChange(r)}t.change.emit({event:n,editor:e})}))})),n.on("focus",(function(n){t.ngZone.run((function(){t.focus.emit({event:n,editor:e})}))})),n.on("blur",(function(n){t.ngZone.run((function(){t.cvaOnTouched&&t.cvaOnTouched(),t.blur.emit({event:n,editor:e})}))}))}}]),e}(),Bc=function e(){_classCallCheck(this,e)},zc=function e(){_classCallCheck(this,e)},Hc=void 0,Uc=["en",[["a","p"],["AM","PM"],Hc],[["AM","PM"],Hc,Hc],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Hc,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Hc,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Hc,"{1} 'at' {0}",Hc],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"$","US Dollar",{},function(e){var t=Math.floor(Math.abs(e)),n=e.toString().replace(/^[^.]*\.?/,"").length;return 1===t&&0===n?1:5}],Wc={},qc=((Fc={Zero:0,One:1,Two:2,Few:3,Many:4,Other:5})[Fc.Zero]="Zero",Fc[Fc.One]="One",Fc[Fc.Two]="Two",Fc[Fc.Few]="Few",Fc[Fc.Many]="Many",Fc[Fc.Other]="Other",Fc),Yc=new ve("UseV4Plurals"),Gc=function e(){_classCallCheck(this,e)},Jc=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var i;return _classCallCheck(this,n),(i=t.call(this)).locale=e,i.deprecatedPluralFn=r,i}return _createClass(n,[{key:"getPluralCategory",value:function(e,t){switch(this.deprecatedPluralFn?this.deprecatedPluralFn(t||this.locale,e):function(e){return function(e){var t=e.toLowerCase().replace(/_/g,"-"),n=Wc[t];if(n)return n;var r=t.split("-")[0];if(n=Wc[r])return n;if("en"===r)return Uc;throw new Error('Missing locale data for the locale "'.concat(e,'".'))}(e)[18]}(t||this.locale)(e)){case qc.Zero:return"zero";case qc.One:return"one";case qc.Two:return"two";case qc.Few:return"few";case qc.Many:return"many";default:return"other"}}}]),n}(Gc),$c=function(){function e(t,n){_classCallCheck(this,e),this._viewContainer=t,this._context=new Kc,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=n}return _createClass(e,[{key:"ngIf",set:function(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}},{key:"ngIfThen",set:function(e){Qc("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}},{key:"ngIfElse",set:function(e){Qc("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}},{key:"_updateView",value:function(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}}],[{key:"ngTemplateGuard_ngIf",value:function(e,t){return!0}}]),e}(),Kc=function e(){_classCallCheck(this,e),this.$implicit=null,this.ngIf=null};function Qc(e,t){if(t&&!t.createEmbeddedView)throw new Error("".concat(e," must be a TemplateRef, but received '").concat(ie(t),"'."))}var Zc=function e(){_classCallCheck(this,e)},Xc=new ve("DocumentToken"),el=null;function tl(){return el}var nl,rl={class:"className",innerHtml:"innerHTML",readonly:"readOnly",tabindex:"tabIndex"},il={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ol={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},al=function(){if(fe.Node)return fe.Node.prototype.contains||function(e){return!!(16&this.compareDocumentPosition(e))}}(),sl=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"parse",value:function(e){throw new Error("parse not implemented")}},{key:"hasProperty",value:function(e,t){return t in e}},{key:"setProperty",value:function(e,t,n){e[t]=n}},{key:"getProperty",value:function(e,t){return e[t]}},{key:"invoke",value:function(e,t,n){e[t].apply(e,_toConsumableArray(n))}},{key:"logError",value:function(e){window.console&&(console.error?console.error(e):console.log(e))}},{key:"log",value:function(e){window.console&&window.console.log&&window.console.log(e)}},{key:"logGroup",value:function(e){window.console&&window.console.group&&window.console.group(e)}},{key:"logGroupEnd",value:function(){window.console&&window.console.groupEnd&&window.console.groupEnd()}},{key:"attrToPropMap",get:function(){return rl}},{key:"contains",value:function(e,t){return al.call(e,t)}},{key:"querySelector",value:function(e,t){return e.querySelector(t)}},{key:"querySelectorAll",value:function(e,t){return e.querySelectorAll(t)}},{key:"on",value:function(e,t,n){e.addEventListener(t,n,!1)}},{key:"onAndCancel",value:function(e,t,n){return e.addEventListener(t,n,!1),function(){e.removeEventListener(t,n,!1)}}},{key:"dispatchEvent",value:function(e,t){e.dispatchEvent(t)}},{key:"createMouseEvent",value:function(e){var t=this.getDefaultDocument().createEvent("MouseEvent");return t.initEvent(e,!0,!0),t}},{key:"createEvent",value:function(e){var t=this.getDefaultDocument().createEvent("Event");return t.initEvent(e,!0,!0),t}},{key:"preventDefault",value:function(e){e.preventDefault(),e.returnValue=!1}},{key:"isPrevented",value:function(e){return e.defaultPrevented||null!=e.returnValue&&!e.returnValue}},{key:"getInnerHTML",value:function(e){return e.innerHTML}},{key:"getTemplateContent",value:function(e){return"content"in e&&this.isTemplateElement(e)?e.content:null}},{key:"getOuterHTML",value:function(e){return e.outerHTML}},{key:"nodeName",value:function(e){return e.nodeName}},{key:"nodeValue",value:function(e){return e.nodeValue}},{key:"type",value:function(e){return e.type}},{key:"content",value:function(e){return this.hasProperty(e,"content")?e.content:e}},{key:"firstChild",value:function(e){return e.firstChild}},{key:"nextSibling",value:function(e){return e.nextSibling}},{key:"parentElement",value:function(e){return e.parentNode}},{key:"childNodes",value:function(e){return e.childNodes}},{key:"childNodesAsList",value:function(e){for(var t=e.childNodes,n=new Array(t.length),r=0;r<t.length;r++)n[r]=t[r];return n}},{key:"clearNodes",value:function(e){for(;e.firstChild;)e.removeChild(e.firstChild)}},{key:"appendChild",value:function(e,t){e.appendChild(t)}},{key:"removeChild",value:function(e,t){e.removeChild(t)}},{key:"replaceChild",value:function(e,t,n){e.replaceChild(t,n)}},{key:"remove",value:function(e){return e.parentNode&&e.parentNode.removeChild(e),e}},{key:"insertBefore",value:function(e,t,n){e.insertBefore(n,t)}},{key:"insertAllBefore",value:function(e,t,n){n.forEach((function(n){return e.insertBefore(n,t)}))}},{key:"insertAfter",value:function(e,t,n){e.insertBefore(n,t.nextSibling)}},{key:"setInnerHTML",value:function(e,t){e.innerHTML=t}},{key:"getText",value:function(e){return e.textContent}},{key:"setText",value:function(e,t){e.textContent=t}},{key:"getValue",value:function(e){return e.value}},{key:"setValue",value:function(e,t){e.value=t}},{key:"getChecked",value:function(e){return e.checked}},{key:"setChecked",value:function(e,t){e.checked=t}},{key:"createComment",value:function(e){return this.getDefaultDocument().createComment(e)}},{key:"createTemplate",value:function(e){var t=this.getDefaultDocument().createElement("template");return t.innerHTML=e,t}},{key:"createElement",value:function(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}},{key:"createElementNS",value:function(e,t,n){return(n=n||this.getDefaultDocument()).createElementNS(e,t)}},{key:"createTextNode",value:function(e,t){return(t=t||this.getDefaultDocument()).createTextNode(e)}},{key:"createScriptTag",value:function(e,t,n){var r=(n=n||this.getDefaultDocument()).createElement("SCRIPT");return r.setAttribute(e,t),r}},{key:"createStyleElement",value:function(e,t){var n=(t=t||this.getDefaultDocument()).createElement("style");return this.appendChild(n,this.createTextNode(e,t)),n}},{key:"createShadowRoot",value:function(e){return e.createShadowRoot()}},{key:"getShadowRoot",value:function(e){return e.shadowRoot}},{key:"getHost",value:function(e){return e.host}},{key:"clone",value:function(e){return e.cloneNode(!0)}},{key:"getElementsByClassName",value:function(e,t){return e.getElementsByClassName(t)}},{key:"getElementsByTagName",value:function(e,t){return e.getElementsByTagName(t)}},{key:"classList",value:function(e){return Array.prototype.slice.call(e.classList,0)}},{key:"addClass",value:function(e,t){e.classList.add(t)}},{key:"removeClass",value:function(e,t){e.classList.remove(t)}},{key:"hasClass",value:function(e,t){return e.classList.contains(t)}},{key:"setStyle",value:function(e,t,n){e.style[t]=n}},{key:"removeStyle",value:function(e,t){e.style[t]=""}},{key:"getStyle",value:function(e,t){return e.style[t]}},{key:"hasStyle",value:function(e,t,n){var r=this.getStyle(e,t)||"";return n?r==n:r.length>0}},{key:"tagName",value:function(e){return e.tagName}},{key:"attributeMap",value:function(e){for(var t=new Map,n=e.attributes,r=0;r<n.length;r++){var i=n.item(r);t.set(i.name,i.value)}return t}},{key:"hasAttribute",value:function(e,t){return e.hasAttribute(t)}},{key:"hasAttributeNS",value:function(e,t,n){return e.hasAttributeNS(t,n)}},{key:"getAttribute",value:function(e,t){return e.getAttribute(t)}},{key:"getAttributeNS",value:function(e,t,n){return e.getAttributeNS(t,n)}},{key:"setAttribute",value:function(e,t,n){e.setAttribute(t,n)}},{key:"setAttributeNS",value:function(e,t,n,r){e.setAttributeNS(t,n,r)}},{key:"removeAttribute",value:function(e,t){e.removeAttribute(t)}},{key:"removeAttributeNS",value:function(e,t,n){e.removeAttributeNS(t,n)}},{key:"templateAwareRoot",value:function(e){return this.isTemplateElement(e)?this.content(e):e}},{key:"createHtmlDocument",value:function(){return document.implementation.createHTMLDocument("fakeTitle")}},{key:"getDefaultDocument",value:function(){return document}},{key:"getBoundingClientRect",value:function(e){try{return e.getBoundingClientRect()}catch(t){return{top:0,bottom:0,left:0,right:0,width:0,height:0}}}},{key:"getTitle",value:function(e){return e.title}},{key:"setTitle",value:function(e,t){e.title=t||""}},{key:"elementMatches",value:function(e,t){return!!this.isElementNode(e)&&(e.matches&&e.matches(t)||e.msMatchesSelector&&e.msMatchesSelector(t)||e.webkitMatchesSelector&&e.webkitMatchesSelector(t))}},{key:"isTemplateElement",value:function(e){return this.isElementNode(e)&&"TEMPLATE"===e.nodeName}},{key:"isTextNode",value:function(e){return e.nodeType===Node.TEXT_NODE}},{key:"isCommentNode",value:function(e){return e.nodeType===Node.COMMENT_NODE}},{key:"isElementNode",value:function(e){return e.nodeType===Node.ELEMENT_NODE}},{key:"hasShadowRoot",value:function(e){return null!=e.shadowRoot&&e instanceof HTMLElement}},{key:"isShadowRoot",value:function(e){return e instanceof DocumentFragment}},{key:"importIntoDoc",value:function(e){return document.importNode(this.templateAwareRoot(e),!0)}},{key:"adoptNode",value:function(e){return document.adoptNode(e)}},{key:"getHref",value:function(e){return e.getAttribute("href")}},{key:"getEventKey",value:function(e){var t=e.key;if(null==t){if(null==(t=e.keyIdentifier))return"Unidentified";t.startsWith("U+")&&(t=String.fromCharCode(parseInt(t.substring(2),16)),3===e.location&&ol.hasOwnProperty(t)&&(t=ol[t]))}return il[t]||t}},{key:"getGlobalEventTarget",value:function(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}},{key:"getHistory",value:function(){return window.history}},{key:"getLocation",value:function(){return window.location}},{key:"getBaseHref",value:function(e){var t,n=cl||(cl=document.querySelector("base"))?cl.getAttribute("href"):null;return null==n?null:(t=n,nl||(nl=document.createElement("a")),nl.setAttribute("href",t),"/"===nl.pathname.charAt(0)?nl.pathname:"/"+nl.pathname)}},{key:"resetBaseElement",value:function(){cl=null}},{key:"getUserAgent",value:function(){return window.navigator.userAgent}},{key:"setData",value:function(e,t,n){this.setAttribute(e,"data-"+t,n)}},{key:"getData",value:function(e,t){return this.getAttribute(e,"data-"+t)}},{key:"getComputedStyle",value:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return getComputedStyle(e)}))},{key:"supportsWebAnimation",value:function(){return"function"==typeof Element.prototype.animate}},{key:"performanceNow",value:function(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()}},{key:"supportsCookies",value:function(){return!0}},{key:"getCookie",value:function(e){return function(e,t){t=encodeURIComponent(t);var n,r=_createForOfIteratorHelper(e.split(";"));try{for(r.s();!(n=r.n()).done;){var i=n.value,o=i.indexOf("="),a=_slicedToArray(-1==o?[i,""]:[i.slice(0,o),i.slice(o+1)],2),s=a[0],c=a[1];if(s.trim()===t)return decodeURIComponent(c)}}catch(l){r.e(l)}finally{r.f()}return null}(document.cookie,e)}},{key:"setCookie",value:function(e,t){document.cookie=encodeURIComponent(e)+"="+encodeURIComponent(t)}}],[{key:"makeCurrent",value:function(){var e;e=new n,el||(el=e)}}]),n}(function(e){_inherits(n,e);var t=_createSuper(n);function n(){var e;_classCallCheck(this,n),(e=t.call(this))._animationPrefix=null,e._transitionEnd=null;try{var r=e.createElement("div",document);if(null!=e.getStyle(r,"animationName"))e._animationPrefix="";else for(var i=["Webkit","Moz","O","ms"],o=0;o<i.length;o++)if(null!=e.getStyle(r,i[o]+"AnimationName")){e._animationPrefix="-"+i[o].toLowerCase()+"-";break}var a={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};Object.keys(a).forEach((function(t){null!=e.getStyle(r,t)&&(e._transitionEnd=a[t])}))}catch(s){e._animationPrefix=null,e._transitionEnd=null}return e}return _createClass(n,[{key:"getDistributedNodes",value:function(e){return e.getDistributedNodes()}},{key:"resolveAndSetHref",value:function(e,t,n){e.href=null==n?t:t+"/../"+n}},{key:"supportsDOMEvents",value:function(){return!0}},{key:"supportsNativeShadowDOM",value:function(){return"function"==typeof document.body.createShadowRoot}},{key:"getAnimationPrefix",value:function(){return this._animationPrefix?this._animationPrefix:""}},{key:"getTransitionEnd",value:function(){return this._transitionEnd?this._transitionEnd:""}},{key:"supportsAnimation",value:function(){return null!=this._animationPrefix&&null!=this._transitionEnd}}]),n}(function(){function e(){_classCallCheck(this,e),this.resourceLoaderType=null}return _createClass(e,[{key:"attrToPropMap",get:function(){return this._attrToPropMap},set:function(e){this._attrToPropMap=e}}]),e}())),cl=null;function ll(){return!!window.history.pushState}var ul=new ve("TRANSITION_ID"),dl=[{provide:Gr,useFactory:function(e,t,n){return function(){n.get(Jr).donePromise.then((function(){var n=tl();Array.prototype.slice.apply(n.querySelectorAll(t,"style[ng-transition]")).filter((function(t){return n.getAttribute(t,"ng-transition")===e})).forEach((function(e){return n.remove(e)}))}))}},deps:[ul,Xc,ke],multi:!0}],fl=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"addToWindow",value:function(e){fe.getAngularTestability=function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=e.findTestabilityInTree(t,n);if(null==r)throw new Error("Could not find testability for element.");return r},fe.getAllAngularTestabilities=function(){return e.getAllTestabilities()},fe.getAllAngularRootElements=function(){return e.getAllRootElements()},fe.frameworkStabilizers||(fe.frameworkStabilizers=[]),fe.frameworkStabilizers.push((function(e){var t=fe.getAllAngularTestabilities(),n=t.length,r=!1,i=function(t){r=r||t,0==--n&&e(r)};t.forEach((function(e){e.whenStable(i)}))}))}},{key:"findTestabilityInTree",value:function(e,t,n){if(null==t)return null;var r=e.getTestability(t);return null!=r?r:n?tl().isShadowRoot(t)?this.findTestabilityInTree(e,tl().getHost(t),!0):this.findTestabilityInTree(e,tl().parentElement(t),!0):null}}],[{key:"init",value:function(){var t;t=new e,Ei=t}}]),e}();function hl(e,t){"undefined"!=typeof COMPILED&&COMPILED||((fe.ng=fe.ng||{})[e]=t)}var pl={ApplicationRef:Fi,NgZone:yi};function vl(e){return Hi(e)}var gl=new ve("EventManagerPlugins"),ml=function(){function e(t,n){var r=this;_classCallCheck(this,e),this._zone=n,this._eventNameToPlugin=new Map,t.forEach((function(e){return e.manager=r})),this._plugins=t.slice().reverse()}return _createClass(e,[{key:"addEventListener",value:function(e,t,n){return this._findPluginFor(t).addEventListener(e,t,n)}},{key:"addGlobalEventListener",value:function(e,t,n){return this._findPluginFor(t).addGlobalEventListener(e,t,n)}},{key:"getZone",value:function(){return this._zone}},{key:"_findPluginFor",value:function(e){var t=this._eventNameToPlugin.get(e);if(t)return t;for(var n=this._plugins,r=0;r<n.length;r++){var i=n[r];if(i.supports(e))return this._eventNameToPlugin.set(e,i),i}throw new Error("No event manager plugin found for event "+e)}}]),e}(),yl=function(){function e(t){_classCallCheck(this,e),this._doc=t}return _createClass(e,[{key:"addGlobalEventListener",value:function(e,t,n){var r=tl().getGlobalEventTarget(this._doc,e);if(!r)throw new Error("Unsupported event target ".concat(r," for event ").concat(t));return this.addEventListener(r,t,n)}}]),e}(),kl=function(){function e(){_classCallCheck(this,e),this._stylesSet=new Set}return _createClass(e,[{key:"addStyles",value:function(e){var t=this,n=new Set;e.forEach((function(e){t._stylesSet.has(e)||(t._stylesSet.add(e),n.add(e))})),this.onStylesAdded(n)}},{key:"onStylesAdded",value:function(e){}},{key:"getAllStyles",value:function(){return Array.from(this._stylesSet)}}]),e}(),_l=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this))._doc=e,r._hostNodes=new Set,r._styleNodes=new Set,r._hostNodes.add(e.head),r}return _createClass(n,[{key:"_addStylesToHost",value:function(e,t){var n=this;e.forEach((function(e){var r=n._doc.createElement("style");r.textContent=e,n._styleNodes.add(t.appendChild(r))}))}},{key:"addHost",value:function(e){this._addStylesToHost(this._stylesSet,e),this._hostNodes.add(e)}},{key:"removeHost",value:function(e){this._hostNodes.delete(e)}},{key:"onStylesAdded",value:function(e){var t=this;this._hostNodes.forEach((function(n){return t._addStylesToHost(e,n)}))}},{key:"ngOnDestroy",value:function(){this._styleNodes.forEach((function(e){return tl().remove(e)}))}}]),n}(kl),bl={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},wl=/%COMP%/g;function xl(e,t,n){for(var r=0;r<t.length;r++){var i=t[r];Array.isArray(i)?xl(e,i,n):(i=i.replace(wl,e),n.push(i))}return n}function Cl(e){return function(t){!1===e(t)&&(t.preventDefault(),t.returnValue=!1)}}var Tl=function(){function e(t,n,r){_classCallCheck(this,e),this.eventManager=t,this.sharedStylesHost=n,this.appId=r,this.rendererByCompId=new Map,this.defaultRenderer=new Al(t)}return _createClass(e,[{key:"createRenderer",value:function(e,t){if(!e||!t)return this.defaultRenderer;switch(t.encapsulation){case Oe.Emulated:var n=this.rendererByCompId.get(t.id);return n||(n=new Il(this.eventManager,this.sharedStylesHost,t,this.appId),this.rendererByCompId.set(t.id,n)),n.applyToHost(e),n;case Oe.Native:case Oe.ShadowDom:return new Ol(this.eventManager,this.sharedStylesHost,e,t);default:if(!this.rendererByCompId.has(t.id)){var r=xl(t.id,t.styles,[]);this.sharedStylesHost.addStyles(r),this.rendererByCompId.set(t.id,this.defaultRenderer)}return this.defaultRenderer}}},{key:"begin",value:function(){}},{key:"end",value:function(){}}]),e}(),Al=function(){function e(t){_classCallCheck(this,e),this.eventManager=t,this.data=Object.create(null)}return _createClass(e,[{key:"destroy",value:function(){}},{key:"createElement",value:function(e,t){return t?document.createElementNS(bl[t]||t,e):document.createElement(e)}},{key:"createComment",value:function(e){return document.createComment(e)}},{key:"createText",value:function(e){return document.createTextNode(e)}},{key:"appendChild",value:function(e,t){e.appendChild(t)}},{key:"insertBefore",value:function(e,t,n){e&&e.insertBefore(t,n)}},{key:"removeChild",value:function(e,t){e&&e.removeChild(t)}},{key:"selectRootElement",value:function(e,t){var n="string"==typeof e?document.querySelector(e):e;if(!n)throw new Error('The selector "'.concat(e,'" did not match any elements'));return t||(n.textContent=""),n}},{key:"parentNode",value:function(e){return e.parentNode}},{key:"nextSibling",value:function(e){return e.nextSibling}},{key:"setAttribute",value:function(e,t,n,r){if(r){t="".concat(r,":").concat(t);var i=bl[r];i?e.setAttributeNS(i,t,n):e.setAttribute(t,n)}else e.setAttribute(t,n)}},{key:"removeAttribute",value:function(e,t,n){if(n){var r=bl[n];r?e.removeAttributeNS(r,t):e.removeAttribute("".concat(n,":").concat(t))}else e.removeAttribute(t)}},{key:"addClass",value:function(e,t){e.classList.add(t)}},{key:"removeClass",value:function(e,t){e.classList.remove(t)}},{key:"setStyle",value:function(e,t,n,r){r&Nt.DashCase?e.style.setProperty(t,n,r&Nt.Important?"important":""):e.style[t]=n}},{key:"removeStyle",value:function(e,t,n){n&Nt.DashCase?e.style.removeProperty(t):e.style[t]=""}},{key:"setProperty",value:function(e,t,n){El(t,"property"),e[t]=n}},{key:"setValue",value:function(e,t){e.nodeValue=t}},{key:"listen",value:function(e,t,n){return El(t,"listener"),"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Cl(n)):this.eventManager.addEventListener(e,t,Cl(n))}}]),e}(),Sl="@".charCodeAt(0);function El(e,t){if(e.charCodeAt(0)===Sl)throw new Error("Found the synthetic ".concat(t," ").concat(e,'. Please include either "BrowserAnimationsModule" or "NoopAnimationsModule" in your application.'))}var Il=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i,o){var a;_classCallCheck(this,n),(a=t.call(this,e)).component=i;var s,c=xl(o+"-"+i.id,i.styles,[]);return r.addStyles(c),a.contentAttr="_ngcontent-%COMP%".replace(wl,o+"-"+i.id),a.hostAttr=(s=o+"-"+i.id,"_nghost-%COMP%".replace(wl,s)),a}return _createClass(n,[{key:"applyToHost",value:function(e){_get3(_getPrototypeOf(n.prototype),"setAttribute",this).call(this,e,this.hostAttr,"")}},{key:"createElement",value:function(e,t){var r=_get3(_getPrototypeOf(n.prototype),"createElement",this).call(this,e,t);return _get3(_getPrototypeOf(n.prototype),"setAttribute",this).call(this,r,this.contentAttr,""),r}}]),n}(Al),Ol=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i,o){var a;_classCallCheck(this,n),(a=t.call(this,e)).sharedStylesHost=r,a.hostEl=i,a.component=o,a.shadowRoot=o.encapsulation===Oe.ShadowDom?i.attachShadow({mode:"open"}):i.createShadowRoot(),a.sharedStylesHost.addHost(a.shadowRoot);for(var s=xl(o.id,o.styles,[]),c=0;c<s.length;c++){var l=document.createElement("style");l.textContent=s[c],a.shadowRoot.appendChild(l)}return a}return _createClass(n,[{key:"nodeOrShadowRoot",value:function(e){return e===this.hostEl?this.shadowRoot:e}},{key:"destroy",value:function(){this.sharedStylesHost.removeHost(this.shadowRoot)}},{key:"appendChild",value:function(e,t){return _get3(_getPrototypeOf(n.prototype),"appendChild",this).call(this,this.nodeOrShadowRoot(e),t)}},{key:"insertBefore",value:function(e,t,r){return _get3(_getPrototypeOf(n.prototype),"insertBefore",this).call(this,this.nodeOrShadowRoot(e),t,r)}},{key:"removeChild",value:function(e,t){return _get3(_getPrototypeOf(n.prototype),"removeChild",this).call(this,this.nodeOrShadowRoot(e),t)}},{key:"parentNode",value:function(e){return this.nodeOrShadowRoot(_get3(_getPrototypeOf(n.prototype),"parentNode",this).call(this,this.nodeOrShadowRoot(e)))}}]),n}(Al),Rl="undefined"!=typeof Zone&&Zone.__symbol__||function(e){return"__zone_symbol__"+e},Pl=Rl("addEventListener"),Ml=Rl("removeEventListener"),Nl={},Dl="__zone_symbol__propagationStopped",Fl=function(){var e="undefined"!=typeof Zone&&Zone[Rl("BLACK_LISTED_EVENTS")];if(e){var t={};return e.forEach((function(e){t[e]=e})),t}}(),jl=function(e){return!!Fl&&Fl.hasOwnProperty(e)},Ll=function(e){var t=Nl[e.type];if(t){var n=this[t];if(n){var r=[e];if(1===n.length){var i=n[0];return i.zone!==Zone.current?i.zone.run(i.handler,this,r):i.handler.apply(this,r)}for(var o=n.slice(),a=0;a<o.length&&!0!==e[Dl];a++){var s=o[a];s.zone!==Zone.current?s.zone.run(s.handler,this,r):s.handler.apply(this,r)}}}},Vl=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i){var o;return _classCallCheck(this,n),(o=t.call(this,e)).ngZone=r,i&&function(e){return"server"===e}(i)||o.patchEvent(),o}return _createClass(n,[{key:"patchEvent",value:function(){if("undefined"!=typeof Event&&Event&&Event.prototype&&!Event.prototype.__zone_symbol__stopImmediatePropagation){var e=Event.prototype.__zone_symbol__stopImmediatePropagation=Event.prototype.stopImmediatePropagation;Event.prototype.stopImmediatePropagation=function(){this&&(this[Dl]=!0),e&&e.apply(this,arguments)}}}},{key:"supports",value:function(e){return!0}},{key:"addEventListener",value:function(e,t,n){var r=this,i=n;if(!e[Pl]||yi.isInAngularZone()&&!jl(t))e.addEventListener(t,i,!1);else{var o=Nl[t];o||(o=Nl[t]=Rl("ANGULAR"+t+"FALSE"));var a=e[o],s=a&&a.length>0;a||(a=e[o]=[]);var c=jl(t)?Zone.root:Zone.current;if(0===a.length)a.push({zone:c,handler:i});else{for(var l=!1,u=0;u<a.length;u++)if(a[u].handler===i){l=!0;break}l||a.push({zone:c,handler:i})}s||e[Pl](t,Ll,!1)}return function(){return r.removeEventListener(e,t,i)}}},{key:"removeEventListener",value:function(e,t,n){var r=e[Ml];if(!r)return e.removeEventListener.apply(e,[t,n,!1]);var i=Nl[t],o=i&&e[i];if(!o)return e.removeEventListener.apply(e,[t,n,!1]);for(var a=!1,s=0;s<o.length;s++)if(o[s].handler===n){a=!0,o.splice(s,1);break}a?0===o.length&&r.apply(e,[t,Ll,!1]):e.removeEventListener.apply(e,[t,n,!1])}}]),n}(yl),Bl={pan:!0,panstart:!0,panmove:!0,panend:!0,pancancel:!0,panleft:!0,panright:!0,panup:!0,pandown:!0,pinch:!0,pinchstart:!0,pinchmove:!0,pinchend:!0,pinchcancel:!0,pinchin:!0,pinchout:!0,press:!0,pressup:!0,rotate:!0,rotatestart:!0,rotatemove:!0,rotateend:!0,rotatecancel:!0,swipe:!0,swipeleft:!0,swiperight:!0,swipeup:!0,swipedown:!0,tap:!0},zl=new ve("HammerGestureConfig"),Hl=new ve("HammerLoader"),Ul=function(){function e(){_classCallCheck(this,e),this.events=[],this.overrides={}}return _createClass(e,[{key:"buildHammer",value:function(e){var t=new Hammer(e,this.options);for(var n in t.get("pinch").set({enable:!0}),t.get("rotate").set({enable:!0}),this.overrides)t.get(n).set(this.overrides[n]);return t}}]),e}(),Wl=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i,o){var a;return _classCallCheck(this,n),(a=t.call(this,e))._config=r,a.console=i,a.loader=o,a}return _createClass(n,[{key:"supports",value:function(e){return!(!Bl.hasOwnProperty(e.toLowerCase())&&!this.isCustomEvent(e)||!window.Hammer&&!this.loader&&(this.console.warn('The "'.concat(e,'" event cannot be bound because Hammer.JS is not loaded and no custom loader has been specified.')),1))}},{key:"addEventListener",value:function(e,t,n){var r=this,i=this.manager.getZone();if(t=t.toLowerCase(),!window.Hammer&&this.loader){var o=!1,a=function(){o=!0};return this.loader().then((function(){if(!window.Hammer)return r.console.warn("The custom HAMMER_LOADER completed, but Hammer.JS is not present."),void(a=function(){});o||(a=r.addEventListener(e,t,n))})).catch((function(){r.console.warn('The "'.concat(t,'" event cannot be bound because the custom Hammer.JS loader failed.')),a=function(){}})),function(){a()}}return i.runOutsideAngular((function(){var o=r._config.buildHammer(e),a=function(e){i.runGuarded((function(){n(e)}))};return o.on(t,a),function(){o.off(t,a),"function"==typeof o.destroy&&o.destroy()}}))}},{key:"isCustomEvent",value:function(e){return this._config.events.indexOf(e)>-1}}]),n}(yl),ql=["alt","control","meta","shift"],Yl={alt:function(e){return e.altKey},control:function(e){return e.ctrlKey},meta:function(e){return e.metaKey},shift:function(e){return e.shiftKey}},Gl=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){return _classCallCheck(this,n),t.call(this,e)}return _createClass(n,[{key:"supports",value:function(e){return null!=n.parseEventName(e)}},{key:"addEventListener",value:function(e,t,r){var i=n.parseEventName(t),o=n.eventCallback(i.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular((function(){return tl().onAndCancel(e,i.domEventName,o)}))}}],[{key:"parseEventName",value:function(e){var t=e.toLowerCase().split("."),r=t.shift();if(0===t.length||"keydown"!==r&&"keyup"!==r)return null;var i=n._normalizeKey(t.pop()),o="";if(ql.forEach((function(e){var n=t.indexOf(e);n>-1&&(t.splice(n,1),o+=e+".")})),o+=i,0!=t.length||0===i.length)return null;var a={};return a.domEventName=r,a.fullKey=o,a}},{key:"getEventFullKey",value:function(e){var t="",n=tl().getEventKey(e);return" "===(n=n.toLowerCase())?n="space":"."===n&&(n="dot"),ql.forEach((function(r){r!=n&&(0,Yl[r])(e)&&(t+=r+".")})),t+=n}},{key:"eventCallback",value:function(e,t,r){return function(i){n.getEventFullKey(i)===e&&r.runGuarded((function(){return t(i)}))}}},{key:"_normalizeKey",value:function(e){switch(e){case"esc":return"escape";default:return e}}}]),n}(yl),Jl=function e(){_classCallCheck(this,e)},$l=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this))._doc=e,r}return _createClass(n,[{key:"sanitize",value:function(e,t){if(null==t)return null;switch(e){case at.NONE:return t;case at.HTML:return t instanceof Ql?t.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(t,"HTML"),function(e,t){var n=null;try{qe=qe||new Ve(e);var r=t?String(t):"";n=qe.getInertBodyElement(r);var i=5,o=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=n.innerHTML,n=qe.getInertBodyElement(r)}while(r!==o);var a=new tt,s=a.sanitizeChildren(ot(n)||n);return Le()&&a.sanitizedSomething&&console.warn("WARNING: sanitizing HTML stripped some content, see http://g.co/ng/security#xss"),s}finally{if(n)for(var c=ot(n)||n;c.firstChild;)c.removeChild(c.firstChild)}}(this._doc,String(t)));case at.STYLE:return t instanceof Zl?t.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(t,"Style"),function(e){if(!(e=String(e).trim()))return"";var t=e.match(lt);return t&&He(t[1])===t[1]||e.match(ct)&&function(e){for(var t=!0,n=!0,r=0;r<e.length;r++){var i=e.charAt(r);"'"===i&&n?t=!t:'"'===i&&t&&(n=!n)}return t&&n}(e)?e:(Le()&&console.warn("WARNING: sanitizing unsafe style value ".concat(e," (see http://g.co/ng/security#xss).")),"unsafe")}(t));case at.SCRIPT:if(t instanceof Xl)return t.changingThisBreaksApplicationSecurity;throw this.checkNotSafeValue(t,"Script"),new Error("unsafe value used in a script context");case at.URL:return t instanceof tu||t instanceof eu?t.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(t,"URL"),He(String(t)));case at.RESOURCE_URL:if(t instanceof tu)return t.changingThisBreaksApplicationSecurity;throw this.checkNotSafeValue(t,"ResourceURL"),new Error("unsafe value used in a resource URL context (see http://g.co/ng/security#xss)");default:throw new Error("Unexpected SecurityContext ".concat(e," (see http://g.co/ng/security#xss)"))}}},{key:"checkNotSafeValue",value:function(e,t){if(e instanceof Kl)throw new Error("Required a safe ".concat(t,", got a ").concat(e.getTypeName()," (see http://g.co/ng/security#xss)"))}},{key:"bypassSecurityTrustHtml",value:function(e){return new Ql(e)}},{key:"bypassSecurityTrustStyle",value:function(e){return new Zl(e)}},{key:"bypassSecurityTrustScript",value:function(e){return new Xl(e)}},{key:"bypassSecurityTrustUrl",value:function(e){return new eu(e)}},{key:"bypassSecurityTrustResourceUrl",value:function(e){return new tu(e)}}]),n}(Jl),Kl=function(){function e(t){_classCallCheck(this,e),this.changingThisBreaksApplicationSecurity=t}return _createClass(e,[{key:"toString",value:function(){return"SafeValue must use [property]=binding: "+this.changingThisBreaksApplicationSecurity+" (see http://g.co/ng/security#xss)"}}]),e}(),Ql=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"getTypeName",value:function(){return"HTML"}}]),n}(Kl),Zl=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"getTypeName",value:function(){return"Style"}}]),n}(Kl),Xl=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"getTypeName",value:function(){return"Script"}}]),n}(Kl),eu=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"getTypeName",value:function(){return"URL"}}]),n}(Kl),tu=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"getTypeName",value:function(){return"ResourceURL"}}]),n}(Kl),nu=Ri(Wi,"browser",[{provide:Xr,useValue:"browser"},{provide:Zr,useValue:function(){sl.makeCurrent(),fl.init()},multi:!0},{provide:zc,useClass:function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this))._doc=e,r._init(),r}return _createClass(n,[{key:"_init",value:function(){this.location=tl().getLocation(),this._history=tl().getHistory()}},{key:"getBaseHrefFromDOM",value:function(){return tl().getBaseHref(this._doc)}},{key:"onPopState",value:function(e){tl().getGlobalEventTarget(this._doc,"window").addEventListener("popstate",e,!1)}},{key:"onHashChange",value:function(e){tl().getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",e,!1)}},{key:"href",get:function(){return this.location.href}},{key:"protocol",get:function(){return this.location.protocol}},{key:"hostname",get:function(){return this.location.hostname}},{key:"port",get:function(){return this.location.port}},{key:"pathname",get:function(){return this.location.pathname},set:function(e){this.location.pathname=e}},{key:"search",get:function(){return this.location.search}},{key:"hash",get:function(){return this.location.hash}},{key:"pushState",value:function(e,t,n){ll()?this._history.pushState(e,t,n):this.location.hash=n}},{key:"replaceState",value:function(e,t,n){ll()?this._history.replaceState(e,t,n):this.location.hash=n}},{key:"forward",value:function(){this._history.forward()}},{key:"back",value:function(){this._history.back()}},{key:"getState",value:function(){return this._history.state}}]),n}(zc),deps:[Xc]},{provide:Xc,useFactory:function(){return document},deps:[]}]);function ru(){return new De}var iu=function(){function e(t){if(_classCallCheck(this,e),t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}return _createClass(e,null,[{key:"withServerTransition",value:function(t){return{ngModule:e,providers:[{provide:$r,useValue:t.appId},{provide:ul,useExisting:$r},dl]}}}]),e}();"undefined"!=typeof window&&window;var ou=new ve("NgValueAccessor"),au=function(){function e(){_classCallCheck(this,e),this._accessors=[]}return _createClass(e,[{key:"add",value:function(e,t){this._accessors.push([e,t])}},{key:"remove",value:function(e){for(var t=this._accessors.length-1;t>=0;--t)if(this._accessors[t][1]===e)return void this._accessors.splice(t,1)}},{key:"select",value:function(e){var t=this;this._accessors.forEach((function(n){t._isSameGroup(n,e)&&n[1]!==e&&n[1].fireUncheck(e.value)}))}},{key:"_isSameGroup",value:function(e,t){return!!e[0].control&&e[0]._parent===t._control._parent&&e[1].name===t.name}}]),e}(),su=new ve("NgFormSelectorWarning"),cu=function e(){_classCallCheck(this,e)},lu=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"withConfig",value:function(t){return{ngModule:e,providers:[{provide:su,useValue:t.warnOnDeprecatedNgFormSelector}]}}}]),e}(),uu=_n({encapsulation:2,styles:[],data:{}});function du(e){return ho(0,[(e()(),Qi(0,null,null,0))],null,null)}function fu(e){return ho(0,[(e()(),Qi(0,null,null,0,null,du))],null,null)}var hu=n("EgFD"),pu=function(){function e(){_classCallCheck(this,e),this.ready=new qr,this.Editor=hu,this.data=this.getInitialData(),this.sidebar=document.createElement("div"),this.presenceList=document.createElement("div"),this.boundRefreshDisplayMode=this.refreshDisplayMode.bind(this),this.boundCheckPendingActions=this.checkPendingActions.bind(this)}return _createClass(e,[{key:"editorConfig",get:function(){return{cloudServices:Object.assign({},this.configuration),collaboration:{channelId:this.channelId},sidebar:{container:this.sidebar},presenceList:{container:this.presenceList}}}},{key:"ngAfterViewInit",value:function(){if(!this.sidebarContainer||!this.presenceListContainer)throw new Error("Div containers for sidebar or presence list were not found");this.sidebarContainer.nativeElement.appendChild(this.sidebar),this.presenceListContainer.nativeElement.appendChild(this.presenceList)}},{key:"ngOnDestroy",value:function(){window.removeEventListener("resize",this.boundRefreshDisplayMode),window.removeEventListener("beforeunload",this.boundCheckPendingActions)}},{key:"onReady",value:function(e){this.editor=e,this.ready.emit(e),window.addEventListener("beforeunload",this.boundCheckPendingActions),window.addEventListener("resize",this.boundRefreshDisplayMode),this.refreshDisplayMode()}},{key:"checkPendingActions",value:function(e){this.editor.plugins.get("PendingActions").hasAny&&(e.preventDefault(),e.returnValue=!0)}},{key:"refreshDisplayMode",value:function(){var e=this.editor.plugins.get("AnnotationsUIs"),t=this.sidebarContainer.nativeElement;window.innerWidth<1070?(t.classList.remove("narrow"),t.classList.add("hidden"),e.switchTo("inline")):window.innerWidth<1300?(t.classList.remove("hidden"),t.classList.add("narrow"),e.switchTo("narrowSidebar")):(t.classList.remove("hidden","narrow"),e.switchTo("wideSidebar"))}},{key:"getInitialData",value:function(){return'\n\t<h2>Bilingual Personality Disorder</h2>\n\n\t<figure class="image image-style-side">\n\t\t<img src="https://c.cksource.com/a/1/img/docs/sample-image-bilingual-personality-disorder.jpg">\n\t\t<figcaption>\n\t\t\tOne language, one person.\n\t\t</figcaption>\n\t</figure>\n\n\t<p>\n\t\tThis may be the first time you hear about this made-up disorder but it actually isn\u2019t so far from the truth. Even the studies\n\t\tthat were conducted almost half a century show that <strong>the language you speak has more effects on you than you realize</strong>.\n\t</p>\n\t<p>\n\t\tOne of the very first experiments conducted on this topic dates back to 1964.\n\t\t<a href="https://www.researchgate.net/publication/9440038_Language_and_TAT_content_in_bilinguals">In the experiment</a>\n\t\tdesigned by linguist Ervin-Tripp who is an expert in psycholinguistic and sociolinguistic studies, adults who are bilingual\n\t\tin English in French were showed series of pictures and were asked to create 3-minute stories. In the end participants emphasized\n\t\tdrastically different dynamics for stories in English and French.\n\t</p>\n\t<p>\n\t\tAnother ground-breaking experiment which included bilingual Japanese women married to American men in San Francisco were asked\n\t\tto complete sentences. The goal of the experiment was to investigate whether or not human feelings and thoughts are expressed\n\t\tdifferently in <strong>different language mindsets</strong>.\n\t</p>\n\t<p>Here is a sample from the the experiment:</p>\n\n\t<table>\n\t\t<thead>\n\t\t\t<tr>\n\t\t\t\t<th></th>\n\t\t\t\t<th>English</th>\n\t\t\t\t<th>Japanese</th>\n\t\t\t</tr>\n\t\t</thead>\n\t\t<tbody>\n\t\t\t<tr>\n\t\t\t\t<td>Real friends should</td>\n\t\t\t\t<td>Be very frank</td>\n\t\t\t\t<td>Help each other</td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td>I will probably become</td>\n\t\t\t\t<td>A teacher</td>\n\t\t\t\t<td>A housewife</td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td>When there is a conflict with family</td>\n\t\t\t\t<td>I do what I want</td>\n\t\t\t\t<td>It\'s a time of great unhappiness</td>\n\t\t\t</tr>\n\t\t</tbody>\n\t</table>\n\n\t<p>\n\t\tMore recent <a href="https://books.google.pl/books?id=1LMhWGHGkRUC">studies</a> show, the language a person speaks affects\n\t\ttheir cognition, behavior, emotions and hence <strong>their personality</strong>. This shouldn\u2019t come as a surprise\n\t\t<a href="https://en.wikipedia.org/wiki/Lateralization_of_brain_function">since wealready know</a> that different regions\n\t\tof the brain become more active depending on the person\u2019s activity at hand. The structure, information and especially\n\t\t<strong>the culture</strong> of languages varies substantially and the language a person speaks is an essential element of daily life.\n\t</p>\n'}}]),e}(),vu=_n({encapsulation:0,styles:[[""]],data:{}});function gu(e){return ho(0,[ro(402653184,1,{sidebarContainer:0}),ro(402653184,2,{presenceListContainer:0}),(e()(),Zi(2,0,null,null,13,"header",[],null,null,null,null,null)),(e()(),Zi(3,0,null,null,12,"div",[["class","centered"]],null,null,null,null,null)),(e()(),Zi(4,0,null,null,3,"h1",[],null,null,null,null,null)),(e()(),Zi(5,0,null,null,2,"a",[["href","https://ckeditor.com/ckeditor-5/"],["rel","noopener noreferrer"],["target","_blank"]],null,null,null,null,null)),(e()(),Zi(6,0,null,null,0,"img",[["alt","CKEditor 5 logo"],["src","https://c.cksource.com/a/1/logos/ckeditor5.svg"]],null,null,null,null,null)),(e()(),lo(-1,null,[" CKEditor 5 "])),(e()(),Zi(8,0,null,null,7,"nav",[],null,null,null,null,null)),(e()(),Zi(9,0,null,null,6,"ul",[],null,null,null,null,null)),(e()(),Zi(10,0,null,null,2,"li",[],null,null,null,null,null)),(e()(),Zi(11,0,null,null,1,"a",[["href","https://ckeditor.com/collaboration/"],["rel","noopener noreferrer"],["target","_blank"]],null,null,null,null,null)),(e()(),lo(-1,null,["Website"])),(e()(),Zi(13,0,null,null,2,"li",[],null,null,null,null,null)),(e()(),Zi(14,0,null,null,1,"a",[["href","https://ckeditor.com/docs/ckeditor5/latest/features/collaboration/real-time-collaboration/real-time-collaboration.html"],["rel","noopener noreferrer"],["target","_blank"]],null,null,null,null,null)),(e()(),lo(-1,null,["Documentation"])),(e()(),Zi(16,0,null,null,14,"main",[],null,null,null,null,null)),(e()(),Zi(17,0,null,null,5,"div",[["class","message"]],null,null,null,null,null)),(e()(),Zi(18,0,null,null,4,"div",[["class","centered"]],null,null,null,null,null)),(e()(),Zi(19,0,null,null,1,"h1",[],null,null,null,null,null)),(e()(),lo(-1,null,["CKEditor5 real-time collaboration sample for Angular"])),(e()(),Zi(21,0,null,null,1,"p",[],null,null,null,null,null)),(e()(),lo(-1,null,[" Open this sample in another browser tab to start real-time collaborative editing. "])),(e()(),Zi(23,0,null,null,7,"div",[["class","centered"]],null,null,null,null,null)),(e()(),Zi(24,0,null,null,1,"div",[["class","row row-presence"]],null,null,null,null,null)),(e()(),Zi(25,0,[[2,0],["presenceList",1]],null,0,"div",[["class","presence"]],null,null,null,null,null)),(e()(),Zi(26,0,null,null,4,"div",[["class","row row-editor"]],null,null,null,null,null)),(e()(),Zi(27,0,null,null,2,"ckeditor",[],null,[[null,"ready"]],(function(e,t,n){var r=!0;return"ready"===t&&(r=!1!==e.component.onReady(n)&&r),r}),fu,uu)),(t=ou,n=function(e){return[e]},r=[Vc],Or(-1,5120,null,0,t,n,r)),Ir(29,4374528,null,0,Vc,[Rt,yi],{editor:[0,"editor"],config:[1,"config"],data:[2,"data"]},{ready:"ready"}),(e()(),Zi(30,0,[[1,0],["sidebar",1]],null,0,"div",[["class","sidebar"]],null,null,null,null,null)),(e()(),Zi(31,0,null,null,10,"footer",[],null,null,null,null,null)),(e()(),Zi(32,0,null,null,9,"div",[["class","centered"]],null,null,null,null,null)),(e()(),Zi(33,0,null,null,3,"p",[],null,null,null,null,null)),(e()(),Zi(34,0,null,null,1,"a",[["href","https://ckeditor.com/ckeditor-5/"],["rel","noopener noreferrer"],["target","_blank"]],null,null,null,null,null)),(e()(),lo(-1,null,["CKEditor 5"])),(e()(),lo(-1,null,[" \u2013 Rich text editor of tomorrow, available today "])),(e()(),Zi(37,0,null,null,4,"p",[],null,null,null,null,null)),(e()(),lo(-1,null,[" Copyright \xa9 2003-2019, "])),(e()(),Zi(39,0,null,null,1,"a",[["href","https://cksource.com/"],["rel","noopener noreferrer"],["target","_blank"]],null,null,null,null,null)),(e()(),lo(-1,null,["CKSource"])),(e()(),lo(-1,null,[" \u2013 Frederico Knabben. All rights reserved. "]))],(function(e,t){var n=t.component;e(t,29,0,n.Editor,n.editorConfig,n.data)}),null);var t,n,r}var mu=ar("app-editor",pu,(function(e){return ho(0,[(e()(),Zi(0,0,null,null,1,"app-editor",[],null,null,null,gu,vu)),Ir(1,4374528,null,0,pu,[],null,null)],null,null)}),{configuration:"configuration",channelId:"channelId"},{ready:"ready"},[]),yu=_n({encapsulation:0,styles:[["*[_ngcontent-%COMP%]{box-sizing:border-box}body[_ngcontent-%COMP%], html[_ngcontent-%COMP%]{margin:0}#overlay[_ngcontent-%COMP%]{font-family:Helvetica;width:100%;height:100%;position:fixed;top:0;bottom:0;left:0;background:#333;display:flex;flex-direction:column;align-items:center;padding:4vh 4vw;overflow:auto}#overlay.hidden[_ngcontent-%COMP%]{display:none}#overlay[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%]{font-size:14px;width:100%;max-width:800px;background:#fff;padding:40px;border-radius:3px;box-shadow:0 0 15px 5px #000}#overlay[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-top:0;text-align:center}#overlay[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:center;margin-bottom:1.5em;width:100%}#overlay[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#0059ff;text-decoration:none}#overlay[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}#overlay[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:flex;align-items:center;margin:15px 0}#overlay[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{width:180px;font-weight:700}#overlay[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:8px;font-size:1em;border:1px solid gray;transition:border .2s}#overlay[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   input.ng-invalid.ng-touched[_ngcontent-%COMP%]{border:1px solid red;outline-color:red}button#start[_ngcontent-%COMP%]{display:block;width:100%;max-width:300px;margin:20px auto 0;padding:15px;background:#61b044;color:#fff;font-weight:700;border:0;border-radius:3px;font-size:1em;cursor:pointer;transition:250ms ease background}button#start[_ngcontent-%COMP%]:hover{background:#53963a}button#start[_ngcontent-%COMP%]:disabled{background:#d3d3d3;cursor:auto}#overlay[_ngcontent-%COMP%]   #additional[_ngcontent-%COMP%]{display:none;flex-wrap:wrap}#overlay[_ngcontent-%COMP%]   #additional.visible[_ngcontent-%COMP%]{display:flex}#overlay.warning[_ngcontent-%COMP%]   #additional[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{color:red}#overlay.warning[_ngcontent-%COMP%]   #user-container[_ngcontent-%COMP%]{border-color:red}#overlay[_ngcontent-%COMP%]   #user-container[_ngcontent-%COMP%]{width:100%;border:1px solid #d8d8d8}#overlay[_ngcontent-%COMP%]   #user-container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:flex;cursor:pointer;align-items:center;height:48px;padding:10px;background:#f7f7f7;transition:250ms ease background}#overlay[_ngcontent-%COMP%]   #user-container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(odd){background:#fff}#overlay[_ngcontent-%COMP%]   #user-container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:hover{background:#eaeaea}#overlay[_ngcontent-%COMP%]   #user-container[_ngcontent-%COMP%]   div.active[_ngcontent-%COMP%]{background:#c1eaca}#overlay[_ngcontent-%COMP%]   #user-container[_ngcontent-%COMP%]   .pseudo-avatar[_ngcontent-%COMP%], #overlay[_ngcontent-%COMP%]   #user-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:32px;height:32px;border-radius:50%;border:2px solid var(--ck-user-avatar-background);margin-right:10px;background:var(--ck-user-avatar-color)}#overlay[_ngcontent-%COMP%]   #user-container[_ngcontent-%COMP%]   .pseudo-avatar[_ngcontent-%COMP%]{font-size:.9em;text-align:center;line-height:30px;background:var(--ck-user-avatar-background);color:var(--ck-user-avatar-color)}#overlay[_ngcontent-%COMP%]   #user-container[_ngcontent-%COMP%]   .pseudo-avatar.anonymous[_ngcontent-%COMP%]{background-image:url(data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%2020%2020%22%3E%0A%20%20%3Cpath%20fill%3D%22%23FFF%22%20fill-rule%3D%22nonzero%22%20d%3D%22M9.8%2020H2c0-5.7%205-5.7%206-7l.2-.8c-1.6-.8-2.7-2.7-2.7-5%200-2.8%202-5.2%204.3-5.2S14%204.4%2014%207.3c0%202.2-1%204-2.6%205l.2.6c1.2%201.3%206%201.4%206%207H9.8z%22%2F%3E%0A%3C%2Fsvg%3E)}.role[_ngcontent-%COMP%]{font-size:11px;border:1px solid #3570aa;border-radius:4px;color:#3570aa;padding:2px 5px;margin-left:10px;font-weight:700;margin-top:2px}"]],data:{}});function ku(e){return ho(0,[(e()(),Zi(0,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),lo(-1,null,[" Loading CkEditor ...\n"]))],null,null)}function _u(e){return ho(0,[(e()(),Zi(0,0,null,null,1,"app-editor",[],null,[[null,"ready"]],(function(e,t,n){var r=!0;return"ready"===t&&(r=!1!==e.component.onEditorReady(n)&&r),r}),gu,vu)),Ir(1,4374528,null,0,pu,[],{configuration:[0,"configuration"],channelId:[1,"channelId"]},{ready:"ready"})],(function(e,t){var n=t.component;e(t,1,0,n.config,n.channelId)}),null)}function bu(e){return ho(0,[ro(671088640,1,{form:0}),(e()(),Qi(16777216,null,null,1,null,ku)),Ir(2,16384,null,0,$c,[rn,tn],{ngIf:[0,"ngIf"]},null),(e()(),Qi(16777216,null,null,1,null,_u)),Ir(4,16384,null,0,$c,[rn,tn],{ngIf:[0,"ngIf"]},null)],(function(e,t){var n=t.component;e(t,2,0,!n.configurationSet),e(t,4,0,n.configurationSet)}),null)}var wu=ar("app-root",_a,(function(e){return ho(0,[(e()(),Zi(0,0,null,null,1,"app-root",[],null,null,null,bu,yu)),Ir(1,114688,null,0,_a,[],null,null)],(function(e,t){e(t,1,0)}),null)}),{},{},[]),xu=function e(){_classCallCheck(this,e)},Cu=new ya(ka,[_a],(function(e){return function(e){for(var t={},n=[],r=!1,i=0;i<e.length;i++){var o=e[i];o.token===bt&&!0===o.value&&(r=!0),1073741824&o.flags&&n.push(o.token),o.index=i,t[kn(o.token)]=o}return{factory:null,providersByKey:t,providers:e,modules:n,isRoot:r}}([Qn(512,At,St,[[8,[mu,wu]],[3,At],It]),Qn(5120,qi,Ji,[[3,qi]]),Qn(4608,Gc,Jc,[qi,[2,Yc]]),Qn(5120,Wr,$i,[yi]),Qn(4608,li,li,[]),Qn(5120,$r,Kr,[]),Qn(5120,Jt,Yi,[]),Qn(5120,$t,Gi,[]),Qn(4608,Jl,$l,[Xc]),Qn(6144,st,null,[Jl]),Qn(4608,zl,Ul,[]),Qn(5120,gl,(function(e,t,n,r,i,o,a,s){return[new Vl(e,t,n),new Gl(r),new Wl(i,o,a,s)]}),[Xc,yi,Xr,Xc,Xc,zl,ti,[2,Hl]]),Qn(4608,ml,ml,[gl,yi]),Qn(135680,_l,_l,[Xc]),Qn(4608,Tl,Tl,[ml,_l,$r]),Qn(6144,Mt,null,[Tl]),Qn(6144,kl,null,[_l]),Qn(4608,Ai,Ai,[yi]),Qn(4608,au,au,[]),Qn(1073742336,Zc,Zc,[]),Qn(1024,De,ru,[]),Qn(1024,Gr,(function(e){return[(t=e,hl("probe",vl),hl("coreTokens",Object.assign({},pl,(t||[]).reduce((function(e,t){return e[t.name]=t.token,e}),{}))),function(){return vl})];var t}),[[2,Oi]]),Qn(512,Jr,Jr,[[2,Gr]]),Qn(131584,Fi,Fi,[yi,ti,ke,De,At,Jr]),Qn(1073742336,Ki,Ki,[Fi]),Qn(1073742336,iu,iu,[[3,iu]]),Qn(1073742336,cu,cu,[]),Qn(1073742336,lu,lu,[]),Qn(1073742336,Bc,Bc,[]),Qn(1073742336,xu,xu,[]),Qn(1073742336,ka,ka,[]),Qn(256,bt,!0,[])])}));(function(){if(je)throw new Error("Cannot enable prod mode after platform setup.");Fe=!1})(),nu().bootstrapModuleFactory(Cu).catch((function(e){return console.error(e)}))}},[[0,0]]]);